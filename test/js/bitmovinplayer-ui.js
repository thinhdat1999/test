(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}(g.bitmovin || (g.bitmovin = {})).playerui = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.ArrayUtils = void 0;
/**
 * @category Utils
 */
var ArrayUtils;
(function (ArrayUtils) {
    /**
     * Removes an item from an array.
     * @param array the array that may contain the item to remove
     * @param item the item to remove from the array
     * @returns {any} the removed item or null if it wasn't part of the array
     */
    function remove(array, item) {
        var index = array.indexOf(item);
        if (index > -1) {
            return array.splice(index, 1)[0];
        }
        else {
            return null;
        }
    }
    ArrayUtils.remove = remove;
})(ArrayUtils = exports.ArrayUtils || (exports.ArrayUtils = {}));

},{}],2:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.AudioTrackSwitchHandler = void 0;
var i18n_1 = require("./localization/i18n");
/**
 * Helper class to handle all audio tracks related events
 *
 * This class listens to player events as well as the `ListSelector` event if selection changed
 *
 * @category Utils
 */
var AudioTrackSwitchHandler = /** @class */ (function () {
    function AudioTrackSwitchHandler(player, element, uimanager) {
        var _this = this;
        this.addAudioTrack = function (event) {
            var audioTrack = event.track;
            if (!_this.listElement.hasItem(audioTrack.id)) {
                _this.listElement.addItem(audioTrack.id, i18n_1.i18n.getLocalizer(audioTrack.label), true);
            }
        };
        this.removeAudioTrack = function (event) {
            var audioTrack = event.track;
            if (_this.listElement.hasItem(audioTrack.id)) {
                _this.listElement.removeItem(audioTrack.id);
            }
        };
        this.selectCurrentAudioTrack = function () {
            var currentAudioTrack = _this.player.getAudio();
            // HLS streams don't always provide this, so we have to check
            if (currentAudioTrack) {
                _this.listElement.selectItem(currentAudioTrack.id);
            }
        };
        this.refreshAudioTracks = function () {
            var audioTracks = _this.player.getAvailableAudio();
            var audioTrackToListItem = function (audioTrack) {
                return { key: audioTrack.id, label: audioTrack.label };
            };
            _this.listElement.synchronizeItems(audioTracks.map(audioTrackToListItem));
            _this.selectCurrentAudioTrack();
        };
        this.player = player;
        this.listElement = element;
        this.uimanager = uimanager;
        this.bindSelectionEvent();
        this.bindPlayerEvents();
        this.refreshAudioTracks();
    }
    AudioTrackSwitchHandler.prototype.bindSelectionEvent = function () {
        var _this = this;
        this.listElement.onItemSelected.subscribe(function (_, value) {
            _this.player.setAudio(value);
        });
    };
    AudioTrackSwitchHandler.prototype.bindPlayerEvents = function () {
        // Update selection when selected track has changed
        this.player.on(this.player.exports.PlayerEvent.AudioChanged, this.selectCurrentAudioTrack);
        // Update tracks when source goes away
        this.player.on(this.player.exports.PlayerEvent.SourceUnloaded, this.refreshAudioTracks);
        // Update tracks when the period within a source changes
        this.player.on(this.player.exports.PlayerEvent.PeriodSwitched, this.refreshAudioTracks);
        // Update tracks when a track is added or removed
        this.player.on(this.player.exports.PlayerEvent.AudioAdded, this.addAudioTrack);
        this.player.on(this.player.exports.PlayerEvent.AudioRemoved, this.removeAudioTrack);
        this.uimanager.getConfig().events.onUpdated.subscribe(this.refreshAudioTracks);
    };
    return AudioTrackSwitchHandler;
}());
exports.AudioTrackSwitchHandler = AudioTrackSwitchHandler;

},{"./localization/i18n":89}],3:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.BrowserUtils = void 0;
/**
 * @category Utils
 */
var BrowserUtils = /** @class */ (function () {
    function BrowserUtils() {
    }
    Object.defineProperty(BrowserUtils, "isMobile", {
        // isMobile only needs to be evaluated once (it cannot change during a browser session)
        // Mobile detection according to Mozilla recommendation: "In summary, we recommend looking for the string “Mobi”
        // anywhere in the User Agent to detect a mobile device."
        // https://developer.mozilla.org/en-US/docs/Web/HTTP/Browser_detection_using_the_user_agent
        get: function () {
            if (!this.windowExists()) {
                return false;
            }
            return navigator && navigator.userAgent && /Mobi/.test(navigator.userAgent);
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(BrowserUtils, "isChrome", {
        get: function () {
            if (!this.windowExists()) {
                return false;
            }
            return navigator && navigator.userAgent && /Chrome/.test(navigator.userAgent);
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(BrowserUtils, "isAndroid", {
        get: function () {
            if (!this.windowExists()) {
                return false;
            }
            return navigator && navigator.userAgent && /Android/.test(navigator.userAgent) && !this.isHisense;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(BrowserUtils, "isIOS", {
        get: function () {
            if (!this.windowExists()) {
                return false;
            }
            return navigator && navigator.userAgent && /iPad|iPhone|iPod/.test(navigator.userAgent);
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(BrowserUtils, "isMacIntel", {
        get: function () {
            if (!this.windowExists()) {
                return false;
            }
            return navigator && navigator.userAgent && navigator.platform === 'MacIntel';
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(BrowserUtils, "isHisense", {
        get: function () {
            if (!this.windowExists()) {
                return false;
            }
            return navigator && navigator.userAgent && /Hisense/.test(navigator.userAgent);
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(BrowserUtils, "isPlayStation", {
        get: function () {
            if (!this.windowExists()) {
                return false;
            }
            return navigator && navigator.userAgent && /PlayStation/i.test(navigator.userAgent);
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(BrowserUtils, "isWebOs", {
        get: function () {
            if (!this.windowExists()) {
                return false;
            }
            return (navigator &&
                navigator.userAgent &&
                (navigator.userAgent.includes('Web0S') || navigator.userAgent.includes('NetCast')));
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(BrowserUtils, "isTizen", {
        get: function () {
            if (!this.windowExists()) {
                return false;
            }
            return navigator && navigator.userAgent && /Tizen/.test(navigator.userAgent);
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(BrowserUtils, "isTouchSupported", {
        // https://hacks.mozilla.org/2013/04/detecting-touch-its-the-why-not-the-how/
        get: function () {
            if (!this.windowExists()) {
                return false;
            }
            return 'ontouchstart' in window || navigator && navigator.userAgent && (navigator.maxTouchPoints > 0 || navigator.msMaxTouchPoints > 0);
        },
        enumerable: false,
        configurable: true
    });
    BrowserUtils.windowExists = function () {
        return typeof window !== 'undefined';
    };
    return BrowserUtils;
}());
exports.BrowserUtils = BrowserUtils;

},{}],4:[function(require,module,exports){
"use strict";
var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        if (typeof b !== "function" && b !== null)
            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
exports.AdClickOverlay = void 0;
var clickoverlay_1 = require("./clickoverlay");
/**
 * A simple click capture overlay for clickThroughUrls of ads.
 *
 * @category Components
 */
var AdClickOverlay = /** @class */ (function (_super) {
    __extends(AdClickOverlay, _super);
    function AdClickOverlay(config) {
        if (config === void 0) { config = {}; }
        var _this = _super.call(this, config) || this;
        _this.config = _this.mergeConfig(config, {
            acceptsTouchWithUiHidden: true,
        }, _this.config);
        return _this;
    }
    AdClickOverlay.prototype.configure = function (player, uimanager) {
        var _this = this;
        _super.prototype.configure.call(this, player, uimanager);
        var clickThroughCallback = null;
        player.on(player.exports.PlayerEvent.AdStarted, function (event) {
            var ad = event.ad;
            _this.setUrl(ad.clickThroughUrl);
            clickThroughCallback = ad.clickThroughUrlOpened;
        });
        // Clear click-through URL when ad has finished
        var adFinishedHandler = function () {
            _this.setUrl(null);
        };
        player.on(player.exports.PlayerEvent.AdFinished, adFinishedHandler);
        player.on(player.exports.PlayerEvent.AdSkipped, adFinishedHandler);
        player.on(player.exports.PlayerEvent.AdError, adFinishedHandler);
        this.onClick.subscribe(function () {
            // Pause the ad when overlay is clicked
            player.pause('ui-ad-click-overlay');
            if (clickThroughCallback) {
                clickThroughCallback();
            }
        });
    };
    return AdClickOverlay;
}(clickoverlay_1.ClickOverlay));
exports.AdClickOverlay = AdClickOverlay;

},{"./clickoverlay":16}],5:[function(require,module,exports){
"use strict";
var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        if (typeof b !== "function" && b !== null)
            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
exports.AdMessageLabel = void 0;
var label_1 = require("./label");
var stringutils_1 = require("../stringutils");
var i18n_1 = require("../localization/i18n");
/**
 * A label that displays a message about a running ad, optionally with a countdown.
 *
 * @category Components
 */
var AdMessageLabel = /** @class */ (function (_super) {
    __extends(AdMessageLabel, _super);
    function AdMessageLabel(config) {
        if (config === void 0) { config = {}; }
        var _this = _super.call(this, config) || this;
        _this.config = _this.mergeConfig(config, {
            cssClass: 'ui-label-ad-message',
            text: i18n_1.i18n.getLocalizer('ads.remainingTime'),
        }, _this.config);
        return _this;
    }
    AdMessageLabel.prototype.configure = function (player, uimanager) {
        var _this = this;
        _super.prototype.configure.call(this, player, uimanager);
        var config = this.getConfig();
        var text = config.text;
        var updateMessageHandler = function () {
            _this.setText(stringutils_1.StringUtils.replaceAdMessagePlaceholders(i18n_1.i18n.performLocalization(text), null, player));
        };
        var adStartHandler = function (event) {
            var uiConfig = event.ad.uiConfig;
            text = uiConfig && uiConfig.message || config.text;
            updateMessageHandler();
            player.on(player.exports.PlayerEvent.TimeChanged, updateMessageHandler);
        };
        var adEndHandler = function () {
            player.off(player.exports.PlayerEvent.TimeChanged, updateMessageHandler);
        };
        player.on(player.exports.PlayerEvent.AdStarted, adStartHandler);
        player.on(player.exports.PlayerEvent.AdSkipped, adEndHandler);
        player.on(player.exports.PlayerEvent.AdError, adEndHandler);
        player.on(player.exports.PlayerEvent.AdFinished, adEndHandler);
    };
    return AdMessageLabel;
}(label_1.Label));
exports.AdMessageLabel = AdMessageLabel;

},{"../localization/i18n":89,"../stringutils":109,"./label":28}],6:[function(require,module,exports){
"use strict";
var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        if (typeof b !== "function" && b !== null)
            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
exports.AdSkipButton = void 0;
var button_1 = require("./button");
var stringutils_1 = require("../stringutils");
/**
 * A button that is displayed during ads and can be used to skip the ad.
 *
 * @category Buttons
 */
var AdSkipButton = /** @class */ (function (_super) {
    __extends(AdSkipButton, _super);
    function AdSkipButton(config) {
        if (config === void 0) { config = {}; }
        var _this = _super.call(this, config) || this;
        _this.config = _this.mergeConfig(config, {
            cssClass: 'ui-button-ad-skip',
            untilSkippableMessage: 'Skip ad in {remainingTime}',
            skippableMessage: 'Skip ad',
            acceptsTouchWithUiHidden: true,
        }, _this.config);
        return _this;
    }
    AdSkipButton.prototype.configure = function (player, uimanager) {
        var _this = this;
        _super.prototype.configure.call(this, player, uimanager);
        var config = this.getConfig();
        var untilSkippableMessage = config.untilSkippableMessage;
        var skippableMessage = config.skippableMessage;
        var skipOffset = -1;
        var updateSkipMessageHandler = function () {
            _this.show();
            // Update the skip message on the button
            if (player.getCurrentTime() < skipOffset) {
                _this.setText(stringutils_1.StringUtils.replaceAdMessagePlaceholders(untilSkippableMessage, skipOffset, player));
                _this.disable();
            }
            else {
                _this.setText(skippableMessage);
                _this.enable();
            }
        };
        var adStartHandler = function (event) {
            var ad = event.ad;
            skipOffset = ad.skippableAfter;
            untilSkippableMessage = ad.uiConfig && ad.uiConfig.untilSkippableMessage || config.untilSkippableMessage;
            skippableMessage = ad.uiConfig && ad.uiConfig.skippableMessage || config.skippableMessage;
            // Display this button only if ad is skippable.
            // Non-skippable ads will return -1 for skippableAfter for player version < v8.3.0.
            if (typeof skipOffset === 'number' && skipOffset >= 0) {
                updateSkipMessageHandler();
                player.on(player.exports.PlayerEvent.TimeChanged, updateSkipMessageHandler);
            }
            else {
                _this.hide();
            }
        };
        var adEndHandler = function () {
            player.off(player.exports.PlayerEvent.TimeChanged, updateSkipMessageHandler);
        };
        player.on(player.exports.PlayerEvent.AdStarted, adStartHandler);
        player.on(player.exports.PlayerEvent.AdSkipped, adEndHandler);
        player.on(player.exports.PlayerEvent.AdError, adEndHandler);
        player.on(player.exports.PlayerEvent.AdFinished, adEndHandler);
        this.onClick.subscribe(function () {
            // Try to skip the ad (this only works if it is skippable so we don't need to take extra care of that here)
            player.ads.skip();
        });
    };
    return AdSkipButton;
}(button_1.Button));
exports.AdSkipButton = AdSkipButton;

},{"../stringutils":109,"./button":12}],7:[function(require,module,exports){
"use strict";
var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        if (typeof b !== "function" && b !== null)
            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
exports.AirPlayToggleButton = void 0;
var togglebutton_1 = require("./togglebutton");
var i18n_1 = require("../localization/i18n");
/**
 * A button that toggles Apple AirPlay.
 *
 * @category Buttons
 */
var AirPlayToggleButton = /** @class */ (function (_super) {
    __extends(AirPlayToggleButton, _super);
    function AirPlayToggleButton(config) {
        if (config === void 0) { config = {}; }
        var _this = _super.call(this, config) || this;
        _this.config = _this.mergeConfig(config, {
            cssClass: 'ui-airplaytogglebutton',
            text: i18n_1.i18n.getLocalizer('appleAirplay'),
        }, _this.config);
        return _this;
    }
    AirPlayToggleButton.prototype.configure = function (player, uimanager) {
        var _this = this;
        _super.prototype.configure.call(this, player, uimanager);
        if (!player.isAirplayAvailable) {
            // If the player does not support Airplay (player 7.0), we just hide this component and skip configuration
            this.hide();
            return;
        }
        this.onClick.subscribe(function () {
            if (player.isAirplayAvailable()) {
                player.showAirplayTargetPicker();
            }
            else {
                if (console) {
                    console.log('AirPlay unavailable');
                }
            }
        });
        var airPlayAvailableHandler = function () {
            if (player.isAirplayAvailable()) {
                _this.show();
            }
            else {
                _this.hide();
            }
        };
        var airPlayChangedHandler = function () {
            if (player.isAirplayActive()) {
                _this.on();
            }
            else {
                _this.off();
            }
        };
        player.on(player.exports.PlayerEvent.AirplayAvailable, airPlayAvailableHandler);
        player.on(player.exports.PlayerEvent.AirplayChanged, airPlayChangedHandler);
        // Startup init
        airPlayAvailableHandler(); // Hide button if AirPlay is not available
        airPlayChangedHandler();
    };
    return AirPlayToggleButton;
}(togglebutton_1.ToggleButton));
exports.AirPlayToggleButton = AirPlayToggleButton;

},{"../localization/i18n":89,"./togglebutton":72}],8:[function(require,module,exports){
"use strict";
var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        if (typeof b !== "function" && b !== null)
            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
exports.AudioQualitySelectBox = void 0;
var selectbox_1 = require("./selectbox");
var i18n_1 = require("../localization/i18n");
/**
 * A select box providing a selection between 'auto' and the available audio qualities.
 *
 * @category Components
 */
var AudioQualitySelectBox = /** @class */ (function (_super) {
    __extends(AudioQualitySelectBox, _super);
    function AudioQualitySelectBox(config) {
        if (config === void 0) { config = {}; }
        var _this = _super.call(this, config) || this;
        _this.config = _this.mergeConfig(config, {
            cssClasses: ['ui-audioqualityselectbox'],
        }, _this.config);
        return _this;
    }
    AudioQualitySelectBox.prototype.configure = function (player, uimanager) {
        var _this = this;
        _super.prototype.configure.call(this, player, uimanager);
        var selectCurrentAudioQuality = function () {
            _this.selectItem(player.getAudioQuality().id);
        };
        var updateAudioQualities = function () {
            var audioQualities = player.getAvailableAudioQualities();
            _this.clearItems();
            // Add entry for automatic quality switching (default setting)
            _this.addItem('auto', i18n_1.i18n.getLocalizer('auto'));
            // Add audio qualities
            for (var _i = 0, audioQualities_1 = audioQualities; _i < audioQualities_1.length; _i++) {
                var audioQuality = audioQualities_1[_i];
                _this.addItem(audioQuality.id, audioQuality.label);
            }
            // Select initial quality
            selectCurrentAudioQuality();
        };
        this.onItemSelected.subscribe(function (sender, value) {
            player.setAudioQuality(value);
        });
        // Update qualities when audio track has changed
        player.on(player.exports.PlayerEvent.AudioChanged, updateAudioQualities);
        // Update qualities when source goes away
        player.on(player.exports.PlayerEvent.SourceUnloaded, updateAudioQualities);
        // Update qualities when the period within a source changes
        player.on(player.exports.PlayerEvent.PeriodSwitched, updateAudioQualities);
        // Update quality selection when quality is changed (from outside)
        player.on(player.exports.PlayerEvent.AudioQualityChanged, selectCurrentAudioQuality);
        if (player.exports.PlayerEvent.AudioQualityAdded) {
            // Update qualities when their availability changed
            // TODO: remove any cast after next player release
            player.on(player.exports.PlayerEvent.AudioQualityAdded, updateAudioQualities);
            player.on(player.exports.PlayerEvent.AudioQualityRemoved, updateAudioQualities);
        }
        uimanager.getConfig().events.onUpdated.subscribe(updateAudioQualities);
    };
    return AudioQualitySelectBox;
}(selectbox_1.SelectBox));
exports.AudioQualitySelectBox = AudioQualitySelectBox;

},{"../localization/i18n":89,"./selectbox":44}],9:[function(require,module,exports){
"use strict";
var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        if (typeof b !== "function" && b !== null)
            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
exports.AudioTrackListBox = void 0;
var listbox_1 = require("./listbox");
var audiotrackutils_1 = require("../audiotrackutils");
/**
 * A element that is similar to a select box where the user can select a subtitle
 *
 * @category Components
 */
var AudioTrackListBox = /** @class */ (function (_super) {
    __extends(AudioTrackListBox, _super);
    function AudioTrackListBox() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    AudioTrackListBox.prototype.configure = function (player, uimanager) {
        _super.prototype.configure.call(this, player, uimanager);
        new audiotrackutils_1.AudioTrackSwitchHandler(player, this, uimanager);
    };
    return AudioTrackListBox;
}(listbox_1.ListBox));
exports.AudioTrackListBox = AudioTrackListBox;

},{"../audiotrackutils":2,"./listbox":29}],10:[function(require,module,exports){
"use strict";
var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        if (typeof b !== "function" && b !== null)
            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
exports.AudioTrackSelectBox = void 0;
var selectbox_1 = require("./selectbox");
var audiotrackutils_1 = require("../audiotrackutils");
/**
 * A select box providing a selection between available audio tracks (e.g. different languages).
 *
 * @category Components
 */
var AudioTrackSelectBox = /** @class */ (function (_super) {
    __extends(AudioTrackSelectBox, _super);
    function AudioTrackSelectBox(config) {
        if (config === void 0) { config = {}; }
        var _this = _super.call(this, config) || this;
        _this.config = _this.mergeConfig(config, {
            cssClasses: ['ui-audiotrackselectbox'],
        }, _this.config);
        return _this;
    }
    AudioTrackSelectBox.prototype.configure = function (player, uimanager) {
        _super.prototype.configure.call(this, player, uimanager);
        new audiotrackutils_1.AudioTrackSwitchHandler(player, this, uimanager);
    };
    return AudioTrackSelectBox;
}(selectbox_1.SelectBox));
exports.AudioTrackSelectBox = AudioTrackSelectBox;

},{"../audiotrackutils":2,"./selectbox":44}],11:[function(require,module,exports){
"use strict";
var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        if (typeof b !== "function" && b !== null)
            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
exports.BufferingOverlay = void 0;
var container_1 = require("./container");
var component_1 = require("./component");
var timeout_1 = require("../timeout");
/**
 * Overlays the player and displays a buffering indicator.
 *
 * @category Components
 */
var BufferingOverlay = /** @class */ (function (_super) {
    __extends(BufferingOverlay, _super);
    function BufferingOverlay(config) {
        if (config === void 0) { config = {}; }
        var _this = _super.call(this, config) || this;
        _this.indicators = [
            new component_1.Component({ tag: 'div', cssClass: 'ui-buffering-overlay-indicator', role: 'img' }),
            new component_1.Component({ tag: 'div', cssClass: 'ui-buffering-overlay-indicator', role: 'img' }),
            new component_1.Component({ tag: 'div', cssClass: 'ui-buffering-overlay-indicator', role: 'img' }),
        ];
        _this.config = _this.mergeConfig(config, {
            cssClass: 'ui-buffering-overlay',
            hidden: true,
            components: _this.indicators,
            showDelayMs: 1000,
        }, _this.config);
        return _this;
    }
    BufferingOverlay.prototype.configure = function (player, uimanager) {
        var _this = this;
        _super.prototype.configure.call(this, player, uimanager);
        var config = this.getConfig();
        var overlayShowTimeout = new timeout_1.Timeout(config.showDelayMs, function () {
            _this.show();
        });
        var showOverlay = function () {
            overlayShowTimeout.start();
        };
        var hideOverlay = function () {
            overlayShowTimeout.clear();
            _this.hide();
        };
        player.on(player.exports.PlayerEvent.StallStarted, showOverlay);
        player.on(player.exports.PlayerEvent.StallEnded, hideOverlay);
        player.on(player.exports.PlayerEvent.Play, showOverlay);
        player.on(player.exports.PlayerEvent.Playing, hideOverlay);
        player.on(player.exports.PlayerEvent.Paused, hideOverlay);
        player.on(player.exports.PlayerEvent.Seek, showOverlay);
        player.on(player.exports.PlayerEvent.Seeked, hideOverlay);
        player.on(player.exports.PlayerEvent.TimeShift, showOverlay);
        player.on(player.exports.PlayerEvent.TimeShifted, hideOverlay);
        player.on(player.exports.PlayerEvent.SourceUnloaded, hideOverlay);
        // Show overlay if player is already stalled at init
        if (player.isStalled()) {
            this.show();
        }
    };
    return BufferingOverlay;
}(container_1.Container));
exports.BufferingOverlay = BufferingOverlay;

},{"../timeout":111,"./component":18,"./container":19}],12:[function(require,module,exports){
"use strict";
var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        if (typeof b !== "function" && b !== null)
            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
exports.Button = void 0;
var component_1 = require("./component");
var dom_1 = require("../dom");
var eventdispatcher_1 = require("../eventdispatcher");
var i18n_1 = require("../localization/i18n");
/**
 * A simple clickable button.
 *
 * @category Components
 */
var Button = /** @class */ (function (_super) {
    __extends(Button, _super);
    function Button(config) {
        var _this = _super.call(this, config) || this;
        _this.buttonEvents = {
            onClick: new eventdispatcher_1.EventDispatcher(),
        };
        _this.config = _this.mergeConfig(config, {
            cssClass: 'ui-button',
            role: 'button',
            tabIndex: 0,
            acceptsTouchWithUiHidden: false,
        }, _this.config);
        return _this;
    }
    Button.prototype.toDomElement = function () {
        var _this = this;
        var buttonElementAttributes = {
            'id': this.config.id,
            'aria-label': i18n_1.i18n.performLocalization(this.config.ariaLabel || this.config.text),
            'class': this.getCssClasses(),
            'type': 'button',
            /**
            * WCAG20 standard to display if a button is pressed or not
            */
            'aria-pressed': 'false',
            'tabindex': this.config.tabIndex.toString(),
        };
        if (this.config.role != null) {
            buttonElementAttributes['role'] = this.config.role;
        }
        // Create the button element with the text label
        var buttonElement = new dom_1.DOM('button', buttonElementAttributes, this).append(new dom_1.DOM('span', {
            'class': this.prefixCss('label'),
        }).html(i18n_1.i18n.performLocalization(this.config.text)));
        // Listen for the click event on the button element and trigger the corresponding event on the button component
        buttonElement.on('click', function () {
            _this.onClickEvent();
        });
        return buttonElement;
    };
    /**
     * Sets text on the label of the button.
     * @param text the text to put into the label of the button
     */
    Button.prototype.setText = function (text) {
        this.getDomElement().find('.' + this.prefixCss('label')).html(i18n_1.i18n.performLocalization(text));
    };
    Button.prototype.onClickEvent = function () {
        this.buttonEvents.onClick.dispatch(this);
    };
    Object.defineProperty(Button.prototype, "onClick", {
        /**
         * Gets the event that is fired when the button is clicked.
         * @returns {Event<Button<Config>, NoArgs>}
         */
        get: function () {
            return this.buttonEvents.onClick.getEvent();
        },
        enumerable: false,
        configurable: true
    });
    return Button;
}(component_1.Component));
exports.Button = Button;

},{"../dom":82,"../eventdispatcher":84,"../localization/i18n":89,"./component":18}],13:[function(require,module,exports){
"use strict";
var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        if (typeof b !== "function" && b !== null)
            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
exports.CastStatusOverlay = void 0;
var container_1 = require("./container");
var label_1 = require("./label");
var i18n_1 = require("../localization/i18n");
/**
 * Overlays the player and displays the status of a Cast session.
 *
 * @category Components
 */
var CastStatusOverlay = /** @class */ (function (_super) {
    __extends(CastStatusOverlay, _super);
    function CastStatusOverlay(config) {
        if (config === void 0) { config = {}; }
        var _this = _super.call(this, config) || this;
        _this.statusLabel = new label_1.Label({ cssClass: 'ui-cast-status-label' });
        _this.config = _this.mergeConfig(config, {
            cssClass: 'ui-cast-status-overlay',
            components: [_this.statusLabel],
            hidden: true,
        }, _this.config);
        return _this;
    }
    CastStatusOverlay.prototype.configure = function (player, uimanager) {
        var _this = this;
        _super.prototype.configure.call(this, player, uimanager);
        player.on(player.exports.PlayerEvent.CastWaitingForDevice, function (event) {
            _this.show();
            // Get device name and update status text while connecting
            var castDeviceName = event.castPayload.deviceName;
            _this.statusLabel.setText(i18n_1.i18n.getLocalizer('connectingTo', { castDeviceName: castDeviceName }));
        });
        player.on(player.exports.PlayerEvent.CastStarted, function (event) {
            // Session is started or resumed
            // For cases when a session is resumed, we do not receive the previous events and therefore show the status panel
            // here too
            _this.show();
            var castDeviceName = event.deviceName;
            _this.statusLabel.setText(i18n_1.i18n.getLocalizer('playingOn', { castDeviceName: castDeviceName }));
        });
        player.on(player.exports.PlayerEvent.CastStopped, function (event) {
            // Cast session gone, hide the status panel
            _this.hide();
        });
    };
    return CastStatusOverlay;
}(container_1.Container));
exports.CastStatusOverlay = CastStatusOverlay;

},{"../localization/i18n":89,"./container":19,"./label":28}],14:[function(require,module,exports){
"use strict";
var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        if (typeof b !== "function" && b !== null)
            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
exports.CastToggleButton = void 0;
var togglebutton_1 = require("./togglebutton");
var i18n_1 = require("../localization/i18n");
/**
 * A button that toggles casting to a Cast receiver.
 *
 * @category Buttons
 */
var CastToggleButton = /** @class */ (function (_super) {
    __extends(CastToggleButton, _super);
    function CastToggleButton(config) {
        if (config === void 0) { config = {}; }
        var _this = _super.call(this, config) || this;
        _this.config = _this.mergeConfig(config, {
            cssClass: 'ui-casttogglebutton',
            text: i18n_1.i18n.getLocalizer('googleCast'),
        }, _this.config);
        return _this;
    }
    CastToggleButton.prototype.configure = function (player, uimanager) {
        var _this = this;
        _super.prototype.configure.call(this, player, uimanager);
        this.onClick.subscribe(function () {
            if (player.isCastAvailable()) {
                if (player.isCasting()) {
                    player.castStop();
                }
                else {
                    player.castVideo();
                }
            }
            else {
                if (console) {
                    console.log('Cast unavailable');
                }
            }
        });
        var castAvailableHander = function () {
            if (player.isCastAvailable()) {
                _this.show();
            }
            else {
                _this.hide();
            }
        };
        player.on(player.exports.PlayerEvent.CastAvailable, castAvailableHander);
        // Toggle button 'on' state
        player.on(player.exports.PlayerEvent.CastWaitingForDevice, function () {
            _this.on();
        });
        player.on(player.exports.PlayerEvent.CastStarted, function () {
            // When a session is resumed, there is no CastStart event, so we also need to toggle here for such cases
            _this.on();
        });
        player.on(player.exports.PlayerEvent.CastStopped, function () {
            _this.off();
        });
        // Startup init
        castAvailableHander(); // Hide button if Cast not available
        if (player.isCasting()) {
            this.on();
        }
    };
    return CastToggleButton;
}(togglebutton_1.ToggleButton));
exports.CastToggleButton = CastToggleButton;

},{"../localization/i18n":89,"./togglebutton":72}],15:[function(require,module,exports){
"use strict";
var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        if (typeof b !== "function" && b !== null)
            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
exports.CastUIContainer = void 0;
var uicontainer_1 = require("./uicontainer");
var timeout_1 = require("../timeout");
/**
 * The base container for Cast receivers that contains all of the UI and takes care that the UI is shown on
 * certain playback events.
 *
 * @category Containers
 */
var CastUIContainer = /** @class */ (function (_super) {
    __extends(CastUIContainer, _super);
    function CastUIContainer(config) {
        return _super.call(this, config) || this;
    }
    CastUIContainer.prototype.configure = function (player, uimanager) {
        var _this = this;
        _super.prototype.configure.call(this, player, uimanager);
        var config = this.getConfig();
        /*
         * Show UI on Cast devices at certain playback events
         *
         * Since a Cast receiver does not have a direct HCI, we show the UI on certain playback events to give the user
         * a chance to see on the screen what's going on, e.g. on play/pause or a seek the UI is shown and the user can
         * see the current time and position on the seek bar.
         * The UI is shown permanently while playback is paused, otherwise hides automatically after the configured
         * hide delay time.
         */
        var isUiShown = false;
        var hideUi = function () {
            uimanager.onControlsHide.dispatch(_this);
            isUiShown = false;
        };
        this.castUiHideTimeout = new timeout_1.Timeout(config.hideDelay, hideUi);
        var showUi = function () {
            if (!isUiShown) {
                uimanager.onControlsShow.dispatch(_this);
                isUiShown = true;
            }
        };
        var showUiPermanently = function () {
            showUi();
            _this.castUiHideTimeout.clear();
        };
        var showUiWithTimeout = function () {
            showUi();
            _this.castUiHideTimeout.start();
        };
        var showUiAfterSeek = function () {
            if (player.isPlaying()) {
                showUiWithTimeout();
            }
            else {
                showUiPermanently();
            }
        };
        player.on(player.exports.PlayerEvent.Play, showUiWithTimeout);
        player.on(player.exports.PlayerEvent.Paused, showUiPermanently);
        player.on(player.exports.PlayerEvent.Seek, showUiPermanently);
        player.on(player.exports.PlayerEvent.Seeked, showUiAfterSeek);
        uimanager.getConfig().events.onUpdated.subscribe(showUiWithTimeout);
    };
    CastUIContainer.prototype.release = function () {
        _super.prototype.release.call(this);
        this.castUiHideTimeout.clear();
    };
    return CastUIContainer;
}(uicontainer_1.UIContainer));
exports.CastUIContainer = CastUIContainer;

},{"../timeout":111,"./uicontainer":74}],16:[function(require,module,exports){
"use strict";
var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        if (typeof b !== "function" && b !== null)
            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
exports.ClickOverlay = void 0;
var button_1 = require("./button");
/**
 * A click overlay that opens an url in a new tab if clicked.
 *
 * @category Components
 */
var ClickOverlay = /** @class */ (function (_super) {
    __extends(ClickOverlay, _super);
    function ClickOverlay(config) {
        if (config === void 0) { config = {}; }
        var _this = _super.call(this, config) || this;
        _this.config = _this.mergeConfig(config, {
            cssClass: 'ui-clickoverlay',
            role: _this.config.role,
        }, _this.config);
        return _this;
    }
    ClickOverlay.prototype.initialize = function () {
        _super.prototype.initialize.call(this);
        this.setUrl(this.config.url);
        var element = this.getDomElement();
        element.on('click', function () {
            if (element.data('url')) {
                window.open(element.data('url'), '_blank');
            }
        });
    };
    /**
     * Gets the URL that should be followed when the watermark is clicked.
     * @returns {string} the watermark URL
     */
    ClickOverlay.prototype.getUrl = function () {
        return this.getDomElement().data('url');
    };
    ClickOverlay.prototype.setUrl = function (url) {
        if (url === undefined || url == null) {
            url = '';
        }
        this.getDomElement().data('url', url);
    };
    return ClickOverlay;
}(button_1.Button));
exports.ClickOverlay = ClickOverlay;

},{"./button":12}],17:[function(require,module,exports){
"use strict";
var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        if (typeof b !== "function" && b !== null)
            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
exports.CloseButton = void 0;
var button_1 = require("./button");
var i18n_1 = require("../localization/i18n");
/**
 * A button that closes (hides) a configured component.
 *
 * @category Buttons
 */
var CloseButton = /** @class */ (function (_super) {
    __extends(CloseButton, _super);
    function CloseButton(config) {
        var _this = _super.call(this, config) || this;
        _this.config = _this.mergeConfig(config, {
            cssClass: 'ui-closebutton',
            text: i18n_1.i18n.getLocalizer('close'),
        }, _this.config);
        return _this;
    }
    CloseButton.prototype.configure = function (player, uimanager) {
        _super.prototype.configure.call(this, player, uimanager);
        var config = this.getConfig();
        this.onClick.subscribe(function () {
            config.target.hide();
        });
    };
    return CloseButton;
}(button_1.Button));
exports.CloseButton = CloseButton;

},{"../localization/i18n":89,"./button":12}],18:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.Component = exports.ViewMode = void 0;
var guid_1 = require("../guid");
var dom_1 = require("../dom");
var eventdispatcher_1 = require("../eventdispatcher");
var i18n_1 = require("../localization/i18n");
var ViewMode;
(function (ViewMode) {
    /**
     * Indicates that the component has entered a view mode where it must stay visible. Auto-hiding of this component
     * must be disabled as long as it resides in this state.
     */
    ViewMode["Persistent"] = "persistent";
    /**
     * The control can be hidden at any time.
     */
    ViewMode["Temporary"] = "temporary";
})(ViewMode = exports.ViewMode || (exports.ViewMode = {}));
/**
 * The base class of the UI framework.
 * Each component must extend this class and optionally the config interface.
 *
 * @category Components
 */
var Component = exports.Component = /** @class */ (function () {
    /**
     * Constructs a component with an optionally supplied config. All subclasses must call the constructor of their
     * superclass and then merge their configuration into the component's configuration.
     * @param config the configuration for the component
     */
    function Component(config) {
        if (config === void 0) { config = {}; }
        /**
         * The list of events that this component offers. These events should always be private and only directly
         * accessed from within the implementing component.
         *
         * Because TypeScript does not support private properties with the same name on different class hierarchy levels
         * (i.e. superclass and subclass cannot contain a private property with the same name), the default naming
         * convention for the event list of a component that should be followed by subclasses is the concatenation of the
         * camel-cased class name + 'Events' (e.g. SubClass extends Component => subClassEvents).
         * See {@link #componentEvents} for an example.
         *
         * Event properties should be named in camel case with an 'on' prefix and in the present tense. Async events may
         * have a start event (when the operation starts) in the present tense, and must have an end event (when the
         * operation ends) in the past tense (or present tense in special cases (e.g. onStart/onStarted or onPlay/onPlaying).
         * See {@link #componentEvents#onShow} for an example.
         *
         * Each event should be accompanied with a protected method named by the convention eventName + 'Event'
         * (e.g. onStartEvent), that actually triggers the event by calling {@link EventDispatcher#dispatch dispatch} and
         * passing a reference to the component as first parameter. Components should always trigger their events with these
         * methods. Implementing this pattern gives subclasses means to directly listen to the events by overriding the
         * method (and saving the overhead of passing a handler to the event dispatcher) and more importantly to trigger
         * these events without having access to the private event list.
         * See {@link #onShow} for an example.
         *
         * To provide external code the possibility to listen to this component's events (subscribe, unsubscribe, etc.),
         * each event should also be accompanied by a public getter function with the same name as the event's property,
         * that returns the {@link Event} obtained from the event dispatcher by calling {@link EventDispatcher#getEvent}.
         * See {@link #onShow} for an example.
         *
         * Full example for an event representing an example action in a example component:
         *
         * <code>
         * // Define an example component class with an example event
         * class ExampleComponent extends Component<ComponentConfig> {
           *
           *     private exampleComponentEvents = {
           *         onExampleAction: new EventDispatcher<ExampleComponent, NoArgs>()
           *     }
           *
           *     // constructor and other stuff...
           *
           *     protected onExampleActionEvent() {
           *        this.exampleComponentEvents.onExampleAction.dispatch(this);
           *    }
           *
           *    get onExampleAction(): Event<ExampleComponent, NoArgs> {
           *        return this.exampleComponentEvents.onExampleAction.getEvent();
           *    }
           * }
         *
         * // Create an instance of the component somewhere
         * var exampleComponentInstance = new ExampleComponent();
         *
         * // Subscribe to the example event on the component
         * exampleComponentInstance.onExampleAction.subscribe(function (sender: ExampleComponent) {
           *     console.log('onExampleAction of ' + sender + ' has fired!');
           * });
         * </code>
         */
        this.componentEvents = {
            onShow: new eventdispatcher_1.EventDispatcher(),
            onHide: new eventdispatcher_1.EventDispatcher(),
            onViewModeChanged: new eventdispatcher_1.EventDispatcher(),
            onHoverChanged: new eventdispatcher_1.EventDispatcher(),
            onEnabled: new eventdispatcher_1.EventDispatcher(),
            onDisabled: new eventdispatcher_1.EventDispatcher(),
        };
        // Create the configuration for this component
        this.config = this.mergeConfig(config, {
            tag: 'div',
            id: 'bmpui-id-' + guid_1.Guid.next(),
            cssPrefix: 'bmpui',
            cssClass: 'ui-component',
            cssClasses: [],
            hidden: false,
            disabled: false,
        }, {});
        this.viewMode = ViewMode.Temporary;
    }
    /**
     * Initializes the component, e.g. by applying config settings.
     * This method must not be called from outside the UI framework.
     *
     * This method is automatically called by the {@link UIInstanceManager}. If the component is an inner component of
     * some component, and thus encapsulated abd managed internally and never directly exposed to the UIManager,
     * this method must be called from the managing component's {@link #initialize} method.
     */
    Component.prototype.initialize = function () {
        this.hidden = this.config.hidden;
        this.disabled = this.config.disabled;
        // Hide the component at initialization if it is configured to be hidden
        if (this.isHidden()) {
            this.hidden = false; // Set flag to false for the following hide() call to work (hide() checks the flag)
            this.hide();
        }
        // Disable the component at initialization if it is configured to be disabled
        if (this.isDisabled()) {
            this.disabled = false; // Set flag to false for the following disable() call to work (disable() checks the flag)
            this.disable();
        }
    };
    /**
     * Configures the component for the supplied Player and UIInstanceManager. This is the place where all the magic
     * happens, where components typically subscribe and react to events (on their DOM element, the Player, or the
     * UIInstanceManager), and basically everything that makes them interactive.
     * This method is called only once, when the UIManager initializes the UI.
     *
     * Subclasses usually overwrite this method to add their own functionality.
     *
     * @param player the player which this component controls
     * @param uimanager the UIInstanceManager that manages this component
     */
    Component.prototype.configure = function (player, uimanager) {
        var _this = this;
        this.onShow.subscribe(function () { return uimanager.onComponentShow.dispatch(_this); });
        this.onHide.subscribe(function () { return uimanager.onComponentHide.dispatch(_this); });
        this.onViewModeChanged.subscribe(function (_, args) { return uimanager.onComponentViewModeChanged.dispatch(_this, args); });
        // Track the hovered state of the element
        this.getDomElement().on('mouseenter', function () { return _this.onHoverChangedEvent(true); });
        this.getDomElement().on('mouseleave', function () { return _this.onHoverChangedEvent(false); });
    };
    /**
     * Releases all resources and dependencies that the component holds. Player, DOM, and UIManager events are
     * automatically removed during release and do not explicitly need to be removed here.
     * This method is called by the UIManager when it releases the UI.
     *
     * Subclasses that need to release resources should override this method and call super.release().
     */
    Component.prototype.release = function () {
        // Nothing to do here, override where necessary
    };
    /**
     * Generate the DOM element for this component.
     *
     * Subclasses usually overwrite this method to extend or replace the DOM element with their own design.
     */
    Component.prototype.toDomElement = function () {
        var element = new dom_1.DOM(this.config.tag, {
            'id': this.config.id,
            'class': this.getCssClasses(),
            'role': this.config.role,
        }, this);
        return element;
    };
    /**
     * Returns the DOM element of this component. Creates the DOM element if it does not yet exist.
     *
     * Should not be overwritten by subclasses.
     *
     * @returns {DOM}
     */
    Component.prototype.getDomElement = function () {
        if (!this.element) {
            this.element = this.toDomElement();
        }
        return this.element;
    };
    /**
     * Checks if this component has a DOM element.
     */
    Component.prototype.hasDomElement = function () {
        return Boolean(this.element);
    };
    Component.prototype.setAriaLabel = function (label) {
        this.setAriaAttr('label', i18n_1.i18n.performLocalization(label));
    };
    Component.prototype.setAriaAttr = function (name, value) {
        this.getDomElement().attr("aria-".concat(name), value);
    };
    /**
     * Merges a configuration with a default configuration and a base configuration from the superclass.
     *
     * @param config the configuration settings for the components, as usually passed to the constructor
     * @param defaults a default configuration for settings that are not passed with the configuration
     * @param base configuration inherited from a superclass
     * @returns {Config}
     */
    Component.prototype.mergeConfig = function (config, defaults, base) {
        // Extend default config with supplied config
        var merged = Object.assign({}, base, defaults, config);
        // Return the extended config
        return merged;
    };
    /**
     * Helper method that returns a string of all CSS classes of the component.
     *
     * @returns {string}
     */
    Component.prototype.getCssClasses = function () {
        var _this = this;
        // Merge all CSS classes into single array
        var flattenedArray = [this.config.cssClass].concat(this.config.cssClasses);
        // Prefix classes
        flattenedArray = flattenedArray.map(function (css) {
            return _this.prefixCss(css);
        });
        // Join array values into a string
        var flattenedString = flattenedArray.join(' ');
        // Return trimmed string to prevent whitespace at the end from the join operation
        return flattenedString.trim();
    };
    Component.prototype.prefixCss = function (cssClassOrId) {
        return this.config.cssPrefix + '-' + cssClassOrId;
    };
    /**
     * Returns the configuration object of the component.
     * @returns {Config}
     */
    Component.prototype.getConfig = function () {
        return this.config;
    };
    /**
     * Hides the component if shown.
     * This method basically transfers the component into the hidden state. Actual hiding is done via CSS.
     */
    Component.prototype.hide = function () {
        if (!this.hidden) {
            this.hidden = true;
            this.getDomElement().addClass(this.prefixCss(Component.CLASS_HIDDEN));
            this.onHideEvent();
        }
    };
    /**
     * Shows the component if hidden.
     */
    Component.prototype.show = function () {
        if (this.hidden) {
            this.getDomElement().removeClass(this.prefixCss(Component.CLASS_HIDDEN));
            this.hidden = false;
            this.onShowEvent();
        }
    };
    /**
     * Determines if the component is hidden.
     * @returns {boolean} true if the component is hidden, else false
     */
    Component.prototype.isHidden = function () {
        return this.hidden;
    };
    /**
     * Determines if the component is shown.
     * @returns {boolean} true if the component is visible, else false
     */
    Component.prototype.isShown = function () {
        return !this.isHidden();
    };
    /**
     * Toggles the hidden state by hiding the component if it is shown, or showing it if hidden.
     */
    Component.prototype.toggleHidden = function () {
        if (this.isHidden()) {
            this.show();
        }
        else {
            this.hide();
        }
    };
    /**
     * Disables the component.
     * This method basically transfers the component into the disabled state. Actual disabling is done via CSS or child
     * components. (e.g. Button needs to unsubscribe click listeners)
     */
    Component.prototype.disable = function () {
        if (!this.disabled) {
            this.disabled = true;
            this.getDomElement().addClass(this.prefixCss(Component.CLASS_DISABLED));
            this.onDisabledEvent();
        }
    };
    /**
     * Enables the component.
     * This method basically transfers the component into the enabled state. Actual enabling is done via CSS or child
     * components. (e.g. Button needs to subscribe click listeners)
     */
    Component.prototype.enable = function () {
        if (this.disabled) {
            this.getDomElement().removeClass(this.prefixCss(Component.CLASS_DISABLED));
            this.disabled = false;
            this.onEnabledEvent();
        }
    };
    /**
     * Determines if the component is disabled.
     * @returns {boolean} true if the component is disabled, else false
     */
    Component.prototype.isDisabled = function () {
        return this.disabled;
    };
    /**
     * Determines if the component is enabled.
     * @returns {boolean} true if the component is enabled, else false
     */
    Component.prototype.isEnabled = function () {
        return !this.isDisabled();
    };
    /**
     * Determines if the component is currently hovered.
     * @returns {boolean} true if the component is hovered, else false
     */
    Component.prototype.isHovered = function () {
        return this.hovered;
    };
    /**
     * Fires the onShow event.
     * See the detailed explanation on event architecture on the {@link #componentEvents events list}.
     */
    Component.prototype.onShowEvent = function () {
        this.componentEvents.onShow.dispatch(this);
    };
    /**
     * Fires the onHide event.
     * See the detailed explanation on event architecture on the {@link #componentEvents events list}.
     */
    Component.prototype.onHideEvent = function () {
        this.componentEvents.onHide.dispatch(this);
    };
    /**
     * Fires the onEnabled event.
     * See the detailed explanation on event architecture on the {@link #componentEvents events list}.
     */
    Component.prototype.onEnabledEvent = function () {
        this.componentEvents.onEnabled.dispatch(this);
    };
    /**
     * Fires the onDisabled event.
     * See the detailed explanation on event architecture on the {@link #componentEvents events list}.
     */
    Component.prototype.onDisabledEvent = function () {
        this.componentEvents.onDisabled.dispatch(this);
    };
    /**
     * Fires the onViewModeChanged event.
     * See the detailed explanation on event architecture on the {@link #componentEvents events list}.
     */
    Component.prototype.onViewModeChangedEvent = function (mode) {
        if (this.viewMode === mode) {
            return;
        }
        this.viewMode = mode;
        this.componentEvents.onViewModeChanged.dispatch(this, { mode: mode });
    };
    /**
     * Fires the onHoverChanged event.
     * See the detailed explanation on event architecture on the {@link #componentEvents events list}.
     */
    Component.prototype.onHoverChangedEvent = function (hovered) {
        this.hovered = hovered;
        this.componentEvents.onHoverChanged.dispatch(this, { hovered: hovered });
    };
    Object.defineProperty(Component.prototype, "onShow", {
        /**
         * Gets the event that is fired when the component is showing.
         * See the detailed explanation on event architecture on the {@link #componentEvents events list}.
         * @returns {Event<Component<Config>, NoArgs>}
         */
        get: function () {
            return this.componentEvents.onShow.getEvent();
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Component.prototype, "onHide", {
        /**
         * Gets the event that is fired when the component is hiding.
         * See the detailed explanation on event architecture on the {@link #componentEvents events list}.
         * @returns {Event<Component<Config>, NoArgs>}
         */
        get: function () {
            return this.componentEvents.onHide.getEvent();
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Component.prototype, "onEnabled", {
        /**
         * Gets the event that is fired when the component is enabling.
         * See the detailed explanation on event architecture on the {@link #componentEvents events list}.
         * @returns {Event<Component<Config>, NoArgs>}
         */
        get: function () {
            return this.componentEvents.onEnabled.getEvent();
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Component.prototype, "onDisabled", {
        /**
         * Gets the event that is fired when the component is disabling.
         * See the detailed explanation on event architecture on the {@link #componentEvents events list}.
         * @returns {Event<Component<Config>, NoArgs>}
         */
        get: function () {
            return this.componentEvents.onDisabled.getEvent();
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Component.prototype, "onHoverChanged", {
        /**
         * Gets the event that is fired when the component's hover-state is changing.
         * @returns {Event<Component<Config>, ComponentHoverChangedEventArgs>}
         */
        get: function () {
            return this.componentEvents.onHoverChanged.getEvent();
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Component.prototype, "onViewModeChanged", {
        /**
         * Gets the event that is fired when the `ViewMode` of this component has changed.
         * @returns {Event<Component<Config>, ViewModeChangedEventArgs>}
         */
        get: function () {
            return this.componentEvents.onViewModeChanged.getEvent();
        },
        enumerable: false,
        configurable: true
    });
    /**
     * The classname that is attached to the element when it is in the hidden state.
     * @type {string}
     */
    Component.CLASS_HIDDEN = 'hidden';
    /**
     * The classname that is attached to the element when it is in the disabled state.
     * @type {string}
     */
    Component.CLASS_DISABLED = 'disabled';
    return Component;
}());

},{"../dom":82,"../eventdispatcher":84,"../guid":87,"../localization/i18n":89}],19:[function(require,module,exports){
"use strict";
var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        if (typeof b !== "function" && b !== null)
            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
exports.Container = void 0;
var component_1 = require("./component");
var dom_1 = require("../dom");
var arrayutils_1 = require("../arrayutils");
var i18n_1 = require("../localization/i18n");
/**
 * A container component that can contain a collection of child components.
 * Components can be added at construction time through the {@link ContainerConfig#components} setting, or later
 * through the {@link Container#addComponent} method. The UIManager automatically takes care of all components, i.e. it
 * initializes and configures them automatically.
 *
 * In the DOM, the container consists of an outer <div> (that can be configured by the config) and an inner wrapper
 * <div> that contains the components. This double-<div>-structure is often required to achieve many advanced effects
 * in CSS and/or JS, e.g. animations and certain formatting with absolute positioning.
 *
 * DOM example:
 * <code>
 *     <div class='ui-container'>
 *         <div class='container-wrapper'>
 *             ... child components ...
 *         </div>
 *     </div>
 * </code>
 *
 * @category Components
 */
var Container = /** @class */ (function (_super) {
    __extends(Container, _super);
    function Container(config) {
        var _this = _super.call(this, config) || this;
        _this.config = _this.mergeConfig(config, {
            cssClass: 'ui-container',
            components: [],
        }, _this.config);
        _this.componentsToAdd = [];
        _this.componentsToRemove = [];
        _this.componentsInPersistentViewMode = 0;
        return _this;
    }
    /**
     * Adds a child component to the container.
     * @param component the component to add
     */
    Container.prototype.addComponent = function (component) {
        this.config.components.push(component);
        this.componentsToAdd.push(component);
    };
    /**
     * Removes a child component from the container.
     * @param component the component to remove
     * @returns {boolean} true if the component has been removed, false if it is not contained in this container
     */
    Container.prototype.removeComponent = function (component) {
        if (arrayutils_1.ArrayUtils.remove(this.config.components, component) != null) {
            this.componentsToRemove.push(component);
            return true;
        }
        else {
            return false;
        }
    };
    /**
     * Gets an array of all child components in this container.
     * @returns {Component<ComponentConfig>[]}
     */
    Container.prototype.getComponents = function () {
        return this.config.components;
    };
    /**
     * Removes all child components from the container.
     */
    Container.prototype.removeComponents = function () {
        for (var _i = 0, _a = this.getComponents().slice(); _i < _a.length; _i++) {
            var component = _a[_i];
            this.removeComponent(component);
        }
    };
    /**
     * Updates the DOM of the container with the current components.
     */
    Container.prototype.updateComponents = function () {
        /* We cannot just clear the container to remove all elements and then re-add those that should stay, because
         * IE looses the innerHTML of unattached elements, leading to empty elements within the container (e.g. missing
         * subtitle text in SubtitleLabel).
         * Instead, we keep a list of elements to add and remove, leaving remaining elements alone. By keeping them in
         * the DOM, their content gets preserved in all browsers.
         */
        var component;
        while (component = this.componentsToRemove.shift()) {
            component.getDomElement().remove();
        }
        while (component = this.componentsToAdd.shift()) {
            this.innerContainerElement.append(component.getDomElement());
        }
    };
    Container.prototype.toDomElement = function () {
        // Create the container element (the outer <div>)
        var containerElement = new dom_1.DOM(this.config.tag, {
            'id': this.config.id,
            'class': this.getCssClasses(),
            'role': this.config.role,
            'aria-label': i18n_1.i18n.performLocalization(this.config.ariaLabel),
        }, this);
        // Create the inner container element (the inner <div>) that will contain the components
        var innerContainer = new dom_1.DOM(this.config.tag, {
            'class': this.prefixCss('container-wrapper'),
        });
        this.innerContainerElement = innerContainer;
        for (var _i = 0, _a = this.config.components; _i < _a.length; _i++) {
            var initialComponent = _a[_i];
            this.componentsToAdd.push(initialComponent);
        }
        this.updateComponents();
        containerElement.append(innerContainer);
        return containerElement;
    };
    Container.prototype.suspendHideTimeout = function () {
        // to be implemented in subclass
    };
    Container.prototype.resumeHideTimeout = function () {
        // to be implemented in subclass
    };
    Container.prototype.trackComponentViewMode = function (mode) {
        if (mode === component_1.ViewMode.Persistent) {
            this.componentsInPersistentViewMode++;
        }
        else if (mode === component_1.ViewMode.Temporary) {
            this.componentsInPersistentViewMode = Math.max(this.componentsInPersistentViewMode - 1, 0);
        }
        if (this.componentsInPersistentViewMode > 0) {
            // There is at least one component that must not be hidden,
            // therefore the hide timeout must be suspended
            this.suspendHideTimeout();
        }
        else {
            this.resumeHideTimeout();
        }
    };
    return Container;
}(component_1.Component));
exports.Container = Container;

},{"../arrayutils":1,"../dom":82,"../localization/i18n":89,"./component":18}],20:[function(require,module,exports){
"use strict";
var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        if (typeof b !== "function" && b !== null)
            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
exports.ControlBar = void 0;
var container_1 = require("./container");
var uiutils_1 = require("../uiutils");
var spacer_1 = require("./spacer");
var i18n_1 = require("../localization/i18n");
var browserutils_1 = require("../browserutils");
var settingspanel_1 = require("./settingspanel");
/**
 * A container for main player control components, e.g. play toggle button, seek bar, volume control, fullscreen toggle
 * button.
 *
 * @category Components
 */
var ControlBar = /** @class */ (function (_super) {
    __extends(ControlBar, _super);
    function ControlBar(config) {
        var _this = _super.call(this, config) || this;
        _this.config = _this.mergeConfig(config, {
            cssClass: 'ui-controlbar',
            hidden: true,
            role: 'region',
            ariaLabel: i18n_1.i18n.getLocalizer('controlBar'),
        }, _this.config);
        return _this;
    }
    ControlBar.prototype.configure = function (player, uimanager) {
        var _this = this;
        _super.prototype.configure.call(this, player, uimanager);
        // Counts how many components are hovered and block hiding of the control bar
        var hoverStackCount = 0;
        var isSettingsPanelShown = false;
        // Only enabling this for platforms without touch input.
        // Enabling this for touch devices causes the UI to not disappear after hideDelay seconds,
        // because `mouseleave` event is not emitted.
        // Instead, it will stay visible until another manual interaction is performed.
        if (uimanager.getConfig().disableAutoHideWhenHovered && !browserutils_1.BrowserUtils.isTouchSupported) {
            // Track hover status of child components
            uiutils_1.UIUtils.traverseTree(this, function (component) {
                // Do not track hover status of child containers or spacers, only of 'real' controls
                if (component instanceof container_1.Container || component instanceof spacer_1.Spacer) {
                    return;
                }
                // Subscribe hover event and keep a count of the number of hovered children
                component.onHoverChanged.subscribe(function (_, args) {
                    if (args.hovered) {
                        hoverStackCount++;
                    }
                    else {
                        hoverStackCount--;
                    }
                });
            });
        }
        if (browserutils_1.BrowserUtils.isMobile) {
            uimanager.onComponentShow.subscribe(function (component) {
                if (component instanceof settingspanel_1.SettingsPanel) {
                    isSettingsPanelShown = true;
                }
            });
            uimanager.onComponentHide.subscribe(function (component) {
                if (component instanceof settingspanel_1.SettingsPanel) {
                    isSettingsPanelShown = false;
                }
            });
        }
        uimanager.onControlsShow.subscribe(function () {
            _this.show();
        });
        uimanager.onPreviewControlsHide.subscribe(function (sender, args) {
            // Cancel the hide event if hovered child components block hiding or if the settings panel is active on mobile.
            args.cancel = args.cancel || (hoverStackCount > 0 || isSettingsPanelShown);
        });
        uimanager.onControlsHide.subscribe(function () {
            _this.hide();
        });
    };
    return ControlBar;
}(container_1.Container));
exports.ControlBar = ControlBar;

},{"../browserutils":3,"../localization/i18n":89,"../uiutils":115,"./container":19,"./settingspanel":45,"./spacer":52}],21:[function(require,module,exports){
"use strict";
var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        if (typeof b !== "function" && b !== null)
            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
exports.EcoModeContainer = void 0;
var i18n_1 = require("../localization/i18n");
var container_1 = require("./container");
var ecomodetogglebutton_1 = require("./ecomodetogglebutton");
var label_1 = require("./label");
var settingspanelitem_1 = require("./settingspanelitem");
/**
 * @category Containers
 */
var EcoModeContainer = /** @class */ (function (_super) {
    __extends(EcoModeContainer, _super);
    function EcoModeContainer(config) {
        if (config === void 0) { config = {}; }
        var _this = _super.call(this, config) || this;
        _this.savedEmissons = 0;
        var ecoModeToggleButton = new ecomodetogglebutton_1.EcoModeToggleButton();
        var labelEcoMode = new label_1.Label({
            text: i18n_1.i18n.getLocalizer('ecoMode.title'),
            for: ecoModeToggleButton.getConfig().id,
            id: 'ecomodelabel',
        });
        _this.emissionsSavedLabel = new label_1.Label({
            text: "".concat(_this.savedEmissons.toFixed(4), " gCO2"),
            cssClass: 'ui-label-savedEnergy',
        });
        _this.ecoModeToggleButtonItem = new settingspanelitem_1.SettingsPanelItem(labelEcoMode, ecoModeToggleButton);
        _this.ecoModeSavedEmissionsItem = new settingspanelitem_1.SettingsPanelItem('Saved Emissions', _this.emissionsSavedLabel, {
            hidden: true,
        });
        _this.addComponent(_this.ecoModeToggleButtonItem);
        _this.addComponent(_this.ecoModeSavedEmissionsItem);
        ecoModeToggleButton.onToggleOn.subscribe(function () {
            _this.ecoModeSavedEmissionsItem.show();
            _this.onToggleCallback();
        });
        ecoModeToggleButton.onToggleOff.subscribe(function () {
            _this.ecoModeSavedEmissionsItem.hide();
            _this.onToggleCallback();
        });
        return _this;
    }
    EcoModeContainer.prototype.setOnToggleCallback = function (callback) {
        this.onToggleCallback = callback;
    };
    EcoModeContainer.prototype.configure = function (player) {
        var _this = this;
        player.on(player.exports.PlayerEvent.SegmentPlayback, function (segment) {
            if (!segment.mimeType.includes('video')) {
                return;
            }
            var _a = segment.mediaInfo, height = _a.height, width = _a.width, bitrate = _a.bitrate, frameRate = _a.frameRate;
            var _b = _this.getMaxQualityAvailable(player.getAvailableVideoQualities()), maxHeight = _b.height, maxBitrate = _b.bitrate, maxWidth = _b.width;
            var currentEnergyKwh = _this.calculateEnergyConsumption(frameRate, height, width, bitrate, segment.duration);
            var maxEnergyKwh = _this.calculateEnergyConsumption(frameRate, maxHeight, maxWidth, maxBitrate, segment.duration);
            if (_this.ecoModeSavedEmissionsItem.isShown()) {
                _this.updateSavedEmissions(currentEnergyKwh, maxEnergyKwh, _this.emissionsSavedLabel);
            }
        });
    };
    EcoModeContainer.prototype.updateSavedEmissions = function (currentEnergyConsuption, maxEnergyConsuption, emissionsSavedLabel) {
        // 475 is the average carbon intensity of all countries in gCO2/kWh
        var averageCarbonIntensity = 475;
        this.currentEnergyEmission = currentEnergyConsuption * averageCarbonIntensity;
        var maxEnergyEmisson = maxEnergyConsuption * averageCarbonIntensity;
        this.savedEmissons += maxEnergyEmisson - this.currentEnergyEmission;
        emissionsSavedLabel.setText(this.savedEmissons.toFixed(4) + ' gCO2');
    };
    /**
     * The calculations are based on the following paper: https://arxiv.org/pdf/2210.05444.pdf
     */
    EcoModeContainer.prototype.calculateEnergyConsumption = function (fps, height, width, bitrate, duration) {
        var fpsWeight = 0.035;
        var pixeldWeight = 5.76e-9;
        var birateWeight = 6.97e-6;
        var constantOffset = 8.52;
        var bitrateInternetWeight = 3.24e-5;
        var internetConnectionOffset = 1.15;
        var videoCodec = 4.16;
        var energyConsumptionW = fpsWeight * fps +
            pixeldWeight * height * width +
            (birateWeight + bitrateInternetWeight) * (bitrate / 1000) +
            videoCodec +
            constantOffset +
            internetConnectionOffset;
        // Convert energy consumption from Watts (W) to Kilowatt-hours (kWh) for the given time duration of the segment
        var energyConsumptionKwh = (energyConsumptionW * duration) / 3.6e6;
        return energyConsumptionKwh;
    };
    EcoModeContainer.prototype.getMaxQualityAvailable = function (availableVideoQualities) {
        var sortedQualities = availableVideoQualities.sort(function (a, b) { return a.bitrate - b.bitrate; });
        return sortedQualities[sortedQualities.length - 1];
    };
    return EcoModeContainer;
}(container_1.Container));
exports.EcoModeContainer = EcoModeContainer;

},{"../localization/i18n":89,"./container":19,"./ecomodetogglebutton":22,"./label":28,"./settingspanelitem":46}],22:[function(require,module,exports){
"use strict";
var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        if (typeof b !== "function" && b !== null)
            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
exports.EcoModeToggleButton = void 0;
var togglebutton_1 = require("./togglebutton");
var i18n_1 = require("../localization/i18n");
/**
 * @category Buttons
 */
var EcoModeToggleButton = /** @class */ (function (_super) {
    __extends(EcoModeToggleButton, _super);
    function EcoModeToggleButton(config) {
        if (config === void 0) { config = {}; }
        var _this = _super.call(this, config) || this;
        var defaultConfig = {
            text: i18n_1.i18n.getLocalizer('ecoMode'),
            cssClass: 'ui-ecomodetogglebutton',
            onClass: 'on',
            offClass: 'off',
            ariaLabel: i18n_1.i18n.getLocalizer('ecoMode'),
        };
        _this.config = _this.mergeConfig(config, defaultConfig, _this.config);
        return _this;
    }
    EcoModeToggleButton.prototype.configure = function (player, uimanager) {
        var _this = this;
        _super.prototype.configure.call(this, player, uimanager);
        if (this.areAdaptationApisAvailable(player)) {
            this.onClick.subscribe(function () {
                _this.toggle();
            });
            this.onToggleOn.subscribe(function () {
                _this.enableEcoMode(player);
                player.setVideoQuality('auto');
            });
            this.onToggleOff.subscribe(function () {
                _this.disableEcoMode(player);
            });
            player.on(player.exports.PlayerEvent.VideoQualityChanged, function (quality) {
                if (quality.targetQuality.id !== 'auto') {
                    _this.off();
                    _this.disableEcoMode(player);
                }
            });
        }
        else {
            _super.prototype.disable.call(this);
        }
    };
    EcoModeToggleButton.prototype.areAdaptationApisAvailable = function (player) {
        var isGetConfigAvailable = Boolean(player.adaptation.getConfig && typeof player.adaptation.getConfig === 'function');
        var isSetConfigAvailable = Boolean(player.adaptation.setConfig && typeof player.adaptation.setConfig === 'function');
        return Boolean(player.adaptation && isGetConfigAvailable && isSetConfigAvailable);
    };
    EcoModeToggleButton.prototype.enableEcoMode = function (player) {
        this.adaptationConfig = player.adaptation.getConfig();
        var codec = player.getAvailableVideoQualities()[0].codec;
        if (codec.includes('avc')) {
            player.adaptation.setConfig({
                resolution: { maxSelectableVideoHeight: 720 },
                limitToPlayerSize: true,
            });
        }
        if (codec.includes('hvc') || codec.includes('hev')) {
            player.adaptation.setConfig({
                resolution: { maxSelectableVideoHeight: 1080 },
                limitToPlayerSize: true,
            });
        }
        if (codec.includes('av1') || codec.includes('av01')) {
            player.adaptation.setConfig({
                resolution: { maxSelectableVideoHeight: 1440 },
                limitToPlayerSize: true,
            });
        }
    };
    EcoModeToggleButton.prototype.disableEcoMode = function (player) {
        player.adaptation.setConfig(this.adaptationConfig);
    };
    return EcoModeToggleButton;
}(togglebutton_1.ToggleButton));
exports.EcoModeToggleButton = EcoModeToggleButton;

},{"../localization/i18n":89,"./togglebutton":72}],23:[function(require,module,exports){
"use strict";
var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        if (typeof b !== "function" && b !== null)
            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
exports.ErrorMessageOverlay = void 0;
var container_1 = require("./container");
var label_1 = require("./label");
var tvnoisecanvas_1 = require("./tvnoisecanvas");
var errorutils_1 = require("../errorutils");
var mobilev3playerapi_1 = require("../mobilev3playerapi");
/**
 * Overlays the player and displays error messages.
 *
 * @category Components
 */
var ErrorMessageOverlay = /** @class */ (function (_super) {
    __extends(ErrorMessageOverlay, _super);
    function ErrorMessageOverlay(config) {
        if (config === void 0) { config = {}; }
        var _this = _super.call(this, config) || this;
        _this.errorLabel = new label_1.Label({ cssClass: 'ui-errormessage-label' });
        _this.tvNoiseBackground = new tvnoisecanvas_1.TvNoiseCanvas();
        _this.config = _this.mergeConfig(config, {
            cssClass: 'ui-errormessage-overlay',
            components: [_this.tvNoiseBackground, _this.errorLabel],
            hidden: true,
        }, _this.config);
        return _this;
    }
    ErrorMessageOverlay.prototype.configure = function (player, uimanager) {
        var _this = this;
        _super.prototype.configure.call(this, player, uimanager);
        var config = this.getConfig();
        var handleErrorMessage = function (event, message) {
            var customizedMessage = customizeErrorMessage(uimanager.getConfig().errorMessages || config.messages, event);
            if (customizedMessage) {
                message = customizedMessage;
            }
            _this.display(message);
        };
        if ((0, mobilev3playerapi_1.isMobileV3PlayerAPI)(player)) {
            var errorEventHandler = function (event) {
                var message = errorutils_1.ErrorUtils.defaultMobileV3ErrorMessageTranslator(event);
                handleErrorMessage(event, message);
            };
            player.on(mobilev3playerapi_1.MobileV3PlayerEvent.PlayerError, errorEventHandler);
            player.on(mobilev3playerapi_1.MobileV3PlayerEvent.SourceError, errorEventHandler);
        }
        else {
            player.on(player.exports.PlayerEvent.Error, function (event) {
                var message = errorutils_1.ErrorUtils.defaultWebErrorMessageTranslator(event);
                handleErrorMessage(event, message);
            });
        }
        player.on(player.exports.PlayerEvent.SourceLoaded, function (event) {
            if (_this.isShown()) {
                _this.tvNoiseBackground.stop();
                _this.hide();
            }
        });
    };
    ErrorMessageOverlay.prototype.display = function (errorMessage) {
        this.errorLabel.setText(errorMessage);
        this.tvNoiseBackground.start();
        this.show();
    };
    ErrorMessageOverlay.prototype.release = function () {
        _super.prototype.release.call(this);
        // Canvas rendering must be explicitly stopped, else it just continues forever and hogs resources
        this.tvNoiseBackground.stop();
    };
    return ErrorMessageOverlay;
}(container_1.Container));
exports.ErrorMessageOverlay = ErrorMessageOverlay;
function customizeErrorMessage(errorMessages, event) {
    if (!errorMessages) {
        return undefined;
    }
    // Process message vocabularies
    if (typeof errorMessages === 'function') {
        // Translation function for all errors
        return errorMessages(event);
    }
    if (errorMessages[event.code]) {
        // It's not a translation function, so it must be a map of strings or translation functions
        var customMessage = errorMessages[event.code];
        return typeof customMessage === 'string' ? customMessage : customMessage(event);
    }
}

},{"../errorutils":83,"../mobilev3playerapi":95,"./container":19,"./label":28,"./tvnoisecanvas":73}],24:[function(require,module,exports){
"use strict";
var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        if (typeof b !== "function" && b !== null)
            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
exports.FullscreenToggleButton = void 0;
var togglebutton_1 = require("./togglebutton");
var i18n_1 = require("../localization/i18n");
/**
 * A button that toggles the player between windowed and fullscreen view.
 *
 * @category Buttons
 */
var FullscreenToggleButton = /** @class */ (function (_super) {
    __extends(FullscreenToggleButton, _super);
    function FullscreenToggleButton(config) {
        if (config === void 0) { config = {}; }
        var _this = _super.call(this, config) || this;
        _this.config = _this.mergeConfig(config, {
            cssClass: 'ui-fullscreentogglebutton',
            text: i18n_1.i18n.getLocalizer('fullscreen'),
        }, _this.config);
        return _this;
    }
    FullscreenToggleButton.prototype.configure = function (player, uimanager) {
        var _this = this;
        _super.prototype.configure.call(this, player, uimanager);
        var isFullScreenAvailable = function () {
            return player.isViewModeAvailable(player.exports.ViewMode.Fullscreen);
        };
        var fullscreenStateHandler = function () {
            player.getViewMode() === player.exports.ViewMode.Fullscreen ? _this.on() : _this.off();
        };
        var fullscreenAvailabilityChangedHandler = function () {
            isFullScreenAvailable() ? _this.show() : _this.hide();
        };
        player.on(player.exports.PlayerEvent.ViewModeChanged, fullscreenStateHandler);
        // Available only in our native SDKs for now
        if (player.exports.PlayerEvent.ViewModeAvailabilityChanged) {
            player.on(player.exports.PlayerEvent.ViewModeAvailabilityChanged, fullscreenAvailabilityChangedHandler);
        }
        uimanager.getConfig().events.onUpdated.subscribe(fullscreenAvailabilityChangedHandler);
        this.onClick.subscribe(function () {
            if (!isFullScreenAvailable()) {
                if (console) {
                    console.log('Fullscreen unavailable');
                }
                return;
            }
            var targetViewMode = player.getViewMode() === player.exports.ViewMode.Fullscreen
                ? player.exports.ViewMode.Inline
                : player.exports.ViewMode.Fullscreen;
            player.setViewMode(targetViewMode);
        });
        // Startup init
        fullscreenAvailabilityChangedHandler();
        fullscreenStateHandler();
    };
    return FullscreenToggleButton;
}(togglebutton_1.ToggleButton));
exports.FullscreenToggleButton = FullscreenToggleButton;

},{"../localization/i18n":89,"./togglebutton":72}],25:[function(require,module,exports){
"use strict";
var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        if (typeof b !== "function" && b !== null)
            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
exports.HugePlaybackToggleButton = void 0;
var playbacktogglebutton_1 = require("./playbacktogglebutton");
var dom_1 = require("../dom");
var i18n_1 = require("../localization/i18n");
/**
 * A button that overlays the video and toggles between playback and pause.
 *
 * @category Buttons
 */
var HugePlaybackToggleButton = /** @class */ (function (_super) {
    __extends(HugePlaybackToggleButton, _super);
    function HugePlaybackToggleButton(config) {
        if (config === void 0) { config = {}; }
        var _this = _super.call(this, config) || this;
        _this.config = _this.mergeConfig(config, {
            cssClass: 'ui-hugeplaybacktogglebutton',
            text: i18n_1.i18n.getLocalizer('playPause'),
            role: 'button',
        }, _this.config);
        return _this;
    }
    HugePlaybackToggleButton.prototype.configure = function (player, uimanager) {
        var _this = this;
        // Update button state through API events
        _super.prototype.configure.call(this, player, uimanager, false);
        // Set enterFullscreenOnInitialPlayback if set in the uimanager config
        if (typeof uimanager.getConfig().enterFullscreenOnInitialPlayback === 'boolean') {
            this.config.enterFullscreenOnInitialPlayback = uimanager.getConfig().enterFullscreenOnInitialPlayback;
        }
        var togglePlayback = function () {
            if (player.isPlaying() || _this.isPlayInitiated) {
                player.pause('ui');
            }
            else {
                player.play('ui');
            }
        };
        var toggleFullscreen = function () {
            if (player.getViewMode() === player.exports.ViewMode.Fullscreen) {
                player.setViewMode(player.exports.ViewMode.Inline);
            }
            else {
                player.setViewMode(player.exports.ViewMode.Fullscreen);
            }
        };
        var firstPlay = true;
        var clickTime = 0;
        var doubleClickTime = 0;
        /*
         * YouTube-style toggle button handling
         *
         * The goal is to prevent a short pause or playback interval between a click, that toggles playback, and a
         * double click, that toggles fullscreen. In this naive approach, the first click would e.g. start playback,
         * the second click would be detected as double click and toggle to fullscreen, and as second normal click stop
         * playback, which results is a short playback interval with max length of the double click detection
         * period (usually 500ms).
         *
         * To solve this issue, we defer handling of the first click for 200ms, which is almost unnoticeable to the user,
         * and just toggle playback if no second click (double click) has been registered during this period. If a double
         * click is registered, we just toggle the fullscreen. In the first 200ms, undesired playback changes thus cannot
         * happen. If a double click is registered within 500ms, we undo the playback change and switch fullscreen mode.
         * In the end, this method basically introduces a 200ms observing interval in which playback changes are prevented
         * if a double click happens.
         */
        this.onClick.subscribe(function () {
            // Directly start playback on first click of the button.
            // This is a required workaround for mobile browsers where video playback needs to be triggered directly
            // by the user. A deferred playback start through the timeout below is not considered as user action and
            // therefore ignored by mobile browsers.
            if (firstPlay) {
                // Try to start playback. Then we wait for Play and only when it arrives, we disable the firstPlay flag.
                // If we disable the flag here, onClick was triggered programmatically instead of by a user interaction, and
                // playback is blocked (e.g. on mobile devices due to the programmatic play() call), we loose the chance to
                // ever start playback through a user interaction again with this button.
                togglePlayback();
                if (_this.config.enterFullscreenOnInitialPlayback) {
                    player.setViewMode(player.exports.ViewMode.Fullscreen);
                }
                return;
            }
            var now = Date.now();
            if (now - clickTime < 200) {
                // We have a double click inside the 200ms interval, just toggle fullscreen mode
                toggleFullscreen();
                doubleClickTime = now;
                return;
            }
            else if (now - clickTime < 500) {
                // We have a double click inside the 500ms interval, undo playback toggle and toggle fullscreen mode
                toggleFullscreen();
                togglePlayback();
                doubleClickTime = now;
                return;
            }
            clickTime = now;
            setTimeout(function () {
                if (Date.now() - doubleClickTime > 200) {
                    // No double click detected, so we toggle playback and wait what happens next
                    togglePlayback();
                }
            }, 200);
        });
        player.on(player.exports.PlayerEvent.Play, function () {
            // Playback has really started, we can disable the flag to switch to normal toggle button handling
            firstPlay = false;
        });
        player.on(player.exports.PlayerEvent.Warning, function (event) {
            if (event.code === player.exports.WarningCode.PLAYBACK_COULD_NOT_BE_STARTED) {
                // if playback could not be started, reset the first play flag as we need the user interaction to start
                firstPlay = true;
            }
        });
        var suppressPlayButtonTransitionAnimation = function () {
            // Disable the current animation
            _this.setTransitionAnimationsEnabled(false);
            // Enable the transition animations for the next state change
            _this.onToggle.subscribeOnce(function () {
                _this.setTransitionAnimationsEnabled(true);
            });
        };
        // Hide the play button animation when the UI is loaded (it should only be animated on state changes)
        suppressPlayButtonTransitionAnimation();
        var isAutoplayEnabled = player.getConfig().playback && Boolean(player.getConfig().playback.autoplay);
        // We only know if an autoplay attempt is upcoming if the player is not yet ready. It the player is already ready,
        // the attempt might be upcoming or might have already happened, but we don't have to handle that because we can
        // simply rely on isPlaying and the play state events.
        var isAutoplayUpcoming = !player.getSource() && isAutoplayEnabled;
        // Hide the play button when the player is already playing or autoplay is upcoming
        if (player.isPlaying() || isAutoplayUpcoming) {
            // Hide the play button (switch to playing state)
            this.on();
            // Disable the animation of the playing state switch
            suppressPlayButtonTransitionAnimation();
            // Show the play button without an animation if a play attempt is blocked
            player.on(player.exports.PlayerEvent.Warning, function (event) {
                if (event.code === player.exports.WarningCode.PLAYBACK_COULD_NOT_BE_STARTED) {
                    suppressPlayButtonTransitionAnimation();
                }
            });
        }
    };
    HugePlaybackToggleButton.prototype.toDomElement = function () {
        var buttonElement = _super.prototype.toDomElement.call(this);
        // Add child that contains the play button image
        // Setting the image directly on the button does not work together with scaling animations, because the button
        // can cover the whole video player are and scaling would extend it beyond. By adding an inner element, confined
        // to the size if the image, it can scale inside the player without overshooting.
        buttonElement.append(new dom_1.DOM('div', {
            'class': this.prefixCss('image'),
        }));
        return buttonElement;
    };
    /**
     * Enables or disables the play state transition animations of the play button image. Can be used to suppress
     * animations.
     * @param {boolean} enabled true to enable the animations (default), false to disable them
     */
    HugePlaybackToggleButton.prototype.setTransitionAnimationsEnabled = function (enabled) {
        var noTransitionAnimationsClass = this.prefixCss('no-transition-animations');
        if (enabled) {
            this.getDomElement().removeClass(noTransitionAnimationsClass);
        }
        else if (!this.getDomElement().hasClass(noTransitionAnimationsClass)) {
            this.getDomElement().addClass(noTransitionAnimationsClass);
        }
    };
    return HugePlaybackToggleButton;
}(playbacktogglebutton_1.PlaybackToggleButton));
exports.HugePlaybackToggleButton = HugePlaybackToggleButton;

},{"../dom":82,"../localization/i18n":89,"./playbacktogglebutton":35}],26:[function(require,module,exports){
"use strict";
var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        if (typeof b !== "function" && b !== null)
            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
exports.HugeReplayButton = void 0;
var button_1 = require("./button");
var dom_1 = require("../dom");
var i18n_1 = require("../localization/i18n");
/**
 * A button to play/replay a video.
 *
 * @category Buttons
 */
var HugeReplayButton = /** @class */ (function (_super) {
    __extends(HugeReplayButton, _super);
    function HugeReplayButton(config) {
        if (config === void 0) { config = {}; }
        var _this = _super.call(this, config) || this;
        _this.config = _this.mergeConfig(config, {
            cssClass: 'ui-hugereplaybutton',
            text: i18n_1.i18n.getLocalizer('replay'),
        }, _this.config);
        return _this;
    }
    HugeReplayButton.prototype.configure = function (player, uimanager) {
        _super.prototype.configure.call(this, player, uimanager);
        this.onClick.subscribe(function () {
            player.play('ui');
        });
    };
    HugeReplayButton.prototype.toDomElement = function () {
        var buttonElement = _super.prototype.toDomElement.call(this);
        // Add child that contains the play button image
        // Setting the image directly on the button does not work together with scaling animations, because the button
        // can cover the whole video player are and scaling would extend it beyond. By adding an inner element, confined
        // to the size if the image, it can scale inside the player without overshooting.
        buttonElement.append(new dom_1.DOM('div', {
            'class': this.prefixCss('image'),
        }));
        return buttonElement;
    };
    return HugeReplayButton;
}(button_1.Button));
exports.HugeReplayButton = HugeReplayButton;

},{"../dom":82,"../localization/i18n":89,"./button":12}],27:[function(require,module,exports){
"use strict";
var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        if (typeof b !== "function" && b !== null)
            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
exports.ItemSelectionList = void 0;
var listselector_1 = require("./listselector");
var dom_1 = require("../dom");
var i18n_1 = require("../localization/i18n");
/**
 * @category Components
 */
var ItemSelectionList = exports.ItemSelectionList = /** @class */ (function (_super) {
    __extends(ItemSelectionList, _super);
    function ItemSelectionList(config) {
        if (config === void 0) { config = {}; }
        var _this = _super.call(this, config) || this;
        _this.config = _this.mergeConfig(config, {
            tag: 'ul',
            cssClass: 'ui-itemselectionlist',
        }, _this.config);
        return _this;
    }
    ItemSelectionList.prototype.isActive = function () {
        return this.items.length > 1;
    };
    ItemSelectionList.prototype.toDomElement = function () {
        var listElement = new dom_1.DOM('ul', {
            'id': this.config.id,
            'class': this.getCssClasses(),
        }, this);
        this.listElement = listElement;
        this.updateDomItems();
        return listElement;
    };
    ItemSelectionList.prototype.updateDomItems = function (selectedValue) {
        var _this = this;
        if (selectedValue === void 0) { selectedValue = null; }
        // Delete all children
        this.listElement.empty();
        var selectedListItem = null;
        var selectItem = function (listItem) {
            listItem.addClass(_this.prefixCss(ItemSelectionList.CLASS_SELECTED));
        };
        var deselectItem = function (listItem) {
            listItem.removeClass(_this.prefixCss(ItemSelectionList.CLASS_SELECTED));
        };
        var _loop_1 = function (item) {
            var listItem = new dom_1.DOM('li', {
                'type': 'li',
                'class': this_1.prefixCss('ui-selectionlistitem'),
            }).append(new dom_1.DOM('a', {}).html(i18n_1.i18n.performLocalization(item.label)));
            if (!selectedListItem) {
                if (selectedValue == null) { // If there is no pre-selected value, select the first one
                    selectedListItem = listItem;
                }
                else if (String(selectedValue) === item.key) { // convert selectedValue to string to catch 'null'/null case
                    selectedListItem = listItem;
                }
            }
            // Handle list item selections
            listItem.on('click', function () {
                // Deselect the previous item (if there was a selected item)
                if (selectedListItem) {
                    deselectItem(selectedListItem);
                }
                // Select the clicked item
                selectedListItem = listItem;
                selectItem(listItem);
                // Fire the event
                _this.onItemSelectedEvent(item.key, false);
            });
            // Select default item
            if (selectedListItem) {
                selectItem(selectedListItem);
            }
            this_1.listElement.append(listItem);
        };
        var this_1 = this;
        for (var _i = 0, _a = this.items; _i < _a.length; _i++) {
            var item = _a[_i];
            _loop_1(item);
        }
    };
    ItemSelectionList.prototype.onItemAddedEvent = function (value) {
        _super.prototype.onItemAddedEvent.call(this, value);
        this.updateDomItems(this.selectedItem);
    };
    ItemSelectionList.prototype.onItemRemovedEvent = function (value) {
        _super.prototype.onItemRemovedEvent.call(this, value);
        this.updateDomItems(this.selectedItem);
    };
    ItemSelectionList.prototype.onItemSelectedEvent = function (value, updateDomItems) {
        if (updateDomItems === void 0) { updateDomItems = true; }
        _super.prototype.onItemSelectedEvent.call(this, value);
        if (updateDomItems) {
            this.updateDomItems(value);
        }
    };
    ItemSelectionList.CLASS_SELECTED = 'selected';
    return ItemSelectionList;
}(listselector_1.ListSelector));

},{"../dom":82,"../localization/i18n":89,"./listselector":30}],28:[function(require,module,exports){
"use strict";
var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        if (typeof b !== "function" && b !== null)
            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
exports.Label = void 0;
var component_1 = require("./component");
var dom_1 = require("../dom");
var eventdispatcher_1 = require("../eventdispatcher");
var i18n_1 = require("../localization/i18n");
/**
 * A simple text label.
 *
 * DOM example:
 * <code>
 *     <span class='ui-label'>...some text...</span>
 * </code>
 *
 * @category Components
 */
var Label = /** @class */ (function (_super) {
    __extends(Label, _super);
    function Label(config) {
        if (config === void 0) { config = {}; }
        var _this = _super.call(this, config) || this;
        _this.labelEvents = {
            onClick: new eventdispatcher_1.EventDispatcher(),
            onTextChanged: new eventdispatcher_1.EventDispatcher(),
        };
        _this.config = _this.mergeConfig(config, {
            cssClass: 'ui-label',
        }, _this.config);
        _this.text = _this.config.text;
        return _this;
    }
    Label.prototype.toDomElement = function () {
        var _this = this;
        var tagName = this.config.for != null ? 'label' : 'span';
        var labelElement = new dom_1.DOM(tagName, {
            'id': this.config.id,
            'for': this.config.for,
            'class': this.getCssClasses(),
        }, this).html(i18n_1.i18n.performLocalization(this.text));
        labelElement.on('click', function () {
            _this.onClickEvent();
        });
        return labelElement;
    };
    /**
     * Set the text on this label.
     * @param text
     */
    Label.prototype.setText = function (text) {
        if (text === this.text) {
            return;
        }
        this.text = text;
        var localizedText = i18n_1.i18n.performLocalization(text);
        this.getDomElement().html(localizedText);
        this.onTextChangedEvent(localizedText);
    };
    /**
     * Gets the text on this label.
     * @return {string} The text on the label
     */
    Label.prototype.getText = function () {
        return i18n_1.i18n.performLocalization(this.text);
    };
    /**
     * Clears the text on this label.
     */
    Label.prototype.clearText = function () {
        this.getDomElement().html('');
        this.onTextChangedEvent(null);
    };
    /**
     * Tests if the label is empty and does not contain any text.
     * @return {boolean} True if the label is empty, else false
     */
    Label.prototype.isEmpty = function () {
        return !this.text;
    };
    /**
     * Fires the {@link #onClick} event.
     * Can be used by subclasses to listen to this event without subscribing an event listener by overwriting the method
     * and calling the super method.
     */
    Label.prototype.onClickEvent = function () {
        this.labelEvents.onClick.dispatch(this);
    };
    /**
     * Fires the {@link #onClick} event.
     * Can be used by subclasses to listen to this event without subscribing an event listener by overwriting the method
     * and calling the super method.
     */
    Label.prototype.onTextChangedEvent = function (text) {
        this.labelEvents.onTextChanged.dispatch(this, text);
    };
    Object.defineProperty(Label.prototype, "onClick", {
        /**
         * Gets the event that is fired when the label is clicked.
         * @returns {Event<Label<LabelConfig>, NoArgs>}
         */
        get: function () {
            return this.labelEvents.onClick.getEvent();
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Label.prototype, "onTextChanged", {
        /**
         * Gets the event that is fired when the text on the label is changed.
         * @returns {Event<Label<LabelConfig>, string>}
         */
        get: function () {
            return this.labelEvents.onTextChanged.getEvent();
        },
        enumerable: false,
        configurable: true
    });
    return Label;
}(component_1.Component));
exports.Label = Label;

},{"../dom":82,"../eventdispatcher":84,"../localization/i18n":89,"./component":18}],29:[function(require,module,exports){
"use strict";
var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        if (typeof b !== "function" && b !== null)
            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
exports.ListBox = void 0;
var togglebutton_1 = require("./togglebutton");
var listselector_1 = require("./listselector");
var dom_1 = require("../dom");
var arrayutils_1 = require("../arrayutils");
/**
 * A element to select a single item out of a list of available items.
 *
 * DOM example:
 * <code>
 *   <div class='ui-listbox'>
 *     <button class='ui-listbox-button'>label</button>
 *     ...
 *   </div
 * </code>
 *
 * @category Components
 */
// TODO: change ListSelector to extends container in v4 to improve usage of ListBox.
//       Currently we are creating the dom element of the list box with child elements manually here.
//       But this functionality is already covered within the Container component.
var ListBox = /** @class */ (function (_super) {
    __extends(ListBox, _super);
    function ListBox(config) {
        if (config === void 0) { config = {}; }
        var _this = _super.call(this, config) || this;
        _this.components = [];
        _this.removeListBoxDomItem = function (_, key) {
            var component = _this.getComponentForKey(key);
            if (component) {
                component.getDomElement().remove();
                arrayutils_1.ArrayUtils.remove(_this.components, component);
            }
        };
        _this.addListBoxDomItem = function (_, key) {
            var component = _this.getComponentForKey(key);
            var newItem = _this.getItemForKey(key);
            if (component) {
                // Update existing component
                component.setText(newItem.label);
            }
            else {
                var listBoxItemButton_1 = _this.buildListBoxItemButton(newItem);
                listBoxItemButton_1.onClick.subscribe(function () {
                    _this.handleSelectionChange(listBoxItemButton_1);
                });
                _this.components.push(listBoxItemButton_1);
                _this.listBoxElement.append(listBoxItemButton_1.getDomElement());
            }
        };
        _this.refreshSelectedItem = function () {
            // This gets called twice because the first time is triggered when the user clicks on the ListBoxItemButton. And the
            // second call comes from the player event when the actual item is selected (Subtitle / AudioTrack in this case).
            // As this is a generic component we can't prohibit this behaviour. We need to treat this component as it acts
            // independent from PlayerEvents and on the other hand we need to react to PlayerEvents as it could be triggered
            // from outside.
            for (var _i = 0, _a = _this.items; _i < _a.length; _i++) {
                var item = _a[_i];
                var component = _this.getComponentForKey(item.key);
                if (component) {
                    String(component.key) === String(_this.selectedItem) ? component.on() : component.off();
                }
            }
        };
        _this.handleSelectionChange = function (sender) {
            _this.onItemSelectedEvent(sender.key);
        };
        _this.config = _this.mergeConfig(config, {
            cssClass: 'ui-listbox',
        }, _this.config);
        return _this;
    }
    ListBox.prototype.configure = function (player, uimanager) {
        // Subscribe before super call to receive initial events
        this.onItemAdded.subscribe(this.addListBoxDomItem);
        this.onItemRemoved.subscribe(this.removeListBoxDomItem);
        this.onItemSelected.subscribe(this.refreshSelectedItem);
        _super.prototype.configure.call(this, player, uimanager);
    };
    ListBox.prototype.toDomElement = function () {
        var listBoxElement = new dom_1.DOM('div', {
            'id': this.config.id,
            'class': this.getCssClasses(),
        }, this);
        this.listBoxElement = listBoxElement;
        this.createListBoxDomItems();
        this.refreshSelectedItem();
        return listBoxElement;
    };
    ListBox.prototype.createListBoxDomItems = function () {
        // Delete all children
        this.listBoxElement.empty();
        this.components = [];
        // Add updated children
        for (var _i = 0, _a = this.items; _i < _a.length; _i++) {
            var item = _a[_i];
            this.addListBoxDomItem(this, item.key);
        }
    };
    ListBox.prototype.buildListBoxItemButton = function (listItem) {
        return new ListBoxItemButton({
            key: listItem.key,
            text: listItem.label,
            ariaLabel: listItem.ariaLabel,
        });
    };
    ListBox.prototype.getComponentForKey = function (key) {
        return this.components.find(function (c) { return key === c.key; });
    };
    return ListBox;
}(listselector_1.ListSelector));
exports.ListBox = ListBox;
var ListBoxItemButton = /** @class */ (function (_super) {
    __extends(ListBoxItemButton, _super);
    function ListBoxItemButton(config) {
        var _this = _super.call(this, config) || this;
        _this.config = _this.mergeConfig(config, {
            cssClass: 'ui-listbox-button',
            onClass: 'selected',
            offClass: '',
        }, _this.config);
        return _this;
    }
    Object.defineProperty(ListBoxItemButton.prototype, "key", {
        get: function () {
            return this.config.key;
        },
        enumerable: false,
        configurable: true
    });
    return ListBoxItemButton;
}(togglebutton_1.ToggleButton));

},{"../arrayutils":1,"../dom":82,"./listselector":30,"./togglebutton":72}],30:[function(require,module,exports){
"use strict";
var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        if (typeof b !== "function" && b !== null)
            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __assign = (this && this.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.ListSelector = void 0;
var component_1 = require("./component");
var eventdispatcher_1 = require("../eventdispatcher");
var arrayutils_1 = require("../arrayutils");
var i18n_1 = require("../localization/i18n");
var ListSelector = /** @class */ (function (_super) {
    __extends(ListSelector, _super);
    function ListSelector(config) {
        if (config === void 0) { config = {}; }
        var _this = _super.call(this, config) || this;
        _this.listSelectorEvents = {
            onItemAdded: new eventdispatcher_1.EventDispatcher(),
            onItemRemoved: new eventdispatcher_1.EventDispatcher(),
            onItemSelected: new eventdispatcher_1.EventDispatcher(),
        };
        _this.config = _this.mergeConfig(config, {
            items: [],
            cssClass: 'ui-listselector',
        }, _this.config);
        _this.items = _this.config.items;
        return _this;
    }
    ListSelector.prototype.getItemIndex = function (key) {
        for (var index in this.items) {
            if (key === this.items[index].key) {
                return parseInt(index);
            }
        }
        return -1;
    };
    /**
     * Returns all current items of this selector.
     * * @returns {ListItem[]}
     */
    ListSelector.prototype.getItems = function () {
        return this.items;
    };
    /**
     * Checks if the specified item is part of this selector.
     * @param key the key of the item to check
     * @returns {boolean} true if the item is part of this selector, else false
     */
    ListSelector.prototype.hasItem = function (key) {
        return this.getItemIndex(key) > -1;
    };
    /**
     * Adds an item to this selector by doing a sorted insert or by appending the element to the end of the list of items.
     * If an item with the specified key already exists, it is replaced.
     * @param key the key of the item to add
     * @param label the (human-readable) label of the item to add
     * @param sortedInsert whether the item should be added respecting the order of keys
     * @param ariaLabel custom aria label for the listItem
     */
    ListSelector.prototype.addItem = function (key, label, sortedInsert, ariaLabel) {
        if (sortedInsert === void 0) { sortedInsert = false; }
        if (ariaLabel === void 0) { ariaLabel = ''; }
        var listItem = __assign({ key: key, label: i18n_1.i18n.performLocalization(label) }, (ariaLabel && { ariaLabel: ariaLabel }));
        // Apply filter function
        if (this.config.filter && !this.config.filter(listItem)) {
            return;
        }
        // Apply translator function
        if (this.config.translator) {
            listItem.label = this.config.translator(listItem);
        }
        // Try to remove key first to get overwrite behavior and avoid duplicate keys
        this.removeItem(key); // This will trigger an ItemRemoved and an ItemAdded event
        // Add the item to the list
        if (sortedInsert) {
            var index = this.items.findIndex(function (entry) { return entry.key > key; });
            if (index < 0) {
                this.items.push(listItem);
            }
            else {
                this.items.splice(index, 0, listItem);
            }
        }
        else {
            this.items.push(listItem);
        }
        this.onItemAddedEvent(key);
    };
    /**
     * Removes an item from this selector.
     * @param key the key of the item to remove
     * @returns {boolean} true if removal was successful, false if the item is not part of this selector
     */
    ListSelector.prototype.removeItem = function (key) {
        var index = this.getItemIndex(key);
        if (index > -1) {
            arrayutils_1.ArrayUtils.remove(this.items, this.items[index]);
            this.onItemRemovedEvent(key);
            return true;
        }
        return false;
    };
    /**
     * Selects an item from the items in this selector.
     * @param key the key of the item to select
     * @returns {boolean} true is the selection was successful, false if the selected item is not part of the selector
     */
    ListSelector.prototype.selectItem = function (key) {
        if (key === this.selectedItem) {
            // itemConfig is already selected, suppress any further action
            return true;
        }
        var index = this.getItemIndex(key);
        if (index > -1) {
            this.selectedItem = key;
            this.onItemSelectedEvent(key);
            return true;
        }
        return false;
    };
    /**
     * Returns the key of the selected item.
     * @returns {string} the key of the selected item or null if no item is selected
     */
    ListSelector.prototype.getSelectedItem = function () {
        return this.selectedItem;
    };
    /**
     * Returns the items for the given key or undefined if no item with the given key exists.
     * @param key the key of the item to return
     * @returns {ListItem} the item with the requested key. Undefined if no item with the given key exists.
     */
    ListSelector.prototype.getItemForKey = function (key) {
        return this.items.find(function (item) { return item.key === key; });
    };
    /**
     * Synchronize the current items of this selector with the given ones. This will remove and add items selectively.
     * For each removed item the ItemRemovedEvent and for each added item the ItemAddedEvent will be triggered. Favour
     * this method over using clearItems and adding all items again afterwards.
     * @param newItems
     */
    ListSelector.prototype.synchronizeItems = function (newItems) {
        var _this = this;
        newItems
            .filter(function (item) { return !_this.hasItem(item.key); })
            .forEach(function (item) { return _this.addItem(item.key, item.label, item.sortedInsert, item.ariaLabel); });
        this.items
            .filter(function (item) { return newItems.filter(function (i) { return i.key === item.key; }).length === 0; })
            .forEach(function (item) { return _this.removeItem(item.key); });
    };
    /**
     * Removes all items from this selector.
     */
    ListSelector.prototype.clearItems = function () {
        // local copy for iteration after clear
        var items = this.items;
        // clear items
        this.items = [];
        // clear the selection as the selected item is also removed
        this.selectedItem = null;
        // fire events
        for (var _i = 0, items_1 = items; _i < items_1.length; _i++) {
            var item = items_1[_i];
            this.onItemRemovedEvent(item.key);
        }
    };
    /**
     * Returns the number of items in this selector.
     * @returns {number}
     */
    ListSelector.prototype.itemCount = function () {
        return Object.keys(this.items).length;
    };
    ListSelector.prototype.onItemAddedEvent = function (key) {
        this.listSelectorEvents.onItemAdded.dispatch(this, key);
    };
    ListSelector.prototype.onItemRemovedEvent = function (key) {
        this.listSelectorEvents.onItemRemoved.dispatch(this, key);
    };
    ListSelector.prototype.onItemSelectedEvent = function (key) {
        this.listSelectorEvents.onItemSelected.dispatch(this, key);
    };
    Object.defineProperty(ListSelector.prototype, "onItemAdded", {
        /**
         * Gets the event that is fired when an item is added to the list of items.
         * @returns {Event<ListSelector<Config>, string>}
         */
        get: function () {
            return this.listSelectorEvents.onItemAdded.getEvent();
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ListSelector.prototype, "onItemRemoved", {
        /**
         * Gets the event that is fired when an item is removed from the list of items.
         * @returns {Event<ListSelector<Config>, string>}
         */
        get: function () {
            return this.listSelectorEvents.onItemRemoved.getEvent();
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ListSelector.prototype, "onItemSelected", {
        /**
         * Gets the event that is fired when an item is selected from the list of items.
         * @returns {Event<ListSelector<Config>, string>}
         */
        get: function () {
            return this.listSelectorEvents.onItemSelected.getEvent();
        },
        enumerable: false,
        configurable: true
    });
    return ListSelector;
}(component_1.Component));
exports.ListSelector = ListSelector;

},{"../arrayutils":1,"../eventdispatcher":84,"../localization/i18n":89,"./component":18}],31:[function(require,module,exports){
"use strict";
var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        if (typeof b !== "function" && b !== null)
            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
exports.MetadataLabel = exports.MetadataLabelContent = void 0;
var label_1 = require("./label");
/**
 * Enumerates the types of content that the {@link MetadataLabel} can display.
 */
var MetadataLabelContent;
(function (MetadataLabelContent) {
    /**
     * Title of the data source.
     */
    MetadataLabelContent[MetadataLabelContent["Title"] = 0] = "Title";
    /**
     * Description fo the data source.
     */
    MetadataLabelContent[MetadataLabelContent["Description"] = 1] = "Description";
})(MetadataLabelContent = exports.MetadataLabelContent || (exports.MetadataLabelContent = {}));
/**
 * A label that can be configured to display certain metadata.
 *
 * @category Labels
 */
var MetadataLabel = /** @class */ (function (_super) {
    __extends(MetadataLabel, _super);
    function MetadataLabel(config) {
        var _this = _super.call(this, config) || this;
        _this.config = _this.mergeConfig(config, {
            cssClasses: ['label-metadata', 'label-metadata-' + MetadataLabelContent[config.content].toLowerCase()],
        }, _this.config);
        return _this;
    }
    MetadataLabel.prototype.configure = function (player, uimanager) {
        var _this = this;
        _super.prototype.configure.call(this, player, uimanager);
        var config = this.getConfig();
        var uiconfig = uimanager.getConfig();
        var init = function () {
            switch (config.content) {
                case MetadataLabelContent.Title:
                    _this.setText(uiconfig.metadata.title);
                    break;
                case MetadataLabelContent.Description:
                    _this.setText(uiconfig.metadata.description);
                    break;
            }
        };
        var unload = function () {
            _this.setText(null);
        };
        // Init label
        init();
        // Clear labels when source is unloaded
        player.on(player.exports.PlayerEvent.SourceUnloaded, unload);
        uimanager.getConfig().events.onUpdated.subscribe(init);
    };
    return MetadataLabel;
}(label_1.Label));
exports.MetadataLabel = MetadataLabel;

},{"./label":28}],32:[function(require,module,exports){
"use strict";
var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        if (typeof b !== "function" && b !== null)
            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
exports.PictureInPictureToggleButton = void 0;
var togglebutton_1 = require("./togglebutton");
var i18n_1 = require("../localization/i18n");
/**
 * A button that toggles Apple macOS picture-in-picture mode.
 *
 * @category Buttons
 */
var PictureInPictureToggleButton = /** @class */ (function (_super) {
    __extends(PictureInPictureToggleButton, _super);
    function PictureInPictureToggleButton(config) {
        if (config === void 0) { config = {}; }
        var _this = _super.call(this, config) || this;
        _this.config = _this.mergeConfig(config, {
            cssClass: 'ui-piptogglebutton',
            text: i18n_1.i18n.getLocalizer('pictureInPicture'),
        }, _this.config);
        return _this;
    }
    PictureInPictureToggleButton.prototype.configure = function (player, uimanager) {
        var _this = this;
        _super.prototype.configure.call(this, player, uimanager);
        var isPictureInPictureAvailable = function () {
            return player.isViewModeAvailable(player.exports.ViewMode.PictureInPicture);
        };
        var pictureInPictureStateHandler = function () {
            player.getViewMode() === player.exports.ViewMode.PictureInPicture ? _this.on() : _this.off();
        };
        var pictureInPictureAvailabilityChangedHandler = function () {
            isPictureInPictureAvailable() ? _this.show() : _this.hide();
        };
        player.on(player.exports.PlayerEvent.ViewModeChanged, pictureInPictureStateHandler);
        // Available only in our native SDKs for now
        if (player.exports.PlayerEvent.ViewModeAvailabilityChanged) {
            player.on(player.exports.PlayerEvent.ViewModeAvailabilityChanged, pictureInPictureAvailabilityChangedHandler);
        }
        uimanager.getConfig().events.onUpdated.subscribe(pictureInPictureAvailabilityChangedHandler);
        this.onClick.subscribe(function () {
            if (!isPictureInPictureAvailable()) {
                if (console) {
                    console.log('PIP unavailable');
                }
                return;
            }
            var targetViewMode = player.getViewMode() === player.exports.ViewMode.PictureInPicture
                ? player.exports.ViewMode.Inline
                : player.exports.ViewMode.PictureInPicture;
            player.setViewMode(targetViewMode);
        });
        // Startup init
        pictureInPictureAvailabilityChangedHandler(); // Hide button if PIP not available
        pictureInPictureStateHandler();
    };
    return PictureInPictureToggleButton;
}(togglebutton_1.ToggleButton));
exports.PictureInPictureToggleButton = PictureInPictureToggleButton;

},{"../localization/i18n":89,"./togglebutton":72}],33:[function(require,module,exports){
"use strict";
var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        if (typeof b !== "function" && b !== null)
            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
exports.PlaybackSpeedSelectBox = void 0;
var selectbox_1 = require("./selectbox");
var i18n_1 = require("../localization/i18n");
/**
 * A select box providing a selection of different playback speeds.
 *
 * @category Components
 */
var PlaybackSpeedSelectBox = /** @class */ (function (_super) {
    __extends(PlaybackSpeedSelectBox, _super);
    function PlaybackSpeedSelectBox(config) {
        if (config === void 0) { config = {}; }
        var _this = _super.call(this, config) || this;
        _this.defaultPlaybackSpeeds = [0.25, 0.5, 1, 1.5, 2];
        _this.config = _this.mergeConfig(config, {
            cssClasses: ['ui-playbackspeedselectbox'],
        }, _this.config);
        return _this;
    }
    PlaybackSpeedSelectBox.prototype.configure = function (player, uimanager) {
        var _this = this;
        _super.prototype.configure.call(this, player, uimanager);
        this.addDefaultItems();
        this.onItemSelected.subscribe(function (sender, value) {
            player.setPlaybackSpeed(parseFloat(value));
            _this.selectItem(value);
        });
        var setDefaultValue = function () {
            var playbackSpeed = player.getPlaybackSpeed();
            _this.setSpeed(playbackSpeed);
        };
        player.on(player.exports.PlayerEvent.PlaybackSpeedChanged, setDefaultValue);
        uimanager.getConfig().events.onUpdated.subscribe(setDefaultValue);
    };
    PlaybackSpeedSelectBox.prototype.setSpeed = function (speed) {
        if (!this.selectItem(String(speed))) {
            // a playback speed was set which is not in the list, add it to the list to show it to the user
            this.clearItems();
            this.addDefaultItems([speed]);
            this.selectItem(String(speed));
        }
    };
    PlaybackSpeedSelectBox.prototype.addDefaultItems = function (customItems) {
        var _this = this;
        if (customItems === void 0) { customItems = []; }
        var sortedSpeeds = this.defaultPlaybackSpeeds.concat(customItems).sort();
        sortedSpeeds.forEach(function (element) {
            if (element !== 1) {
                _this.addItem(String(element), "".concat(element, "x"));
            }
            else {
                _this.addItem(String(element), i18n_1.i18n.getLocalizer('normal'));
            }
        });
    };
    PlaybackSpeedSelectBox.prototype.clearItems = function () {
        this.items = [];
        this.selectedItem = null;
    };
    return PlaybackSpeedSelectBox;
}(selectbox_1.SelectBox));
exports.PlaybackSpeedSelectBox = PlaybackSpeedSelectBox;

},{"../localization/i18n":89,"./selectbox":44}],34:[function(require,module,exports){
"use strict";
var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        if (typeof b !== "function" && b !== null)
            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
exports.PlaybackTimeLabel = exports.PlaybackTimeLabelMode = void 0;
var label_1 = require("./label");
var playerutils_1 = require("../playerutils");
var stringutils_1 = require("../stringutils");
var i18n_1 = require("../localization/i18n");
var PlaybackTimeLabelMode;
(function (PlaybackTimeLabelMode) {
    /**
     * Displays the current time
     */
    PlaybackTimeLabelMode[PlaybackTimeLabelMode["CurrentTime"] = 0] = "CurrentTime";
    /**
     * Displays the duration of the content
     */
    PlaybackTimeLabelMode[PlaybackTimeLabelMode["TotalTime"] = 1] = "TotalTime";
    /**
     * Displays the current time and the duration of the content
     * Format: ${currentTime} / ${totalTime}
     */
    PlaybackTimeLabelMode[PlaybackTimeLabelMode["CurrentAndTotalTime"] = 2] = "CurrentAndTotalTime";
    /**
     * Displays the remaining time of the content
     */
    PlaybackTimeLabelMode[PlaybackTimeLabelMode["RemainingTime"] = 3] = "RemainingTime";
})(PlaybackTimeLabelMode = exports.PlaybackTimeLabelMode || (exports.PlaybackTimeLabelMode = {}));
/**
 * A label that display the current playback time and the total time through {@link PlaybackTimeLabel#setTime setTime}
 * or any string through {@link PlaybackTimeLabel#setText setText}.
 *
 * @category Labels
 */
var PlaybackTimeLabel = /** @class */ (function (_super) {
    __extends(PlaybackTimeLabel, _super);
    function PlaybackTimeLabel(config) {
        if (config === void 0) { config = {}; }
        var _this = _super.call(this, config) || this;
        _this.config = _this.mergeConfig(config, {
            cssClass: 'ui-playbacktimelabel',
            timeLabelMode: PlaybackTimeLabelMode.CurrentAndTotalTime,
            hideInLivePlayback: false,
        }, _this.config);
        return _this;
    }
    PlaybackTimeLabel.prototype.configure = function (player, uimanager) {
        var _this = this;
        _super.prototype.configure.call(this, player, uimanager);
        var config = this.getConfig();
        var live = false;
        var liveCssClass = this.prefixCss('ui-playbacktimelabel-live');
        var liveEdgeCssClass = this.prefixCss('ui-playbacktimelabel-live-edge');
        var minWidth = 0;
        var liveClickHandler = function () {
            player.timeShift(0);
        };
        var updateLiveState = function () {
            // Player is playing a live stream when the duration is infinite
            live = player.isLive();
            // Attach/detach live marker class
            if (live) {
                _this.getDomElement().addClass(liveCssClass);
                _this.setText(i18n_1.i18n.getLocalizer('live'));
                if (config.hideInLivePlayback) {
                    _this.hide();
                }
                _this.onClick.subscribe(liveClickHandler);
                updateLiveTimeshiftState();
            }
            else {
                _this.getDomElement().removeClass(liveCssClass);
                _this.getDomElement().removeClass(liveEdgeCssClass);
                _this.show();
                _this.onClick.unsubscribe(liveClickHandler);
            }
        };
        var updateLiveTimeshiftState = function () {
            if (!live) {
                return;
            }
            // The player is only at the live edge iff the stream is not shifted and it is actually playing or playback has
            // never been started (meaning it isn't paused). A player that is paused is always behind the live edge.
            // An exception is made for live streams without a timeshift window, because here we "stop" playback instead
            // of pausing it (from a UI perspective), so we keep the live edge indicator on because a play would always
            // resume at the live edge.
            var isTimeshifted = player.getTimeShift() < 0;
            var isTimeshiftAvailable = player.getMaxTimeShift() < 0;
            if (!isTimeshifted && (!player.isPaused() || !isTimeshiftAvailable)) {
                _this.getDomElement().addClass(liveEdgeCssClass);
            }
            else {
                _this.getDomElement().removeClass(liveEdgeCssClass);
            }
        };
        var liveStreamDetector = new playerutils_1.PlayerUtils.LiveStreamDetector(player, uimanager);
        liveStreamDetector.onLiveChanged.subscribe(function (sender, args) {
            live = args.live;
            updateLiveState();
        });
        liveStreamDetector.detect(); // Initial detection
        var playbackTimeHandler = function () {
            if (!live && player.getDuration() !== Infinity) {
                _this.setTime(playerutils_1.PlayerUtils.getCurrentTimeRelativeToSeekableRange(player), player.getDuration());
            }
            // To avoid 'jumping' in the UI by varying label sizes due to non-monospaced fonts,
            // we gradually increase the min-width with the content to reach a stable size.
            var width = _this.getDomElement().width();
            if (width > minWidth) {
                minWidth = width;
                _this.getDomElement().css({
                    'min-width': minWidth + 'px',
                });
            }
        };
        var updateTimeFormatBasedOnDuration = function () {
            // Set time format depending on source duration
            _this.timeFormat = Math.abs(player.isLive() ? player.getMaxTimeShift() : player.getDuration()) >= 3600 ?
                stringutils_1.StringUtils.FORMAT_HHMMSS : stringutils_1.StringUtils.FORMAT_MMSS;
            playbackTimeHandler();
        };
        player.on(player.exports.PlayerEvent.TimeChanged, playbackTimeHandler);
        player.on(player.exports.PlayerEvent.Ready, updateTimeFormatBasedOnDuration);
        player.on(player.exports.PlayerEvent.Seeked, playbackTimeHandler);
        player.on(player.exports.PlayerEvent.TimeShift, updateLiveTimeshiftState);
        player.on(player.exports.PlayerEvent.TimeShifted, updateLiveTimeshiftState);
        player.on(player.exports.PlayerEvent.Playing, updateLiveTimeshiftState);
        player.on(player.exports.PlayerEvent.Paused, updateLiveTimeshiftState);
        player.on(player.exports.PlayerEvent.StallStarted, updateLiveTimeshiftState);
        player.on(player.exports.PlayerEvent.StallEnded, updateLiveTimeshiftState);
        var init = function () {
            // Reset min-width when a new source is ready (especially for switching VOD/Live modes where the label content
            // changes)
            minWidth = 0;
            _this.getDomElement().css({
                'min-width': null,
            });
            updateTimeFormatBasedOnDuration();
        };
        uimanager.getConfig().events.onUpdated.subscribe(init);
        init();
    };
    /**
     * Sets the current playback time and total duration.
     * @param playbackSeconds the current playback time in seconds
     * @param durationSeconds the total duration in seconds
     */
    PlaybackTimeLabel.prototype.setTime = function (playbackSeconds, durationSeconds) {
        var currentTime = stringutils_1.StringUtils.secondsToTime(playbackSeconds, this.timeFormat);
        var totalTime = stringutils_1.StringUtils.secondsToTime(durationSeconds, this.timeFormat);
        switch (this.config.timeLabelMode) {
            case PlaybackTimeLabelMode.CurrentTime:
                this.setText("".concat(currentTime));
                break;
            case PlaybackTimeLabelMode.TotalTime:
                this.setText("".concat(totalTime));
                break;
            case PlaybackTimeLabelMode.CurrentAndTotalTime:
                this.setText("".concat(currentTime, " / ").concat(totalTime));
                break;
            case PlaybackTimeLabelMode.RemainingTime:
                var remainingTime = stringutils_1.StringUtils.secondsToTime(durationSeconds - playbackSeconds, this.timeFormat);
                this.setText("".concat(remainingTime));
                break;
        }
    };
    /**
     * Sets the current time format
     * @param timeFormat the time format
     */
    PlaybackTimeLabel.prototype.setTimeFormat = function (timeFormat) {
        this.timeFormat = timeFormat;
    };
    return PlaybackTimeLabel;
}(label_1.Label));
exports.PlaybackTimeLabel = PlaybackTimeLabel;

},{"../localization/i18n":89,"../playerutils":96,"../stringutils":109,"./label":28}],35:[function(require,module,exports){
"use strict";
var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        if (typeof b !== "function" && b !== null)
            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
exports.PlaybackToggleButton = void 0;
var togglebutton_1 = require("./togglebutton");
var playerutils_1 = require("../playerutils");
var i18n_1 = require("../localization/i18n");
/**
 * A button that toggles between playback and pause.
 *
 * @category Buttons
 */
var PlaybackToggleButton = exports.PlaybackToggleButton = /** @class */ (function (_super) {
    __extends(PlaybackToggleButton, _super);
    function PlaybackToggleButton(config) {
        if (config === void 0) { config = {}; }
        var _this = _super.call(this, config) || this;
        _this.config = _this.mergeConfig(config, {
            cssClass: 'ui-playbacktogglebutton',
            text: i18n_1.i18n.getLocalizer('play'),
            onAriaLabel: i18n_1.i18n.getLocalizer('pause'),
            offAriaLabel: i18n_1.i18n.getLocalizer('play'),
        }, _this.config);
        _this.isPlayInitiated = false;
        return _this;
    }
    PlaybackToggleButton.prototype.configure = function (player, uimanager, handleClickEvent) {
        var _this = this;
        if (handleClickEvent === void 0) { handleClickEvent = true; }
        _super.prototype.configure.call(this, player, uimanager);
        // Set enterFullscreenOnInitialPlayback if set in the uimanager config
        if (typeof uimanager.getConfig().enterFullscreenOnInitialPlayback === 'boolean') {
            this.config.enterFullscreenOnInitialPlayback = uimanager.getConfig().enterFullscreenOnInitialPlayback;
        }
        var isSeeking = false;
        var firstPlay = true;
        // Handler to update button state based on player state
        var playbackStateHandler = function () {
            // If the UI is currently seeking, playback is temporarily stopped but the buttons should
            // not reflect that and stay as-is (e.g indicate playback while seeking).
            if (isSeeking) {
                return;
            }
            if (player.isPlaying() || _this.isPlayInitiated) {
                _this.on();
            }
            else {
                _this.off();
            }
        };
        // Call handler upon these events
        player.on(player.exports.PlayerEvent.Play, function (e) {
            _this.isPlayInitiated = true;
            firstPlay = false;
            playbackStateHandler();
        });
        player.on(player.exports.PlayerEvent.Paused, function (e) {
            _this.isPlayInitiated = false;
            playbackStateHandler();
        });
        player.on(player.exports.PlayerEvent.Playing, function (e) {
            _this.isPlayInitiated = false;
            playbackStateHandler();
        });
        // after unloading + loading a new source, the player might be in a different playing state (from playing into stopped)
        player.on(player.exports.PlayerEvent.SourceLoaded, playbackStateHandler);
        uimanager.getConfig().events.onUpdated.subscribe(playbackStateHandler);
        player.on(player.exports.PlayerEvent.SourceUnloaded, playbackStateHandler);
        // when playback finishes, player turns to paused mode
        player.on(player.exports.PlayerEvent.PlaybackFinished, playbackStateHandler);
        player.on(player.exports.PlayerEvent.CastStarted, playbackStateHandler);
        // When a playback attempt is rejected with warning 5008, we switch the button state back to off
        // This is required for blocked autoplay, because there is no Paused event in such case
        player.on(player.exports.PlayerEvent.Warning, function (event) {
            if (event.code === player.exports.WarningCode.PLAYBACK_COULD_NOT_BE_STARTED) {
                _this.isPlayInitiated = false;
                firstPlay = true;
                _this.off();
            }
        });
        var updateLiveState = function () {
            var showStopToggle = player.isLive() && !playerutils_1.PlayerUtils.isTimeShiftAvailable(player);
            if (showStopToggle) {
                _this.getDomElement().addClass(_this.prefixCss(PlaybackToggleButton.CLASS_STOPTOGGLE));
            }
            else {
                _this.getDomElement().removeClass(_this.prefixCss(PlaybackToggleButton.CLASS_STOPTOGGLE));
            }
        };
        // Detect absence of timeshifting on live streams and add tagging class to convert button icons to play/stop
        var timeShiftDetector = new playerutils_1.PlayerUtils.TimeShiftAvailabilityDetector(player);
        var liveStreamDetector = new playerutils_1.PlayerUtils.LiveStreamDetector(player, uimanager);
        timeShiftDetector.onTimeShiftAvailabilityChanged.subscribe(function () { return updateLiveState(); });
        liveStreamDetector.onLiveChanged.subscribe(function () { return updateLiveState(); });
        timeShiftDetector.detect(); // Initial detection
        liveStreamDetector.detect();
        if (handleClickEvent) {
            // Control player by button events
            // When a button event triggers a player API call, events are fired which in turn call the event handler
            // above that updated the button state.
            this.onClick.subscribe(function () {
                if (player.isPlaying() || _this.isPlayInitiated) {
                    player.pause('ui');
                }
                else {
                    player.play('ui');
                    if (firstPlay && _this.config.enterFullscreenOnInitialPlayback) {
                        player.setViewMode(player.exports.ViewMode.Fullscreen);
                    }
                }
            });
        }
        // Track UI seeking status
        uimanager.onSeek.subscribe(function () {
            isSeeking = true;
        });
        uimanager.onSeeked.subscribe(function () {
            isSeeking = false;
        });
        // Startup init
        playbackStateHandler();
    };
    PlaybackToggleButton.CLASS_STOPTOGGLE = 'stoptoggle';
    return PlaybackToggleButton;
}(togglebutton_1.ToggleButton));

},{"../localization/i18n":89,"../playerutils":96,"./togglebutton":72}],36:[function(require,module,exports){
"use strict";
var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        if (typeof b !== "function" && b !== null)
            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
exports.PlaybackToggleOverlay = void 0;
var container_1 = require("./container");
var hugeplaybacktogglebutton_1 = require("./hugeplaybacktogglebutton");
/**
 * Overlays the player and displays error messages.
 *
 * @category Components
 */
var PlaybackToggleOverlay = /** @class */ (function (_super) {
    __extends(PlaybackToggleOverlay, _super);
    function PlaybackToggleOverlay(config) {
        if (config === void 0) { config = {}; }
        var _this = _super.call(this, config) || this;
        _this.playbackToggleButton = new hugeplaybacktogglebutton_1.HugePlaybackToggleButton({
            enterFullscreenOnInitialPlayback: Boolean(config.enterFullscreenOnInitialPlayback),
        });
        _this.config = _this.mergeConfig(config, {
            cssClass: 'ui-playbacktoggle-overlay',
            components: [_this.playbackToggleButton],
        }, _this.config);
        return _this;
    }
    return PlaybackToggleOverlay;
}(container_1.Container));
exports.PlaybackToggleOverlay = PlaybackToggleOverlay;

},{"./container":19,"./hugeplaybacktogglebutton":25}],37:[function(require,module,exports){
"use strict";
var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        if (typeof b !== "function" && b !== null)
            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
exports.QuickSeekButton = void 0;
var button_1 = require("./button");
var i18n_1 = require("../localization/i18n");
var playerutils_1 = require("../playerutils");
/**
 * @category Buttons
 */
var QuickSeekButton = /** @class */ (function (_super) {
    __extends(QuickSeekButton, _super);
    function QuickSeekButton(config) {
        if (config === void 0) { config = {}; }
        var _this = _super.call(this, config) || this;
        _this.onSeek = function (event) {
            _this.currentSeekTarget = event.seekTarget;
        };
        _this.onSeekedOrTimeShifted = function () {
            _this.currentSeekTarget = null;
        };
        _this.onTimeShift = function (event) {
            _this.currentSeekTarget = _this.player.getTimeShift() + (event.target - event.position);
        };
        _this.currentSeekTarget = null;
        _this.config = _this.mergeConfig(config, {
            seekSeconds: -10,
            cssClass: 'ui-quickseekbutton',
        }, _this.config);
        var seekDirection = _this.config.seekSeconds < 0 ? 'rewind' : 'forward';
        _this.config.text = _this.config.text || i18n_1.i18n.getLocalizer("quickseek.".concat(seekDirection));
        _this.config.ariaLabel = _this.config.ariaLabel || i18n_1.i18n.getLocalizer("quickseek.".concat(seekDirection));
        _this.getDomElement().data(_this.prefixCss('seek-direction'), seekDirection);
        return _this;
    }
    QuickSeekButton.prototype.configure = function (player, uimanager) {
        var _this = this;
        _super.prototype.configure.call(this, player, uimanager);
        this.player = player;
        var isLive;
        var hasTimeShift;
        var switchVisibility = function (isLive, hasTimeShift) {
            if (isLive && !hasTimeShift) {
                _this.hide();
            }
            else {
                _this.show();
            }
        };
        var timeShiftDetector = new playerutils_1.PlayerUtils.TimeShiftAvailabilityDetector(player);
        timeShiftDetector.onTimeShiftAvailabilityChanged.subscribe(function (sender, args) {
            hasTimeShift = args.timeShiftAvailable;
            switchVisibility(isLive, hasTimeShift);
        });
        var liveStreamDetector = new playerutils_1.PlayerUtils.LiveStreamDetector(player, uimanager);
        liveStreamDetector.onLiveChanged.subscribe(function (sender, args) {
            isLive = args.live;
            switchVisibility(isLive, hasTimeShift);
        });
        // Initial detection
        timeShiftDetector.detect();
        liveStreamDetector.detect();
        this.onClick.subscribe(function () {
            if (isLive && !hasTimeShift) {
                // If no DVR window is available, the button should be hidden anyway, so this is to be absolutely sure
                return;
            }
            if (isLive && _this.config.seekSeconds > 0 && player.getTimeShift() === 0) {
                // Don't do anything if the player is already on the live edge
                return;
            }
            var currentPosition = _this.currentSeekTarget !== null
                ? _this.currentSeekTarget
                : isLive
                    ? player.getTimeShift()
                    : player.getCurrentTime();
            var newSeekTime = currentPosition + _this.config.seekSeconds;
            if (isLive) {
                var clampedValue = playerutils_1.PlayerUtils.clampValueToRange(newSeekTime, player.getMaxTimeShift(), 0);
                player.timeShift(clampedValue);
            }
            else {
                var clampedValue = playerutils_1.PlayerUtils.clampValueToRange(newSeekTime, 0, player.getDuration());
                player.seek(clampedValue);
            }
        });
        this.player.on(this.player.exports.PlayerEvent.Seek, this.onSeek);
        this.player.on(this.player.exports.PlayerEvent.Seeked, this.onSeekedOrTimeShifted);
        this.player.on(this.player.exports.PlayerEvent.TimeShift, this.onTimeShift);
        this.player.on(this.player.exports.PlayerEvent.TimeShifted, this.onSeekedOrTimeShifted);
    };
    QuickSeekButton.prototype.release = function () {
        this.player.off(this.player.exports.PlayerEvent.Seek, this.onSeek);
        this.player.off(this.player.exports.PlayerEvent.Seeked, this.onSeekedOrTimeShifted);
        this.player.off(this.player.exports.PlayerEvent.TimeShift, this.onTimeShift);
        this.player.off(this.player.exports.PlayerEvent.TimeShifted, this.onSeekedOrTimeShifted);
        this.currentSeekTarget = null;
        this.player = null;
    };
    return QuickSeekButton;
}(button_1.Button));
exports.QuickSeekButton = QuickSeekButton;

},{"../localization/i18n":89,"../playerutils":96,"./button":12}],38:[function(require,module,exports){
"use strict";
var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        if (typeof b !== "function" && b !== null)
            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
exports.RecommendationOverlay = void 0;
var container_1 = require("./container");
var component_1 = require("./component");
var dom_1 = require("../dom");
var stringutils_1 = require("../stringutils");
var hugereplaybutton_1 = require("./hugereplaybutton");
/**
 * Overlays the player and displays recommended videos.
 *
 * @category Containers
 */
var RecommendationOverlay = /** @class */ (function (_super) {
    __extends(RecommendationOverlay, _super);
    function RecommendationOverlay(config) {
        if (config === void 0) { config = {}; }
        var _this = _super.call(this, config) || this;
        _this.replayButton = new hugereplaybutton_1.HugeReplayButton();
        _this.config = _this.mergeConfig(config, {
            cssClass: 'ui-recommendation-overlay',
            hidden: true,
            components: [_this.replayButton],
        }, _this.config);
        return _this;
    }
    RecommendationOverlay.prototype.configure = function (player, uimanager) {
        var _this = this;
        _super.prototype.configure.call(this, player, uimanager);
        var clearRecommendations = function () {
            for (var _i = 0, _a = _this.getComponents().slice(); _i < _a.length; _i++) {
                var component = _a[_i];
                if (component instanceof RecommendationItem) {
                    _this.removeComponent(component);
                }
            }
            _this.updateComponents();
            _this.getDomElement().removeClass(_this.prefixCss('recommendations'));
        };
        var setupRecommendations = function () {
            clearRecommendations();
            var recommendations = uimanager.getConfig().recommendations;
            if (recommendations.length > 0) {
                var index = 1;
                for (var _i = 0, recommendations_1 = recommendations; _i < recommendations_1.length; _i++) {
                    var item = recommendations_1[_i];
                    _this.addComponent(new RecommendationItem({
                        itemConfig: item,
                        cssClasses: ['recommendation-item-' + (index++)],
                    }));
                }
                _this.updateComponents(); // create container DOM elements
                _this.getDomElement().addClass(_this.prefixCss('recommendations'));
            }
        };
        uimanager.getConfig().events.onUpdated.subscribe(setupRecommendations);
        // Remove recommendations and hide overlay when source is unloaded
        player.on(player.exports.PlayerEvent.SourceUnloaded, function () {
            clearRecommendations();
            _this.hide();
        });
        // Display recommendations when playback has finished
        player.on(player.exports.PlayerEvent.PlaybackFinished, function () {
            _this.show();
        });
        // Hide recommendations when playback starts, e.g. a restart
        player.on(player.exports.PlayerEvent.Play, function () {
            _this.hide();
        });
        // Init on startup
        setupRecommendations();
    };
    return RecommendationOverlay;
}(container_1.Container));
exports.RecommendationOverlay = RecommendationOverlay;
/**
 * An item of the {@link RecommendationOverlay}. Used only internally in {@link RecommendationOverlay}.
 */
var RecommendationItem = /** @class */ (function (_super) {
    __extends(RecommendationItem, _super);
    function RecommendationItem(config) {
        var _this = _super.call(this, config) || this;
        _this.config = _this.mergeConfig(config, {
            cssClass: 'ui-recommendation-item',
            itemConfig: null, // this must be passed in from outside
        }, _this.config);
        return _this;
    }
    RecommendationItem.prototype.toDomElement = function () {
        var config = this.config.itemConfig;
        var itemElement = new dom_1.DOM('a', {
            'id': this.config.id,
            'class': this.getCssClasses(),
            'href': config.url,
        }, this).css({ 'background-image': "url(".concat(config.thumbnail, ")") });
        var bgElement = new dom_1.DOM('div', {
            'class': this.prefixCss('background'),
        });
        itemElement.append(bgElement);
        var titleElement = new dom_1.DOM('span', {
            'class': this.prefixCss('title'),
        }).append(new dom_1.DOM('span', {
            'class': this.prefixCss('innertitle'),
        }).html(config.title));
        itemElement.append(titleElement);
        var timeElement = new dom_1.DOM('span', {
            'class': this.prefixCss('duration'),
        }).append(new dom_1.DOM('span', {
            'class': this.prefixCss('innerduration'),
        }).html(config.duration ? stringutils_1.StringUtils.secondsToTime(config.duration) : ''));
        itemElement.append(timeElement);
        return itemElement;
    };
    return RecommendationItem;
}(component_1.Component));

},{"../dom":82,"../stringutils":109,"./component":18,"./container":19,"./hugereplaybutton":26}],39:[function(require,module,exports){
"use strict";
var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        if (typeof b !== "function" && b !== null)
            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
exports.ReplayButton = void 0;
var button_1 = require("./button");
var i18n_1 = require("../localization/i18n");
var playerutils_1 = require("../playerutils");
/**
 * A button to play/replay a video.
 *
 * @category Buttons
 */
var ReplayButton = /** @class */ (function (_super) {
    __extends(ReplayButton, _super);
    function ReplayButton(config) {
        if (config === void 0) { config = {}; }
        var _this = _super.call(this, config) || this;
        _this.config = _this.mergeConfig(config, {
            cssClass: 'ui-replaybutton',
            text: i18n_1.i18n.getLocalizer('replay'),
            ariaLabel: i18n_1.i18n.getLocalizer('replay'),
        }, _this.config);
        return _this;
    }
    ReplayButton.prototype.configure = function (player, uimanager) {
        var _this = this;
        _super.prototype.configure.call(this, player, uimanager);
        if (player.isLive()) {
            this.hide();
        }
        var liveStreamDetector = new playerutils_1.PlayerUtils.LiveStreamDetector(player, uimanager);
        liveStreamDetector.onLiveChanged.subscribe(function (sender, args) {
            if (args.live) {
                _this.hide();
            }
            else {
                _this.show();
            }
        });
        this.onClick.subscribe(function () {
            if (!player.hasEnded()) {
                player.seek(0);
                // Not calling `play` will keep the play/pause state as is
            }
            else {
                // If playback has already ended, calling `play` will automatically restart from the beginning
                player.play('ui');
            }
        });
    };
    return ReplayButton;
}(button_1.Button));
exports.ReplayButton = ReplayButton;

},{"../localization/i18n":89,"../playerutils":96,"./button":12}],40:[function(require,module,exports){
"use strict";
var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        if (typeof b !== "function" && b !== null)
            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
exports.SeekBar = void 0;
var groupplaybackapi_1 = require("./../groupplaybackapi");
var component_1 = require("./component");
var dom_1 = require("../dom");
var eventdispatcher_1 = require("../eventdispatcher");
var timeout_1 = require("../timeout");
var playerutils_1 = require("../playerutils");
var stringutils_1 = require("../stringutils");
var seekbarcontroller_1 = require("./seekbarcontroller");
var i18n_1 = require("../localization/i18n");
var browserutils_1 = require("../browserutils");
var timelinemarkershandler_1 = require("./timelinemarkershandler");
var seekbarbufferlevel_1 = require("./seekbarbufferlevel");
/**
 * A seek bar to seek within the player's media. It displays the current playback position, amount of buffed data, seek
 * target, and keeps status about an ongoing seek.
 *
 * The seek bar displays different 'bars':
 *  - the playback position, i.e. the position in the media at which the player current playback pointer is positioned
 *  - the buffer position, which usually is the playback position plus the time span that is already buffered ahead
 *  - the seek position, used to preview to where in the timeline a seek will jump to
 *
 *  @category Components
 */
var SeekBar = exports.SeekBar = /** @class */ (function (_super) {
    __extends(SeekBar, _super);
    function SeekBar(config) {
        if (config === void 0) { config = {}; }
        var _this = _super.call(this, config) || this;
        /**
         * Buffer of the the current playback position. The position must be buffered in case the element
         * needs to be refreshed with {@link #refreshPlaybackPosition}.
         * @type {number}
         */
        _this.playbackPositionPercentage = 0;
        _this.isUserSeeking = false;
        _this.seekBarEvents = {
            /**
             * Fired when a scrubbing seek operation is started.
             */
            onSeek: new eventdispatcher_1.EventDispatcher(),
            /**
             * Fired during a scrubbing seek to indicate that the seek preview (i.e. the video frame) should be updated.
             */
            onSeekPreview: new eventdispatcher_1.EventDispatcher(),
            /**
             * Fired when a scrubbing seek has finished or when a direct seek is issued.
             */
            onSeeked: new eventdispatcher_1.EventDispatcher(),
        };
        _this.seekWhileScrubbing = function (sender, args) {
            if (args.scrubbing) {
                _this.seek(args.position);
            }
        };
        _this.getTargetSeekPosition = function (percentage) {
            var target;
            if (_this.player.isLive()) {
                var maxTimeShift = _this.player.getMaxTimeShift();
                target = maxTimeShift - (maxTimeShift * (percentage / 100));
            }
            else {
                var seekableRangeStart = playerutils_1.PlayerUtils.getSeekableRangeStart(_this.player, 0);
                var relativeSeekTarget = _this.player.getDuration() * (percentage / 100);
                target = relativeSeekTarget + seekableRangeStart;
            }
            return target;
        };
        _this.seek = function (percentage) {
            var targetPlaybackPosition = _this.getTargetSeekPosition(percentage);
            if (_this.player.isLive()) {
                _this.player.timeShift(targetPlaybackPosition, 'ui');
            }
            else {
                _this.player.seek(targetPlaybackPosition, 'ui');
            }
        };
        _this.updateLabelPosition = function (pixelPosition) {
            if (!_this.uiBoundingRect) {
                _this.uiBoundingRect = _this.uiManager.getUI().getDomElement().get(0).getBoundingClientRect();
            }
            _this.label.setPositionInBounds(pixelPosition, _this.uiBoundingRect);
        };
        var keyStepIncrements = _this.config.keyStepIncrements || {
            leftRight: 1,
            upDown: 5,
        };
        _this.config = _this.mergeConfig(config, {
            cssClass: 'ui-seekbar',
            vertical: false,
            smoothPlaybackPositionUpdateIntervalMs: 50,
            keyStepIncrements: keyStepIncrements,
            ariaLabel: i18n_1.i18n.getLocalizer('seekBar'),
            tabIndex: 0,
            snappingRange: 1,
            enableSeekPreview: true,
            snappingEnabled: true,
        }, _this.config);
        _this.label = _this.config.label;
        return _this;
    }
    SeekBar.prototype.initialize = function () {
        _super.prototype.initialize.call(this);
        if (this.hasLabel()) {
            this.getLabel().initialize();
        }
    };
    SeekBar.prototype.setAriaSliderMinMax = function (min, max) {
        this.getDomElement().attr('aria-valuemin', min);
        this.getDomElement().attr('aria-valuemax', max);
    };
    SeekBar.prototype.setAriaSliderValues = function () {
        if (this.seekBarType === seekbarcontroller_1.SeekBarType.Live) {
            var timeshiftValue = Math.ceil(this.player.getTimeShift()).toString();
            this.getDomElement().attr('aria-valuenow', timeshiftValue);
            this.getDomElement().attr('aria-valuetext', "".concat(i18n_1.i18n.performLocalization(i18n_1.i18n.getLocalizer('seekBar.timeshift')), " ").concat(i18n_1.i18n.performLocalization(i18n_1.i18n.getLocalizer('seekBar.value')), ": ").concat(timeshiftValue));
        }
        else if (this.seekBarType === seekbarcontroller_1.SeekBarType.Vod) {
            var ariaValueText = "".concat(stringutils_1.StringUtils.secondsToText(this.player.getCurrentTime()), " ").concat(i18n_1.i18n.performLocalization(i18n_1.i18n.getLocalizer('seekBar.durationText')), " ").concat(stringutils_1.StringUtils.secondsToText(this.player.getDuration()));
            this.getDomElement().attr('aria-valuenow', Math.floor(this.player.getCurrentTime()).toString());
            this.getDomElement().attr('aria-valuetext', ariaValueText);
        }
    };
    SeekBar.prototype.getPlaybackPositionPercentage = function () {
        if (this.player.isLive()) {
            return 100 - (100 / this.player.getMaxTimeShift() * this.player.getTimeShift());
        }
        return 100 / this.player.getDuration() * this.getRelativeCurrentTime();
    };
    SeekBar.prototype.updateBufferLevel = function (playbackPositionPercentage) {
        var bufferLoadedPercentageLevel;
        if (this.player.isLive()) {
            // Always show full buffer for live streams
            bufferLoadedPercentageLevel = 100;
        }
        else {
            bufferLoadedPercentageLevel = playbackPositionPercentage + (0, seekbarbufferlevel_1.getMinBufferLevel)(this.player);
        }
        this.setBufferPosition(bufferLoadedPercentageLevel);
    };
    SeekBar.prototype.configure = function (player, uimanager, configureSeek) {
        var _this = this;
        if (configureSeek === void 0) { configureSeek = true; }
        _super.prototype.configure.call(this, player, uimanager);
        this.player = player;
        this.uiManager = uimanager;
        // Apply scaling transform to the backdrop bar to have all bars rendered similarly
        // (the call must be up here to be executed for the volume slider as well)
        this.setPosition(this.seekBarBackdrop, 100);
        // Add seekbar controls to the seekbar
        var seekBarController = new seekbarcontroller_1.SeekBarController(this.config.keyStepIncrements, player, uimanager.getConfig().volumeController);
        seekBarController.setSeekBarControls(this.getDomElement(), function () { return _this.seekBarType; });
        // The configureSeek flag can be used by subclasses to disable configuration as seek bar. E.g. the volume
        // slider is reusing this component but adds its own functionality, and does not need the seek functionality.
        // This is actually a hack, the proper solution would be for both seek bar and volume sliders to extend
        // a common base slider component and implement their functionality there.
        if (!configureSeek) {
            this.seekBarType = seekbarcontroller_1.SeekBarType.Volume;
            return;
        }
        uimanager.onControlsShow.subscribe(function () {
            _this.isUiShown = true;
            if (!player.isLive() && !_this.smoothPlaybackPositionUpdater.isActive()) {
                playbackPositionHandler(null, true);
                _this.smoothPlaybackPositionUpdater.start();
            }
        });
        uimanager.onControlsHide.subscribe(function () {
            _this.isUiShown = false;
            if (_this.smoothPlaybackPositionUpdater.isActive()) {
                _this.smoothPlaybackPositionUpdater.clear();
            }
        });
        var isPlaying = false;
        var scrubbing = false;
        var isPlayerSeeking = false;
        var suspension;
        // Update playback and buffer positions
        var playbackPositionHandler = function (event, forceUpdate) {
            if (event === void 0) { event = null; }
            if (forceUpdate === void 0) { forceUpdate = false; }
            if (_this.isUserSeeking) {
                // We caught a seek preview seek, do not update the seekbar
                return;
            }
            var playbackPositionPercentage = _this.getPlaybackPositionPercentage();
            _this.updateBufferLevel(playbackPositionPercentage);
            // The segment request finished is used to help the playback position move, when the smooth playback position is not enabled.
            // At the same time when the user is scrubbing, we also move the position of the seekbar to display a preview during scrubbing.
            // When the user is scrubbing we do not record this as a user seek operation, as the user has yet to finish their seek,
            // but we should not move the playback position to not create a jumping behaviour.
            if (scrubbing && event && event.type === player.exports.PlayerEvent.SegmentRequestFinished && playbackPositionPercentage !== _this.playbackPositionPercentage) {
                playbackPositionPercentage = _this.playbackPositionPercentage;
            }
            if (player.isLive()) {
                if (player.getMaxTimeShift() === 0) {
                    // This case must be explicitly handled to avoid division by zero
                    _this.setPlaybackPosition(100);
                }
                else {
                    if (!_this.isSeeking()) {
                        _this.setPlaybackPosition(playbackPositionPercentage);
                    }
                    _this.setAriaSliderMinMax(player.getMaxTimeShift().toString(), '0');
                }
            }
            else {
                // Update playback position only in paused state or in the initial startup state where player is neither
                // paused nor playing. Playback updates are handled in the Timeout below.
                var isInInitialStartupState = _this.config.smoothPlaybackPositionUpdateIntervalMs === SeekBar.SMOOTH_PLAYBACK_POSITION_UPDATE_DISABLED
                    || forceUpdate || player.isPaused();
                var isNeitherPausedNorPlaying = player.isPaused() === player.isPlaying();
                if ((isInInitialStartupState || isNeitherPausedNorPlaying) && !_this.isSeeking()) {
                    _this.setPlaybackPosition(playbackPositionPercentage);
                }
                _this.setAriaSliderMinMax('0', player.getDuration().toString());
            }
            if (_this.isUiShown) {
                _this.setAriaSliderValues();
            }
        };
        // Update seekbar upon these events
        // init playback position when the player is ready
        player.on(player.exports.PlayerEvent.Ready, playbackPositionHandler);
        // update playback position when it changes
        player.on(player.exports.PlayerEvent.TimeChanged, playbackPositionHandler);
        // update bufferlevel when buffering is complete
        player.on(player.exports.PlayerEvent.StallEnded, playbackPositionHandler);
        // update playback position when a timeshift has finished
        player.on(player.exports.PlayerEvent.TimeShifted, playbackPositionHandler);
        // update bufferlevel when a segment has been downloaded
        player.on(player.exports.PlayerEvent.SegmentRequestFinished, playbackPositionHandler);
        this.configureLivePausedTimeshiftUpdater(player, uimanager, playbackPositionHandler);
        // Seek handling
        var onPlayerSeek = function () {
            isPlayerSeeking = true;
            _this.setSeeking(true);
            scrubbing = false;
        };
        var onPlayerSeeked = function (event) {
            if (event === void 0) { event = null; }
            isPlayerSeeking = false;
            _this.setSeeking(false);
            // update playback position when a seek has finished
            playbackPositionHandler(event, true);
        };
        var restorePlayingState = function () {
            // Continue playback after seek if player was playing when seek started
            if (isPlaying) {
                // use the same issuer here as in the pause on seek
                player.play('ui-seek');
            }
        };
        player.on(player.exports.PlayerEvent.Seek, onPlayerSeek);
        player.on(player.exports.PlayerEvent.Seeked, onPlayerSeeked);
        player.on(player.exports.PlayerEvent.TimeShift, onPlayerSeek);
        player.on(player.exports.PlayerEvent.TimeShifted, onPlayerSeeked);
        var isGroupPlaybackAPIAvailable = function (player) {
            return !!player.groupPlayback;
        };
        this.onSeek.subscribe(function (sender) {
            // track seeking status so we can catch events from seek preview seeks
            _this.isUserSeeking = true;
            // Notify UI manager of started seek
            uimanager.onSeek.dispatch(sender);
            if (isGroupPlaybackAPIAvailable(player) && player.groupPlayback.hasJoined() && !suspension) {
                suspension = player.groupPlayback.beginSuspension(groupplaybackapi_1.GroupPlaybackSuspensionReason.UserIsScrubbing);
            }
            // Save current playback state before performing the seek
            if (!isPlayerSeeking) {
                isPlaying = player.isPlaying();
                // Pause playback while seeking
                if (isPlaying) {
                    // use a different issuer here, as play/pause on seek is not "really" triggerd by the user
                    player.pause('ui-seek');
                }
            }
        });
        this.onSeekPreview.subscribe(function (sender, args) {
            // Notify UI manager of seek preview
            uimanager.onSeekPreview.dispatch(sender, args);
            scrubbing = args.scrubbing;
        });
        // Set enableSeekPreview if set in the uimanager config
        if (typeof uimanager.getConfig().enableSeekPreview === 'boolean') {
            this.config.enableSeekPreview = uimanager.getConfig().enableSeekPreview;
        }
        // Rate-limited scrubbing seek
        if (this.config.enableSeekPreview) {
            this.onSeekPreview.subscribeRateLimited(this.seekWhileScrubbing, 200);
        }
        this.onSeeked.subscribe(function (sender, percentage) {
            _this.isUserSeeking = false;
            // Do the seek
            _this.seek(percentage);
            // Notify UI manager of finished seek
            uimanager.onSeeked.dispatch(sender);
            // Continue playback after seek if player was playing when seek started
            restorePlayingState();
            if (isGroupPlaybackAPIAvailable(player) && player.groupPlayback.hasJoined() && suspension) {
                var proposedPlaybackTime = _this.getTargetSeekPosition(percentage);
                player.groupPlayback.endSuspension(suspension, { proposedPlaybackTime: proposedPlaybackTime });
                suspension = undefined;
            }
        });
        if (this.hasLabel()) {
            // Configure a seekbar label that is internal to the seekbar)
            this.getLabel().configure(player, uimanager);
        }
        // Hide seekbar for live sources without timeshift
        var isLive = false;
        var hasTimeShift = false;
        var switchVisibility = function (isLive, hasTimeShift) {
            if (isLive && !hasTimeShift) {
                _this.hide();
            }
            else {
                _this.show();
            }
            playbackPositionHandler(null, true);
            _this.refreshPlaybackPosition();
        };
        var liveStreamDetector = new playerutils_1.PlayerUtils.LiveStreamDetector(player, uimanager);
        liveStreamDetector.onLiveChanged.subscribe(function (sender, args) {
            isLive = args.live;
            if (isLive && _this.smoothPlaybackPositionUpdater != null) {
                _this.smoothPlaybackPositionUpdater.clear();
                _this.seekBarType = seekbarcontroller_1.SeekBarType.Live;
            }
            else {
                _this.seekBarType = seekbarcontroller_1.SeekBarType.Vod;
            }
            switchVisibility(isLive, hasTimeShift);
        });
        var timeShiftDetector = new playerutils_1.PlayerUtils.TimeShiftAvailabilityDetector(player);
        timeShiftDetector.onTimeShiftAvailabilityChanged.subscribe(function (sender, args) {
            hasTimeShift = args.timeShiftAvailable;
            switchVisibility(isLive, hasTimeShift);
        });
        // Initial detection
        liveStreamDetector.detect();
        timeShiftDetector.detect();
        // Refresh the playback position when the player resized or the UI is configured. The playback position marker
        // is positioned absolutely and must therefore be updated when the size of the seekbar changes.
        player.on(player.exports.PlayerEvent.PlayerResized, function () {
            _this.refreshPlaybackPosition();
            _this.uiBoundingRect = _this.uiManager.getUI().getDomElement().get(0).getBoundingClientRect();
        });
        // Additionally, when this code is called, the seekbar is not part of the UI yet and therefore does not have a size,
        // resulting in a wrong initial position of the marker. Refreshing it once the UI is configured solved this issue.
        uimanager.onConfigured.subscribe(function () {
            _this.refreshPlaybackPosition();
        });
        // It can also happen when a new source is loaded
        player.on(player.exports.PlayerEvent.SourceLoaded, function () {
            _this.refreshPlaybackPosition();
        });
        // Add markers when a source is loaded or update when a marker is added or removed
        uimanager.getConfig().events.onUpdated.subscribe(function () {
            playbackPositionHandler();
        });
        // Set the snappingRange if set in the uimanager config
        if (typeof uimanager.getConfig().seekbarSnappingRange === 'number') {
            this.config.snappingRange = uimanager.getConfig().seekbarSnappingRange;
        }
        if (typeof uimanager.getConfig().seekbarSnappingEnabled === 'boolean') {
            this.config.snappingEnabled = uimanager.getConfig().seekbarSnappingEnabled;
        }
        // Initialize seekbar
        playbackPositionHandler(); // Set the playback position
        this.setBufferPosition(0);
        this.setSeekPosition(0);
        if (this.config.smoothPlaybackPositionUpdateIntervalMs !== SeekBar.SMOOTH_PLAYBACK_POSITION_UPDATE_DISABLED) {
            this.configureSmoothPlaybackPositionUpdater(player, uimanager);
        }
        // Initialize markers
        this.initializeTimelineMarkers(player, uimanager);
    };
    SeekBar.prototype.initializeTimelineMarkers = function (player, uimanager) {
        var _this = this;
        var timelineMarkerConfig = {
            cssPrefix: this.config.cssPrefix,
            snappingRange: this.config.snappingRange,
        };
        this.timelineMarkersHandler = new timelinemarkershandler_1.TimelineMarkersHandler(timelineMarkerConfig, function () { return _this.seekBar.width(); }, this.seekBarMarkersContainer);
        this.timelineMarkersHandler.initialize(player, uimanager);
    };
    /**
     * Update seekbar while a live stream with DVR window is paused.
     * The playback position stays still and the position indicator visually moves towards the back.
     */
    SeekBar.prototype.configureLivePausedTimeshiftUpdater = function (player, uimanager, playbackPositionHandler) {
        var _this = this;
        // Regularly update the playback position while the timeout is active
        this.pausedTimeshiftUpdater = new timeout_1.Timeout(1000, playbackPositionHandler, true);
        // Start updater when a live stream with timeshift window is paused
        player.on(player.exports.PlayerEvent.Paused, function () {
            if (player.isLive() && player.getMaxTimeShift() < 0) {
                _this.pausedTimeshiftUpdater.start();
            }
        });
        // Stop updater when playback continues (no matter if the updater was started before)
        player.on(player.exports.PlayerEvent.Play, function () { return _this.pausedTimeshiftUpdater.clear(); });
    };
    SeekBar.prototype.configureSmoothPlaybackPositionUpdater = function (player, uimanager) {
        var _this = this;
        /*
         * Playback position update
         *
         * We do not update the position directly from the TimeChanged event, because it arrives very jittery and
         * results in a jittery position indicator since the CSS transition time is statically set.
         * To work around this issue, we maintain a local playback position that is updated in a stable regular interval
         * and kept in sync with the player.
         */
        var currentTimeSeekBar = 0;
        var currentTimePlayer = 0;
        var updateIntervalMs = 50;
        var currentTimeUpdateDeltaSecs = updateIntervalMs / 1000;
        this.smoothPlaybackPositionUpdater = new timeout_1.Timeout(updateIntervalMs, function () {
            if (_this.isSeeking()) {
                return;
            }
            currentTimeSeekBar += currentTimeUpdateDeltaSecs;
            try {
                currentTimePlayer = _this.getRelativeCurrentTime();
            }
            catch (error) {
                // Detect if the player has been destroyed and stop updating if so
                if (error instanceof player.exports.PlayerAPINotAvailableError) {
                    _this.smoothPlaybackPositionUpdater.clear();
                }
                // If the current time cannot be read it makes no sense to continue
                return;
            }
            // Sync currentTime of seekbar to player
            var currentTimeDelta = currentTimeSeekBar - currentTimePlayer;
            // If the delta is larger that 2 secs, directly jump the seekbar to the
            // player time instead of smoothly fast forwarding/rewinding.
            if (Math.abs(currentTimeDelta) > 2) {
                currentTimeSeekBar = currentTimePlayer;
            }
            // If currentTimeDelta is negative and below the adjustment threshold,
            // the player is ahead of the seekbar and we 'fast forward' the seekbar
            else if (currentTimeDelta <= -currentTimeUpdateDeltaSecs) {
                currentTimeSeekBar += currentTimeUpdateDeltaSecs;
            }
            // If currentTimeDelta is positive and above the adjustment threshold,
            // the player is behind the seekbar and we 'rewind' the seekbar
            else if (currentTimeDelta >= currentTimeUpdateDeltaSecs) {
                currentTimeSeekBar -= currentTimeUpdateDeltaSecs;
            }
            var playbackPositionPercentage = 100 / player.getDuration() * currentTimeSeekBar;
            _this.setPlaybackPosition(playbackPositionPercentage);
        }, true);
        var startSmoothPlaybackPositionUpdater = function () {
            if (!player.isLive()) {
                currentTimeSeekBar = _this.getRelativeCurrentTime();
                _this.smoothPlaybackPositionUpdater.start();
            }
        };
        var stopSmoothPlaybackPositionUpdater = function () {
            _this.smoothPlaybackPositionUpdater.clear();
        };
        player.on(player.exports.PlayerEvent.Play, startSmoothPlaybackPositionUpdater);
        player.on(player.exports.PlayerEvent.Playing, startSmoothPlaybackPositionUpdater);
        player.on(player.exports.PlayerEvent.Paused, stopSmoothPlaybackPositionUpdater);
        player.on(player.exports.PlayerEvent.PlaybackFinished, stopSmoothPlaybackPositionUpdater);
        player.on(player.exports.PlayerEvent.Seeked, function () {
            currentTimeSeekBar = _this.getRelativeCurrentTime();
        });
        player.on(player.exports.PlayerEvent.SourceUnloaded, stopSmoothPlaybackPositionUpdater);
        if (player.isPlaying()) {
            startSmoothPlaybackPositionUpdater();
        }
    };
    SeekBar.prototype.getRelativeCurrentTime = function () {
        return playerutils_1.PlayerUtils.getCurrentTimeRelativeToSeekableRange(this.player);
    };
    SeekBar.prototype.release = function () {
        _super.prototype.release.call(this);
        if (this.smoothPlaybackPositionUpdater) { // object must not necessarily exist, e.g. in volume slider subclass
            this.smoothPlaybackPositionUpdater.clear();
        }
        if (this.pausedTimeshiftUpdater) {
            this.pausedTimeshiftUpdater.clear();
        }
        if (this.config.enableSeekPreview) {
            this.onSeekPreview.unsubscribe(this.seekWhileScrubbing);
        }
    };
    SeekBar.prototype.toDomElement = function () {
        var _this = this;
        if (this.config.vertical) {
            this.config.cssClasses.push('vertical');
        }
        var seekBarContainer = new dom_1.DOM('div', {
            'id': this.config.id,
            'class': this.getCssClasses(),
            'role': 'slider',
            'aria-label': i18n_1.i18n.performLocalization(this.config.ariaLabel),
            'tabindex': this.config.tabIndex.toString(),
        }, this);
        var seekBar = new dom_1.DOM('div', {
            'class': this.prefixCss('seekbar'),
        });
        this.seekBar = seekBar;
        // Indicator that shows the buffer fill level
        var seekBarBufferLevel = new dom_1.DOM('div', {
            'class': this.prefixCss('seekbar-bufferlevel'),
        });
        this.seekBarBufferPosition = seekBarBufferLevel;
        // Indicator that shows the current playback position
        var seekBarPlaybackPosition = new dom_1.DOM('div', {
            'class': this.prefixCss('seekbar-playbackposition'),
        });
        this.seekBarPlaybackPosition = seekBarPlaybackPosition;
        // A marker of the current playback position, e.g. a dot or line
        var seekBarPlaybackPositionMarker = new dom_1.DOM('div', {
            'class': this.prefixCss('seekbar-playbackposition-marker'),
        });
        this.seekBarPlaybackPositionMarker = seekBarPlaybackPositionMarker;
        // Indicator that show where a seek will go to
        var seekBarSeekPosition = new dom_1.DOM('div', {
            'class': this.prefixCss('seekbar-seekposition'),
        });
        this.seekBarSeekPosition = seekBarSeekPosition;
        // Indicator that shows the full seekbar
        var seekBarBackdrop = new dom_1.DOM('div', {
            'class': this.prefixCss('seekbar-backdrop'),
        });
        this.seekBarBackdrop = seekBarBackdrop;
        var seekBarChapterMarkersContainer = new dom_1.DOM('div', {
            'class': this.prefixCss('seekbar-markers'),
        });
        this.seekBarMarkersContainer = seekBarChapterMarkersContainer;
        seekBar.append(this.seekBarBackdrop, this.seekBarBufferPosition, this.seekBarSeekPosition, this.seekBarPlaybackPosition, this.seekBarMarkersContainer, this.seekBarPlaybackPositionMarker);
        var seeking = false;
        // Define handler functions so we can attach/remove them later
        var mouseTouchMoveHandler = function (e) {
            e.preventDefault();
            // Avoid propagation to VR handler
            if (_this.player.vr != null) {
                e.stopPropagation();
            }
            var offset = _this.getOffset(e);
            var targetPercentage = 100 * offset;
            var seekPositionPx = offset * _this.seekBar.width();
            _this.setSeekPosition(targetPercentage);
            _this.setPlaybackPosition(targetPercentage);
            _this.onSeekPreviewEvent(targetPercentage, seekPositionPx, true);
        };
        var mouseTouchUpHandler = function (e) {
            var _a;
            e.preventDefault();
            // Remove handlers, seek operation is finished
            new dom_1.DOM(document).off('touchmove mousemove', mouseTouchMoveHandler);
            new dom_1.DOM(document).off('touchend mouseup', mouseTouchUpHandler);
            var targetPercentage = 100 * _this.getOffset(e);
            if (_this.config.snappingEnabled) {
                var matchingMarker = (_a = _this.timelineMarkersHandler) === null || _a === void 0 ? void 0 : _a.getMarkerAtPosition(targetPercentage);
                targetPercentage = matchingMarker ? matchingMarker.position : targetPercentage;
            }
            _this.setSeeking(false);
            seeking = false;
            // Fire seeked event
            _this.onSeekedEvent(targetPercentage);
        };
        // A seek always start with a touchstart or mousedown directly on the seekbar.
        // To track a mouse seek also outside the seekbar (for touch events this works automatically),
        // so the user does not need to take care that the mouse always stays on the seekbar, we attach the mousemove
        // and mouseup handlers to the whole document. A seek is triggered when the user lifts the mouse key.
        // A seek mouse gesture is thus basically a click with a long time frame between down and up events.
        seekBar.on('touchstart mousedown', function (e) {
            var isTouchEvent = browserutils_1.BrowserUtils.isTouchSupported && _this.isTouchEvent(e);
            // Prevent selection of DOM elements (also prevents mousedown if current event is touchstart)
            e.preventDefault();
            // Avoid propagation to VR handler
            if (_this.player.vr != null) {
                e.stopPropagation();
            }
            _this.setSeeking(true); // Set seeking class on DOM element
            seeking = true; // Set seek tracking flag
            // Fire seeked event
            _this.onSeekEvent();
            // Add handler to track the seek operation over the whole document
            new dom_1.DOM(document).on(isTouchEvent ? 'touchmove' : 'mousemove', mouseTouchMoveHandler);
            new dom_1.DOM(document).on(isTouchEvent ? 'touchend' : 'mouseup', mouseTouchUpHandler);
        });
        // Display seek target indicator when mouse hovers or finger slides over seekbar
        seekBar.on('touchmove mousemove', function (e) {
            e.preventDefault();
            if (seeking) {
                mouseTouchMoveHandler(e);
            }
            var offset = _this.getOffset(e);
            var seekPositionPercentage = 100 * offset;
            var seekPositionPx = offset * _this.seekBar.width();
            _this.setSeekPosition(seekPositionPercentage);
            _this.onSeekPreviewEvent(seekPositionPercentage, seekPositionPx, false);
            if (_this.hasLabel() && _this.getLabel().isHidden()) {
                _this.getLabel().show();
            }
        });
        // Hide seek target indicator when mouse or finger leaves seekbar
        seekBar.on('touchend mouseleave', function (e) {
            e.preventDefault();
            _this.setSeekPosition(0);
            if (_this.hasLabel()) {
                _this.getLabel().hide();
            }
        });
        seekBarContainer.append(seekBar);
        if (this.label) {
            seekBarContainer.append(this.label.getDomElement());
        }
        return seekBarContainer;
    };
    /**
     * Gets the horizontal offset of a mouse/touch event point from the left edge of the seek bar.
     * @param eventPageX the pageX coordinate of an event to calculate the offset from
     * @returns {number} a number in the range of [0, 1], where 0 is the left edge and 1 is the right edge
     */
    SeekBar.prototype.getHorizontalOffset = function (eventPageX) {
        var elementOffsetPx = this.seekBar.offset().left;
        var widthPx = this.seekBar.width();
        var offsetPx = eventPageX - elementOffsetPx;
        var offset = 1 / widthPx * offsetPx;
        return this.sanitizeOffset(offset);
    };
    /**
     * Gets the vertical offset of a mouse/touch event point from the bottom edge of the seek bar.
     * @param eventPageY the pageX coordinate of an event to calculate the offset from
     * @returns {number} a number in the range of [0, 1], where 0 is the bottom edge and 1 is the top edge
     */
    SeekBar.prototype.getVerticalOffset = function (eventPageY) {
        var elementOffsetPx = this.seekBar.offset().top;
        var widthPx = this.seekBar.height();
        var offsetPx = eventPageY - elementOffsetPx;
        var offset = 1 / widthPx * offsetPx;
        return 1 - this.sanitizeOffset(offset);
    };
    /**
     * Gets the mouse or touch event offset for the current configuration (horizontal or vertical).
     * @param e the event to calculate the offset from
     * @returns {number} a number in the range of [0, 1]
     * @see #getHorizontalOffset
     * @see #getVerticalOffset
     */
    SeekBar.prototype.getOffset = function (e) {
        if (browserutils_1.BrowserUtils.isTouchSupported && this.isTouchEvent(e)) {
            if (this.config.vertical) {
                return this.getVerticalOffset(e.type === 'touchend' ? e.changedTouches[0].pageY : e.touches[0].pageY);
            }
            else {
                return this.getHorizontalOffset(e.type === 'touchend' ? e.changedTouches[0].pageX : e.touches[0].pageX);
            }
        }
        else if (e instanceof MouseEvent) {
            if (this.config.vertical) {
                return this.getVerticalOffset(e.pageY);
            }
            else {
                return this.getHorizontalOffset(e.pageX);
            }
        }
        else {
            if (console) {
                console.warn('invalid event');
            }
            return 0;
        }
    };
    /**
     * Sanitizes the mouse offset to the range of [0, 1].
     *
     * When tracking the mouse outside the seek bar, the offset can be outside the desired range and this method
     * limits it to the desired range. E.g. a mouse event left of the left edge of a seek bar yields an offset below
     * zero, but to display the seek target on the seek bar, we need to limit it to zero.
     *
     * @param offset the offset to sanitize
     * @returns {number} the sanitized offset.
     */
    SeekBar.prototype.sanitizeOffset = function (offset) {
        // Since we track mouse moves over the whole document, the target can be outside the seek range,
        // and we need to limit it to the [0, 1] range.
        if (offset < 0) {
            offset = 0;
        }
        else if (offset > 1) {
            offset = 1;
        }
        return offset;
    };
    /**
     * Sets the position of the playback position indicator.
     * @param percent a number between 0 and 100 as returned by the player
     */
    SeekBar.prototype.setPlaybackPosition = function (percent) {
        this.playbackPositionPercentage = percent;
        // Set position of the bar
        this.setPosition(this.seekBarPlaybackPosition, percent);
        // Set position of the marker
        var totalSize = (this.config.vertical ? (this.seekBar.height() - this.seekBarPlaybackPositionMarker.height()) : this.seekBar.width());
        var px = (totalSize) / 100 * percent;
        if (this.config.vertical) {
            px = this.seekBar.height() - px - this.seekBarPlaybackPositionMarker.height();
        }
        var style = this.config.vertical ?
            // -ms-transform required for IE9
            // -webkit-transform required for Android 4.4 WebView
            {
                'transform': 'translateY(' + px + 'px)',
                '-ms-transform': 'translateY(' + px + 'px)',
                '-webkit-transform': 'translateY(' + px + 'px)',
            } :
            {
                'transform': 'translateX(' + px + 'px)',
                '-ms-transform': 'translateX(' + px + 'px)',
                '-webkit-transform': 'translateX(' + px + 'px)',
            };
        this.seekBarPlaybackPositionMarker.css(style);
    };
    /**
     * Refreshes the playback position. Can be used by subclasses to refresh the position when
     * the size of the component changes.
     */
    SeekBar.prototype.refreshPlaybackPosition = function () {
        this.setPlaybackPosition(this.playbackPositionPercentage);
    };
    /**
     * Sets the position until which media is buffered.
     * @param percent a number between 0 and 100
     */
    SeekBar.prototype.setBufferPosition = function (percent) {
        this.setPosition(this.seekBarBufferPosition, percent);
    };
    /**
     * Sets the position where a seek, if executed, would jump to.
     * @param percent a number between 0 and 100
     */
    SeekBar.prototype.setSeekPosition = function (percent) {
        this.setPosition(this.seekBarSeekPosition, percent);
    };
    /**
     * Set the actual position (width or height) of a DOM element that represent a bar in the seek bar.
     * @param element the element to set the position for
     * @param percent a number between 0 and 100
     */
    SeekBar.prototype.setPosition = function (element, percent) {
        var scale = percent / 100;
        // When the scale is exactly 1 or very near 1 (and the browser internally rounds it to 1), browsers seem to render
        // the elements differently and the height gets slightly off, leading to mismatching heights when e.g. the buffer
        // level bar has a width of 1 and the playback position bar has a width < 1. A jittering buffer level around 1
        // leads to an even worse flickering effect.
        // Various changes in CSS styling and DOM hierarchy did not solve the issue so the workaround is to avoid a scale
        // of exactly 1.
        if (scale >= 0.99999 && scale <= 1.00001) {
            scale = 0.99999;
        }
        var style = this.config.vertical ?
            // -ms-transform required for IE9
            // -webkit-transform required for Android 4.4 WebView
            {
                'transform': 'scaleY(' + scale + ')',
                '-ms-transform': 'scaleY(' + scale + ')',
                '-webkit-transform': 'scaleY(' + scale + ')',
            } :
            {
                'transform': 'scaleX(' + scale + ')',
                '-ms-transform': 'scaleX(' + scale + ')',
                '-webkit-transform': 'scaleX(' + scale + ')',
            };
        element.css(style);
    };
    /**
     * Puts the seek bar into or out of seeking state by adding/removing a class to the DOM element. This can be used
     * to adjust the styling while seeking.
     *
     * @param seeking should be true when entering seek state, false when exiting the seek state
     */
    SeekBar.prototype.setSeeking = function (seeking) {
        if (seeking) {
            this.getDomElement().addClass(this.prefixCss(SeekBar.CLASS_SEEKING));
        }
        else {
            this.getDomElement().removeClass(this.prefixCss(SeekBar.CLASS_SEEKING));
        }
    };
    /**
     * Checks if the seek bar is currently in the seek state.
     * @returns {boolean} true if in seek state, else false
     */
    SeekBar.prototype.isSeeking = function () {
        return this.getDomElement().hasClass(this.prefixCss(SeekBar.CLASS_SEEKING));
    };
    /**
     * Checks if the seek bar has a {@link SeekBarLabel}.
     * @returns {boolean} true if the seek bar has a label, else false
     */
    SeekBar.prototype.hasLabel = function () {
        return this.label != null;
    };
    /**
     * Gets the label of this seek bar.
     * @returns {SeekBarLabel} the label if this seek bar has a label, else null
     */
    SeekBar.prototype.getLabel = function () {
        return this.label;
    };
    SeekBar.prototype.onSeekEvent = function () {
        this.seekBarEvents.onSeek.dispatch(this);
    };
    SeekBar.prototype.onSeekPreviewEvent = function (percentage, targetOffsetPx, scrubbing) {
        var snappedMarker = this.timelineMarkersHandler && this.timelineMarkersHandler.getMarkerAtPosition(percentage);
        var seekPositionPercentage = percentage;
        if (snappedMarker) {
            if (snappedMarker.duration > 0) {
                if (percentage < snappedMarker.position) {
                    // Snap the position to the start of the interval if the seek is within the left snap margin
                    // We know that we are within a snap margin when we are outside the marker interval but still
                    // have a snappedMarker
                    seekPositionPercentage = snappedMarker.position;
                }
                else if (percentage > snappedMarker.position + snappedMarker.duration) {
                    // Snap the position to the end of the interval if the seek is within the right snap margin
                    seekPositionPercentage = snappedMarker.position + snappedMarker.duration;
                }
            }
            else {
                // Position markers always snap to their marker position
                seekPositionPercentage = snappedMarker.position;
            }
        }
        if (this.label) {
            this.updateLabelPosition(targetOffsetPx);
        }
        this.seekBarEvents.onSeekPreview.dispatch(this, {
            scrubbing: scrubbing,
            position: seekPositionPercentage,
            marker: snappedMarker,
        });
    };
    SeekBar.prototype.onSeekedEvent = function (percentage) {
        this.seekBarEvents.onSeeked.dispatch(this, percentage);
    };
    Object.defineProperty(SeekBar.prototype, "onSeek", {
        /**
         * Gets the event that is fired when a scrubbing seek operation is started.
         * @returns {Event<SeekBar, NoArgs>}
         */
        get: function () {
            return this.seekBarEvents.onSeek.getEvent();
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(SeekBar.prototype, "onSeekPreview", {
        /**
         * Gets the event that is fired during a scrubbing seek (to indicate that the seek preview, i.e. the video frame,
         * should be updated), or during a normal seek preview when the seek bar is hovered (and the seek target,
         * i.e. the seek bar label, should be updated).
         * @returns {Event<SeekBar, SeekPreviewEventArgs>}
         */
        get: function () {
            return this.seekBarEvents.onSeekPreview.getEvent();
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(SeekBar.prototype, "onSeeked", {
        /**
         * Gets the event that is fired when a scrubbing seek has finished or when a direct seek is issued.
         * @returns {Event<SeekBar, number>}
         */
        get: function () {
            return this.seekBarEvents.onSeeked.getEvent();
        },
        enumerable: false,
        configurable: true
    });
    SeekBar.prototype.onShowEvent = function () {
        _super.prototype.onShowEvent.call(this);
        // Refresh the position of the playback position when the seek bar becomes visible. To correctly set the position,
        // the DOM element must be fully initialized an have its size calculated, because the position is set as an absolute
        // value calculated from the size. This required size is not known when it is hidden.
        // For such cases, we refresh the position here in onShow because here it is guaranteed that the component knows
        // its size and can set the position correctly.
        this.refreshPlaybackPosition();
    };
    /**
      * Checks if TouchEvent is supported.
      * @returns {boolean} true if TouchEvent not undefined, else false
      */
    SeekBar.prototype.isTouchEvent = function (e) {
        return window.TouchEvent && e instanceof TouchEvent;
    };
    SeekBar.SMOOTH_PLAYBACK_POSITION_UPDATE_DISABLED = -1;
    /**
     * The CSS class that is added to the DOM element while the seek bar is in 'seeking' state.
     */
    SeekBar.CLASS_SEEKING = 'seeking';
    return SeekBar;
}(component_1.Component));

},{"../browserutils":3,"../dom":82,"../eventdispatcher":84,"../localization/i18n":89,"../playerutils":96,"../stringutils":109,"../timeout":111,"./../groupplaybackapi":86,"./component":18,"./seekbarbufferlevel":41,"./seekbarcontroller":42,"./timelinemarkershandler":70}],41:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.getMinBufferLevel = void 0;
function getMinBufferLevel(player) {
    var playerDuration = player.getDuration();
    var videoBufferLength = player.getVideoBufferLength();
    var audioBufferLength = player.getAudioBufferLength();
    // Calculate the buffer length which is the smaller length of the audio and video buffers. If one of these
    // buffers is not available, we set it's value to MAX_VALUE to make sure that the other real value is taken
    // as the buffer length.
    var bufferLength = Math.min(videoBufferLength != null ? videoBufferLength : Number.MAX_VALUE, audioBufferLength != null ? audioBufferLength : Number.MAX_VALUE);
    // If both buffer lengths are missing, we set the buffer length to zero
    if (bufferLength === Number.MAX_VALUE) {
        bufferLength = 0;
    }
    return 100 / playerDuration * bufferLength;
}
exports.getMinBufferLevel = getMinBufferLevel;

},{}],42:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.SeekBarController = exports.SeekBarType = void 0;
var uiutils_1 = require("../uiutils");
var SeekBarType;
(function (SeekBarType) {
    SeekBarType[SeekBarType["Vod"] = 0] = "Vod";
    SeekBarType[SeekBarType["Live"] = 1] = "Live";
    SeekBarType[SeekBarType["Volume"] = 2] = "Volume";
})(SeekBarType = exports.SeekBarType || (exports.SeekBarType = {}));
var coerceValueIntoRange = function (value, range, cb) {
    if (value < range.min) {
        cb(range.min);
    }
    else if (value > range.max) {
        cb(range.max);
    }
    else {
        cb(value);
    }
};
/**
 * @category Utils
 */
var SeekBarController = /** @class */ (function () {
    function SeekBarController(keyStepIncrements, player, volumeController) {
        this.keyStepIncrements = keyStepIncrements;
        this.player = player;
        this.volumeController = volumeController;
    }
    SeekBarController.prototype.arrowKeyControls = function (currentValue, range, valueUpdate) {
        var _this = this;
        var controlValue = Math.floor(currentValue);
        return {
            left: function () { return coerceValueIntoRange(controlValue - _this.keyStepIncrements.leftRight, range, valueUpdate); },
            right: function () { return coerceValueIntoRange(controlValue + _this.keyStepIncrements.leftRight, range, valueUpdate); },
            up: function () { return coerceValueIntoRange(controlValue + _this.keyStepIncrements.upDown, range, valueUpdate); },
            down: function () { return coerceValueIntoRange(controlValue - _this.keyStepIncrements.upDown, range, valueUpdate); },
            home: function () { return coerceValueIntoRange(range.min, range, valueUpdate); },
            end: function () { return coerceValueIntoRange(range.max, range, valueUpdate); },
        };
    };
    SeekBarController.prototype.seekBarControls = function (type) {
        if (type === SeekBarType.Live) {
            return this.arrowKeyControls(this.player.getTimeShift(), { min: this.player.getMaxTimeShift(), max: 0 }, this.player.timeShift);
        }
        else if (type === SeekBarType.Vod) {
            return this.arrowKeyControls(this.player.getCurrentTime(), { min: 0, max: this.player.getDuration() }, this.player.seek);
        }
        else if (type === SeekBarType.Volume && this.volumeController != null) {
            var volumeTransition = this.volumeController.startTransition();
            return this.arrowKeyControls(this.player.getVolume(), { min: 0, max: 100 }, volumeTransition.finish.bind(volumeTransition));
        }
    };
    SeekBarController.prototype.setSeekBarControls = function (domElement, type) {
        var _this = this;
        domElement.on('keydown', function (e) {
            var controls = _this.seekBarControls(type());
            switch (e.keyCode) {
                case uiutils_1.UIUtils.KeyCode.LeftArrow: {
                    controls.left();
                    e.preventDefault();
                    break;
                }
                case uiutils_1.UIUtils.KeyCode.RightArrow: {
                    controls.right();
                    e.preventDefault();
                    break;
                }
                case uiutils_1.UIUtils.KeyCode.UpArrow: {
                    controls.up();
                    e.preventDefault();
                    break;
                }
                case uiutils_1.UIUtils.KeyCode.DownArrow: {
                    controls.down();
                    e.preventDefault();
                    break;
                }
                case uiutils_1.UIUtils.KeyCode.Home: {
                    controls.home();
                    e.preventDefault();
                    break;
                }
                case uiutils_1.UIUtils.KeyCode.End: {
                    controls.end();
                    e.preventDefault();
                    break;
                }
                case uiutils_1.UIUtils.KeyCode.Space: {
                    _this.player.isPlaying() ? _this.player.pause() : _this.player.play();
                    e.preventDefault();
                    break;
                }
            }
        });
    };
    return SeekBarController;
}());
exports.SeekBarController = SeekBarController;

},{"../uiutils":115}],43:[function(require,module,exports){
"use strict";
var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        if (typeof b !== "function" && b !== null)
            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
exports.SeekBarLabel = void 0;
var container_1 = require("./container");
var label_1 = require("./label");
var component_1 = require("./component");
var stringutils_1 = require("../stringutils");
var imageloader_1 = require("../imageloader");
var playerutils_1 = require("../playerutils");
/**
 * A label for a {@link SeekBar} that can display the seek target time, a thumbnail, and title (e.g. chapter title).
 *
 * @category Components
 */
var SeekBarLabel = /** @class */ (function (_super) {
    __extends(SeekBarLabel, _super);
    function SeekBarLabel(config) {
        if (config === void 0) { config = {}; }
        var _this = _super.call(this, config) || this;
        _this.appliedMarkerCssClasses = [];
        _this.handleSeekPreview = function (sender, args) {
            if (_this.player.isLive()) {
                var maxTimeShift = _this.player.getMaxTimeShift();
                var timeShiftPreview = maxTimeShift - maxTimeShift * (args.position / 100);
                _this.setTime(timeShiftPreview);
                // In case of a live stream the player expects the time passed into the getThumbnail as a wallClockTime and not
                // as a relative timeShift value.
                var convertTimeShiftPreviewToWallClockTime = function (targetTimeShift) {
                    var currentTimeShift = _this.player.getTimeShift();
                    var currentTime = _this.player.getCurrentTime();
                    var wallClockTimeOfLiveEdge = currentTime - currentTimeShift;
                    return wallClockTimeOfLiveEdge + targetTimeShift;
                };
                var wallClockTime = convertTimeShiftPreviewToWallClockTime(timeShiftPreview);
                _this.setThumbnail(_this.player.getThumbnail(wallClockTime));
            }
            else {
                var time = _this.player.getDuration() * (args.position / 100);
                _this.setTime(time);
                var seekableRangeStart = playerutils_1.PlayerUtils.getSeekableRangeStart(_this.player, 0);
                var absoluteSeekTarget = time + seekableRangeStart;
                _this.setThumbnail(_this.player.getThumbnail(absoluteSeekTarget));
            }
            if (args.marker) {
                _this.setTitleText(args.marker.marker.title);
            }
            else {
                _this.setTitleText(null);
            }
            // Remove CSS classes from previous marker
            if (_this.appliedMarkerCssClasses.length > 0) {
                _this.getDomElement().removeClass(_this.appliedMarkerCssClasses.join(' '));
                _this.appliedMarkerCssClasses = [];
            }
            // Add CSS classes of current marker
            if (args.marker) {
                var cssClasses = (args.marker.marker.cssClasses || []).map(function (cssClass) { return _this.prefixCss(cssClass); });
                _this.getDomElement().addClass(cssClasses.join(' '));
                _this.appliedMarkerCssClasses = cssClasses;
            }
        };
        _this.timeLabel = new label_1.Label({ cssClasses: ['seekbar-label-time'] });
        _this.titleLabel = new label_1.Label({ cssClasses: ['seekbar-label-title'] });
        _this.thumbnail = new component_1.Component({ cssClasses: ['seekbar-thumbnail'], role: 'img' });
        _this.thumbnailImageLoader = new imageloader_1.ImageLoader();
        _this.container = new container_1.Container({
            components: [
                _this.thumbnail,
                new container_1.Container({
                    components: [_this.titleLabel, _this.timeLabel],
                    cssClass: 'seekbar-label-metadata',
                }),
            ],
            cssClass: 'seekbar-label-inner',
        });
        _this.caret = new label_1.Label({ cssClasses: ['seekbar-label-caret'] });
        _this.config = _this.mergeConfig(config, {
            cssClass: 'ui-seekbar-label',
            components: [_this.container, _this.caret],
            hidden: true,
        }, _this.config);
        return _this;
    }
    SeekBarLabel.prototype.configure = function (player, uimanager) {
        var _this = this;
        _super.prototype.configure.call(this, player, uimanager);
        this.player = player;
        this.uiManager = uimanager;
        uimanager.onSeekPreview.subscribeRateLimited(this.handleSeekPreview, 100);
        var init = function () {
            // Set time format depending on source duration
            _this.timeFormat = Math.abs(player.isLive() ? player.getMaxTimeShift() : player.getDuration()) >= 3600 ?
                stringutils_1.StringUtils.FORMAT_HHMMSS : stringutils_1.StringUtils.FORMAT_MMSS;
            // Set initial state of title and thumbnail to handle sourceLoaded when switching to a live-stream
            _this.setTitleText(null);
            _this.setThumbnail(null);
        };
        uimanager.getConfig().events.onUpdated.subscribe(init);
        init();
    };
    SeekBarLabel.prototype.setPositionInBounds = function (seekPositionPx, bounds) {
        this.getDomElement().css('left', seekPositionPx + 'px');
        // Check parent container as it has a padding that needs to be considered
        var labelBounding = this.container.getDomElement().get(0).parentElement.getBoundingClientRect();
        var preventOverflowOffset = 0;
        if (labelBounding.right > bounds.right) {
            preventOverflowOffset = labelBounding.right - bounds.right;
        }
        else if (labelBounding.left < bounds.left) {
            preventOverflowOffset = labelBounding.left - bounds.left;
        }
        if (preventOverflowOffset !== 0) {
            this.getDomElement().css('left', seekPositionPx - preventOverflowOffset + 'px');
            this.caret.getDomElement().css('transform', "translateX(".concat(preventOverflowOffset, "px)"));
        }
        else {
            this.caret.getDomElement().css('transform', null);
        }
    };
    /**
     * Sets arbitrary text on the label.
     * @param text the text to show on the label
     */
    SeekBarLabel.prototype.setText = function (text) {
        this.timeLabel.setText(text);
    };
    /**
     * Sets a time to be displayed on the label.
     * @param seconds the time in seconds to display on the label
     */
    SeekBarLabel.prototype.setTime = function (seconds) {
        this.setText(stringutils_1.StringUtils.secondsToTime(seconds, this.timeFormat));
    };
    /**
     * Sets the text on the title label.
     * @param text the text to show on the label
     */
    SeekBarLabel.prototype.setTitleText = function (text) {
        if (text === void 0) { text = ''; }
        this.titleLabel.setText(text);
    };
    /**
     * Sets or removes a thumbnail on the label.
     * @param thumbnail the thumbnail to display on the label or null to remove a displayed thumbnail
     */
    SeekBarLabel.prototype.setThumbnail = function (thumbnail) {
        var _this = this;
        if (thumbnail === void 0) { thumbnail = null; }
        var thumbnailElement = this.thumbnail.getDomElement();
        if (thumbnail == null) {
            thumbnailElement.css({
                'background-image': null,
                'display': null,
                'width': null,
                'height': null,
            });
        }
        else {
            // We use the thumbnail image loader to make sure the thumbnail is loaded and it's size is known before be can
            // calculate the CSS properties and set them on the element.
            this.thumbnailImageLoader.load(thumbnail.url, function (url, width, height) {
                // can be checked like that because x/y/w/h are either all present or none
                // https://www.w3.org/TR/media-frags/#naming-space
                if (thumbnail.x !== undefined) {
                    thumbnailElement.css(_this.thumbnailCssSprite(thumbnail, width, height));
                }
                else {
                    thumbnailElement.css(_this.thumbnailCssSingleImage(thumbnail, width, height));
                }
            });
        }
    };
    SeekBarLabel.prototype.thumbnailCssSprite = function (thumbnail, width, height) {
        var thumbnailCountX = width / thumbnail.width;
        var thumbnailCountY = height / thumbnail.height;
        var thumbnailIndexX = thumbnail.x / thumbnail.width;
        var thumbnailIndexY = thumbnail.y / thumbnail.height;
        var sizeX = 100 * thumbnailCountX;
        var sizeY = 100 * thumbnailCountY;
        var offsetX = 100 * thumbnailIndexX;
        var offsetY = 100 * thumbnailIndexY;
        var aspectRatio = 1 / thumbnail.width * thumbnail.height;
        // The thumbnail size is set by setting the CSS 'width' and 'padding-bottom' properties. 'padding-bottom' is
        // used because it is relative to the width and can be used to set the aspect ratio of the thumbnail.
        // A default value for width is set in the stylesheet and can be overwritten from there or anywhere else.
        return {
            'display': 'inherit',
            'background-image': "url(".concat(thumbnail.url, ")"),
            'padding-bottom': "".concat(100 * aspectRatio, "%"),
            'background-size': "".concat(sizeX, "% ").concat(sizeY, "%"),
            'background-position': "-".concat(offsetX, "% -").concat(offsetY, "%"),
        };
    };
    SeekBarLabel.prototype.thumbnailCssSingleImage = function (thumbnail, width, height) {
        var aspectRatio = 1 / width * height;
        return {
            'display': 'inherit',
            'background-image': "url(".concat(thumbnail.url, ")"),
            'padding-bottom': "".concat(100 * aspectRatio, "%"),
            'background-size': "100% 100%",
            'background-position': "0 0",
        };
    };
    SeekBarLabel.prototype.release = function () {
        _super.prototype.release.call(this);
        this.uiManager.onSeekPreview.unsubscribe(this.handleSeekPreview);
    };
    return SeekBarLabel;
}(container_1.Container));
exports.SeekBarLabel = SeekBarLabel;

},{"../imageloader":88,"../playerutils":96,"../stringutils":109,"./component":18,"./container":19,"./label":28}],44:[function(require,module,exports){
"use strict";
var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        if (typeof b !== "function" && b !== null)
            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
exports.SelectBox = void 0;
var listselector_1 = require("./listselector");
var dom_1 = require("../dom");
var i18n_1 = require("../localization/i18n");
var playerutils_1 = require("../playerutils");
var component_1 = require("./component");
var DocumentDropdownClosedEvents = [
    'mousemove',
    'mouseenter',
    'mouseleave',
    'touchstart',
    'touchmove',
    'touchend',
    'pointermove',
    'click',
    'keydown',
    'keypress',
    'keyup',
    'blur',
];
var SelectDropdownClosedEvents = [
    'change',
    'keyup',
    'mouseup',
];
var DropdownOpenedEvents = [
    ['click', function () { return true; }],
    ['keydown', function (event) { return [' ', 'ArrowUp', 'ArrowDown'].includes(event.key); }],
    ['mousedown', function () { return true; }],
];
var Timeout = 100;
/**
 * A simple select box providing the possibility to select a single item out of a list of available items.
 *
 * DOM example:
 * <code>
 *     <select class='ui-selectbox'>
 *         <option value='key'>label</option>
 *         ...
 *     </select>
 * </code>
 *
 * @category Components
 */
var SelectBox = /** @class */ (function (_super) {
    __extends(SelectBox, _super);
    function SelectBox(config) {
        if (config === void 0) { config = {}; }
        var _this = _super.call(this, config) || this;
        _this.dropdownCloseListenerTimeoutId = 0;
        _this.removeDropdownCloseListeners = function () { };
        _this.removeDropdownOpenedListeners = function () { };
        _this.onChange = function () {
            var value = _this.selectElement.val();
            _this.onItemSelectedEvent(value, false);
        };
        _this.closeDropdown = function () {
            var select = _this.getSelectElement();
            if (select === undefined) {
                return;
            }
            select.blur();
        };
        _this.onPlayerStateChange = function (_, state) {
            if ([playerutils_1.PlayerUtils.PlayerState.Idle, playerutils_1.PlayerUtils.PlayerState.Finished].includes(state)) {
                _this.closeDropdown();
            }
        };
        _this.onDropdownOpened = function () {
            clearTimeout(_this.dropdownCloseListenerTimeoutId);
            _this.dropdownCloseListenerTimeoutId = window.setTimeout(function () { return _this.addDropdownCloseListeners(); }, Timeout);
            _this.onViewModeChangedEvent(component_1.ViewMode.Persistent);
        };
        _this.onDropdownClosed = function () {
            clearTimeout(_this.dropdownCloseListenerTimeoutId);
            _this.removeDropdownCloseListeners();
            _this.onViewModeChangedEvent(component_1.ViewMode.Temporary);
        };
        _this.config = _this.mergeConfig(config, {
            cssClass: 'ui-selectbox',
        }, _this.config);
        return _this;
    }
    SelectBox.prototype.toDomElement = function () {
        this.selectElement = new dom_1.DOM('select', {
            'id': this.config.id,
            'class': this.getCssClasses(),
            'aria-label': i18n_1.i18n.performLocalization(this.config.ariaLabel),
        }, this);
        this.onDisabled.subscribe(this.closeDropdown);
        this.onHide.subscribe(this.closeDropdown);
        this.addDropdownOpenedListeners();
        this.updateDomItems();
        this.selectElement.on('change', this.onChange);
        return this.selectElement;
    };
    SelectBox.prototype.configure = function (player, uimanager) {
        var _a;
        _super.prototype.configure.call(this, player, uimanager);
        this.uiContainer = uimanager.getUI();
        (_a = this.uiContainer) === null || _a === void 0 ? void 0 : _a.onPlayerStateChange().subscribe(this.onPlayerStateChange);
    };
    SelectBox.prototype.getSelectElement = function () {
        var _a, _b;
        return (_b = (_a = this.selectElement) === null || _a === void 0 ? void 0 : _a.get()) === null || _b === void 0 ? void 0 : _b[0];
    };
    SelectBox.prototype.updateDomItems = function (selectedValue) {
        if (selectedValue === void 0) { selectedValue = null; }
        if (this.selectElement === undefined) {
            return;
        }
        // Delete all children
        this.selectElement.empty();
        // Add updated children
        for (var _i = 0, _a = this.items; _i < _a.length; _i++) {
            var item = _a[_i];
            var optionElement = new dom_1.DOM('option', {
                'value': String(item.key),
            }).html(i18n_1.i18n.performLocalization(item.label));
            if (item.key === String(selectedValue)) { // convert selectedValue to string to catch 'null'/null case
                optionElement.attr('selected', 'selected');
            }
            this.selectElement.append(optionElement);
        }
    };
    SelectBox.prototype.onItemAddedEvent = function (value) {
        _super.prototype.onItemAddedEvent.call(this, value);
        this.updateDomItems(this.selectedItem);
    };
    SelectBox.prototype.onItemRemovedEvent = function (value) {
        _super.prototype.onItemRemovedEvent.call(this, value);
        this.updateDomItems(this.selectedItem);
    };
    SelectBox.prototype.onItemSelectedEvent = function (value, updateDomItems) {
        if (updateDomItems === void 0) { updateDomItems = true; }
        _super.prototype.onItemSelectedEvent.call(this, value);
        if (updateDomItems) {
            this.updateDomItems(value);
        }
    };
    SelectBox.prototype.addDropdownCloseListeners = function () {
        var _this = this;
        this.removeDropdownCloseListeners();
        clearTimeout(this.dropdownCloseListenerTimeoutId);
        DocumentDropdownClosedEvents.forEach(function (event) { return document.addEventListener(event, _this.onDropdownClosed, true); });
        SelectDropdownClosedEvents.forEach(function (event) { return _this.selectElement.on(event, _this.onDropdownClosed, true); });
        this.removeDropdownCloseListeners = function () {
            DocumentDropdownClosedEvents.forEach(function (event) { return document.removeEventListener(event, _this.onDropdownClosed, true); });
            SelectDropdownClosedEvents.forEach(function (event) { return _this.selectElement.off(event, _this.onDropdownClosed, true); });
        };
    };
    SelectBox.prototype.addDropdownOpenedListeners = function () {
        var _this = this;
        var removeListenerFunctions = [];
        this.removeDropdownOpenedListeners();
        var _loop_1 = function (event_1, filter) {
            var listener = function (event) {
                if (filter(event)) {
                    _this.onDropdownOpened();
                }
            };
            removeListenerFunctions.push(function () { return _this.selectElement.off(event_1, listener, true); });
            this_1.selectElement.on(event_1, listener, true);
        };
        var this_1 = this;
        for (var _i = 0, DropdownOpenedEvents_1 = DropdownOpenedEvents; _i < DropdownOpenedEvents_1.length; _i++) {
            var _a = DropdownOpenedEvents_1[_i], event_1 = _a[0], filter = _a[1];
            _loop_1(event_1, filter);
        }
        this.removeDropdownOpenedListeners = function () {
            for (var _i = 0, removeListenerFunctions_1 = removeListenerFunctions; _i < removeListenerFunctions_1.length; _i++) {
                var remove = removeListenerFunctions_1[_i];
                remove();
            }
        };
    };
    SelectBox.prototype.release = function () {
        _super.prototype.release.call(this);
        this.removeDropdownCloseListeners();
        this.removeDropdownOpenedListeners();
        clearTimeout(this.dropdownCloseListenerTimeoutId);
    };
    return SelectBox;
}(listselector_1.ListSelector));
exports.SelectBox = SelectBox;

},{"../dom":82,"../localization/i18n":89,"../playerutils":96,"./component":18,"./listselector":30}],45:[function(require,module,exports){
"use strict";
var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        if (typeof b !== "function" && b !== null)
            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
exports.SettingsPanel = void 0;
var container_1 = require("./container");
var selectbox_1 = require("./selectbox");
var timeout_1 = require("../timeout");
var eventdispatcher_1 = require("../eventdispatcher");
var settingspanelpage_1 = require("./settingspanelpage");
var NavigationDirection;
(function (NavigationDirection) {
    NavigationDirection[NavigationDirection["Forwards"] = 0] = "Forwards";
    NavigationDirection[NavigationDirection["Backwards"] = 1] = "Backwards";
})(NavigationDirection || (NavigationDirection = {}));
/**
 * A panel containing a list of {@link SettingsPanelPage items}.
 *
 * To configure pages just pass them in the components array.
 *
 * Example:
 *  let settingsPanel = new SettingsPanel({
 *    hidden: true,
 *  });
 *
 *  let settingsPanelPage = new SettingsPanelPage({
 *    components: […]
 *  });
 *
 *  let secondSettingsPanelPage = new SettingsPanelPage({
 *    components: […]
 *  });
 *
 *  settingsPanel.addComponent(settingsPanelPage);
 *  settingsPanel.addComponent(secondSettingsPanelPage);
 *
 * For an example how to navigate between pages @see SettingsPanelPageNavigatorButton
 *
 * @category Components
 */
var SettingsPanel = exports.SettingsPanel = /** @class */ (function (_super) {
    __extends(SettingsPanel, _super);
    function SettingsPanel(config) {
        var _this = _super.call(this, config) || this;
        _this.navigationStack = [];
        _this.settingsPanelEvents = {
            onSettingsStateChanged: new eventdispatcher_1.EventDispatcher(),
        };
        _this.config = _this.mergeConfig(config, {
            cssClass: 'ui-settings-panel',
            hideDelay: 3000,
            pageTransitionAnimation: true,
        }, _this.config);
        _this.activePage = _this.getRootPage();
        return _this;
    }
    SettingsPanel.prototype.configure = function (player, uimanager) {
        var _this = this;
        _super.prototype.configure.call(this, player, uimanager);
        var config = this.getConfig();
        uimanager.onControlsHide.subscribe(function () { return _this.hideHoveredSelectBoxes(); });
        uimanager.onComponentViewModeChanged.subscribe(function (_, _a) {
            var mode = _a.mode;
            return _this.trackComponentViewMode(mode);
        });
        if (config.hideDelay > -1) {
            this.hideTimeout = new timeout_1.Timeout(config.hideDelay, function () {
                _this.hide();
                _this.hideHoveredSelectBoxes();
            });
            this.getDomElement().on('mouseenter', function () {
                // On mouse enter clear the timeout
                _this.hideTimeout.clear();
            });
            this.getDomElement().on('mouseleave', function () {
                // On mouse leave activate the timeout
                _this.hideTimeout.reset();
            });
            this.getDomElement().on('focusin', function () {
                _this.hideTimeout.clear();
            });
            this.getDomElement().on('focusout', function () {
                _this.hideTimeout.reset();
            });
        }
        this.onHide.subscribe(function () {
            if (config.hideDelay > -1) {
                // Clear timeout when hidden from outside
                _this.hideTimeout.clear();
            }
            // Since we don't reset the actual navigation here we need to simulate a onInactive event in case some panel
            // needs to do something when they become invisible / inactive.
            _this.activePage.onInactiveEvent();
        });
        this.onShow.subscribe(function () {
            // Reset navigation when te panel gets visible to avoid a weird animation when hiding
            _this.resetNavigation(true);
            // Since we don't need to navigate to the root page again we need to fire the onActive event when the settings
            // panel gets visible.
            _this.activePage.onActiveEvent();
            if (config.hideDelay > -1) {
                // Activate timeout when shown
                _this.hideTimeout.start();
            }
        });
        // pass event from root page through
        this.getRootPage().onSettingsStateChanged.subscribe(function () {
            _this.onSettingsStateChangedEvent();
        });
        this.updateActivePageClass();
    };
    /**
     * Returns the current active / visible page
     * @return {SettingsPanelPage}
     */
    SettingsPanel.prototype.getActivePage = function () {
        return this.activePage;
    };
    /**
     * Sets the
     * @deprecated Use {@link setActivePage} instead
     * @param index
     */
    SettingsPanel.prototype.setActivePageIndex = function (index) {
        this.setActivePage(this.getPages()[index]);
    };
    /**
     * Adds the passed page to the navigation stack and makes it visible.
     * Use {@link popSettingsPanelPage} to navigate backwards.
     *
     * Results in no-op if the target page is the current page.
     * @param targetPage
     */
    SettingsPanel.prototype.setActivePage = function (targetPage) {
        if (targetPage === this.getActivePage()) {
            console.warn('Page is already the current one ... skipping navigation');
            return;
        }
        this.navigateToPage(targetPage, this.getActivePage(), NavigationDirection.Forwards, !this.config.pageTransitionAnimation);
    };
    /**
     * Resets the navigation stack by navigating back to the root page and displaying it.
     */
    SettingsPanel.prototype.popToRootSettingsPanelPage = function () {
        this.resetNavigation(this.config.pageTransitionAnimation);
    };
    /**
     * Removes the current page from the navigation stack and makes the previous one visible.
     * Results in a no-op if we are already on the root page.
     */
    SettingsPanel.prototype.popSettingsPanelPage = function () {
        if (this.navigationStack.length === 0) {
            console.warn('Already on the root page ... skipping navigation');
            return;
        }
        var targetPage = this.navigationStack[this.navigationStack.length - 2];
        // The root part isn't part of the navigation stack so handle it explicitly here
        if (!targetPage) {
            targetPage = this.getRootPage();
        }
        this.navigateToPage(targetPage, this.activePage, NavigationDirection.Backwards, !this.config.pageTransitionAnimation);
    };
    /**
     * Checks if there are active settings within the root page of the settings panel.
     * An active setting is a setting that is visible and enabled, which the user can interact with.
     * @returns {boolean} true if there are active settings, false if the panel is functionally empty to a user
     */
    SettingsPanel.prototype.rootPageHasActiveSettings = function () {
        return this.getRootPage().hasActiveSettings();
    };
    /**
     * Return all configured pages
     * @returns {SettingsPanelPage[]}
     */
    SettingsPanel.prototype.getPages = function () {
        return this.config.components.filter(function (component) { return component instanceof settingspanelpage_1.SettingsPanelPage; });
    };
    Object.defineProperty(SettingsPanel.prototype, "onSettingsStateChanged", {
        get: function () {
            return this.settingsPanelEvents.onSettingsStateChanged.getEvent();
        },
        enumerable: false,
        configurable: true
    });
    SettingsPanel.prototype.release = function () {
        _super.prototype.release.call(this);
        if (this.hideTimeout) {
            this.hideTimeout.clear();
        }
    };
    // Support adding settingsPanelPages after initialization
    SettingsPanel.prototype.addComponent = function (component) {
        if (this.getPages().length === 0 && component instanceof settingspanelpage_1.SettingsPanelPage) {
            this.activePage = component;
        }
        _super.prototype.addComponent.call(this, component);
    };
    SettingsPanel.prototype.suspendHideTimeout = function () {
        this.hideTimeout.suspend();
    };
    SettingsPanel.prototype.resumeHideTimeout = function () {
        this.hideTimeout.resume(true);
    };
    SettingsPanel.prototype.updateActivePageClass = function () {
        var _this = this;
        this.getPages().forEach(function (page) {
            if (page === _this.activePage) {
                page.getDomElement().addClass(_this.prefixCss(SettingsPanel.CLASS_ACTIVE_PAGE));
            }
            else {
                page.getDomElement().removeClass(_this.prefixCss(SettingsPanel.CLASS_ACTIVE_PAGE));
            }
        });
    };
    SettingsPanel.prototype.resetNavigation = function (resetNavigationOnShow) {
        var sourcePage = this.getActivePage();
        var rootPage = this.getRootPage();
        if (sourcePage) {
            // Since the onInactiveEvent was already fired in the onHide we need to suppress it here
            if (!resetNavigationOnShow) {
                sourcePage.onInactiveEvent();
            }
        }
        this.navigationStack = [];
        this.animateNavigation(rootPage, sourcePage, resetNavigationOnShow);
        this.activePage = rootPage;
        this.updateActivePageClass();
    };
    SettingsPanel.prototype.navigateToPage = function (targetPage, sourcePage, direction, skipAnimation) {
        this.activePage = targetPage;
        if (direction === NavigationDirection.Forwards) {
            this.navigationStack.push(targetPage);
        }
        else {
            this.navigationStack.pop();
        }
        this.animateNavigation(targetPage, sourcePage, skipAnimation);
        this.updateActivePageClass();
        targetPage.onActiveEvent();
        sourcePage.onInactiveEvent();
    };
    /**
     * @param targetPage
     * @param sourcePage
     * @param skipAnimation This is just an internal flag if we want to have an animation. It is set true when we reset
     * the navigation within the onShow callback of the settingsPanel. In this case we don't want an actual animation but
     * the recalculation of the dimension of the settingsPanel.
     * This is independent of the pageTransitionAnimation flag.
     */
    SettingsPanel.prototype.animateNavigation = function (targetPage, sourcePage, skipAnimation) {
        if (!this.config.pageTransitionAnimation) {
            return;
        }
        var settingsPanelDomElement = this.getDomElement();
        var settingsPanelHTMLElement = this.getDomElement().get(0);
        // get current dimension
        var settingsPanelWidth = settingsPanelHTMLElement.scrollWidth;
        var settingsPanelHeight = settingsPanelHTMLElement.scrollHeight;
        // calculate target size of the settings panel
        sourcePage.getDomElement().css('display', 'none');
        this.getDomElement().css({ width: '', height: '' }); // let css auto settings kick in again
        var targetPageHtmlElement = targetPage.getDomElement().get(0);
        // clone the targetPage DOM element so that we can calculate the width / height how they will be after
        // switching the page. We are using a clone to prevent (mostly styling) side-effects on the real DOM element
        var clone = targetPageHtmlElement.cloneNode(true);
        // append to parent so we get the 'real' size
        var containerWrapper = targetPageHtmlElement.parentNode;
        containerWrapper.appendChild(clone);
        // set clone visible
        clone.style.display = 'block';
        // collect target dimension
        var targetSettingsPanelWidth = settingsPanelHTMLElement.scrollWidth;
        var targetSettingsPanelHeight = settingsPanelHTMLElement.scrollHeight;
        // remove clone from the DOM
        clone.parentElement.removeChild(clone); // .remove() is not working in IE
        sourcePage.getDomElement().css('display', '');
        // set the values back to the current ones that the browser animates it (browsers don't animate 'auto' values)
        settingsPanelDomElement.css({
            width: settingsPanelWidth + 'px',
            height: settingsPanelHeight + 'px',
        });
        if (!skipAnimation) {
            // We need to force the browser to reflow between setting the width and height that we actually get a animation
            this.forceBrowserReflow();
        }
        // set the values to the target dimension
        settingsPanelDomElement.css({
            width: targetSettingsPanelWidth + 'px',
            height: targetSettingsPanelHeight + 'px',
        });
    };
    SettingsPanel.prototype.forceBrowserReflow = function () {
        // Force the browser to reflow the layout
        // https://gist.github.com/paulirish/5d52fb081b3570c81e3a
        this.getDomElement().get(0).offsetLeft;
    };
    /**
     * Workaround for IE, Firefox and Safari
     * when the settings panel fades out while an item of a select box is still hovered, the select box will not fade out
     * while the settings panel does. This would leave a floating select box, which is just weird
     */
    SettingsPanel.prototype.hideHoveredSelectBoxes = function () {
        this.getComputedItems()
            .map(function (item) { return item['setting']; })
            .filter(function (component) { return component instanceof selectbox_1.SelectBox; })
            .forEach(function (selectBox) { return selectBox.closeDropdown(); });
    };
    // collect all items from all pages (see hideHoveredSelectBoxes)
    SettingsPanel.prototype.getComputedItems = function () {
        var allItems = [];
        for (var _i = 0, _a = this.getPages(); _i < _a.length; _i++) {
            var page = _a[_i];
            allItems.push.apply(allItems, page.getItems());
        }
        return allItems;
    };
    SettingsPanel.prototype.getRootPage = function () {
        return this.getPages()[0];
    };
    SettingsPanel.prototype.onSettingsStateChangedEvent = function () {
        this.settingsPanelEvents.onSettingsStateChanged.dispatch(this);
    };
    SettingsPanel.CLASS_ACTIVE_PAGE = 'active';
    return SettingsPanel;
}(container_1.Container));

},{"../eventdispatcher":84,"../timeout":111,"./container":19,"./selectbox":44,"./settingspanelpage":47}],46:[function(require,module,exports){
"use strict";
var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        if (typeof b !== "function" && b !== null)
            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
exports.SettingsPanelItem = void 0;
var container_1 = require("./container");
var component_1 = require("./component");
var eventdispatcher_1 = require("../eventdispatcher");
var label_1 = require("./label");
var selectbox_1 = require("./selectbox");
var listbox_1 = require("./listbox");
var videoqualityselectbox_1 = require("./videoqualityselectbox");
var audioqualityselectbox_1 = require("./audioqualityselectbox");
var playbackspeedselectbox_1 = require("./playbackspeedselectbox");
/**
 * An item for a {@link SettingsPanelPage},
 * Containing an optional {@link Label} and a component that configures a setting.
 * If the components is a {@link SelectBox} it will handle the logic of displaying it or not
 *
 * @category Components
 */
var SettingsPanelItem = /** @class */ (function (_super) {
    __extends(SettingsPanelItem, _super);
    function SettingsPanelItem(label, setting, config) {
        if (config === void 0) { config = {}; }
        var _this = _super.call(this, config) || this;
        _this.settingsPanelItemEvents = {
            onActiveChanged: new eventdispatcher_1.EventDispatcher(),
        };
        _this.setting = setting;
        _this.config = _this.mergeConfig(config, {
            cssClass: 'ui-settings-panel-item',
            role: 'menuitem',
        }, _this.config);
        if (label !== null) {
            if (label instanceof component_1.Component) {
                _this.label = label;
            }
            else {
                _this.label = new label_1.Label({ text: label, for: _this.setting.getConfig().id });
            }
            _this.addComponent(_this.label);
        }
        _this.addComponent(_this.setting);
        return _this;
    }
    SettingsPanelItem.prototype.configure = function (player, uimanager) {
        var _this = this;
        if (this.setting instanceof selectbox_1.SelectBox || this.setting instanceof listbox_1.ListBox) {
            var handleConfigItemChanged = function () {
                if (!(_this.setting instanceof selectbox_1.SelectBox) && !(_this.setting instanceof listbox_1.ListBox)) {
                    return;
                }
                // The minimum number of items that must be available for the setting to be displayed
                // By default, at least two items must be available, else a selection is not possible
                var minItemsToDisplay = 2;
                // Audio/video quality select boxes contain an additional 'auto' mode, which in combination with a single
                // available quality also does not make sense
                if ((_this.setting instanceof videoqualityselectbox_1.VideoQualitySelectBox && _this.setting.hasAutoItem())
                    || _this.setting instanceof audioqualityselectbox_1.AudioQualitySelectBox) {
                    minItemsToDisplay = 3;
                }
                if (_this.setting.itemCount() < minItemsToDisplay) {
                    // Hide the setting if no meaningful choice is available
                    _this.hide();
                }
                else if (_this.setting instanceof playbackspeedselectbox_1.PlaybackSpeedSelectBox
                    && !uimanager.getConfig().playbackSpeedSelectionEnabled) {
                    // Hide the PlaybackSpeedSelectBox if disabled in config
                    _this.hide();
                }
                else {
                    _this.show();
                }
                // Visibility might have changed and therefore the active state might have changed so we fire the event
                // TODO fire only when state has really changed (e.g. check if visibility has really changed)
                _this.onActiveChangedEvent();
                _this.getDomElement().attr('aria-haspopup', 'true');
            };
            this.setting.onItemAdded.subscribe(handleConfigItemChanged);
            this.setting.onItemRemoved.subscribe(handleConfigItemChanged);
            // Initialize hidden state
            handleConfigItemChanged();
        }
    };
    /**
     * Checks if this settings panel item is active, i.e. visible and enabled and a user can interact with it.
     * @returns {boolean} true if the panel is active, else false
     */
    SettingsPanelItem.prototype.isActive = function () {
        return this.isShown();
    };
    SettingsPanelItem.prototype.onActiveChangedEvent = function () {
        this.settingsPanelItemEvents.onActiveChanged.dispatch(this);
    };
    Object.defineProperty(SettingsPanelItem.prototype, "onActiveChanged", {
        /**
         * Gets the event that is fired when the 'active' state of this item changes.
         * @see #isActive
         * @returns {Event<SettingsPanelItem, NoArgs>}
         */
        get: function () {
            return this.settingsPanelItemEvents.onActiveChanged.getEvent();
        },
        enumerable: false,
        configurable: true
    });
    return SettingsPanelItem;
}(container_1.Container));
exports.SettingsPanelItem = SettingsPanelItem;

},{"../eventdispatcher":84,"./audioqualityselectbox":8,"./component":18,"./container":19,"./label":28,"./listbox":29,"./playbackspeedselectbox":33,"./selectbox":44,"./videoqualityselectbox":75}],47:[function(require,module,exports){
"use strict";
var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        if (typeof b !== "function" && b !== null)
            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
exports.SettingsPanelPage = void 0;
var container_1 = require("./container");
var settingspanelitem_1 = require("./settingspanelitem");
var eventdispatcher_1 = require("../eventdispatcher");
var browserutils_1 = require("../browserutils");
/**
 * A panel containing a list of {@link SettingsPanelItem items} that represent labelled settings.
 *
 * @category Components
 */
var SettingsPanelPage = exports.SettingsPanelPage = /** @class */ (function (_super) {
    __extends(SettingsPanelPage, _super);
    function SettingsPanelPage(config) {
        var _this = _super.call(this, config) || this;
        _this.settingsPanelPageEvents = {
            onSettingsStateChanged: new eventdispatcher_1.EventDispatcher(),
            onActive: new eventdispatcher_1.EventDispatcher(),
            onInactive: new eventdispatcher_1.EventDispatcher(),
        };
        _this.config = _this.mergeConfig(config, {
            cssClass: 'ui-settings-panel-page',
            role: 'menu',
        }, _this.config);
        return _this;
    }
    SettingsPanelPage.prototype.configure = function (player, uimanager) {
        var _this = this;
        _super.prototype.configure.call(this, player, uimanager);
        // Fire event when the state of a settings-item has changed
        var settingsStateChangedHandler = function () {
            _this.onSettingsStateChangedEvent();
            // Attach marker class to last visible item
            var lastShownItem = null;
            for (var _i = 0, _a = _this.getItems(); _i < _a.length; _i++) {
                var component = _a[_i];
                component.getDomElement().removeClass(_this.prefixCss(SettingsPanelPage.CLASS_LAST));
                if (component.isShown()) {
                    lastShownItem = component;
                }
            }
            if (lastShownItem) {
                lastShownItem.getDomElement().addClass(_this.prefixCss(SettingsPanelPage.CLASS_LAST));
            }
        };
        for (var _i = 0, _a = this.getItems(); _i < _a.length; _i++) {
            var component = _a[_i];
            component.onActiveChanged.subscribe(settingsStateChangedHandler);
        }
    };
    SettingsPanelPage.prototype.hasActiveSettings = function () {
        for (var _i = 0, _a = this.getItems(); _i < _a.length; _i++) {
            var component = _a[_i];
            if (component.isActive()) {
                return true;
            }
        }
        return false;
    };
    SettingsPanelPage.prototype.getItems = function () {
        return this.config.components.filter(function (component) { return component instanceof settingspanelitem_1.SettingsPanelItem; });
    };
    SettingsPanelPage.prototype.onSettingsStateChangedEvent = function () {
        this.settingsPanelPageEvents.onSettingsStateChanged.dispatch(this);
    };
    Object.defineProperty(SettingsPanelPage.prototype, "onSettingsStateChanged", {
        get: function () {
            return this.settingsPanelPageEvents.onSettingsStateChanged.getEvent();
        },
        enumerable: false,
        configurable: true
    });
    SettingsPanelPage.prototype.onActiveEvent = function () {
        var activeItems = this.getItems().filter(function (item) { return item.isActive(); });
        this.settingsPanelPageEvents.onActive.dispatch(this);
        // Disable focus for iOS and iPadOS 13. They open select boxes automatically on focus and we want to avoid that.
        if (activeItems.length > 0 && !browserutils_1.BrowserUtils.isIOS && !(browserutils_1.BrowserUtils.isMacIntel && browserutils_1.BrowserUtils.isTouchSupported)) {
            activeItems[0].getDomElement().focusToFirstInput();
        }
    };
    Object.defineProperty(SettingsPanelPage.prototype, "onActive", {
        get: function () {
            return this.settingsPanelPageEvents.onActive.getEvent();
        },
        enumerable: false,
        configurable: true
    });
    SettingsPanelPage.prototype.onInactiveEvent = function () {
        this.settingsPanelPageEvents.onInactive.dispatch(this);
    };
    Object.defineProperty(SettingsPanelPage.prototype, "onInactive", {
        get: function () {
            return this.settingsPanelPageEvents.onInactive.getEvent();
        },
        enumerable: false,
        configurable: true
    });
    SettingsPanelPage.CLASS_LAST = 'last';
    return SettingsPanelPage;
}(container_1.Container));

},{"../browserutils":3,"../eventdispatcher":84,"./container":19,"./settingspanelitem":46}],48:[function(require,module,exports){
"use strict";
var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        if (typeof b !== "function" && b !== null)
            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
exports.SettingsPanelPageBackButton = void 0;
var settingspanelpagenavigatorbutton_1 = require("./settingspanelpagenavigatorbutton");
/**
 * @category Buttons
 */
var SettingsPanelPageBackButton = /** @class */ (function (_super) {
    __extends(SettingsPanelPageBackButton, _super);
    function SettingsPanelPageBackButton(config) {
        var _this = _super.call(this, config) || this;
        _this.config = _this.mergeConfig(config, {
            cssClass: 'ui-settingspanelpagebackbutton',
            text: 'back',
        }, _this.config);
        return _this;
    }
    SettingsPanelPageBackButton.prototype.configure = function (player, uimanager) {
        var _this = this;
        _super.prototype.configure.call(this, player, uimanager);
        this.onClick.subscribe(function () {
            _this.popPage();
        });
    };
    return SettingsPanelPageBackButton;
}(settingspanelpagenavigatorbutton_1.SettingsPanelPageNavigatorButton));
exports.SettingsPanelPageBackButton = SettingsPanelPageBackButton;

},{"./settingspanelpagenavigatorbutton":49}],49:[function(require,module,exports){
"use strict";
var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        if (typeof b !== "function" && b !== null)
            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
exports.SettingsPanelPageNavigatorButton = void 0;
var button_1 = require("./button");
/**
 * Can be used to navigate between SettingsPanelPages
 *
 * Example:
 *  let settingPanelNavigationButton = new SettingsPanelPageNavigatorButton({
 *    container: settingsPanel,
 *    targetPage: settingsPanelPage,
 *  });
 *
 *  settingsPanelPage.addComponent(settingPanelNavigationButton);
 *
 * Don't forget to add the settingPanelNavigationButton to the settingsPanelPage.
 *
 * @category Buttons
 */
var SettingsPanelPageNavigatorButton = /** @class */ (function (_super) {
    __extends(SettingsPanelPageNavigatorButton, _super);
    function SettingsPanelPageNavigatorButton(config) {
        var _this = _super.call(this, config) || this;
        _this.config = _this.mergeConfig(config, {}, _this.config);
        _this.container = _this.config.container;
        _this.targetPage = _this.config.targetPage;
        return _this;
    }
    /**
     * navigate one level back
     */
    SettingsPanelPageNavigatorButton.prototype.popPage = function () {
        this.container.popSettingsPanelPage();
    };
    /**
     * navigate to the target page
     */
    SettingsPanelPageNavigatorButton.prototype.pushTargetPage = function () {
        this.container.setActivePage(this.targetPage);
    };
    return SettingsPanelPageNavigatorButton;
}(button_1.Button));
exports.SettingsPanelPageNavigatorButton = SettingsPanelPageNavigatorButton;

},{"./button":12}],50:[function(require,module,exports){
"use strict";
var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        if (typeof b !== "function" && b !== null)
            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
exports.SettingsPanelPageOpenButton = void 0;
var settingspanelpagenavigatorbutton_1 = require("./settingspanelpagenavigatorbutton");
var i18n_1 = require("../localization/i18n");
/**
 * @category Buttons
 */
var SettingsPanelPageOpenButton = /** @class */ (function (_super) {
    __extends(SettingsPanelPageOpenButton, _super);
    function SettingsPanelPageOpenButton(config) {
        var _this = _super.call(this, config) || this;
        _this.config = _this.mergeConfig(config, {
            cssClass: 'ui-settingspanelpageopenbutton',
            text: i18n_1.i18n.getLocalizer('open'),
            role: 'menuitem',
        }, _this.config);
        return _this;
    }
    SettingsPanelPageOpenButton.prototype.configure = function (player, uimanager) {
        var _this = this;
        _super.prototype.configure.call(this, player, uimanager);
        this.getDomElement().attr('aria-haspopup', 'true');
        this.getDomElement().attr('aria-owns', this.config.targetPage.getConfig().id);
        this.onClick.subscribe(function () {
            _this.pushTargetPage();
        });
    };
    return SettingsPanelPageOpenButton;
}(settingspanelpagenavigatorbutton_1.SettingsPanelPageNavigatorButton));
exports.SettingsPanelPageOpenButton = SettingsPanelPageOpenButton;

},{"../localization/i18n":89,"./settingspanelpagenavigatorbutton":49}],51:[function(require,module,exports){
"use strict";
var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        if (typeof b !== "function" && b !== null)
            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
exports.SettingsToggleButton = void 0;
var togglebutton_1 = require("./togglebutton");
var settingspanel_1 = require("./settingspanel");
var arrayutils_1 = require("../arrayutils");
var i18n_1 = require("../localization/i18n");
/**
 * A button that toggles visibility of a settings panel.
 *
 * @category Buttons
 */
var SettingsToggleButton = /** @class */ (function (_super) {
    __extends(SettingsToggleButton, _super);
    function SettingsToggleButton(config) {
        var _this = _super.call(this, config) || this;
        _this.visibleSettingsPanels = [];
        if (!config.settingsPanel) {
            throw new Error('Required SettingsPanel is missing');
        }
        _this.config = _this.mergeConfig(config, {
            cssClass: 'ui-settingstogglebutton',
            text: i18n_1.i18n.getLocalizer('settings'),
            settingsPanel: null,
            autoHideWhenNoActiveSettings: true,
            role: 'pop-up button',
        }, _this.config);
        /**
         * WCAG20 standard defines which popup menu (element id) is owned by the button
         */
        _this.getDomElement().attr('aria-owns', config.settingsPanel.getActivePage().getConfig().id);
        /**
         * WCAG20 standard defines that a button has a popup menu bound to it
         */
        _this.getDomElement().attr('aria-haspopup', 'true');
        return _this;
    }
    SettingsToggleButton.prototype.configure = function (player, uimanager) {
        var _this = this;
        _super.prototype.configure.call(this, player, uimanager);
        var config = this.getConfig();
        var settingsPanel = config.settingsPanel;
        this.onClick.subscribe(function () {
            // only hide other `SettingsPanel`s if a new one will be opened
            if (!settingsPanel.isShown()) {
                // Hide all open SettingsPanels before opening this button's panel
                // (We need to iterate a copy because hiding them will automatically remove themselves from the array
                // due to the subscribeOnce above)
                _this.visibleSettingsPanels.slice().forEach(function (settingsPanel) { return settingsPanel.hide(); });
            }
            settingsPanel.toggleHidden();
        });
        settingsPanel.onShow.subscribe(function () {
            // Set toggle status to on when the settings panel shows
            _this.on();
        });
        settingsPanel.onHide.subscribe(function () {
            // Set toggle status to off when the settings panel hides
            _this.off();
        });
        // Ensure that only one `SettingPanel` is visible at once
        // Keep track of shown SettingsPanels
        uimanager.onComponentShow.subscribe(function (sender) {
            if (sender instanceof settingspanel_1.SettingsPanel) {
                _this.visibleSettingsPanels.push(sender);
                sender.onHide.subscribeOnce(function () { return arrayutils_1.ArrayUtils.remove(_this.visibleSettingsPanels, sender); });
            }
        });
        // Handle automatic hiding of the button if there are no settings for the user to interact with
        if (config.autoHideWhenNoActiveSettings) {
            // Setup handler to show/hide button when the settings change
            var settingsPanelItemsChangedHandler = function () {
                if (settingsPanel.rootPageHasActiveSettings()) {
                    if (_this.isHidden()) {
                        _this.show();
                    }
                }
                else {
                    if (_this.isShown()) {
                        _this.hide();
                    }
                }
            };
            // Wire the handler to the event
            settingsPanel.onSettingsStateChanged.subscribe(settingsPanelItemsChangedHandler);
            // Call handler for first init at startup
            settingsPanelItemsChangedHandler();
        }
    };
    return SettingsToggleButton;
}(togglebutton_1.ToggleButton));
exports.SettingsToggleButton = SettingsToggleButton;

},{"../arrayutils":1,"../localization/i18n":89,"./settingspanel":45,"./togglebutton":72}],52:[function(require,module,exports){
"use strict";
var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        if (typeof b !== "function" && b !== null)
            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
exports.Spacer = void 0;
var component_1 = require("./component");
/**
 * A dummy component that just reserves some space and does nothing else.
 *
 * @category Components
 */
var Spacer = /** @class */ (function (_super) {
    __extends(Spacer, _super);
    function Spacer(config) {
        if (config === void 0) { config = {}; }
        var _this = _super.call(this, config) || this;
        _this.config = _this.mergeConfig(config, {
            cssClass: 'ui-spacer',
        }, _this.config);
        return _this;
    }
    Spacer.prototype.onShowEvent = function () {
        // disable event firing by overwriting and not calling super
    };
    Spacer.prototype.onHideEvent = function () {
        // disable event firing by overwriting and not calling super
    };
    Spacer.prototype.onHoverChangedEvent = function (hovered) {
        // disable event firing by overwriting and not calling super
    };
    return Spacer;
}(component_1.Component));
exports.Spacer = Spacer;

},{"./component":18}],53:[function(require,module,exports){
"use strict";
var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        if (typeof b !== "function" && b !== null)
            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
exports.SubtitleListBox = void 0;
var listbox_1 = require("./listbox");
var subtitleutils_1 = require("../subtitleutils");
/**
 * A element that is similar to a select box where the user can select a subtitle
 *
 * @category Components
 */
var SubtitleListBox = /** @class */ (function (_super) {
    __extends(SubtitleListBox, _super);
    function SubtitleListBox() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    SubtitleListBox.prototype.configure = function (player, uimanager) {
        _super.prototype.configure.call(this, player, uimanager);
        new subtitleutils_1.SubtitleSwitchHandler(player, this, uimanager);
    };
    return SubtitleListBox;
}(listbox_1.ListBox));
exports.SubtitleListBox = SubtitleListBox;

},{"../subtitleutils":110,"./listbox":29}],54:[function(require,module,exports){
"use strict";
var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        if (typeof b !== "function" && b !== null)
            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
exports.SubtitleRegionContainer = exports.SubtitleRegionContainerManager = exports.SubtitleLabel = exports.SubtitleOverlay = void 0;
var container_1 = require("./container");
var label_1 = require("./label");
var controlbar_1 = require("./controlbar");
var eventdispatcher_1 = require("../eventdispatcher");
var dom_1 = require("../dom");
var i18n_1 = require("../localization/i18n");
var vttutils_1 = require("../vttutils");
/**
 * Overlays the player to display subtitles.
 *
 * @category Components
 */
var SubtitleOverlay = exports.SubtitleOverlay = /** @class */ (function (_super) {
    __extends(SubtitleOverlay, _super);
    function SubtitleOverlay(config) {
        if (config === void 0) { config = {}; }
        var _this = _super.call(this, config) || this;
        _this.preprocessLabelEventCallback = new eventdispatcher_1.EventDispatcher();
        _this.previewSubtitleActive = false;
        _this.previewSubtitle = new SubtitleLabel({ text: i18n_1.i18n.getLocalizer('subtitle.example') });
        _this.config = _this.mergeConfig(config, {
            cssClass: 'ui-subtitle-overlay',
        }, _this.config);
        return _this;
    }
    SubtitleOverlay.prototype.configure = function (player, uimanager) {
        var _this = this;
        _super.prototype.configure.call(this, player, uimanager);
        var subtitleManager = new ActiveSubtitleManager();
        this.subtitleManager = subtitleManager;
        this.subtitleContainerManager = new SubtitleRegionContainerManager(this);
        player.on(player.exports.PlayerEvent.CueEnter, function (event) {
            var label = _this.generateLabel(event);
            subtitleManager.cueEnter(event, label);
            _this.preprocessLabelEventCallback.dispatch(event, label);
            if (_this.previewSubtitleActive) {
                _this.subtitleContainerManager.removeLabel(_this.previewSubtitle);
            }
            _this.show();
            _this.subtitleContainerManager.addLabel(label, _this.getDomElement().size());
            _this.updateComponents();
            if (uimanager.getConfig().forceSubtitlesIntoViewContainer) {
                _this.handleSubtitleCropping(label);
            }
        });
        player.on(player.exports.PlayerEvent.CueUpdate, function (event) {
            var label = _this.generateLabel(event);
            var labelToReplace = subtitleManager.cueUpdate(event, label);
            _this.preprocessLabelEventCallback.dispatch(event, label);
            if (labelToReplace) {
                _this.subtitleContainerManager.replaceLabel(labelToReplace, label);
            }
            if (uimanager.getConfig().forceSubtitlesIntoViewContainer) {
                _this.handleSubtitleCropping(label);
            }
        });
        player.on(player.exports.PlayerEvent.CueExit, function (event) {
            var labelToRemove = subtitleManager.cueExit(event);
            if (labelToRemove) {
                _this.subtitleContainerManager.removeLabel(labelToRemove);
                _this.updateComponents();
            }
            if (!subtitleManager.hasCues) {
                if (!_this.previewSubtitleActive) {
                    _this.hide();
                }
                else {
                    _this.subtitleContainerManager.addLabel(_this.previewSubtitle);
                    _this.updateComponents();
                }
            }
        });
        var subtitleClearHandler = function () {
            _this.hide();
            _this.subtitleContainerManager.clear();
            subtitleManager.clear();
            _this.removeComponents();
            _this.updateComponents();
        };
        var clearInactiveCues = function () {
            var removedActiveCues = subtitleManager.clearInactiveCues(player.getCurrentTime());
            removedActiveCues.forEach(function (toRemove) {
                _this.subtitleContainerManager.removeLabel(toRemove.label);
            });
        };
        player.on(player.exports.PlayerEvent.AudioChanged, subtitleClearHandler);
        player.on(player.exports.PlayerEvent.SubtitleDisabled, subtitleClearHandler);
        player.on(player.exports.PlayerEvent.Seeked, clearInactiveCues);
        player.on(player.exports.PlayerEvent.TimeShifted, clearInactiveCues);
        player.on(player.exports.PlayerEvent.PlaybackFinished, subtitleClearHandler);
        player.on(player.exports.PlayerEvent.SourceUnloaded, subtitleClearHandler);
        uimanager.onComponentShow.subscribe(function (component) {
            if (component instanceof controlbar_1.ControlBar) {
                _this.getDomElement().addClass(_this.prefixCss(SubtitleOverlay.CLASS_CONTROLBAR_VISIBLE));
            }
        });
        uimanager.onComponentHide.subscribe(function (component) {
            if (component instanceof controlbar_1.ControlBar) {
                _this.getDomElement().removeClass(_this.prefixCss(SubtitleOverlay.CLASS_CONTROLBAR_VISIBLE));
            }
        });
        this.configureCea608Captions(player, uimanager);
        // Init
        subtitleClearHandler();
    };
    SubtitleOverlay.prototype.detectCroppedSubtitleLabel = function (labelElement) {
        var parent = this.getDomElement().get(0);
        var childRect = labelElement.getBoundingClientRect();
        var parentRect = parent.getBoundingClientRect();
        return {
            top: childRect.top < parentRect.top,
            right: childRect.right > parentRect.right,
            bottom: childRect.bottom > parentRect.bottom,
            left: childRect.left < parentRect.left,
        };
    };
    SubtitleOverlay.prototype.handleSubtitleCropping = function (label) {
        var labelDomElement = label.getDomElement();
        var cropDetection = this.detectCroppedSubtitleLabel(labelDomElement.get(0));
        if (cropDetection.top) {
            labelDomElement.css('top', '0');
            labelDomElement.removeCss('bottom');
        }
        if (cropDetection.right) {
            labelDomElement.css('right', '0');
            labelDomElement.removeCss('left');
        }
        if (cropDetection.bottom) {
            labelDomElement.css('bottom', '0');
            labelDomElement.removeCss('top');
        }
        if (cropDetection.left) {
            labelDomElement.css('left', '0');
            labelDomElement.removeCss('right');
        }
    };
    SubtitleOverlay.prototype.generateLabel = function (event) {
        // Sanitize cue data (must be done before the cue ID is generated in subtitleManager.cueEnter / update)
        if (event.position) {
            // Sometimes the positions are undefined, we assume them to be zero
            event.position.row = event.position.row || 0;
            event.position.column = event.position.column || 0;
        }
        var label = new SubtitleLabel({
            // Prefer the HTML subtitle text if set, else try generating a image tag as string from the image attribute,
            // else use the plain text
            text: event.html || ActiveSubtitleManager.generateImageTagText(event.image) || event.text,
            vtt: event.vtt,
            region: event.region,
            regionStyle: event.regionStyle,
        });
        return label;
    };
    SubtitleOverlay.prototype.configureCea608Captions = function (player, uimanager) {
        var _this = this;
        // The calculated font size
        var fontSize = 0;
        // The required letter spacing spread the text characters evenly across the grid
        var fontLetterSpacing = 0;
        // Flag telling if a font size calculation is required of if the current values are valid
        var fontSizeCalculationRequired = true;
        // Flag telling if the CEA-608 mode is enabled
        var enabled = false;
        var updateCEA608FontSize = function () {
            var dummyLabel = new SubtitleLabel({ text: 'X' });
            dummyLabel.getDomElement().css({
                // By using a large font size we do not need to use multiple letters and can get still an
                // accurate measurement even though the returned size is an integer value
                'font-size': '200px',
                'line-height': '200px',
                'visibility': 'hidden',
            });
            _this.addComponent(dummyLabel);
            _this.updateComponents();
            _this.show();
            var dummyLabelCharWidth = dummyLabel.getDomElement().width();
            var dummyLabelCharHeight = dummyLabel.getDomElement().height();
            var fontSizeRatio = dummyLabelCharWidth / dummyLabelCharHeight;
            _this.removeComponent(dummyLabel);
            _this.updateComponents();
            if (!_this.subtitleManager.hasCues) {
                _this.hide();
            }
            // We subtract 1px here to avoid line breaks at the right border of the subtitle overlay that can happen
            // when texts contain whitespaces. It's probably some kind of pixel rounding issue in the browser's
            // layouting, but the actual reason could not be determined. Aiming for a target width - 1px would work in
            // most browsers, but Safari has a "quantized" font size rendering with huge steps in between so we need
            // to subtract some more pixels to avoid line breaks there as well.
            var subtitleOverlayWidth = _this.getDomElement().width() - 10;
            var subtitleOverlayHeight = _this.getDomElement().height();
            // The size ratio of the letter grid
            var fontGridSizeRatio = (dummyLabelCharWidth * SubtitleOverlay.CEA608_NUM_COLUMNS) /
                (dummyLabelCharHeight * SubtitleOverlay.CEA608_NUM_ROWS);
            // The size ratio of the available space for the grid
            var subtitleOverlaySizeRatio = subtitleOverlayWidth / subtitleOverlayHeight;
            if (subtitleOverlaySizeRatio > fontGridSizeRatio) {
                // When the available space is wider than the text grid, the font size is simply
                // determined by the height of the available space.
                fontSize = subtitleOverlayHeight / SubtitleOverlay.CEA608_NUM_ROWS;
                // Calculate the additional letter spacing required to evenly spread the text across the grid's width
                var gridSlotWidth = subtitleOverlayWidth / SubtitleOverlay.CEA608_NUM_COLUMNS;
                var fontCharWidth = fontSize * fontSizeRatio;
                fontLetterSpacing = gridSlotWidth - fontCharWidth;
            }
            else {
                // When the available space is not wide enough, texts would vertically overlap if we take
                // the height as a base for the font size, so we need to limit the height. We do that
                // by determining the font size by the width of the available space.
                fontSize = subtitleOverlayWidth / SubtitleOverlay.CEA608_NUM_COLUMNS / fontSizeRatio;
                fontLetterSpacing = 0;
            }
            // Update font-size of all active subtitle labels
            for (var _i = 0, _a = _this.getComponents(); _i < _a.length; _i++) {
                var label = _a[_i];
                if (label instanceof SubtitleLabel) {
                    label.getDomElement().css({
                        'font-size': "".concat(fontSize, "px"),
                        'letter-spacing': "".concat(fontLetterSpacing, "px"),
                    });
                }
            }
        };
        player.on(player.exports.PlayerEvent.PlayerResized, function () {
            if (enabled) {
                updateCEA608FontSize();
            }
            else {
                fontSizeCalculationRequired = true;
            }
        });
        this.preprocessLabelEventCallback.subscribe(function (event, label) {
            var isCEA608 = event.position != null;
            if (!isCEA608) {
                // Skip all non-CEA608 cues
                return;
            }
            if (!enabled) {
                enabled = true;
                _this.getDomElement().addClass(_this.prefixCss(SubtitleOverlay.CLASS_CEA_608));
                // We conditionally update the font size by this flag here to avoid updating every time a subtitle
                // is added into an empty overlay. Because we reset the overlay when all subtitles are gone, this
                // would trigger an unnecessary update every time, but it's only required under certain conditions,
                // e.g. after the player size has changed.
                if (fontSizeCalculationRequired) {
                    updateCEA608FontSize();
                    fontSizeCalculationRequired = false;
                }
            }
            label.getDomElement().css({
                'left': "".concat(event.position.column * SubtitleOverlay.CEA608_COLUMN_OFFSET, "%"),
                'top': "".concat(event.position.row * SubtitleOverlay.CEA608_ROW_OFFSET, "%"),
                'font-size': "".concat(fontSize, "px"),
                'letter-spacing': "".concat(fontLetterSpacing, "px"),
            });
        });
        var reset = function () {
            _this.getDomElement().removeClass(_this.prefixCss(SubtitleOverlay.CLASS_CEA_608));
            enabled = false;
        };
        player.on(player.exports.PlayerEvent.CueExit, function () {
            if (!_this.subtitleManager.hasCues) {
                // Disable CEA-608 mode when all subtitles are gone (to allow correct formatting and
                // display of other types of subtitles, e.g. the formatting preview subtitle)
                reset();
            }
        });
        player.on(player.exports.PlayerEvent.SourceUnloaded, reset);
        player.on(player.exports.PlayerEvent.SubtitleEnabled, reset);
        player.on(player.exports.PlayerEvent.SubtitleDisabled, reset);
    };
    SubtitleOverlay.prototype.enablePreviewSubtitleLabel = function () {
        if (!this.subtitleManager.hasCues) {
            this.previewSubtitleActive = true;
            this.subtitleContainerManager.addLabel(this.previewSubtitle);
            this.updateComponents();
            this.show();
        }
    };
    SubtitleOverlay.prototype.removePreviewSubtitleLabel = function () {
        if (this.previewSubtitleActive) {
            this.previewSubtitleActive = false;
            this.subtitleContainerManager.removeLabel(this.previewSubtitle);
            this.updateComponents();
        }
    };
    SubtitleOverlay.CLASS_CONTROLBAR_VISIBLE = 'controlbar-visible';
    SubtitleOverlay.CLASS_CEA_608 = 'cea608';
    // The number of rows in a cea608 grid
    SubtitleOverlay.CEA608_NUM_ROWS = 15;
    // The number of columns in a cea608 grid
    SubtitleOverlay.CEA608_NUM_COLUMNS = 32;
    // The offset in percent for one row (which is also the height of a row)
    SubtitleOverlay.CEA608_ROW_OFFSET = 100 / SubtitleOverlay.CEA608_NUM_ROWS;
    // The offset in percent for one column (which is also the width of a column)
    SubtitleOverlay.CEA608_COLUMN_OFFSET = 100 / SubtitleOverlay.CEA608_NUM_COLUMNS;
    return SubtitleOverlay;
}(container_1.Container));
var SubtitleLabel = /** @class */ (function (_super) {
    __extends(SubtitleLabel, _super);
    function SubtitleLabel(config) {
        if (config === void 0) { config = {}; }
        var _this = _super.call(this, config) || this;
        _this.config = _this.mergeConfig(config, {
            cssClass: 'ui-subtitle-label',
        }, _this.config);
        return _this;
    }
    Object.defineProperty(SubtitleLabel.prototype, "vtt", {
        get: function () {
            return this.config.vtt;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(SubtitleLabel.prototype, "region", {
        get: function () {
            return this.config.region;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(SubtitleLabel.prototype, "regionStyle", {
        get: function () {
            return this.config.regionStyle;
        },
        enumerable: false,
        configurable: true
    });
    return SubtitleLabel;
}(label_1.Label));
exports.SubtitleLabel = SubtitleLabel;
var ActiveSubtitleManager = /** @class */ (function () {
    function ActiveSubtitleManager() {
        this.activeSubtitleCueMap = {};
        this.activeSubtitleCueCount = 0;
    }
    /**
     * Calculates a unique ID for a subtitle cue, which is needed to associate an CueEnter with its CueExit
     * event so we can remove the correct subtitle in CueExit when multiple subtitles are active at the same time.
     * The start time plus the text should make a unique identifier, and in the only case where a collision
     * can happen, two similar texts will be displayed at a similar time and a similar position (or without position).
     * The start time should always be known, because it is required to schedule the CueEnter event. The end time
     * must not necessarily be known and therefore cannot be used for the ID.
     * @param event
     * @return {string}
     */
    ActiveSubtitleManager.calculateId = function (event) {
        var id = event.start + '-' + event.text;
        if (event.position) {
            id += '-' + event.position.row + '-' + event.position.column;
        }
        return id;
    };
    ActiveSubtitleManager.prototype.cueEnter = function (event, label) {
        this.addCueToMap(event, label);
    };
    ActiveSubtitleManager.prototype.cueUpdate = function (event, label) {
        var labelToReplace = this.popCueFromMap(event);
        if (labelToReplace) {
            this.addCueToMap(event, label);
            return labelToReplace;
        }
        return undefined;
    };
    ActiveSubtitleManager.prototype.addCueToMap = function (event, label) {
        var id = ActiveSubtitleManager.calculateId(event);
        // Create array for id if it does not exist
        this.activeSubtitleCueMap[id] = this.activeSubtitleCueMap[id] || [];
        // Add cue
        this.activeSubtitleCueMap[id].push({ event: event, label: label });
        this.activeSubtitleCueCount++;
    };
    ActiveSubtitleManager.prototype.popCueFromMap = function (event) {
        var id = ActiveSubtitleManager.calculateId(event);
        var activeSubtitleCues = this.activeSubtitleCueMap[id];
        if (activeSubtitleCues && activeSubtitleCues.length > 0) {
            // Remove cue
            /* We apply the FIFO approach here and remove the oldest cue from the associated id. When there are multiple cues
             * with the same id, there is no way to know which one of the cues is to be deleted, so we just hope that FIFO
             * works fine. Theoretically it can happen that two cues with colliding ids are removed at different times, in
             * the wrong order. This rare case has yet to be observed. If it ever gets an issue, we can take the unstable
             * cue end time (which can change between CueEnter and CueExit IN CueUpdate) and use it as an
             * additional hint to try and remove the correct one of the colliding cues.
             */
            var activeSubtitleCue = activeSubtitleCues.shift();
            this.activeSubtitleCueCount--;
            return activeSubtitleCue.label;
        }
    };
    /**
     * Removes all active cues which don't enclose the given time
     * @param time the time for which subtitles should remain
     */
    ActiveSubtitleManager.prototype.clearInactiveCues = function (time) {
        var _this = this;
        var removedCues = [];
        Object.keys(this.activeSubtitleCueMap).forEach(function (key) {
            var activeCues = _this.activeSubtitleCueMap[key];
            activeCues.forEach(function (cue) {
                if (time < cue.event.start || time > cue.event.end) {
                    _this.popCueFromMap(cue.event);
                    removedCues.push(cue);
                }
            });
        });
        return removedCues;
    };
    ActiveSubtitleManager.generateImageTagText = function (imageData) {
        if (!imageData) {
            return;
        }
        var imgTag = new dom_1.DOM('img', {
            src: imageData,
        });
        imgTag.css('width', '100%');
        return imgTag.get(0).outerHTML; // return the html as string
    };
    /**
     * Returns the label associated with an already added cue.
     * @param event
     * @return {SubtitleLabel}
     */
    ActiveSubtitleManager.prototype.getCues = function (event) {
        var id = ActiveSubtitleManager.calculateId(event);
        var activeSubtitleCues = this.activeSubtitleCueMap[id];
        if (activeSubtitleCues && activeSubtitleCues.length > 0) {
            return activeSubtitleCues.map(function (cue) { return cue.label; });
        }
    };
    /**
     * Removes the subtitle cue from the manager and returns the label that should be removed from the subtitle overlay,
     * or null if there is no associated label existing (e.g. because all labels have been {@link #clear cleared}.
     * @param event
     * @return {SubtitleLabel|null}
     */
    ActiveSubtitleManager.prototype.cueExit = function (event) {
        return this.popCueFromMap(event);
    };
    Object.defineProperty(ActiveSubtitleManager.prototype, "cueCount", {
        /**
         * Returns the number of active subtitle cues.
         * @return {number}
         */
        get: function () {
            // We explicitly count the cues to save an Array.reduce on every cueCount call (which can happen frequently)
            return this.activeSubtitleCueCount;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ActiveSubtitleManager.prototype, "hasCues", {
        /**
         * Returns true if there are active subtitle cues, else false.
         * @return {boolean}
         */
        get: function () {
            return this.cueCount > 0;
        },
        enumerable: false,
        configurable: true
    });
    /**
     * Removes all subtitle cues from the manager.
     */
    ActiveSubtitleManager.prototype.clear = function () {
        this.activeSubtitleCueMap = {};
        this.activeSubtitleCueCount = 0;
    };
    return ActiveSubtitleManager;
}());
var SubtitleRegionContainerManager = /** @class */ (function () {
    /**
     * @param subtitleOverlay Reference to the subtitle overlay for adding and removing the containers.
     */
    function SubtitleRegionContainerManager(subtitleOverlay) {
        this.subtitleOverlay = subtitleOverlay;
        this.subtitleRegionContainers = {};
        this.subtitleOverlay = subtitleOverlay;
    }
    SubtitleRegionContainerManager.prototype.getRegion = function (label) {
        if (label.vtt) {
            return {
                regionContainerId: label.vtt.region && label.vtt.region.id ? label.vtt.region.id : 'vtt',
                regionName: 'vtt',
            };
        }
        return {
            regionContainerId: label.region || 'default',
            regionName: label.region || 'default',
        };
    };
    /**
     * Creates and wraps a subtitle label into a container div based on the subtitle region.
     * If the subtitle has positioning information it is added to the container.
     * @param label The subtitle label to wrap
     */
    SubtitleRegionContainerManager.prototype.addLabel = function (label, overlaySize) {
        var _a = this.getRegion(label), regionContainerId = _a.regionContainerId, regionName = _a.regionName;
        var cssClasses = ["subtitle-position-".concat(regionName)];
        if (label.vtt && label.vtt.region) {
            cssClasses.push("vtt-region-".concat(label.vtt.region.id));
        }
        if (!this.subtitleRegionContainers[regionContainerId]) {
            var regionContainer = new SubtitleRegionContainer({
                cssClasses: cssClasses,
            });
            this.subtitleRegionContainers[regionContainerId] = regionContainer;
            if (label.regionStyle) {
                regionContainer.getDomElement().attr('style', label.regionStyle);
            }
            else if (label.vtt && !label.vtt.region) {
                /**
                 * If there is no region present to wrap the Cue Box, the Cue box becomes the
                 * region itself. Therefore the positioning values have to come from the box.
                 */
                regionContainer.getDomElement().css('position', 'static');
            }
            else {
                // getDomElement needs to be called at least once to ensure the component exists
                regionContainer.getDomElement();
            }
            for (var regionContainerId_1 in this.subtitleRegionContainers) {
                this.subtitleOverlay.addComponent(this.subtitleRegionContainers[regionContainerId_1]);
            }
        }
        this.subtitleRegionContainers[regionContainerId].addLabel(label, overlaySize);
    };
    SubtitleRegionContainerManager.prototype.replaceLabel = function (previousLabel, newLabel) {
        var regionContainerId = this.getRegion(previousLabel).regionContainerId;
        this.subtitleRegionContainers[regionContainerId].removeLabel(previousLabel);
        this.subtitleRegionContainers[regionContainerId].addLabel(newLabel);
    };
    /**
     * Removes a subtitle label from a container.
     */
    SubtitleRegionContainerManager.prototype.removeLabel = function (label) {
        var regionContainerId;
        if (label.vtt) {
            regionContainerId = label.vtt.region && label.vtt.region.id ? label.vtt.region.id : 'vtt';
        }
        else {
            regionContainerId = label.region || 'default';
        }
        this.subtitleRegionContainers[regionContainerId].removeLabel(label);
        // Remove container if no more labels are displayed
        if (this.subtitleRegionContainers[regionContainerId].isEmpty()) {
            this.subtitleOverlay.removeComponent(this.subtitleRegionContainers[regionContainerId]);
            delete this.subtitleRegionContainers[regionContainerId];
        }
    };
    /**
     * Removes all subtitle containers.
     */
    SubtitleRegionContainerManager.prototype.clear = function () {
        for (var regionName in this.subtitleRegionContainers) {
            this.subtitleOverlay.removeComponent(this.subtitleRegionContainers[regionName]);
        }
        this.subtitleRegionContainers = {};
    };
    return SubtitleRegionContainerManager;
}());
exports.SubtitleRegionContainerManager = SubtitleRegionContainerManager;
var SubtitleRegionContainer = /** @class */ (function (_super) {
    __extends(SubtitleRegionContainer, _super);
    function SubtitleRegionContainer(config) {
        if (config === void 0) { config = {}; }
        var _this = _super.call(this, config) || this;
        _this.labelCount = 0;
        _this.config = _this.mergeConfig(config, {
            cssClass: 'subtitle-region-container',
        }, _this.config);
        return _this;
    }
    SubtitleRegionContainer.prototype.addLabel = function (labelToAdd, overlaySize) {
        this.labelCount++;
        if (labelToAdd.vtt) {
            if (labelToAdd.vtt.region && overlaySize) {
                vttutils_1.VttUtils.setVttRegionStyles(this, labelToAdd.vtt.region, overlaySize);
            }
            vttutils_1.VttUtils.setVttCueBoxStyles(labelToAdd, overlaySize);
        }
        this.addComponent(labelToAdd);
        this.updateComponents();
    };
    SubtitleRegionContainer.prototype.removeLabel = function (labelToRemove) {
        this.labelCount--;
        this.removeComponent(labelToRemove);
        this.updateComponents();
    };
    SubtitleRegionContainer.prototype.isEmpty = function () {
        return this.labelCount === 0;
    };
    return SubtitleRegionContainer;
}(container_1.Container));
exports.SubtitleRegionContainer = SubtitleRegionContainer;

},{"../dom":82,"../eventdispatcher":84,"../localization/i18n":89,"../vttutils":117,"./container":19,"./controlbar":20,"./label":28}],55:[function(require,module,exports){
"use strict";
var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        if (typeof b !== "function" && b !== null)
            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
exports.SubtitleSelectBox = void 0;
var selectbox_1 = require("./selectbox");
var subtitleutils_1 = require("../subtitleutils");
var i18n_1 = require("../localization/i18n");
/**
 * A select box providing a selection between available subtitle and caption tracks.
 *
 * @category Components
 */
var SubtitleSelectBox = /** @class */ (function (_super) {
    __extends(SubtitleSelectBox, _super);
    function SubtitleSelectBox(config) {
        if (config === void 0) { config = {}; }
        var _this = _super.call(this, config) || this;
        _this.config = _this.mergeConfig(config, {
            cssClasses: ['ui-subtitleselectbox'],
            ariaLabel: i18n_1.i18n.getLocalizer('subtitle.select'),
        }, _this.config);
        return _this;
    }
    SubtitleSelectBox.prototype.configure = function (player, uimanager) {
        _super.prototype.configure.call(this, player, uimanager);
        new subtitleutils_1.SubtitleSwitchHandler(player, this, uimanager);
    };
    return SubtitleSelectBox;
}(selectbox_1.SelectBox));
exports.SubtitleSelectBox = SubtitleSelectBox;

},{"../localization/i18n":89,"../subtitleutils":110,"./selectbox":44}],56:[function(require,module,exports){
"use strict";
var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        if (typeof b !== "function" && b !== null)
            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
exports.BackgroundColorSelectBox = void 0;
var subtitlesettingselectbox_1 = require("./subtitlesettingselectbox");
var i18n_1 = require("../../localization/i18n");
/**
 * A select box providing a selection of different background colors.
 *
 * @category Components
 */
var BackgroundColorSelectBox = /** @class */ (function (_super) {
    __extends(BackgroundColorSelectBox, _super);
    function BackgroundColorSelectBox(config) {
        var _this = _super.call(this, config) || this;
        _this.config = _this.mergeConfig(config, {
            cssClasses: ['ui-subtitlesettingsbackgroundcolorselectbox'],
        }, _this.config);
        return _this;
    }
    BackgroundColorSelectBox.prototype.configure = function (player, uimanager) {
        var _this = this;
        _super.prototype.configure.call(this, player, uimanager);
        this.addItem(null, i18n_1.i18n.getLocalizer('default'));
        this.addItem('white', i18n_1.i18n.getLocalizer('colors.white'));
        this.addItem('black', i18n_1.i18n.getLocalizer('colors.black'));
        this.addItem('red', i18n_1.i18n.getLocalizer('colors.red'));
        this.addItem('green', i18n_1.i18n.getLocalizer('colors.green'));
        this.addItem('blue', i18n_1.i18n.getLocalizer('colors.blue'));
        this.addItem('cyan', i18n_1.i18n.getLocalizer('colors.cyan'));
        this.addItem('yellow', i18n_1.i18n.getLocalizer('colors.yellow'));
        this.addItem('magenta', i18n_1.i18n.getLocalizer('colors.magenta'));
        var setColorAndOpacity = function () {
            if (_this.settingsManager.backgroundColor.isSet() && _this.settingsManager.backgroundOpacity.isSet()) {
                _this.toggleOverlayClass('bgcolor-' + _this.settingsManager.backgroundColor.value + _this.settingsManager.backgroundOpacity.value);
            }
            else {
                _this.toggleOverlayClass(null);
            }
        };
        this.onItemSelected.subscribe(function (sender, key) {
            _this.settingsManager.backgroundColor.value = key;
        });
        this.settingsManager.backgroundColor.onChanged.subscribe(function (sender, property) {
            // Color and opacity go together, so we need to...
            if (!_this.settingsManager.backgroundColor.isSet()) {
                // ... clear the opacity when the color is not set
                _this.settingsManager.backgroundOpacity.clear();
            }
            else if (!_this.settingsManager.backgroundOpacity.isSet()) {
                // ... set an opacity when the color is set
                _this.settingsManager.backgroundOpacity.value = '100';
            }
            _this.selectItem(property.value);
            setColorAndOpacity();
        });
        this.settingsManager.backgroundOpacity.onChanged.subscribe(function () {
            setColorAndOpacity();
        });
        // Load initial value
        if (this.settingsManager.backgroundColor.isSet()) {
            this.selectItem(this.settingsManager.backgroundColor.value);
        }
    };
    return BackgroundColorSelectBox;
}(subtitlesettingselectbox_1.SubtitleSettingSelectBox));
exports.BackgroundColorSelectBox = BackgroundColorSelectBox;

},{"../../localization/i18n":89,"./subtitlesettingselectbox":63}],57:[function(require,module,exports){
"use strict";
var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        if (typeof b !== "function" && b !== null)
            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
exports.BackgroundOpacitySelectBox = void 0;
var subtitlesettingselectbox_1 = require("./subtitlesettingselectbox");
var i18n_1 = require("../../localization/i18n");
/**
 * A select box providing a selection of different background opacity.
 *
 * @category Components
 */
var BackgroundOpacitySelectBox = /** @class */ (function (_super) {
    __extends(BackgroundOpacitySelectBox, _super);
    function BackgroundOpacitySelectBox(config) {
        var _this = _super.call(this, config) || this;
        _this.config = _this.mergeConfig(config, {
            cssClasses: ['ui-subtitlesettingsbackgroundopacityselectbox'],
        }, _this.config);
        return _this;
    }
    BackgroundOpacitySelectBox.prototype.configure = function (player, uimanager) {
        var _this = this;
        _super.prototype.configure.call(this, player, uimanager);
        this.addItem(null, i18n_1.i18n.getLocalizer('default'));
        this.addItem('100', i18n_1.i18n.getLocalizer('percent', { value: 100 }));
        this.addItem('75', i18n_1.i18n.getLocalizer('percent', { value: 75 }));
        this.addItem('50', i18n_1.i18n.getLocalizer('percent', { value: 50 }));
        this.addItem('25', i18n_1.i18n.getLocalizer('percent', { value: 25 }));
        this.addItem('0', i18n_1.i18n.getLocalizer('percent', { value: 0 }));
        this.onItemSelected.subscribe(function (sender, key) {
            _this.settingsManager.backgroundOpacity.value = key;
            // Color and opacity go together, so we need to...
            if (!_this.settingsManager.backgroundOpacity.isSet()) {
                // ... clear the color when the opacity is not set
                _this.settingsManager.backgroundColor.clear();
            }
            else if (!_this.settingsManager.backgroundColor.isSet()) {
                // ... set a color when the opacity is set
                _this.settingsManager.backgroundColor.value = 'black';
            }
        });
        // Update selected item when value is set from somewhere else
        this.settingsManager.backgroundOpacity.onChanged.subscribe(function (sender, property) {
            _this.selectItem(property.value);
        });
        // Load initial value
        if (this.settingsManager.backgroundOpacity.isSet()) {
            this.selectItem(this.settingsManager.backgroundOpacity.value);
        }
    };
    return BackgroundOpacitySelectBox;
}(subtitlesettingselectbox_1.SubtitleSettingSelectBox));
exports.BackgroundOpacitySelectBox = BackgroundOpacitySelectBox;

},{"../../localization/i18n":89,"./subtitlesettingselectbox":63}],58:[function(require,module,exports){
"use strict";
var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        if (typeof b !== "function" && b !== null)
            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
exports.CharacterEdgeSelectBox = void 0;
var subtitlesettingselectbox_1 = require("./subtitlesettingselectbox");
var i18n_1 = require("../../localization/i18n");
/**
 * A select box providing a selection of different character edge.
 *
 * @category Components
 */
var CharacterEdgeSelectBox = /** @class */ (function (_super) {
    __extends(CharacterEdgeSelectBox, _super);
    function CharacterEdgeSelectBox(config) {
        var _this = _super.call(this, config) || this;
        _this.config = _this.mergeConfig(config, {
            cssClasses: ['ui-subtitlesettingscharacteredgeselectbox'],
        }, _this.config);
        return _this;
    }
    CharacterEdgeSelectBox.prototype.configure = function (player, uimanager) {
        var _this = this;
        _super.prototype.configure.call(this, player, uimanager);
        this.addItem(null, i18n_1.i18n.getLocalizer('default'));
        this.addItem('raised', i18n_1.i18n.getLocalizer('settings.subtitles.characterEdge.raised'));
        this.addItem('depressed', i18n_1.i18n.getLocalizer('settings.subtitles.characterEdge.depressed'));
        this.addItem('uniform', i18n_1.i18n.getLocalizer('settings.subtitles.characterEdge.uniform'));
        this.addItem('dropshadowed', i18n_1.i18n.getLocalizer('settings.subtitles.characterEdge.dropshadowed'));
        this.settingsManager.characterEdge.onChanged.subscribe(function (sender, property) {
            if (property.isSet()) {
                _this.toggleOverlayClass('characteredge-' + property.value);
            }
            else {
                _this.toggleOverlayClass(null);
            }
            // Select the item in case the property was set from outside
            _this.selectItem(property.value);
        });
        this.onItemSelected.subscribe(function (sender, key) {
            _this.settingsManager.characterEdge.value = key;
        });
        // Load initial value
        if (this.settingsManager.characterEdge.isSet()) {
            this.selectItem(this.settingsManager.characterEdge.value);
        }
    };
    return CharacterEdgeSelectBox;
}(subtitlesettingselectbox_1.SubtitleSettingSelectBox));
exports.CharacterEdgeSelectBox = CharacterEdgeSelectBox;

},{"../../localization/i18n":89,"./subtitlesettingselectbox":63}],59:[function(require,module,exports){
"use strict";
var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        if (typeof b !== "function" && b !== null)
            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
exports.FontColorSelectBox = void 0;
var subtitlesettingselectbox_1 = require("./subtitlesettingselectbox");
var i18n_1 = require("../../localization/i18n");
/**
 * A select box providing a selection of different font colors.
 *
 * @category Components
 */
var FontColorSelectBox = /** @class */ (function (_super) {
    __extends(FontColorSelectBox, _super);
    function FontColorSelectBox(config) {
        var _this = _super.call(this, config) || this;
        _this.config = _this.mergeConfig(config, {
            cssClasses: ['ui-subtitlesettingsfontcolorselectbox'],
        }, _this.config);
        return _this;
    }
    FontColorSelectBox.prototype.configure = function (player, uimanager) {
        var _this = this;
        _super.prototype.configure.call(this, player, uimanager);
        this.addItem(null, i18n_1.i18n.getLocalizer('default'));
        this.addItem('white', i18n_1.i18n.getLocalizer('colors.white'));
        this.addItem('black', i18n_1.i18n.getLocalizer('colors.black'));
        this.addItem('red', i18n_1.i18n.getLocalizer('colors.red'));
        this.addItem('green', i18n_1.i18n.getLocalizer('colors.green'));
        this.addItem('blue', i18n_1.i18n.getLocalizer('colors.blue'));
        this.addItem('cyan', i18n_1.i18n.getLocalizer('colors.cyan'));
        this.addItem('yellow', i18n_1.i18n.getLocalizer('colors.yellow'));
        this.addItem('magenta', i18n_1.i18n.getLocalizer('colors.magenta'));
        var setColorAndOpacity = function () {
            if (_this.settingsManager.fontColor.isSet() && _this.settingsManager.fontOpacity.isSet()) {
                _this.toggleOverlayClass('fontcolor-' + _this.settingsManager.fontColor.value + _this.settingsManager.fontOpacity.value);
            }
            else {
                _this.toggleOverlayClass(null);
            }
        };
        this.onItemSelected.subscribe(function (sender, key) {
            _this.settingsManager.fontColor.value = key;
        });
        this.settingsManager.fontColor.onChanged.subscribe(function (sender, property) {
            // Color and opacity go together, so we need to...
            if (!_this.settingsManager.fontColor.isSet()) {
                // ... clear the opacity when the color is not set
                _this.settingsManager.fontOpacity.clear();
            }
            else if (!_this.settingsManager.fontOpacity.isSet()) {
                // ... set an opacity when the color is set
                _this.settingsManager.fontOpacity.value = '100';
            }
            _this.selectItem(property.value);
            setColorAndOpacity();
        });
        this.settingsManager.fontOpacity.onChanged.subscribe(function () {
            setColorAndOpacity();
        });
        // Load initial value
        if (this.settingsManager.fontColor.isSet()) {
            this.selectItem(this.settingsManager.fontColor.value);
        }
    };
    return FontColorSelectBox;
}(subtitlesettingselectbox_1.SubtitleSettingSelectBox));
exports.FontColorSelectBox = FontColorSelectBox;

},{"../../localization/i18n":89,"./subtitlesettingselectbox":63}],60:[function(require,module,exports){
"use strict";
var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        if (typeof b !== "function" && b !== null)
            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
exports.FontFamilySelectBox = void 0;
var subtitlesettingselectbox_1 = require("./subtitlesettingselectbox");
var i18n_1 = require("../../localization/i18n");
/**
 * A select box providing a selection of different font family.
 *
 * @category Components
 */
var FontFamilySelectBox = /** @class */ (function (_super) {
    __extends(FontFamilySelectBox, _super);
    function FontFamilySelectBox(config) {
        var _this = _super.call(this, config) || this;
        _this.config = _this.mergeConfig(config, {
            cssClasses: ['ui-subtitlesettingsfontfamilyselectbox'],
        }, _this.config);
        return _this;
    }
    FontFamilySelectBox.prototype.configure = function (player, uimanager) {
        var _this = this;
        _super.prototype.configure.call(this, player, uimanager);
        this.addItem(null, i18n_1.i18n.getLocalizer('default'));
        this.addItem('monospacedserif', i18n_1.i18n.getLocalizer('settings.subtitles.font.family.monospacedserif'));
        this.addItem('proportionalserif', i18n_1.i18n.getLocalizer('settings.subtitles.font.family.proportionalserif'));
        this.addItem('monospacedsansserif', i18n_1.i18n.getLocalizer('settings.subtitles.font.family.monospacedsansserif'));
        this.addItem('proportionalsansserif', i18n_1.i18n.getLocalizer('settings.subtitles.font.family.proportionalsansserif'));
        this.addItem('casual', i18n_1.i18n.getLocalizer('settings.subtitles.font.family.casual'));
        this.addItem('cursive', i18n_1.i18n.getLocalizer('settings.subtitles.font.family.cursive'));
        this.addItem('smallcapital', i18n_1.i18n.getLocalizer('settings.subtitles.font.family.smallcapital'));
        this.settingsManager.fontFamily.onChanged.subscribe(function (sender, property) {
            if (property.isSet()) {
                _this.toggleOverlayClass('fontfamily-' + property.value);
            }
            else {
                _this.toggleOverlayClass(null);
            }
            // Select the item in case the property was set from outside
            _this.selectItem(property.value);
        });
        this.onItemSelected.subscribe(function (sender, key) {
            _this.settingsManager.fontFamily.value = key;
        });
        // Load initial value
        if (this.settingsManager.fontFamily.isSet()) {
            this.selectItem(this.settingsManager.fontFamily.value);
        }
    };
    return FontFamilySelectBox;
}(subtitlesettingselectbox_1.SubtitleSettingSelectBox));
exports.FontFamilySelectBox = FontFamilySelectBox;

},{"../../localization/i18n":89,"./subtitlesettingselectbox":63}],61:[function(require,module,exports){
"use strict";
var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        if (typeof b !== "function" && b !== null)
            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
exports.FontOpacitySelectBox = void 0;
var subtitlesettingselectbox_1 = require("./subtitlesettingselectbox");
var i18n_1 = require("../../localization/i18n");
/**
 * A select box providing a selection of different font colors.
 *
 * @category Components
 */
var FontOpacitySelectBox = /** @class */ (function (_super) {
    __extends(FontOpacitySelectBox, _super);
    function FontOpacitySelectBox(config) {
        var _this = _super.call(this, config) || this;
        _this.config = _this.mergeConfig(config, {
            cssClasses: ['ui-subtitlesettingsfontopacityselectbox'],
        }, _this.config);
        return _this;
    }
    FontOpacitySelectBox.prototype.configure = function (player, uimanager) {
        var _this = this;
        _super.prototype.configure.call(this, player, uimanager);
        this.addItem(null, i18n_1.i18n.getLocalizer('default'));
        this.addItem('100', i18n_1.i18n.getLocalizer('percent', { value: 100 }));
        this.addItem('75', i18n_1.i18n.getLocalizer('percent', { value: 75 }));
        this.addItem('50', i18n_1.i18n.getLocalizer('percent', { value: 50 }));
        this.addItem('25', i18n_1.i18n.getLocalizer('percent', { value: 25 }));
        this.onItemSelected.subscribe(function (sender, key) {
            _this.settingsManager.fontOpacity.value = key;
            // Color and opacity go together, so we need to...
            if (!_this.settingsManager.fontOpacity.isSet()) {
                // ... clear the color when the opacity is not set
                _this.settingsManager.fontColor.clear();
            }
            else if (!_this.settingsManager.fontColor.isSet()) {
                // ... set a color when the opacity is set
                _this.settingsManager.fontColor.value = 'white';
            }
        });
        // Update selected item when value is set from somewhere else
        this.settingsManager.fontOpacity.onChanged.subscribe(function (sender, property) {
            _this.selectItem(property.value);
        });
        // Load initial value
        if (this.settingsManager.fontOpacity.isSet()) {
            this.selectItem(this.settingsManager.fontOpacity.value);
        }
    };
    return FontOpacitySelectBox;
}(subtitlesettingselectbox_1.SubtitleSettingSelectBox));
exports.FontOpacitySelectBox = FontOpacitySelectBox;

},{"../../localization/i18n":89,"./subtitlesettingselectbox":63}],62:[function(require,module,exports){
"use strict";
var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        if (typeof b !== "function" && b !== null)
            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
exports.FontSizeSelectBox = void 0;
var subtitlesettingselectbox_1 = require("./subtitlesettingselectbox");
var i18n_1 = require("../../localization/i18n");
/**
 * A select box providing a selection of different font colors.
 *
 * @category Components
 */
var FontSizeSelectBox = /** @class */ (function (_super) {
    __extends(FontSizeSelectBox, _super);
    function FontSizeSelectBox(config) {
        var _this = _super.call(this, config) || this;
        _this.config = _this.mergeConfig(config, {
            cssClasses: ['ui-subtitlesettingsfontsizeselectbox'],
        }, _this.config);
        return _this;
    }
    FontSizeSelectBox.prototype.configure = function (player, uimanager) {
        var _this = this;
        _super.prototype.configure.call(this, player, uimanager);
        this.addItem(null, i18n_1.i18n.getLocalizer('default'));
        this.addItem('50', i18n_1.i18n.getLocalizer('percent', { value: 50 }));
        this.addItem('75', i18n_1.i18n.getLocalizer('percent', { value: 75 }));
        this.addItem('100', i18n_1.i18n.getLocalizer('percent', { value: 100 }));
        this.addItem('150', i18n_1.i18n.getLocalizer('percent', { value: 150 }));
        this.addItem('200', i18n_1.i18n.getLocalizer('percent', { value: 200 }));
        this.addItem('300', i18n_1.i18n.getLocalizer('percent', { value: 300 }));
        this.addItem('400', i18n_1.i18n.getLocalizer('percent', { value: 400 }));
        this.settingsManager.fontSize.onChanged.subscribe(function (sender, property) {
            if (property.isSet()) {
                _this.toggleOverlayClass('fontsize-' + property.value);
            }
            else {
                _this.toggleOverlayClass(null);
            }
            // Select the item in case the property was set from outside
            _this.selectItem(property.value);
        });
        this.onItemSelected.subscribe(function (sender, key) {
            _this.settingsManager.fontSize.value = key;
        });
        // Load initial value
        if (this.settingsManager.fontSize.isSet()) {
            this.selectItem(this.settingsManager.fontSize.value);
        }
    };
    return FontSizeSelectBox;
}(subtitlesettingselectbox_1.SubtitleSettingSelectBox));
exports.FontSizeSelectBox = FontSizeSelectBox;

},{"../../localization/i18n":89,"./subtitlesettingselectbox":63}],63:[function(require,module,exports){
"use strict";
var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        if (typeof b !== "function" && b !== null)
            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
exports.SubtitleSettingSelectBox = void 0;
var selectbox_1 = require("../selectbox");
/**
 * Base class for all subtitles settings select box
 *
 * @category Components
 **/
var SubtitleSettingSelectBox = /** @class */ (function (_super) {
    __extends(SubtitleSettingSelectBox, _super);
    function SubtitleSettingSelectBox(config) {
        var _this = _super.call(this, config) || this;
        _this.overlay = config.overlay;
        return _this;
    }
    /**
     * Removes a previously set class and adds the passed in class.
     * @param cssClass The new class to replace the previous class with or null to just remove the previous class
     */
    SubtitleSettingSelectBox.prototype.toggleOverlayClass = function (cssClass) {
        // Remove previous class if existing
        if (this.currentCssClass) {
            this.overlay.getDomElement().removeClass(this.currentCssClass);
            this.currentCssClass = null;
        }
        // Add new class if specified. If the new class is null, we don't add anything.
        if (cssClass) {
            this.currentCssClass = this.prefixCss(cssClass);
            this.overlay.getDomElement().addClass(this.currentCssClass);
        }
    };
    SubtitleSettingSelectBox.prototype.configure = function (player, uimanager) {
        this.settingsManager = uimanager.getSubtitleSettingsManager();
    };
    return SubtitleSettingSelectBox;
}(selectbox_1.SelectBox));
exports.SubtitleSettingSelectBox = SubtitleSettingSelectBox;

},{"../selectbox":44}],64:[function(require,module,exports){
"use strict";
var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        if (typeof b !== "function" && b !== null)
            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
exports.SubtitleSettingsLabel = void 0;
var container_1 = require("../container");
var dom_1 = require("../../dom");
var i18n_1 = require("../../localization/i18n");
/**
 * @category Components
 */
var SubtitleSettingsLabel = /** @class */ (function (_super) {
    __extends(SubtitleSettingsLabel, _super);
    function SubtitleSettingsLabel(config) {
        var _this = _super.call(this, config) || this;
        _this.opener = config.opener;
        _this.text = config.text;
        _this.for = config.for;
        _this.config = _this.mergeConfig(config, {
            cssClass: 'ui-label',
            components: [
                _this.opener,
            ],
        }, _this.config);
        return _this;
    }
    SubtitleSettingsLabel.prototype.toDomElement = function () {
        var labelElement = new dom_1.DOM('label', {
            'id': this.config.id,
            'class': this.getCssClasses(),
            'for': this.for,
        }, this).append(new dom_1.DOM('span', {}).html(i18n_1.i18n.performLocalization(this.text)), this.opener.getDomElement());
        return labelElement;
    };
    return SubtitleSettingsLabel;
}(container_1.Container));
exports.SubtitleSettingsLabel = SubtitleSettingsLabel;

},{"../../dom":82,"../../localization/i18n":89,"../container":19}],65:[function(require,module,exports){
"use strict";
var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        if (typeof b !== "function" && b !== null)
            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
exports.SubtitleSettingsProperty = exports.SubtitleSettingsManager = void 0;
var storageutils_1 = require("../../storageutils");
var component_1 = require("../component");
var eventdispatcher_1 = require("../../eventdispatcher");
/**
 * @category Utils
 */
var SubtitleSettingsManager = /** @class */ (function () {
    function SubtitleSettingsManager() {
        this._properties = {
            fontColor: new SubtitleSettingsProperty(this),
            fontOpacity: new SubtitleSettingsProperty(this),
            fontFamily: new SubtitleSettingsProperty(this),
            fontSize: new SubtitleSettingsProperty(this),
            characterEdge: new SubtitleSettingsProperty(this),
            backgroundColor: new SubtitleSettingsProperty(this),
            backgroundOpacity: new SubtitleSettingsProperty(this),
            windowColor: new SubtitleSettingsProperty(this),
            windowOpacity: new SubtitleSettingsProperty(this),
        };
        this.userSettings = {};
        this.localStorageKey =
            DummyComponent.instance().prefixCss('subtitlesettings');
    }
    SubtitleSettingsManager.prototype.reset = function () {
        for (var propertyName in this._properties) {
            this._properties[propertyName].clear();
        }
    };
    Object.defineProperty(SubtitleSettingsManager.prototype, "fontColor", {
        get: function () {
            return this._properties.fontColor;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(SubtitleSettingsManager.prototype, "fontOpacity", {
        get: function () {
            return this._properties.fontOpacity;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(SubtitleSettingsManager.prototype, "fontFamily", {
        get: function () {
            return this._properties.fontFamily;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(SubtitleSettingsManager.prototype, "fontSize", {
        get: function () {
            return this._properties.fontSize;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(SubtitleSettingsManager.prototype, "characterEdge", {
        get: function () {
            return this._properties.characterEdge;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(SubtitleSettingsManager.prototype, "backgroundColor", {
        get: function () {
            return this._properties.backgroundColor;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(SubtitleSettingsManager.prototype, "backgroundOpacity", {
        get: function () {
            return this._properties.backgroundOpacity;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(SubtitleSettingsManager.prototype, "windowColor", {
        get: function () {
            return this._properties.windowColor;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(SubtitleSettingsManager.prototype, "windowOpacity", {
        get: function () {
            return this._properties.windowOpacity;
        },
        enumerable: false,
        configurable: true
    });
    SubtitleSettingsManager.prototype.initialize = function () {
        var _this = this;
        var _loop_1 = function (propertyName) {
            this_1._properties[propertyName].onChanged.subscribe(function (sender, property) {
                if (property.isSet()) {
                    _this.userSettings[propertyName] = property.value;
                }
                else {
                    // Delete the property from the settings object if unset to avoid serialization of null values
                    delete _this.userSettings[propertyName];
                }
                // Save the settings object when a property has changed
                _this.save();
            });
        };
        var this_1 = this;
        for (var propertyName in this._properties) {
            _loop_1(propertyName);
        }
        this.load();
    };
    /**
     * Saves the settings to local storage.
     */
    SubtitleSettingsManager.prototype.save = function () {
        storageutils_1.StorageUtils.setObject(this.localStorageKey, this.userSettings);
    };
    /**
     * Loads the settings from local storage
     */
    SubtitleSettingsManager.prototype.load = function () {
        this.userSettings =
            storageutils_1.StorageUtils.getObject(this.localStorageKey) || {};
        // Apply the loaded settings
        for (var property in this.userSettings) {
            this._properties[property].value = this.userSettings[property];
        }
    };
    return SubtitleSettingsManager;
}());
exports.SubtitleSettingsManager = SubtitleSettingsManager;
/**
 * A dummy component whose sole purpose is to expose the {@link #prefixCss} method to the
 * {@link SubtitleSettingsManager}.
 */
var DummyComponent = /** @class */ (function (_super) {
    __extends(DummyComponent, _super);
    function DummyComponent() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    DummyComponent.instance = function () {
        if (!DummyComponent._instance) {
            DummyComponent._instance = new DummyComponent();
        }
        return DummyComponent._instance;
    };
    DummyComponent.prototype.prefixCss = function (cssClassOrId) {
        return _super.prototype.prefixCss.call(this, cssClassOrId);
    };
    return DummyComponent;
}(component_1.Component));
var SubtitleSettingsProperty = /** @class */ (function () {
    function SubtitleSettingsProperty(manager) {
        this._manager = manager;
        this._onChanged = new eventdispatcher_1.EventDispatcher();
    }
    SubtitleSettingsProperty.prototype.isSet = function () {
        return this._value != null;
    };
    SubtitleSettingsProperty.prototype.clear = function () {
        this._value = null;
        this.onChangedEvent(null);
    };
    Object.defineProperty(SubtitleSettingsProperty.prototype, "value", {
        get: function () {
            return this._value;
        },
        set: function (value) {
            if (typeof value === 'string' && value === 'null') {
                value = null;
            }
            this._value = value;
            this.onChangedEvent(value);
        },
        enumerable: false,
        configurable: true
    });
    SubtitleSettingsProperty.prototype.onChangedEvent = function (value) {
        this._onChanged.dispatch(this._manager, this);
    };
    Object.defineProperty(SubtitleSettingsProperty.prototype, "onChanged", {
        get: function () {
            return this._onChanged.getEvent();
        },
        enumerable: false,
        configurable: true
    });
    return SubtitleSettingsProperty;
}());
exports.SubtitleSettingsProperty = SubtitleSettingsProperty;

},{"../../eventdispatcher":84,"../../storageutils":108,"../component":18}],66:[function(require,module,exports){
"use strict";
var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        if (typeof b !== "function" && b !== null)
            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
exports.SubtitleSettingsPanelPage = void 0;
var settingspanelpage_1 = require("../settingspanelpage");
var fontsizeselectbox_1 = require("./fontsizeselectbox");
var fontfamilyselectbox_1 = require("./fontfamilyselectbox");
var fontcolorselectbox_1 = require("./fontcolorselectbox");
var fontopacityselectbox_1 = require("./fontopacityselectbox");
var characteredgeselectbox_1 = require("./characteredgeselectbox");
var backgroundcolorselectbox_1 = require("./backgroundcolorselectbox");
var backgroundopacityselectbox_1 = require("./backgroundopacityselectbox");
var windowcolorselectbox_1 = require("./windowcolorselectbox");
var windowopacityselectbox_1 = require("./windowopacityselectbox");
var subtitlesettingsresetbutton_1 = require("./subtitlesettingsresetbutton");
var settingspanelpagebackbutton_1 = require("../settingspanelpagebackbutton");
var settingspanelitem_1 = require("../settingspanelitem");
var i18n_1 = require("../../localization/i18n");
/**
 * @category Components
 */
var SubtitleSettingsPanelPage = /** @class */ (function (_super) {
    __extends(SubtitleSettingsPanelPage, _super);
    function SubtitleSettingsPanelPage(config) {
        var _this = _super.call(this, config) || this;
        _this.overlay = config.overlay;
        _this.settingsPanel = config.settingsPanel;
        _this.config = _this.mergeConfig(config, {
            components: [
                new settingspanelitem_1.SettingsPanelItem(i18n_1.i18n.getLocalizer('settings.subtitles.font.size'), new fontsizeselectbox_1.FontSizeSelectBox({
                    overlay: _this.overlay,
                })),
                new settingspanelitem_1.SettingsPanelItem(i18n_1.i18n.getLocalizer('settings.subtitles.font.family'), new fontfamilyselectbox_1.FontFamilySelectBox({
                    overlay: _this.overlay,
                })),
                new settingspanelitem_1.SettingsPanelItem(i18n_1.i18n.getLocalizer('settings.subtitles.font.color'), new fontcolorselectbox_1.FontColorSelectBox({
                    overlay: _this.overlay,
                })),
                new settingspanelitem_1.SettingsPanelItem(i18n_1.i18n.getLocalizer('settings.subtitles.font.opacity'), new fontopacityselectbox_1.FontOpacitySelectBox({
                    overlay: _this.overlay,
                })),
                new settingspanelitem_1.SettingsPanelItem(i18n_1.i18n.getLocalizer('settings.subtitles.characterEdge'), new characteredgeselectbox_1.CharacterEdgeSelectBox({
                    overlay: _this.overlay,
                })),
                new settingspanelitem_1.SettingsPanelItem(i18n_1.i18n.getLocalizer('settings.subtitles.background.color'), new backgroundcolorselectbox_1.BackgroundColorSelectBox({
                    overlay: _this.overlay,
                })),
                new settingspanelitem_1.SettingsPanelItem(i18n_1.i18n.getLocalizer('settings.subtitles.background.opacity'), new backgroundopacityselectbox_1.BackgroundOpacitySelectBox({
                    overlay: _this.overlay,
                })),
                new settingspanelitem_1.SettingsPanelItem(i18n_1.i18n.getLocalizer('settings.subtitles.window.color'), new windowcolorselectbox_1.WindowColorSelectBox({
                    overlay: _this.overlay,
                })),
                new settingspanelitem_1.SettingsPanelItem(i18n_1.i18n.getLocalizer('settings.subtitles.window.opacity'), new windowopacityselectbox_1.WindowOpacitySelectBox({
                    overlay: _this.overlay,
                })),
                new settingspanelitem_1.SettingsPanelItem(new settingspanelpagebackbutton_1.SettingsPanelPageBackButton({
                    container: _this.settingsPanel,
                    text: i18n_1.i18n.getLocalizer('back'),
                }), new subtitlesettingsresetbutton_1.SubtitleSettingsResetButton({}), {
                    role: 'menubar',
                }),
            ],
        }, _this.config);
        return _this;
    }
    SubtitleSettingsPanelPage.prototype.configure = function (player, uimanager) {
        var _this = this;
        _super.prototype.configure.call(this, player, uimanager);
        this.onActive.subscribe(function () {
            _this.overlay.enablePreviewSubtitleLabel();
        });
        this.onInactive.subscribe(function () {
            _this.overlay.removePreviewSubtitleLabel();
        });
    };
    return SubtitleSettingsPanelPage;
}(settingspanelpage_1.SettingsPanelPage));
exports.SubtitleSettingsPanelPage = SubtitleSettingsPanelPage;

},{"../../localization/i18n":89,"../settingspanelitem":46,"../settingspanelpage":47,"../settingspanelpagebackbutton":48,"./backgroundcolorselectbox":56,"./backgroundopacityselectbox":57,"./characteredgeselectbox":58,"./fontcolorselectbox":59,"./fontfamilyselectbox":60,"./fontopacityselectbox":61,"./fontsizeselectbox":62,"./subtitlesettingsresetbutton":67,"./windowcolorselectbox":68,"./windowopacityselectbox":69}],67:[function(require,module,exports){
"use strict";
var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        if (typeof b !== "function" && b !== null)
            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
exports.SubtitleSettingsResetButton = void 0;
var button_1 = require("../button");
var i18n_1 = require("../../localization/i18n");
/**
 * A button that resets all subtitle settings to their defaults.
 *
 * @category Buttons
 */
var SubtitleSettingsResetButton = /** @class */ (function (_super) {
    __extends(SubtitleSettingsResetButton, _super);
    function SubtitleSettingsResetButton(config) {
        var _this = _super.call(this, config) || this;
        _this.config = _this.mergeConfig(config, {
            cssClass: 'ui-subtitlesettingsresetbutton',
            text: i18n_1.i18n.getLocalizer('reset'),
        }, _this.config);
        return _this;
    }
    SubtitleSettingsResetButton.prototype.configure = function (player, uimanager) {
        var _this = this;
        _super.prototype.configure.call(this, player, uimanager);
        this.settingsManager = uimanager.getSubtitleSettingsManager();
        this.onClick.subscribe(function () {
            _this.settingsManager.reset();
        });
    };
    return SubtitleSettingsResetButton;
}(button_1.Button));
exports.SubtitleSettingsResetButton = SubtitleSettingsResetButton;

},{"../../localization/i18n":89,"../button":12}],68:[function(require,module,exports){
"use strict";
var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        if (typeof b !== "function" && b !== null)
            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
exports.WindowColorSelectBox = void 0;
var subtitlesettingselectbox_1 = require("./subtitlesettingselectbox");
var i18n_1 = require("../../localization/i18n");
/**
 * A select box providing a selection of different background colors.
 *
 * @category Components
 */
var WindowColorSelectBox = /** @class */ (function (_super) {
    __extends(WindowColorSelectBox, _super);
    function WindowColorSelectBox(config) {
        var _this = _super.call(this, config) || this;
        _this.config = _this.mergeConfig(config, {
            cssClasses: ['ui-subtitlesettingswindowcolorselectbox'],
        }, _this.config);
        return _this;
    }
    WindowColorSelectBox.prototype.configure = function (player, uimanager) {
        var _this = this;
        _super.prototype.configure.call(this, player, uimanager);
        this.addItem(null, i18n_1.i18n.getLocalizer('default'));
        this.addItem('white', i18n_1.i18n.getLocalizer('colors.white'));
        this.addItem('black', i18n_1.i18n.getLocalizer('colors.black'));
        this.addItem('red', i18n_1.i18n.getLocalizer('colors.red'));
        this.addItem('green', i18n_1.i18n.getLocalizer('colors.green'));
        this.addItem('blue', i18n_1.i18n.getLocalizer('colors.blue'));
        this.addItem('cyan', i18n_1.i18n.getLocalizer('colors.cyan'));
        this.addItem('yellow', i18n_1.i18n.getLocalizer('colors.yellow'));
        this.addItem('magenta', i18n_1.i18n.getLocalizer('colors.magenta'));
        var setColorAndOpacity = function () {
            if (_this.settingsManager.windowColor.isSet() && _this.settingsManager.windowOpacity.isSet()) {
                _this.toggleOverlayClass('windowcolor-' + _this.settingsManager.windowColor.value + _this.settingsManager.windowOpacity.value);
            }
            else {
                _this.toggleOverlayClass(null);
            }
        };
        this.onItemSelected.subscribe(function (sender, key) {
            _this.settingsManager.windowColor.value = key;
        });
        this.settingsManager.windowColor.onChanged.subscribe(function (sender, property) {
            // Color and opacity go together, so we need to...
            if (!_this.settingsManager.windowColor.isSet()) {
                // ... clear the opacity when the color is not set
                _this.settingsManager.windowOpacity.clear();
            }
            else if (!_this.settingsManager.windowOpacity.isSet()) {
                // ... set an opacity when the color is set
                _this.settingsManager.windowOpacity.value = '100';
            }
            _this.selectItem(property.value);
            setColorAndOpacity();
        });
        this.settingsManager.windowOpacity.onChanged.subscribe(function () {
            setColorAndOpacity();
        });
        // Load initial value
        if (this.settingsManager.windowColor.isSet()) {
            this.selectItem(this.settingsManager.windowColor.value);
        }
    };
    return WindowColorSelectBox;
}(subtitlesettingselectbox_1.SubtitleSettingSelectBox));
exports.WindowColorSelectBox = WindowColorSelectBox;

},{"../../localization/i18n":89,"./subtitlesettingselectbox":63}],69:[function(require,module,exports){
"use strict";
var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        if (typeof b !== "function" && b !== null)
            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
exports.WindowOpacitySelectBox = void 0;
var subtitlesettingselectbox_1 = require("./subtitlesettingselectbox");
var i18n_1 = require("../../localization/i18n");
/**
 * A select box providing a selection of different background opacity.
 *
 * @category Components
 */
var WindowOpacitySelectBox = /** @class */ (function (_super) {
    __extends(WindowOpacitySelectBox, _super);
    function WindowOpacitySelectBox(config) {
        var _this = _super.call(this, config) || this;
        _this.config = _this.mergeConfig(config, {
            cssClasses: ['ui-subtitlesettingswindowopacityselectbox'],
        }, _this.config);
        return _this;
    }
    WindowOpacitySelectBox.prototype.configure = function (player, uimanager) {
        var _this = this;
        _super.prototype.configure.call(this, player, uimanager);
        this.addItem(null, i18n_1.i18n.getLocalizer('default'));
        this.addItem('100', i18n_1.i18n.getLocalizer('percent', { value: 100 }));
        this.addItem('75', i18n_1.i18n.getLocalizer('percent', { value: 75 }));
        this.addItem('50', i18n_1.i18n.getLocalizer('percent', { value: 50 }));
        this.addItem('25', i18n_1.i18n.getLocalizer('percent', { value: 25 }));
        this.addItem('0', i18n_1.i18n.getLocalizer('percent', { value: 0 }));
        this.onItemSelected.subscribe(function (sender, key) {
            _this.settingsManager.windowOpacity.value = key;
            // Color and opacity go together, so we need to...
            if (!_this.settingsManager.windowOpacity.isSet()) {
                // ... clear the color when the opacity is not set
                _this.settingsManager.windowColor.clear();
            }
            else if (!_this.settingsManager.windowColor.isSet()) {
                // ... set a color when the opacity is set
                _this.settingsManager.windowColor.value = 'black';
            }
        });
        // Update selected item when value is set from somewhere else
        this.settingsManager.windowOpacity.onChanged.subscribe(function (sender, property) {
            _this.selectItem(property.value);
        });
        // Load initial value
        if (this.settingsManager.windowOpacity.isSet()) {
            this.selectItem(this.settingsManager.windowOpacity.value);
        }
    };
    return WindowOpacitySelectBox;
}(subtitlesettingselectbox_1.SubtitleSettingSelectBox));
exports.WindowOpacitySelectBox = WindowOpacitySelectBox;

},{"../../localization/i18n":89,"./subtitlesettingselectbox":63}],70:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.TimelineMarkersHandler = void 0;
var dom_1 = require("../dom");
var playerutils_1 = require("../playerutils");
var timeout_1 = require("../timeout");
var TimelineMarkersHandler = /** @class */ (function () {
    function TimelineMarkersHandler(config, getSeekBarWidth, markersContainer) {
        this.config = config;
        this.getSeekBarWidth = getSeekBarWidth;
        this.markersContainer = markersContainer;
        this.timelineMarkers = [];
    }
    TimelineMarkersHandler.prototype.initialize = function (player, uimanager) {
        this.player = player;
        this.uimanager = uimanager;
        this.configureMarkers();
    };
    TimelineMarkersHandler.prototype.configureMarkers = function () {
        var _this = this;
        // Remove markers when unloaded
        this.player.on(this.player.exports.PlayerEvent.SourceUnloaded, function () { return _this.clearMarkers(); });
        this.player.on(this.player.exports.PlayerEvent.AdBreakStarted, function () { return _this.clearMarkers(); });
        this.player.on(this.player.exports.PlayerEvent.AdBreakFinished, function () { return _this.updateMarkers(); });
        // Update markers when the size of the seekbar changes
        this.player.on(this.player.exports.PlayerEvent.PlayerResized, function () { return _this.updateMarkersDOM(); });
        this.player.on(this.player.exports.PlayerEvent.SourceLoaded, function () {
            if (_this.player.isLive()) {
                // Update marker position as timeshift range changes
                _this.player.on(_this.player.exports.PlayerEvent.TimeChanged, function () { return _this.updateMarkers(); });
                // Update marker postion when paused as timeshift range changes
                _this.configureLivePausedTimeshiftUpdater(function () { return _this.updateMarkers(); });
            }
        });
        this.uimanager.getConfig().events.onUpdated.subscribe(function () { return _this.updateMarkers(); });
        this.uimanager.onRelease.subscribe(function () { return _this.uimanager.getConfig().events.onUpdated.unsubscribe(function () { return _this.updateMarkers(); }); });
        // Init markers at startup
        this.updateMarkers();
    };
    TimelineMarkersHandler.prototype.getMarkerAtPosition = function (percentage) {
        var snappingRange = this.config.snappingRange;
        var matchingMarker = this.timelineMarkers.find(function (marker) {
            var hasDuration = marker.duration > 0;
            // Handle interval markers
            var intervalMarkerMatch = hasDuration &&
                percentage >= marker.position - snappingRange &&
                percentage <= marker.position + marker.duration + snappingRange;
            // Handle position markers
            var positionMarkerMatch = percentage >= marker.position - snappingRange &&
                percentage <= marker.position + snappingRange;
            return intervalMarkerMatch || positionMarkerMatch;
        });
        return matchingMarker || null;
    };
    TimelineMarkersHandler.prototype.clearMarkers = function () {
        this.timelineMarkers = [];
        this.markersContainer.empty();
    };
    TimelineMarkersHandler.prototype.removeMarkerFromConfig = function (marker) {
        this.uimanager.getConfig().metadata.markers = this.uimanager.getConfig().metadata.markers.filter(function (_marker) { return marker !== _marker; });
    };
    TimelineMarkersHandler.prototype.filterRemovedMarkers = function () {
        var _this = this;
        this.timelineMarkers = this.timelineMarkers.filter(function (seekbarMarker) {
            var matchingMarker = _this.uimanager.getConfig().metadata.markers.find(function (_marker) { return seekbarMarker.marker === _marker; });
            if (!matchingMarker) {
                _this.removeMarkerFromDOM(seekbarMarker);
            }
            return matchingMarker;
        });
    };
    TimelineMarkersHandler.prototype.removeMarkerFromDOM = function (marker) {
        if (marker.element) {
            marker.element.remove();
        }
    };
    TimelineMarkersHandler.prototype.updateMarkers = function () {
        var _this = this;
        if (!shouldProcessMarkers(this.player, this.uimanager)) {
            this.clearMarkers();
            return;
        }
        this.filterRemovedMarkers();
        this.uimanager.getConfig().metadata.markers.forEach(function (marker) {
            var _a = getMarkerPositions(_this.player, marker), markerPosition = _a.markerPosition, markerDuration = _a.markerDuration;
            if (shouldRemoveMarker(markerPosition, markerDuration)) {
                _this.removeMarkerFromConfig(marker);
            }
            else if (markerPosition <= 100) {
                var matchingMarker = _this.timelineMarkers.find(function (seekbarMarker) { return seekbarMarker.marker === marker; });
                if (matchingMarker) {
                    matchingMarker.position = markerPosition;
                    matchingMarker.duration = markerDuration;
                    _this.updateMarkerDOM(matchingMarker);
                }
                else {
                    var newMarker = { marker: marker, position: markerPosition, duration: markerDuration };
                    _this.timelineMarkers.push(newMarker);
                    _this.createMarkerDOM(newMarker);
                }
            }
        });
    };
    TimelineMarkersHandler.prototype.getMarkerCssProperties = function (marker) {
        var seekBarWidthPx = this.getSeekBarWidth();
        var positionInPx = (seekBarWidthPx / 100) * (marker.position < 0 ? 0 : marker.position);
        var cssProperties = {
            'transform': "translateX(".concat(positionInPx, "px)"),
        };
        if (marker.duration > 0) {
            var markerWidthPx = Math.round(seekBarWidthPx / 100 * marker.duration);
            cssProperties['width'] = "".concat(markerWidthPx, "px");
        }
        return cssProperties;
    };
    TimelineMarkersHandler.prototype.updateMarkerDOM = function (marker) {
        marker.element.css(this.getMarkerCssProperties(marker));
    };
    TimelineMarkersHandler.prototype.createMarkerDOM = function (marker) {
        var _this = this;
        var markerClasses = ['seekbar-marker'].concat(marker.marker.cssClasses || [])
            .map(function (cssClass) { return _this.prefixCss(cssClass); });
        var markerElement = new dom_1.DOM('div', {
            'class': markerClasses.join(' '),
            'data-marker-time': String(marker.marker.time),
            'data-marker-title': String(marker.marker.title),
        }).css(this.getMarkerCssProperties(marker));
        if (marker.marker.imageUrl) {
            var removeImage = function () {
                imageElement_1.remove();
            };
            var imageElement_1 = new dom_1.DOM('img', {
                'class': this.prefixCss('seekbar-marker-image'),
                'src': marker.marker.imageUrl,
            }).on('error', removeImage);
            markerElement.append(imageElement_1);
        }
        marker.element = markerElement;
        this.markersContainer.append(markerElement);
    };
    TimelineMarkersHandler.prototype.updateMarkersDOM = function () {
        var _this = this;
        this.timelineMarkers.forEach(function (marker) {
            if (marker.element) {
                _this.updateMarkerDOM(marker);
            }
            else {
                _this.createMarkerDOM(marker);
            }
        });
    };
    TimelineMarkersHandler.prototype.configureLivePausedTimeshiftUpdater = function (handler) {
        var _this = this;
        // Regularly update the marker position while the timeout is active
        this.pausedTimeshiftUpdater = new timeout_1.Timeout(1000, handler, true);
        this.player.on(this.player.exports.PlayerEvent.Paused, function () {
            if (_this.player.isLive() && _this.player.getMaxTimeShift() < 0) {
                _this.pausedTimeshiftUpdater.start();
            }
        });
        // Stop updater when playback continues (no matter if the updater was started before)
        this.player.on(this.player.exports.PlayerEvent.Play, function () { return _this.pausedTimeshiftUpdater.clear(); });
        this.player.on(this.player.exports.PlayerEvent.Destroy, function () { return _this.pausedTimeshiftUpdater.clear(); });
    };
    TimelineMarkersHandler.prototype.prefixCss = function (cssClassOrId) {
        return this.config.cssPrefix + '-' + cssClassOrId;
    };
    return TimelineMarkersHandler;
}());
exports.TimelineMarkersHandler = TimelineMarkersHandler;
function getMarkerPositions(player, marker) {
    var duration = getDuration(player);
    var markerPosition = 100 / duration * getMarkerTime(marker, player, duration); // convert absolute time to percentage
    var markerDuration = 100 / duration * marker.duration;
    if (markerPosition < 0 && !isNaN(markerDuration)) {
        // Shrink marker duration for on live streams as they reach end
        markerDuration = markerDuration + markerPosition;
    }
    if (100 - markerPosition < markerDuration) {
        // Shrink marker if it overflows timeline
        markerDuration = 100 - markerPosition;
    }
    return { markerDuration: markerDuration, markerPosition: markerPosition };
}
function getMarkerTime(marker, player, duration) {
    if (!player.isLive()) {
        return marker.time;
    }
    return duration - (playerutils_1.PlayerUtils.getSeekableRangeRespectingLive(player).end - marker.time);
}
function getDuration(player) {
    if (!player.isLive()) {
        return player.getDuration();
    }
    var _a = playerutils_1.PlayerUtils.getSeekableRangeRespectingLive(player), start = _a.start, end = _a.end;
    return end - start;
}
function shouldRemoveMarker(markerPosition, markerDuration) {
    return (markerDuration < 0 || isNaN(markerDuration)) && markerPosition < 0;
}
function shouldProcessMarkers(player, uimanager) {
    // Don't generate timeline markers if we don't yet have a duration
    // The duration check is for buggy platforms where the duration is not available instantly (Chrome on Android 4.3)
    var validToProcess = player.getDuration() !== Infinity || player.isLive();
    var hasMarkers = uimanager.getConfig().metadata.markers.length > 0;
    return validToProcess && hasMarkers;
}

},{"../dom":82,"../playerutils":96,"../timeout":111}],71:[function(require,module,exports){
"use strict";
var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        if (typeof b !== "function" && b !== null)
            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
exports.TitleBar = void 0;
var container_1 = require("./container");
var metadatalabel_1 = require("./metadatalabel");
/**
 * Displays a title bar containing a label with the title of the video.
 *
 * @category Components
 */
var TitleBar = /** @class */ (function (_super) {
    __extends(TitleBar, _super);
    function TitleBar(config) {
        if (config === void 0) { config = {}; }
        var _this = _super.call(this, config) || this;
        _this.config = _this.mergeConfig(config, {
            cssClass: 'ui-titlebar',
            hidden: true,
            components: [
                new metadatalabel_1.MetadataLabel({ content: metadatalabel_1.MetadataLabelContent.Title }),
                new metadatalabel_1.MetadataLabel({ content: metadatalabel_1.MetadataLabelContent.Description }),
            ],
            keepHiddenWithoutMetadata: false,
        }, _this.config);
        return _this;
    }
    TitleBar.prototype.configure = function (player, uimanager) {
        var _this = this;
        _super.prototype.configure.call(this, player, uimanager);
        var config = this.getConfig();
        var shouldBeShown = !this.isHidden();
        var hasMetadataText = true; // Flag to track if any metadata label contains text
        var checkMetadataTextAndUpdateVisibility = function () {
            hasMetadataText = false;
            // Iterate through metadata labels and check if at least one of them contains text
            for (var _i = 0, _a = _this.getComponents(); _i < _a.length; _i++) {
                var component = _a[_i];
                if (component instanceof metadatalabel_1.MetadataLabel) {
                    if (!component.isEmpty()) {
                        hasMetadataText = true;
                        break;
                    }
                }
            }
            if (_this.isShown()) {
                // Hide a visible titlebar if it does not contain any text and the hidden flag is set
                if (config.keepHiddenWithoutMetadata && !hasMetadataText) {
                    _this.hide();
                }
            }
            else if (shouldBeShown) {
                // Show a hidden titlebar if it should actually be shown
                _this.show();
            }
        };
        // Listen to text change events to update the hasMetadataText flag when the metadata dynamically changes
        for (var _i = 0, _a = this.getComponents(); _i < _a.length; _i++) {
            var component = _a[_i];
            if (component instanceof metadatalabel_1.MetadataLabel) {
                component.onTextChanged.subscribe(checkMetadataTextAndUpdateVisibility);
            }
        }
        uimanager.onControlsShow.subscribe(function () {
            shouldBeShown = true;
            if (!(config.keepHiddenWithoutMetadata && !hasMetadataText)) {
                _this.show();
            }
        });
        uimanager.onControlsHide.subscribe(function () {
            shouldBeShown = false;
            _this.hide();
        });
        // init
        checkMetadataTextAndUpdateVisibility();
    };
    return TitleBar;
}(container_1.Container));
exports.TitleBar = TitleBar;

},{"./container":19,"./metadatalabel":31}],72:[function(require,module,exports){
"use strict";
var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        if (typeof b !== "function" && b !== null)
            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
exports.ToggleButton = void 0;
var button_1 = require("./button");
var eventdispatcher_1 = require("../eventdispatcher");
/**
 * A button that can be toggled between 'on' and 'off' states.
 *
 * @category Components
 */
var ToggleButton = /** @class */ (function (_super) {
    __extends(ToggleButton, _super);
    function ToggleButton(config) {
        var _this = _super.call(this, config) || this;
        _this.toggleButtonEvents = {
            onToggle: new eventdispatcher_1.EventDispatcher(),
            onToggleOn: new eventdispatcher_1.EventDispatcher(),
            onToggleOff: new eventdispatcher_1.EventDispatcher(),
        };
        var defaultConfig = {
            cssClass: 'ui-togglebutton',
            onClass: 'on',
            offClass: 'off',
        };
        if (config.onAriaLabel) {
            config.ariaLabel = config.onAriaLabel;
        }
        _this.config = _this.mergeConfig(config, defaultConfig, _this.config);
        return _this;
    }
    ToggleButton.prototype.configure = function (player, uimanager) {
        _super.prototype.configure.call(this, player, uimanager);
        var config = this.getConfig();
        this.getDomElement().addClass(this.prefixCss(config.offClass));
    };
    /**
     * Toggles the button to the 'on' state.
     */
    ToggleButton.prototype.on = function () {
        if (this.isOff()) {
            var config = this.getConfig();
            this.onState = true;
            this.getDomElement().removeClass(this.prefixCss(config.offClass));
            this.getDomElement().addClass(this.prefixCss(config.onClass));
            this.onToggleEvent();
            this.onToggleOnEvent();
            this.setAriaAttr('pressed', 'true');
            if (this.config.onAriaLabel) {
                this.setAriaLabel(this.config.onAriaLabel);
            }
        }
    };
    /**
     * Toggles the button to the 'off' state.
     */
    ToggleButton.prototype.off = function () {
        if (this.isOn()) {
            var config = this.getConfig();
            this.onState = false;
            this.getDomElement().removeClass(this.prefixCss(config.onClass));
            this.getDomElement().addClass(this.prefixCss(config.offClass));
            this.onToggleEvent();
            this.onToggleOffEvent();
            this.setAriaAttr('pressed', 'false');
            if (this.config.offAriaLabel) {
                this.setAriaLabel(this.config.offAriaLabel);
            }
        }
    };
    /**
     * Toggle the button 'on' if it is 'off', or 'off' if it is 'on'.
     */
    ToggleButton.prototype.toggle = function () {
        if (this.isOn()) {
            this.off();
        }
        else {
            this.on();
        }
    };
    /**
     * Checks if the toggle button is in the 'on' state.
     * @returns {boolean} true if button is 'on', false if 'off'
     */
    ToggleButton.prototype.isOn = function () {
        return this.onState;
    };
    /**
     * Checks if the toggle button is in the 'off' state.
     * @returns {boolean} true if button is 'off', false if 'on'
     */
    ToggleButton.prototype.isOff = function () {
        return !this.isOn();
    };
    ToggleButton.prototype.onClickEvent = function () {
        _super.prototype.onClickEvent.call(this);
        // Fire the toggle event together with the click event
        // (they are technically the same, only the semantics are different)
        this.onToggleEvent();
    };
    ToggleButton.prototype.onToggleEvent = function () {
        this.toggleButtonEvents.onToggle.dispatch(this);
    };
    ToggleButton.prototype.onToggleOnEvent = function () {
        this.toggleButtonEvents.onToggleOn.dispatch(this);
    };
    ToggleButton.prototype.onToggleOffEvent = function () {
        this.toggleButtonEvents.onToggleOff.dispatch(this);
    };
    Object.defineProperty(ToggleButton.prototype, "onToggle", {
        /**
         * Gets the event that is fired when the button is toggled.
         * @returns {Event<ToggleButton<Config>, NoArgs>}
         */
        get: function () {
            return this.toggleButtonEvents.onToggle.getEvent();
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ToggleButton.prototype, "onToggleOn", {
        /**
         * Gets the event that is fired when the button is toggled 'on'.
         * @returns {Event<ToggleButton<Config>, NoArgs>}
         */
        get: function () {
            return this.toggleButtonEvents.onToggleOn.getEvent();
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ToggleButton.prototype, "onToggleOff", {
        /**
         * Gets the event that is fired when the button is toggled 'off'.
         * @returns {Event<ToggleButton<Config>, NoArgs>}
         */
        get: function () {
            return this.toggleButtonEvents.onToggleOff.getEvent();
        },
        enumerable: false,
        configurable: true
    });
    return ToggleButton;
}(button_1.Button));
exports.ToggleButton = ToggleButton;

},{"../eventdispatcher":84,"./button":12}],73:[function(require,module,exports){
"use strict";
var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        if (typeof b !== "function" && b !== null)
            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
exports.TvNoiseCanvas = void 0;
var component_1 = require("./component");
var dom_1 = require("../dom");
/**
 * Animated analog TV static noise.
 *
 * @category Components
 */
var TvNoiseCanvas = /** @class */ (function (_super) {
    __extends(TvNoiseCanvas, _super);
    function TvNoiseCanvas(config) {
        if (config === void 0) { config = {}; }
        var _this = _super.call(this, config) || this;
        _this.canvasWidth = 160;
        _this.canvasHeight = 90;
        _this.interferenceHeight = 50;
        _this.lastFrameUpdate = 0;
        _this.frameInterval = 60;
        _this.useAnimationFrame = !!window.requestAnimationFrame;
        _this.config = _this.mergeConfig(config, {
            cssClass: 'ui-tvnoisecanvas',
        }, _this.config);
        return _this;
    }
    TvNoiseCanvas.prototype.toDomElement = function () {
        return this.canvas = new dom_1.DOM('canvas', { 'class': this.getCssClasses() }, this);
    };
    TvNoiseCanvas.prototype.start = function () {
        this.canvasElement = this.canvas.get(0);
        this.canvasContext = this.canvasElement.getContext('2d');
        this.noiseAnimationWindowPos = -this.canvasHeight;
        this.lastFrameUpdate = 0;
        this.canvasElement.width = this.canvasWidth;
        this.canvasElement.height = this.canvasHeight;
        this.renderFrame();
    };
    TvNoiseCanvas.prototype.stop = function () {
        if (this.useAnimationFrame) {
            cancelAnimationFrame(this.frameUpdateHandlerId);
        }
        else {
            clearTimeout(this.frameUpdateHandlerId);
        }
    };
    TvNoiseCanvas.prototype.renderFrame = function () {
        // This code has been copied from the player controls.js and simplified
        if (this.lastFrameUpdate + this.frameInterval > new Date().getTime()) {
            // It's too early to render the next frame
            this.scheduleNextRender();
            return;
        }
        var currentPixelOffset;
        var canvasWidth = this.canvasWidth;
        var canvasHeight = this.canvasHeight;
        // Create texture
        var noiseImage = this.canvasContext.createImageData(canvasWidth, canvasHeight);
        // Fill texture with noise
        for (var y = 0; y < canvasHeight; y++) {
            for (var x = 0; x < canvasWidth; x++) {
                currentPixelOffset = (canvasWidth * y * 4) + x * 4;
                noiseImage.data[currentPixelOffset] = Math.random() * 255;
                if (y < this.noiseAnimationWindowPos || y > this.noiseAnimationWindowPos + this.interferenceHeight) {
                    noiseImage.data[currentPixelOffset] *= 0.85;
                }
                noiseImage.data[currentPixelOffset + 1] = noiseImage.data[currentPixelOffset];
                noiseImage.data[currentPixelOffset + 2] = noiseImage.data[currentPixelOffset];
                noiseImage.data[currentPixelOffset + 3] = 50;
            }
        }
        // Put texture onto canvas
        this.canvasContext.putImageData(noiseImage, 0, 0);
        this.lastFrameUpdate = new Date().getTime();
        this.noiseAnimationWindowPos += 7;
        if (this.noiseAnimationWindowPos > canvasHeight) {
            this.noiseAnimationWindowPos = -canvasHeight;
        }
        this.scheduleNextRender();
    };
    TvNoiseCanvas.prototype.scheduleNextRender = function () {
        if (this.useAnimationFrame) {
            this.frameUpdateHandlerId = window.requestAnimationFrame(this.renderFrame.bind(this));
        }
        else {
            this.frameUpdateHandlerId = window.setTimeout(this.renderFrame.bind(this), this.frameInterval);
        }
    };
    return TvNoiseCanvas;
}(component_1.Component));
exports.TvNoiseCanvas = TvNoiseCanvas;

},{"../dom":82,"./component":18}],74:[function(require,module,exports){
"use strict";
var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        if (typeof b !== "function" && b !== null)
            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
exports.UIContainer = void 0;
var container_1 = require("./container");
var dom_1 = require("../dom");
var timeout_1 = require("../timeout");
var playerutils_1 = require("../playerutils");
var eventdispatcher_1 = require("../eventdispatcher");
var i18n_1 = require("../localization/i18n");
var button_1 = require("./button");
/**
 * The base container that contains all of the UI. The UIContainer is passed to the {@link UIManager} to build and
 * setup the UI.
 *
 * @category Containers
 */
var UIContainer = exports.UIContainer = /** @class */ (function (_super) {
    __extends(UIContainer, _super);
    function UIContainer(config) {
        var _this = _super.call(this, config) || this;
        _this.hideUi = function () { };
        _this.showUi = function () { };
        _this.config = _this.mergeConfig(config, {
            cssClass: 'ui-uicontainer',
            role: 'region',
            ariaLabel: i18n_1.i18n.getLocalizer('player'),
            hideDelay: 5000,
            hideImmediatelyOnMouseLeave: false,
        }, _this.config);
        _this.playerStateChange = new eventdispatcher_1.EventDispatcher();
        _this.hidingPrevented = function () { return false; };
        return _this;
    }
    UIContainer.prototype.configure = function (player, uimanager) {
        var config = this.getConfig();
        if (config.userInteractionEventSource) {
            this.userInteractionEventSource = new dom_1.DOM(config.userInteractionEventSource);
        }
        else {
            this.userInteractionEventSource = this.getDomElement();
        }
        _super.prototype.configure.call(this, player, uimanager);
        this.configureUIShowHide(player, uimanager);
        this.configurePlayerStates(player, uimanager);
    };
    UIContainer.prototype.configureUIShowHide = function (player, uimanager) {
        var _this = this;
        var config = this.getConfig();
        if (config.hideDelay === -1) {
            uimanager.onConfigured.subscribe(function () { return uimanager.onControlsShow.dispatch(_this); });
            return;
        }
        var isUiShown = false;
        var isSeeking = false;
        var isFirstTouch = true;
        var playerState;
        this.hidingPrevented = function () {
            return config.hidePlayerStateExceptions && config.hidePlayerStateExceptions.indexOf(playerState) > -1;
        };
        this.showUi = function () {
            if (!isUiShown) {
                // Let subscribers know that they should reveal themselves
                uimanager.onControlsShow.dispatch(_this);
                isUiShown = true;
            }
            // Don't trigger timeout while seeking (it will be triggered once the seek is finished) or casting
            if (!isSeeking && !player.isCasting() && !_this.hidingPrevented()) {
                _this.uiHideTimeout.start();
            }
        };
        this.hideUi = function () {
            // Hide the UI only if it is shown, and if not casting
            if (isUiShown && !player.isCasting()) {
                // Issue a preview event to check if we are good to hide the controls
                var previewHideEventArgs = {};
                uimanager.onPreviewControlsHide.dispatch(_this, previewHideEventArgs);
                if (!previewHideEventArgs.cancel) {
                    // If the preview wasn't canceled, let subscribers know that they should now hide themselves
                    uimanager.onControlsHide.dispatch(_this);
                    isUiShown = false;
                }
                else {
                    // If the hide preview was canceled, continue to show UI
                    _this.showUi();
                }
            }
        };
        // Timeout to defer UI hiding by the configured delay time
        this.uiHideTimeout = new timeout_1.Timeout(config.hideDelay, this.hideUi);
        this.userInteractionEvents = [{
                // On touch displays, the first touch reveals the UI
                name: 'touchend',
                handler: function (e) {
                    var shouldPreventDefault = (function (e) {
                        var findButtonComponent = (function (element) {
                            if (!element
                                || element === _this.userInteractionEventSource.get(0)
                                || element.component instanceof UIContainer) {
                                return null;
                            }
                            if (element.component && element.component instanceof button_1.Button) {
                                return element.component;
                            }
                            else {
                                return findButtonComponent(element.parentElement);
                            }
                        });
                        var buttonComponent = findButtonComponent(e.target);
                        return !(buttonComponent && buttonComponent.getConfig().acceptsTouchWithUiHidden);
                    });
                    if (!isUiShown) {
                        // Only if the UI is hidden, we prevent other actions (except for the first touch) and reveal the UI
                        // instead. The first touch is not prevented to let other listeners receive the event and trigger an
                        // initial action, e.g. the huge playback button can directly start playback instead of requiring a double
                        // tap which 1. reveals the UI and 2. starts playback.
                        if (isFirstTouch && !player.isPlaying()) {
                            isFirstTouch = false;
                        }
                        else {
                            // On touch input devices, the first touch is expected to display the UI controls and not be propagated to
                            // other components.
                            // When buttons are always visible this causes UX problems, as the first touch is not recognized.
                            // This is the case for the {@link AdSkipButton} and {@link AdClickOverlay}.
                            // To prevent UX issues where the buttons need to be touched twice, we do not prevent the first touch event.
                            if (shouldPreventDefault(e)) {
                                e.preventDefault();
                            }
                        }
                        _this.showUi();
                    }
                },
            }, {
                // When the mouse enters, we show the UI
                name: 'mouseenter',
                handler: function () {
                    _this.showUi();
                },
            }, {
                // When the mouse moves within, we show the UI
                name: 'mousemove',
                handler: function () {
                    _this.showUi();
                },
            }, {
                name: 'focusin',
                handler: function () {
                    _this.showUi();
                },
            }, {
                name: 'keydown',
                handler: function () {
                    _this.showUi();
                },
            }, {
                // When the mouse leaves, we can prepare to hide the UI, except a seek is going on
                name: 'mouseleave',
                handler: function () {
                    // When a seek is going on, the seek scrub pointer may exit the UI area while still seeking, and we do not
                    // hide the UI in such cases
                    if (!isSeeking && !_this.hidingPrevented()) {
                        if (_this.config.hideImmediatelyOnMouseLeave) {
                            _this.hideUi();
                        }
                        else {
                            _this.uiHideTimeout.start();
                        }
                    }
                },
            }];
        this.userInteractionEvents.forEach(function (event) { return _this.userInteractionEventSource.on(event.name, event.handler); });
        uimanager.onSeek.subscribe(function () {
            _this.uiHideTimeout.clear(); // Don't hide UI while a seek is in progress
            isSeeking = true;
        });
        uimanager.onSeeked.subscribe(function () {
            isSeeking = false;
            if (!_this.hidingPrevented()) {
                _this.uiHideTimeout.start(); // Re-enable UI hide timeout after a seek
            }
        });
        uimanager.onComponentViewModeChanged.subscribe(function (_, _a) {
            var mode = _a.mode;
            return _this.trackComponentViewMode(mode);
        });
        player.on(player.exports.PlayerEvent.CastStarted, function () {
            _this.showUi(); // Show UI when a Cast session has started (UI will then stay permanently on during the session)
        });
        this.playerStateChange.subscribe(function (_, state) {
            playerState = state;
            if (_this.hidingPrevented()) {
                // Entering a player state that prevents hiding and forces the controls to be shown
                _this.uiHideTimeout.clear();
                _this.showUi();
            }
            else {
                // Entering a player state that allows hiding
                _this.uiHideTimeout.start();
            }
        });
    };
    UIContainer.prototype.configurePlayerStates = function (player, uimanager) {
        var _this = this;
        var container = this.getDomElement();
        // Convert player states into CSS class names
        var stateClassNames = [];
        for (var state in playerutils_1.PlayerUtils.PlayerState) {
            if (isNaN(Number(state))) {
                var enumName = playerutils_1.PlayerUtils.PlayerState[playerutils_1.PlayerUtils.PlayerState[state]];
                stateClassNames[playerutils_1.PlayerUtils.PlayerState[state]] =
                    this.prefixCss(UIContainer.STATE_PREFIX + enumName.toLowerCase());
            }
        }
        var removeStates = function () {
            container.removeClass(stateClassNames[playerutils_1.PlayerUtils.PlayerState.Idle]);
            container.removeClass(stateClassNames[playerutils_1.PlayerUtils.PlayerState.Prepared]);
            container.removeClass(stateClassNames[playerutils_1.PlayerUtils.PlayerState.Playing]);
            container.removeClass(stateClassNames[playerutils_1.PlayerUtils.PlayerState.Paused]);
            container.removeClass(stateClassNames[playerutils_1.PlayerUtils.PlayerState.Finished]);
        };
        var updateState = function (state) {
            removeStates();
            container.addClass(stateClassNames[state]);
            _this.playerStateChange.dispatch(_this, state);
        };
        player.on(player.exports.PlayerEvent.SourceLoaded, function () {
            updateState(playerutils_1.PlayerUtils.PlayerState.Prepared);
        });
        player.on(player.exports.PlayerEvent.Play, function () {
            updateState(playerutils_1.PlayerUtils.PlayerState.Playing);
        });
        player.on(player.exports.PlayerEvent.Playing, function () {
            updateState(playerutils_1.PlayerUtils.PlayerState.Playing);
        });
        player.on(player.exports.PlayerEvent.Paused, function () {
            updateState(playerutils_1.PlayerUtils.PlayerState.Paused);
        });
        player.on(player.exports.PlayerEvent.PlaybackFinished, function () {
            updateState(playerutils_1.PlayerUtils.PlayerState.Finished);
        });
        player.on(player.exports.PlayerEvent.SourceUnloaded, function () {
            updateState(playerutils_1.PlayerUtils.PlayerState.Idle);
        });
        uimanager.getConfig().events.onUpdated.subscribe(function () {
            updateState(playerutils_1.PlayerUtils.getState(player));
        });
        // Fullscreen marker class
        player.on(player.exports.PlayerEvent.ViewModeChanged, function () {
            if (player.getViewMode() === player.exports.ViewMode.Fullscreen) {
                container.addClass(_this.prefixCss(UIContainer.FULLSCREEN));
            }
            else {
                container.removeClass(_this.prefixCss(UIContainer.FULLSCREEN));
            }
        });
        // Init fullscreen state
        if (player.getViewMode() === player.exports.ViewMode.Fullscreen) {
            container.addClass(this.prefixCss(UIContainer.FULLSCREEN));
        }
        // Buffering marker class
        player.on(player.exports.PlayerEvent.StallStarted, function () {
            container.addClass(_this.prefixCss(UIContainer.BUFFERING));
        });
        player.on(player.exports.PlayerEvent.StallEnded, function () {
            container.removeClass(_this.prefixCss(UIContainer.BUFFERING));
        });
        // Init buffering state
        if (player.isStalled()) {
            container.addClass(this.prefixCss(UIContainer.BUFFERING));
        }
        // RemoteControl marker class
        player.on(player.exports.PlayerEvent.CastStarted, function () {
            container.addClass(_this.prefixCss(UIContainer.REMOTE_CONTROL));
        });
        player.on(player.exports.PlayerEvent.CastStopped, function () {
            container.removeClass(_this.prefixCss(UIContainer.REMOTE_CONTROL));
        });
        // Init RemoteControl state
        if (player.isCasting()) {
            container.addClass(this.prefixCss(UIContainer.REMOTE_CONTROL));
        }
        // Controls visibility marker class
        uimanager.onControlsShow.subscribe(function () {
            container.removeClass(_this.prefixCss(UIContainer.CONTROLS_HIDDEN));
            container.addClass(_this.prefixCss(UIContainer.CONTROLS_SHOWN));
        });
        uimanager.onControlsHide.subscribe(function () {
            container.removeClass(_this.prefixCss(UIContainer.CONTROLS_SHOWN));
            container.addClass(_this.prefixCss(UIContainer.CONTROLS_HIDDEN));
        });
        // Layout size classes
        var updateLayoutSizeClasses = function (width, height) {
            container.removeClass(_this.prefixCss('layout-max-width-400'));
            container.removeClass(_this.prefixCss('layout-max-width-600'));
            container.removeClass(_this.prefixCss('layout-max-width-800'));
            container.removeClass(_this.prefixCss('layout-max-width-1200'));
            if (width <= 400) {
                container.addClass(_this.prefixCss('layout-max-width-400'));
            }
            else if (width <= 600) {
                container.addClass(_this.prefixCss('layout-max-width-600'));
            }
            else if (width <= 800) {
                container.addClass(_this.prefixCss('layout-max-width-800'));
            }
            else if (width <= 1200) {
                container.addClass(_this.prefixCss('layout-max-width-1200'));
            }
        };
        player.on(player.exports.PlayerEvent.PlayerResized, function (e) {
            // Convert strings (with "px" suffix) to ints
            var width = Math.round(Number(e.width.substring(0, e.width.length - 2)));
            var height = Math.round(Number(e.height.substring(0, e.height.length - 2)));
            updateLayoutSizeClasses(width, height);
        });
        // Init layout state
        updateLayoutSizeClasses(new dom_1.DOM(player.getContainer()).width(), new dom_1.DOM(player.getContainer()).height());
    };
    UIContainer.prototype.release = function () {
        var _this = this;
        // Explicitly unsubscribe user interaction event handlers because they could be attached to an external element
        // that isn't owned by the UI and therefore not removed on release.
        if (this.userInteractionEvents) {
            this.userInteractionEvents.forEach(function (event) { return _this.userInteractionEventSource.off(event.name, event.handler); });
        }
        _super.prototype.release.call(this);
        if (this.uiHideTimeout) {
            this.uiHideTimeout.clear();
        }
    };
    UIContainer.prototype.onPlayerStateChange = function () {
        return this.playerStateChange.getEvent();
    };
    UIContainer.prototype.suspendHideTimeout = function () {
        this.uiHideTimeout.suspend();
    };
    UIContainer.prototype.resumeHideTimeout = function () {
        this.uiHideTimeout.resume(!this.hidingPrevented());
    };
    UIContainer.prototype.toDomElement = function () {
        var container = _super.prototype.toDomElement.call(this);
        // Detect flexbox support (not supported in IE9)
        if (document && typeof document.createElement('p').style.flex !== 'undefined') {
            container.addClass(this.prefixCss('flexbox'));
        }
        else {
            container.addClass(this.prefixCss('no-flexbox'));
        }
        return container;
    };
    UIContainer.STATE_PREFIX = 'player-state-';
    UIContainer.FULLSCREEN = 'fullscreen';
    UIContainer.BUFFERING = 'buffering';
    UIContainer.REMOTE_CONTROL = 'remote-control';
    UIContainer.CONTROLS_SHOWN = 'controls-shown';
    UIContainer.CONTROLS_HIDDEN = 'controls-hidden';
    return UIContainer;
}(container_1.Container));

},{"../dom":82,"../eventdispatcher":84,"../localization/i18n":89,"../playerutils":96,"../timeout":111,"./button":12,"./container":19}],75:[function(require,module,exports){
"use strict";
var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        if (typeof b !== "function" && b !== null)
            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
exports.VideoQualitySelectBox = void 0;
var selectbox_1 = require("./selectbox");
var i18n_1 = require("../localization/i18n");
/**
 * A select box providing a selection between 'auto' and the available video qualities.
 *
 * @category Components
 */
var VideoQualitySelectBox = /** @class */ (function (_super) {
    __extends(VideoQualitySelectBox, _super);
    function VideoQualitySelectBox(config) {
        if (config === void 0) { config = {}; }
        var _this = _super.call(this, config) || this;
        _this.config = _this.mergeConfig(config, {
            cssClasses: ['ui-videoqualityselectbox'],
        }, _this.config);
        return _this;
    }
    VideoQualitySelectBox.prototype.configure = function (player, uimanager) {
        var _this = this;
        _super.prototype.configure.call(this, player, uimanager);
        var selectCurrentVideoQuality = function () {
            _this.selectItem(player.getVideoQuality().id);
        };
        var updateVideoQualities = function () {
            var videoQualities = player.getAvailableVideoQualities();
            _this.clearItems();
            // Progressive streams do not support automatic quality selection
            _this.hasAuto = player.getStreamType() !== 'progressive';
            if (_this.hasAuto) {
                // Add entry for automatic quality switching (default setting)
                _this.addItem('auto', i18n_1.i18n.getLocalizer('auto'));
            }
            // Add video qualities
            for (var _i = 0, videoQualities_1 = videoQualities; _i < videoQualities_1.length; _i++) {
                var videoQuality = videoQualities_1[_i];
                _this.addItem(videoQuality.id, videoQuality.label);
            }
            // Select initial quality
            selectCurrentVideoQuality();
        };
        this.onItemSelected.subscribe(function (sender, value) {
            player.setVideoQuality(value);
        });
        // Update qualities when source goes away
        player.on(player.exports.PlayerEvent.SourceUnloaded, updateVideoQualities);
        // Update qualities when the period within a source changes
        player.on(player.exports.PlayerEvent.PeriodSwitched, updateVideoQualities);
        // Update quality selection when quality is changed (from outside)
        player.on(player.exports.PlayerEvent.VideoQualityChanged, selectCurrentVideoQuality);
        if (player.exports.PlayerEvent.VideoQualityAdded) {
            // Update qualities when their availability changed
            // TODO: remove any cast after next player release
            player.on(player.exports.PlayerEvent.VideoQualityAdded, updateVideoQualities);
            player.on(player.exports.PlayerEvent.VideoQualityRemoved, updateVideoQualities);
        }
        uimanager.getConfig().events.onUpdated.subscribe(updateVideoQualities);
    };
    /**
     * Returns true if the select box contains an 'auto' item for automatic quality selection mode.
     * @return {boolean}
     */
    VideoQualitySelectBox.prototype.hasAutoItem = function () {
        return this.hasAuto;
    };
    return VideoQualitySelectBox;
}(selectbox_1.SelectBox));
exports.VideoQualitySelectBox = VideoQualitySelectBox;

},{"../localization/i18n":89,"./selectbox":44}],76:[function(require,module,exports){
"use strict";
var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        if (typeof b !== "function" && b !== null)
            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
exports.VolumeControlButton = void 0;
var container_1 = require("./container");
var volumeslider_1 = require("./volumeslider");
var volumetogglebutton_1 = require("./volumetogglebutton");
var timeout_1 = require("../timeout");
/**
 * A composite volume control that consists of and internally manages a volume control button that can be used
 * for muting, and a (depending on the CSS style, e.g. slide-out) volume control bar.
 *
 * @category Buttons
 */
var VolumeControlButton = /** @class */ (function (_super) {
    __extends(VolumeControlButton, _super);
    function VolumeControlButton(config) {
        if (config === void 0) { config = {}; }
        var _this = _super.call(this, config) || this;
        _this.volumeToggleButton = new volumetogglebutton_1.VolumeToggleButton();
        _this.volumeSlider = new volumeslider_1.VolumeSlider({
            vertical: config.vertical != null ? config.vertical : true,
            hidden: true,
        });
        _this.config = _this.mergeConfig(config, {
            cssClass: 'ui-volumecontrolbutton',
            components: [_this.volumeToggleButton, _this.volumeSlider],
            hideDelay: 500,
        }, _this.config);
        return _this;
    }
    VolumeControlButton.prototype.configure = function (player, uimanager) {
        var _this = this;
        _super.prototype.configure.call(this, player, uimanager);
        var volumeToggleButton = this.getVolumeToggleButton();
        var volumeSlider = this.getVolumeSlider();
        this.volumeSliderHideTimeout = new timeout_1.Timeout(this.getConfig().hideDelay, function () {
            volumeSlider.hide();
        });
        /*
         * Volume Slider visibility handling
         *
         * The volume slider shall be visible while the user hovers the mute toggle button, while the user hovers the
         * volume slider, and while the user slides the volume slider. If none of these situations are true, the slider
         * shall disappear.
         */
        var volumeSliderHovered = false;
        volumeToggleButton.getDomElement().on('mouseenter', function () {
            // Show volume slider when mouse enters the button area
            if (volumeSlider.isHidden()) {
                volumeSlider.show();
            }
            // Avoid hiding of the slider when button is hovered
            _this.volumeSliderHideTimeout.clear();
        });
        volumeToggleButton.getDomElement().on('mouseleave', function () {
            // Hide slider delayed when button is left
            _this.volumeSliderHideTimeout.reset();
        });
        volumeSlider.getDomElement().on('mouseenter', function () {
            // When the slider is entered, cancel the hide timeout activated by leaving the button
            _this.volumeSliderHideTimeout.clear();
            volumeSliderHovered = true;
        });
        volumeSlider.getDomElement().on('mouseleave', function () {
            // When mouse leaves the slider, only hide it if there is no slide operation in progress
            if (volumeSlider.isSeeking()) {
                _this.volumeSliderHideTimeout.clear();
            }
            else {
                _this.volumeSliderHideTimeout.reset();
            }
            volumeSliderHovered = false;
        });
        volumeSlider.onSeeked.subscribe(function () {
            // When a slide operation is done and the slider not hovered (mouse outside slider), hide slider delayed
            if (!volumeSliderHovered) {
                _this.volumeSliderHideTimeout.reset();
            }
        });
    };
    VolumeControlButton.prototype.release = function () {
        _super.prototype.release.call(this);
        this.volumeSliderHideTimeout.clear();
    };
    /**
     * Provides access to the internally managed volume toggle button.
     * @returns {VolumeToggleButton}
     */
    VolumeControlButton.prototype.getVolumeToggleButton = function () {
        return this.volumeToggleButton;
    };
    /**
     * Provides access to the internally managed volume silder.
     * @returns {VolumeSlider}
     */
    VolumeControlButton.prototype.getVolumeSlider = function () {
        return this.volumeSlider;
    };
    return VolumeControlButton;
}(container_1.Container));
exports.VolumeControlButton = VolumeControlButton;

},{"../timeout":111,"./container":19,"./volumeslider":77,"./volumetogglebutton":78}],77:[function(require,module,exports){
"use strict";
var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        if (typeof b !== "function" && b !== null)
            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
exports.VolumeSlider = void 0;
var seekbar_1 = require("./seekbar");
var i18n_1 = require("../localization/i18n");
/**
 * A simple volume slider component to adjust the player's volume setting.
 *
 * @category Components
 */
var VolumeSlider = /** @class */ (function (_super) {
    __extends(VolumeSlider, _super);
    function VolumeSlider(config) {
        if (config === void 0) { config = {}; }
        var _this = _super.call(this, config) || this;
        _this.updateVolumeWhileScrubbing = function (sender, args) {
            if (args.scrubbing && _this.volumeTransition) {
                _this.volumeTransition.update(args.position);
            }
        };
        _this.config = _this.mergeConfig(config, {
            cssClass: 'ui-volumeslider',
            hideIfVolumeControlProhibited: true,
            ariaLabel: i18n_1.i18n.getLocalizer('settings.audio.volume'),
            tabIndex: 0,
        }, _this.config);
        return _this;
    }
    VolumeSlider.prototype.setVolumeAriaSliderValues = function (value) {
        this.getDomElement().attr('aria-valuenow', Math.ceil(value).toString());
        this.getDomElement().attr('aria-valuetext', "".concat(i18n_1.i18n.performLocalization(i18n_1.i18n.getLocalizer('seekBar.value')), ": ").concat(Math.ceil(value)));
    };
    VolumeSlider.prototype.configure = function (player, uimanager) {
        var _this = this;
        _super.prototype.configure.call(this, player, uimanager, false);
        this.setAriaSliderMinMax('0', '100');
        var config = this.getConfig();
        var volumeController = uimanager.getConfig().volumeController;
        if (config.hideIfVolumeControlProhibited && !this.detectVolumeControlAvailability()) {
            this.hide();
            // We can just return from here, because the user will never interact with the control and any configured
            // functionality would only eat resources for no reason.
            return;
        }
        volumeController.onChanged.subscribe(function (_, args) {
            if (args.muted) {
                _this.setVolumeAriaSliderValues(0);
                _this.setPlaybackPosition(0);
            }
            else {
                _this.setPlaybackPosition(args.volume);
                _this.setVolumeAriaSliderValues(args.volume);
            }
        });
        this.onSeek.subscribe(function () {
            _this.volumeTransition = volumeController.startTransition();
        });
        this.onSeekPreview.subscribeRateLimited(this.updateVolumeWhileScrubbing, 50);
        this.onSeeked.subscribe(function (sender, percentage) {
            if (_this.volumeTransition) {
                _this.volumeTransition.finish(percentage);
            }
        });
        // Update the volume slider marker when the player resized, a source is loaded,
        // or the UI is configured. Check the seekbar for a detailed description.
        player.on(player.exports.PlayerEvent.PlayerResized, function () {
            _this.refreshPlaybackPosition();
        });
        uimanager.onConfigured.subscribe(function () {
            _this.refreshPlaybackPosition();
        });
        uimanager.getConfig().events.onUpdated.subscribe(function () {
            _this.refreshPlaybackPosition();
        });
        uimanager.onComponentShow.subscribe(function () {
            _this.refreshPlaybackPosition();
        });
        uimanager.onComponentHide.subscribe(function () {
            _this.refreshPlaybackPosition();
        });
        // Init volume bar
        volumeController.onChangedEvent();
    };
    VolumeSlider.prototype.detectVolumeControlAvailability = function () {
        /*
         * "On iOS devices, the audio level is always under the user’s physical control. The volume property is not
         * settable in JavaScript. Reading the volume property always returns 1."
         * https://developer.apple.com/library/content/documentation/AudioVideo/Conceptual/Using_HTML5_Audio_Video/Device-SpecificConsiderations/Device-SpecificConsiderations.html
         */
        // as muted autoplay gets paused as soon as we unmute it, we may not touch the volume of the actual player so we
        // probe a dummy audio element
        var dummyVideoElement = document.createElement('video');
        // try setting the volume to 0.7 and if it's still 1 we are on a volume control restricted device
        dummyVideoElement.volume = 0.7;
        return dummyVideoElement.volume !== 1;
    };
    VolumeSlider.prototype.release = function () {
        _super.prototype.release.call(this);
        this.onSeekPreview.unsubscribe(this.updateVolumeWhileScrubbing);
    };
    return VolumeSlider;
}(seekbar_1.SeekBar));
exports.VolumeSlider = VolumeSlider;

},{"../localization/i18n":89,"./seekbar":40}],78:[function(require,module,exports){
"use strict";
var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        if (typeof b !== "function" && b !== null)
            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
exports.VolumeToggleButton = void 0;
var togglebutton_1 = require("./togglebutton");
var i18n_1 = require("../localization/i18n");
/**
 * A button that toggles audio muting.
 *
 * @category Buttons
 */
var VolumeToggleButton = /** @class */ (function (_super) {
    __extends(VolumeToggleButton, _super);
    function VolumeToggleButton(config) {
        if (config === void 0) { config = {}; }
        var _this = _super.call(this, config) || this;
        var defaultConfig = {
            cssClass: 'ui-volumetogglebutton',
            text: i18n_1.i18n.getLocalizer('settings.audio.mute'),
            onClass: 'muted',
            offClass: 'unmuted',
            ariaLabel: i18n_1.i18n.getLocalizer('settings.audio.mute'),
        };
        _this.config = _this.mergeConfig(config, defaultConfig, _this.config);
        return _this;
    }
    VolumeToggleButton.prototype.configure = function (player, uimanager) {
        var _this = this;
        _super.prototype.configure.call(this, player, uimanager);
        var volumeController = uimanager.getConfig().volumeController;
        volumeController.onChanged.subscribe(function (_, args) {
            if (args.muted) {
                _this.on();
            }
            else {
                _this.off();
            }
            var volumeLevelTens = Math.ceil(args.volume / 10);
            _this.getDomElement().data(_this.prefixCss('volume-level-tens'), String(volumeLevelTens));
        });
        this.onClick.subscribe(function () {
            volumeController.toggleMuted();
        });
        // Startup init
        volumeController.onChangedEvent();
    };
    return VolumeToggleButton;
}(togglebutton_1.ToggleButton));
exports.VolumeToggleButton = VolumeToggleButton;

},{"../localization/i18n":89,"./togglebutton":72}],79:[function(require,module,exports){
"use strict";
var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        if (typeof b !== "function" && b !== null)
            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
exports.VRToggleButton = void 0;
var togglebutton_1 = require("./togglebutton");
var i18n_1 = require("../localization/i18n");
/**
 * A button that toggles the video view between normal/mono and VR/stereo.
 *
 * @category Buttons
 */
var VRToggleButton = /** @class */ (function (_super) {
    __extends(VRToggleButton, _super);
    function VRToggleButton(config) {
        if (config === void 0) { config = {}; }
        var _this = _super.call(this, config) || this;
        _this.config = _this.mergeConfig(config, {
            cssClass: 'ui-vrtogglebutton',
            text: i18n_1.i18n.getLocalizer('vr'),
        }, _this.config);
        return _this;
    }
    VRToggleButton.prototype.configure = function (player, uimanager) {
        var _this = this;
        _super.prototype.configure.call(this, player, uimanager);
        var isVRConfigured = function () {
            // VR availability cannot be checked through getVRStatus() because it is asynchronously populated and not
            // available at UI initialization. As an alternative, we check the VR settings in the config.
            // TODO use getVRStatus() through isVRStereoAvailable() once the player has been rewritten and the status is
            // available in Ready
            var source = player.getSource();
            return source && Boolean(source.vr);
        };
        var isVRStereoAvailable = function () {
            var source = player.getSource();
            return player.vr && Boolean(source.vr);
        };
        var vrStateHandler = function (ev) {
            if (ev.type === player.exports.PlayerEvent.Warning
                && ev.code !== player.exports.WarningCode.VR_RENDERING_ERROR) {
                return;
            }
            if (isVRConfigured() && isVRStereoAvailable()) {
                _this.show(); // show button in case it is hidden
                if (player.vr && player.vr.getStereo()) {
                    _this.on();
                }
                else {
                    _this.off();
                }
            }
            else {
                _this.hide(); // hide button if no stereo mode available
            }
        };
        var vrButtonVisibilityHandler = function () {
            if (isVRConfigured()) {
                _this.show();
            }
            else {
                _this.hide();
            }
        };
        player.on(player.exports.PlayerEvent.VRStereoChanged, vrStateHandler);
        player.on(player.exports.PlayerEvent.Warning, vrStateHandler);
        // Hide button when VR source goes away
        player.on(player.exports.PlayerEvent.SourceUnloaded, vrButtonVisibilityHandler);
        uimanager.getConfig().events.onUpdated.subscribe(vrButtonVisibilityHandler);
        this.onClick.subscribe(function () {
            if (!isVRStereoAvailable()) {
                if (console) {
                    console.log('No VR content');
                }
            }
            else {
                if (player.vr && player.vr.getStereo()) {
                    player.vr.setStereo(false);
                }
                else {
                    player.vr.setStereo(true);
                }
            }
        });
        // Set startup visibility
        vrButtonVisibilityHandler();
    };
    return VRToggleButton;
}(togglebutton_1.ToggleButton));
exports.VRToggleButton = VRToggleButton;

},{"../localization/i18n":89,"./togglebutton":72}],80:[function(require,module,exports){
"use strict";
var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        if (typeof b !== "function" && b !== null)
            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
exports.Watermark = void 0;
var clickoverlay_1 = require("./clickoverlay");
var i18n_1 = require("../localization/i18n");
/**
 * A watermark overlay with a clickable logo.
 *
 * @category Components
 */
var Watermark = /** @class */ (function (_super) {
    __extends(Watermark, _super);
    function Watermark(config) {
        if (config === void 0) { config = {}; }
        var _this = _super.call(this, config) || this;
        _this.config = _this.mergeConfig(config, {
            cssClass: 'ui-watermark',
            url: 'http://bitmovin.com',
            role: 'link',
            text: 'logo',
            ariaLabel: i18n_1.i18n.getLocalizer('watermarkLink'),
        }, _this.config);
        return _this;
    }
    return Watermark;
}(clickoverlay_1.ClickOverlay));
exports.Watermark = Watermark;

},{"../localization/i18n":89,"./clickoverlay":16}],81:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.DemoFactory = void 0;
var vrtogglebutton_1 = require("./components/vrtogglebutton");
var settingstogglebutton_1 = require("./components/settingstogglebutton");
var volumeslider_1 = require("./components/volumeslider");
var playbacktimelabel_1 = require("./components/playbacktimelabel");
var airplaytogglebutton_1 = require("./components/airplaytogglebutton");
var errormessageoverlay_1 = require("./components/errormessageoverlay");
var controlbar_1 = require("./components/controlbar");
var casttogglebutton_1 = require("./components/casttogglebutton");
var fullscreentogglebutton_1 = require("./components/fullscreentogglebutton");
var recommendationoverlay_1 = require("./components/recommendationoverlay");
var playbackspeedselectbox_1 = require("./components/playbackspeedselectbox");
var audioqualityselectbox_1 = require("./components/audioqualityselectbox");
var caststatusoverlay_1 = require("./components/caststatusoverlay");
var uicontainer_1 = require("./components/uicontainer");
var watermark_1 = require("./components/watermark");
var subtitleoverlay_1 = require("./components/subtitleoverlay");
var settingspanel_1 = require("./components/settingspanel");
var seekbarlabel_1 = require("./components/seekbarlabel");
var playbacktoggleoverlay_1 = require("./components/playbacktoggleoverlay");
var pictureinpicturetogglebutton_1 = require("./components/pictureinpicturetogglebutton");
var spacer_1 = require("./components/spacer");
var container_1 = require("./components/container");
var volumetogglebutton_1 = require("./components/volumetogglebutton");
var playbacktogglebutton_1 = require("./components/playbacktogglebutton");
var seekbar_1 = require("./components/seekbar");
var videoqualityselectbox_1 = require("./components/videoqualityselectbox");
var uimanager_1 = require("./uimanager");
var titlebar_1 = require("./components/titlebar");
var bufferingoverlay_1 = require("./components/bufferingoverlay");
var subtitlelistbox_1 = require("./components/subtitlelistbox");
var audiotracklistbox_1 = require("./components/audiotracklistbox");
var settingspanelitem_1 = require("./components/settingspanelitem");
var settingspanelpage_1 = require("./components/settingspanelpage");
var uifactory_1 = require("./uifactory");
var main_1 = require("./main");
var DemoFactory;
(function (DemoFactory) {
    function buildDemoWithSeparateAudioSubtitlesButtons(player, config) {
        if (config === void 0) { config = {}; }
        // show smallScreen UI only on mobile/handheld devices
        var smallScreenSwitchWidth = 600;
        return new uimanager_1.UIManager(player, [{
                ui: uifactory_1.UIFactory.modernSmallScreenAdsUI(),
                condition: function (context) {
                    return context.isMobile && context.documentWidth < smallScreenSwitchWidth
                        && context.isAd && context.adRequiresUi;
                },
            }, {
                ui: uifactory_1.UIFactory.modernAdsUI(),
                condition: function (context) {
                    return context.isAd && context.adRequiresUi;
                },
            }, {
                ui: uifactory_1.UIFactory.modernSmallScreenUI(),
                condition: function (context) {
                    return context.isMobile && context.documentWidth < smallScreenSwitchWidth;
                },
            }, {
                ui: modernUIWithSeparateAudioSubtitlesButtons(),
            }], config);
    }
    DemoFactory.buildDemoWithSeparateAudioSubtitlesButtons = buildDemoWithSeparateAudioSubtitlesButtons;
    function modernUIWithSeparateAudioSubtitlesButtons() {
        var subtitleOverlay = new subtitleoverlay_1.SubtitleOverlay();
        var settingsPanel = new settingspanel_1.SettingsPanel({
            components: [
                new settingspanelpage_1.SettingsPanelPage({
                    components: [
                        new settingspanelitem_1.SettingsPanelItem('Video Quality', new videoqualityselectbox_1.VideoQualitySelectBox()),
                        new settingspanelitem_1.SettingsPanelItem('Speed', new playbackspeedselectbox_1.PlaybackSpeedSelectBox()),
                        new settingspanelitem_1.SettingsPanelItem('Audio Quality', new audioqualityselectbox_1.AudioQualitySelectBox()),
                    ],
                }),
            ],
            hidden: true,
        });
        var subtitleListBox = new subtitlelistbox_1.SubtitleListBox();
        var subtitleSettingsPanel = new settingspanel_1.SettingsPanel({
            components: [
                new settingspanelpage_1.SettingsPanelPage({
                    components: [
                        new settingspanelitem_1.SettingsPanelItem(null, subtitleListBox),
                    ],
                }),
            ],
            hidden: true,
        });
        var audioTrackListBox = new audiotracklistbox_1.AudioTrackListBox();
        var audioTrackSettingsPanel = new settingspanel_1.SettingsPanel({
            components: [
                new settingspanelpage_1.SettingsPanelPage({
                    components: [
                        new settingspanelitem_1.SettingsPanelItem(null, audioTrackListBox),
                    ],
                }),
            ],
            hidden: true,
        });
        var controlBar = new controlbar_1.ControlBar({
            components: [
                audioTrackSettingsPanel,
                subtitleSettingsPanel,
                settingsPanel,
                new container_1.Container({
                    components: [
                        new playbacktimelabel_1.PlaybackTimeLabel({ timeLabelMode: playbacktimelabel_1.PlaybackTimeLabelMode.CurrentTime, hideInLivePlayback: true }),
                        new seekbar_1.SeekBar({ label: new seekbarlabel_1.SeekBarLabel() }),
                        new playbacktimelabel_1.PlaybackTimeLabel({ timeLabelMode: playbacktimelabel_1.PlaybackTimeLabelMode.TotalTime, cssClasses: ['text-right'] }),
                    ],
                    cssClasses: ['controlbar-top'],
                }),
                new container_1.Container({
                    components: [
                        new playbacktogglebutton_1.PlaybackToggleButton(),
                        new main_1.QuickSeekButton({ seekSeconds: -10 }),
                        new main_1.QuickSeekButton({ seekSeconds: 10 }),
                        new volumetogglebutton_1.VolumeToggleButton(),
                        new volumeslider_1.VolumeSlider(),
                        new spacer_1.Spacer(),
                        new pictureinpicturetogglebutton_1.PictureInPictureToggleButton(),
                        new airplaytogglebutton_1.AirPlayToggleButton(),
                        new casttogglebutton_1.CastToggleButton(),
                        new vrtogglebutton_1.VRToggleButton(),
                        new settingstogglebutton_1.SettingsToggleButton({
                            settingsPanel: audioTrackSettingsPanel,
                            cssClass: 'ui-audiotracksettingstogglebutton',
                        }),
                        new settingstogglebutton_1.SettingsToggleButton({
                            settingsPanel: subtitleSettingsPanel,
                            cssClass: 'ui-subtitlesettingstogglebutton',
                        }),
                        new settingstogglebutton_1.SettingsToggleButton({ settingsPanel: settingsPanel }),
                        new fullscreentogglebutton_1.FullscreenToggleButton(),
                    ],
                    cssClasses: ['controlbar-bottom'],
                }),
            ],
        });
        return new uicontainer_1.UIContainer({
            components: [
                subtitleOverlay,
                new bufferingoverlay_1.BufferingOverlay(),
                new playbacktoggleoverlay_1.PlaybackToggleOverlay(),
                new caststatusoverlay_1.CastStatusOverlay(),
                controlBar,
                new titlebar_1.TitleBar(),
                new recommendationoverlay_1.RecommendationOverlay(),
                new watermark_1.Watermark(),
                new errormessageoverlay_1.ErrorMessageOverlay(),
            ],
        });
    }
})(DemoFactory = exports.DemoFactory || (exports.DemoFactory = {}));

},{"./components/airplaytogglebutton":7,"./components/audioqualityselectbox":8,"./components/audiotracklistbox":9,"./components/bufferingoverlay":11,"./components/caststatusoverlay":13,"./components/casttogglebutton":14,"./components/container":19,"./components/controlbar":20,"./components/errormessageoverlay":23,"./components/fullscreentogglebutton":24,"./components/pictureinpicturetogglebutton":32,"./components/playbackspeedselectbox":33,"./components/playbacktimelabel":34,"./components/playbacktogglebutton":35,"./components/playbacktoggleoverlay":36,"./components/recommendationoverlay":38,"./components/seekbar":40,"./components/seekbarlabel":43,"./components/settingspanel":45,"./components/settingspanelitem":46,"./components/settingspanelpage":47,"./components/settingstogglebutton":51,"./components/spacer":52,"./components/subtitlelistbox":53,"./components/subtitleoverlay":54,"./components/titlebar":71,"./components/uicontainer":74,"./components/videoqualityselectbox":75,"./components/volumeslider":77,"./components/volumetogglebutton":78,"./components/vrtogglebutton":79,"./components/watermark":80,"./main":94,"./uifactory":113,"./uimanager":114}],82:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.DOM = void 0;
/**
 * Simple DOM manipulation and DOM element event handling modeled after jQuery (as replacement for jQuery).
 *
 * Like jQuery, DOM operates on single elements and lists of elements. For example: creating an element returns a DOM
 * instance with a single element, selecting elements returns a DOM instance with zero, one, or many elements. Similar
 * to jQuery, setters usually affect all elements, while getters operate on only the first element.
 * Also similar to jQuery, most methods (except getters) return the DOM instance facilitating easy chaining of method
 * calls.
 *
 * Built with the help of: http://youmightnotneedjquery.com/
 */
var DOM = /** @class */ (function () {
    function DOM(something, attributes, component) {
        this.document = document; // Set the global document to the local document field
        if (something instanceof Array) {
            if (something.length > 0 && something[0] instanceof HTMLElement) {
                var elements = something;
                this.elements = elements;
            }
        }
        else if (something instanceof HTMLElement) {
            var element = something;
            this.elements = [element];
        }
        else if (something instanceof Document) {
            // When a document is passed in, we do not do anything with it, but by setting this.elements to null
            // we give the event handling method a means to detect if the events should be registered on the document
            // instead of elements.
            this.elements = null;
        }
        else if (attributes) {
            var tagName = something;
            var element = document.createElement(tagName);
            for (var attributeName in attributes) {
                var attributeValue = attributes[attributeName];
                if (attributeValue != null) {
                    element.setAttribute(attributeName, attributeValue);
                }
            }
            if (component) {
                element.component = component;
            }
            this.elements = [element];
        }
        else {
            var selector = something;
            this.elements = this.findChildElements(selector);
        }
    }
    Object.defineProperty(DOM.prototype, "length", {
        /**
         * Gets the number of elements that this DOM instance currently holds.
         * @returns {number} the number of elements
         */
        get: function () {
            return this.elements ? this.elements.length : 0;
        },
        enumerable: false,
        configurable: true
    });
    DOM.prototype.get = function (index) {
        if (index === undefined) {
            return this.elements;
        }
        else if (!this.elements || index >= this.elements.length || index < -this.elements.length) {
            return undefined;
        }
        else if (index < 0) {
            return this.elements[this.elements.length - index];
        }
        else {
            return this.elements[index];
        }
    };
    /**
     * A shortcut method for iterating all elements. Shorts this.elements.forEach(...) to this.forEach(...).
     * @param handler the handler to execute an operation on an element
     */
    DOM.prototype.forEach = function (handler) {
        if (!this.elements) {
            return;
        }
        this.elements.forEach(function (element) {
            handler(element);
        });
    };
    DOM.prototype.findChildElementsOfElement = function (element, selector) {
        var childElements = element.querySelectorAll(selector);
        // Convert NodeList to Array
        // https://toddmotto.com/a-comprehensive-dive-into-nodelists-arrays-converting-nodelists-and-understanding-the-dom/
        return [].slice.call(childElements);
    };
    DOM.prototype.findChildElements = function (selector) {
        var _this = this;
        var allChildElements = [];
        if (this.elements) {
            this.forEach(function (element) {
                allChildElements = allChildElements.concat(_this.findChildElementsOfElement(element, selector));
            });
        }
        else {
            return this.findChildElementsOfElement(document, selector);
        }
        return allChildElements;
    };
    /**
     * Finds all child elements of all elements matching the supplied selector.
     * @param selector the selector to match with child elements
     * @returns {DOM} a new DOM instance representing all matched children
     */
    DOM.prototype.find = function (selector) {
        var allChildElements = this.findChildElements(selector);
        return new DOM(allChildElements);
    };
    /**
     * Focuses to the first input element
     */
    DOM.prototype.focusToFirstInput = function () {
        var inputElements = this.findChildElements('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');
        if (inputElements.length > 0) {
            inputElements[0].focus();
        }
    };
    /**
     * Focuses to the first input element
     */
    DOM.prototype.scrollTo = function (x, y) {
        this.elements[0].scrollTo(x, y);
    };
    DOM.prototype.html = function (content) {
        if (arguments.length > 0) {
            return this.setHtml(content);
        }
        else {
            return this.getHtml();
        }
    };
    DOM.prototype.getHtml = function () {
        return this.elements[0].innerHTML;
    };
    DOM.prototype.setHtml = function (content) {
        if (content === undefined || content == null) {
            // Set to empty string to avoid innerHTML getting set to 'undefined' (all browsers) or 'null' (IE9)
            content = '';
        }
        this.forEach(function (element) {
            element.innerHTML = content;
        });
        return this;
    };
    /**
     * Clears the inner HTML of all elements (deletes all children).
     * @returns {DOM}
     */
    DOM.prototype.empty = function () {
        this.forEach(function (element) {
            element.innerHTML = '';
        });
        return this;
    };
    /**
     * Returns the current value of the first form element, e.g. the selected value of a select box or the text if an
     * input field.
     * @returns {string} the value of a form element
     */
    DOM.prototype.val = function () {
        var element = this.elements[0];
        if (element instanceof HTMLSelectElement || element instanceof HTMLInputElement) {
            return element.value;
        }
        else {
            // TODO add support for missing form elements
            throw new Error("val() not supported for ".concat(typeof element));
        }
    };
    DOM.prototype.attr = function (attribute, value) {
        if (arguments.length > 1) {
            return this.setAttr(attribute, value);
        }
        else {
            return this.getAttr(attribute);
        }
    };
    /**
     * Removes the attribute of the element.
     * @param attribute
     */
    DOM.prototype.removeAttr = function (attribute) {
        this.forEach(function (element) {
            element.removeAttribute(attribute);
        });
    };
    DOM.prototype.getAttr = function (attribute) {
        return this.elements[0].getAttribute(attribute);
    };
    DOM.prototype.setAttr = function (attribute, value) {
        this.forEach(function (element) {
            element.setAttribute(attribute, value);
        });
        return this;
    };
    DOM.prototype.data = function (dataAttribute, value) {
        if (arguments.length > 1) {
            return this.setData(dataAttribute, value);
        }
        else {
            return this.getData(dataAttribute);
        }
    };
    DOM.prototype.getData = function (dataAttribute) {
        return this.elements[0].getAttribute('data-' + dataAttribute);
    };
    DOM.prototype.setData = function (dataAttribute, value) {
        this.forEach(function (element) {
            element.setAttribute('data-' + dataAttribute, value);
        });
        return this;
    };
    /**
     * Appends one or more DOM elements as children to all elements.
     * @param childElements the chrild elements to append
     * @returns {DOM}
     */
    DOM.prototype.append = function () {
        var childElements = [];
        for (var _i = 0; _i < arguments.length; _i++) {
            childElements[_i] = arguments[_i];
        }
        this.forEach(function (element) {
            childElements.forEach(function (childElement) {
                childElement.elements.forEach(function (_, index) {
                    element.appendChild(childElement.elements[index]);
                });
            });
        });
        return this;
    };
    /**
     * Removes all elements from the DOM.
     */
    DOM.prototype.remove = function () {
        this.forEach(function (element) {
            var parent = element.parentNode;
            if (parent) {
                parent.removeChild(element);
            }
        });
    };
    /**
     * Returns the offset of the first element from the document's top left corner.
     * @returns {Offset}
     */
    DOM.prototype.offset = function () {
        var element = this.elements[0];
        var elementRect = element.getBoundingClientRect();
        var htmlRect = document.body.parentElement.getBoundingClientRect();
        // Virtual viewport scroll handling (e.g. pinch zoomed viewports in mobile browsers or desktop Chrome/Edge)
        // 'normal' zooms and virtual viewport zooms (aka layout viewport) result in different
        // element.getBoundingClientRect() results:
        //  - with normal scrolls, the clientRect decreases with an increase in scroll(Top|Left)/page(X|Y)Offset
        //  - with pinch zoom scrolls, the clientRect stays the same while scroll/pageOffset changes
        // This means, that the combination of clientRect + scroll/pageOffset does not work to calculate the offset
        // from the document's upper left origin when pinch zoom is used.
        // To work around this issue, we do not use scroll/pageOffset but get the clientRect of the html element and
        // subtract it from the element's rect, which always results in the offset from the document origin.
        // NOTE: the current way of offset calculation was implemented specifically to track event positions on the
        // seek bar, and it might break compatibility with jQuery's offset() method. If this ever turns out to be a
        // problem, this method should be reverted to the old version and the offset calculation moved to the seek bar.
        return {
            top: elementRect.top - htmlRect.top,
            left: elementRect.left - htmlRect.left,
        };
    };
    /**
     * Returns the width of the first element.
     * @returns {number} the width of the first element
     */
    DOM.prototype.width = function () {
        // TODO check if this is the same as jQuery's width() (probably not)
        return this.elements[0].offsetWidth;
    };
    /**
     * Returns the height of the first element.
     * @returns {number} the height of the first element
     */
    DOM.prototype.height = function () {
        // TODO check if this is the same as jQuery's height() (probably not)
        return this.elements[0].offsetHeight;
    };
    /**
     * Returns the size of the first element.
     * @return {Size} the size of the first element
     */
    DOM.prototype.size = function () {
        return { width: this.width(), height: this.height() };
    };
    /**
     * Attaches an event handler to one or more events on all elements.
     * @param eventName the event name (or multiple names separated by space) to listen to
     * @param eventHandler the event handler to call when the event fires
     * @param options the options for this event handler
     * @returns {DOM}
     */
    DOM.prototype.on = function (eventName, eventHandler, options) {
        var _this = this;
        var events = eventName.split(' ');
        events.forEach(function (event) {
            if (_this.elements == null) {
                _this.document.addEventListener(event, eventHandler, options);
            }
            else {
                _this.forEach(function (element) {
                    element.addEventListener(event, eventHandler, options);
                });
            }
        });
        return this;
    };
    /**
     * Removes an event handler from one or more events on all elements.
     * @param eventName the event name (or multiple names separated by space) to remove the handler from
     * @param eventHandler the event handler to remove
     * @param options the options for this event handler
     * @returns {DOM}
     */
    DOM.prototype.off = function (eventName, eventHandler, options) {
        var _this = this;
        var events = eventName.split(' ');
        events.forEach(function (event) {
            if (_this.elements == null) {
                _this.document.removeEventListener(event, eventHandler, options);
            }
            else {
                _this.forEach(function (element) {
                    element.removeEventListener(event, eventHandler, options);
                });
            }
        });
        return this;
    };
    /**
     * Adds the specified class(es) to all elements.
     * @param className the class(es) to add, multiple classes separated by space
     * @returns {DOM}
     */
    DOM.prototype.addClass = function (className) {
        this.forEach(function (element) {
            var _a;
            if (element.classList) {
                var classNames = className.split(' ')
                    .filter(function (className) { return className.length > 0; });
                if (classNames.length > 0) {
                    (_a = element.classList).add.apply(_a, classNames);
                }
            }
            else {
                element.className += ' ' + className;
            }
        });
        return this;
    };
    /**
     * Removed the specified class(es) from all elements.
     * @param className the class(es) to remove, multiple classes separated by space
     * @returns {DOM}
     */
    DOM.prototype.removeClass = function (className) {
        this.forEach(function (element) {
            var _a;
            if (element.classList) {
                var classNames = className.split(' ')
                    .filter(function (className) { return className.length > 0; });
                if (classNames.length > 0) {
                    (_a = element.classList).remove.apply(_a, classNames);
                }
            }
            else {
                element.className = element.className.replace(new RegExp('(^|\\b)' + className.split(' ').join('|') + '(\\b|$)', 'gi'), ' ');
            }
        });
        return this;
    };
    /**
     * Checks if any of the elements has the specified class.
     * @param className the class name to check
     * @returns {boolean} true if one of the elements has the class attached, else if no element has it attached
     */
    DOM.prototype.hasClass = function (className) {
        var hasClass = false;
        this.forEach(function (element) {
            if (element.classList) {
                if (element.classList.contains(className)) {
                    // Since we are inside a handler, we can't just 'return true'. Instead, we save it to a variable
                    // and return it at the end of the function body.
                    hasClass = true;
                }
            }
            else {
                if (new RegExp('(^| )' + className + '( |$)', 'gi').test(element.className)) {
                    // See comment above
                    hasClass = true;
                }
            }
        });
        return hasClass;
    };
    DOM.prototype.css = function (propertyNameOrCollection, value) {
        if (typeof propertyNameOrCollection === 'string') {
            var propertyName = propertyNameOrCollection;
            if (arguments.length === 2) {
                return this.setCss(propertyName, value);
            }
            else {
                return this.getCss(propertyName);
            }
        }
        else {
            var propertyValueCollection = propertyNameOrCollection;
            return this.setCssCollection(propertyValueCollection);
        }
    };
    /**
     * Removes an inline CSS property if it exists
     * @param propertyName name of the property to remove
     * @param elementIndex index of the element whose CSS property should get removed
     */
    DOM.prototype.removeCss = function (propertyName, elementIndex) {
        if (elementIndex === void 0) { elementIndex = 0; }
        return this.elements[elementIndex].style.removeProperty(propertyName);
    };
    DOM.prototype.getCss = function (propertyName) {
        return getComputedStyle(this.elements[0])[propertyName];
    };
    DOM.prototype.setCss = function (propertyName, value) {
        this.forEach(function (element) {
            // <any> cast to resolve TS7015: http://stackoverflow.com/a/36627114/370252
            element.style[propertyName] = value;
        });
        return this;
    };
    DOM.prototype.setCssCollection = function (ruleValueCollection) {
        this.forEach(function (element) {
            // http://stackoverflow.com/a/34490573/370252
            Object.assign(element.style, ruleValueCollection);
        });
        return this;
    };
    return DOM;
}());
exports.DOM = DOM;

},{}],83:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.ErrorUtils = void 0;
/**
 * @category Utils
 */
var ErrorUtils;
(function (ErrorUtils) {
    ErrorUtils.defaultErrorMessages = {
        1000: 'Error is unknown',
        1001: 'The player API is not available after a call to PlayerAPI.destroy.',
        1100: 'General setup error',
        1101: 'There was an error when inserting the HTML video element',
        1102: 'No configuration was provided',
        1103: 'The license is not valid',
        1104: 'The the domain-locked player is not authorized to playback on this domain',
        1105: 'The domain is not allowlisted',
        1106: 'The license server URL is invalid',
        1107: 'The impression server URL is invalid',
        1108: 'Could not initialize a rendering engine',
        1109: 'The used flash version does not support playback',
        1110: 'Native Flash is not authorized by a valid Adobe token',
        1111: 'Flash doesn\'t have sufficient resources',
        1112: 'Flash container API not available',
        1113: 'Protocol not supported. This site has been loaded using "file" protocol, but unfortunately this is not supported. Please load the page using a web server (using http or https)',
        1200: 'General source error',
        1201: 'No valid source was provided',
        1202: 'The downloaded manifest is invalid',
        1203: 'There was no technology detected to playback the provided source',
        1204: 'The stream type is not supported',
        1205: 'The forced technology is not supported',
        1206: 'No stream found for supported technologies.',
        1207: 'The downloaded segment is empty',
        1208: 'The manifest could not be loaded',
        1209: 'Progressive stream type not supported or the stream has an error',
        1210: 'HLS stream has an error',
        1211: 'The encryption method is not supported',
        1300: 'General playback error',
        1301: 'Video decoder or demuxer had an error with the content',
        1302: 'General error if Flash renderer has an error',
        1303: 'Flash doesn\'t have sufficient resources',
        1304: 'The transmuxer could not be initialized',
        1400: 'Network error while downloading',
        1401: 'The manifest download timed out',
        1402: 'The segment download timed out',
        1403: 'The progressive stream download timed out',
        1404: 'The Certificate could not be loaded',
        2000: 'General DRM error',
        2001: 'Required DRM configuration is missing',
        2002: 'The licensing server URL is missing',
        2003: 'License request failed',
        2004: 'Key or KeyId is missing',
        2005: 'Key size is not supported',
        2006: 'Unable to instantiate a key system supporting the required combinations',
        2007: 'Unable to create or initialize key session',
        2008: 'The MediaKey object could not be created/initialized',
        2009: 'Key error',
        2010: 'The key system is not supported',
        2011: 'The certificate is not valid',
        2012: 'Invalid header key/value pair for PlayReady license request',
        2013: 'Content cannot be played back because the output is restricted on this machine',
        2014: 'DRM error for the Flash renderer',
        2100: 'General VR error',
        2101: 'Player technology not compatible with VR playback',
        3000: 'General module error',
        3001: 'The definition of the module is invalid (e.g. incomplete).',
        3002: 'The module definition specifies dependencies but the module is not provided via a function for deferred loading.',
        3003: 'A module cannot be loaded because it has not been added to the player core.',
        3004: 'A module cannot be loaded because one or more dependencies are missing.',
        3100: 'An Advertising module error has occurred. Refer to the attached AdvertisingError.',
    };
    ErrorUtils.defaultMobileV3ErrorMessageTranslator = function (error) {
        return error.message;
    };
    ErrorUtils.defaultWebErrorMessageTranslator = function (error) {
        var errorMessage = ErrorUtils.defaultErrorMessages[error.code];
        if (errorMessage) {
            // Use the error message text if there is one
            return "".concat(errorMessage, "\n(").concat(error.name, ")"); // default error message style
        }
        else {
            // Fallback to error code/name if no message is defined
            return "".concat(error.code, " ").concat(error.name);
        }
    };
})(ErrorUtils = exports.ErrorUtils || (exports.ErrorUtils = {}));

},{}],84:[function(require,module,exports){
"use strict";
var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        if (typeof b !== "function" && b !== null)
            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
exports.EventDispatcher = void 0;
var arrayutils_1 = require("./arrayutils");
var timeout_1 = require("./timeout");
/**
 * Event dispatcher to subscribe and trigger events. Each event should have its own dispatcher.
 */
var EventDispatcher = /** @class */ (function () {
    function EventDispatcher() {
        this.listeners = [];
    }
    /**
     * {@inheritDoc}
     */
    EventDispatcher.prototype.subscribe = function (listener) {
        this.listeners.push(new EventListenerWrapper(listener));
    };
    /**
     * {@inheritDoc}
     */
    EventDispatcher.prototype.subscribeOnce = function (listener) {
        this.listeners.push(new EventListenerWrapper(listener, true));
    };
    /**
     * {@inheritDoc}
     */
    EventDispatcher.prototype.subscribeRateLimited = function (listener, rateMs) {
        this.listeners.push(new RateLimitedEventListenerWrapper(listener, rateMs));
    };
    /**
     * {@inheritDoc}
     */
    EventDispatcher.prototype.unsubscribe = function (listener) {
        // Iterate through listeners, compare with parameter, and remove if found
        // NOTE: In case we ever remove all matching listeners instead of just the first, we need to reverse-iterate here
        for (var i = 0; i < this.listeners.length; i++) {
            var subscribedListener = this.listeners[i];
            if (subscribedListener.listener === listener) {
                subscribedListener.clear();
                arrayutils_1.ArrayUtils.remove(this.listeners, subscribedListener);
                return true;
            }
        }
        return false;
    };
    /**
     * Removes all listeners from this dispatcher.
     */
    EventDispatcher.prototype.unsubscribeAll = function () {
        // In case of RateLimitedEventListenerWrapper we need to make sure that the timeout callback won't be called
        for (var _i = 0, _a = this.listeners; _i < _a.length; _i++) {
            var listener = _a[_i];
            listener.clear();
        }
        this.listeners = [];
    };
    /**
     * Dispatches an event to all subscribed listeners.
     * @param sender the source of the event
     * @param args the arguments for the event
     */
    EventDispatcher.prototype.dispatch = function (sender, args) {
        if (args === void 0) { args = null; }
        var listenersToRemove = [];
        // Call every listener
        // We iterate over a copy of the array of listeners to avoid the case where events are not fired on listeners when
        // listeners are unsubscribed from within the event handlers during a dispatch (because the indices change and
        // listeners are shifted within the array).
        // This means that listener x+1 will still be called if unsubscribed from within the handler of listener x, as well
        // as listener y+1 will not be called when subscribed from within the handler of listener y.
        // Array.slice(0) is the fastest array copy method according to: https://stackoverflow.com/a/21514254/370252
        var listeners = this.listeners.slice(0);
        for (var _i = 0, listeners_1 = listeners; _i < listeners_1.length; _i++) {
            var listener = listeners_1[_i];
            listener.fire(sender, args);
            if (listener.isOnce()) {
                listenersToRemove.push(listener);
            }
        }
        // Remove one-time listener
        for (var _a = 0, listenersToRemove_1 = listenersToRemove; _a < listenersToRemove_1.length; _a++) {
            var listenerToRemove = listenersToRemove_1[_a];
            arrayutils_1.ArrayUtils.remove(this.listeners, listenerToRemove);
        }
    };
    /**
     * Returns the event that this dispatcher manages and on which listeners can subscribe and unsubscribe event handlers.
     * @returns {Event}
     */
    EventDispatcher.prototype.getEvent = function () {
        // For now, just cast the event dispatcher to the event interface. At some point in the future when the
        // codebase grows, it might make sense to split the dispatcher into separate dispatcher and event classes.
        return this;
    };
    return EventDispatcher;
}());
exports.EventDispatcher = EventDispatcher;
/**
 * A basic event listener wrapper to manage listeners within the {@link EventDispatcher}. This is a 'private' class
 * for internal dispatcher use and it is therefore not exported.
 */
var EventListenerWrapper = /** @class */ (function () {
    function EventListenerWrapper(listener, once) {
        if (once === void 0) { once = false; }
        this.eventListener = listener;
        this.once = once;
    }
    Object.defineProperty(EventListenerWrapper.prototype, "listener", {
        /**
         * Returns the wrapped event listener.
         * @returns {EventListener<Sender, Args>}
         */
        get: function () {
            return this.eventListener;
        },
        enumerable: false,
        configurable: true
    });
    /**
     * Fires the wrapped event listener with the given arguments.
     * @param sender
     * @param args
     */
    EventListenerWrapper.prototype.fire = function (sender, args) {
        this.eventListener(sender, args);
    };
    /**
     * Checks if this listener is scheduled to be called only once.
     * @returns {boolean} once if true
     */
    EventListenerWrapper.prototype.isOnce = function () {
        return this.once;
    };
    EventListenerWrapper.prototype.clear = function () {
    };
    return EventListenerWrapper;
}());
/**
 * Extends the basic {@link EventListenerWrapper} with rate-limiting functionality.
 */
var RateLimitedEventListenerWrapper = /** @class */ (function (_super) {
    __extends(RateLimitedEventListenerWrapper, _super);
    function RateLimitedEventListenerWrapper(listener, rateMs) {
        var _this = _super.call(this, listener) || this;
        _this.rateMs = rateMs;
        // starting limiting the events to the given value
        var startRateLimiting = function () {
            _this.rateLimitTimout.start();
        };
        // timout for limiting the events
        _this.rateLimitTimout = new timeout_1.Timeout(_this.rateMs, function () {
            if (_this.lastSeenEvent) {
                _this.fireSuper(_this.lastSeenEvent.sender, _this.lastSeenEvent.args);
                startRateLimiting(); // start rateLimiting again to keep rate limit active even after firing the last seen event
                _this.lastSeenEvent = null;
            }
        });
        // In case the events stopping during the rateLimiting we need to track the last seen one and delegate after the
        // rate limiting is finished. This prevents missing the last update due to the rate limit.
        _this.rateLimitingEventListener = function (sender, args) {
            // only fire events if the rateLimiting is not running
            if (_this.shouldFireEvent()) {
                _this.fireSuper(sender, args);
                startRateLimiting();
                return;
            }
            _this.lastSeenEvent = {
                sender: sender,
                args: args,
            };
        };
        return _this;
    }
    RateLimitedEventListenerWrapper.prototype.shouldFireEvent = function () {
        return !this.rateLimitTimout.isActive();
    };
    RateLimitedEventListenerWrapper.prototype.fireSuper = function (sender, args) {
        // Fire the actual external event listener
        _super.prototype.fire.call(this, sender, args);
    };
    RateLimitedEventListenerWrapper.prototype.fire = function (sender, args) {
        // Fire the internal rate-limiting listener instead of the external event listener
        this.rateLimitingEventListener(sender, args);
    };
    RateLimitedEventListenerWrapper.prototype.clear = function () {
        _super.prototype.clear.call(this);
        this.rateLimitTimout.clear();
    };
    return RateLimitedEventListenerWrapper;
}(EventListenerWrapper));

},{"./arrayutils":1,"./timeout":111}],85:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.FocusVisibilityTracker = void 0;
var FocusVisibleCssClassName = 'bmpui-focus-visible';
var FocusVisibilityTracker = /** @class */ (function () {
    function FocusVisibilityTracker(bitmovinUiPrefix) {
        var _this = this;
        this.bitmovinUiPrefix = bitmovinUiPrefix;
        this.lastInteractionWasKeyboard = true;
        this.onKeyDown = function (e) {
            if (e.metaKey || e.altKey || e.ctrlKey) {
                return;
            }
            _this.lastInteractionWasKeyboard = true;
        };
        this.onMouseOrPointerOrTouch = function () { return (_this.lastInteractionWasKeyboard = false); };
        this.onFocus = function (_a) {
            var element = _a.target;
            if (_this.lastInteractionWasKeyboard &&
                isHtmlElement(element) &&
                isBitmovinUi(element, _this.bitmovinUiPrefix) &&
                !element.classList.contains(FocusVisibleCssClassName)) {
                element.classList.add(FocusVisibleCssClassName);
            }
        };
        this.onBlur = function (_a) {
            var element = _a.target;
            if (isHtmlElement(element)) {
                element.classList.remove(FocusVisibleCssClassName);
            }
        };
        this.eventHandlerMap = {
            mousedown: this.onMouseOrPointerOrTouch,
            pointerdown: this.onMouseOrPointerOrTouch,
            touchstart: this.onMouseOrPointerOrTouch,
            keydown: this.onKeyDown,
            focus: this.onFocus,
            blur: this.onBlur,
        };
        this.registerEventListeners();
    }
    FocusVisibilityTracker.prototype.registerEventListeners = function () {
        for (var event_1 in this.eventHandlerMap) {
            document.addEventListener(event_1, this.eventHandlerMap[event_1], true);
        }
    };
    FocusVisibilityTracker.prototype.unregisterEventListeners = function () {
        for (var event_2 in this.eventHandlerMap) {
            document.removeEventListener(event_2, this.eventHandlerMap[event_2], true);
        }
    };
    FocusVisibilityTracker.prototype.release = function () {
        this.unregisterEventListeners();
    };
    return FocusVisibilityTracker;
}());
exports.FocusVisibilityTracker = FocusVisibilityTracker;
function isBitmovinUi(element, bitmovinUiPrefix) {
    return element.id.indexOf(bitmovinUiPrefix) === 0;
}
function isHtmlElement(element) {
    return (element instanceof HTMLElement && element.classList instanceof DOMTokenList);
}

},{}],86:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.GroupPlaybackSuspensionReason = void 0;
/**
 * The Group Playback API offers control over synchronized playback of a group of clients, e.g. for Apple SharePlay
 * sessions.

 * Note: The API currently only covers the immediate needs of the iOS SDK in combination with our UI which is regarding
 * temporarily suspending synchronization of the player from the group. But it is open to be extended as needed in the
 * future.
 */
/**
 * Reason for suspending the synchronization with the group.
 */
var GroupPlaybackSuspensionReason;
(function (GroupPlaybackSuspensionReason) {
    GroupPlaybackSuspensionReason["UserIsScrubbing"] = "userIsScrubbing";
})(GroupPlaybackSuspensionReason = exports.GroupPlaybackSuspensionReason || (exports.GroupPlaybackSuspensionReason = {}));

},{}],87:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.Guid = void 0;
var Guid;
(function (Guid) {
    var guid = 1;
    function next() {
        return guid++;
    }
    Guid.next = next;
})(Guid = exports.Guid || (exports.Guid = {}));

},{}],88:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.ImageLoader = void 0;
var dom_1 = require("./dom");
/**
 * Tracks the loading state of images.
 */
var ImageLoader = /** @class */ (function () {
    function ImageLoader() {
        this.state = {};
    }
    /**
     * Loads an image and call the callback once the image is loaded. If the image is already loaded, the callback
     * is called immediately, else it is called once loading has finished. Calling this method multiple times for the
     * same image while it is loading calls only let callback passed into the last call.
     * @param url The url to the image to load
     * @param loadedCallback The callback that is called when the image is loaded
     */
    ImageLoader.prototype.load = function (url, loadedCallback) {
        var _this = this;
        if (!this.state[url]) {
            // When the image was never attempted to be loaded before, we create a state and store it in the state map
            // for later use when the same image is requested to be loaded again.
            var state_1 = {
                url: url,
                image: new dom_1.DOM('img', {}),
                loadedCallback: loadedCallback,
                loaded: false,
                width: 0,
                height: 0,
            };
            this.state[url] = state_1;
            // Listen to the load event, update the state and call the callback once the image is loaded
            state_1.image.on('load', function (e) {
                state_1.loaded = true;
                state_1.width = state_1.image.get(0).width;
                state_1.height = state_1.image.get(0).height;
                _this.callLoadedCallback(state_1);
            });
            // Set the image URL to start the loading
            state_1.image.attr('src', state_1.url);
        }
        else {
            // We have a state for the requested image, so it is either already loaded or currently loading
            var state = this.state[url];
            // We overwrite the callback to make sure that only the callback of the latest call gets executed.
            // Earlier callbacks become invalid once a new load call arrives, and they are not called as long as the image
            // is not loaded.
            state.loadedCallback = loadedCallback;
            // When the image is already loaded, we directly execute the callback instead of waiting for the load event
            if (state.loaded) {
                this.callLoadedCallback(state);
            }
        }
    };
    ImageLoader.prototype.callLoadedCallback = function (state) {
        state.loadedCallback(state.url, state.width, state.height);
    };
    return ImageLoader;
}());
exports.ImageLoader = ImageLoader;

},{"./dom":82}],89:[function(require,module,exports){
"use strict";
var __assign = (this && this.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.i18n = exports.I18n = exports.defaultVocabularies = void 0;
var de_json_1 = __importDefault(require("./languages/de.json"));
var en_json_1 = __importDefault(require("./languages/en.json"));
var es_json_1 = __importDefault(require("./languages/es.json"));
var nl_json_1 = __importDefault(require("./languages/nl.json"));
exports.defaultVocabularies = {
    'en': en_json_1.default,
    'de': de_json_1.default,
    'es': es_json_1.default,
    'nl': nl_json_1.default,
};
var defaultLocalizationConfig = {
    language: 'en',
    vocabularies: exports.defaultVocabularies,
};
/**
 * @category Localization
 */
var I18n = /** @class */ (function () {
    function I18n(config) {
        this.setConfig(config);
    }
    I18n.prototype.setConfig = function (config) {
        var mergedConfig = __assign(__assign({}, defaultLocalizationConfig), config);
        var detectBrowserLanguage = mergedConfig.language === 'auto';
        var vocabularies = this.mergeVocabulariesWithDefaultVocabularies(mergedConfig.vocabularies);
        this.initializeLanguage(mergedConfig.language, detectBrowserLanguage, vocabularies);
        this.initializeVocabulary(vocabularies);
    };
    I18n.containsLanguage = function (vocabularies, language) {
        return vocabularies.hasOwnProperty(language);
    };
    I18n.prototype.mergeVocabulariesWithDefaultVocabularies = function (vocabularies) {
        if (vocabularies === void 0) { vocabularies = {}; }
        var rawVocabularies = __assign(__assign({}, exports.defaultVocabularies), vocabularies);
        return Object.keys(rawVocabularies).reduce(function (mergedVocabularies, language) {
            var _a;
            var vocabulary = rawVocabularies[language];
            if (I18n.containsLanguage(exports.defaultVocabularies, language) && I18n.containsLanguage(vocabularies, language)) {
                vocabulary = __assign(__assign({}, exports.defaultVocabularies[language]), vocabularies[language]);
            }
            return __assign(__assign({}, mergedVocabularies), (_a = {}, _a[language] = vocabulary, _a));
        }, {});
    };
    I18n.prototype.initializeLanguage = function (language, browserLanguageDetectionEnabled, vocabularies) {
        if (browserLanguageDetectionEnabled) {
            var userLanguage = window.navigator.language;
            if (I18n.containsLanguage(vocabularies, userLanguage)) {
                this.language = userLanguage;
                return;
            }
            var shortenedUserLanguage = userLanguage.slice(0, 2);
            if (I18n.containsLanguage(vocabularies, shortenedUserLanguage)) {
                this.language = shortenedUserLanguage;
                return;
            }
        }
        this.language = language;
    };
    I18n.prototype.initializeVocabulary = function (vocabularies) {
        this.vocabulary = ['en', this.language]
            .reduce(function (vocab, lang) { return (__assign(__assign({}, vocab), (vocabularies[lang] || {}))); }, {});
    };
    I18n.prototype.replaceVariableWithPlaceholderIfExists = function (text, config) {
        var matches = text.match(new RegExp('{[a-zA-Z0-9]+}', 'g'));
        if (matches.length === 0) {
            return text;
        }
        return matches
            .map(function (m) { return ({ match: m, key: m.slice(1, -1) }); })
            .reduce(function (str, _a) {
            var key = _a.key, match = _a.match;
            return config.hasOwnProperty(key) ? str.replace(match, config[key]) : str;
        }, text);
    };
    I18n.prototype.getLocalizer = function (key, config) {
        var _this = this;
        return function () {
            if (key == null) { // because sometimes we call toDomElement() without configuring the component or setting text...
                return undefined;
            }
            var vocabularyString = _this.vocabulary[key];
            if (vocabularyString == null) {
                vocabularyString = key;
            }
            if (config != null) {
                vocabularyString = _this.replaceVariableWithPlaceholderIfExists(vocabularyString, config);
            }
            return vocabularyString;
        };
    };
    I18n.prototype.performLocalization = function (text) {
        return typeof text === 'function' ? text() : text;
    };
    return I18n;
}());
exports.I18n = I18n;
/**
 * @category Localization
 */
exports.i18n = new I18n(defaultLocalizationConfig);

},{"./languages/de.json":90,"./languages/en.json":91,"./languages/es.json":92,"./languages/nl.json":93}],90:[function(require,module,exports){
module.exports={
  "settings.video.quality": "Videoqualität",
  "settings.audio.quality": "Audioqualität",
  "settings.audio.track": "Audiospur",
  "speed": "Geschwindigkeit",
  "play": "Abspielen",
  "pause": "Pause",
  "playPause": "Abspielen/Pause",
  "open": "öffnen",
  "close": "Schließen",
  "settings.audio.mute": "Stummschaltung",
  "settings.audio.volume": "Lautstärke",
  "pictureInPicture": "Bild im Bild",
  "appleAirplay": "Apple AirPlay",
  "googleCast": "Google Cast",
  "vr": "VR",
  "settings": "Einstellungen",
  "fullscreen": "Vollbild",
  "off": "aus",
  "settings.subtitles": "Untertitel",
  "settings.subtitles.font.size": "Größe",
  "settings.subtitles.font.family": "Schriftart",
  "settings.subtitles.font.color": "Farbe",
  "settings.subtitles.font.opacity": "Deckkraft",
  "settings.subtitles.characterEdge": "Ränder",
  "settings.subtitles.background.color": "Hintergrundfarbe",
  "settings.subtitles.background.opacity": "Hintergrunddeckkraft",
  "settings.subtitles.window.color": "Hintergrundfarbe",
  "settings.subtitles.window.opacity": "Hintergrunddeckkraft",
  "settings.time.hours": "Stunden",
  "settings.time.minutes": "Minuten",
  "settings.time.seconds": "Sekunden",
  "back": "Zurück",
  "reset": "Zurücksetzen",
  "replay": "Wiederholen",
  "ads.remainingTime": "Diese Anzeige endet in {remainingTime} Sekunden",
  "default": "standard",
  "colors.white": "weiß",
  "colors.black": "schwarz",
  "colors.red": "rot",
  "colors.green": "grün",
  "colors.blue": "blau",
  "colors.yellow": "gelb",
  "subtitle.example": "Beispiel Untertitel",
  "subtitle.select": "Untertitel auswählen",
  "playingOn": "Spielt auf <strong>{castDeviceName}</strong>",
  "connectingTo": "Verbindung mit <strong>{castDeviceName}</strong> wird hergestellt...",
  "watermarkLink": "Link zum Homepage",
  "controlBar": "Videoplayer Kontrollen",
  "player": "Video player",
  "seekBar": "Video-Timeline",
  "seekBar.value": "Wert",
  "seekBar.timeshift": "Timeshift",
  "seekBar.durationText": "aus",
  "quickseek.forward": "Vor",
  "quickseek.rewind": "Zurück",
  "ecoMode": "ecoMode",
  "ecoMode.title":"Eco Mode"
}

},{}],91:[function(require,module,exports){
module.exports={
  "settings.video.quality": "Video Quality",
  "settings.audio.quality": "Audio Quality",
  "settings.audio.track": "Audio Track",
  "settings.audio.mute" : "Mute",
  "settings.audio.volume" : "Volume",
  "settings.subtitles.window.color" : "Window color",
  "settings.subtitles.window.opacity" : "Window opacity",
  "settings.subtitles" : "Subtitles",
  "settings.subtitles.font.color" : "Font color",
  "settings.subtitles.font.opacity" : "Font opacity",
  "settings.subtitles.background.color" : "Background color",
  "settings.subtitles.background.opacity": "Background opacity",
  "colors.white": "white",
  "colors.black": "black",
  "colors.red": "red",
  "colors.green": "green",
  "colors.blue": "blue",
  "colors.cyan": "cyan",
  "colors.yellow": "yellow",
  "colors.magenta": "magenta",
  "percent": "{value}%",
  "settings.subtitles.font.size": "Font size",
  "settings.subtitles.characterEdge": "Character edge",
  "settings.subtitles.characterEdge.raised": "raised",
  "settings.subtitles.characterEdge.depressed": "depressed",
  "settings.subtitles.characterEdge.uniform": "uniform",
  "settings.subtitles.characterEdge.dropshadowed": "drop shadowed",
  "settings.subtitles.font.family": "Font family",
  "settings.subtitles.font.family.monospacedserif": "monospaced serif",
  "settings.subtitles.font.family.proportionalserif": "proportional serif",
  "settings.subtitles.font.family.monospacedsansserif": "monospaced sans serif",
  "settings.subtitles.font.family.proportionalsansserif": "proportional sans serif",
  "settings.subtitles.font.family.casual": "casual",
  "settings.subtitles.font.family.cursive": "cursive",
  "settings.subtitles.font.family.smallcapital": "small capital",
  "settings.time.hours": "Hours",
  "settings.time.minutes": "Minutes",
  "settings.time.seconds": "Seconds",
  "ads.remainingTime": "This ad will end in {remainingTime} seconds.",
  "settings": "Settings",
  "fullscreen" : "Fullscreen",
  "speed": "Speed",
  "playPause" : "Play/Pause",
  "play": "Play",
  "pause": "Pause",
  "open": "open",
  "close": "Close",
  "pictureInPicture": "Picture-in-Picture",
  "appleAirplay" : "Apple AirPlay",
  "googleCast": "Google Cast",
  "vr" : "VR",
  "off": "off",
  "auto": "auto",
  "ecoMode": "ecoMode",
  "ecoMode.title":"Eco Mode",
  "back" : "Back",
  "reset": "Reset",
  "replay": "Replay",
  "normal": "normal",
  "default": "default",
  "live": "Live",
  "subtitle.example": "example subtitle",
  "subtitle.select": "Select subtitle",
  "playingOn": "Playing on <strong>{castDeviceName}</strong>",
  "connectingTo": "Connecting to <strong>{castDeviceName}</strong>...",
  "watermarkLink": "Link to Homepage",
  "controlBar": "Video player controls",
  "player": "Video player",
  "seekBar": "Video timeline",
  "seekBar.value": "Value",
  "seekBar.timeshift": "Timeshift",
  "seekBar.durationText": "out of",
  "quickseek.forward": "Fast Forward",
  "quickseek.rewind": "Rewind"
}

},{}],92:[function(require,module,exports){
module.exports={
  "settings.video.quality": "Calidad de Video",
  "settings.audio.quality": "Calidad de Audio",
  "settings.audio.track": "Pista de Audio",
  "settings.audio.mute" : "Silencio",
  "settings.audio.volume" : "Volumen",
  "settings.subtitles.window.color" : "color de Ventana",
  "settings.subtitles.window.opacity" : "opacidad de Ventana",
  "settings.subtitles" : "Subtítulos",
  "settings.subtitles.font.color" : "color de Fuente",
  "settings.subtitles.font.opacity" : "opacidad de Fuente",
  "settings.subtitles.background.color" : "color de Fondo",
  "settings.subtitles.background.opacity": "opacidad de Fondo",
  "colors.white": "blanco",
  "colors.black": "negro",
  "colors.red": "rojo",
  "colors.green": "verde",
  "colors.blue": "azul",
  "colors.cyan": "cian",
  "colors.yellow": "amarillo",
  "colors.magenta": "magenta",
  "percent": "{value}%",
  "settings.subtitles.font.size": "tamaño de Fuente",
  "settings.subtitles.characterEdge": "borde del Caracter",
  "settings.subtitles.characterEdge.raised": "alzado",
  "settings.subtitles.characterEdge.depressed": "discreto",
  "settings.subtitles.characterEdge.uniform": "uniforme",
  "settings.subtitles.characterEdge.dropshadowed": "sombreado",
  "settings.subtitles.font.family": "tipo de Fuente",
  "settings.subtitles.font.family.monospacedserif": "monospaced serif",
  "settings.subtitles.font.family.proportionalserif": "proportional serif",
  "settings.subtitles.font.family.monospacedsansserif": "monospaced sans serif",
  "settings.subtitles.font.family.proportionalsansserif": "proportional sans serif",
  "settings.subtitles.font.family.casual": "casual",
  "settings.subtitles.font.family.cursive": "cursiva",
  "settings.subtitles.font.family.smallcapital": "small capital",
  "settings.time.hours": "Horas",
  "settings.time.minutes": "Minutos",
  "settings.time.seconds": "Segundos",
  "ads.remainingTime": "Este anuncio acabará en {remainingTime} segundos.",
  "settings": "Configuración",
  "fullscreen" : "Pantalla Completa",
  "speed": "Velocidad",
  "playPause" : "Reproducir/Pausa",
  "play": "Reproducir",
  "pause": "Pausa",
  "open": "Abrir",
  "close": "Cerrar",
  "pictureInPicture": "Imagen en Imagen",
  "appleAirplay" : "Apple AirPlay",
  "googleCast": "Google Cast",
  "vr" : "VR",
  "off": "off",
  "auto": "auto",
  "ecoMode": "ecoMode",
  "ecoMode.title": "Eco Mode",
  "back" : "Atrás",
  "reset": "Reiniciar",
  "replay": "Rebobinar",
  "normal": "normal",
  "default": "predeterminado",
  "live": "Directo",
  "subtitle.example": "Ejemplo de Subtítulo",
  "subtitle.select": "Seleccionar subtítulo",
  "playingOn": "Reproduciendo en <strong>{castDeviceName}</strong>",
  "connectingTo": "Conectando a <strong>{castDeviceName}</strong>...",
  "watermarkLink": "Enlace al inicio",
  "controlBar": "Controles del Reproductor",
  "player": "Reproductor de Video",
  "seekBar": "Línea de Tiempo",
  "seekBar.value": "posición",
  "seekBar.timeshift": "cambio de posición",
  "seekBar.durationText": "de",
  "quickseek.forward": "Adelantar",
  "quickseek.rewind": "Rebobinar"
}
},{}],93:[function(require,module,exports){
module.exports={
  "settings.video.quality": "Videokwaliteit",
  "settings.audio.quality": "Audiokwaliteit",
  "settings.audio.track": "Audiospoor",
  "settings.audio.mute": "Dempen",
  "settings.audio.volume": "Volume",
  "settings.subtitles.window.color": "Vensterkleur",
  "settings.subtitles.window.opacity": "Venster doorzichtigheid",
  "settings.subtitles": "Ondertiteling",
  "settings.subtitles.font.color": "Lettertype kleur",
  "settings.subtitles.font.opacity": "Lettertype doorzichtigheid",
  "settings.subtitles.background.color": "Achtergrondkleur",
  "settings.subtitles.background.opacity": "Achtergrond doorzichtigheid",
  "colors.white": "wit",
  "colors.black": "zwart",
  "colors.red": "rood",
  "colors.green": "groen",
  "colors.blue": "blauw",
  "colors.cyan": "cyaan",
  "colors.yellow": "geel",
  "colors.magenta": "magenta",
  "percent": "{value}%",
  "settings.subtitles.font.size": "Lettertype grootte",
  "settings.subtitles.characterEdge": "Lettertype rand",
  "settings.subtitles.characterEdge.raised": "verhoogd",
  "settings.subtitles.characterEdge.depressed": "verlaagd",
  "settings.subtitles.characterEdge.uniform": "uniform",
  "settings.subtitles.characterEdge.dropshadowed": "schaduw",
  "settings.subtitles.font.family": "Standaard lettertype",
  "settings.subtitles.font.family.monospacedserif": "monospace serif",
  "settings.subtitles.font.family.proportionalserif": "proportioneel serif",
  "settings.subtitles.font.family.monospacedsansserif": "monospace sans-serif",
  "settings.subtitles.font.family.proportionalsansserif": "proportioneel sans-serif",
  "settings.subtitles.font.family.casual": "casual",
  "settings.subtitles.font.family.cursive": "cursief",
  "settings.subtitles.font.family.smallcapital": "kleine hoofdletters",
  "settings.time.hours": "Uren",
  "settings.time.minutes": "Minuten",
  "settings.time.seconds": "Seconden",
  "ads.remainingTime": "Deze advertentie eindigt in {remainingTime} seconden.",
  "settings": "Instellingen",
  "fullscreen": "Volledig scherm",
  "speed": "Snelheid",
  "playPause": "Afspelen/Pauzeren",
  "play": "Afspelen",
  "pause": "Pauzeren",
  "open": "Openen",
  "close": "Sluiten",
  "pictureInPicture": "Picture-in-Picture",
  "appleAirplay": "Apple AirPlay",
  "googleCast": "Google Cast",
  "vr": "VR",
  "off": "uit",
  "auto": "automatisch",
  "ecoMode": "Eco-modus",
  "ecoMode.title": "Eco-modus",
  "back": "Terug",
  "reset": "Reset",
  "replay": "Opnieuw afspelen",
  "normal": "normaal",
  "default": "standaard",
  "live": "Live",
  "subtitle.example": "voorbeeld ondertiteling",
  "subtitle.select": "Selecteer ondertiteling",
  "playingOn": "Speelt af op <strong>{castDeviceName}</strong>",
  "connectingTo": "Verbinden met <strong>{castDeviceName}</strong>...",
  "watermarkLink": "Link naar homepage",
  "controlBar": "Videospeler bediening",
  "player": "Videospeler",
  "seekBar": "Video tijdlijn",
  "seekBar.value": "Waarde",
  "seekBar.timeshift": "Tijdverschuiving",
  "seekBar.durationText": "van",
  "quickseek.forward": "Vooruitspoelen",
  "quickseek.rewind": "Terugspoelen"
}
},{}],94:[function(require,module,exports){
"use strict";
var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    var desc = Object.getOwnPropertyDescriptor(m, k);
    if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
      desc = { enumerable: true, get: function() { return m[k]; } };
    }
    Object.defineProperty(o, k2, desc);
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __exportStar = (this && this.__exportStar) || function(m, exports) {
    for (var p in m) if (p !== "default" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.ClickOverlay = exports.VolumeControlButton = exports.TitleBar = exports.SubtitleSelectBox = exports.SubtitleOverlay = exports.SeekBarLabel = exports.RecommendationOverlay = exports.ErrorMessageOverlay = exports.Component = exports.CastToggleButton = exports.CastStatusOverlay = exports.AudioTrackSelectBox = exports.AudioQualitySelectBox = exports.Label = exports.Container = exports.UIContainer = exports.Watermark = exports.VRToggleButton = exports.VolumeToggleButton = exports.VideoQualitySelectBox = exports.ToggleButton = exports.SettingsToggleButton = exports.SettingsPanel = exports.ItemSelectionList = exports.SelectBox = exports.SeekBar = exports.PlaybackToggleButton = exports.PlaybackTimeLabelMode = exports.PlaybackTimeLabel = exports.HugePlaybackToggleButton = exports.FullscreenToggleButton = exports.ControlBar = exports.Button = exports.ListOrientation = exports.ListNavigationGroup = exports.RootNavigationGroup = exports.NavigationGroup = exports.SpatialNavigation = exports.I18n = exports.i18n = exports.ErrorUtils = exports.StorageUtils = exports.BrowserUtils = exports.UIUtils = exports.PlayerUtils = exports.StringUtils = exports.ArrayUtils = exports.DemoFactory = exports.UIFactory = exports.version = void 0;
exports.ListSelector = exports.QuickSeekButton = exports.ReplayButton = exports.SettingsPanelItem = exports.SubtitleSettingsPanelPage = exports.SettingsPanelPageOpenButton = exports.SettingsPanelPageBackButton = exports.SettingsPanelPage = exports.AudioTrackListBox = exports.SubtitleListBox = exports.ListBox = exports.SubtitleSettingsResetButton = exports.WindowOpacitySelectBox = exports.WindowColorSelectBox = exports.SubtitleSettingsLabel = exports.SubtitleSettingSelectBox = exports.FontSizeSelectBox = exports.FontOpacitySelectBox = exports.FontFamilySelectBox = exports.FontColorSelectBox = exports.CharacterEdgeSelectBox = exports.BackgroundOpacitySelectBox = exports.BackgroundColorSelectBox = exports.Spacer = exports.PictureInPictureToggleButton = exports.VolumeSlider = exports.AirPlayToggleButton = exports.MetadataLabelContent = exports.MetadataLabel = exports.CloseButton = exports.PlaybackToggleOverlay = exports.CastUIContainer = exports.BufferingOverlay = exports.HugeReplayButton = exports.PlaybackSpeedSelectBox = exports.AdClickOverlay = exports.AdMessageLabel = exports.AdSkipButton = void 0;
exports.version = '3.77.0';
// Management
__exportStar(require("./uimanager"), exports);
__exportStar(require("./uiconfig"), exports);
// Factories
var uifactory_1 = require("./uifactory");
Object.defineProperty(exports, "UIFactory", { enumerable: true, get: function () { return uifactory_1.UIFactory; } });
var demofactory_1 = require("./demofactory");
Object.defineProperty(exports, "DemoFactory", { enumerable: true, get: function () { return demofactory_1.DemoFactory; } });
// Utils
var arrayutils_1 = require("./arrayutils");
Object.defineProperty(exports, "ArrayUtils", { enumerable: true, get: function () { return arrayutils_1.ArrayUtils; } });
var stringutils_1 = require("./stringutils");
Object.defineProperty(exports, "StringUtils", { enumerable: true, get: function () { return stringutils_1.StringUtils; } });
var playerutils_1 = require("./playerutils");
Object.defineProperty(exports, "PlayerUtils", { enumerable: true, get: function () { return playerutils_1.PlayerUtils; } });
var uiutils_1 = require("./uiutils");
Object.defineProperty(exports, "UIUtils", { enumerable: true, get: function () { return uiutils_1.UIUtils; } });
var browserutils_1 = require("./browserutils");
Object.defineProperty(exports, "BrowserUtils", { enumerable: true, get: function () { return browserutils_1.BrowserUtils; } });
var storageutils_1 = require("./storageutils");
Object.defineProperty(exports, "StorageUtils", { enumerable: true, get: function () { return storageutils_1.StorageUtils; } });
var errorutils_1 = require("./errorutils");
Object.defineProperty(exports, "ErrorUtils", { enumerable: true, get: function () { return errorutils_1.ErrorUtils; } });
// Localization
var i18n_1 = require("./localization/i18n");
Object.defineProperty(exports, "i18n", { enumerable: true, get: function () { return i18n_1.i18n; } });
Object.defineProperty(exports, "I18n", { enumerable: true, get: function () { return i18n_1.I18n; } });
// Spatial Navigation
var spatialnavigation_1 = require("./spatialnavigation/spatialnavigation");
Object.defineProperty(exports, "SpatialNavigation", { enumerable: true, get: function () { return spatialnavigation_1.SpatialNavigation; } });
var navigationgroup_1 = require("./spatialnavigation/navigationgroup");
Object.defineProperty(exports, "NavigationGroup", { enumerable: true, get: function () { return navigationgroup_1.NavigationGroup; } });
var rootnavigationgroup_1 = require("./spatialnavigation/rootnavigationgroup");
Object.defineProperty(exports, "RootNavigationGroup", { enumerable: true, get: function () { return rootnavigationgroup_1.RootNavigationGroup; } });
var ListNavigationGroup_1 = require("./spatialnavigation/ListNavigationGroup");
Object.defineProperty(exports, "ListNavigationGroup", { enumerable: true, get: function () { return ListNavigationGroup_1.ListNavigationGroup; } });
Object.defineProperty(exports, "ListOrientation", { enumerable: true, get: function () { return ListNavigationGroup_1.ListOrientation; } });
// Components
var button_1 = require("./components/button");
Object.defineProperty(exports, "Button", { enumerable: true, get: function () { return button_1.Button; } });
var controlbar_1 = require("./components/controlbar");
Object.defineProperty(exports, "ControlBar", { enumerable: true, get: function () { return controlbar_1.ControlBar; } });
var fullscreentogglebutton_1 = require("./components/fullscreentogglebutton");
Object.defineProperty(exports, "FullscreenToggleButton", { enumerable: true, get: function () { return fullscreentogglebutton_1.FullscreenToggleButton; } });
var hugeplaybacktogglebutton_1 = require("./components/hugeplaybacktogglebutton");
Object.defineProperty(exports, "HugePlaybackToggleButton", { enumerable: true, get: function () { return hugeplaybacktogglebutton_1.HugePlaybackToggleButton; } });
var playbacktimelabel_1 = require("./components/playbacktimelabel");
Object.defineProperty(exports, "PlaybackTimeLabel", { enumerable: true, get: function () { return playbacktimelabel_1.PlaybackTimeLabel; } });
Object.defineProperty(exports, "PlaybackTimeLabelMode", { enumerable: true, get: function () { return playbacktimelabel_1.PlaybackTimeLabelMode; } });
var playbacktogglebutton_1 = require("./components/playbacktogglebutton");
Object.defineProperty(exports, "PlaybackToggleButton", { enumerable: true, get: function () { return playbacktogglebutton_1.PlaybackToggleButton; } });
var seekbar_1 = require("./components/seekbar");
Object.defineProperty(exports, "SeekBar", { enumerable: true, get: function () { return seekbar_1.SeekBar; } });
var selectbox_1 = require("./components/selectbox");
Object.defineProperty(exports, "SelectBox", { enumerable: true, get: function () { return selectbox_1.SelectBox; } });
var itemselectionlist_1 = require("./components/itemselectionlist");
Object.defineProperty(exports, "ItemSelectionList", { enumerable: true, get: function () { return itemselectionlist_1.ItemSelectionList; } });
var settingspanel_1 = require("./components/settingspanel");
Object.defineProperty(exports, "SettingsPanel", { enumerable: true, get: function () { return settingspanel_1.SettingsPanel; } });
var settingstogglebutton_1 = require("./components/settingstogglebutton");
Object.defineProperty(exports, "SettingsToggleButton", { enumerable: true, get: function () { return settingstogglebutton_1.SettingsToggleButton; } });
var togglebutton_1 = require("./components/togglebutton");
Object.defineProperty(exports, "ToggleButton", { enumerable: true, get: function () { return togglebutton_1.ToggleButton; } });
var videoqualityselectbox_1 = require("./components/videoqualityselectbox");
Object.defineProperty(exports, "VideoQualitySelectBox", { enumerable: true, get: function () { return videoqualityselectbox_1.VideoQualitySelectBox; } });
var volumetogglebutton_1 = require("./components/volumetogglebutton");
Object.defineProperty(exports, "VolumeToggleButton", { enumerable: true, get: function () { return volumetogglebutton_1.VolumeToggleButton; } });
var vrtogglebutton_1 = require("./components/vrtogglebutton");
Object.defineProperty(exports, "VRToggleButton", { enumerable: true, get: function () { return vrtogglebutton_1.VRToggleButton; } });
var watermark_1 = require("./components/watermark");
Object.defineProperty(exports, "Watermark", { enumerable: true, get: function () { return watermark_1.Watermark; } });
var uicontainer_1 = require("./components/uicontainer");
Object.defineProperty(exports, "UIContainer", { enumerable: true, get: function () { return uicontainer_1.UIContainer; } });
var container_1 = require("./components/container");
Object.defineProperty(exports, "Container", { enumerable: true, get: function () { return container_1.Container; } });
var label_1 = require("./components/label");
Object.defineProperty(exports, "Label", { enumerable: true, get: function () { return label_1.Label; } });
var audioqualityselectbox_1 = require("./components/audioqualityselectbox");
Object.defineProperty(exports, "AudioQualitySelectBox", { enumerable: true, get: function () { return audioqualityselectbox_1.AudioQualitySelectBox; } });
var audiotrackselectbox_1 = require("./components/audiotrackselectbox");
Object.defineProperty(exports, "AudioTrackSelectBox", { enumerable: true, get: function () { return audiotrackselectbox_1.AudioTrackSelectBox; } });
var caststatusoverlay_1 = require("./components/caststatusoverlay");
Object.defineProperty(exports, "CastStatusOverlay", { enumerable: true, get: function () { return caststatusoverlay_1.CastStatusOverlay; } });
var casttogglebutton_1 = require("./components/casttogglebutton");
Object.defineProperty(exports, "CastToggleButton", { enumerable: true, get: function () { return casttogglebutton_1.CastToggleButton; } });
var component_1 = require("./components/component");
Object.defineProperty(exports, "Component", { enumerable: true, get: function () { return component_1.Component; } });
var errormessageoverlay_1 = require("./components/errormessageoverlay");
Object.defineProperty(exports, "ErrorMessageOverlay", { enumerable: true, get: function () { return errormessageoverlay_1.ErrorMessageOverlay; } });
var recommendationoverlay_1 = require("./components/recommendationoverlay");
Object.defineProperty(exports, "RecommendationOverlay", { enumerable: true, get: function () { return recommendationoverlay_1.RecommendationOverlay; } });
var seekbarlabel_1 = require("./components/seekbarlabel");
Object.defineProperty(exports, "SeekBarLabel", { enumerable: true, get: function () { return seekbarlabel_1.SeekBarLabel; } });
var subtitleoverlay_1 = require("./components/subtitleoverlay");
Object.defineProperty(exports, "SubtitleOverlay", { enumerable: true, get: function () { return subtitleoverlay_1.SubtitleOverlay; } });
var subtitleselectbox_1 = require("./components/subtitleselectbox");
Object.defineProperty(exports, "SubtitleSelectBox", { enumerable: true, get: function () { return subtitleselectbox_1.SubtitleSelectBox; } });
var titlebar_1 = require("./components/titlebar");
Object.defineProperty(exports, "TitleBar", { enumerable: true, get: function () { return titlebar_1.TitleBar; } });
var volumecontrolbutton_1 = require("./components/volumecontrolbutton");
Object.defineProperty(exports, "VolumeControlButton", { enumerable: true, get: function () { return volumecontrolbutton_1.VolumeControlButton; } });
var clickoverlay_1 = require("./components/clickoverlay");
Object.defineProperty(exports, "ClickOverlay", { enumerable: true, get: function () { return clickoverlay_1.ClickOverlay; } });
var adskipbutton_1 = require("./components/adskipbutton");
Object.defineProperty(exports, "AdSkipButton", { enumerable: true, get: function () { return adskipbutton_1.AdSkipButton; } });
var admessagelabel_1 = require("./components/admessagelabel");
Object.defineProperty(exports, "AdMessageLabel", { enumerable: true, get: function () { return admessagelabel_1.AdMessageLabel; } });
var adclickoverlay_1 = require("./components/adclickoverlay");
Object.defineProperty(exports, "AdClickOverlay", { enumerable: true, get: function () { return adclickoverlay_1.AdClickOverlay; } });
var playbackspeedselectbox_1 = require("./components/playbackspeedselectbox");
Object.defineProperty(exports, "PlaybackSpeedSelectBox", { enumerable: true, get: function () { return playbackspeedselectbox_1.PlaybackSpeedSelectBox; } });
var hugereplaybutton_1 = require("./components/hugereplaybutton");
Object.defineProperty(exports, "HugeReplayButton", { enumerable: true, get: function () { return hugereplaybutton_1.HugeReplayButton; } });
var bufferingoverlay_1 = require("./components/bufferingoverlay");
Object.defineProperty(exports, "BufferingOverlay", { enumerable: true, get: function () { return bufferingoverlay_1.BufferingOverlay; } });
var castuicontainer_1 = require("./components/castuicontainer");
Object.defineProperty(exports, "CastUIContainer", { enumerable: true, get: function () { return castuicontainer_1.CastUIContainer; } });
var playbacktoggleoverlay_1 = require("./components/playbacktoggleoverlay");
Object.defineProperty(exports, "PlaybackToggleOverlay", { enumerable: true, get: function () { return playbacktoggleoverlay_1.PlaybackToggleOverlay; } });
var closebutton_1 = require("./components/closebutton");
Object.defineProperty(exports, "CloseButton", { enumerable: true, get: function () { return closebutton_1.CloseButton; } });
var metadatalabel_1 = require("./components/metadatalabel");
Object.defineProperty(exports, "MetadataLabel", { enumerable: true, get: function () { return metadatalabel_1.MetadataLabel; } });
Object.defineProperty(exports, "MetadataLabelContent", { enumerable: true, get: function () { return metadatalabel_1.MetadataLabelContent; } });
var airplaytogglebutton_1 = require("./components/airplaytogglebutton");
Object.defineProperty(exports, "AirPlayToggleButton", { enumerable: true, get: function () { return airplaytogglebutton_1.AirPlayToggleButton; } });
var volumeslider_1 = require("./components/volumeslider");
Object.defineProperty(exports, "VolumeSlider", { enumerable: true, get: function () { return volumeslider_1.VolumeSlider; } });
var pictureinpicturetogglebutton_1 = require("./components/pictureinpicturetogglebutton");
Object.defineProperty(exports, "PictureInPictureToggleButton", { enumerable: true, get: function () { return pictureinpicturetogglebutton_1.PictureInPictureToggleButton; } });
var spacer_1 = require("./components/spacer");
Object.defineProperty(exports, "Spacer", { enumerable: true, get: function () { return spacer_1.Spacer; } });
var backgroundcolorselectbox_1 = require("./components/subtitlesettings/backgroundcolorselectbox");
Object.defineProperty(exports, "BackgroundColorSelectBox", { enumerable: true, get: function () { return backgroundcolorselectbox_1.BackgroundColorSelectBox; } });
var backgroundopacityselectbox_1 = require("./components/subtitlesettings/backgroundopacityselectbox");
Object.defineProperty(exports, "BackgroundOpacitySelectBox", { enumerable: true, get: function () { return backgroundopacityselectbox_1.BackgroundOpacitySelectBox; } });
var characteredgeselectbox_1 = require("./components/subtitlesettings/characteredgeselectbox");
Object.defineProperty(exports, "CharacterEdgeSelectBox", { enumerable: true, get: function () { return characteredgeselectbox_1.CharacterEdgeSelectBox; } });
var fontcolorselectbox_1 = require("./components/subtitlesettings/fontcolorselectbox");
Object.defineProperty(exports, "FontColorSelectBox", { enumerable: true, get: function () { return fontcolorselectbox_1.FontColorSelectBox; } });
var fontfamilyselectbox_1 = require("./components/subtitlesettings/fontfamilyselectbox");
Object.defineProperty(exports, "FontFamilySelectBox", { enumerable: true, get: function () { return fontfamilyselectbox_1.FontFamilySelectBox; } });
var fontopacityselectbox_1 = require("./components/subtitlesettings/fontopacityselectbox");
Object.defineProperty(exports, "FontOpacitySelectBox", { enumerable: true, get: function () { return fontopacityselectbox_1.FontOpacitySelectBox; } });
var fontsizeselectbox_1 = require("./components/subtitlesettings/fontsizeselectbox");
Object.defineProperty(exports, "FontSizeSelectBox", { enumerable: true, get: function () { return fontsizeselectbox_1.FontSizeSelectBox; } });
var subtitlesettingselectbox_1 = require("./components/subtitlesettings/subtitlesettingselectbox");
Object.defineProperty(exports, "SubtitleSettingSelectBox", { enumerable: true, get: function () { return subtitlesettingselectbox_1.SubtitleSettingSelectBox; } });
var subtitlesettingslabel_1 = require("./components/subtitlesettings/subtitlesettingslabel");
Object.defineProperty(exports, "SubtitleSettingsLabel", { enumerable: true, get: function () { return subtitlesettingslabel_1.SubtitleSettingsLabel; } });
var windowcolorselectbox_1 = require("./components/subtitlesettings/windowcolorselectbox");
Object.defineProperty(exports, "WindowColorSelectBox", { enumerable: true, get: function () { return windowcolorselectbox_1.WindowColorSelectBox; } });
var windowopacityselectbox_1 = require("./components/subtitlesettings/windowopacityselectbox");
Object.defineProperty(exports, "WindowOpacitySelectBox", { enumerable: true, get: function () { return windowopacityselectbox_1.WindowOpacitySelectBox; } });
var subtitlesettingsresetbutton_1 = require("./components/subtitlesettings/subtitlesettingsresetbutton");
Object.defineProperty(exports, "SubtitleSettingsResetButton", { enumerable: true, get: function () { return subtitlesettingsresetbutton_1.SubtitleSettingsResetButton; } });
var listbox_1 = require("./components/listbox");
Object.defineProperty(exports, "ListBox", { enumerable: true, get: function () { return listbox_1.ListBox; } });
var subtitlelistbox_1 = require("./components/subtitlelistbox");
Object.defineProperty(exports, "SubtitleListBox", { enumerable: true, get: function () { return subtitlelistbox_1.SubtitleListBox; } });
var audiotracklistbox_1 = require("./components/audiotracklistbox");
Object.defineProperty(exports, "AudioTrackListBox", { enumerable: true, get: function () { return audiotracklistbox_1.AudioTrackListBox; } });
var settingspanelpage_1 = require("./components/settingspanelpage");
Object.defineProperty(exports, "SettingsPanelPage", { enumerable: true, get: function () { return settingspanelpage_1.SettingsPanelPage; } });
var settingspanelpagebackbutton_1 = require("./components/settingspanelpagebackbutton");
Object.defineProperty(exports, "SettingsPanelPageBackButton", { enumerable: true, get: function () { return settingspanelpagebackbutton_1.SettingsPanelPageBackButton; } });
var settingspanelpageopenbutton_1 = require("./components/settingspanelpageopenbutton");
Object.defineProperty(exports, "SettingsPanelPageOpenButton", { enumerable: true, get: function () { return settingspanelpageopenbutton_1.SettingsPanelPageOpenButton; } });
var subtitlesettingspanelpage_1 = require("./components/subtitlesettings/subtitlesettingspanelpage");
Object.defineProperty(exports, "SubtitleSettingsPanelPage", { enumerable: true, get: function () { return subtitlesettingspanelpage_1.SubtitleSettingsPanelPage; } });
var settingspanelitem_1 = require("./components/settingspanelitem");
Object.defineProperty(exports, "SettingsPanelItem", { enumerable: true, get: function () { return settingspanelitem_1.SettingsPanelItem; } });
var replaybutton_1 = require("./components/replaybutton");
Object.defineProperty(exports, "ReplayButton", { enumerable: true, get: function () { return replaybutton_1.ReplayButton; } });
var quickseekbutton_1 = require("./components/quickseekbutton");
Object.defineProperty(exports, "QuickSeekButton", { enumerable: true, get: function () { return quickseekbutton_1.QuickSeekButton; } });
var listselector_1 = require("./components/listselector");
Object.defineProperty(exports, "ListSelector", { enumerable: true, get: function () { return listselector_1.ListSelector; } });
// Object.assign polyfill for ES5/IE9
// https://developer.mozilla.org/de/docs/Web/JavaScript/Reference/Global_Objects/Object/assign
if (typeof Object.assign !== 'function') {
    Object.assign = function (target) {
        'use strict';
        if (target == null) {
            throw new TypeError('Cannot convert undefined or null to object');
        }
        target = Object(target);
        for (var index = 1; index < arguments.length; index++) {
            var source = arguments[index];
            if (source != null) {
                for (var key in source) {
                    if (Object.prototype.hasOwnProperty.call(source, key)) {
                        target[key] = source[key];
                    }
                }
            }
        }
        return target;
    };
}

},{"./arrayutils":1,"./browserutils":3,"./components/adclickoverlay":4,"./components/admessagelabel":5,"./components/adskipbutton":6,"./components/airplaytogglebutton":7,"./components/audioqualityselectbox":8,"./components/audiotracklistbox":9,"./components/audiotrackselectbox":10,"./components/bufferingoverlay":11,"./components/button":12,"./components/caststatusoverlay":13,"./components/casttogglebutton":14,"./components/castuicontainer":15,"./components/clickoverlay":16,"./components/closebutton":17,"./components/component":18,"./components/container":19,"./components/controlbar":20,"./components/errormessageoverlay":23,"./components/fullscreentogglebutton":24,"./components/hugeplaybacktogglebutton":25,"./components/hugereplaybutton":26,"./components/itemselectionlist":27,"./components/label":28,"./components/listbox":29,"./components/listselector":30,"./components/metadatalabel":31,"./components/pictureinpicturetogglebutton":32,"./components/playbackspeedselectbox":33,"./components/playbacktimelabel":34,"./components/playbacktogglebutton":35,"./components/playbacktoggleoverlay":36,"./components/quickseekbutton":37,"./components/recommendationoverlay":38,"./components/replaybutton":39,"./components/seekbar":40,"./components/seekbarlabel":43,"./components/selectbox":44,"./components/settingspanel":45,"./components/settingspanelitem":46,"./components/settingspanelpage":47,"./components/settingspanelpagebackbutton":48,"./components/settingspanelpageopenbutton":50,"./components/settingstogglebutton":51,"./components/spacer":52,"./components/subtitlelistbox":53,"./components/subtitleoverlay":54,"./components/subtitleselectbox":55,"./components/subtitlesettings/backgroundcolorselectbox":56,"./components/subtitlesettings/backgroundopacityselectbox":57,"./components/subtitlesettings/characteredgeselectbox":58,"./components/subtitlesettings/fontcolorselectbox":59,"./components/subtitlesettings/fontfamilyselectbox":60,"./components/subtitlesettings/fontopacityselectbox":61,"./components/subtitlesettings/fontsizeselectbox":62,"./components/subtitlesettings/subtitlesettingselectbox":63,"./components/subtitlesettings/subtitlesettingslabel":64,"./components/subtitlesettings/subtitlesettingspanelpage":66,"./components/subtitlesettings/subtitlesettingsresetbutton":67,"./components/subtitlesettings/windowcolorselectbox":68,"./components/subtitlesettings/windowopacityselectbox":69,"./components/titlebar":71,"./components/togglebutton":72,"./components/uicontainer":74,"./components/videoqualityselectbox":75,"./components/volumecontrolbutton":76,"./components/volumeslider":77,"./components/volumetogglebutton":78,"./components/vrtogglebutton":79,"./components/watermark":80,"./demofactory":81,"./errorutils":83,"./localization/i18n":89,"./playerutils":96,"./spatialnavigation/ListNavigationGroup":97,"./spatialnavigation/navigationgroup":101,"./spatialnavigation/rootnavigationgroup":103,"./spatialnavigation/spatialnavigation":105,"./storageutils":108,"./stringutils":109,"./uiconfig":112,"./uifactory":113,"./uimanager":114,"./uiutils":115}],95:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.isMobileV3PlayerAPI = exports.MobileV3PlayerEvent = void 0;
var MobileV3PlayerEvent;
(function (MobileV3PlayerEvent) {
    MobileV3PlayerEvent["SourceError"] = "sourceerror";
    MobileV3PlayerEvent["PlayerError"] = "playererror";
    MobileV3PlayerEvent["PlaylistTransition"] = "playlisttransition";
})(MobileV3PlayerEvent = exports.MobileV3PlayerEvent || (exports.MobileV3PlayerEvent = {}));
function isMobileV3PlayerAPI(player) {
    for (var key in MobileV3PlayerEvent) {
        if (MobileV3PlayerEvent.hasOwnProperty(key) && !player.exports.PlayerEvent.hasOwnProperty(key)) {
            return false;
        }
    }
    return true;
}
exports.isMobileV3PlayerAPI = isMobileV3PlayerAPI;

},{}],96:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.PlayerUtils = void 0;
var eventdispatcher_1 = require("./eventdispatcher");
var browserutils_1 = require("./browserutils");
/**
 * @category Utils
 */
var PlayerUtils;
(function (PlayerUtils) {
    var PlayerState;
    (function (PlayerState) {
        PlayerState[PlayerState["Idle"] = 0] = "Idle";
        PlayerState[PlayerState["Prepared"] = 1] = "Prepared";
        PlayerState[PlayerState["Playing"] = 2] = "Playing";
        PlayerState[PlayerState["Paused"] = 3] = "Paused";
        PlayerState[PlayerState["Finished"] = 4] = "Finished";
    })(PlayerState = PlayerUtils.PlayerState || (PlayerUtils.PlayerState = {}));
    function isTimeShiftAvailable(player) {
        return player.isLive() && player.getMaxTimeShift() !== 0;
    }
    PlayerUtils.isTimeShiftAvailable = isTimeShiftAvailable;
    function getState(player) {
        if (player.hasEnded()) {
            return PlayerState.Finished;
        }
        else if (player.isPlaying()) {
            return PlayerState.Playing;
        }
        else if (player.isPaused()) {
            return PlayerState.Paused;
        }
        else if (player.getSource() != null) {
            return PlayerState.Prepared;
        }
        else {
            return PlayerState.Idle;
        }
    }
    PlayerUtils.getState = getState;
    /**
     * Returns the currentTime - seekableRange.start. This ensures a user-friendly currentTime after a live stream
     * transitioned to VoD.
     * @param player
     */
    function getCurrentTimeRelativeToSeekableRange(player) {
        var currentTime = player.getCurrentTime();
        if (player.isLive()) {
            return currentTime;
        }
        var seekableRangeStart = PlayerUtils.getSeekableRangeStart(player, 0);
        return currentTime - seekableRangeStart;
    }
    PlayerUtils.getCurrentTimeRelativeToSeekableRange = getCurrentTimeRelativeToSeekableRange;
    /**
     * Returns the start value of the seekable range or the defaultValue if no seekableRange is present.
     * For now this happens only in combination with Mobile SDKs.
     *
     * TODO: remove this function in next major release
     *
     * @param player
     * @param defaultValue
     */
    function getSeekableRangeStart(player, defaultValue) {
        if (defaultValue === void 0) { defaultValue = 0; }
        return player.getSeekableRange() && player.getSeekableRange().start || defaultValue;
    }
    PlayerUtils.getSeekableRangeStart = getSeekableRangeStart;
    /**
     * Calculates player seekable time range for live.
     * As the player returns `{ start: -1, end: -1 }` for live streams we need to calculate the `seekableRange` based on `maxTimeshift`.
     *
     * @param player
     */
    function getSeekableRangeRespectingLive(player) {
        if (!player.isLive()) {
            return player.getSeekableRange();
        }
        var currentTimeshift = -player.getTimeShift();
        var maxTimeshift = -player.getMaxTimeShift();
        var currentTime = player.getCurrentTime();
        var end = currentTime + (currentTimeshift);
        var start = currentTime - (maxTimeshift - currentTimeshift);
        return { start: start, end: end };
    }
    PlayerUtils.getSeekableRangeRespectingLive = getSeekableRangeRespectingLive;
    var TimeShiftAvailabilityDetector = /** @class */ (function () {
        function TimeShiftAvailabilityDetector(player) {
            var _this = this;
            this.timeShiftAvailabilityChangedEvent = new eventdispatcher_1.EventDispatcher();
            this.player = player;
            this.timeShiftAvailable = undefined;
            var timeShiftDetector = function () {
                _this.detect();
            };
            // Try to detect timeshift availability when source is loaded, which works for DASH streams
            player.on(player.exports.PlayerEvent.SourceLoaded, timeShiftDetector);
            // With HLS/NativePlayer streams, getMaxTimeShift can be 0 before the buffer fills, so we need to additionally
            // check timeshift availability in TimeChanged
            player.on(player.exports.PlayerEvent.TimeChanged, timeShiftDetector);
        }
        TimeShiftAvailabilityDetector.prototype.detect = function () {
            if (this.player.isLive()) {
                var timeShiftAvailableNow = PlayerUtils.isTimeShiftAvailable(this.player);
                // When the availability changes, we fire the event
                if (timeShiftAvailableNow !== this.timeShiftAvailable) {
                    this.timeShiftAvailabilityChangedEvent.dispatch(this.player, { timeShiftAvailable: timeShiftAvailableNow });
                    this.timeShiftAvailable = timeShiftAvailableNow;
                }
            }
        };
        Object.defineProperty(TimeShiftAvailabilityDetector.prototype, "onTimeShiftAvailabilityChanged", {
            get: function () {
                return this.timeShiftAvailabilityChangedEvent.getEvent();
            },
            enumerable: false,
            configurable: true
        });
        return TimeShiftAvailabilityDetector;
    }());
    PlayerUtils.TimeShiftAvailabilityDetector = TimeShiftAvailabilityDetector;
    /**
     * Detects changes of the stream type, i.e. changes of the return value of the player#isLive method.
     * Normally, a stream cannot change its type during playback, it's either VOD or live. Due to bugs on some
     * platforms or browsers, it can still change. It is therefore unreliable to just check #isLive and this detector
     * should be used as a workaround instead.
     *
     * Additionally starting with player v8.19.0 we have the use-case that a live stream changes into a vod.
     * The DurationChanged event indicates this switch.
     *
     * Known cases:
     *
     * - HLS VOD on Android 4.3
     * Video duration is initially 'Infinity' and only gets available after playback starts, so streams are wrongly
     * reported as 'live' before playback (the live-check in the player checks for infinite duration).
     *
     * @deprecated since UI v3.9.0 in combination with player v8.19.0 use PlayerEvent.DurationChanged instead
     *
     * TODO: remove this class in next major release
     */
    var LiveStreamDetector = /** @class */ (function () {
        function LiveStreamDetector(player, uimanager) {
            var _this = this;
            this.liveChangedEvent = new eventdispatcher_1.EventDispatcher();
            this.player = player;
            this.uimanager = uimanager;
            this.live = undefined;
            var liveDetector = function () {
                _this.detect();
            };
            this.uimanager.getConfig().events.onUpdated.subscribe(liveDetector);
            // Re-evaluate when playback starts
            player.on(player.exports.PlayerEvent.Play, liveDetector);
            // HLS live detection workaround for Android:
            // Also re-evaluate during playback, because that is when the live flag might change.
            // (Doing it only in Android Chrome saves unnecessary overhead on other platforms)
            if (browserutils_1.BrowserUtils.isAndroid && browserutils_1.BrowserUtils.isChrome) {
                player.on(player.exports.PlayerEvent.TimeChanged, liveDetector);
            }
            // DurationChanged event was introduced with player v8.19.0
            if (player.exports.PlayerEvent.DurationChanged) {
                player.on(player.exports.PlayerEvent.DurationChanged, liveDetector);
            }
            // Ad video's isLive() might be different than the actual video's isLive().
            player.on(player.exports.PlayerEvent.AdBreakStarted, liveDetector);
            player.on(player.exports.PlayerEvent.AdBreakFinished, liveDetector);
        }
        LiveStreamDetector.prototype.detect = function () {
            var liveNow = this.player.isLive();
            // Compare current to previous live state flag and fire event when it changes. Since we initialize the flag
            // with undefined, there is always at least an initial event fired that tells listeners the live state.
            if (liveNow !== this.live) {
                this.liveChangedEvent.dispatch(this.player, { live: liveNow });
                this.live = liveNow;
            }
        };
        Object.defineProperty(LiveStreamDetector.prototype, "onLiveChanged", {
            get: function () {
                return this.liveChangedEvent.getEvent();
            },
            enumerable: false,
            configurable: true
        });
        return LiveStreamDetector;
    }());
    PlayerUtils.LiveStreamDetector = LiveStreamDetector;
    function clampValueToRange(value, boundary1, boundary2) {
        var lowerBoundary = Math.min(boundary1, boundary2);
        var upperBoundary = Math.max(boundary1, boundary2);
        return Math.min(Math.max(value, lowerBoundary), upperBoundary);
    }
    PlayerUtils.clampValueToRange = clampValueToRange;
})(PlayerUtils = exports.PlayerUtils || (exports.PlayerUtils = {}));

},{"./browserutils":3,"./eventdispatcher":84}],97:[function(require,module,exports){
"use strict";
var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        if (typeof b !== "function" && b !== null)
            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {
    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {
        if (ar || !(i in from)) {
            if (!ar) ar = Array.prototype.slice.call(from, 0, i);
            ar[i] = from[i];
        }
    }
    return to.concat(ar || Array.prototype.slice.call(from));
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.ListNavigationGroup = exports.ListOrientation = void 0;
var navigationgroup_1 = require("./navigationgroup");
var types_1 = require("./types");
var ListOrientation;
(function (ListOrientation) {
    ListOrientation["Horizontal"] = "horizontal";
    ListOrientation["Vertical"] = "vertical";
})(ListOrientation = exports.ListOrientation || (exports.ListOrientation = {}));
/**
 * @category Components
 */
var ListNavigationGroup = /** @class */ (function (_super) {
    __extends(ListNavigationGroup, _super);
    function ListNavigationGroup(orientation, container) {
        var components = [];
        for (var _i = 2; _i < arguments.length; _i++) {
            components[_i - 2] = arguments[_i];
        }
        var _this = _super.apply(this, __spreadArray([container], components, false)) || this;
        switch (orientation) {
            case ListOrientation.Vertical:
                _this.listNavigationDirections = [types_1.Direction.UP, types_1.Direction.DOWN];
                break;
            case ListOrientation.Horizontal:
                _this.listNavigationDirections = [types_1.Direction.LEFT, types_1.Direction.RIGHT];
                break;
        }
        return _this;
    }
    ListNavigationGroup.prototype.handleAction = function (action) {
        _super.prototype.handleAction.call(this, action);
        if (action === types_1.Action.SELECT) {
            // close the container when a list entry is selected
            this.handleAction(types_1.Action.BACK);
        }
    };
    ListNavigationGroup.prototype.handleNavigation = function (direction) {
        _super.prototype.handleNavigation.call(this, direction);
        if (!this.listNavigationDirections.includes(direction)) {
            // close the container on navigation inputs that don't align
            // with the orientation of the list
            this.handleAction(types_1.Action.BACK);
        }
    };
    return ListNavigationGroup;
}(navigationgroup_1.NavigationGroup));
exports.ListNavigationGroup = ListNavigationGroup;

},{"./navigationgroup":101,"./types":107}],98:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.getHtmlElementsFromComponents = void 0;
var container_1 = require("../components/container");
var typeguards_1 = require("./typeguards");
/**
 * Recursively resolves a container and the components contained within them, building a flat list of components.
 *
 * @param container The container to get the contained components from
 */
function resolveAllComponents(container) {
    var childComponents = [];
    container.getComponents().forEach(function (containerOrComponent) {
        if ((0, typeguards_1.isContainer)(containerOrComponent)) {
            childComponents.push.apply(childComponents, resolveAllComponents(containerOrComponent));
        }
        else if ((0, typeguards_1.isComponent)(containerOrComponent)) {
            childComponents.push(containerOrComponent);
        }
    });
    return childComponents;
}
/**
 * Returns the HTML elements associated to the provided component.
 *
 * @param component The component to get the HTML elements from
 */
function toHtmlElement(component) {
    if ((0, typeguards_1.isListBox)(component)) {
        return [].slice.call(component.getDomElement().get()[0].children);
    }
    else {
        return component.getDomElement().get().slice(0, 1);
    }
}
/**
 * Takes the provided list of components and flat-maps them to a list of their respective HTML elements. In case a
 * provided component is a container, the children of that container will be resolved recursively. Ignores components
 * that are hidden.
 *
 * @param components The components to map to HTML elements
 */
function getHtmlElementsFromComponents(components) {
    var htmlElements = [];
    components
        .filter(function (component) { return !component.isHidden(); })
        .forEach(function (component) {
        var elementsToConsider = component instanceof container_1.Container ? resolveAllComponents(component) : [component];
        elementsToConsider.forEach(function (component) {
            htmlElements.push.apply(htmlElements, toHtmlElement(component));
        });
    });
    return htmlElements;
}
exports.getHtmlElementsFromComponents = getHtmlElementsFromComponents;

},{"../components/container":19,"./typeguards":106}],99:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.getKeyMapForPlatform = void 0;
var types_1 = require("./types");
var browserutils_1 = require("../browserutils");
var TizenKeyMap = {
    isApplicable: function () { return browserutils_1.BrowserUtils.isTizen; },
    keyCodes: {
        // D-pad Up
        38: types_1.Direction.UP,
        // D-pad Down
        40: types_1.Direction.DOWN,
        // D-pad Left
        37: types_1.Direction.LEFT,
        // D-pad Right
        39: types_1.Direction.RIGHT,
        // D-pad OK
        13: types_1.Action.SELECT,
        // Back
        10009: types_1.Action.BACK,
    },
};
var WebOsKeyMap = {
    isApplicable: function () { return browserutils_1.BrowserUtils.isWebOs; },
    keyCodes: {
        // D-pad Up
        38: types_1.Direction.UP,
        // D-pad Down
        40: types_1.Direction.DOWN,
        // D-pad Left
        37: types_1.Direction.LEFT,
        // D-pad Right
        39: types_1.Direction.RIGHT,
        // D-pad OK
        13: types_1.Action.SELECT,
        // Back
        461: types_1.Action.BACK,
    },
};
var PlayStationKeyMap = {
    isApplicable: function () { return browserutils_1.BrowserUtils.isPlayStation; },
    keyCodes: {
        // D-pad Up
        38: types_1.Direction.UP,
        // D-pad Down
        40: types_1.Direction.DOWN,
        // D-pad Left
        37: types_1.Direction.LEFT,
        // D-pad Right
        39: types_1.Direction.RIGHT,
        // Cross
        13: types_1.Action.SELECT,
        // Circle
        27: types_1.Action.BACK,
    },
};
var AndroidKeyMap = {
    isApplicable: function () { return browserutils_1.BrowserUtils.isAndroid; },
    keyCodes: {
        // D-pad Up
        38: types_1.Direction.UP,
        // D-pad Down
        40: types_1.Direction.DOWN,
        // D-pad Left
        37: types_1.Direction.LEFT,
        // D-pad Right
        39: types_1.Direction.RIGHT,
        // D-pad OK
        13: types_1.Action.SELECT,
        // Back
        27: types_1.Action.BACK,
    },
};
var HisenseKeyMap = {
    isApplicable: function () { return browserutils_1.BrowserUtils.isHisense; },
    keyCodes: {
        // D-pad Up
        38: types_1.Direction.UP,
        // D-pad Down
        40: types_1.Direction.DOWN,
        // D-pad Left
        37: types_1.Direction.LEFT,
        // D-pad Right
        39: types_1.Direction.RIGHT,
        // OK
        13: types_1.Action.SELECT,
        // Back
        8: types_1.Action.BACK,
    },
};
// Default key map used on desktops
var DefaultKeyMap = {
    // Arrow Up
    38: types_1.Direction.UP,
    // Arrow Down
    40: types_1.Direction.DOWN,
    // Arrow Left
    37: types_1.Direction.LEFT,
    // Arrow Right
    39: types_1.Direction.RIGHT,
    // Enter
    13: types_1.Action.SELECT,
    // Escape
    27: types_1.Action.BACK,
};
/**
 * Returns the matching key map for the current platform.
 */
function getKeyMapForPlatform() {
    var applicableKeyMap = [
        WebOsKeyMap,
        TizenKeyMap,
        PlayStationKeyMap,
        HisenseKeyMap,
        AndroidKeyMap,
    ].find(function (keyMap) { return keyMap.isApplicable(); });
    if (applicableKeyMap) {
        return applicableKeyMap.keyCodes;
    }
    else {
        return DefaultKeyMap;
    }
}
exports.getKeyMapForPlatform = getKeyMapForPlatform;

},{"../browserutils":3,"./types":107}],100:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.getBoundingRectFromElement = exports.getElementInDirection = void 0;
var types_1 = require("./types");
/**
 * Calculates the length of a vector.
 *
 * @param vector The vector to calculate the length of
 */
function length(vector) {
    return Math.sqrt(Math.pow(vector.x, 2) + Math.pow(vector.y, 2));
}
/**
 * Normalizes the given vector.
 *
 * @param vector The vector to normalize
 */
function normalize(vector) {
    var len = length(vector);
    return {
        x: vector.x / len,
        y: vector.y / len,
    };
}
/**
 * Calculates the dot product between 2 vectors.
 *
 * @param a The first vector
 * @param b The second vector
 */
function dotProduct(a, b) {
    return a.x * b.x + a.y * b.y;
}
/**
 * Calculates the distance between the 2 points pointed to by the provided vectors.
 *
 * @param a The first vector
 * @param b The second vector
 */
function distance(a, b) {
    return length({
        x: b.x - a.x,
        y: b.y - a.y,
    });
}
/**
 * Returns a vector that corresponds to the center of the provided element.
 *
 * @param element The element to get the center of
 */
function getElementVector(element) {
    var boundingRect = getBoundingRectFromElement(element);
    return {
        x: boundingRect.x + boundingRect.width / 2,
        y: boundingRect.y + boundingRect.height / 2,
    };
}
/**
 * Returns the angle in degrees between the unit vector pointing in the given {Direction} and the unit vector that
 * points from the current element to another element.
 *
 * @param a The vector of the current element
 * @param b The vector of the other element
 * @param direction The direction to move along
 */
function calculateAngle(a, b, direction) {
    var directionVector = {
        x: (direction === types_1.Direction.LEFT ? -1 : direction === types_1.Direction.RIGHT ? 1 : 0),
        y: (direction === types_1.Direction.UP ? -1 : direction === types_1.Direction.DOWN ? 1 : 0),
    };
    var elementVector = normalize({
        x: b.x - a.x,
        y: b.y - a.y,
    });
    var angleCos = dotProduct(directionVector, elementVector) / (length(directionVector) * length(elementVector));
    return Math.acos(angleCos) * 180 / Math.PI;
}
/**
 * Returns the closest element to the current element when trying to navigate in the provided direction. Returns
 * undefined, if there is not element in the given direction.
 *
 * @param activeElement The currently selected element
 * @param elements The list of all elements that can be navigated to
 * @param direction The direction in which to navigate
 */
function getElementInDirection(activeElement, elements, direction) {
    var _a;
    if (!activeElement)
        return undefined;
    var cutoffAngle = 45;
    var activeElemVector = getElementVector(activeElement);
    return (_a = elements
        // don't take the current element into account
        .filter(function (elem) { return elem !== activeElement; })
        // get the angle between, and distance to any other element from the current element
        .map(function (element) {
        var elementVector = getElementVector(element);
        var dist = distance(activeElemVector, elementVector);
        var angle = calculateAngle(activeElemVector, elementVector, direction);
        return { angle: angle, dist: dist, element: element };
    })
        // filter out any elements that don't align with the direction we're trying to move in
        .filter(function (_a) {
        var angle = _a.angle;
        return angle <= cutoffAngle;
    })
        // sort the resulting elements based on their distance to the current element in ascending order
        .sort(function (_a, _b) {
        var angleA = _a.angle, distA = _a.dist;
        var angleB = _b.angle, distB = _b.dist;
        return (angleA - angleB) + (distA - distB);
    })
        // return the element closest to the current element
        .shift()) === null || _a === void 0 ? void 0 : _a.element;
}
exports.getElementInDirection = getElementInDirection;
/**
 * Returns DOMRect like object containing horizontal X and vertical Y coordinates from and HTMLElement.
 * Handles use-cases for getBoundingClientRect when the return type can be either
 * a ClientRect or DOMRect object type.
 *
 * @param element The currently selected element
 */
function getBoundingRectFromElement(element) {
    var boundingRect = element.getBoundingClientRect();
    if (typeof boundingRect.x !== 'number' && typeof boundingRect.y !== 'number') {
        boundingRect.x = boundingRect.left;
        boundingRect.y = boundingRect.top;
    }
    return boundingRect;
}
exports.getBoundingRectFromElement = getBoundingRectFromElement;

},{"./types":107}],101:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.NavigationGroup = void 0;
var navigationalgorithm_1 = require("./navigationalgorithm");
var gethtmlelementsfromcomponents_1 = require("./gethtmlelementsfromcomponents");
var nodeeventsubscriber_1 = require("./nodeeventsubscriber");
var typeguards_1 = require("./typeguards");
var types_1 = require("./types");
/**
 * Used as part of spatial navigation. Groups together different components to which you can navigate to, in a single
 * navigation group.
 *
 * Responsible for finding elements in direction on navigation and for tracking active element inside the group.
 * Triggers blur and focus on element when active element is changed, as well as click on element on `Action.SELECT`.
 * Will call `hideUi()` on passed in container if `Action.BACK` is called.
 *
 * @category Components
 */
var NavigationGroup = /** @class */ (function () {
    function NavigationGroup(container) {
        var components = [];
        for (var _i = 1; _i < arguments.length; _i++) {
            components[_i - 1] = arguments[_i];
        }
        this.container = container;
        this.removeElementHoverEventListeners = function () { };
        this.components = components;
        this.eventSubscriber = new nodeeventsubscriber_1.NodeEventSubscriber();
    }
    /**
     * Returns the active HTMLElement.
     */
    NavigationGroup.prototype.getActiveElement = function () {
        return this.activeElement;
    };
    NavigationGroup.prototype.focusElement = function (element) {
        this.blurActiveElement();
        this.activeElement = element;
        this.activeElement.focus();
    };
    NavigationGroup.prototype.blurActiveElement = function () {
        var _a;
        (_a = this.activeElement) === null || _a === void 0 ? void 0 : _a.blur();
    };
    NavigationGroup.prototype.focusFirstElement = function () {
        var element = (0, gethtmlelementsfromcomponents_1.getHtmlElementsFromComponents)(this.components)[0];
        if (element) {
            this.focusElement(element);
        }
    };
    NavigationGroup.prototype.defaultNavigationHandler = function (direction) {
        var targetElement = (0, navigationalgorithm_1.getElementInDirection)(this.activeElement, (0, gethtmlelementsfromcomponents_1.getHtmlElementsFromComponents)(this.components), direction);
        if (targetElement) {
            this.focusElement(targetElement);
        }
    };
    NavigationGroup.prototype.defaultActionHandler = function (action) {
        switch (action) {
            case (types_1.Action.SELECT):
                this.activeElement.click();
                break;
            case (types_1.Action.BACK):
                this.container.hide();
                break;
        }
    };
    NavigationGroup.prototype.handleInput = function (data, defaultHandler, userHandler) {
        var handleDefault = true;
        var preventDefault = function () { return (handleDefault = false); };
        userHandler === null || userHandler === void 0 ? void 0 : userHandler(data, this.activeElement, preventDefault);
        if (handleDefault) {
            defaultHandler.call(this, data);
        }
    };
    /**
     * Handles a navigation event.
     *
     * @param direction The direction of the navigation event
     */
    NavigationGroup.prototype.handleNavigation = function (direction) {
        if (!this.activeElement) {
            // If we do not have an active element, the active element has been disabled by a mouseleave
            // event. We should continue the navigation at the exact place where we left off.
            if (this.activeElementBeforeDisable) {
                this.focusElement(this.activeElementBeforeDisable);
            }
            else {
                this.focusFirstElement();
            }
            return;
        }
        this.handleInput(direction, this.defaultNavigationHandler, this.onNavigation);
    };
    /**
     * Handles an action event.
     *
     * @param action The action of the event
     */
    NavigationGroup.prototype.handleAction = function (action) {
        this.handleInput(action, this.defaultActionHandler, this.onAction);
    };
    /**
     * Disable navigation group
     *
     * Call blur on active element, set as undefined, and track it as element before disable.
     */
    NavigationGroup.prototype.disable = function () {
        if (this.activeElement) {
            this.activeElementBeforeDisable = this.activeElement;
            this.blurActiveElement();
            this.activeElement = undefined;
        }
    };
    /**
     * Enable navigation group
     *
     * Sets active element to either element that was active before disable, or first element of tracked elements.
     * If it is settings panel, it will always focus first element in the list.
     */
    NavigationGroup.prototype.enable = function () {
        if (this.activeElementBeforeDisable && !(0, typeguards_1.isSettingsPanel)(this.container)) {
            this.focusElement(this.activeElementBeforeDisable);
            this.activeElementBeforeDisable = undefined;
        }
        else {
            this.focusFirstElement();
        }
        this.trackElementHover();
    };
    /**
     * Adds event listener for `mouseenter` on tracked elements to ensure tracking of active element will work together
     * in combination of using mouse and key events.
     */
    NavigationGroup.prototype.trackElementHover = function () {
        var _this = this;
        this.removeElementHoverEventListeners();
        var removeEventListenerFunctions = (0, gethtmlelementsfromcomponents_1.getHtmlElementsFromComponents)(this.components).map(function (htmlElem) {
            var enterListener = _this.focusElement.bind(_this, htmlElem);
            var exitListener = function () { return _this.disable(); };
            _this.eventSubscriber.on(htmlElem, 'mouseenter', enterListener);
            _this.eventSubscriber.on(htmlElem, 'mouseleave', exitListener);
            return function () {
                _this.eventSubscriber.off(htmlElem, 'mouseenter', enterListener);
                _this.eventSubscriber.off(htmlElem, 'mouseleave', exitListener);
            };
        });
        this.removeElementHoverEventListeners = function () { return removeEventListenerFunctions.forEach(function (fn) { return fn(); }); };
    };
    /**
     * Dispose of navigation group
     */
    NavigationGroup.prototype.release = function () {
        this.eventSubscriber.release();
        this.activeElement = undefined;
        this.components.splice(0, this.components.length);
        this.removeElementHoverEventListeners();
    };
    return NavigationGroup;
}());
exports.NavigationGroup = NavigationGroup;

},{"./gethtmlelementsfromcomponents":98,"./navigationalgorithm":100,"./nodeeventsubscriber":102,"./typeguards":106,"./types":107}],102:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.NodeEventSubscriber = void 0;
/**
 * Allows to subscribe to Node events.
 */
var NodeEventSubscriber = /** @class */ (function () {
    function NodeEventSubscriber() {
        this.attachedListeners = new Map();
    }
    NodeEventSubscriber.prototype.getEventListenersOfType = function (type) {
        if (!this.attachedListeners.has(type)) {
            this.attachedListeners.set(type, []);
        }
        return this.attachedListeners.get(type);
    };
    /**
     * Adds the given event listener to the node.
     *
     * @param node The node to remove the event listener from
     * @param type The event to listen to
     * @param listener The listener to remove
     * @param options The event listener options
     */
    NodeEventSubscriber.prototype.on = function (node, type, listener, options) {
        node.addEventListener(type, listener, options);
        this.getEventListenersOfType(type).push([node, listener, options]);
    };
    /**
     * Removes the given event listener from the node.
     *
     * @param node The node to attach the event listener to
     * @param type The event to listen to
     * @param listener The listener to add
     * @param options The event listener options
     */
    NodeEventSubscriber.prototype.off = function (node, type, listener, options) {
        var listenersOfType = this.getEventListenersOfType(type);
        var listenerIndex = listenersOfType.findIndex(function (_a) {
            var otherNode = _a[0], otherListener = _a[1], otherOptions = _a[2];
            return otherNode === node && otherListener === listener && otherOptions === options;
        });
        node.removeEventListener(type, listener, options);
        if (listenerIndex > -1) {
            listenersOfType.splice(listenerIndex, 1);
        }
    };
    /**
     * Removes all attached event listeners.
     */
    NodeEventSubscriber.prototype.release = function () {
        var _this = this;
        this.attachedListeners.forEach(function (listenersOfType, type) {
            listenersOfType.forEach(function (_a) {
                var element = _a[0], listener = _a[1], options = _a[2];
                _this.off(element, type, listener, options);
            });
        });
        this.attachedListeners.clear();
    };
    return NodeEventSubscriber;
}());
exports.NodeEventSubscriber = NodeEventSubscriber;

},{}],103:[function(require,module,exports){
"use strict";
var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        if (typeof b !== "function" && b !== null)
            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {
    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {
        if (ar || !(i in from)) {
            if (!ar) ar = Array.prototype.slice.call(from, 0, i);
            ar[i] = from[i];
        }
    }
    return to.concat(ar || Array.prototype.slice.call(from));
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.RootNavigationGroup = void 0;
var navigationgroup_1 = require("./navigationgroup");
var types_1 = require("./types");
/**
 * Extends NavigationGroup and provides additional logic for hiding and showing the UI on the root container.
 *
 * @category Components
 */
var RootNavigationGroup = /** @class */ (function (_super) {
    __extends(RootNavigationGroup, _super);
    function RootNavigationGroup(container) {
        var elements = [];
        for (var _i = 1; _i < arguments.length; _i++) {
            elements[_i - 1] = arguments[_i];
        }
        var _this = _super.apply(this, __spreadArray([container], elements, false)) || this;
        _this.container = container;
        return _this;
    }
    RootNavigationGroup.prototype.handleAction = function (action) {
        this.container.showUi();
        _super.prototype.handleAction.call(this, action);
    };
    RootNavigationGroup.prototype.handleNavigation = function (direction) {
        this.container.showUi();
        _super.prototype.handleNavigation.call(this, direction);
    };
    RootNavigationGroup.prototype.defaultActionHandler = function (action) {
        if (action === types_1.Action.BACK) {
            this.container.hideUi();
        }
        else {
            _super.prototype.defaultActionHandler.call(this, action);
        }
    };
    RootNavigationGroup.prototype.release = function () {
        _super.prototype.release.call(this);
    };
    return RootNavigationGroup;
}(navigationgroup_1.NavigationGroup));
exports.RootNavigationGroup = RootNavigationGroup;

},{"./navigationgroup":101,"./types":107}],104:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.SeekBarHandler = void 0;
var nodeeventsubscriber_1 = require("./nodeeventsubscriber");
var types_1 = require("./types");
var navigationalgorithm_1 = require("./navigationalgorithm");
var DefaultScrubSpeedPercentage = 0.005;
var ScrubSpeedClearInterval = 100;
var ScrubSpeedMultiplier = 1.1;
/**
 * Handles Spatial Navigation interaction with the seek bar. Ensures, that seek operations can be executed and that the
 * scrubbing tooltip is shown as if the user scrubbed using the mouse/touchscreen.
 */
var SeekBarHandler = /** @class */ (function () {
    function SeekBarHandler(rootNavigationGroup) {
        var _this = this;
        this.rootNavigationGroup = rootNavigationGroup;
        this.cursorPosition = { x: 0, y: 0 };
        this.isScrubbing = false;
        this.scrubSpeedPercentage = DefaultScrubSpeedPercentage;
        this.onNavigation = function (direction, target, preventDefault) {
            if (!isSeekBarWrapper(target)) {
                return;
            }
            if (direction === types_1.Direction.UP || direction === types_1.Direction.DOWN) {
                _this.stopSeeking(getSeekBar(target));
                return;
            }
            _this.initializeOrUpdateCursorPosition(target, direction);
            _this.dispatchMouseMoveEvent(getSeekBar(target));
            preventDefault();
        };
        this.onAction = function (action, target, preventDefault) {
            if (!isSeekBarWrapper(target)) {
                return;
            }
            var seekBar = getSeekBar(target);
            if (action === types_1.Action.SELECT && _this.isScrubbing) {
                _this.dispatchMouseClickEvent(seekBar);
                preventDefault();
            }
            else if (action === types_1.Action.BACK) {
                _this.stopSeeking(seekBar);
                preventDefault();
            }
        };
        this.rootNavigationGroup.onAction = this.onAction;
        this.eventSubscriber = new nodeeventsubscriber_1.NodeEventSubscriber();
        this.rootNavigationGroup.onNavigation = this.onNavigation;
    }
    SeekBarHandler.prototype.updateScrubSpeedPercentage = function () {
        var _this = this;
        clearTimeout(this.scrubSpeedResetTimeout);
        this.scrubSpeedPercentage *= ScrubSpeedMultiplier;
        this.scrubSpeedResetTimeout = window.setTimeout(function () { return _this.scrubSpeedPercentage = DefaultScrubSpeedPercentage; }, ScrubSpeedClearInterval);
    };
    SeekBarHandler.prototype.getIncrement = function (direction, seekBarWrapper) {
        this.updateScrubSpeedPercentage();
        var seekBarWidth = seekBarWrapper.getBoundingClientRect().width;
        var increment = seekBarWidth * this.scrubSpeedPercentage;
        return direction === types_1.Direction.RIGHT ? increment : -increment;
    };
    SeekBarHandler.prototype.resetCursorPosition = function () {
        this.cursorPosition.x = 0;
        this.cursorPosition.y = 0;
    };
    SeekBarHandler.prototype.updateCursorPosition = function (direction, seekBarWrapper) {
        this.cursorPosition.x += this.getIncrement(direction, seekBarWrapper);
    };
    SeekBarHandler.prototype.initializeCursorPosition = function (seekBarWrapper) {
        var playbackPositionMarker = getPlaybackPositionMarker(seekBarWrapper);
        var rect = (0, navigationalgorithm_1.getBoundingRectFromElement)(playbackPositionMarker);
        var startX = rect.x + (rect.width / 2);
        var startY = rect.y;
        this.cursorPosition.x = startX;
        this.cursorPosition.y = startY;
    };
    SeekBarHandler.prototype.initializeOrUpdateCursorPosition = function (seekBarWrapper, direction) {
        if (this.isScrubbing) {
            this.updateCursorPosition(direction, seekBarWrapper);
        }
        else {
            this.initializeCursorPosition(seekBarWrapper);
        }
        this.isScrubbing = true;
    };
    SeekBarHandler.prototype.getCursorPositionMouseEventInit = function () {
        return {
            clientX: this.cursorPosition.x,
            clientY: this.cursorPosition.y,
        };
    };
    SeekBarHandler.prototype.dispatchMouseMoveEvent = function (seekBar) {
        seekBar.dispatchEvent(new MouseEvent('mousemove', this.getCursorPositionMouseEventInit()));
    };
    SeekBarHandler.prototype.dispatchMouseClickEvent = function (seekBar) {
        var _this = this;
        var mouseDownHandler = function () {
            var mouseEventInit = _this.getCursorPositionMouseEventInit();
            document.dispatchEvent(new MouseEvent('mouseup', mouseEventInit));
            _this.eventSubscriber.off(seekBar, 'mousedown', mouseDownHandler);
            _this.stopSeeking(seekBar);
        };
        this.eventSubscriber.on(seekBar, 'mousedown', mouseDownHandler);
        seekBar.dispatchEvent(new MouseEvent('mousedown'));
    };
    SeekBarHandler.prototype.stopSeeking = function (seekBar) {
        this.resetCursorPosition();
        this.isScrubbing = false;
        this.dispatchMouseLeaveEvent(seekBar);
    };
    SeekBarHandler.prototype.dispatchMouseLeaveEvent = function (seekBar) {
        seekBar.dispatchEvent(new MouseEvent('mouseleave'));
    };
    /**
     * Releases the SeekBraHandler, making sure all event subscribers are removed.
     */
    SeekBarHandler.prototype.release = function () {
        this.eventSubscriber.release();
        this.rootNavigationGroup.onAction = undefined;
        this.rootNavigationGroup.onNavigation = undefined;
    };
    return SeekBarHandler;
}());
exports.SeekBarHandler = SeekBarHandler;
function isSeekBarWrapper(element) {
    return Array.from(element.classList).findIndex(function (className) { return /-ui-seekbar$/.test(className); }) > -1;
}
function getSeekBar(seekBarWrapper) {
    return seekBarWrapper.children.item(0);
}
function getPlaybackPositionMarker(seekBarWrapper) {
    return seekBarWrapper.querySelector('[class*="seekbar-playbackposition-marker"]');
}

},{"./navigationalgorithm":100,"./nodeeventsubscriber":102,"./types":107}],105:[function(require,module,exports){
"use strict";
var __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {
    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {
        if (ar || !(i in from)) {
            if (!ar) ar = Array.prototype.slice.call(from, 0, i);
            ar[i] = from[i];
        }
    }
    return to.concat(ar || Array.prototype.slice.call(from));
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.SpatialNavigation = void 0;
var nodeeventsubscriber_1 = require("./nodeeventsubscriber");
var seekbarhandler_1 = require("./seekbarhandler");
var keymap_1 = require("./keymap");
var typeguards_1 = require("./typeguards");
/**
 * SpatialNavigation keeps track of all navigation groups, and updates the active navigation group when visibility
 * changes on group container.
 *
 * It listens to key events, and triggers either handleNavigation or handleAction on the active group.
 * SeekBarHandler will get instantiated with root navigation group and disposed on release of the spatial navigation.
 */
var SpatialNavigation = /** @class */ (function () {
    function SpatialNavigation(rootNavigationGroup) {
        var navigationGroups = [];
        for (var _i = 1; _i < arguments.length; _i++) {
            navigationGroups[_i - 1] = arguments[_i];
        }
        var _this = this;
        this.navigationGroups = [];
        this.onShow = function (group) {
            _this.activeNavigationGroups.push(group);
            _this.updateEnabledNavigationGroup();
        };
        this.onHide = function (group) {
            var groupIndex = _this.activeNavigationGroups.findIndex(function (other) { return other === group; });
            if (groupIndex > -1) {
                group.disable();
                _this.activeNavigationGroups.splice(groupIndex, 1);
                _this.updateEnabledNavigationGroup();
            }
        };
        /**
         * Checks if keyboard event keycode is tracked either as Direction or Action and calls appropriate handler on active
         * navigation group
         *
         * @param e {KeyboardEvent}
         */
        this.handleKeyEvent = function (e) {
            var event = _this.keyMap[getKeyCode(e)];
            var active = _this.getActiveNavigationGroup();
            if (!active || !active.container || active.container.isHidden() || active.container.isDisabled()) {
                return;
            }
            if ((0, typeguards_1.isDirection)(event)) {
                active.handleNavigation(event);
                e.preventDefault();
                e.stopPropagation();
            }
            if ((0, typeguards_1.isAction)(event)) {
                active.handleAction(event);
                e.preventDefault();
                e.stopPropagation();
            }
        };
        this.seekBarHandler = new seekbarhandler_1.SeekBarHandler(rootNavigationGroup);
        this.activeNavigationGroups = [];
        this.unsubscribeVisibilityChangesFns = [];
        this.eventSubscriber = new nodeeventsubscriber_1.NodeEventSubscriber();
        this.navigationGroups = __spreadArray([rootNavigationGroup], navigationGroups, true);
        this.keyMap = (0, keymap_1.getKeyMapForPlatform)();
        this.subscribeToNavigationGroupVisibilityChanges();
        this.attachKeyEventHandler();
        this.enableDefaultNavigationGroup();
    }
    SpatialNavigation.prototype.attachKeyEventHandler = function () {
        this.eventSubscriber.on(document, 'keydown', this.handleKeyEvent, true);
    };
    /**
     * Subscribes to onHide and onShow on all navigation groups containers as Spatial navigation tracks active navigation
     * group based on their container visibility.
     */
    SpatialNavigation.prototype.subscribeToNavigationGroupVisibilityChanges = function () {
        var _this = this;
        this.navigationGroups.forEach(function (group) {
            var onShowHandler = function () { return _this.onShow(group); };
            var onHideHandler = function () { return _this.onHide(group); };
            group.container.onShow.subscribe(onShowHandler);
            group.container.onHide.subscribe(onHideHandler);
            _this.unsubscribeVisibilityChangesFns.push(function () { return group.container.onShow.unsubscribe(onShowHandler); }, function () { return group.container.onHide.unsubscribe(onHideHandler); });
        });
    };
    SpatialNavigation.prototype.unsubscribeFromNavigationGroupVisibilityChanges = function () {
        this.unsubscribeVisibilityChangesFns.forEach(function (unsub) { return unsub(); });
        this.unsubscribeVisibilityChangesFns = [];
    };
    /**
     * It will enable group of which container is currently shown
     * If there are no groups with containers that are currently visible, it will enable root navigation group
     */
    SpatialNavigation.prototype.enableDefaultNavigationGroup = function () {
        var _a;
        var isShown = function (group) { return group.container.isShown(); };
        var groupToEnable = (_a = this.navigationGroups.find(isShown)) !== null && _a !== void 0 ? _a : this.navigationGroups[0];
        if (groupToEnable) {
            this.activeNavigationGroups.push(groupToEnable);
            this.updateEnabledNavigationGroup();
        }
    };
    /**
     * Disables navigation groups that are no longer active and calls enable on last pushed navigation group
     */
    SpatialNavigation.prototype.updateEnabledNavigationGroup = function () {
        var _this = this;
        this.activeNavigationGroups.forEach(function (group, idx) {
            if (idx < _this.activeNavigationGroups.length - 1) {
                group.disable();
            }
            else {
                group.enable();
            }
        });
    };
    /**
     * Returns currently active navigation group
     */
    SpatialNavigation.prototype.getActiveNavigationGroup = function () {
        return this.activeNavigationGroups[this.activeNavigationGroups.length - 1];
    };
    /**
     * Dispose of SpatialNavigation
     *
     * Remove all event handlers, release seekbar handler and release all navigation groups.
     */
    SpatialNavigation.prototype.release = function () {
        this.unsubscribeFromNavigationGroupVisibilityChanges();
        this.eventSubscriber.release();
        this.navigationGroups.forEach(function (group) { return group.release(); });
        this.seekBarHandler.release();
    };
    return SpatialNavigation;
}());
exports.SpatialNavigation = SpatialNavigation;
function getKeyCode(event) {
    return event.keyCode;
}

},{"./keymap":99,"./nodeeventsubscriber":102,"./seekbarhandler":104,"./typeguards":106}],106:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.isAction = exports.isDirection = exports.isListBox = exports.isContainer = exports.isComponent = exports.isSettingsPanel = void 0;
var component_1 = require("../components/component");
var settingspanel_1 = require("../components/settingspanel");
var container_1 = require("../components/container");
var listbox_1 = require("../components/listbox");
var types_1 = require("./types");
function isSettingsPanel(component) {
    return component instanceof settingspanel_1.SettingsPanel;
}
exports.isSettingsPanel = isSettingsPanel;
function isComponent(obj) {
    return obj !== null && obj !== undefined && obj instanceof component_1.Component;
}
exports.isComponent = isComponent;
function isContainer(obj) {
    return obj !== null && obj !== undefined && obj instanceof container_1.Container;
}
exports.isContainer = isContainer;
function isListBox(obj) {
    return obj instanceof listbox_1.ListBox;
}
exports.isListBox = isListBox;
function isDirection(direction) {
    return typeof direction === 'string' && Object.values(types_1.Direction).includes(direction);
}
exports.isDirection = isDirection;
function isAction(action) {
    return typeof action === 'string' && Object.values(types_1.Action).includes(action);
}
exports.isAction = isAction;

},{"../components/component":18,"../components/container":19,"../components/listbox":29,"../components/settingspanel":45,"./types":107}],107:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.Action = exports.Direction = void 0;
var Direction;
(function (Direction) {
    Direction["UP"] = "up";
    Direction["DOWN"] = "down";
    Direction["LEFT"] = "left";
    Direction["RIGHT"] = "right";
})(Direction = exports.Direction || (exports.Direction = {}));
var Action;
(function (Action) {
    Action["SELECT"] = "select";
    Action["BACK"] = "back";
})(Action = exports.Action || (exports.Action = {}));

},{}],108:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.StorageUtils = void 0;
/**
 * @category Utils
 */
var StorageUtils;
(function (StorageUtils) {
    var disableStorageApi;
    function setStorageApiDisabled(uiConfig) {
        disableStorageApi = uiConfig.disableStorageApi;
    }
    StorageUtils.setStorageApiDisabled = setStorageApiDisabled;
    function shouldUseLocalStorage() {
        try {
            return (!disableStorageApi &&
                window.localStorage &&
                typeof localStorage.getItem === 'function' &&
                typeof localStorage.setItem === 'function');
        }
        catch (e) {
            return false;
        }
    }
    /**
     * Stores a string item into localStorage.
     * @param key the item's key
     * @param data the item's data
     */
    function setItem(key, data) {
        if (shouldUseLocalStorage()) {
            try {
                window.localStorage.setItem(key, data);
            }
            catch (e) {
                console.debug("Failed to set storage item ".concat(key), e);
            }
        }
    }
    StorageUtils.setItem = setItem;
    /**
     * Gets an item's string value from the localStorage.
     * @param key the key to look up its associated value
     * @return {string | null} Returns the string if found, null if there is no data stored for the key
     */
    function getItem(key) {
        if (shouldUseLocalStorage()) {
            try {
                return window.localStorage.getItem(key);
            }
            catch (e) {
                console.debug("Failed to get storage item ".concat(key), e);
            }
        }
        return null;
    }
    StorageUtils.getItem = getItem;
    /**
     * Stores an object into localStorage. The object will be serialized to JSON. The following types are supported
     * in addition to the default types:
     *  - ColorUtils.Color
     *
     * @param key the key to store the data to
     * @param data the object to store
     */
    function setObject(key, data) {
        var json = JSON.stringify(data);
        setItem(key, json);
    }
    StorageUtils.setObject = setObject;
    /**
     * Gets an object for the given key from localStorage. The object will be deserialized from JSON. Beside the
     * default types, the following types are supported:
     *  - ColorUtils.Color
     *
     * @param key the key to look up its associated object
     * @return {any} Returns the object if found, null otherwise
     */
    function getObject(key) {
        var json = getItem(key);
        if (json) {
            var object = JSON.parse(json);
            return object;
        }
        return null;
    }
    StorageUtils.getObject = getObject;
})(StorageUtils = exports.StorageUtils || (exports.StorageUtils = {}));

},{}],109:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.StringUtils = void 0;
var i18n_1 = require("./localization/i18n");
/**
 * @category Utils
 */
var StringUtils;
(function (StringUtils) {
    StringUtils.FORMAT_HHMMSS = 'hh:mm:ss';
    StringUtils.FORMAT_MMSS = 'mm:ss';
    /**
     * Formats a number of seconds into a time string with the pattern hh:mm:ss.
     *
     * @param totalSeconds the total number of seconds to format to string
     * @param format the time format to output (default: hh:mm:ss)
     * @returns {string} the formatted time string
     */
    function secondsToTime(totalSeconds, format) {
        if (format === void 0) { format = StringUtils.FORMAT_HHMMSS; }
        var isNegative = totalSeconds < 0;
        if (isNegative) {
            // If the time is negative, we make it positive for the calculation below
            // (else we'd get all negative numbers) and reattach the negative sign later.
            totalSeconds = -totalSeconds;
        }
        // Split into separate time parts
        var hours = Math.floor(totalSeconds / 3600);
        var minutes = Math.floor(totalSeconds / 60) - hours * 60;
        var seconds = Math.floor(totalSeconds) % 60;
        return (isNegative ? '-' : '') + format
            .replace('hh', leftPadWithZeros(hours, 2))
            .replace('mm', leftPadWithZeros(minutes, 2))
            .replace('ss', leftPadWithZeros(seconds, 2));
    }
    StringUtils.secondsToTime = secondsToTime;
    function secondsToText(totalSeconds) {
        var isNegative = totalSeconds < 0;
        if (isNegative) {
            // If the time is negative, we make it positive for the calculation below
            // (else we'd get all negative numbers) and reattach the negative sign later.
            totalSeconds = -totalSeconds;
        }
        // Split into separate time parts
        var hours = Math.floor(totalSeconds / 3600);
        var minutes = Math.floor(totalSeconds / 60) - hours * 60;
        var seconds = Math.floor(totalSeconds) % 60;
        return (isNegative ? '-' : '') +
            (hours !== 0 ? "".concat(leftPadWithZeros(hours, 2), " ").concat(i18n_1.i18n.performLocalization(i18n_1.i18n.getLocalizer('settings.time.hours')), " ") : '') +
            (minutes !== 0 ? "".concat(leftPadWithZeros(minutes, 2), " ").concat(i18n_1.i18n.performLocalization(i18n_1.i18n.getLocalizer('settings.time.minutes')), " ") : '') +
            "".concat(leftPadWithZeros(seconds, 2), " ").concat(i18n_1.i18n.performLocalization(i18n_1.i18n.getLocalizer('settings.time.seconds')));
    }
    StringUtils.secondsToText = secondsToText;
    /**
     * Converts a number to a string and left-pads it with zeros to the specified length.
     * Example: leftPadWithZeros(123, 5) => '00123'
     *
     * @param num the number to convert to string and pad with zeros
     * @param length the desired length of the padded string
     * @returns {string} the padded number as string
     */
    function leftPadWithZeros(num, length) {
        var text = num + '';
        var padding = '0000000000'.substr(0, length - text.length);
        return padding + text;
    }
    /**
     * Fills out placeholders in an ad message.
     *
     * Has the placeholders '{remainingTime[formatString]}', '{playedTime[formatString]}',
     * '{adDuration[formatString]}' and {adBreakRemainingTime[formatString]}, which are replaced by the remaining time until the ad can be skipped, the current
     * time or the ad duration. The format string is optional. If not specified, the placeholder is replaced by the time
     * in seconds. If specified, it must be of the following format:
     * - %d - Inserts the time as an integer.
     * - %0Nd - Inserts the time as an integer with leading zeroes, if the length of the time string is smaller than N.
     * - %f - Inserts the time as a float.
     * - %0Nf - Inserts the time as a float with leading zeroes.
     * - %.Mf - Inserts the time as a float with M decimal places. Can be combined with %0Nf, e.g. %04.2f (the time
     * 10.123 would be printed as 0010.12).
     * - %hh:mm:ss
     * - %mm:ss
     *
     * Examples:
     * - { text: 'Ad: {remainingTime%mm:ss} secs' }
     * An input value of 100 would be displayed as: 'Ad: 01:40 secs'
     * - { text: 'Ad: {remainingTime%f} secs' }
     * An input value of 100 would be displayed as: 'Ad: 100.0 secs'
     * - { text: 'Adbreak: {adBreakRemainingTime%f} secs' }
     * Adbreak with 2 ads each 50 seconds would be displayed as: 'Ad: 100.0 secs'
     *
     * @param adMessage an ad message with optional placeholders to fill
     * @param skipOffset if specified, {remainingTime} will be filled with the remaining time until the ad can be skipped
     * @param player the player to get the time data from
     * @returns {string} the ad message with filled placeholders
     */
    function replaceAdMessagePlaceholders(adMessage, skipOffset, player) {
        var adMessagePlaceholderRegex = new RegExp('\\{(remainingTime|playedTime|adDuration|adBreakRemainingTime)(}|%((0[1-9]\\d*(\\.\\d+(d|f)|d|f)|\\.\\d+f|d|f)|hh:mm:ss|mm:ss)})', 'g');
        return adMessage.replace(adMessagePlaceholderRegex, function (formatString) {
            var time = 0;
            if (formatString.indexOf('remainingTime') > -1) {
                if (skipOffset) {
                    time = Math.ceil(skipOffset - player.getCurrentTime());
                }
                else {
                    time = player.getDuration() - player.getCurrentTime();
                }
            }
            else if (formatString.indexOf('playedTime') > -1) {
                time = player.getCurrentTime();
            }
            else if (formatString.indexOf('adDuration') > -1) {
                time = player.getDuration();
            }
            else if (formatString.indexOf('adBreakRemainingTime') > -1) { // To display the remaining time in the ad break as opposed to in the ad
                time = 0;
                // compute list of ads and calculate duration of remaining ads based on index of active ad
                if (player.ads.isLinearAdActive()) {
                    var isActiveAd = function (ad) { return player.ads.getActiveAd().id === ad.id; };
                    var indexOfActiveAd = player.ads.getActiveAdBreak().ads.findIndex(isActiveAd);
                    var duration = player.ads.getActiveAdBreak().ads
                        .slice(indexOfActiveAd)
                        .reduce(function (total, ad) { return total + (ad.isLinear ? ad.duration : 0); }, 0);
                    // And remaning ads duration minus time played
                    time = duration - player.getCurrentTime();
                }
            }
            return formatNumber(Math.round(time), formatString);
        });
    }
    StringUtils.replaceAdMessagePlaceholders = replaceAdMessagePlaceholders;
    function formatNumber(time, format) {
        var formatStringValidationRegex = /%((0[1-9]\d*(\.\d+(d|f)|d|f)|\.\d+f|d|f)|hh:mm:ss|mm:ss)/;
        var leadingZeroesRegex = /(%0[1-9]\d*)(?=(\.\d+f|f|d))/;
        var decimalPlacesRegex = /\.\d*(?=f)/;
        if (!formatStringValidationRegex.test(format)) {
            // If the format is invalid, we set a default fallback format
            format = '%d';
        }
        // Determine the number of leading zeros
        var leadingZeroes = 0;
        var leadingZeroesMatches = format.match(leadingZeroesRegex);
        if (leadingZeroesMatches) {
            leadingZeroes = parseInt(leadingZeroesMatches[0].substring(2));
        }
        // Determine the number of decimal places
        var numDecimalPlaces = null;
        var decimalPlacesMatches = format.match(decimalPlacesRegex);
        if (decimalPlacesMatches && !isNaN(parseInt(decimalPlacesMatches[0].substring(1)))) {
            numDecimalPlaces = parseInt(decimalPlacesMatches[0].substring(1));
            if (numDecimalPlaces > 20) {
                numDecimalPlaces = 20;
            }
        }
        // Float format
        if (format.indexOf('f') > -1) {
            var timeString = '';
            if (numDecimalPlaces !== null) {
                // Apply fixed number of decimal places
                timeString = time.toFixed(numDecimalPlaces);
            }
            else {
                timeString = '' + time;
            }
            // Apply leading zeros
            if (timeString.indexOf('.') > -1) {
                return leftPadWithZeros(timeString, timeString.length + (leadingZeroes - timeString.indexOf('.')));
            }
            else {
                return leftPadWithZeros(timeString, leadingZeroes);
            }
        }
        // Time format
        else if (format.indexOf(':') > -1) {
            var totalSeconds = Math.ceil(time);
            // hh:mm:ss format
            if (format.indexOf('hh') > -1) {
                return secondsToTime(totalSeconds);
            }
            // mm:ss format
            else {
                var minutes = Math.floor(totalSeconds / 60);
                var seconds = totalSeconds % 60;
                return leftPadWithZeros(minutes, 2) + ':' + leftPadWithZeros(seconds, 2);
            }
        }
        // Integer format
        else {
            return leftPadWithZeros(Math.ceil(time), leadingZeroes);
        }
    }
})(StringUtils = exports.StringUtils || (exports.StringUtils = {}));

},{"./localization/i18n":89}],110:[function(require,module,exports){
"use strict";
var __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {
    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {
        if (ar || !(i in from)) {
            if (!ar) ar = Array.prototype.slice.call(from, 0, i);
            ar[i] = from[i];
        }
    }
    return to.concat(ar || Array.prototype.slice.call(from));
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.SubtitleSwitchHandler = void 0;
var i18n_1 = require("./localization/i18n");
/**
 * Helper class to handle all subtitle related events
 *
 * This class listens to player events as well as the `ListSelector` event if selection changed
 *
 * @category Utils
 */
var SubtitleSwitchHandler = exports.SubtitleSwitchHandler = /** @class */ (function () {
    function SubtitleSwitchHandler(player, element, uimanager) {
        var _this = this;
        this.addSubtitle = function (event) {
            var subtitle = event.subtitle;
            if (!_this.listElement.hasItem(subtitle.id)) {
                _this.listElement.addItem(subtitle.id, subtitle.label);
            }
        };
        this.removeSubtitle = function (event) {
            var subtitle = event.subtitle;
            if (_this.listElement.hasItem(subtitle.id)) {
                _this.listElement.removeItem(subtitle.id);
            }
        };
        this.selectCurrentSubtitle = function () {
            if (!_this.player.subtitles) {
                // Subtitles API not available (yet)
                return;
            }
            var currentSubtitle = _this.player.subtitles.list().filter(function (subtitle) { return subtitle.enabled; }).pop();
            _this.listElement.selectItem(currentSubtitle ? currentSubtitle.id : SubtitleSwitchHandler.SUBTITLES_OFF_KEY);
        };
        this.clearSubtitles = function () {
            _this.listElement.clearItems();
        };
        this.refreshSubtitles = function () {
            if (!_this.player.subtitles) {
                // Subtitles API not available (yet)
                return;
            }
            var offListItem = {
                key: SubtitleSwitchHandler.SUBTITLES_OFF_KEY,
                label: i18n_1.i18n.getLocalizer('off'),
            };
            var subtitles = _this.player.subtitles.list();
            var subtitleToListItem = function (subtitle) {
                return { key: subtitle.id, label: subtitle.label };
            };
            _this.listElement.synchronizeItems(__spreadArray([
                offListItem
            ], subtitles.map(subtitleToListItem), true));
            _this.selectCurrentSubtitle();
        };
        this.player = player;
        this.listElement = element;
        this.uimanager = uimanager;
        this.bindSelectionEvent();
        this.bindPlayerEvents();
        this.refreshSubtitles();
    }
    SubtitleSwitchHandler.prototype.bindSelectionEvent = function () {
        var _this = this;
        this.listElement.onItemSelected.subscribe(function (_, value) {
            // TODO add support for multiple concurrent subtitle selections
            if (value === SubtitleSwitchHandler.SUBTITLES_OFF_KEY) {
                var currentSubtitle = _this.player.subtitles.list().filter(function (subtitle) { return subtitle.enabled; }).pop();
                if (currentSubtitle) {
                    _this.player.subtitles.disable(currentSubtitle.id);
                }
            }
            else {
                _this.player.subtitles.enable(value, true);
            }
        });
    };
    SubtitleSwitchHandler.prototype.bindPlayerEvents = function () {
        this.player.on(this.player.exports.PlayerEvent.SubtitleAdded, this.addSubtitle);
        this.player.on(this.player.exports.PlayerEvent.SubtitleEnabled, this.selectCurrentSubtitle);
        this.player.on(this.player.exports.PlayerEvent.SubtitleDisabled, this.selectCurrentSubtitle);
        this.player.on(this.player.exports.PlayerEvent.SubtitleRemoved, this.removeSubtitle);
        // Update subtitles when source goes away
        this.player.on(this.player.exports.PlayerEvent.SourceUnloaded, this.clearSubtitles);
        // Update subtitles when the period within a source changes
        this.player.on(this.player.exports.PlayerEvent.PeriodSwitched, this.refreshSubtitles);
        this.uimanager.getConfig().events.onUpdated.subscribe(this.refreshSubtitles);
    };
    SubtitleSwitchHandler.SUBTITLES_OFF_KEY = 'null';
    return SubtitleSwitchHandler;
}());

},{"./localization/i18n":89}],111:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.Timeout = void 0;
// TODO change to internal (not exported) class, how to use in other files?
/**
 * Executes a callback after a specified amount of time, optionally repeatedly until stopped.
 */
var Timeout = /** @class */ (function () {
    /**
     * Creates a new timeout callback handler.
     * @param delay the delay in milliseconds after which the callback should be executed
     * @param callback the callback to execute after the delay time
     * @param repeat if true, call the callback repeatedly in delay intervals
     */
    function Timeout(delay, callback, repeat) {
        if (repeat === void 0) { repeat = false; }
        this.delay = delay;
        this.callback = callback;
        this.repeat = repeat;
        this.timeoutOrIntervalId = 0;
        this.active = false;
        this.suspended = false;
    }
    /**
     * Starts the timeout and calls the callback when the timeout delay has passed. Has no effect when the timeout is
     * suspended.
     * @returns {Timeout} the current timeout (so the start call can be chained to the constructor)
     */
    Timeout.prototype.start = function () {
        this.reset();
        return this;
    };
    /**
     * Clears the timeout. The callback will not be called if clear is called during the timeout.
     */
    Timeout.prototype.clear = function () {
        this.clearInternal();
    };
    /**
     * Suspends the timeout. The callback will not be called and calls to `start` and `reset` will be ignored until the
     * timeout is resumed.
     */
    Timeout.prototype.suspend = function () {
        this.suspended = true;
        this.clearInternal();
        return this;
    };
    /**
     * Resumes the timeout.
     * @param reset whether to reset the timeout after resuming
     */
    Timeout.prototype.resume = function (reset) {
        this.suspended = false;
        if (reset) {
            this.reset();
        }
        return this;
    };
    /**
     * Resets the passed timeout delay to zero. Can be used to defer the calling of the callback. Has no effect if the
     * timeout is suspended.
     */
    Timeout.prototype.reset = function () {
        var _this = this;
        this.clearInternal();
        if (this.suspended) {
            return;
        }
        if (this.repeat) {
            this.timeoutOrIntervalId = setInterval(this.callback, this.delay);
        }
        else {
            this.timeoutOrIntervalId = setTimeout(function () {
                _this.active = false;
                _this.callback();
            }, this.delay);
        }
        this.active = true;
    };
    Timeout.prototype.isActive = function () {
        return this.active;
    };
    Timeout.prototype.clearInternal = function () {
        if (this.repeat) {
            clearInterval(this.timeoutOrIntervalId);
        }
        else {
            clearTimeout(this.timeoutOrIntervalId);
        }
        this.active = false;
    };
    return Timeout;
}());
exports.Timeout = Timeout;

},{}],112:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });

},{}],113:[function(require,module,exports){
"use strict";
var __assign = (this && this.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.UIFactory = void 0;
var subtitleoverlay_1 = require("./components/subtitleoverlay");
var settingspanelpage_1 = require("./components/settingspanelpage");
var settingspanelitem_1 = require("./components/settingspanelitem");
var videoqualityselectbox_1 = require("./components/videoqualityselectbox");
var playbackspeedselectbox_1 = require("./components/playbackspeedselectbox");
var audiotrackselectbox_1 = require("./components/audiotrackselectbox");
var audioqualityselectbox_1 = require("./components/audioqualityselectbox");
var settingspanel_1 = require("./components/settingspanel");
var subtitlesettingspanelpage_1 = require("./components/subtitlesettings/subtitlesettingspanelpage");
var settingspanelpageopenbutton_1 = require("./components/settingspanelpageopenbutton");
var subtitlesettingslabel_1 = require("./components/subtitlesettings/subtitlesettingslabel");
var subtitleselectbox_1 = require("./components/subtitleselectbox");
var controlbar_1 = require("./components/controlbar");
var container_1 = require("./components/container");
var playbacktimelabel_1 = require("./components/playbacktimelabel");
var seekbar_1 = require("./components/seekbar");
var seekbarlabel_1 = require("./components/seekbarlabel");
var playbacktogglebutton_1 = require("./components/playbacktogglebutton");
var volumetogglebutton_1 = require("./components/volumetogglebutton");
var volumeslider_1 = require("./components/volumeslider");
var spacer_1 = require("./components/spacer");
var pictureinpicturetogglebutton_1 = require("./components/pictureinpicturetogglebutton");
var airplaytogglebutton_1 = require("./components/airplaytogglebutton");
var casttogglebutton_1 = require("./components/casttogglebutton");
var vrtogglebutton_1 = require("./components/vrtogglebutton");
var settingstogglebutton_1 = require("./components/settingstogglebutton");
var fullscreentogglebutton_1 = require("./components/fullscreentogglebutton");
var uicontainer_1 = require("./components/uicontainer");
var bufferingoverlay_1 = require("./components/bufferingoverlay");
var playbacktoggleoverlay_1 = require("./components/playbacktoggleoverlay");
var caststatusoverlay_1 = require("./components/caststatusoverlay");
var titlebar_1 = require("./components/titlebar");
var recommendationoverlay_1 = require("./components/recommendationoverlay");
var watermark_1 = require("./components/watermark");
var errormessageoverlay_1 = require("./components/errormessageoverlay");
var adclickoverlay_1 = require("./components/adclickoverlay");
var admessagelabel_1 = require("./components/admessagelabel");
var adskipbutton_1 = require("./components/adskipbutton");
var closebutton_1 = require("./components/closebutton");
var metadatalabel_1 = require("./components/metadatalabel");
var playerutils_1 = require("./playerutils");
var label_1 = require("./components/label");
var castuicontainer_1 = require("./components/castuicontainer");
var uimanager_1 = require("./uimanager");
var i18n_1 = require("./localization/i18n");
var subtitlelistbox_1 = require("./components/subtitlelistbox");
var audiotracklistbox_1 = require("./components/audiotracklistbox");
var spatialnavigation_1 = require("./spatialnavigation/spatialnavigation");
var rootnavigationgroup_1 = require("./spatialnavigation/rootnavigationgroup");
var ListNavigationGroup_1 = require("./spatialnavigation/ListNavigationGroup");
var ecomodecontainer_1 = require("./components/ecomodecontainer");
var UIFactory;
(function (UIFactory) {
    function buildDefaultUI(player, config) {
        if (config === void 0) { config = {}; }
        return UIFactory.buildModernTvUI(player, config);
    }
    UIFactory.buildDefaultUI = buildDefaultUI;
    function buildDefaultSmallScreenUI(player, config) {
        if (config === void 0) { config = {}; }
        return UIFactory.buildModernSmallScreenUI(player, config);
    }
    UIFactory.buildDefaultSmallScreenUI = buildDefaultSmallScreenUI;
    function buildDefaultCastReceiverUI(player, config) {
        if (config === void 0) { config = {}; }
        return UIFactory.buildModernCastReceiverUI(player, config);
    }
    UIFactory.buildDefaultCastReceiverUI = buildDefaultCastReceiverUI;
    function buildDefaultTvUI(player, config) {
        if (config === void 0) { config = {}; }
        return UIFactory.buildModernTvUI(player, config);
    }
    UIFactory.buildDefaultTvUI = buildDefaultTvUI;
    function modernUI(config) {
        var subtitleOverlay = new subtitleoverlay_1.SubtitleOverlay();
        var mainSettingsPanelPage;
        var components = [
            new settingspanelitem_1.SettingsPanelItem(i18n_1.i18n.getLocalizer('settings.video.quality'), new videoqualityselectbox_1.VideoQualitySelectBox()),
            new settingspanelitem_1.SettingsPanelItem(i18n_1.i18n.getLocalizer('speed'), new playbackspeedselectbox_1.PlaybackSpeedSelectBox()),
            new settingspanelitem_1.SettingsPanelItem(i18n_1.i18n.getLocalizer('settings.audio.track'), new audiotrackselectbox_1.AudioTrackSelectBox()),
            new settingspanelitem_1.SettingsPanelItem(i18n_1.i18n.getLocalizer('settings.audio.quality'), new audioqualityselectbox_1.AudioQualitySelectBox()),
        ];
        if (config.ecoMode) {
            var ecoModeContainer = new ecomodecontainer_1.EcoModeContainer();
            ecoModeContainer.setOnToggleCallback(function () {
                // forces the browser to re-calculate the height of the settings panel when adding/removing elements
                settingsPanel.getDomElement().css({ width: '', height: '' });
            });
            components.unshift(ecoModeContainer);
        }
        mainSettingsPanelPage = new settingspanelpage_1.SettingsPanelPage({
            components: components,
        });
        var settingsPanel = new settingspanel_1.SettingsPanel({
            components: [mainSettingsPanelPage],
            hidden: true,
        });
        var subtitleSettingsPanelPage = new subtitlesettingspanelpage_1.SubtitleSettingsPanelPage({
            settingsPanel: settingsPanel,
            overlay: subtitleOverlay,
        });
        var subtitleSelectBox = new subtitleselectbox_1.SubtitleSelectBox();
        var subtitleSettingsOpenButton = new settingspanelpageopenbutton_1.SettingsPanelPageOpenButton({
            targetPage: subtitleSettingsPanelPage,
            container: settingsPanel,
            ariaLabel: i18n_1.i18n.getLocalizer('settings.subtitles'),
            text: i18n_1.i18n.getLocalizer('open'),
        });
        mainSettingsPanelPage.addComponent(new settingspanelitem_1.SettingsPanelItem(new subtitlesettingslabel_1.SubtitleSettingsLabel({
            text: i18n_1.i18n.getLocalizer('settings.subtitles'),
            opener: subtitleSettingsOpenButton,
        }), subtitleSelectBox, {
            role: 'menubar',
        }));
        settingsPanel.addComponent(subtitleSettingsPanelPage);
        var controlBar = new controlbar_1.ControlBar({
            components: [
                settingsPanel,
                new container_1.Container({
                    components: [
                        new playbacktimelabel_1.PlaybackTimeLabel({
                            timeLabelMode: playbacktimelabel_1.PlaybackTimeLabelMode.CurrentTime,
                            hideInLivePlayback: true,
                        }),
                        new seekbar_1.SeekBar({ label: new seekbarlabel_1.SeekBarLabel() }),
                        new playbacktimelabel_1.PlaybackTimeLabel({
                            timeLabelMode: playbacktimelabel_1.PlaybackTimeLabelMode.TotalTime,
                            cssClasses: ['text-right'],
                        }),
                    ],
                    cssClasses: ['controlbar-top'],
                }),
                new container_1.Container({
                    components: [
                        new playbacktogglebutton_1.PlaybackToggleButton(),
                        new volumetogglebutton_1.VolumeToggleButton(),
                        new volumeslider_1.VolumeSlider(),
                        new spacer_1.Spacer(),
                        new pictureinpicturetogglebutton_1.PictureInPictureToggleButton(),
                        new airplaytogglebutton_1.AirPlayToggleButton(),
                        new casttogglebutton_1.CastToggleButton(),
                        new vrtogglebutton_1.VRToggleButton(),
                        new settingstogglebutton_1.SettingsToggleButton({ settingsPanel: settingsPanel }),
                        new fullscreentogglebutton_1.FullscreenToggleButton(),
                    ],
                    cssClasses: ['controlbar-bottom'],
                }),
            ],
        });
        return new uicontainer_1.UIContainer({
            components: [
                subtitleOverlay,
                new bufferingoverlay_1.BufferingOverlay(),
                new playbacktoggleoverlay_1.PlaybackToggleOverlay(),
                new caststatusoverlay_1.CastStatusOverlay(),
                controlBar,
                new titlebar_1.TitleBar(),
                new recommendationoverlay_1.RecommendationOverlay(),
                new watermark_1.Watermark(),
                new errormessageoverlay_1.ErrorMessageOverlay(),
            ],
            hideDelay: 2000,
            hidePlayerStateExceptions: [
                playerutils_1.PlayerUtils.PlayerState.Prepared,
                playerutils_1.PlayerUtils.PlayerState.Paused,
                playerutils_1.PlayerUtils.PlayerState.Finished,
            ],
        });
    }
    UIFactory.modernUI = modernUI;
    function modernAdsUI() {
        return new uicontainer_1.UIContainer({
            components: [
                new bufferingoverlay_1.BufferingOverlay(),
                new adclickoverlay_1.AdClickOverlay(),
                new playbacktoggleoverlay_1.PlaybackToggleOverlay(),
                new container_1.Container({
                    components: [new admessagelabel_1.AdMessageLabel({ text: i18n_1.i18n.getLocalizer('ads.remainingTime') }), new adskipbutton_1.AdSkipButton()],
                    cssClass: 'ui-ads-status',
                }),
                new controlbar_1.ControlBar({
                    components: [
                        new container_1.Container({
                            components: [
                                new playbacktogglebutton_1.PlaybackToggleButton(),
                                new volumetogglebutton_1.VolumeToggleButton(),
                                new volumeslider_1.VolumeSlider(),
                                new spacer_1.Spacer(),
                                new fullscreentogglebutton_1.FullscreenToggleButton(),
                            ],
                            cssClasses: ['controlbar-bottom'],
                        }),
                    ],
                }),
            ],
            cssClasses: ['ui-skin-ads'],
            hideDelay: 2000,
            hidePlayerStateExceptions: [
                playerutils_1.PlayerUtils.PlayerState.Prepared,
                playerutils_1.PlayerUtils.PlayerState.Paused,
                playerutils_1.PlayerUtils.PlayerState.Finished,
            ],
        });
    }
    UIFactory.modernAdsUI = modernAdsUI;
    function modernSmallScreenUI() {
        var subtitleOverlay = new subtitleoverlay_1.SubtitleOverlay();
        var mainSettingsPanelPage = new settingspanelpage_1.SettingsPanelPage({
            components: [
                new settingspanelitem_1.SettingsPanelItem(i18n_1.i18n.getLocalizer('settings.video.quality'), new videoqualityselectbox_1.VideoQualitySelectBox()),
                new settingspanelitem_1.SettingsPanelItem(i18n_1.i18n.getLocalizer('speed'), new playbackspeedselectbox_1.PlaybackSpeedSelectBox()),
                new settingspanelitem_1.SettingsPanelItem(i18n_1.i18n.getLocalizer('settings.audio.track'), new audiotrackselectbox_1.AudioTrackSelectBox()),
                new settingspanelitem_1.SettingsPanelItem(i18n_1.i18n.getLocalizer('settings.audio.quality'), new audioqualityselectbox_1.AudioQualitySelectBox()),
            ],
        });
        var settingsPanel = new settingspanel_1.SettingsPanel({
            components: [mainSettingsPanelPage],
            hidden: true,
            pageTransitionAnimation: false,
            hideDelay: -1,
        });
        var subtitleSettingsPanelPage = new subtitlesettingspanelpage_1.SubtitleSettingsPanelPage({
            settingsPanel: settingsPanel,
            overlay: subtitleOverlay,
        });
        var subtitleSettingsOpenButton = new settingspanelpageopenbutton_1.SettingsPanelPageOpenButton({
            targetPage: subtitleSettingsPanelPage,
            container: settingsPanel,
            ariaLabel: i18n_1.i18n.getLocalizer('settings.subtitles'),
            text: i18n_1.i18n.getLocalizer('open'),
        });
        var subtitleSelectBox = new subtitleselectbox_1.SubtitleSelectBox();
        mainSettingsPanelPage.addComponent(new settingspanelitem_1.SettingsPanelItem(new subtitlesettingslabel_1.SubtitleSettingsLabel({
            text: i18n_1.i18n.getLocalizer('settings.subtitles'),
            opener: subtitleSettingsOpenButton,
        }), subtitleSelectBox, {
            role: 'menubar',
        }));
        settingsPanel.addComponent(subtitleSettingsPanelPage);
        settingsPanel.addComponent(new closebutton_1.CloseButton({ target: settingsPanel }));
        subtitleSettingsPanelPage.addComponent(new closebutton_1.CloseButton({ target: settingsPanel }));
        var controlBar = new controlbar_1.ControlBar({
            components: [
                new container_1.Container({
                    components: [
                        new playbacktimelabel_1.PlaybackTimeLabel({
                            timeLabelMode: playbacktimelabel_1.PlaybackTimeLabelMode.CurrentTime,
                            hideInLivePlayback: true,
                        }),
                        new seekbar_1.SeekBar({ label: new seekbarlabel_1.SeekBarLabel() }),
                        new playbacktimelabel_1.PlaybackTimeLabel({
                            timeLabelMode: playbacktimelabel_1.PlaybackTimeLabelMode.TotalTime,
                            cssClasses: ['text-right'],
                        }),
                    ],
                    cssClasses: ['controlbar-top'],
                }),
            ],
        });
        return new uicontainer_1.UIContainer({
            components: [
                subtitleOverlay,
                new bufferingoverlay_1.BufferingOverlay(),
                new caststatusoverlay_1.CastStatusOverlay(),
                new playbacktoggleoverlay_1.PlaybackToggleOverlay(),
                new recommendationoverlay_1.RecommendationOverlay(),
                controlBar,
                new titlebar_1.TitleBar({
                    components: [
                        new metadatalabel_1.MetadataLabel({ content: metadatalabel_1.MetadataLabelContent.Title }),
                        new casttogglebutton_1.CastToggleButton(),
                        new vrtogglebutton_1.VRToggleButton(),
                        new pictureinpicturetogglebutton_1.PictureInPictureToggleButton(),
                        new airplaytogglebutton_1.AirPlayToggleButton(),
                        new volumetogglebutton_1.VolumeToggleButton(),
                        new settingstogglebutton_1.SettingsToggleButton({ settingsPanel: settingsPanel }),
                        new fullscreentogglebutton_1.FullscreenToggleButton(),
                    ],
                }),
                settingsPanel,
                new watermark_1.Watermark(),
                new errormessageoverlay_1.ErrorMessageOverlay(),
            ],
            cssClasses: ['ui-skin-smallscreen'],
            hideDelay: 2000,
            hidePlayerStateExceptions: [
                playerutils_1.PlayerUtils.PlayerState.Prepared,
                playerutils_1.PlayerUtils.PlayerState.Paused,
                playerutils_1.PlayerUtils.PlayerState.Finished,
            ],
        });
    }
    UIFactory.modernSmallScreenUI = modernSmallScreenUI;
    function modernSmallScreenAdsUI() {
        return new uicontainer_1.UIContainer({
            components: [
                new bufferingoverlay_1.BufferingOverlay(),
                new adclickoverlay_1.AdClickOverlay(),
                new playbacktoggleoverlay_1.PlaybackToggleOverlay(),
                new titlebar_1.TitleBar({
                    components: [
                        // dummy label with no content to move buttons to the right
                        new label_1.Label({ cssClass: 'label-metadata-title' }),
                        new fullscreentogglebutton_1.FullscreenToggleButton(),
                    ],
                }),
                new container_1.Container({
                    components: [new admessagelabel_1.AdMessageLabel({ text: 'Ad: {remainingTime} secs' }), new adskipbutton_1.AdSkipButton()],
                    cssClass: 'ui-ads-status',
                }),
            ],
            cssClasses: ['ui-skin-ads', 'ui-skin-smallscreen'],
            hideDelay: 2000,
            hidePlayerStateExceptions: [
                playerutils_1.PlayerUtils.PlayerState.Prepared,
                playerutils_1.PlayerUtils.PlayerState.Paused,
                playerutils_1.PlayerUtils.PlayerState.Finished,
            ],
        });
    }
    UIFactory.modernSmallScreenAdsUI = modernSmallScreenAdsUI;
    function modernCastReceiverUI() {
        var controlBar = new controlbar_1.ControlBar({
            components: [
                new container_1.Container({
                    components: [
                        new playbacktimelabel_1.PlaybackTimeLabel({
                            timeLabelMode: playbacktimelabel_1.PlaybackTimeLabelMode.CurrentTime,
                            hideInLivePlayback: true,
                        }),
                        new seekbar_1.SeekBar({ smoothPlaybackPositionUpdateIntervalMs: -1 }),
                        new playbacktimelabel_1.PlaybackTimeLabel({
                            timeLabelMode: playbacktimelabel_1.PlaybackTimeLabelMode.TotalTime,
                            cssClasses: ['text-right'],
                        }),
                    ],
                    cssClasses: ['controlbar-top'],
                }),
            ],
        });
        return new castuicontainer_1.CastUIContainer({
            components: [
                new subtitleoverlay_1.SubtitleOverlay(),
                new bufferingoverlay_1.BufferingOverlay(),
                new playbacktoggleoverlay_1.PlaybackToggleOverlay(),
                new watermark_1.Watermark(),
                controlBar,
                new titlebar_1.TitleBar({ keepHiddenWithoutMetadata: true }),
                new errormessageoverlay_1.ErrorMessageOverlay(),
            ],
            cssClasses: ['ui-skin-cast-receiver'],
            hideDelay: 2000,
            hidePlayerStateExceptions: [
                playerutils_1.PlayerUtils.PlayerState.Prepared,
                playerutils_1.PlayerUtils.PlayerState.Paused,
                playerutils_1.PlayerUtils.PlayerState.Finished,
            ],
        });
    }
    UIFactory.modernCastReceiverUI = modernCastReceiverUI;
    function buildModernUI(player, config) {
        if (config === void 0) { config = {}; }
        // show smallScreen UI only on mobile/handheld devices
        var smallScreenSwitchWidth = 600;
        return new uimanager_1.UIManager(player, [
            {
                ui: modernSmallScreenAdsUI(),
                condition: function (context) {
                    return (context.isMobile && context.documentWidth < smallScreenSwitchWidth && context.isAd && context.adRequiresUi);
                },
            },
            {
                ui: modernAdsUI(),
                condition: function (context) {
                    return context.isAd && context.adRequiresUi;
                },
            },
            {
                ui: modernSmallScreenUI(),
                condition: function (context) {
                    return (!context.isAd &&
                        !context.adRequiresUi &&
                        context.isMobile &&
                        context.documentWidth < smallScreenSwitchWidth);
                },
            },
            {
                ui: modernUI(config),
                condition: function (context) {
                    return !context.isAd && !context.adRequiresUi;
                },
            },
        ], config);
    }
    UIFactory.buildModernUI = buildModernUI;
    function buildModernSmallScreenUI(player, config) {
        if (config === void 0) { config = {}; }
        return new uimanager_1.UIManager(player, [
            __assign({}, modernTvUI()),
        ], config);
    }
    UIFactory.buildModernSmallScreenUI = buildModernSmallScreenUI;
    function buildModernCastReceiverUI(player, config) {
        if (config === void 0) { config = {}; }
        return new uimanager_1.UIManager(player, modernCastReceiverUI(), config);
    }
    UIFactory.buildModernCastReceiverUI = buildModernCastReceiverUI;
    function buildModernTvUI(player, config) {
        if (config === void 0) { config = {}; }
        return new uimanager_1.UIManager(player, [
            __assign({}, modernTvUI()),
        ], config);
    }
    UIFactory.buildModernTvUI = buildModernTvUI;
    function modernTvUI() {
        var subtitleListBox = new subtitlelistbox_1.SubtitleListBox();
        var subtitleListPanel = new settingspanel_1.SettingsPanel({
            components: [
                new settingspanelpage_1.SettingsPanelPage({
                    components: [new settingspanelitem_1.SettingsPanelItem(null, subtitleListBox)],
                }),
            ],
            hidden: true,
        });
        var audioTrackListBox = new audiotracklistbox_1.AudioTrackListBox();
        var audioTrackListPanel = new settingspanel_1.SettingsPanel({
            components: [
                new settingspanelpage_1.SettingsPanelPage({
                    components: [new settingspanelitem_1.SettingsPanelItem(null, audioTrackListBox)],
                }),
            ],
            hidden: true,
        });
        var seekBar = new seekbar_1.SeekBar({ label: new seekbarlabel_1.SeekBarLabel() });
        var playbackToggleOverlay = new playbacktoggleoverlay_1.PlaybackToggleOverlay();
        var subtitleToggleButton = new settingstogglebutton_1.SettingsToggleButton({
            settingsPanel: subtitleListPanel,
            autoHideWhenNoActiveSettings: true,
            cssClass: 'ui-subtitlesettingstogglebutton',
            text: i18n_1.i18n.getLocalizer('settings.subtitles'),
        });
        var audioToggleButton = new settingstogglebutton_1.SettingsToggleButton({
            settingsPanel: audioTrackListPanel,
            autoHideWhenNoActiveSettings: true,
            cssClass: 'ui-audiotracksettingstogglebutton',
            ariaLabel: i18n_1.i18n.getLocalizer('settings.audio.track'),
            text: i18n_1.i18n.getLocalizer('settings.audio.track'),
        });
        var uiContainer = new uicontainer_1.UIContainer({
            components: [
                new subtitleoverlay_1.SubtitleOverlay(),
                new bufferingoverlay_1.BufferingOverlay(),
                playbackToggleOverlay,
                new controlbar_1.ControlBar({
                    components: [
                        new container_1.Container({
                            components: [
                                new playbacktimelabel_1.PlaybackTimeLabel({
                                    timeLabelMode: playbacktimelabel_1.PlaybackTimeLabelMode.CurrentTime,
                                    hideInLivePlayback: true,
                                }),
                                seekBar,
                                new playbacktimelabel_1.PlaybackTimeLabel({
                                    timeLabelMode: playbacktimelabel_1.PlaybackTimeLabelMode.RemainingTime,
                                    cssClasses: ['text-right'],
                                }),
                            ],
                            cssClasses: ['controlbar-top'],
                        }),
                    ],
                }),
                new titlebar_1.TitleBar({
                    components: [
                        new container_1.Container({
                            components: [
                                new metadatalabel_1.MetadataLabel({ content: metadatalabel_1.MetadataLabelContent.Title }),
                                subtitleToggleButton,
                                audioToggleButton,
                            ],
                            cssClasses: ['ui-titlebar-top'],
                        }),
                        new container_1.Container({
                            components: [
                                new metadatalabel_1.MetadataLabel({ content: metadatalabel_1.MetadataLabelContent.Description }),
                                subtitleListPanel,
                                audioTrackListPanel,
                            ],
                            cssClasses: ['ui-titlebar-bottom'],
                        }),
                    ],
                }),
                new recommendationoverlay_1.RecommendationOverlay(),
                new errormessageoverlay_1.ErrorMessageOverlay(),
            ],
            cssClasses: ['ui-skin-tv'],
            hideDelay: 2000,
            hidePlayerStateExceptions: [
                playerutils_1.PlayerUtils.PlayerState.Prepared,
                playerutils_1.PlayerUtils.PlayerState.Paused,
                playerutils_1.PlayerUtils.PlayerState.Finished,
            ],
        });
        var spatialNavigation = new spatialnavigation_1.SpatialNavigation(new rootnavigationgroup_1.RootNavigationGroup(uiContainer, playbackToggleOverlay, seekBar, audioToggleButton, subtitleToggleButton), new ListNavigationGroup_1.ListNavigationGroup(ListNavigationGroup_1.ListOrientation.Vertical, subtitleListPanel, subtitleListBox), new ListNavigationGroup_1.ListNavigationGroup(ListNavigationGroup_1.ListOrientation.Vertical, audioTrackListPanel, audioTrackListBox));
        return {
            ui: uiContainer,
            spatialNavigation: spatialNavigation,
        };
    }
    UIFactory.modernTvUI = modernTvUI;
})(UIFactory = exports.UIFactory || (exports.UIFactory = {}));

},{"./components/adclickoverlay":4,"./components/admessagelabel":5,"./components/adskipbutton":6,"./components/airplaytogglebutton":7,"./components/audioqualityselectbox":8,"./components/audiotracklistbox":9,"./components/audiotrackselectbox":10,"./components/bufferingoverlay":11,"./components/caststatusoverlay":13,"./components/casttogglebutton":14,"./components/castuicontainer":15,"./components/closebutton":17,"./components/container":19,"./components/controlbar":20,"./components/ecomodecontainer":21,"./components/errormessageoverlay":23,"./components/fullscreentogglebutton":24,"./components/label":28,"./components/metadatalabel":31,"./components/pictureinpicturetogglebutton":32,"./components/playbackspeedselectbox":33,"./components/playbacktimelabel":34,"./components/playbacktogglebutton":35,"./components/playbacktoggleoverlay":36,"./components/recommendationoverlay":38,"./components/seekbar":40,"./components/seekbarlabel":43,"./components/settingspanel":45,"./components/settingspanelitem":46,"./components/settingspanelpage":47,"./components/settingspanelpageopenbutton":50,"./components/settingstogglebutton":51,"./components/spacer":52,"./components/subtitlelistbox":53,"./components/subtitleoverlay":54,"./components/subtitleselectbox":55,"./components/subtitlesettings/subtitlesettingslabel":64,"./components/subtitlesettings/subtitlesettingspanelpage":66,"./components/titlebar":71,"./components/uicontainer":74,"./components/videoqualityselectbox":75,"./components/volumeslider":77,"./components/volumetogglebutton":78,"./components/vrtogglebutton":79,"./components/watermark":80,"./localization/i18n":89,"./playerutils":96,"./spatialnavigation/ListNavigationGroup":97,"./spatialnavigation/rootnavigationgroup":103,"./spatialnavigation/spatialnavigation":105,"./uimanager":114}],114:[function(require,module,exports){
"use strict";
var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        if (typeof b !== "function" && b !== null)
            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __assign = (this && this.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
var __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {
    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {
        if (ar || !(i in from)) {
            if (!ar) ar = Array.prototype.slice.call(from, 0, i);
            ar[i] = from[i];
        }
    }
    return to.concat(ar || Array.prototype.slice.call(from));
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.PlayerWrapper = exports.UIInstanceManager = exports.UIManager = void 0;
var uicontainer_1 = require("./components/uicontainer");
var dom_1 = require("./dom");
var container_1 = require("./components/container");
var eventdispatcher_1 = require("./eventdispatcher");
var uiutils_1 = require("./uiutils");
var arrayutils_1 = require("./arrayutils");
var browserutils_1 = require("./browserutils");
var volumecontroller_1 = require("./volumecontroller");
var i18n_1 = require("./localization/i18n");
var focusvisibilitytracker_1 = require("./focusvisibilitytracker");
var mobilev3playerapi_1 = require("./mobilev3playerapi");
var subtitlesettingsmanager_1 = require("./components/subtitlesettings/subtitlesettingsmanager");
var storageutils_1 = require("./storageutils");
var UIManager = /** @class */ (function () {
    function UIManager(player, playerUiOrUiVariants, uiconfig) {
        if (uiconfig === void 0) { uiconfig = {}; }
        var _this = this;
        this.events = {
            onUiVariantResolve: new eventdispatcher_1.EventDispatcher(),
            onActiveUiChanged: new eventdispatcher_1.EventDispatcher(),
        };
        if (playerUiOrUiVariants instanceof uicontainer_1.UIContainer) {
            // Single-UI constructor has been called, transform arguments to UIVariant[] signature
            var playerUi = playerUiOrUiVariants;
            var uiVariants = [];
            // Add the default player UI
            uiVariants.push({ ui: playerUi });
            this.uiVariants = uiVariants;
        }
        else {
            // Default constructor (UIVariant[]) has been called
            this.uiVariants = playerUiOrUiVariants;
        }
        this.subtitleSettingsManager = new subtitlesettingsmanager_1.SubtitleSettingsManager();
        this.player = player;
        this.managerPlayerWrapper = new PlayerWrapper(player);
        // ensure that at least the metadata object does exist in the uiconfig
        uiconfig.metadata = uiconfig.metadata ? uiconfig.metadata : {};
        this.config = __assign(__assign({ playbackSpeedSelectionEnabled: true, autoUiVariantResolve: true, disableAutoHideWhenHovered: false, enableSeekPreview: true }, uiconfig), { events: {
                onUpdated: new eventdispatcher_1.EventDispatcher(),
            }, volumeController: new volumecontroller_1.VolumeController(this.managerPlayerWrapper.getPlayer()) });
        /**
         * Gathers configuration data from the UI config and player source config and creates a merged UI config
         * that is used throughout the UI instance.
         */
        var updateConfig = function () {
            var playerSourceConfig = player.getSource() || {};
            _this.config.metadata = JSON.parse(JSON.stringify(uiconfig.metadata || {}));
            // Extract the UI-related config properties from the source config
            var playerSourceUiConfig = {
                metadata: {
                    // TODO move metadata into source.metadata namespace in player v8
                    title: playerSourceConfig.title,
                    description: playerSourceConfig.description,
                    markers: playerSourceConfig.markers,
                },
                recommendations: playerSourceConfig.recommendations,
            };
            // Player source config takes precedence over the UI config, because the config in the source is attached
            // to a source which changes with every player.load, whereas the UI config stays the same for the whole
            // lifetime of the player instance.
            _this.config.metadata.title = playerSourceUiConfig.metadata.title || uiconfig.metadata.title;
            _this.config.metadata.description = playerSourceUiConfig.metadata.description || uiconfig.metadata.description;
            _this.config.metadata.markers = playerSourceUiConfig.metadata.markers || uiconfig.metadata.markers || [];
            _this.config.recommendations = playerSourceUiConfig.recommendations || uiconfig.recommendations || [];
            storageutils_1.StorageUtils.setStorageApiDisabled(uiconfig);
        };
        updateConfig();
        this.subtitleSettingsManager.initialize();
        // Update the source configuration when a new source is loaded and dispatch onUpdated
        var updateSource = function () {
            updateConfig();
            _this.config.events.onUpdated.dispatch(_this);
        };
        var wrappedPlayer = this.managerPlayerWrapper.getPlayer();
        wrappedPlayer.on(this.player.exports.PlayerEvent.SourceLoaded, updateSource);
        // The PlaylistTransition event is only available on Mobile v3 for now.
        // This event is fired when a new source becomes active in the player.
        if ((0, mobilev3playerapi_1.isMobileV3PlayerAPI)(wrappedPlayer)) {
            wrappedPlayer.on(mobilev3playerapi_1.MobileV3PlayerEvent.PlaylistTransition, updateSource);
        }
        if (uiconfig.container) {
            // Unfortunately "uiContainerElement = new DOM(config.container)" will not accept the container with
            // string|HTMLElement type directly, although it accepts both types, so we need to spit these two cases up here.
            // TODO check in upcoming TS versions if the container can be passed in directly, or fix the constructor
            this.uiContainerElement = uiconfig.container instanceof HTMLElement ?
                new dom_1.DOM(uiconfig.container) : new dom_1.DOM(uiconfig.container);
        }
        else {
            this.uiContainerElement = new dom_1.DOM(player.getContainer());
        }
        // Create UI instance managers for the UI variants
        // The instance managers map to the corresponding UI variants by their array index
        this.uiInstanceManagers = [];
        var uiVariantsWithoutCondition = [];
        for (var _i = 0, _a = this.uiVariants; _i < _a.length; _i++) {
            var uiVariant = _a[_i];
            if (uiVariant.condition == null) {
                // Collect variants without conditions for error checking
                uiVariantsWithoutCondition.push(uiVariant);
            }
            // Create the instance manager for a UI variant
            this.uiInstanceManagers.push(new InternalUIInstanceManager(player, uiVariant.ui, this.config, this.subtitleSettingsManager, uiVariant.spatialNavigation));
        }
        // Make sure that there is only one UI variant without a condition
        // It does not make sense to have multiple variants without condition, because only the first one in the list
        // (the one with the lowest index) will ever be selected.
        if (uiVariantsWithoutCondition.length > 1) {
            throw Error('Too many UIs without a condition: You cannot have more than one default UI');
        }
        // Make sure that the default UI variant, if defined, is at the end of the list (last index)
        // If it comes earlier, the variants with conditions that come afterwards will never be selected because the
        // default variant without a condition always evaluates to 'true'
        if (uiVariantsWithoutCondition.length > 0
            && uiVariantsWithoutCondition[0] !== this.uiVariants[this.uiVariants.length - 1]) {
            throw Error('Invalid UI variant order: the default UI (without condition) must be at the end of the list');
        }
        var adStartedEvent = null; // keep the event stored here during ad playback
        // Dynamically select a UI variant that matches the current UI condition.
        var resolveUiVariant = function (event) {
            // Make sure that the AdStarted event data is persisted through ad playback in case other events happen
            // in the meantime, e.g. player resize. We need to store this data because there is no other way to find out
            // ad details while an ad is playing (in v8.0 at least; from v8.1 there will be ads.getActiveAd()).
            // Existing event data signals that an ad is currently active (instead of ads.isLinearAdActive()).
            if (event != null) {
                switch (event.type) {
                    // The ads UI is shown upon the first AdStarted event. Subsequent AdStarted events within an ad break
                    // will not change the condition context and thus not lead to undesired UI variant resolving.
                    // The ads UI is shown upon AdStarted instead of AdBreakStarted because there can be a loading delay
                    // between these two events in the player, and the AdBreakStarted event does not carry any metadata to
                    // initialize the ads UI, so it would be rendered in an uninitialized state for a certain amount of time.
                    // TODO show ads UI upon AdBreakStarted and display loading overlay between AdBreakStarted and first AdStarted
                    // TODO display loading overlay between AdFinished and next AdStarted
                    case player.exports.PlayerEvent.AdStarted:
                        adStartedEvent = event;
                        break;
                    // The ads UI is hidden only when the ad break is finished, i.e. not on AdFinished events. This way we keep
                    // the ads UI variant active throughout an ad break, as reacting to AdFinished would lead to undesired UI
                    // variant switching between two ads in an ad break, e.g. ads UI -> AdFinished -> content UI ->
                    // AdStarted -> ads UI.
                    case player.exports.PlayerEvent.AdBreakFinished:
                        adStartedEvent = null;
                        // When switching to a variant for the first time, a config.events.onUpdated event is fired to trigger a UI
                        // update of the new variant, because most components subscribe to this event to update themselves. When
                        // switching to the ads UI on the first AdStarted, all UI variants update themselves with the ad data, so
                        // when switching back to the "normal" UI it will carry properties of the ad instead of the main content.
                        // We thus fire this event here to force an UI update with the properties of the main content. This is
                        // basically a hack because the config.events.onUpdated event is abused in many places and not just used
                        // for config updates (e.g. adding a marker to the seekbar).
                        // TODO introduce an event that is fired when the playback content is updated, a switch to/from ads
                        _this.config.events.onUpdated.dispatch(_this);
                        break;
                    // When a new source is loaded during ad playback, there will be no Ad(Break)Finished event
                    case player.exports.PlayerEvent.SourceLoaded:
                    case player.exports.PlayerEvent.SourceUnloaded:
                        adStartedEvent = null;
                        break;
                }
            }
            // Detect if an ad has started
            var isAd = adStartedEvent != null;
            var adRequiresUi = false;
            if (isAd) {
                var ad = adStartedEvent.ad;
                // for now only linear ads can request a UI
                if (ad.isLinear) {
                    var linearAd = ad;
                    adRequiresUi = linearAd.uiConfig && linearAd.uiConfig.requestsUi || false;
                }
            }
            if (adRequiresUi) {
                // we dispatch onUpdated event because if there are multiple adBreaks for same position
                // `Play` and `Playing` events will not be dispatched which will cause `PlaybackButton` state
                // to be out of sync
                _this.config.events.onUpdated.dispatch(_this);
            }
            _this.resolveUiVariant({
                isAd: isAd,
                adRequiresUi: adRequiresUi,
            }, function (context) {
                // If this is an ad UI, we need to relay the saved ON_AD_STARTED event data so ad components can configure
                // themselves for the current ad.
                if (context.isAd) {
                    /* Relay the ON_AD_STARTED event to the ads UI
                     *
                     * Because the ads UI is initialized in the ON_AD_STARTED handler, i.e. when the ON_AD_STARTED event has
                     * already been fired, components in the ads UI that listen for the ON_AD_STARTED event never receive it.
                     * Since this can break functionality of components that rely on this event, we relay the event to the
                     * ads UI components with the following call.
                     */
                    _this.currentUi.getWrappedPlayer().fireEventInUI(_this.player.exports.PlayerEvent.AdStarted, adStartedEvent);
                }
            });
        };
        // Listen to the following events to trigger UI variant resolution
        if (this.config.autoUiVariantResolve) {
            this.managerPlayerWrapper.getPlayer().on(this.player.exports.PlayerEvent.SourceLoaded, resolveUiVariant);
            this.managerPlayerWrapper.getPlayer().on(this.player.exports.PlayerEvent.SourceUnloaded, resolveUiVariant);
            this.managerPlayerWrapper.getPlayer().on(this.player.exports.PlayerEvent.Play, resolveUiVariant);
            this.managerPlayerWrapper.getPlayer().on(this.player.exports.PlayerEvent.Paused, resolveUiVariant);
            this.managerPlayerWrapper.getPlayer().on(this.player.exports.PlayerEvent.AdStarted, resolveUiVariant);
            this.managerPlayerWrapper.getPlayer().on(this.player.exports.PlayerEvent.AdBreakFinished, resolveUiVariant);
            this.managerPlayerWrapper.getPlayer().on(this.player.exports.PlayerEvent.PlayerResized, resolveUiVariant);
            this.managerPlayerWrapper.getPlayer().on(this.player.exports.PlayerEvent.ViewModeChanged, resolveUiVariant);
        }
        this.focusVisibilityTracker = new focusvisibilitytracker_1.FocusVisibilityTracker('bmpui');
        // Initialize the UI
        resolveUiVariant(null);
    }
    /**
     * Exposes i18n.getLocalizer() function
     * @returns {I18nApi.getLocalizer()}
     */
    UIManager.localize = function (key) {
        return i18n_1.i18n.getLocalizer(key);
    };
    /**
     * Provide configuration to support Custom UI languages
     * default language: 'en'
     */
    UIManager.setLocalizationConfig = function (localizationConfig) {
        i18n_1.i18n.setConfig(localizationConfig);
    };
    UIManager.prototype.getSubtitleSettingsManager = function () {
        return this.subtitleSettingsManager;
    };
    UIManager.prototype.getConfig = function () {
        return this.config;
    };
    /**
     * Returns the list of UI variants as passed into the constructor of {@link UIManager}.
     * @returns {UIVariant[]} the list of available UI variants
     */
    UIManager.prototype.getUiVariants = function () {
        return this.uiVariants;
    };
    /**
     * Switches to a UI variant from the list returned by {@link getUiVariants}.
     * @param {UIVariant} uiVariant the UI variant to switch to
     * @param {() => void} onShow a callback that is executed just before the new UI variant is shown
     */
    UIManager.prototype.switchToUiVariant = function (uiVariant, onShow) {
        var uiVariantIndex = this.uiVariants.indexOf(uiVariant);
        var previousUi = this.currentUi;
        var nextUi = this.uiInstanceManagers[uiVariantIndex];
        // Determine if the UI variant is changing
        // Only if the UI variant is changing, we need to do some stuff. Else we just leave everything as-is.
        if (nextUi === this.currentUi) {
            return;
            // console.log('switched from ', this.currentUi ? this.currentUi.getUI() : 'none',
            //   ' to ', nextUi ? nextUi.getUI() : 'none');
        }
        // Hide the currently active UI variant
        if (this.currentUi) {
            this.currentUi.getUI().hide();
        }
        // Assign the new UI variant as current UI
        this.currentUi = nextUi;
        // When we switch to a different UI instance, there's some additional stuff to manage. If we do not switch
        // to an instance, we're done here.
        if (this.currentUi == null) {
            return;
        }
        // Add the UI to the DOM (and configure it) the first time it is selected
        if (!this.currentUi.isConfigured()) {
            this.addUi(this.currentUi);
            // ensure that the internal state is ready for the upcoming show call
            if (!this.currentUi.getUI().isHidden()) {
                this.currentUi.getUI().hide();
            }
        }
        if (onShow) {
            onShow();
        }
        this.currentUi.getUI().show();
        this.events.onActiveUiChanged.dispatch(this, { previousUi: previousUi, currentUi: nextUi });
    };
    /**
     * Triggers a UI variant switch as triggered by events when automatic switching is enabled. It allows to overwrite
     * properties of the {@link UIConditionContext}.
     * @param {Partial<UIConditionContext>} context an optional set of properties that overwrite properties of the
     *   automatically determined context
     * @param {(context: UIConditionContext) => void} onShow a callback that is executed just before the new UI variant
     *   is shown (if a switch is happening)
     */
    UIManager.prototype.resolveUiVariant = function (context, onShow) {
        if (context === void 0) { context = {}; }
        // Determine the current context for which the UI variant will be resolved
        var defaultContext = {
            isAd: false,
            adRequiresUi: false,
            isFullscreen: this.player.getViewMode() === this.player.exports.ViewMode.Fullscreen,
            isMobile: browserutils_1.BrowserUtils.isMobile,
            isPlaying: this.player.isPlaying(),
            width: this.uiContainerElement.width(),
            documentWidth: document.body.clientWidth,
        };
        // Overwrite properties of the default context with passed in context properties
        var switchingContext = __assign(__assign({}, defaultContext), context);
        // Fire the event and allow modification of the context before it is used to resolve the UI variant
        this.events.onUiVariantResolve.dispatch(this, switchingContext);
        var nextUiVariant = null;
        // Select new UI variant
        // If no variant condition is fulfilled, we switch to *no* UI
        for (var _i = 0, _a = this.uiVariants; _i < _a.length; _i++) {
            var uiVariant = _a[_i];
            var matchesCondition = uiVariant.condition == null || uiVariant.condition(switchingContext) === true;
            if (nextUiVariant == null && matchesCondition) {
                nextUiVariant = uiVariant;
            }
            else {
                // hide all UIs besides the one which should be active
                uiVariant.ui.hide();
            }
        }
        this.switchToUiVariant(nextUiVariant, function () {
            if (onShow) {
                onShow(switchingContext);
            }
        });
    };
    UIManager.prototype.addUi = function (ui) {
        var dom = ui.getUI().getDomElement();
        var player = ui.getWrappedPlayer();
        ui.configureControls();
        /* Append the UI DOM after configuration to avoid CSS transitions at initialization
         * Example: Components are hidden during configuration and these hides may trigger CSS transitions that are
         * undesirable at this time. */
        this.uiContainerElement.append(dom);
        // When the UI is loaded after a source was loaded, we need to tell the components to initialize themselves
        if (player.getSource()) {
            this.config.events.onUpdated.dispatch(this);
        }
        // Fire onConfigured after UI DOM elements are successfully added. When fired immediately, the DOM elements
        // might not be fully configured and e.g. do not have a size.
        // https://swizec.com/blog/how-to-properly-wait-for-dom-elements-to-show-up-in-modern-browsers/swizec/6663
        if (window.requestAnimationFrame) {
            requestAnimationFrame(function () { ui.onConfigured.dispatch(ui.getUI()); });
        }
        else {
            // IE9 fallback
            setTimeout(function () { ui.onConfigured.dispatch(ui.getUI()); }, 0);
        }
    };
    UIManager.prototype.releaseUi = function (ui) {
        ui.releaseControls();
        var uiContainer = ui.getUI();
        if (uiContainer.hasDomElement()) {
            uiContainer.getDomElement().remove();
        }
        ui.clearEventHandlers();
    };
    UIManager.prototype.release = function () {
        for (var _i = 0, _a = this.uiInstanceManagers; _i < _a.length; _i++) {
            var uiInstanceManager = _a[_i];
            this.releaseUi(uiInstanceManager);
        }
        this.managerPlayerWrapper.clearEventHandlers();
        this.focusVisibilityTracker.release();
    };
    Object.defineProperty(UIManager.prototype, "onUiVariantResolve", {
        /**
         * Fires just before UI variants are about to be resolved and the UI variant is possibly switched. It is fired when
         * the switch is triggered from an automatic switch and when calling {@link resolveUiVariant}.
         * Can be used to modify the {@link UIConditionContext} before resolving is done.
         * @returns {EventDispatcher<UIManager, UIConditionContext>}
         */
        get: function () {
            return this.events.onUiVariantResolve;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(UIManager.prototype, "onActiveUiChanged", {
        /**
         * Fires after the UIManager has switched to a different UI variant.
         * @returns {EventDispatcher<UIManager, ActiveUiChangedArgs>}
         */
        get: function () {
            return this.events.onActiveUiChanged;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(UIManager.prototype, "activeUi", {
        /**
         * The current active {@link UIInstanceManager}.
         */
        get: function () {
            return this.currentUi;
        },
        enumerable: false,
        configurable: true
    });
    /**
     * Returns the list of all added markers in undefined order.
     */
    UIManager.prototype.getTimelineMarkers = function () {
        return this.config.metadata.markers;
    };
    /**
     * Adds a marker to the timeline. Does not check for duplicates/overlaps at the `time`.
     */
    UIManager.prototype.addTimelineMarker = function (timelineMarker) {
        this.config.metadata.markers.push(timelineMarker);
        this.config.events.onUpdated.dispatch(this);
    };
    /**
     * Removes a marker from the timeline (by reference) and returns `true` if the marker has
     * been part of the timeline and successfully removed, or `false` if the marker could not
     * be found and thus not removed.
     */
    UIManager.prototype.removeTimelineMarker = function (timelineMarker) {
        if (arrayutils_1.ArrayUtils.remove(this.config.metadata.markers, timelineMarker) === timelineMarker) {
            this.config.events.onUpdated.dispatch(this);
            return true;
        }
        return false;
    };
    return UIManager;
}());
exports.UIManager = UIManager;
/**
 * Encapsulates functionality to manage a UI instance. Used by the {@link UIManager} to manage multiple UI instances.
 */
var UIInstanceManager = /** @class */ (function () {
    function UIInstanceManager(player, ui, config, subtitleSettingsManager, spatialNavigation) {
        this.events = {
            onConfigured: new eventdispatcher_1.EventDispatcher(),
            onSeek: new eventdispatcher_1.EventDispatcher(),
            onSeekPreview: new eventdispatcher_1.EventDispatcher(),
            onSeeked: new eventdispatcher_1.EventDispatcher(),
            onComponentShow: new eventdispatcher_1.EventDispatcher(),
            onComponentHide: new eventdispatcher_1.EventDispatcher(),
            onComponentViewModeChanged: new eventdispatcher_1.EventDispatcher(),
            onControlsShow: new eventdispatcher_1.EventDispatcher(),
            onPreviewControlsHide: new eventdispatcher_1.EventDispatcher(),
            onControlsHide: new eventdispatcher_1.EventDispatcher(),
            onRelease: new eventdispatcher_1.EventDispatcher(),
        };
        this.playerWrapper = new PlayerWrapper(player);
        this.ui = ui;
        this.config = config;
        this.subtitleSettingsManager = subtitleSettingsManager;
        this.spatialNavigation = spatialNavigation;
    }
    UIInstanceManager.prototype.getSubtitleSettingsManager = function () {
        return this.subtitleSettingsManager;
    };
    UIInstanceManager.prototype.getConfig = function () {
        return this.config;
    };
    UIInstanceManager.prototype.getUI = function () {
        return this.ui;
    };
    UIInstanceManager.prototype.getPlayer = function () {
        return this.playerWrapper.getPlayer();
    };
    Object.defineProperty(UIInstanceManager.prototype, "onConfigured", {
        /**
         * Fires when the UI is fully configured and added to the DOM.
         * @returns {EventDispatcher}
         */
        get: function () {
            return this.events.onConfigured;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(UIInstanceManager.prototype, "onSeek", {
        /**
         * Fires when a seek starts.
         * @returns {EventDispatcher}
         */
        get: function () {
            return this.events.onSeek;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(UIInstanceManager.prototype, "onSeekPreview", {
        /**
         * Fires when the seek timeline is scrubbed.
         * @returns {EventDispatcher}
         */
        get: function () {
            return this.events.onSeekPreview;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(UIInstanceManager.prototype, "onSeeked", {
        /**
         * Fires when a seek is finished.
         * @returns {EventDispatcher}
         */
        get: function () {
            return this.events.onSeeked;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(UIInstanceManager.prototype, "onComponentShow", {
        /**
         * Fires when a component is showing.
         * @returns {EventDispatcher}
         */
        get: function () {
            return this.events.onComponentShow;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(UIInstanceManager.prototype, "onComponentHide", {
        /**
         * Fires when a component is hiding.
         * @returns {EventDispatcher}
         */
        get: function () {
            return this.events.onComponentHide;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(UIInstanceManager.prototype, "onControlsShow", {
        /**
         * Fires when the UI controls are showing.
         * @returns {EventDispatcher}
         */
        get: function () {
            return this.events.onControlsShow;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(UIInstanceManager.prototype, "onPreviewControlsHide", {
        /**
         * Fires before the UI controls are hiding to check if they are allowed to hide.
         * @returns {EventDispatcher}
         */
        get: function () {
            return this.events.onPreviewControlsHide;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(UIInstanceManager.prototype, "onControlsHide", {
        /**
         * Fires when the UI controls are hiding.
         * @returns {EventDispatcher}
         */
        get: function () {
            return this.events.onControlsHide;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(UIInstanceManager.prototype, "onRelease", {
        /**
         * Fires when the UI controls are released.
         * @returns {EventDispatcher}
         */
        get: function () {
            return this.events.onRelease;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(UIInstanceManager.prototype, "onComponentViewModeChanged", {
        get: function () {
            return this.events.onComponentViewModeChanged;
        },
        enumerable: false,
        configurable: true
    });
    UIInstanceManager.prototype.clearEventHandlers = function () {
        this.playerWrapper.clearEventHandlers();
        var events = this.events; // avoid TS7017
        for (var event_1 in events) {
            var dispatcher = events[event_1];
            dispatcher.unsubscribeAll();
        }
    };
    return UIInstanceManager;
}());
exports.UIInstanceManager = UIInstanceManager;
/**
 * Extends the {@link UIInstanceManager} for internal use in the {@link UIManager} and provides access to functionality
 * that components receiving a reference to the {@link UIInstanceManager} should not have access to.
 */
var InternalUIInstanceManager = /** @class */ (function (_super) {
    __extends(InternalUIInstanceManager, _super);
    function InternalUIInstanceManager() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    InternalUIInstanceManager.prototype.getWrappedPlayer = function () {
        // TODO find a non-hacky way to provide the WrappedPlayer to the UIManager without exporting it
        // getPlayer() actually returns the WrappedPlayer but its return type is set to Player so the WrappedPlayer does
        // not need to be exported
        return this.getPlayer();
    };
    InternalUIInstanceManager.prototype.configureControls = function () {
        this.configureControlsTree(this.getUI());
        this.configured = true;
    };
    InternalUIInstanceManager.prototype.isConfigured = function () {
        return this.configured;
    };
    InternalUIInstanceManager.prototype.configureControlsTree = function (component) {
        var _this = this;
        var configuredComponents = [];
        uiutils_1.UIUtils.traverseTree(component, function (component) {
            // First, check if we have already configured a component, and throw an error if we did. Multiple configuration
            // of the same component leads to unexpected UI behavior. Also, a component that is in the UI tree multiple
            // times hints at a wrong UI structure.
            // We could just skip configuration in such a case and not throw an exception, but enforcing a clean UI tree
            // seems like the better choice.
            for (var _i = 0, configuredComponents_1 = configuredComponents; _i < configuredComponents_1.length; _i++) {
                var configuredComponent = configuredComponents_1[_i];
                if (configuredComponent === component) {
                    // Write the component to the console to simplify identification of the culprit
                    // (e.g. by inspecting the config)
                    if (console) {
                        console.error('Circular reference in UI tree', component);
                    }
                    // Additionally throw an error, because this case must not happen and leads to unexpected UI behavior.
                    throw Error('Circular reference in UI tree: ' + component.constructor.name);
                }
            }
            component.initialize();
            component.configure(_this.getPlayer(), _this);
            configuredComponents.push(component);
        });
    };
    InternalUIInstanceManager.prototype.releaseControls = function () {
        var _a;
        // Do not call release methods if the components have never been configured; this can result in exceptions
        if (this.configured) {
            this.onRelease.dispatch(this.getUI());
            this.releaseControlsTree(this.getUI());
            this.configured = false;
        }
        (_a = this.spatialNavigation) === null || _a === void 0 ? void 0 : _a.release();
        this.released = true;
    };
    InternalUIInstanceManager.prototype.isReleased = function () {
        return this.released;
    };
    InternalUIInstanceManager.prototype.releaseControlsTree = function (component) {
        component.release();
        if (component instanceof container_1.Container) {
            for (var _i = 0, _a = component.getComponents(); _i < _a.length; _i++) {
                var childComponent = _a[_i];
                this.releaseControlsTree(childComponent);
            }
        }
    };
    InternalUIInstanceManager.prototype.clearEventHandlers = function () {
        _super.prototype.clearEventHandlers.call(this);
    };
    return InternalUIInstanceManager;
}(UIInstanceManager));
/**
 * Wraps the player to track event handlers and provide a simple method to remove all registered event
 * handlers from the player.
 *
 * @category Utils
 */
var PlayerWrapper = /** @class */ (function () {
    function PlayerWrapper(player) {
        var _this = this;
        this.eventHandlers = {};
        this.player = player;
        // Collect all members of the player (public API methods and properties of the player)
        var objectProtoPropertyNames = Object.getOwnPropertyNames(Object.getPrototypeOf({}));
        var namesToIgnore = __spreadArray(['constructor'], objectProtoPropertyNames, true);
        var members = getAllPropertyNames(player).filter(function (name) { return namesToIgnore.indexOf(name) === -1; });
        // Split the members into methods and properties
        var methods = [];
        var properties = [];
        for (var _i = 0, members_1 = members; _i < members_1.length; _i++) {
            var member = members_1[_i];
            if (typeof player[member] === 'function') {
                methods.push(member);
            }
            else {
                properties.push(member);
            }
        }
        // Create wrapper object
        var wrapper = {};
        var _loop_1 = function (method) {
            wrapper[method] = function () {
                // console.log('called ' + member); // track method calls on the player
                return player[method].apply(player, arguments);
            };
        };
        // Add function wrappers for all API methods that do nothing but calling the base method on the player
        for (var _a = 0, methods_1 = methods; _a < methods_1.length; _a++) {
            var method = methods_1[_a];
            _loop_1(method);
        }
        var _loop_2 = function (property) {
            // Get an eventually existing property descriptor to differentiate between plain properties and properties with
            // getters/setters.
            var propertyDescriptor = (function (target) {
                while (target) {
                    var propertyDescriptor_1 = Object.getOwnPropertyDescriptor(target, property);
                    if (propertyDescriptor_1) {
                        return propertyDescriptor_1;
                    }
                    // Check if the PropertyDescriptor exists on a child prototype in case we have an inheritance of the player
                    target = Object.getPrototypeOf(target);
                }
            })(player);
            // If the property has getters/setters, wrap them accordingly...
            if (propertyDescriptor && (propertyDescriptor.get || propertyDescriptor.set)) {
                Object.defineProperty(wrapper, property, {
                    get: function () { return propertyDescriptor.get.call(player); },
                    set: function (value) { return propertyDescriptor.set.call(player, value); },
                });
            }
            // ... else just transfer the property to the wrapper
            else {
                wrapper[property] = player[property];
            }
        };
        // Add all public properties of the player to the wrapper
        for (var _b = 0, properties_1 = properties; _b < properties_1.length; _b++) {
            var property = properties_1[_b];
            _loop_2(property);
        }
        // Explicitly add a wrapper method for 'on' that adds added event handlers to the event list
        wrapper.on = function (eventType, callback) {
            player.on(eventType, callback);
            if (!_this.eventHandlers[eventType]) {
                _this.eventHandlers[eventType] = [];
            }
            _this.eventHandlers[eventType].push(callback);
            return wrapper;
        };
        // Explicitly add a wrapper method for 'off' that removes removed event handlers from the event list
        wrapper.off = function (eventType, callback) {
            player.off(eventType, callback);
            if (_this.eventHandlers[eventType]) {
                arrayutils_1.ArrayUtils.remove(_this.eventHandlers[eventType], callback);
            }
            return wrapper;
        };
        wrapper.fireEventInUI = function (event, data) {
            if (_this.eventHandlers[event]) { // check if there are handlers for this event registered
                // Extend the data object with default values to convert it to a {@link PlayerEventBase} object.
                var playerEventData = Object.assign({}, {
                    timestamp: Date.now(),
                    type: event,
                    // Add a marker property so the UI can detect UI-internal player events
                    uiSourced: true,
                }, data);
                // Execute the registered callbacks
                for (var _i = 0, _a = _this.eventHandlers[event]; _i < _a.length; _i++) {
                    var callback = _a[_i];
                    callback(playerEventData);
                }
            }
        };
        this.wrapper = wrapper;
    }
    /**
     * Returns a wrapped player object that can be used on place of the normal player object.
     * @returns {WrappedPlayer} a wrapped player
     */
    PlayerWrapper.prototype.getPlayer = function () {
        return this.wrapper;
    };
    /**
     * Clears all registered event handlers from the player that were added through the wrapped player.
     */
    PlayerWrapper.prototype.clearEventHandlers = function () {
        try {
            // Call the player API to check if the instance is still valid or already destroyed.
            // This can be any call throwing the PlayerAPINotAvailableError when the player instance is destroyed.
            this.player.getSource();
        }
        catch (error) {
            if (error instanceof this.player.exports.PlayerAPINotAvailableError) {
                // We have detected that the player instance is already destroyed, so we clear the event handlers to avoid
                // event handler unsubscription attempts (which would result in PlayerAPINotAvailableError errors).
                this.eventHandlers = {};
            }
        }
        for (var eventType in this.eventHandlers) {
            for (var _i = 0, _a = this.eventHandlers[eventType]; _i < _a.length; _i++) {
                var callback = _a[_i];
                this.player.off(eventType, callback);
            }
        }
    };
    return PlayerWrapper;
}());
exports.PlayerWrapper = PlayerWrapper;
function getAllPropertyNames(target) {
    var names = [];
    while (target) {
        var newNames = Object.getOwnPropertyNames(target).filter(function (name) { return names.indexOf(name) === -1; });
        names = names.concat(newNames);
        // go up prototype chain
        target = Object.getPrototypeOf(target);
    }
    return names;
}

},{"./arrayutils":1,"./browserutils":3,"./components/container":19,"./components/subtitlesettings/subtitlesettingsmanager":65,"./components/uicontainer":74,"./dom":82,"./eventdispatcher":84,"./focusvisibilitytracker":85,"./localization/i18n":89,"./mobilev3playerapi":95,"./storageutils":108,"./uiutils":115,"./volumecontroller":116}],115:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.UIUtils = void 0;
var container_1 = require("./components/container");
/**
 * @category Utils
 */
var UIUtils;
(function (UIUtils) {
    function traverseTree(component, visit) {
        var recursiveTreeWalker = function (component, parent) {
            visit(component, parent);
            // If the current component is a container, visit it's children
            if (component instanceof container_1.Container) {
                for (var _i = 0, _a = component.getComponents(); _i < _a.length; _i++) {
                    var childComponent = _a[_i];
                    recursiveTreeWalker(childComponent, component);
                }
            }
        };
        // Walk and configure the component tree
        recursiveTreeWalker(component);
    }
    UIUtils.traverseTree = traverseTree;
    // From: https://github.com/nfriend/ts-keycode-enum/blob/master/Key.enum.ts
    var KeyCode;
    (function (KeyCode) {
        KeyCode[KeyCode["LeftArrow"] = 37] = "LeftArrow";
        KeyCode[KeyCode["UpArrow"] = 38] = "UpArrow";
        KeyCode[KeyCode["RightArrow"] = 39] = "RightArrow";
        KeyCode[KeyCode["DownArrow"] = 40] = "DownArrow";
        KeyCode[KeyCode["Space"] = 32] = "Space";
        KeyCode[KeyCode["End"] = 35] = "End";
        KeyCode[KeyCode["Home"] = 36] = "Home";
    })(KeyCode = UIUtils.KeyCode || (UIUtils.KeyCode = {}));
})(UIUtils = exports.UIUtils || (exports.UIUtils = {}));

},{"./components/container":19}],116:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.VolumeTransition = exports.VolumeController = void 0;
var eventdispatcher_1 = require("./eventdispatcher");
/**
 * Can be used to centrally manage and control the volume and mute state of the player from multiple components.
 */
var VolumeController = exports.VolumeController = /** @class */ (function () {
    function VolumeController(player) {
        var _this = this;
        this.player = player;
        this.events = {
            onChanged: new eventdispatcher_1.EventDispatcher(),
        };
        this.storeVolume();
        var handler = function () {
            _this.onChangedEvent();
        };
        player.on(player.exports.PlayerEvent.SourceLoaded, handler);
        player.on(player.exports.PlayerEvent.VolumeChanged, handler);
        player.on(player.exports.PlayerEvent.Muted, handler);
        player.on(player.exports.PlayerEvent.Unmuted, handler);
    }
    VolumeController.prototype.setVolume = function (volume) {
        this.player.setVolume(volume, VolumeController.issuerName);
    };
    VolumeController.prototype.getVolume = function () {
        return this.player.getVolume();
    };
    VolumeController.prototype.setMuted = function (muted) {
        if (muted) {
            this.player.mute(VolumeController.issuerName);
        }
        else {
            this.player.unmute(VolumeController.issuerName);
        }
    };
    VolumeController.prototype.toggleMuted = function () {
        if (this.isMuted() || this.getVolume() === 0) {
            // Unmuting from the mute or zero-volume state recalls the previously saved volume setting. Setting the
            // volume automatically unmutes the player in v7.
            this.recallVolume();
        }
        else {
            this.setMuted(true);
        }
    };
    VolumeController.prototype.isMuted = function () {
        return this.player.isMuted();
    };
    /**
     * Stores (saves) the current volume so it can later be restored with {@link recallVolume}.
     */
    VolumeController.prototype.storeVolume = function () {
        this.storedVolume = this.getVolume();
    };
    /**
     * Recalls (sets) the volume previously stored with {@link storeVolume}.
     */
    VolumeController.prototype.recallVolume = function () {
        this.setMuted(this.storedVolume === 0);
        this.setVolume(this.storedVolume);
    };
    VolumeController.prototype.startTransition = function () {
        return new VolumeTransition(this);
    };
    VolumeController.prototype.onChangedEvent = function () {
        var playerMuted = this.isMuted();
        var playerVolume = this.getVolume();
        var uiMuted = playerMuted || playerVolume === 0;
        var uiVolume = playerMuted ? 0 : playerVolume;
        this.storeVolume();
        this.events.onChanged.dispatch(this, { volume: uiVolume, muted: uiMuted });
    };
    Object.defineProperty(VolumeController.prototype, "onChanged", {
        /**
         * Gets the event that is fired when the volume settings have changed.
         */
        get: function () {
            return this.events.onChanged.getEvent();
        },
        enumerable: false,
        configurable: true
    });
    VolumeController.issuerName = 'ui-volumecontroller';
    return VolumeController;
}());
var VolumeTransition = /** @class */ (function () {
    function VolumeTransition(controller) {
        this.controller = controller;
        // Store the volume at the beginning of a volume change so we can recall it later in case we set the volume to
        // zero and actually mute the player.
        controller.storeVolume();
    }
    VolumeTransition.prototype.update = function (volume) {
        // Update the volume while transitioning so the user has a "live preview" of the desired target volume
        this.controller.setMuted(false);
        this.controller.setVolume(volume);
    };
    VolumeTransition.prototype.finish = function (volume) {
        if (volume === 0) {
            // When the volume is zero we essentially mute the volume so we recall the volume from the beginning of the
            // transition and mute the player instead. Recalling is necessary to return to the actual audio volume
            // when unmuting.
            // We must first recall the volume and then mute, because recalling sets the volume on the player
            // and setting a player volume > 0 unmutes the player in v7.
            this.controller.recallVolume();
            this.controller.setMuted(true);
        }
        else {
            this.controller.setMuted(false);
            this.controller.setVolume(volume);
            this.controller.storeVolume();
        }
    };
    return VolumeTransition;
}());
exports.VolumeTransition = VolumeTransition;

},{"./eventdispatcher":84}],117:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.VttUtils = void 0;
// Our default height of a line
var lineHeight = 28;
// Default relative line height
var lineHeightPercent = 5;
var lineCount = 1;
var defaultLineNumber = 21; // Our default amount of lines
var Direction;
(function (Direction) {
    Direction["Top"] = "top";
    Direction["Bottom"] = "bottom";
    Direction["Left"] = "left";
    Direction["Right"] = "right";
})(Direction || (Direction = {}));
var VttVerticalWriting;
(function (VttVerticalWriting) {
    VttVerticalWriting["GrowingRight"] = "lr";
    VttVerticalWriting["GrowingLeft"] = "rl";
})(VttVerticalWriting || (VttVerticalWriting = {}));
var DirectionPair = new Map([
    [Direction.Top, Direction.Bottom],
    [Direction.Bottom, Direction.Top],
    [Direction.Left, Direction.Right],
    [Direction.Right, Direction.Left],
]);
/**
 * Sets the default standardized styles for the Cue Box
 * https://w3.org/TR/webvtt1/#applying-css-properties
 */
var setDefaultVttStyles = function (cueContainerDom, vtt) {
    if (vtt.region) {
        cueContainerDom.css('position', 'relative');
        cueContainerDom.css('unicode-bidi', 'plaintext');
    }
    else {
        cueContainerDom.css('position', 'absolute');
        cueContainerDom.css('overflow-wrap', 'break-word');
        cueContainerDom.css('overflow', 'hidden');
        cueContainerDom.css('flex-flow', 'column');
    }
    cueContainerDom.css('display', 'inline-flex');
};
/**
 * Align the Cue Box's line
 * https://w3.org/TR/webvtt1/#webvtt-cue-line-alignment
 */
var setVttLineAlign = function (cueContainerDom, _a, direction, relativeCueBoxPosition) {
    var lineAlign = _a.lineAlign;
    switch (lineAlign) {
        case 'center':
            setCssForCenterLineAlign(cueContainerDom, direction, relativeCueBoxPosition);
            break;
        case 'end':
            setCssForEndLineAlign(cueContainerDom, direction, relativeCueBoxPosition);
    }
};
/**
 * Defines the line positioning of the Cue Box
 * https://w3.org/TR/webvtt1/#webvtt-cue-line
 */
var setVttLine = function (cueContainerDom, vtt, direction, subtitleOverLaySize) {
    var overlayReferenceEdge = DirectionPair.get(direction);
    if (vtt.line === 'auto' && vtt.vertical) {
        cueContainerDom.css(overlayReferenceEdge, '0');
        return;
    }
    if (vtt.line === 'auto' && !vtt.vertical) {
        return;
    }
    var relativeLinePosition = parseFloat(vtt.line);
    if (vtt.snapToLines) {
        var targetLine = Number(vtt.line);
        if (targetLine < 0) {
            targetLine = defaultLineNumber + targetLine;
        }
        var lineHeight_1 = subtitleOverLaySize.height / defaultLineNumber;
        var absoluteLinePosition = lineHeight_1 * targetLine;
        relativeLinePosition = (100 * absoluteLinePosition) / subtitleOverLaySize.height;
    }
    if (vtt.lineAlign !== 'end')
        cueContainerDom.css(overlayReferenceEdge, "".concat(relativeLinePosition, "%"));
    setVttLineAlign(cueContainerDom, vtt, direction, relativeLinePosition);
};
/**
 * Defines the writing direction of the Cue Box
 * https://w3.org/TR/webvtt1/#webvtt-cue-writing-direction
 */
var setVttWritingDirectionAndCueBoxPositioning = function (cueContainerDom, vtt, subtitleOverlaySize) {
    switch (vtt.vertical) {
        case '':
            cueContainerDom.css('writing-mode', 'horizontal-tb');
            cueContainerDom.css(Direction.Bottom, '0');
            setVttLine(cueContainerDom, vtt, Direction.Bottom, subtitleOverlaySize);
            break;
        case VttVerticalWriting.GrowingRight:
            setCueBoxPositionForVerticalWriting(cueContainerDom, Direction.Right, vtt, subtitleOverlaySize);
            break;
        case VttVerticalWriting.GrowingLeft:
            setCueBoxPositionForVerticalWriting(cueContainerDom, Direction.Left, vtt, subtitleOverlaySize);
            break;
    }
};
var setCueBoxPositionForVerticalWriting = function (cueContainerDom, direction, vtt, subtitleOverlaySize) {
    var writingMode = direction === Direction.Right ?
        'vertical-lr' : 'vertical-rl';
    cueContainerDom.css('writing-mode', writingMode);
    cueContainerDom.css(Direction.Top, '0');
    setVttLine(cueContainerDom, vtt, direction, subtitleOverlaySize);
};
/**
 * Defines the Cue position alignment
 * https://w3.org/TR/webvtt1/#webvtt-cue-position-alignment
 */
var setVttPositionAlign = function (cueContainerDom, vtt, direction) {
    // https://www.w3.org/TR/webvtt1/#webvtt-cue-position
    if (vtt.position === 'auto') {
        cueContainerDom.css(direction, '0');
    }
    else {
        switch (vtt.positionAlign) {
            case 'line-left':
                cueContainerDom.css(direction, "".concat(vtt.position, "%"));
                cueContainerDom.css(DirectionPair.get(direction), 'auto');
                cueContainerDom.css('justify-content', 'flex-start');
                break;
            case 'center':
                cueContainerDom.css(direction, "".concat(vtt.position - vtt.size / 2, "%"));
                cueContainerDom.css(DirectionPair.get(direction), 'auto');
                cueContainerDom.css('justify-content', 'center');
                break;
            case 'line-right':
                cueContainerDom.css(direction, 'auto');
                cueContainerDom.css(DirectionPair.get(direction), "".concat(100 - vtt.position, "%"));
                cueContainerDom.css('justify-content', 'flex-end');
                break;
            default:
                cueContainerDom.css(direction, "".concat(vtt.position, "%"));
                cueContainerDom.css('justify-content', 'flex-start');
        }
    }
};
var countLines = function (innerHtml) {
    return innerHtml.split('<br />').length;
};
var setCssForCenterLineAlign = function (cueContainerDom, direction, relativeCueBoxPosition) {
    switch (direction) {
        case Direction.Bottom:
            cueContainerDom.css('transform', 'translateY(-50%)');
            break;
        case Direction.Left:
            cueContainerDom.css('transform', 'translateX(50%)');
            break;
        case Direction.Right:
            cueContainerDom.css('transform', 'translateX(-50%)');
            break;
    }
};
var setCssForEndLineAlign = function (cueContainerDom, direction, offset) {
    var opositeToOverlayReferenceEdge = direction;
    cueContainerDom.css(opositeToOverlayReferenceEdge, "".concat(100 - offset, "%"));
};
/**
 * @category Utils
 */
var VttUtils;
(function (VttUtils) {
    VttUtils.setVttCueBoxStyles = function (cueContainer, subtitleOverlaySize) {
        var vtt = cueContainer.vtt;
        var cueContainerDom = cueContainer.getDomElement();
        setDefaultVttStyles(cueContainerDom, vtt);
        lineCount = countLines(cueContainer.getText());
        setVttWritingDirectionAndCueBoxPositioning(cueContainerDom, vtt, subtitleOverlaySize);
        // https://w3.org/TR/webvtt1/#webvtt-cue-text-alignment
        var textAlign = vtt.align === 'middle' ? 'center' : vtt.align;
        cueContainerDom.css('text-align', textAlign);
        // https://w3.org/TR/webvtt1/#webvtt-cue-size
        var containerSize = vtt.size;
        if (vtt.vertical === '') {
            cueContainerDom.css('width', "".concat(containerSize, "%"));
            setVttPositionAlign(cueContainerDom, vtt, Direction.Left);
        }
        else {
            cueContainerDom.css('height', "".concat(containerSize, "%"));
            setVttPositionAlign(cueContainerDom, vtt, Direction.Top);
        }
    };
    /** https://www.w3.org/TR/webvtt1/#regions
     *  https://www.speechpad.com/captions/webvtt#toc_16
     */
    VttUtils.setVttRegionStyles = function (regionContainer, region, overlaySize) {
        var regionContainerDom = regionContainer.getDomElement();
        var regionPositionX = overlaySize.width * region.viewportAnchorX / 100 - ((overlaySize.width * region.width / 100) * region.regionAnchorX / 100);
        var regionPositionY = overlaySize.height * region.viewportAnchorY / 100 - ((region.lines * lineHeight) * region.regionAnchorY / 100);
        regionContainerDom.css('position', 'absolute');
        regionContainerDom.css('overflow', 'hidden');
        regionContainerDom.css('width', "".concat(region.width, "%"));
        regionContainerDom.css(Direction.Left, "".concat(regionPositionX, "px"));
        regionContainerDom.css(Direction.Right, 'unset');
        regionContainerDom.css(Direction.Top, "".concat(regionPositionY, "px"));
        regionContainerDom.css(Direction.Bottom, 'unset');
        regionContainerDom.css('height', "".concat(region.lines * lineHeight, "px"));
    };
})(VttUtils = exports.VttUtils || (exports.VttUtils = {}));

},{}]},{},[94])(94)
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvdHMvYXJyYXl1dGlscy50cyIsInNyYy90cy9hdWRpb3RyYWNrdXRpbHMudHMiLCJzcmMvdHMvYnJvd3NlcnV0aWxzLnRzIiwic3JjL3RzL2NvbXBvbmVudHMvYWRjbGlja292ZXJsYXkudHMiLCJzcmMvdHMvY29tcG9uZW50cy9hZG1lc3NhZ2VsYWJlbC50cyIsInNyYy90cy9jb21wb25lbnRzL2Fkc2tpcGJ1dHRvbi50cyIsInNyYy90cy9jb21wb25lbnRzL2FpcnBsYXl0b2dnbGVidXR0b24udHMiLCJzcmMvdHMvY29tcG9uZW50cy9hdWRpb3F1YWxpdHlzZWxlY3Rib3gudHMiLCJzcmMvdHMvY29tcG9uZW50cy9hdWRpb3RyYWNrbGlzdGJveC50cyIsInNyYy90cy9jb21wb25lbnRzL2F1ZGlvdHJhY2tzZWxlY3Rib3gudHMiLCJzcmMvdHMvY29tcG9uZW50cy9idWZmZXJpbmdvdmVybGF5LnRzIiwic3JjL3RzL2NvbXBvbmVudHMvYnV0dG9uLnRzIiwic3JjL3RzL2NvbXBvbmVudHMvY2FzdHN0YXR1c292ZXJsYXkudHMiLCJzcmMvdHMvY29tcG9uZW50cy9jYXN0dG9nZ2xlYnV0dG9uLnRzIiwic3JjL3RzL2NvbXBvbmVudHMvY2FzdHVpY29udGFpbmVyLnRzIiwic3JjL3RzL2NvbXBvbmVudHMvY2xpY2tvdmVybGF5LnRzIiwic3JjL3RzL2NvbXBvbmVudHMvY2xvc2VidXR0b24udHMiLCJzcmMvdHMvY29tcG9uZW50cy9jb21wb25lbnQudHMiLCJzcmMvdHMvY29tcG9uZW50cy9jb250YWluZXIudHMiLCJzcmMvdHMvY29tcG9uZW50cy9jb250cm9sYmFyLnRzIiwic3JjL3RzL2NvbXBvbmVudHMvZWNvbW9kZWNvbnRhaW5lci50cyIsInNyYy90cy9jb21wb25lbnRzL2Vjb21vZGV0b2dnbGVidXR0b24udHMiLCJzcmMvdHMvY29tcG9uZW50cy9lcnJvcm1lc3NhZ2VvdmVybGF5LnRzIiwic3JjL3RzL2NvbXBvbmVudHMvZnVsbHNjcmVlbnRvZ2dsZWJ1dHRvbi50cyIsInNyYy90cy9jb21wb25lbnRzL2h1Z2VwbGF5YmFja3RvZ2dsZWJ1dHRvbi50cyIsInNyYy90cy9jb21wb25lbnRzL2h1Z2VyZXBsYXlidXR0b24udHMiLCJzcmMvdHMvY29tcG9uZW50cy9pdGVtc2VsZWN0aW9ubGlzdC50cyIsInNyYy90cy9jb21wb25lbnRzL2xhYmVsLnRzIiwic3JjL3RzL2NvbXBvbmVudHMvbGlzdGJveC50cyIsInNyYy90cy9jb21wb25lbnRzL2xpc3RzZWxlY3Rvci50cyIsInNyYy90cy9jb21wb25lbnRzL21ldGFkYXRhbGFiZWwudHMiLCJzcmMvdHMvY29tcG9uZW50cy9waWN0dXJlaW5waWN0dXJldG9nZ2xlYnV0dG9uLnRzIiwic3JjL3RzL2NvbXBvbmVudHMvcGxheWJhY2tzcGVlZHNlbGVjdGJveC50cyIsInNyYy90cy9jb21wb25lbnRzL3BsYXliYWNrdGltZWxhYmVsLnRzIiwic3JjL3RzL2NvbXBvbmVudHMvcGxheWJhY2t0b2dnbGVidXR0b24udHMiLCJzcmMvdHMvY29tcG9uZW50cy9wbGF5YmFja3RvZ2dsZW92ZXJsYXkudHMiLCJzcmMvdHMvY29tcG9uZW50cy9xdWlja3NlZWtidXR0b24udHMiLCJzcmMvdHMvY29tcG9uZW50cy9yZWNvbW1lbmRhdGlvbm92ZXJsYXkudHMiLCJzcmMvdHMvY29tcG9uZW50cy9yZXBsYXlidXR0b24udHMiLCJzcmMvdHMvY29tcG9uZW50cy9zZWVrYmFyLnRzIiwic3JjL3RzL2NvbXBvbmVudHMvc2Vla2JhcmJ1ZmZlcmxldmVsLnRzIiwic3JjL3RzL2NvbXBvbmVudHMvc2Vla2JhcmNvbnRyb2xsZXIudHMiLCJzcmMvdHMvY29tcG9uZW50cy9zZWVrYmFybGFiZWwudHMiLCJzcmMvdHMvY29tcG9uZW50cy9zZWxlY3Rib3gudHMiLCJzcmMvdHMvY29tcG9uZW50cy9zZXR0aW5nc3BhbmVsLnRzIiwic3JjL3RzL2NvbXBvbmVudHMvc2V0dGluZ3NwYW5lbGl0ZW0udHMiLCJzcmMvdHMvY29tcG9uZW50cy9zZXR0aW5nc3BhbmVscGFnZS50cyIsInNyYy90cy9jb21wb25lbnRzL3NldHRpbmdzcGFuZWxwYWdlYmFja2J1dHRvbi50cyIsInNyYy90cy9jb21wb25lbnRzL3NldHRpbmdzcGFuZWxwYWdlbmF2aWdhdG9yYnV0dG9uLnRzIiwic3JjL3RzL2NvbXBvbmVudHMvc2V0dGluZ3NwYW5lbHBhZ2VvcGVuYnV0dG9uLnRzIiwic3JjL3RzL2NvbXBvbmVudHMvc2V0dGluZ3N0b2dnbGVidXR0b24udHMiLCJzcmMvdHMvY29tcG9uZW50cy9zcGFjZXIudHMiLCJzcmMvdHMvY29tcG9uZW50cy9zdWJ0aXRsZWxpc3Rib3gudHMiLCJzcmMvdHMvY29tcG9uZW50cy9zdWJ0aXRsZW92ZXJsYXkudHMiLCJzcmMvdHMvY29tcG9uZW50cy9zdWJ0aXRsZXNlbGVjdGJveC50cyIsInNyYy90cy9jb21wb25lbnRzL3N1YnRpdGxlc2V0dGluZ3MvYmFja2dyb3VuZGNvbG9yc2VsZWN0Ym94LnRzIiwic3JjL3RzL2NvbXBvbmVudHMvc3VidGl0bGVzZXR0aW5ncy9iYWNrZ3JvdW5kb3BhY2l0eXNlbGVjdGJveC50cyIsInNyYy90cy9jb21wb25lbnRzL3N1YnRpdGxlc2V0dGluZ3MvY2hhcmFjdGVyZWRnZXNlbGVjdGJveC50cyIsInNyYy90cy9jb21wb25lbnRzL3N1YnRpdGxlc2V0dGluZ3MvZm9udGNvbG9yc2VsZWN0Ym94LnRzIiwic3JjL3RzL2NvbXBvbmVudHMvc3VidGl0bGVzZXR0aW5ncy9mb250ZmFtaWx5c2VsZWN0Ym94LnRzIiwic3JjL3RzL2NvbXBvbmVudHMvc3VidGl0bGVzZXR0aW5ncy9mb250b3BhY2l0eXNlbGVjdGJveC50cyIsInNyYy90cy9jb21wb25lbnRzL3N1YnRpdGxlc2V0dGluZ3MvZm9udHNpemVzZWxlY3Rib3gudHMiLCJzcmMvdHMvY29tcG9uZW50cy9zdWJ0aXRsZXNldHRpbmdzL3N1YnRpdGxlc2V0dGluZ3NlbGVjdGJveC50cyIsInNyYy90cy9jb21wb25lbnRzL3N1YnRpdGxlc2V0dGluZ3Mvc3VidGl0bGVzZXR0aW5nc2xhYmVsLnRzIiwic3JjL3RzL2NvbXBvbmVudHMvc3VidGl0bGVzZXR0aW5ncy9zdWJ0aXRsZXNldHRpbmdzbWFuYWdlci50cyIsInNyYy90cy9jb21wb25lbnRzL3N1YnRpdGxlc2V0dGluZ3Mvc3VidGl0bGVzZXR0aW5nc3BhbmVscGFnZS50cyIsInNyYy90cy9jb21wb25lbnRzL3N1YnRpdGxlc2V0dGluZ3Mvc3VidGl0bGVzZXR0aW5nc3Jlc2V0YnV0dG9uLnRzIiwic3JjL3RzL2NvbXBvbmVudHMvc3VidGl0bGVzZXR0aW5ncy93aW5kb3djb2xvcnNlbGVjdGJveC50cyIsInNyYy90cy9jb21wb25lbnRzL3N1YnRpdGxlc2V0dGluZ3Mvd2luZG93b3BhY2l0eXNlbGVjdGJveC50cyIsInNyYy90cy9jb21wb25lbnRzL3RpbWVsaW5lbWFya2Vyc2hhbmRsZXIudHMiLCJzcmMvdHMvY29tcG9uZW50cy90aXRsZWJhci50cyIsInNyYy90cy9jb21wb25lbnRzL3RvZ2dsZWJ1dHRvbi50cyIsInNyYy90cy9jb21wb25lbnRzL3R2bm9pc2VjYW52YXMudHMiLCJzcmMvdHMvY29tcG9uZW50cy91aWNvbnRhaW5lci50cyIsInNyYy90cy9jb21wb25lbnRzL3ZpZGVvcXVhbGl0eXNlbGVjdGJveC50cyIsInNyYy90cy9jb21wb25lbnRzL3ZvbHVtZWNvbnRyb2xidXR0b24udHMiLCJzcmMvdHMvY29tcG9uZW50cy92b2x1bWVzbGlkZXIudHMiLCJzcmMvdHMvY29tcG9uZW50cy92b2x1bWV0b2dnbGVidXR0b24udHMiLCJzcmMvdHMvY29tcG9uZW50cy92cnRvZ2dsZWJ1dHRvbi50cyIsInNyYy90cy9jb21wb25lbnRzL3dhdGVybWFyay50cyIsInNyYy90cy9kZW1vZmFjdG9yeS50cyIsInNyYy90cy9kb20udHMiLCJzcmMvdHMvZXJyb3J1dGlscy50cyIsInNyYy90cy9ldmVudGRpc3BhdGNoZXIudHMiLCJzcmMvdHMvZm9jdXN2aXNpYmlsaXR5dHJhY2tlci50cyIsInNyYy90cy9ncm91cHBsYXliYWNrYXBpLnRzIiwic3JjL3RzL2d1aWQudHMiLCJzcmMvdHMvaW1hZ2Vsb2FkZXIudHMiLCJzcmMvdHMvbG9jYWxpemF0aW9uL2kxOG4udHMiLCJzcmMvdHMvbG9jYWxpemF0aW9uL2xhbmd1YWdlcy9kZS5qc29uIiwic3JjL3RzL2xvY2FsaXphdGlvbi9sYW5ndWFnZXMvZW4uanNvbiIsInNyYy90cy9sb2NhbGl6YXRpb24vbGFuZ3VhZ2VzL2VzLmpzb24iLCJzcmMvdHMvbG9jYWxpemF0aW9uL2xhbmd1YWdlcy9ubC5qc29uIiwic3JjL3RzL21haW4udHMiLCJzcmMvdHMvbW9iaWxldjNwbGF5ZXJhcGkudHMiLCJzcmMvdHMvcGxheWVydXRpbHMudHMiLCJzcmMvdHMvc3BhdGlhbG5hdmlnYXRpb24vTGlzdE5hdmlnYXRpb25Hcm91cC50cyIsInNyYy90cy9zcGF0aWFsbmF2aWdhdGlvbi9nZXRodG1sZWxlbWVudHNmcm9tY29tcG9uZW50cy50cyIsInNyYy90cy9zcGF0aWFsbmF2aWdhdGlvbi9rZXltYXAudHMiLCJzcmMvdHMvc3BhdGlhbG5hdmlnYXRpb24vbmF2aWdhdGlvbmFsZ29yaXRobS50cyIsInNyYy90cy9zcGF0aWFsbmF2aWdhdGlvbi9uYXZpZ2F0aW9uZ3JvdXAudHMiLCJzcmMvdHMvc3BhdGlhbG5hdmlnYXRpb24vbm9kZWV2ZW50c3Vic2NyaWJlci50cyIsInNyYy90cy9zcGF0aWFsbmF2aWdhdGlvbi9yb290bmF2aWdhdGlvbmdyb3VwLnRzIiwic3JjL3RzL3NwYXRpYWxuYXZpZ2F0aW9uL3NlZWtiYXJoYW5kbGVyLnRzIiwic3JjL3RzL3NwYXRpYWxuYXZpZ2F0aW9uL3NwYXRpYWxuYXZpZ2F0aW9uLnRzIiwic3JjL3RzL3NwYXRpYWxuYXZpZ2F0aW9uL3R5cGVndWFyZHMudHMiLCJzcmMvdHMvc3BhdGlhbG5hdmlnYXRpb24vdHlwZXMudHMiLCJzcmMvdHMvc3RvcmFnZXV0aWxzLnRzIiwic3JjL3RzL3N0cmluZ3V0aWxzLnRzIiwic3JjL3RzL3N1YnRpdGxldXRpbHMudHMiLCJzcmMvdHMvdGltZW91dC50cyIsInNyYy90cy91aWZhY3RvcnkudHMiLCJzcmMvdHMvdWltYW5hZ2VyLnRzIiwic3JjL3RzL3VpdXRpbHMudHMiLCJzcmMvdHMvdm9sdW1lY29udHJvbGxlci50cyIsInNyYy90cy92dHR1dGlscy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7OztBQ0FBOztHQUVHO0FBQ0gsSUFBaUIsVUFBVSxDQWdCMUI7QUFoQkQsV0FBaUIsVUFBVTtJQUN6Qjs7Ozs7T0FLRztJQUNILFNBQWdCLE1BQU0sQ0FBSSxLQUFVLEVBQUUsSUFBTztRQUMzQyxJQUFJLEtBQUssR0FBRyxLQUFLLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDO1FBRWhDLElBQUksS0FBSyxHQUFHLENBQUMsQ0FBQyxFQUFFO1lBQ2QsT0FBTyxLQUFLLENBQUMsTUFBTSxDQUFDLEtBQUssRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztTQUNsQzthQUFNO1lBQ0wsT0FBTyxJQUFJLENBQUM7U0FDYjtJQUNILENBQUM7SUFSZSxpQkFBTSxTQVFyQixDQUFBO0FBQ0gsQ0FBQyxFQWhCZ0IsVUFBVSxHQUFWLGtCQUFVLEtBQVYsa0JBQVUsUUFnQjFCOzs7Ozs7QUNoQkQsNENBQTJDO0FBRTNDOzs7Ozs7R0FNRztBQUNIO0lBTUUsaUNBQVksTUFBaUIsRUFBRSxPQUF5QyxFQUFFLFNBQTRCO1FBQXRHLGlCQVFDO1FBcUJPLGtCQUFhLEdBQUcsVUFBQyxLQUFzQjtZQUM3QyxJQUFNLFVBQVUsR0FBRyxLQUFLLENBQUMsS0FBSyxDQUFDO1lBQy9CLElBQUksQ0FBQyxLQUFJLENBQUMsV0FBVyxDQUFDLE9BQU8sQ0FBQyxVQUFVLENBQUMsRUFBRSxDQUFDLEVBQUU7Z0JBQzVDLEtBQUksQ0FBQyxXQUFXLENBQUMsT0FBTyxDQUFDLFVBQVUsQ0FBQyxFQUFF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QUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDM0RBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDNUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzNFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUMzRWEsUUFBQSxPQUFPLEdBQVcsYUFBYSxDQUFDO0FBQzdDLGFBQWE7QUFDYiw4Q0FBNEI7QUFDNUIsNkNBQTJCO0FBQzNCLFlBQVk7QUFDWix5Q0FBd0M7QUFBL0Isc0dBQUEsU0FBUyxPQUFBO0FBQ2xCLDZDQUE0QztBQUFuQywwR0FBQSxXQUFXLE9BQUE7QUFDcEIsUUFBUTtBQUNSLDJDQUEwQztBQUFqQyx3R0FBQSxVQUFVLE9BQUE7QUFDbkIsNkNBQTRDO0FBQW5DLDBHQUFBLFdBQVcsT0FBQTtBQUNwQiw2Q0FBNEM7QUFBbkMsMEdBQUEsV0FBVyxPQUFBO0FBQ3BCLHFDQUFvQztBQUEzQixrR0FBQSxPQUFPLE9BQUE7QUFDaEIsK0NBQThDO0FBQXJDLDRHQUFBLFlBQVksT0FBQTtBQUNyQiwrQ0FBOEM7QUFBckMsNEdBQUEsWUFBWSxPQUFBO0FBQ3JCLDJDQUEwQztBQUFqQyx3R0FBQSxVQUFVLE9BQUE7QUFDbkIsZUFBZTtBQUNmLDRDQUF5SDtBQUFoSCw0RkFBQSxJQUFJLE9BQUE7QUFBRSw0RkFBQSxJQUFJLE9BQUE7QUFDbkIscUJBQXFCO0FBQ3JCLDJFQUEwRTtBQUFqRSxzSEFBQSxpQkFBaUIsT0FBQTtBQUMxQix1RUFBc0U7QUFBN0Qsa0hBQUEsZUFBZSxPQUFBO0FBQ3hCLCtFQUE4RTtBQUFyRSwwSEFBQSxtQkFBbUIsT0FBQTtBQUM1QiwrRUFBK0Y7QUFBdEYsMEhBQUEsbUJBQW1CLE9BQUE7QUFBRSxzSEFBQSxlQUFlLE9BQUE7QUFDN0MsYUFBYTtBQUNiLDhDQUEyRDtBQUFsRCxnR0FBQSxNQUFNLE9BQUE7QUFDZixzREFBdUU7QUFBOUQsd0dBQUEsVUFBVSxPQUFBO0FBQ25CLDhFQUE2RTtBQUFwRSxnSUFBQSxzQkFBc0IsT0FBQTtBQUMvQixrRkFBaUY7QUFBeEUsb0lBQUEsd0JBQXdCLE9BQUE7QUFDakMsb0VBQW1IO0FBQTFHLHNIQUFBLGlCQUFpQixPQUFBO0FBQTJCLDBIQUFBLHFCQUFxQixPQUFBO0FBQzFFLDBFQUFxRztBQUE1Riw0SEFBQSxvQkFBb0IsT0FBQTtBQUM3QixnREFBbUc7QUFBMUYsa0dBQUEsT0FBTyxPQUFBO0FBQ2hCLG9EQUFtRDtBQUExQyxzR0FBQSxTQUFTLE9BQUE7QUFDbEIsb0VBQW1FO0FBQTFELHNIQUFBLGlCQUFpQixPQUFBO0FBQzFCLDREQUFnRjtBQUF2RSw4R0FBQSxhQUFhLE9BQUE7QUFDdEIsMEVBQXFHO0FBQTVGLDRIQUFBLG9CQUFvQixPQUFBO0FBQzdCLDBEQUE2RTtBQUFwRSw0R0FBQSxZQUFZLE9BQUE7QUFDckIsNEVBQTJFO0FBQWxFLDhIQUFBLHFCQUFxQixPQUFBO0FBQzlCLHNFQUFxRTtBQUE1RCx3SEFBQSxrQkFBa0IsT0FBQTtBQUMzQiw4REFBNkQ7QUFBcEQsZ0hBQUEsY0FBYyxPQUFBO0FBQ3ZCLG9EQUFvRTtBQUEzRCxzR0FBQSxTQUFTLE9BQUE7QUFDbEIsd0RBQTBFO0FBQWpFLDBHQUFBLFdBQVcsT0FBQTtBQUNwQixvREFBb0U7QUFBM0Qsc0dBQUEsU0FBUyxPQUFBO0FBQ2xCLDRDQUF3RDtBQUEvQyw4RkFBQSxLQUFLLE9BQUE7QUFDZCw0RUFBMkU7QUFBbEUsOEhBQUEscUJBQXFCLE9BQUE7QUFDOUIsd0VBQXVFO0FBQTlELDBIQUFBLG1CQUFtQixPQUFBO0FBQzVCLG9FQUFtRTtBQUExRCxzSEFBQSxpQkFBaUIsT0FBQTtBQUMxQixrRUFBaUU7QUFBeEQsb0hBQUEsZ0JBQWdCLE9BQUE7QUFDekIsb0RBQW9HO0FBQTNGLHNHQUFBLFNBQVMsT0FBQTtBQUNsQix3RUFBMkk7QUFBbEksMEhBQUEsbUJBQW1CLE9BQUE7QUFDNUIsNEVBQTJFO0FBQWxFLDhIQUFBLHFCQUFxQixPQUFBO0FBQzlCLDBEQUE2RTtBQUFwRSw0R0FBQSxZQUFZLE9BQUE7QUFDckIsZ0VBQStEO0FBQXRELGtIQUFBLGVBQWUsT0FBQTtBQUN4QixvRUFBbUU7QUFBMUQsc0hBQUEsaUJBQWlCLE9BQUE7QUFDMUIsa0RBQWlFO0FBQXhELG9HQUFBLFFBQVEsT0FBQTtBQUNqQix3RUFBa0c7QUFBekYsMEhBQUEsbUJBQW1CLE9BQUE7QUFDNUIsMERBQTZFO0FBQXBFLDRHQUFBLFlBQVksT0FBQTtBQUNyQiwwREFBNkU7QUFBcEUsNEdBQUEsWUFBWSxPQUFBO0FBQ3JCLDhEQUE2RDtBQUFwRCxnSEFBQSxjQUFjLE9BQUE7QUFDdkIsOERBQTZEO0FBQXBELGdIQUFBLGNBQWMsT0FBQTtBQUN2Qiw4RUFBNkU7QUFBcEUsZ0lBQUEsc0JBQXNCLE9BQUE7QUFDL0Isa0VBQWlFO0FBQXhELG9IQUFBLGdCQUFnQixPQUFBO0FBQ3pCLGtFQUF5RjtBQUFoRixvSEFBQSxnQkFBZ0IsT0FBQTtBQUN6QixnRUFBK0Q7QUFBdEQsa0hBQUEsZUFBZSxPQUFBO0FBQ3hCLDRFQUF3RztBQUEvRiw4SEFBQSxxQkFBcUIsT0FBQTtBQUM5Qix3REFBMEU7QUFBakUsMEdBQUEsV0FBVyxPQUFBO0FBQ3BCLDREQUFzRztBQUE3Riw4R0FBQSxhQUFhLE9BQUE7QUFBRSxxSEFBQSxvQkFBb0IsT0FBQTtBQUM1Qyx3RUFBdUU7QUFBOUQsMEhBQUEsbUJBQW1CLE9BQUE7QUFDNUIsMERBQTZFO0FBQXBFLDRHQUFBLFlBQVksT0FBQTtBQUNyQiwwRkFBeUY7QUFBaEYsNElBQUEsNEJBQTRCLE9BQUE7QUFDckMsOENBQTZDO0FBQXBDLGdHQUFBLE1BQU0sT0FBQTtBQUNmLG1HQUFrRztBQUF6RixvSUFBQSx3QkFBd0IsT0FBQTtBQUNqQyx1R0FBc0c7QUFBN0Ysd0lBQUEsMEJBQTBCLE9BQUE7QUFDbkMsK0ZBQThGO0FBQXJGLGdJQUFBLHNCQUFzQixPQUFBO0FBQy9CLHVGQUFzRjtBQUE3RSx3SEFBQSxrQkFBa0IsT0FBQTtBQUMzQix5RkFBd0Y7QUFBL0UsMEhBQUEsbUJBQW1CLE9BQUE7QUFDNUIsMkZBQTBGO0FBQWpGLDRIQUFBLG9CQUFvQixPQUFBO0FBQzdCLHFGQUFvRjtBQUEzRSxzSEFBQSxpQkFBaUIsT0FBQTtBQUMxQixtR0FBa0c7QUFBekYsb0lBQUEsd0JBQXdCLE9BQUE7QUFDakMsNkZBQTRGO0FBQW5GLDhIQUFBLHFCQUFxQixPQUFBO0FBQzlCLDJGQUEwRjtBQUFqRiw0SEFBQSxvQkFBb0IsT0FBQTtBQUM3QiwrRkFBOEY7QUFBckYsZ0lBQUEsc0JBQXNCLE9BQUE7QUFDL0IseUdBQXdHO0FBQS9GLDBJQUFBLDJCQUEyQixPQUFBO0FBQ3BDLGdEQUErQztBQUF0QyxrR0FBQSxPQUFPLE9BQUE7QUFDaEIsZ0VBQStEO0FBQXRELGtIQUFBLGVBQWUsT0FBQTtBQUN4QixvRUFBbUU7QUFBMUQsc0hBQUEsaUJBQWlCLE9BQUE7QUFDMUIsb0VBQW1FO0FBQTFELHNIQUFBLGlCQUFpQixPQUFBO0FBQzFCLHdGQUF1RjtBQUE5RSwwSUFBQSwyQkFBMkIsT0FBQTtBQUNwQyx3RkFBdUY7QUFBOUUsMElBQUEsMkJBQTJCLE9BQUE7QUFDcEMscUdBQXFJO0FBQTVILHNJQUFBLHlCQUF5QixPQUFBO0FBQ2xDLG9FQUFtRTtBQUExRCxzSEFBQSxpQkFBaUIsT0FBQTtBQUMxQiwwREFBeUQ7QUFBaEQsNEdBQUEsWUFBWSxPQUFBO0FBQ3JCLGdFQUFzRjtBQUE3RSxrSEFBQSxlQUFlLE9BQUE7QUFDeEIsMERBQWdJO0FBQXZILDRHQUFBLFlBQVksT0FBQTtBQUVyQixxQ0FBcUM7QUFDckMsOEZBQThGO0FBQzlGLElBQUksT0FBTyxNQUFNLENBQUMsTUFBTSxLQUFLLFVBQVUsRUFBRTtJQUN2QyxNQUFNLENBQUMsTUFBTSxHQUFHLFVBQVMsTUFBVztRQUNsQyxZQUFZLENBQUM7UUFDYixJQUFJLE1BQU0sSUFBSSxJQUFJLEVBQUU7WUFDbEIsTUFBTSxJQUFJLFNBQVMsQ0FBQyw0Q0FBNEMsQ0FBQyxDQUFDO1NBQ25FO1FBRUQsTUFBTSxHQUFHLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUN4QixLQUFLLElBQUksS0FBSyxHQUFHLENBQUMsRUFBRSxLQUFLLEdBQUcsU0FBUyxDQUFDLE1BQU0sRUFBRSxLQUFLLEVBQUUsRUFBRTtZQUNyRCxJQUFJLE1BQU0sR0FBRyxTQUFTLENBQUMsS0FBSyxDQUFDLENBQUM7WUFDOUIsSUFBSSxNQUFNLElBQUksSUFBSSxFQUFFO2dCQUNsQixLQUFLLElBQUksR0FBRyxJQUFJLE1BQU0sRUFBRTtvQkFDdEIsSUFBSSxNQUFNLENBQUMsU0FBUyxDQUFDLGNBQWMsQ0FBQyxJQUFJLENBQUMsTUFBTSxFQUFFLEdBQUcsQ0FBQyxFQUFFO3dCQUNyRCxNQUFNLENBQUMsR0FBRyxDQUFDLEdBQUcsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDO3FCQUMzQjtpQkFDRjthQUNGO1NBQ0Y7UUFDRCxPQUFPLE1BQU0sQ0FBQztJQUNoQixDQUFDLENBQUM7Q0FDSDs7Ozs7O0FDaEhELElBQVksbUJBSVg7QUFKRCxXQUFZLG1CQUFtQjtJQUM3QixrREFBMkIsQ0FBQTtJQUMzQixrREFBMkIsQ0FBQTtJQUMzQixnRUFBeUMsQ0FBQTtBQUMzQyxDQUFDLEVBSlcsbUJBQW1CLEdBQW5CLDJCQUFtQixLQUFuQiwyQkFBbUIsUUFJOUI7QUFtQkQsU0FBZ0IsbUJBQW1CLENBQUMsTUFBcUQ7SUFDdkYsS0FBSyxJQUFNLEdBQUcsSUFBSSxtQkFBbUIsRUFBRTtRQUNyQyxJQUFJLG1CQUFtQixDQUFDLGNBQWMsQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsV0FBVyxDQUFDLGNBQWMsQ0FBQyxHQUFHLENBQUMsRUFBRTtZQUM5RixPQUFPLEtBQUssQ0FBQztTQUNkO0tBQ0Y7SUFFRCxPQUFPLElBQUksQ0FBQztBQUNkLENBQUM7QUFSRCxrREFRQzs7Ozs7O0FDbENELHFEQUFpRTtBQUNqRSwrQ0FBNEM7QUFJNUM7O0dBRUc7QUFDSCxJQUFpQixXQUFXLENBc00zQjtBQXRNRCxXQUFpQixXQUFXO0lBRTFCLElBQVksV0FNWDtJQU5ELFdBQVksV0FBVztRQUNyQiw2Q0FBSSxDQUFBO1FBQ0oscURBQVEsQ0FBQTtRQUNSLG1EQUFPLENBQUE7UUFDUCxpREFBTSxDQUFBO1FBQ04scURBQVEsQ0FBQTtJQUNWLENBQUMsRUFOVyxXQUFXLEdBQVgsdUJBQVcsS0FBWCx1QkFBVyxRQU10QjtJQUVELFNBQWdCLG9CQUFvQixDQUFDLE1BQWlCO1FBQ3BELE9BQU8sTUFBTSxDQUFDLE1BQU0sRUFBRSxJQUFJLE1BQU0sQ0FBQyxlQUFlLEVBQUUsS0FBSyxDQUFDLENBQUM7SUFDM0QsQ0FBQztJQUZlLGdDQUFvQix1QkFFbkMsQ0FBQTtJQUVELFNBQWdCLFFBQVEsQ0FBQyxNQUFpQjtRQUN4QyxJQUFJLE1BQU0sQ0FBQyxRQUFRLEVBQUUsRUFBRTtZQUNyQixPQUFPLFdBQVcsQ0FBQyxRQUFRLENBQUM7U0FDN0I7YUFBTSxJQUFJLE1BQU0sQ0FBQyxTQUFTLEVBQUUsRUFBRTtZQUM3QixPQUFPLFdBQVcsQ0FBQyxPQUFPLENBQUM7U0FDNUI7YUFBTSxJQUFJLE1BQU0sQ0FBQyxRQUFRLEVBQUUsRUFBRTtZQUM1QixPQUFPLFdBQVcsQ0FBQyxNQUFNLENBQUM7U0FDM0I7YUFBTSxJQUFJLE1BQU0sQ0FBQyxTQUFTLEVBQUUsSUFBSSxJQUFJLEVBQUU7WUFDckMsT0FBTyxXQUFXLENBQUMsUUFBUSxDQUFDO1NBQzdCO2FBQU07WUFDTCxPQUFPLFdBQVcsQ0FBQyxJQUFJLENBQUM7U0FDekI7SUFDSCxDQUFDO0lBWmUsb0JBQVEsV0FZdkIsQ0FBQTtJQUVEOzs7O09BSUc7SUFDSCxTQUFnQixxQ0FBcUMsQ0FBQyxNQUFpQjtRQUNyRSxJQUFNLFdBQVcsR0FBRyxNQUFNLENBQUMsY0FBYyxFQUFFLENBQUM7UUFDNUMsSUFBSSxNQUFNLENBQUMsTUFBTSxFQUFFLEVBQUU7WUFDbkIsT0FBTyxXQUFXLENBQUM7U0FDcEI7UUFFRCxJQUFNLGtCQUFrQixHQUFHLFdBQVcsQ0FBQyxxQkFBcUIsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxDQUFDLENBQUM7UUFDeEUsT0FBTyxXQUFXLEdBQUcsa0JBQWtCLENBQUM7SUFDMUMsQ0FBQztJQVJlLGlEQUFxQyx3Q0FRcEQsQ0FBQTtJQUVEOzs7Ozs7OztPQVFHO0lBQ0gsU0FBZ0IscUJBQXFCLENBQUMsTUFBaUIsRUFBRSxZQUF3QjtRQUF4Qiw2QkFBQSxFQUFBLGdCQUF3QjtRQUMvRSxPQUFPLE1BQU0sQ0FBQyxnQkFBZ0IsRUFBRSxJQUFJLE1BQU0sQ0FBQyxnQkFBZ0IsRUFBRSxDQUFDLEtBQUssSUFBSSxZQUFZLENBQUM7SUFDdEYsQ0FBQztJQUZlLGlDQUFxQix3QkFFcEMsQ0FBQTtJQUVEOzs7OztPQUtHO0lBQ0gsU0FBZ0IsOEJBQThCLENBQUMsTUFBaUI7UUFDOUQsSUFBSSxDQUFDLE1BQU0sQ0FBQyxNQUFNLEVBQUUsRUFBRTtZQUNwQixPQUFPLE1BQU0sQ0FBQyxnQkFBZ0IsRUFBRSxDQUFDO1NBQ2xDO1FBRUQsSUFBTSxnQkFBZ0IsR0FBRyxDQUFDLE1BQU0sQ0FBQyxZQUFZLEVBQUUsQ0FBQztRQUNoRCxJQUFNLFlBQVksR0FBRyxDQUFDLE1BQU0sQ0FBQyxlQUFlLEVBQUUsQ0FBQztRQUMvQyxJQUFNLFdBQVcsR0FBRyxNQUFNLENBQUMsY0FBYyxFQUFFLENBQUM7UUFFNUMsSUFBTSxHQUFHLEdBQUcsV0FBVyxHQUFHLENBQUMsZ0JBQWdCLENBQUMsQ0FBQztRQUM3QyxJQUFNLEtBQUssR0FBRyxXQUFXLEdBQUcsQ0FBQyxZQUFZLEdBQUcsZ0JBQWdCLENBQUMsQ0FBQztRQUU5RCxPQUFPLEVBQUUsS0FBSyxPQUFBLEVBQUUsR0FBRyxLQUFBLEVBQUUsQ0FBQztJQUN4QixDQUFDO0lBYmUsMENBQThCLGlDQWE3QyxDQUFBO0lBTUQ7UUFNRSx1Q0FBWSxNQUFpQjtZQUE3QixpQkFZQztZQWRPLHNDQUFpQyxHQUFHLElBQUksaUNBQWUsRUFBK0MsQ0FBQztZQUc3RyxJQUFJLENBQUMsTUFBTSxHQUFHLE1BQU0sQ0FBQztZQUNyQixJQUFJLENBQUMsa0JBQWtCLEdBQUcsU0FBUyxDQUFDO1lBRXBDLElBQUksaUJBQWlCLEdBQUc7Z0JBQ3RCLEtBQUksQ0FBQyxNQUFNLEVBQUUsQ0FBQztZQUNoQixDQUFDLENBQUM7WUFDRiwyRkFBMkY7WUFDM0YsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLFdBQVcsQ0FBQyxZQUFZLEVBQUUsaUJBQWlCLENBQUMsQ0FBQztZQUN0RSw4R0FBOEc7WUFDOUcsOENBQThDO1lBQzlDLE1BQU0sQ0FBQyxFQUFFLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxXQUFXLENBQUMsV0FBVyxFQUFFLGlCQUFpQixDQUFDLENBQUM7UUFDdkUsQ0FBQztRQUVELDhDQUFNLEdBQU47WUFDRSxJQUFJLElBQUksQ0FBQyxNQUFNLENBQUMsTUFBTSxFQUFFLEVBQUU7Z0JBQ3hCLElBQUkscUJBQXFCLEdBQUcsV0FBVyxDQUFDLG9CQUFvQixDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQztnQkFFMUUsbURBQW1EO2dCQUNuRCxJQUFJLHFCQUFxQixLQUFLLElBQUksQ0FBQyxrQkFBa0IsRUFBRTtvQkFDckQsSUFBSSxDQUFDLGlDQUFpQyxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsTUFBTSxFQUFFLEVBQUUsa0JBQWtCLEVBQUUscUJBQXFCLEVBQUUsQ0FBQyxDQUFDO29CQUM1RyxJQUFJLENBQUMsa0JBQWtCLEdBQUcscUJBQXFCLENBQUM7aUJBQ2pEO2FBQ0Y7UUFDSCxDQUFDO1FBRUQsc0JBQUkseUVBQThCO2lCQUFsQztnQkFDRSxPQUFPLElBQUksQ0FBQyxpQ0FBaUMsQ0FBQyxRQUFRLEVBQUUsQ0FBQztZQUMzRCxDQUFDOzs7V0FBQTtRQUNILG9DQUFDO0lBQUQsQ0FuQ0EsQUFtQ0MsSUFBQTtJQW5DWSx5Q0FBNkIsZ0NBbUN6QyxDQUFBO0lBTUQ7Ozs7Ozs7Ozs7Ozs7Ozs7OztPQWtCRztJQUNIO1FBT0UsNEJBQVksTUFBaUIsRUFBRSxTQUE0QjtZQUEzRCxpQkEyQkM7WUE5Qk8scUJBQWdCLEdBQUcsSUFBSSxpQ0FBZSxFQUEwQyxDQUFDO1lBSXZGLElBQUksQ0FBQyxNQUFNLEdBQUcsTUFBTSxDQUFDO1lBQ3JCLElBQUksQ0FBQyxTQUFTLEdBQUcsU0FBUyxDQUFDO1lBQzNCLElBQUksQ0FBQyxJQUFJLEdBQUcsU0FBUyxDQUFDO1lBRXRCLElBQUksWUFBWSxHQUFHO2dCQUNqQixLQUFJLENBQUMsTUFBTSxFQUFFLENBQUM7WUFDaEIsQ0FBQyxDQUFDO1lBQ0YsSUFBSSxDQUFDLFNBQVMsQ0FBQyxTQUFTLEVBQUUsQ0FBQyxNQUFNLENBQUMsU0FBUyxDQUFDLFNBQVMsQ0FBQyxZQUFZLENBQUMsQ0FBQztZQUNwRSxtQ0FBbUM7WUFDbkMsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLFdBQVcsQ0FBQyxJQUFJLEVBQUUsWUFBWSxDQUFDLENBQUM7WUFFekQsNkNBQTZDO1lBQzdDLHFGQUFxRjtZQUNyRixrRkFBa0Y7WUFDbEYsSUFBSSwyQkFBWSxDQUFDLFNBQVMsSUFBSSwyQkFBWSxDQUFDLFFBQVEsRUFBRTtnQkFDbkQsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLFdBQVcsQ0FBQyxXQUFXLEVBQUUsWUFBWSxDQUFDLENBQUM7YUFDakU7WUFFRCwyREFBMkQ7WUFDM0QsSUFBSSxNQUFNLENBQUMsT0FBTyxDQUFDLFdBQVcsQ0FBQyxlQUFlLEVBQUU7Z0JBQzlDLE1BQU0sQ0FBQyxFQUFFLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxXQUFXLENBQUMsZUFBZSxFQUFFLFlBQVksQ0FBQyxDQUFDO2FBQ3JFO1lBRUQsMkVBQTJFO1lBQzNFLE1BQU0sQ0FBQyxFQUFFLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxXQUFXLENBQUMsY0FBYyxFQUFFLFlBQVksQ0FBQyxDQUFDO1lBQ25FLE1BQU0sQ0FBQyxFQUFFLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxXQUFXLENBQUMsZUFBZSxFQUFFLFlBQVksQ0FBQyxDQUFDO1FBQ3RFLENBQUM7UUFFRCxtQ0FBTSxHQUFOO1lBQ0UsSUFBSSxPQUFPLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxNQUFNLEVBQUUsQ0FBQztZQUVuQywyR0FBMkc7WUFDM0csdUdBQXVHO1lBQ3ZHLElBQUksT0FBTyxLQUFLLElBQUksQ0FBQyxJQUFJLEVBQUU7Z0JBQ3pCLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLE1BQU0sRUFBRSxFQUFFLElBQUksRUFBRSxPQUFPLEVBQUUsQ0FBQyxDQUFDO2dCQUMvRCxJQUFJLENBQUMsSUFBSSxHQUFHLE9BQU8sQ0FBQzthQUNyQjtRQUNILENBQUM7UUFFRCxzQkFBSSw2Q0FBYTtpQkFBakI7Z0JBQ0UsT0FBTyxJQUFJLENBQUMsZ0JBQWdCLENBQUMsUUFBUSxFQUFFLENBQUM7WUFDMUMsQ0FBQzs7O1dBQUE7UUFDSCx5QkFBQztJQUFELENBbERBLEFBa0RDLElBQUE7SUFsRFksOEJBQWtCLHFCQWtEOUIsQ0FBQTtJQUVELFNBQWdCLGlCQUFpQixDQUFDLEtBQWEsRUFBRSxTQUFpQixFQUFFLFNBQWlCO1FBQ25GLElBQU0sYUFBYSxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsU0FBUyxFQUFFLFNBQVMsQ0FBQyxDQUFDO1FBQ3JELElBQU0sYUFBYSxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsU0FBUyxFQUFFLFNBQVMsQ0FBQyxDQUFDO1FBQ3JELE9BQU8sSUFBSSxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLEtBQUssRUFBRSxhQUFhLENBQUMsRUFBRSxhQUFhLENBQUMsQ0FBQztJQUNqRSxDQUFDO0lBSmUsNkJBQWlCLG9CQUloQyxDQUFBO0FBQ0gsQ0FBQyxFQXRNZ0IsV0FBVyxHQUFYLG1CQUFXLEtBQVgsbUJBQVcsUUFzTTNCOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUM5TUQscURBQW9EO0FBQ3BELGlDQUE0QztBQUk1QyxJQUFZLGVBR1g7QUFIRCxXQUFZLGVBQWU7SUFDekIsNENBQXlCLENBQUE7SUFDekIsd0NBQXFCLENBQUE7QUFDdkIsQ0FBQyxFQUhXLGVBQWUsR0FBZix1QkFBZSxLQUFmLHVCQUFlLFFBRzFCO0FBRUQ7O0dBRUc7QUFDSDtJQUF5Qyx1Q0FBZTtJQUd0RCw2QkFBWSxXQUE0QixFQUFFLFNBQTZCO1FBQUUsb0JBQW1DO2FBQW5DLFVBQW1DLEVBQW5DLHFCQUFtQyxFQUFuQyxJQUFtQztZQUFuQyxtQ0FBbUM7O1FBQTVHLDhDQUNRLFNBQVMsR0FBSyxVQUFVLGtCQVcvQjtRQVRDLFFBQVEsV0FBVyxFQUFFO1lBQ25CLEtBQUssZUFBZSxDQUFDLFFBQVE7Z0JBQzNCLEtBQUksQ0FBQyx3QkFBd0IsR0FBRyxDQUFDLGlCQUFTLENBQUMsRUFBRSxFQUFFLGlCQUFTLENBQUMsSUFBSSxDQUFDLENBQUM7Z0JBQy9ELE1BQU07WUFFUixLQUFLLGVBQWUsQ0FBQyxVQUFVO2dCQUM3QixLQUFJLENBQUMsd0JBQXdCLEdBQUcsQ0FBQyxpQkFBUyxDQUFDLElBQUksRUFBRSxpQkFBUyxDQUFDLEtBQUssQ0FBQyxDQUFDO2dCQUNsRSxNQUFNO1NBQ1Q7O0lBQ0gsQ0FBQztJQUVNLDBDQUFZLEdBQW5CLFVBQW9CLE1BQWM7UUFDaEMsaUJBQU0sWUFBWSxZQUFDLE1BQU0sQ0FBQyxDQUFDO1FBRTNCLElBQUksTUFBTSxLQUFLLGNBQU0sQ0FBQyxNQUFNLEVBQUU7WUFDNUIsb0RBQW9EO1lBQ3BELElBQUksQ0FBQyxZQUFZLENBQUMsY0FBTSxDQUFDLElBQUksQ0FBQyxDQUFDO1NBQ2hDO0lBQ0gsQ0FBQztJQUVNLDhDQUFnQixHQUF2QixVQUF3QixTQUFvQjtRQUMxQyxpQkFBTSxnQkFBZ0IsWUFBQyxTQUFTLENBQUMsQ0FBQztRQUVsQyxJQUFJLENBQUMsSUFBSSxDQUFDLHdCQUF3QixDQUFDLFFBQVEsQ0FBQyxTQUFTLENBQUMsRUFBRTtZQUN0RCw0REFBNEQ7WUFDNUQsbUNBQW1DO1lBQ25DLElBQUksQ0FBQyxZQUFZLENBQUMsY0FBTSxDQUFDLElBQUksQ0FBQyxDQUFDO1NBQ2hDO0lBQ0gsQ0FBQztJQUNILDBCQUFDO0FBQUQsQ0FuQ0EsQUFtQ0MsQ0FuQ3dDLGlDQUFlLEdBbUN2RDtBQW5DWSxrREFBbUI7Ozs7OztBQ1poQyxxREFBb0Q7QUFDcEQsMkNBQW1FO0FBRW5FOzs7O0dBSUc7QUFDSCxTQUFTLG9CQUFvQixDQUFDLFNBQTZCO0lBQ3pELElBQU0sZUFBZSxHQUF5QixFQUFFLENBQUM7SUFFakQsU0FBUyxDQUFDLGFBQWEsRUFBRSxDQUFDLE9BQU8sQ0FBQyxVQUFBLG9CQUFvQjtRQUNwRCxJQUFJLElBQUEsd0JBQVcsRUFBQyxvQkFBb0IsQ0FBQyxFQUFFO1lBQ3JDLGVBQWUsQ0FBQyxJQUFJLE9BQXBCLGVBQWUsRUFBUyxvQkFBb0IsQ0FBQyxvQkFBb0IsQ0FBQyxFQUFFO1NBQ3JFO2FBQU0sSUFBSSxJQUFBLHdCQUFXLEVBQUMsb0JBQW9CLENBQUMsRUFBRTtZQUM1QyxlQUFlLENBQUMsSUFBSSxDQUFDLG9CQUFvQixDQUFDLENBQUM7U0FDNUM7SUFDSCxDQUFDLENBQUMsQ0FBQztJQUVILE9BQU8sZUFBZSxDQUFDO0FBQ3pCLENBQUM7QUFFRDs7OztHQUlHO0FBQ0gsU0FBUyxhQUFhLENBQUMsU0FBNkI7SUFDbEQsSUFBSSxJQUFBLHNCQUFTLEVBQUMsU0FBUyxDQUFDLEVBQUU7UUFDeEIsT0FBTyxFQUFFLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsYUFBYSxFQUFFLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsUUFBUSxDQUFDLENBQUM7S0FDbkU7U0FBTTtRQUNMLE9BQU8sU0FBUyxDQUFDLGFBQWEsRUFBRSxDQUFDLEdBQUcsRUFBRSxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7S0FDcEQ7QUFDSCxDQUFDO0FBRUQ7Ozs7OztHQU1HO0FBQ0gsU0FBZ0IsNkJBQTZCLENBQUMsVUFBZ0M7SUFDNUUsSUFBTSxZQUFZLEdBQWtCLEVBQUUsQ0FBQztJQUV2QyxVQUFVO1NBQ1AsTUFBTSxDQUFDLFVBQUEsU0FBUyxJQUFJLE9BQUEsQ0FBQyxTQUFTLENBQUMsUUFBUSxFQUFFLEVBQXJCLENBQXFCLENBQUM7U0FDMUMsT0FBTyxDQUFDLFVBQUEsU0FBUztRQUNoQixJQUFNLGtCQUFrQixHQUFHLFNBQVMsWUFBWSxxQkFBUyxDQUFDLENBQUMsQ0FBQyxvQkFBb0IsQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxTQUFTLENBQUMsQ0FBQztRQUUxRyxrQkFBa0IsQ0FBQyxPQUFPLENBQUMsVUFBQSxTQUFTO1lBQ2xDLFlBQVksQ0FBQyxJQUFJLE9BQWpCLFlBQVksRUFBUyxhQUFhLENBQUMsU0FBUyxDQUFDLEVBQUU7UUFDakQsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDLENBQUMsQ0FBQztJQUVMLE9BQU8sWUFBWSxDQUFDO0FBQ3RCLENBQUM7QUFkRCxzRUFjQzs7Ozs7O0FDekRELGlDQUFvRDtBQUNwRCxnREFBK0M7QUFFL0MsSUFBTSxXQUFXLEdBQUc7SUFDbEIsWUFBWSxFQUFFLGNBQU0sT0FBQSwyQkFBWSxDQUFDLE9BQU8sRUFBcEIsQ0FBb0I7SUFDeEMsUUFBUSxFQUFFO1FBQ1IsV0FBVztRQUNYLEVBQUUsRUFBRSxpQkFBUyxDQUFDLEVBQUU7UUFDaEIsYUFBYTtRQUNiLEVBQUUsRUFBRSxpQkFBUyxDQUFDLElBQUk7UUFDbEIsYUFBYTtRQUNiLEVBQUUsRUFBRSxpQkFBUyxDQUFDLElBQUk7UUFDbEIsY0FBYztRQUNkLEVBQUUsRUFBRSxpQkFBUyxDQUFDLEtBQUs7UUFDbkIsV0FBVztRQUNYLEVBQUUsRUFBRSxjQUFNLENBQUMsTUFBTTtRQUNqQixPQUFPO1FBQ1AsS0FBSyxFQUFFLGNBQU0sQ0FBQyxJQUFJO0tBQ25CO0NBQ0YsQ0FBQztBQUVGLElBQU0sV0FBVyxHQUFHO0lBQ2xCLFlBQVksRUFBRSxjQUFNLE9BQUEsMkJBQVksQ0FBQyxPQUFPLEVBQXBCLENBQW9CO0lBQ3hDLFFBQVEsRUFBRTtRQUNSLFdBQVc7UUFDWCxFQUFFLEVBQUUsaUJBQVMsQ0FBQyxFQUFFO1FBQ2hCLGFBQWE7UUFDYixFQUFFLEVBQUUsaUJBQVMsQ0FBQyxJQUFJO1FBQ2xCLGFBQWE7UUFDYixFQUFFLEVBQUUsaUJBQVMsQ0FBQyxJQUFJO1FBQ2xCLGNBQWM7UUFDZCxFQUFFLEVBQUUsaUJBQVMsQ0FBQyxLQUFLO1FBQ25CLFdBQVc7UUFDWCxFQUFFLEVBQUUsY0FBTSxDQUFDLE1BQU07UUFDakIsT0FBTztRQUNQLEdBQUcsRUFBRSxjQUFNLENBQUMsSUFBSTtLQUNqQjtDQUNGLENBQUM7QUFFRixJQUFNLGlCQUFpQixHQUFHO0lBQ3hCLFlBQVksRUFBRSxjQUFNLE9BQUEsMkJBQVksQ0FBQyxhQUFhLEVBQTFCLENBQTBCO0lBQzlDLFFBQVEsRUFBRTtRQUNSLFdBQVc7UUFDWCxFQUFFLEVBQUUsaUJBQVMsQ0FBQyxFQUFFO1FBQ2hCLGFBQWE7UUFDYixFQUFFLEVBQUUsaUJBQVMsQ0FBQyxJQUFJO1FBQ2xCLGFBQWE7UUFDYixFQUFFLEVBQUUsaUJBQVMsQ0FBQyxJQUFJO1FBQ2xCLGNBQWM7UUFDZCxFQUFFLEVBQUUsaUJBQVMsQ0FBQyxLQUFLO1FBQ25CLFFBQVE7UUFDUixFQUFFLEVBQUUsY0FBTSxDQUFDLE1BQU07UUFDakIsU0FBUztRQUNULEVBQUUsRUFBRSxjQUFNLENBQUMsSUFBSTtLQUNoQjtDQUNGLENBQUM7QUFFRixJQUFNLGFBQWEsR0FBRztJQUNwQixZQUFZLEVBQUUsY0FBTSxPQUFBLDJCQUFZLENBQUMsU0FBUyxFQUF0QixDQUFzQjtJQUMxQyxRQUFRLEVBQUU7UUFDUixXQUFXO1FBQ1gsRUFBRSxFQUFFLGlCQUFTLENBQUMsRUFBRTtRQUNoQixhQUFhO1FBQ2IsRUFBRSxFQUFFLGlCQUFTLENBQUMsSUFBSTtRQUNsQixhQUFhO1FBQ2IsRUFBRSxFQUFFLGlCQUFTLENBQUMsSUFBSTtRQUNsQixjQUFjO1FBQ2QsRUFBRSxFQUFFLGlCQUFTLENBQUMsS0FBSztRQUNuQixXQUFXO1FBQ1gsRUFBRSxFQUFFLGNBQU0sQ0FBQyxNQUFNO1FBQ2pCLE9BQU87UUFDUCxFQUFFLEVBQUUsY0FBTSxDQUFDLElBQUk7S0FDaEI7Q0FDRixDQUFDO0FBRUYsSUFBTSxhQUFhLEdBQUc7SUFDcEIsWUFBWSxFQUFFLGNBQU0sT0FBQSwyQkFBWSxDQUFDLFNBQVMsRUFBdEIsQ0FBc0I7SUFDMUMsUUFBUSxFQUFFO1FBQ1IsV0FBVztRQUNYLEVBQUUsRUFBRSxpQkFBUyxDQUFDLEVBQUU7UUFDaEIsYUFBYTtRQUNiLEVBQUUsRUFBRSxpQkFBUyxDQUFDLElBQUk7UUFDbEIsYUFBYTtRQUNiLEVBQUUsRUFBRSxpQkFBUyxDQUFDLElBQUk7UUFDbEIsY0FBYztRQUNkLEVBQUUsRUFBRSxpQkFBUyxDQUFDLEtBQUs7UUFDbkIsS0FBSztRQUNMLEVBQUUsRUFBRSxjQUFNLENBQUMsTUFBTTtRQUNqQixPQUFPO1FBQ1AsQ0FBQyxFQUFFLGNBQU0sQ0FBQyxJQUFJO0tBQ2Y7Q0FDRixDQUFDO0FBRUYsbUNBQW1DO0FBQ25DLElBQU0sYUFBYSxHQUFHO0lBQ3BCLFdBQVc7SUFDWCxFQUFFLEVBQUUsaUJBQVMsQ0FBQyxFQUFFO0lBQ2hCLGFBQWE7SUFDYixFQUFFLEVBQUUsaUJBQVMsQ0FBQyxJQUFJO0lBQ2xCLGFBQWE7SUFDYixFQUFFLEVBQUUsaUJBQVMsQ0FBQyxJQUFJO0lBQ2xCLGNBQWM7SUFDZCxFQUFFLEVBQUUsaUJBQVMsQ0FBQyxLQUFLO0lBQ25CLFFBQVE7SUFDUixFQUFFLEVBQUUsY0FBTSxDQUFDLE1BQU07SUFDakIsU0FBUztJQUNULEVBQUUsRUFBRSxjQUFNLENBQUMsSUFBSTtDQUNoQixDQUFDO0FBRUY7O0dBRUc7QUFDSCxTQUFnQixvQkFBb0I7SUFDbEMsSUFBTSxnQkFBZ0IsR0FBRztRQUN2QixXQUFXO1FBQ1gsV0FBVztRQUNYLGlCQUFpQjtRQUNqQixhQUFhO1FBQ2IsYUFBYTtLQUNkLENBQUMsSUFBSSxDQUFDLFVBQUEsTUFBTSxJQUFJLE9BQUEsTUFBTSxDQUFDLFlBQVksRUFBRSxFQUFyQixDQUFxQixDQUFDLENBQUM7SUFFeEMsSUFBSSxnQkFBZ0IsRUFBRTtRQUNwQixPQUFPLGdCQUFnQixDQUFDLFFBQVEsQ0FBQztLQUNsQztTQUFNO1FBQ0wsT0FBTyxhQUFhLENBQUM7S0FDdEI7QUFDSCxDQUFDO0FBZEQsb0RBY0M7Ozs7OztBQzlIRCxpQ0FBb0M7QUFPcEM7Ozs7R0FJRztBQUNILFNBQVMsTUFBTSxDQUFDLE1BQWM7SUFDNUIsT0FBTyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUNsRSxDQUFDO0FBRUQ7Ozs7R0FJRztBQUNILFNBQVMsU0FBUyxDQUFDLE1BQWM7SUFDL0IsSUFBTSxHQUFHLEdBQUcsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDO0lBRTNCLE9BQU87UUFDTCxDQUFDLEVBQUUsTUFBTSxDQUFDLENBQUMsR0FBRyxHQUFHO1FBQ2pCLENBQUMsRUFBRSxNQUFNLENBQUMsQ0FBQyxHQUFHLEdBQUc7S0FDbEIsQ0FBQztBQUNKLENBQUM7QUFFRDs7Ozs7R0FLRztBQUNILFNBQVMsVUFBVSxDQUFDLENBQVMsRUFBRSxDQUFTO0lBQ3RDLE9BQU8sQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUMvQixDQUFDO0FBRUQ7Ozs7O0dBS0c7QUFDSCxTQUFTLFFBQVEsQ0FBQyxDQUFTLEVBQUUsQ0FBUztJQUNwQyxPQUFPLE1BQU0sQ0FBQztRQUNaLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ1osQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7S0FDYixDQUFDLENBQUM7QUFDTCxDQUFDO0FBRUQ7Ozs7R0FJRztBQUNILFNBQVMsZ0JBQWdCLENBQUMsT0FBb0I7SUFDNUMsSUFBTSxZQUFZLEdBQUcsMEJBQTBCLENBQUMsT0FBTyxDQUFDLENBQUM7SUFFekQsT0FBTztRQUNMLENBQUMsRUFBRSxZQUFZLENBQUMsQ0FBQyxHQUFHLFlBQVksQ0FBQyxLQUFLLEdBQUcsQ0FBQztRQUMxQyxDQUFDLEVBQUUsWUFBWSxDQUFDLENBQUMsR0FBRyxZQUFZLENBQUMsTUFBTSxHQUFHLENBQUM7S0FDNUMsQ0FBQztBQUNKLENBQUM7QUFFRDs7Ozs7OztHQU9HO0FBQ0gsU0FBUyxjQUFjLENBQUMsQ0FBUyxFQUFFLENBQVMsRUFBRSxTQUFvQjtJQUNoRSxJQUFNLGVBQWUsR0FBRztRQUN0QixDQUFDLEVBQUUsQ0FBQyxTQUFTLEtBQUssaUJBQVMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxTQUFTLEtBQUssaUJBQVMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQzlFLENBQUMsRUFBRSxDQUFDLFNBQVMsS0FBSyxpQkFBUyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLFNBQVMsS0FBSyxpQkFBUyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7S0FDNUUsQ0FBQztJQUVGLElBQU0sYUFBYSxHQUFHLFNBQVMsQ0FBQztRQUM5QixDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztRQUNaLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO0tBQ2IsQ0FBQyxDQUFDO0lBRUgsSUFBTSxRQUFRLEdBQUcsVUFBVSxDQUFDLGVBQWUsRUFBRSxhQUFhLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxlQUFlLENBQUMsR0FBRyxNQUFNLENBQUMsYUFBYSxDQUFDLENBQUMsQ0FBQztJQUVoSCxPQUFPLElBQUksQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLEdBQUcsR0FBRyxHQUFHLElBQUksQ0FBQyxFQUFFLENBQUM7QUFDN0MsQ0FBQztBQUVEOzs7Ozs7O0dBT0c7QUFDSCxTQUFnQixxQkFBcUIsQ0FDbkMsYUFBMEIsRUFDMUIsUUFBdUIsRUFDdkIsU0FBb0I7O0lBRXBCLElBQUksQ0FBQyxhQUFhO1FBQUUsT0FBTyxTQUFTLENBQUM7SUFFckMsSUFBTSxXQUFXLEdBQUcsRUFBRSxDQUFDO0lBQ3ZCLElBQU0sZ0JBQWdCLEdBQUcsZ0JBQWdCLENBQUMsYUFBYSxDQUFDLENBQUM7SUFFekQsT0FBTyxNQUFBLFFBQVE7UUFDYiw4Q0FBOEM7U0FDN0MsTUFBTSxDQUFDLFVBQUEsSUFBSSxJQUFJLE9BQUEsSUFBSSxLQUFLLGFBQWEsRUFBdEIsQ0FBc0IsQ0FBQztRQUN2QyxvRkFBb0Y7U0FDbkYsR0FBRyxDQUFDLFVBQUEsT0FBTztRQUNWLElBQU0sYUFBYSxHQUFHLGdCQUFnQixDQUFDLE9BQU8sQ0FBQyxDQUFDO1FBQ2hELElBQU0sSUFBSSxHQUFHLFFBQVEsQ0FBQyxnQkFBZ0IsRUFBRSxhQUFhLENBQUMsQ0FBQztRQUN2RCxJQUFNLEtBQUssR0FBRyxjQUFjLENBQUMsZ0JBQWdCLEVBQUUsYUFBYSxFQUFFLFNBQVMsQ0FBQyxDQUFDO1FBRXpFLE9BQU8sRUFBRSxLQUFLLE9BQUEsRUFBRSxJQUFJLE1BQUEsRUFBRSxPQUFPLFNBQUEsRUFBRSxDQUFDO0lBQ2xDLENBQUMsQ0FBQztRQUNGLHNGQUFzRjtTQUNyRixNQUFNLENBQUMsVUFBQyxFQUFTO1lBQVAsS0FBSyxXQUFBO1FBQU8sT0FBQSxLQUFLLElBQUksV0FBVztJQUFwQixDQUFvQixDQUFDO1FBQzVDLGdHQUFnRztTQUMvRixJQUFJLENBQUMsVUFBQyxFQUE4QixFQUFFLEVBQThCO1lBQXJELE1BQU0sV0FBQSxFQUFRLEtBQUssVUFBQTtZQUFhLE1BQU0sV0FBQSxFQUFRLEtBQUssVUFBQTtRQUFPLE9BQUEsQ0FBQyxNQUFNLEdBQUcsTUFBTSxDQUFDLEdBQUcsQ0FBQyxLQUFLLEdBQUcsS0FBSyxDQUFDO0lBQW5DLENBQW1DLENBQUM7UUFDOUcsb0RBQW9EO1NBQ25ELEtBQUssRUFBRSwwQ0FBRSxPQUFPLENBQUM7QUFDdEIsQ0FBQztBQTNCRCxzREEyQkM7QUFFRDs7Ozs7O0dBTUc7QUFDSCxTQUFnQiwwQkFBMEIsQ0FBQyxPQUFvQjtJQUM3RCxJQUFNLFlBQVksR0FBRyxPQUFPLENBQUMscUJBQXFCLEVBQUUsQ0FBQztJQUVyRCxJQUFJLE9BQU8sWUFBWSxDQUFDLENBQUMsS0FBSyxRQUFRLElBQUksT0FBTyxZQUFZLENBQUMsQ0FBQyxLQUFLLFFBQVEsRUFBRTtRQUM1RSxZQUFZLENBQUMsQ0FBQyxHQUFHLFlBQVksQ0FBQyxJQUFJLENBQUM7UUFDbkMsWUFBWSxDQUFDLENBQUMsR0FBRyxZQUFZLENBQUMsR0FBRyxDQUFDO0tBQ25DO0lBRUQsT0FBTyxZQUFZLENBQUM7QUFDdEIsQ0FBQztBQVRELGdFQVNDOzs7Ozs7QUM5SUQsNkRBQThEO0FBQzlELGlGQUFnRjtBQUNoRiw2REFBNEQ7QUFDNUQsMkNBQStDO0FBQy9DLGlDQUEwRjtBQUUxRjs7Ozs7Ozs7O0dBU0c7QUFDSDtJQU9FLHlCQUE0QixTQUE2QjtRQUFFLG9CQUFtQzthQUFuQyxVQUFtQyxFQUFuQyxxQkFBbUMsRUFBbkMsSUFBbUM7WUFBbkMsbUNBQW1DOztRQUFsRSxjQUFTLEdBQVQsU0FBUyxDQUFvQjtRQUhqRCxxQ0FBZ0MsR0FBRyxjQUFPLENBQUMsQ0FBQztRQUlsRCxJQUFJLENBQUMsVUFBVSxHQUFHLFVBQVUsQ0FBQztRQUM3QixJQUFJLENBQUMsZUFBZSxHQUFHLElBQUkseUNBQW1CLEVBQUUsQ0FBQztJQUNuRCxDQUFDO0lBc0JEOztPQUVHO0lBQ0ksMENBQWdCLEdBQXZCO1FBQ0UsT0FBTyxJQUFJLENBQUMsYUFBYSxDQUFDO0lBQzVCLENBQUM7SUFFTyxzQ0FBWSxHQUFwQixVQUFxQixPQUFvQjtRQUN2QyxJQUFJLENBQUMsaUJBQWlCLEVBQUUsQ0FBQztRQUN6QixJQUFJLENBQUMsYUFBYSxHQUFHLE9BQU8sQ0FBQztRQUM3QixJQUFJLENBQUMsYUFBYSxDQUFDLEtBQUssRUFBRSxDQUFDO0lBQzdCLENBQUM7SUFFTywyQ0FBaUIsR0FBekI7O1FBQ0UsTUFBQSxJQUFJLENBQUMsYUFBYSwwQ0FBRSxJQUFJLEVBQUUsQ0FBQztJQUM3QixDQUFDO0lBRU8sMkNBQWlCLEdBQXpCO1FBQ0UsSUFBTSxPQUFPLEdBQUcsSUFBQSw2REFBNkIsRUFBQyxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDbEUsSUFBSSxPQUFPLEVBQUU7WUFDWCxJQUFJLENBQUMsWUFBWSxDQUFDLE9BQU8sQ0FBQyxDQUFDO1NBQzVCO0lBQ0gsQ0FBQztJQUVTLGtEQUF3QixHQUFsQyxVQUFtQyxTQUFvQjtRQUNyRCxJQUFNLGFBQWEsR0FBRyxJQUFBLDJDQUFxQixFQUN6QyxJQUFJLENBQUMsYUFBYSxFQUNsQixJQUFBLDZEQUE2QixFQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsRUFDOUMsU0FBUyxDQUNWLENBQUM7UUFFRixJQUFJLGFBQWEsRUFBRTtZQUNqQixJQUFJLENBQUMsWUFBWSxDQUFDLGFBQWEsQ0FBQyxDQUFDO1NBQ2xDO0lBQ0gsQ0FBQztJQUVTLDhDQUFvQixHQUE5QixVQUErQixNQUFjO1FBQzNDLFFBQVEsTUFBTSxFQUFFO1lBQ2QsS0FBSSxDQUFDLGNBQU0sQ0FBQyxNQUFNLENBQUM7Z0JBQ2pCLElBQUksQ0FBQyxhQUFhLENBQUMsS0FBSyxFQUFFLENBQUM7Z0JBQzNCLE1BQU07WUFDUixLQUFJLENBQUMsY0FBTSxDQUFDLElBQUksQ0FBQztnQkFDZixJQUFJLENBQUMsU0FBUyxDQUFDLElBQUksRUFBRSxDQUFDO2dCQUN0QixNQUFNO1NBQ1Q7SUFDSCxDQUFDO0lBRU8scUNBQVcsR0FBbkIsVUFBdUIsSUFBTyxFQUFFLGNBQWlDLEVBQUUsV0FBeUI7UUFDMUYsSUFBSSxhQUFhLEdBQUcsSUFBSSxDQUFDO1FBQ3pCLElBQU0sY0FBYyxHQUFHLGNBQU0sT0FBQSxDQUFDLGFBQWEsR0FBRyxLQUFLLENBQUMsRUFBdkIsQ0FBdUIsQ0FBQztRQUVyRCxXQUFXLGFBQVgsV0FBVyx1QkFBWCxXQUFXLENBQUcsSUFBSSxFQUFFLElBQUksQ0FBQyxhQUFhLEVBQUUsY0FBYyxDQUFDLENBQUM7UUFFeEQsSUFBSSxhQUFhLEVBQUU7WUFDakIsY0FBYyxDQUFDLElBQUksQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDLENBQUM7U0FDakM7SUFDSCxDQUFDO0lBRUQ7Ozs7T0FJRztJQUNJLDBDQUFnQixHQUF2QixVQUF3QixTQUFvQjtRQUMxQyxJQUFJLENBQUMsSUFBSSxDQUFDLGFBQWEsRUFBRTtZQUN2Qiw0RkFBNEY7WUFDNUYsaUZBQWlGO1lBQ2pGLElBQUksSUFBSSxDQUFDLDBCQUEwQixFQUFFO2dCQUNuQyxJQUFJLENBQUMsWUFBWSxDQUFDLElBQUksQ0FBQywwQkFBMEIsQ0FBQyxDQUFDO2FBQ3BEO2lCQUFNO2dCQUNMLElBQUksQ0FBQyxpQkFBaUIsRUFBRSxDQUFDO2FBQzFCO1lBQ0QsT0FBTztTQUNSO1FBQ0QsSUFBSSxDQUFDLFdBQVcsQ0FBQyxTQUFTLEVBQUUsSUFBSSxDQUFDLHdCQUF3QixFQUFFLElBQUksQ0FBQyxZQUFZLENBQUMsQ0FBQztJQUNoRixDQUFDO0lBRUQ7Ozs7T0FJRztJQUNJLHNDQUFZLEdBQW5CLFVBQW9CLE1BQWM7UUFDaEMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxNQUFNLEVBQUUsSUFBSSxDQUFDLG9CQUFvQixFQUFFLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQztJQUNyRSxDQUFDO0lBRUQ7Ozs7T0FJRztJQUNJLGlDQUFPLEdBQWQ7UUFDRSxJQUFJLElBQUksQ0FBQyxhQUFhLEVBQUU7WUFDdEIsSUFBSSxDQUFDLDBCQUEwQixHQUFHLElBQUksQ0FBQyxhQUFhLENBQUM7WUFDckQsSUFBSSxDQUFDLGlCQUFpQixFQUFFLENBQUM7WUFDekIsSUFBSSxDQUFDLGFBQWEsR0FBRyxTQUFTLENBQUM7U0FDaEM7SUFDSCxDQUFDO0lBRUQ7Ozs7O09BS0c7SUFDSSxnQ0FBTSxHQUFiO1FBQ0UsSUFBSSxJQUFJLENBQUMsMEJBQTBCLElBQUksQ0FBQyxJQUFBLDRCQUFlLEVBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxFQUFFO1lBQ3ZFLElBQUksQ0FBQyxZQUFZLENBQUMsSUFBSSxDQUFDLDBCQUEwQixDQUFDLENBQUM7WUFDbkQsSUFBSSxDQUFDLDBCQUEwQixHQUFHLFNBQVMsQ0FBQztTQUM3QzthQUFNO1lBQ0wsSUFBSSxDQUFDLGlCQUFpQixFQUFFLENBQUM7U0FDMUI7UUFFRCxJQUFJLENBQUMsaUJBQWlCLEVBQUUsQ0FBQztJQUMzQixDQUFDO0lBRUQ7OztPQUdHO0lBQ0ssMkNBQWlCLEdBQXpCO1FBQUEsaUJBaUJDO1FBaEJDLElBQUksQ0FBQyxnQ0FBZ0MsRUFBRSxDQUFDO1FBRXhDLElBQU0sNEJBQTRCLEdBQUcsSUFBQSw2REFBNkIsRUFBQyxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUMsR0FBRyxDQUFDLFVBQUEsUUFBUTtZQUM5RixJQUFNLGFBQWEsR0FBRyxLQUFJLENBQUMsWUFBWSxDQUFDLElBQUksQ0FBQyxLQUFJLEVBQUUsUUFBUSxDQUFDLENBQUM7WUFDN0QsSUFBTSxZQUFZLEdBQUcsY0FBTSxPQUFBLEtBQUksQ0FBQyxPQUFPLEVBQUUsRUFBZCxDQUFjLENBQUM7WUFFMUMsS0FBSSxDQUFDLGVBQWUsQ0FBQyxFQUFFLENBQUMsUUFBUSxFQUFFLFlBQVksRUFBRSxhQUFhLENBQUMsQ0FBQztZQUMvRCxLQUFJLENBQUMsZUFBZSxDQUFDLEVBQUUsQ0FBQyxRQUFRLEVBQUUsWUFBWSxFQUFFLFlBQVksQ0FBQyxDQUFDO1lBRTlELE9BQU87Z0JBQ0wsS0FBSSxDQUFDLGVBQWUsQ0FBQyxHQUFHLENBQUMsUUFBUSxFQUFFLFlBQVksRUFBRSxhQUFhLENBQUMsQ0FBQztnQkFDaEUsS0FBSSxDQUFDLGVBQWUsQ0FBQyxHQUFHLENBQUMsUUFBUSxFQUFFLFlBQVksRUFBRSxZQUFZLENBQUMsQ0FBQztZQUNqRSxDQUFDLENBQUM7UUFDSixDQUFDLENBQUMsQ0FBQztRQUVILElBQUksQ0FBQyxnQ0FBZ0MsR0FBRyxjQUFNLE9BQUEsNEJBQTRCLENBQUMsT0FBTyxDQUFDLFVBQUEsRUFBRSxJQUFJLE9BQUEsRUFBRSxFQUFFLEVBQUosQ0FBSSxDQUFDLEVBQWhELENBQWdELENBQUM7SUFDakcsQ0FBQztJQUVEOztPQUVHO0lBQ0ksaUNBQU8sR0FBZDtRQUNFLElBQUksQ0FBQyxlQUFlLENBQUMsT0FBTyxFQUFFLENBQUM7UUFDL0IsSUFBSSxDQUFDLGFBQWEsR0FBRyxTQUFTLENBQUM7UUFDL0IsSUFBSSxDQUFDLFVBQVUsQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQyxVQUFVLENBQUMsTUFBTSxDQUFDLENBQUM7UUFDbEQsSUFBSSxDQUFDLGdDQUFnQyxFQUFFLENBQUM7SUFDMUMsQ0FBQztJQUNILHNCQUFDO0FBQUQsQ0FwTEEsQUFvTEMsSUFBQTtBQXBMWSwwQ0FBZTs7Ozs7O0FDaEI1Qjs7R0FFRztBQUNIO0lBR0U7UUFDRSxJQUFJLENBQUMsaUJBQWlCLEdBQUcsSUFBSSxHQUFHLEVBQUUsQ0FBQztJQUNyQyxDQUFDO0lBRU8scURBQXVCLEdBQS9CLFVBQWdDLElBQStCO1FBQzdELElBQUksQ0FBQyxJQUFJLENBQUMsaUJBQWlCLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxFQUFFO1lBQ3JDLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxHQUFHLENBQUMsSUFBSSxFQUFFLEVBQUUsQ0FBQyxDQUFDO1NBQ3RDO1FBRUQsT0FBTyxJQUFJLENBQUMsaUJBQWlCLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxDQUFDO0lBQzFDLENBQUM7SUFFRDs7Ozs7OztPQU9HO0lBQ0ksZ0NBQUUsR0FBVCxVQUNFLElBQVUsRUFDVixJQUErQixFQUMvQixRQUE0QyxFQUM1QyxPQUEyQztRQUUzQyxJQUFJLENBQUMsZ0JBQWdCLENBQUMsSUFBSSxFQUFFLFFBQVEsRUFBRSxPQUFPLENBQUMsQ0FBQztRQUMvQyxJQUFJLENBQUMsdUJBQXVCLENBQUMsSUFBSSxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsSUFBSSxFQUFFLFFBQVEsRUFBRSxPQUFPLENBQUMsQ0FBQyxDQUFDO0lBQ3JFLENBQUM7SUFFRDs7Ozs7OztPQU9HO0lBQ0ksaUNBQUcsR0FBVixVQUNFLElBQVUsRUFDVixJQUErQixFQUMvQixRQUE0QyxFQUM1QyxPQUEyQztRQUUzQyxJQUFNLGVBQWUsR0FBRyxJQUFJLENBQUMsdUJBQXVCLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDM0QsSUFBTSxhQUFhLEdBQUcsZUFBZSxDQUFDLFNBQVMsQ0FBQyxVQUFDLEVBQXdDO2dCQUF2QyxTQUFTLFFBQUEsRUFBRSxhQUFhLFFBQUEsRUFBRSxZQUFZLFFBQUE7WUFDdEYsT0FBTyxTQUFTLEtBQUssSUFBSSxJQUFJLGFBQWEsS0FBSyxRQUFRLElBQUksWUFBWSxLQUFLLE9BQU8sQ0FBQztRQUN0RixDQUFDLENBQUMsQ0FBQztRQUVILElBQUksQ0FBQyxtQkFBbUIsQ0FBQyxJQUFJLEVBQUUsUUFBUSxFQUFFLE9BQU8sQ0FBQyxDQUFDO1FBRWxELElBQUksYUFBYSxHQUFHLENBQUMsQ0FBQyxFQUFFO1lBQ3RCLGVBQWUsQ0FBQyxNQUFNLENBQUMsYUFBYSxFQUFFLENBQUMsQ0FBQyxDQUFDO1NBQzFDO0lBQ0gsQ0FBQztJQUVEOztPQUVHO0lBQ0kscUNBQU8sR0FBZDtRQUFBLGlCQU9DO1FBTkMsSUFBSSxDQUFDLGlCQUFpQixDQUFDLE9BQU8sQ0FBQyxVQUFDLGVBQWUsRUFBRSxJQUFJO1lBQ25ELGVBQWUsQ0FBQyxPQUFPLENBQUMsVUFBQyxFQUE0QjtvQkFBM0IsT0FBTyxRQUFBLEVBQUUsUUFBUSxRQUFBLEVBQUUsT0FBTyxRQUFBO2dCQUNsRCxLQUFJLENBQUMsR0FBRyxDQUFDLE9BQU8sRUFBRSxJQUFJLEVBQUUsUUFBUSxFQUFFLE9BQU8sQ0FBQyxDQUFDO1lBQzdDLENBQUMsQ0FBQyxDQUFDO1FBQ0wsQ0FBQyxDQUFDLENBQUM7UUFDSCxJQUFJLENBQUMsaUJBQWlCLENBQUMsS0FBSyxFQUFFLENBQUM7SUFDakMsQ0FBQztJQUNILDBCQUFDO0FBQUQsQ0F0RUEsQUFzRUMsSUFBQTtBQXRFWSxrREFBbUI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ0xoQyxxREFBb0Q7QUFHcEQsaUNBQTRDO0FBRTVDOzs7O0dBSUc7QUFDSDtJQUF5Qyx1Q0FBZTtJQUN0RCw2QkFBNEIsU0FBc0I7UUFBRSxrQkFBaUM7YUFBakMsVUFBaUMsRUFBakMscUJBQWlDLEVBQWpDLElBQWlDO1lBQWpDLGlDQUFpQzs7UUFBckYsOENBQ1EsU0FBUyxHQUFLLFFBQVEsa0JBQzdCO1FBRjJCLGVBQVMsR0FBVCxTQUFTLENBQWE7O0lBRWxELENBQUM7SUFFTSwwQ0FBWSxHQUFuQixVQUFvQixNQUFjO1FBQ2hDLElBQUksQ0FBQyxTQUFTLENBQUMsTUFBTSxFQUFFLENBQUM7UUFFeEIsaUJBQU0sWUFBWSxZQUFDLE1BQU0sQ0FBQyxDQUFDO0lBQzdCLENBQUM7SUFFTSw4Q0FBZ0IsR0FBdkIsVUFBd0IsU0FBb0I7UUFDMUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxNQUFNLEVBQUUsQ0FBQztRQUV4QixpQkFBTSxnQkFBZ0IsWUFBQyxTQUFTLENBQUMsQ0FBQztJQUNwQyxDQUFDO0lBRVMsa0RBQW9CLEdBQTlCLFVBQStCLE1BQWM7UUFDM0MsSUFBSSxNQUFNLEtBQUssY0FBTSxDQUFDLElBQUksRUFBRTtZQUMxQixJQUFJLENBQUMsU0FBUyxDQUFDLE1BQU0sRUFBRSxDQUFDO1NBQ3pCO2FBQU07WUFDTCxpQkFBTSxvQkFBb0IsWUFBQyxNQUFNLENBQUMsQ0FBQztTQUNwQztJQUNILENBQUM7SUFFTSxxQ0FBTyxHQUFkO1FBQ0UsaUJBQU0sT0FBTyxXQUFFLENBQUM7SUFDbEIsQ0FBQztJQUNILDBCQUFDO0FBQUQsQ0E1QkEsQUE0QkMsQ0E1QndDLGlDQUFlLEdBNEJ2RDtBQTVCWSxrREFBbUI7Ozs7OztBQ1RoQyw2REFBNEQ7QUFDNUQsaUNBQTRDO0FBQzVDLDZEQUFpRTtBQUVqRSxJQUFNLDJCQUEyQixHQUFHLEtBQUssQ0FBQztBQUMxQyxJQUFNLHVCQUF1QixHQUFHLEdBQUcsQ0FBQztBQUNwQyxJQUFNLG9CQUFvQixHQUFHLEdBQUcsQ0FBQztBQUVqQzs7O0dBR0c7QUFDSDtJQU9FLHdCQUE2QixtQkFBd0M7UUFBckUsaUJBSUM7UUFKNEIsd0JBQW1CLEdBQW5CLG1CQUFtQixDQUFxQjtRQU5wRCxtQkFBYyxHQUFHLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFDLENBQUM7UUFFeEMsZ0JBQVcsR0FBRyxLQUFLLENBQUM7UUFFcEIseUJBQW9CLEdBQUcsMkJBQTJCLENBQUM7UUFtRTFDLGlCQUFZLEdBQUcsVUFBQyxTQUFvQixFQUFFLE1BQW1CLEVBQUUsY0FBMEI7WUFDcEcsSUFBSSxDQUFDLGdCQUFnQixDQUFDLE1BQU0sQ0FBQyxFQUFFO2dCQUM3QixPQUFPO2FBQ1I7WUFFRCxJQUFJLFNBQVMsS0FBSyxpQkFBUyxDQUFDLEVBQUUsSUFBSSxTQUFTLEtBQUssaUJBQVMsQ0FBQyxJQUFJLEVBQUU7Z0JBQzlELEtBQUksQ0FBQyxXQUFXLENBQUMsVUFBVSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUM7Z0JBRXJDLE9BQU87YUFDUjtZQUVELEtBQUksQ0FBQyxnQ0FBZ0MsQ0FBQyxNQUFNLEVBQUUsU0FBUyxDQUFDLENBQUM7WUFDekQsS0FBSSxDQUFDLHNCQUFzQixDQUFDLFVBQVUsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDO1lBRWhELGNBQWMsRUFBRSxDQUFDO1FBQ25CLENBQUMsQ0FBQztRQXlCZSxhQUFRLEdBQUcsVUFBQyxNQUFjLEVBQUUsTUFBbUIsRUFBRSxjQUEwQjtZQUMxRixJQUFJLENBQUMsZ0JBQWdCLENBQUMsTUFBTSxDQUFDLEVBQUU7Z0JBQzdCLE9BQU87YUFDUjtZQUVELElBQU0sT0FBTyxHQUFHLFVBQVUsQ0FBQyxNQUFNLENBQUMsQ0FBQztZQUVuQyxJQUFJLE1BQU0sS0FBSyxjQUFNLENBQUMsTUFBTSxJQUFJLEtBQUksQ0FBQyxXQUFXLEVBQUU7Z0JBQ2hELEtBQUksQ0FBQyx1QkFBdUIsQ0FBQyxPQUFPLENBQUMsQ0FBQztnQkFDdEMsY0FBYyxFQUFFLENBQUM7YUFDbEI7aUJBQU0sSUFBSSxNQUFNLEtBQUssY0FBTSxDQUFDLElBQUksRUFBRTtnQkFDakMsS0FBSSxDQUFDLFdBQVcsQ0FBQyxPQUFPLENBQUMsQ0FBQztnQkFDMUIsY0FBYyxFQUFFLENBQUM7YUFDbEI7UUFDSCxDQUFDLENBQUM7UUF0SEEsSUFBSSxDQUFDLG1CQUFtQixDQUFDLFFBQVEsR0FBRyxJQUFJLENBQUMsUUFBUSxDQUFDO1FBQ2xELElBQUksQ0FBQyxlQUFlLEdBQUcsSUFBSSx5Q0FBbUIsRUFBRSxDQUFDO1FBQ2pELElBQUksQ0FBQyxtQkFBbUIsQ0FBQyxZQUFZLEdBQUcsSUFBSSxDQUFDLFlBQVksQ0FBQztJQUM1RCxDQUFDO0lBRU8sbURBQTBCLEdBQWxDO1FBQUEsaUJBTUM7UUFMQyxZQUFZLENBQUMsSUFBSSxDQUFDLHNCQUFzQixDQUFDLENBQUM7UUFDMUMsSUFBSSxDQUFDLG9CQUFvQixJQUFJLG9CQUFvQixDQUFDO1FBQ2xELElBQUksQ0FBQyxzQkFBc0IsR0FBRyxNQUFNLENBQUMsVUFBVSxDQUM3QyxjQUFNLE9BQUEsS0FBSSxDQUFDLG9CQUFvQixHQUFHLDJCQUEyQixFQUF2RCxDQUF1RCxFQUFFLHVCQUF1QixDQUN2RixDQUFDO0lBQ0osQ0FBQztJQUVPLHFDQUFZLEdBQXBCLFVBQXFCLFNBQW9CLEVBQUUsY0FBMkI7UUFDcEUsSUFBSSxDQUFDLDBCQUEwQixFQUFFLENBQUM7UUFFbEMsSUFBTSxZQUFZLEdBQUcsY0FBYyxDQUFDLHFCQUFxQixFQUFFLENBQUMsS0FBSyxDQUFDO1FBQ2xFLElBQU0sU0FBUyxHQUFHLFlBQVksR0FBRyxJQUFJLENBQUMsb0JBQW9CLENBQUM7UUFFM0QsT0FBTyxTQUFTLEtBQUssaUJBQVMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxTQUFTLENBQUM7SUFDaEUsQ0FBQztJQUVPLDRDQUFtQixHQUEzQjtRQUNFLElBQUksQ0FBQyxjQUFjLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUMxQixJQUFJLENBQUMsY0FBYyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUM7SUFDNUIsQ0FBQztJQUVPLDZDQUFvQixHQUE1QixVQUE2QixTQUFvQixFQUFFLGNBQTJCO1FBQzVFLElBQUksQ0FBQyxjQUFjLENBQUMsQ0FBQyxJQUFJLElBQUksQ0FBQyxZQUFZLENBQUMsU0FBUyxFQUFFLGNBQWMsQ0FBQyxDQUFDO0lBQ3hFLENBQUM7SUFFTyxpREFBd0IsR0FBaEMsVUFBaUMsY0FBMkI7UUFDMUQsSUFBTSxzQkFBc0IsR0FBRyx5QkFBeUIsQ0FBQyxjQUFjLENBQUMsQ0FBQztRQUN6RSxJQUFNLElBQUksR0FBRyxJQUFBLGdEQUEwQixFQUFDLHNCQUFzQixDQUFDLENBQUM7UUFHaEUsSUFBTSxNQUFNLEdBQUcsSUFBSSxDQUFDLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxLQUFLLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDekMsSUFBTSxNQUFNLEdBQUcsSUFBSSxDQUFDLENBQUMsQ0FBQztRQUV0QixJQUFJLENBQUMsY0FBYyxDQUFDLENBQUMsR0FBRyxNQUFNLENBQUM7UUFDL0IsSUFBSSxDQUFDLGNBQWMsQ0FBQyxDQUFDLEdBQUcsTUFBTSxDQUFDO0lBQ2pDLENBQUM7SUFFTyx5REFBZ0MsR0FBeEMsVUFBeUMsY0FBMkIsRUFBRSxTQUFvQjtRQUN4RixJQUFJLElBQUksQ0FBQyxXQUFXLEVBQUU7WUFDcEIsSUFBSSxDQUFDLG9CQUFvQixDQUFDLFNBQVMsRUFBRSxjQUFjLENBQUMsQ0FBQztTQUN0RDthQUFNO1lBQ0wsSUFBSSxDQUFDLHdCQUF3QixDQUFDLGNBQWMsQ0FBQyxDQUFDO1NBQy9DO1FBRUQsSUFBSSxDQUFDLFdBQVcsR0FBRyxJQUFJLENBQUM7SUFDMUIsQ0FBQztJQUVPLHdEQUErQixHQUF2QztRQUNFLE9BQU87WUFDTCxPQUFPLEVBQUUsSUFBSSxDQUFDLGNBQWMsQ0FBQyxDQUFDO1lBQzlCLE9BQU8sRUFBRSxJQUFJLENBQUMsY0FBYyxDQUFDLENBQUM7U0FDL0IsQ0FBQztJQUNKLENBQUM7SUFFTywrQ0FBc0IsR0FBOUIsVUFBK0IsT0FBZ0I7UUFDN0MsT0FBTyxDQUFDLGFBQWEsQ0FBQyxJQUFJLFVBQVUsQ0FBQyxXQUFXLEVBQUUsSUFBSSxDQUFDLCtCQUErQixFQUFFLENBQUMsQ0FBQyxDQUFDO0lBQzdGLENBQUM7SUFtQk8sZ0RBQXVCLEdBQS9CLFVBQWdDLE9BQWdCO1FBQWhELGlCQVdDO1FBVkMsSUFBTSxnQkFBZ0IsR0FBRztZQUN2QixJQUFNLGNBQWMsR0FBRyxLQUFJLENBQUMsK0JBQStCLEVBQUUsQ0FBQztZQUU5RCxRQUFRLENBQUMsYUFBYSxDQUFDLElBQUksVUFBVSxDQUFDLFNBQVMsRUFBRSxjQUFjLENBQUMsQ0FBQyxDQUFDO1lBQ2xFLEtBQUksQ0FBQyxlQUFlLENBQUMsR0FBRyxDQUFDLE9BQU8sRUFBRSxXQUFXLEVBQUUsZ0JBQWdCLENBQUMsQ0FBQztZQUNqRSxLQUFJLENBQUMsV0FBVyxDQUFDLE9BQU8sQ0FBQyxDQUFDO1FBQzVCLENBQUMsQ0FBQztRQUVGLElBQUksQ0FBQyxlQUFlLENBQUMsRUFBRSxDQUFDLE9BQU8sRUFBRSxXQUFXLEVBQUUsZ0JBQWdCLENBQUMsQ0FBQztRQUNoRSxPQUFPLENBQUMsYUFBYSxDQUFDLElBQUksVUFBVSxDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUM7SUFDckQsQ0FBQztJQUVPLG9DQUFXLEdBQW5CLFVBQW9CLE9BQWdCO1FBQ2xDLElBQUksQ0FBQyxtQkFBbUIsRUFBRSxDQUFDO1FBQzNCLElBQUksQ0FBQyxXQUFXLEdBQUcsS0FBSyxDQUFDO1FBQ3pCLElBQUksQ0FBQyx1QkFBdUIsQ0FBQyxPQUFPLENBQUMsQ0FBQztJQUN4QyxDQUFDO0lBRU8sZ0RBQXVCLEdBQS9CLFVBQWdDLE9BQWdCO1FBQzlDLE9BQU8sQ0FBQyxhQUFhLENBQUMsSUFBSSxVQUFVLENBQUMsWUFBWSxDQUFDLENBQUMsQ0FBQztJQUN0RCxDQUFDO0lBa0JEOztPQUVHO0lBQ0ksZ0NBQU8sR0FBZDtRQUNFLElBQUksQ0FBQyxlQUFlLENBQUMsT0FBTyxFQUFFLENBQUM7UUFDL0IsSUFBSSxDQUFDLG1CQUFtQixDQUFDLFFBQVEsR0FBRyxTQUFTLENBQUM7UUFDOUMsSUFBSSxDQUFDLG1CQUFtQixDQUFDLFlBQVksR0FBRyxTQUFTLENBQUM7SUFDcEQsQ0FBQztJQUNILHFCQUFDO0FBQUQsQ0F4SUEsQUF3SUMsSUFBQTtBQXhJWSx3Q0FBYztBQTBJM0IsU0FBUyxnQkFBZ0IsQ0FBQyxPQUFvQjtJQUM1QyxPQUFPLEtBQUssQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLFNBQVMsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxVQUFBLFNBQVMsSUFBSSxPQUFBLGNBQWMsQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLEVBQTlCLENBQThCLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztBQUNuRyxDQUFDO0FBRUQsU0FBUyxVQUFVLENBQUMsY0FBMkI7SUFDN0MsT0FBTyxjQUFjLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUN6QyxDQUFDO0FBRUQsU0FBUyx5QkFBeUIsQ0FBQyxjQUEyQjtJQUM1RCxPQUFPLGNBQWMsQ0FBQyxhQUFhLENBQUMsNENBQTRDLENBQUMsQ0FBQztBQUNwRixDQUFDOzs7Ozs7Ozs7Ozs7Ozs7QUMvSkQsNkRBQTREO0FBQzVELG1EQUFrRDtBQUNsRCxtQ0FBZ0Q7QUFFaEQsMkNBQXFEO0FBRXJEOzs7Ozs7R0FNRztBQUNIO0lBUUUsMkJBQVksbUJBQXdDO1FBQUUsMEJBQXNDO2FBQXRDLFVBQXNDLEVBQXRDLHFCQUFzQyxFQUF0QyxJQUFzQztZQUF0Qyx5Q0FBc0M7O1FBQTVGLGlCQVlDO1FBbEJnQixxQkFBZ0IsR0FBc0IsRUFBRSxDQUFDO1FBd0JsRCxXQUFNLEdBQUcsVUFBQyxLQUFzQjtZQUN0QyxLQUFJLENBQUMsc0JBQXNCLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO1lBQ3hDLEtBQUksQ0FBQyw0QkFBNEIsRUFBRSxDQUFDO1FBQ3RDLENBQUMsQ0FBQztRQUVNLFdBQU0sR0FBRyxVQUFDLEtBQXNCO1lBQ3RDLElBQU0sVUFBVSxHQUFHLEtBQUksQ0FBQyxzQkFBc0IsQ0FBQyxTQUFTLENBQUMsVUFBQSxLQUFLLElBQUksT0FBQSxLQUFLLEtBQUssS0FBSyxFQUFmLENBQWUsQ0FBQyxDQUFDO1lBRW5GLElBQUksVUFBVSxHQUFHLENBQUMsQ0FBQyxFQUFFO2dCQUNuQixLQUFLLENBQUMsT0FBTyxFQUFFLENBQUM7Z0JBQ2hCLEtBQUksQ0FBQyxzQkFBc0IsQ0FBQyxNQUFNLENBQUMsVUFBVSxFQUFFLENBQUMsQ0FBQyxDQUFDO2dCQUNsRCxLQUFJLENBQUMsNEJBQTRCLEVBQUUsQ0FBQzthQUNyQztRQUNILENBQUMsQ0FBQztRQTRERjs7Ozs7V0FLRztRQUNLLG1CQUFjLEdBQUcsVUFBQyxDQUFnQjtZQUN4QyxJQUFNLEtBQUssR0FBbUMsS0FBSSxDQUFDLE1BQU0sQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUV6RSxJQUFNLE1BQU0sR0FBRyxLQUFJLENBQUMsd0JBQXdCLEVBQUUsQ0FBQztZQUMvQyxJQUFJLENBQUMsTUFBTSxJQUFJLENBQUMsTUFBTSxDQUFDLFNBQVMsSUFBSSxNQUFNLENBQUMsU0FBUyxDQUFDLFFBQVEsRUFBRSxJQUFJLE1BQU0sQ0FBQyxTQUFTLENBQUMsVUFBVSxFQUFFLEVBQUU7Z0JBQ2hHLE9BQU87YUFDUjtZQUVELElBQUksSUFBQSx3QkFBVyxFQUFDLEtBQUssQ0FBQyxFQUFFO2dCQUN0QixNQUFNLENBQUMsZ0JBQWdCLENBQUMsS0FBSyxDQUFDLENBQUM7Z0JBRS9CLENBQUMsQ0FBQyxjQUFjLEVBQUUsQ0FBQztnQkFDbkIsQ0FBQyxDQUFDLGVBQWUsRUFBRSxDQUFDO2FBQ3JCO1lBQ0QsSUFBSSxJQUFBLHFCQUFRLEVBQUMsS0FBSyxDQUFDLEVBQUU7Z0JBQ25CLE1BQU0sQ0FBQyxZQUFZLENBQUMsS0FBSyxDQUFDLENBQUM7Z0JBRTNCLENBQUMsQ0FBQyxjQUFjLEVBQUUsQ0FBQztnQkFDbkIsQ0FBQyxDQUFDLGVBQWUsRUFBRSxDQUFDO2FBQ3JCO1FBQ0gsQ0FBQyxDQUFDO1FBcEhBLElBQUksQ0FBQyxjQUFjLEdBQUcsSUFBSSwrQkFBYyxDQUFDLG1CQUFtQixDQUFDLENBQUM7UUFFOUQsSUFBSSxDQUFDLHNCQUFzQixHQUFHLEVBQUUsQ0FBQztRQUNqQyxJQUFJLENBQUMsK0JBQStCLEdBQUcsRUFBRSxDQUFDO1FBQzFDLElBQUksQ0FBQyxlQUFlLEdBQUcsSUFBSSx5Q0FBbUIsRUFBRSxDQUFDO1FBQ2pELElBQUksQ0FBQyxnQkFBZ0Isa0JBQUksbUJBQW1CLEdBQUssZ0JBQWdCLE9BQUMsQ0FBQztRQUNuRSxJQUFJLENBQUMsTUFBTSxHQUFHLElBQUEsNkJBQW9CLEdBQUUsQ0FBQztRQUVyQyxJQUFJLENBQUMsMkNBQTJDLEVBQUUsQ0FBQztRQUNuRCxJQUFJLENBQUMscUJBQXFCLEVBQUUsQ0FBQztRQUM3QixJQUFJLENBQUMsNEJBQTRCLEVBQUUsQ0FBQztJQUN0QyxDQUFDO0lBRU8saURBQXFCLEdBQTdCO1FBQ0UsSUFBSSxDQUFDLGVBQWUsQ0FBQyxFQUFFLENBQUMsUUFBUSxFQUFFLFNBQVMsRUFBRSxJQUFJLENBQUMsY0FBYyxFQUFFLElBQUksQ0FBQyxDQUFDO0lBQzFFLENBQUM7SUFpQkQ7OztPQUdHO0lBQ0ssdUVBQTJDLEdBQW5EO1FBQUEsaUJBYUM7UUFaQyxJQUFJLENBQUMsZ0JBQWdCLENBQUMsT0FBTyxDQUFDLFVBQUEsS0FBSztZQUNqQyxJQUFNLGFBQWEsR0FBRyxjQUFNLE9BQUEsS0FBSSxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsRUFBbEIsQ0FBa0IsQ0FBQztZQUMvQyxJQUFNLGFBQWEsR0FBRyxjQUFNLE9BQUEsS0FBSSxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsRUFBbEIsQ0FBa0IsQ0FBQztZQUUvQyxLQUFLLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxTQUFTLENBQUMsYUFBYSxDQUFDLENBQUM7WUFDaEQsS0FBSyxDQUFDLFNBQVMsQ0FBQyxNQUFNLENBQUMsU0FBUyxDQUFDLGFBQWEsQ0FBQyxDQUFDO1lBRWhELEtBQUksQ0FBQywrQkFBK0IsQ0FBQyxJQUFJLENBQ3ZDLGNBQU0sT0FBQSxLQUFLLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxXQUFXLENBQUMsYUFBYSxDQUFDLEVBQWpELENBQWlELEVBQ3ZELGNBQU0sT0FBQSxLQUFLLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxXQUFXLENBQUMsYUFBYSxDQUFDLEVBQWpELENBQWlELENBQ3hELENBQUM7UUFDSixDQUFDLENBQUMsQ0FBQztJQUNMLENBQUM7SUFFTywyRUFBK0MsR0FBdkQ7UUFDRSxJQUFJLENBQUMsK0JBQStCLENBQUMsT0FBTyxDQUFDLFVBQUEsS0FBSyxJQUFJLE9BQUEsS0FBSyxFQUFFLEVBQVAsQ0FBTyxDQUFDLENBQUM7UUFDL0QsSUFBSSxDQUFDLCtCQUErQixHQUFHLEVBQUUsQ0FBQztJQUM1QyxDQUFDO0lBRUQ7OztPQUdHO0lBQ0ssd0RBQTRCLEdBQXBDOztRQUNFLElBQU0sT0FBTyxHQUFHLFVBQUMsS0FBc0IsSUFBSyxPQUFBLEtBQUssQ0FBQyxTQUFTLENBQUMsT0FBTyxFQUFFLEVBQXpCLENBQXlCLENBQUM7UUFDdEUsSUFBTSxhQUFhLEdBQUcsTUFBQSxJQUFJLENBQUMsZ0JBQWdCLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxtQ0FBSSxJQUFJLENBQUMsZ0JBQWdCLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFFdEYsSUFBSSxhQUFhLEVBQUU7WUFDakIsSUFBSSxDQUFDLHNCQUFzQixDQUFDLElBQUksQ0FBQyxhQUFhLENBQUMsQ0FBQztZQUNoRCxJQUFJLENBQUMsNEJBQTRCLEVBQUUsQ0FBQztTQUNyQztJQUNILENBQUM7SUFFRDs7T0FFRztJQUNLLHdEQUE0QixHQUFwQztRQUFBLGlCQVFDO1FBUEMsSUFBSSxDQUFDLHNCQUFzQixDQUFDLE9BQU8sQ0FBQyxVQUFDLEtBQUssRUFBRSxHQUFHO1lBQzdDLElBQUksR0FBRyxHQUFHLEtBQUksQ0FBQyxzQkFBc0IsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxFQUFFO2dCQUNoRCxLQUFLLENBQUMsT0FBTyxFQUFFLENBQUM7YUFDakI7aUJBQU07Z0JBQ0wsS0FBSyxDQUFDLE1BQU0sRUFBRSxDQUFDO2FBQ2hCO1FBQ0gsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDO0lBRUQ7O09BRUc7SUFDSSxvREFBd0IsR0FBL0I7UUFDRSxPQUFPLElBQUksQ0FBQyxzQkFBc0IsQ0FBQyxJQUFJLENBQUMsc0JBQXNCLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQyxDQUFDO0lBQzdFLENBQUM7SUE4QkQ7Ozs7T0FJRztJQUNJLG1DQUFPLEdBQWQ7UUFDRSxJQUFJLENBQUMsK0NBQStDLEVBQUUsQ0FBQztRQUN2RCxJQUFJLENBQUMsZUFBZSxDQUFDLE9BQU8sRUFBRSxDQUFDO1FBQy9CLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxPQUFPLENBQUMsVUFBQSxLQUFLLElBQUksT0FBQSxLQUFLLENBQUMsT0FBTyxFQUFFLEVBQWYsQ0FBZSxDQUFDLENBQUM7UUFDeEQsSUFBSSxDQUFDLGNBQWMsQ0FBQyxPQUFPLEVBQUUsQ0FBQztJQUNoQyxDQUFDO0lBQ0gsd0JBQUM7QUFBRCxDQTFJQSxBQTBJQyxJQUFBO0FBMUlZLDhDQUFpQjtBQTRJOUIsU0FBUyxVQUFVLENBQUMsS0FBb0I7SUFDdEMsT0FBTyxLQUFLLENBQUMsT0FBTyxDQUFDO0FBQ3ZCLENBQUM7Ozs7OztBQzdKRCxxREFBb0Q7QUFDcEQsNkRBQTREO0FBQzVELHFEQUFvRDtBQUNwRCxpREFBZ0Q7QUFDaEQsaUNBQTRDO0FBRTVDLFNBQWdCLGVBQWUsQ0FBQyxTQUE2QjtJQUMzRCxPQUFPLFNBQVMsWUFBWSw2QkFBYSxDQUFDO0FBQzVDLENBQUM7QUFGRCwwQ0FFQztBQUVELFNBQWdCLFdBQVcsQ0FBQyxHQUFZO0lBQ3RDLE9BQU8sR0FBRyxLQUFLLElBQUksSUFBSSxHQUFHLEtBQUssU0FBUyxJQUFJLEdBQUcsWUFBWSxxQkFBUyxDQUFDO0FBQ3ZFLENBQUM7QUFGRCxrQ0FFQztBQUVELFNBQWdCLFdBQVcsQ0FBQyxHQUFZO0lBQ3RDLE9BQU8sR0FBRyxLQUFLLElBQUksSUFBSSxHQUFHLEtBQUssU0FBUyxJQUFJLEdBQUcsWUFBWSxxQkFBUyxDQUFDO0FBQ3ZFLENBQUM7QUFGRCxrQ0FFQztBQUVELFNBQWdCLFNBQVMsQ0FBQyxHQUFZO0lBQ3BDLE9BQU8sR0FBRyxZQUFZLGlCQUFPLENBQUM7QUFDaEMsQ0FBQztBQUZELDhCQUVDO0FBRUQsU0FBZ0IsV0FBVyxDQUFDLFNBQWtCO0lBQzVDLE9BQU8sT0FBTyxTQUFTLEtBQUssUUFBUSxJQUFJLE1BQU0sQ0FBQyxNQUFNLENBQVMsaUJBQVMsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxTQUFTLENBQUMsQ0FBQztBQUMvRixDQUFDO0FBRkQsa0NBRUM7QUFFRCxTQUFnQixRQUFRLENBQUMsTUFBZTtJQUN0QyxPQUFPLE9BQU8sTUFBTSxLQUFLLFFBQVEsSUFBSSxNQUFNLENBQUMsTUFBTSxDQUFTLGNBQU0sQ0FBQyxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUMsQ0FBQztBQUN0RixDQUFDO0FBRkQsNEJBRUM7Ozs7OztBQ3JCRCxJQUFZLFNBS1g7QUFMRCxXQUFZLFNBQVM7SUFDbkIsc0JBQVMsQ0FBQTtJQUNULDBCQUFhLENBQUE7SUFDYiwwQkFBYSxDQUFBO0lBQ2IsNEJBQWUsQ0FBQTtBQUNqQixDQUFDLEVBTFcsU0FBUyxHQUFULGlCQUFTLEtBQVQsaUJBQVMsUUFLcEI7QUFFRCxJQUFZLE1BR1g7QUFIRCxXQUFZLE1BQU07SUFDaEIsMkJBQWlCLENBQUE7SUFDakIsdUJBQWEsQ0FBQTtBQUNmLENBQUMsRUFIVyxNQUFNLEdBQU4sY0FBTSxLQUFOLGNBQU0sUUFHakI7Ozs7OztBQ2ZEOztHQUVHO0FBQ0gsSUFBaUIsWUFBWSxDQWtGNUI7QUFsRkQsV0FBaUIsWUFBWTtJQUM1QixJQUFJLGlCQUEwQixDQUFDO0lBRTlCLFNBQWdCLHFCQUFxQixDQUFDLFFBQWtCO1FBQ3RELGlCQUFpQixHQUFHLFFBQVEsQ0FBQyxpQkFBaUIsQ0FBQztJQUNqRCxDQUFDO0lBRmUsa0NBQXFCLHdCQUVwQyxDQUFBO0lBRUQsU0FBUyxxQkFBcUI7UUFDNUIsSUFBSTtZQUNGLE9BQU8sQ0FDTCxDQUFDLGlCQUFpQjtnQkFDbEIsTUFBTSxDQUFDLFlBQVk7Z0JBQ25CLE9BQU8sWUFBWSxDQUFDLE9BQU8sS0FBSyxVQUFVO2dCQUMxQyxPQUFPLFlBQVksQ0FBQyxPQUFPLEtBQUssVUFBVSxDQUMzQyxDQUFDO1NBQ0g7UUFBQyxPQUFPLENBQUMsRUFBRTtZQUNWLE9BQU8sS0FBSyxDQUFDO1NBQ2Q7SUFDSCxDQUFDO0lBRUQ7Ozs7T0FJRztJQUNILFNBQWdCLE9BQU8sQ0FBQyxHQUFXLEVBQUUsSUFBWTtRQUMvQyxJQUFJLHFCQUFxQixFQUFFLEVBQUU7WUFDM0IsSUFBSTtnQkFDRixNQUFNLENBQUMsWUFBWSxDQUFDLE9BQU8sQ0FBQyxHQUFHLEVBQUUsSUFBSSxDQUFDLENBQUM7YUFDeEM7WUFBQyxPQUFPLENBQUMsRUFBRTtnQkFDVixPQUFPLENBQUMsS0FBSyxDQUFDLHFDQUE4QixHQUFHLENBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQzthQUN2RDtTQUNGO0lBQ0gsQ0FBQztJQVJlLG9CQUFPLFVBUXRCLENBQUE7SUFFRDs7OztPQUlHO0lBQ0gsU0FBZ0IsT0FBTyxDQUFDLEdBQVc7UUFDakMsSUFBSSxxQkFBcUIsRUFBRSxFQUFFO1lBQzNCLElBQUk7Z0JBQ0YsT0FBTyxNQUFNLENBQUMsWUFBWSxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsQ0FBQzthQUN6QztZQUFDLE9BQU8sQ0FBQyxFQUFFO2dCQUNWLE9BQU8sQ0FBQyxLQUFLLENBQUMscUNBQThCLEdBQUcsQ0FBRSxFQUFFLENBQUMsQ0FBQyxDQUFDO2FBQ3ZEO1NBQ0Y7UUFFRCxPQUFPLElBQUksQ0FBQztJQUNkLENBQUM7SUFWZSxvQkFBTyxVQVV0QixDQUFBO0lBRUQ7Ozs7Ozs7T0FPRztJQUNILFNBQWdCLFNBQVMsQ0FBSSxHQUFXLEVBQUUsSUFBTztRQUMvQyxJQUFJLElBQUksR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQ2hDLE9BQU8sQ0FBQyxHQUFHLEVBQUUsSUFBSSxDQUFDLENBQUM7SUFDckIsQ0FBQztJQUhlLHNCQUFTLFlBR3hCLENBQUE7SUFFRDs7Ozs7OztPQU9HO0lBQ0gsU0FBZ0IsU0FBUyxDQUFJLEdBQVc7UUFDdEMsSUFBSSxJQUFJLEdBQUcsT0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBRXhCLElBQUksSUFBSSxFQUFFO1lBQ1IsSUFBSSxNQUFNLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQztZQUM5QixPQUFVLE1BQU0sQ0FBQztTQUNsQjtRQUNELE9BQU8sSUFBSSxDQUFDO0lBQ2QsQ0FBQztJQVJlLHNCQUFTLFlBUXhCLENBQUE7QUFDSCxDQUFDLEVBbEZnQixZQUFZLEdBQVosb0JBQVksS0FBWixvQkFBWSxRQWtGNUI7Ozs7OztBQ3RGRCw0Q0FBMkM7QUFFM0M7O0dBRUc7QUFDSCxJQUFpQixXQUFXLENBd00zQjtBQXhNRCxXQUFpQixXQUFXO0lBRWYseUJBQWEsR0FBVyxVQUFVLENBQUM7SUFDbkMsdUJBQVcsR0FBVyxPQUFPLENBQUM7SUFFekM7Ozs7OztPQU1HO0lBQ0gsU0FBZ0IsYUFBYSxDQUFDLFlBQW9CLEVBQUUsTUFBOEI7UUFBOUIsdUJBQUEsRUFBQSxTQUFpQix5QkFBYTtRQUNoRixJQUFJLFVBQVUsR0FBRyxZQUFZLEdBQUcsQ0FBQyxDQUFDO1FBRWxDLElBQUksVUFBVSxFQUFFO1lBQ2QseUVBQXlFO1lBQ3pFLDZFQUE2RTtZQUM3RSxZQUFZLEdBQUcsQ0FBQyxZQUFZLENBQUM7U0FDOUI7UUFFRCxpQ0FBaUM7UUFDakMsSUFBSSxLQUFLLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxZQUFZLEdBQUcsSUFBSSxDQUFDLENBQUM7UUFDNUMsSUFBSSxPQUFPLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxZQUFZLEdBQUcsRUFBRSxDQUFDLEdBQUcsS0FBSyxHQUFHLEVBQUUsQ0FBQztRQUN6RCxJQUFJLE9BQU8sR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLFlBQVksQ0FBQyxHQUFHLEVBQUUsQ0FBQztRQUU1QyxPQUFPLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxHQUFHLE1BQU07YUFDbEMsT0FBTyxDQUFDLElBQUksRUFBRSxnQkFBZ0IsQ0FBQyxLQUFLLEVBQUUsQ0FBQyxDQUFDLENBQUM7YUFDekMsT0FBTyxDQUFDLElBQUksRUFBRSxnQkFBZ0IsQ0FBQyxPQUFPLEVBQUUsQ0FBQyxDQUFDLENBQUM7YUFDM0MsT0FBTyxDQUFDLElBQUksRUFBRSxnQkFBZ0IsQ0FBQyxPQUFPLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUNuRCxDQUFDO0lBbEJlLHlCQUFhLGdCQWtCNUIsQ0FBQTtJQUVELFNBQWdCLGFBQWEsQ0FBQyxZQUFvQjtRQUNoRCxJQUFNLFVBQVUsR0FBRyxZQUFZLEdBQUcsQ0FBQyxDQUFDO1FBRXBDLElBQUksVUFBVSxFQUFFO1lBQ2QseUVBQXlFO1lBQ3pFLDZFQUE2RTtZQUM3RSxZQUFZLEdBQUcsQ0FBQyxZQUFZLENBQUM7U0FDOUI7UUFFRCxpQ0FBaUM7UUFDakMsSUFBTSxLQUFLLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxZQUFZLEdBQUcsSUFBSSxDQUFDLENBQUM7UUFDOUMsSUFBTSxPQUFPLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxZQUFZLEdBQUcsRUFBRSxDQUFDLEdBQUcsS0FBSyxHQUFHLEVBQUUsQ0FBQztRQUMzRCxJQUFNLE9BQU8sR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLFlBQVksQ0FBQyxHQUFHLEVBQUUsQ0FBQztRQUU5QyxPQUFPLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQztZQUM5QixDQUFDLEtBQUssS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLFVBQUcsZ0JBQWdCLENBQUMsS0FBSyxFQUFFLENBQUMsQ0FBQyxjQUFJLFdBQUksQ0FBQyxtQkFBbUIsQ0FBQyxXQUFJLENBQUMsWUFBWSxDQUFDLHFCQUFxQixDQUFDLENBQUMsTUFBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUM7WUFDM0gsQ0FBQyxPQUFPLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxVQUFHLGdCQUFnQixDQUFDLE9BQU8sRUFBRSxDQUFDLENBQUMsY0FBSSxXQUFJLENBQUMsbUJBQW1CLENBQUMsV0FBSSxDQUFDLFlBQVksQ0FBQyx1QkFBdUIsQ0FBQyxDQUFDLE1BQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDO1lBQ2pJLFVBQUcsZ0JBQWdCLENBQUMsT0FBTyxFQUFFLENBQUMsQ0FBQyxjQUFJLFdBQUksQ0FBQyxtQkFBbUIsQ0FBQyxXQUFJLENBQUMsWUFBWSxDQUFDLHVCQUF1QixDQUFDLENBQUMsQ0FBRSxDQUFDO0lBQzVHLENBQUM7SUFsQmUseUJBQWEsZ0JBa0I1QixDQUFBO0lBRUQ7Ozs7Ozs7T0FPRztJQUNILFNBQVMsZ0JBQWdCLENBQUMsR0FBb0IsRUFBRSxNQUFjO1FBQzVELElBQUksSUFBSSxHQUFHLEdBQUcsR0FBRyxFQUFFLENBQUM7UUFDcEIsSUFBSSxPQUFPLEdBQUcsWUFBWSxDQUFDLE1BQU0sQ0FBQyxDQUFDLEVBQUUsTUFBTSxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUMzRCxPQUFPLE9BQU8sR0FBRyxJQUFJLENBQUM7SUFDeEIsQ0FBQztJQUVEOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O09BNEJHO0lBQ0gsU0FBZ0IsNEJBQTRCLENBQUMsU0FBaUIsRUFBRSxVQUFrQixFQUFFLE1BQWlCO1FBQ25HLElBQUkseUJBQXlCLEdBQUcsSUFBSSxNQUFNLENBQ3hDLGlJQUFpSSxFQUNqSSxHQUFHLENBQ0osQ0FBQztRQUVGLE9BQU8sU0FBUyxDQUFDLE9BQU8sQ0FBQyx5QkFBeUIsRUFBRSxVQUFDLFlBQVk7WUFDL0QsSUFBSSxJQUFJLEdBQUcsQ0FBQyxDQUFDO1lBQ2IsSUFBSSxZQUFZLENBQUMsT0FBTyxDQUFDLGVBQWUsQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFO2dCQUM5QyxJQUFJLFVBQVUsRUFBRTtvQkFDZCxJQUFJLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxVQUFVLEdBQUcsTUFBTSxDQUFDLGNBQWMsRUFBRSxDQUFDLENBQUM7aUJBQ3hEO3FCQUFNO29CQUNMLElBQUksR0FBRyxNQUFNLENBQUMsV0FBVyxFQUFFLEdBQUcsTUFBTSxDQUFDLGNBQWMsRUFBRSxDQUFDO2lCQUN2RDthQUNGO2lCQUFNLElBQUksWUFBWSxDQUFDLE9BQU8sQ0FBQyxZQUFZLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRTtnQkFDbEQsSUFBSSxHQUFHLE1BQU0sQ0FBQyxjQUFjLEVBQUUsQ0FBQzthQUNoQztpQkFBTSxJQUFJLFlBQVksQ0FBQyxPQUFPLENBQUMsWUFBWSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUU7Z0JBQ2xELElBQUksR0FBRyxNQUFNLENBQUMsV0FBVyxFQUFFLENBQUM7YUFDN0I7aUJBQU0sSUFBSSxZQUFZLENBQUMsT0FBTyxDQUFDLHNCQUFzQixDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsRUFBRSx3RUFBd0U7Z0JBQ3RJLElBQUksR0FBRyxDQUFDLENBQUM7Z0JBRVQsMEZBQTBGO2dCQUMxRixJQUFJLE1BQU0sQ0FBQyxHQUFHLENBQUMsZ0JBQWdCLEVBQUUsRUFBRTtvQkFDakMsSUFBTSxVQUFVLEdBQUcsVUFBQyxFQUFNLElBQUssT0FBQSxNQUFNLENBQUMsR0FBRyxDQUFDLFdBQVcsRUFBRSxDQUFDLEVBQUUsS0FBSyxFQUFFLENBQUMsRUFBRSxFQUFyQyxDQUFxQyxDQUFDO29CQUNyRSxJQUFNLGVBQWUsR0FBRyxNQUFNLENBQUMsR0FBRyxDQUFDLGdCQUFnQixFQUFFLENBQUMsR0FBRyxDQUFDLFNBQVMsQ0FBQyxVQUFVLENBQUMsQ0FBQztvQkFDaEYsSUFBTSxRQUFRLEdBQUcsTUFBTSxDQUFDLEdBQUcsQ0FBQyxnQkFBZ0IsRUFBRSxDQUFDLEdBQUc7eUJBQ2pELEtBQUssQ0FBQyxlQUFlLENBQUM7eUJBQ3RCLE1BQU0sQ0FBQyxVQUFDLEtBQUssRUFBRSxFQUFFLElBQUssT0FBQSxLQUFLLEdBQUcsQ0FBQyxFQUFFLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBRSxFQUFlLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBckQsQ0FBcUQsRUFBRSxDQUFDLENBQUMsQ0FBQztvQkFFakYsOENBQThDO29CQUM5QyxJQUFJLEdBQUcsUUFBUSxHQUFHLE1BQU0sQ0FBQyxjQUFjLEVBQUUsQ0FBQztpQkFDM0M7YUFDRjtZQUVELE9BQU8sWUFBWSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLEVBQUUsWUFBWSxDQUFDLENBQUM7UUFDdEQsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDO0lBcENlLHdDQUE0QiwrQkFvQzNDLENBQUE7SUFFRCxTQUFTLFlBQVksQ0FBQyxJQUFZLEVBQUUsTUFBYztRQUNoRCxJQUFJLDJCQUEyQixHQUFHLDBEQUEwRCxDQUFDO1FBQzdGLElBQUksa0JBQWtCLEdBQUcsOEJBQThCLENBQUM7UUFDeEQsSUFBSSxrQkFBa0IsR0FBRyxZQUFZLENBQUM7UUFFdEMsSUFBSSxDQUFDLDJCQUEyQixDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsRUFBRTtZQUM3Qyw2REFBNkQ7WUFDN0QsTUFBTSxHQUFHLElBQUksQ0FBQztTQUNmO1FBRUQsd0NBQXdDO1FBQ3hDLElBQUksYUFBYSxHQUFHLENBQUMsQ0FBQztRQUN0QixJQUFJLG9CQUFvQixHQUFHLE1BQU0sQ0FBQyxLQUFLLENBQUMsa0JBQWtCLENBQUMsQ0FBQztRQUM1RCxJQUFJLG9CQUFvQixFQUFFO1lBQ3hCLGFBQWEsR0FBRyxRQUFRLENBQUMsb0JBQW9CLENBQUMsQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7U0FDaEU7UUFFRCx5Q0FBeUM7UUFDekMsSUFBSSxnQkFBZ0IsR0FBRyxJQUFJLENBQUM7UUFDNUIsSUFBSSxvQkFBb0IsR0FBRyxNQUFNLENBQUMsS0FBSyxDQUFDLGtCQUFrQixDQUFDLENBQUM7UUFDNUQsSUFBSSxvQkFBb0IsSUFBSSxDQUFDLEtBQUssQ0FBQyxRQUFRLENBQUMsb0JBQW9CLENBQUMsQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRTtZQUNsRixnQkFBZ0IsR0FBRyxRQUFRLENBQUMsb0JBQW9CLENBQUMsQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDbEUsSUFBSSxnQkFBZ0IsR0FBRyxFQUFFLEVBQUU7Z0JBQ3pCLGdCQUFnQixHQUFHLEVBQUUsQ0FBQzthQUN2QjtTQUNGO1FBRUQsZUFBZTtRQUNmLElBQUksTUFBTSxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRTtZQUM1QixJQUFJLFVBQVUsR0FBRyxFQUFFLENBQUM7WUFFcEIsSUFBSSxnQkFBZ0IsS0FBSyxJQUFJLEVBQUU7Z0JBQzdCLHVDQUF1QztnQkFDdkMsVUFBVSxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsZ0JBQWdCLENBQUMsQ0FBQzthQUM3QztpQkFBTTtnQkFDTCxVQUFVLEdBQUcsRUFBRSxHQUFHLElBQUksQ0FBQzthQUN4QjtZQUVELHNCQUFzQjtZQUN0QixJQUFJLFVBQVUsQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUU7Z0JBQ2hDLE9BQU8sZ0JBQWdCLENBQUMsVUFBVSxFQUFFLFVBQVUsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxhQUFhLEdBQUcsVUFBVSxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUM7YUFDcEc7aUJBQU07Z0JBQ0wsT0FBTyxnQkFBZ0IsQ0FBQyxVQUFVLEVBQUUsYUFBYSxDQUFDLENBQUM7YUFDcEQ7U0FFRjtRQUNELGNBQWM7YUFDVCxJQUFJLE1BQU0sQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUU7WUFDakMsSUFBSSxZQUFZLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztZQUVuQyxrQkFBa0I7WUFDbEIsSUFBSSxNQUFNLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFO2dCQUM3QixPQUFPLGFBQWEsQ0FBQyxZQUFZLENBQUMsQ0FBQzthQUNwQztZQUNELGVBQWU7aUJBQ1Y7Z0JBQ0gsSUFBSSxPQUFPLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxZQUFZLEdBQUcsRUFBRSxDQUFDLENBQUM7Z0JBQzVDLElBQUksT0FBTyxHQUFHLFlBQVksR0FBRyxFQUFFLENBQUM7Z0JBRWhDLE9BQU8sZ0JBQWdCLENBQUMsT0FBTyxFQUFFLENBQUMsQ0FBQyxHQUFHLEdBQUcsR0FBRyxnQkFBZ0IsQ0FBQyxPQUFPLEVBQUUsQ0FBQyxDQUFDLENBQUM7YUFDMUU7U0FDRjtRQUNELGlCQUFpQjthQUNaO1lBQ0gsT0FBTyxnQkFBZ0IsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxFQUFFLGFBQWEsQ0FBQyxDQUFDO1NBQ3pEO0lBQ0gsQ0FBQztBQUNILENBQUMsRUF4TWdCLFdBQVcsR0FBWCxtQkFBVyxLQUFYLG1CQUFXLFFBd00zQjs7Ozs7Ozs7Ozs7Ozs7O0FDM01ELDRDQUEyQztBQUUzQzs7Ozs7O0dBTUc7QUFDSDtJQVFFLCtCQUFZLE1BQWlCLEVBQUUsT0FBeUMsRUFBRSxTQUE0QjtRQUF0RyxpQkFRQztRQTRCTyxnQkFBVyxHQUFHLFVBQUMsS0FBb0I7WUFDekMsSUFBTSxRQUFRLEdBQUcsS0FBSyxDQUFDLFFBQVEsQ0FBQztZQUNoQyxJQUFJLENBQUMsS0FBSSxDQUFDLFdBQVcsQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFDLEVBQUUsQ0FBQyxFQUFFO2dCQUMxQyxLQUFJLENBQUMsV0FBVyxDQUFDLE9BQU8sQ0FBQyxRQUFRLENBQUMsRUFBRSxFQUFFLFFBQVEsQ0FBQyxLQUFLLENBQUMsQ0FBQzthQUN2RDtRQUNILENBQUMsQ0FBQztRQUVNLG1CQUFjLEdBQUcsVUFBQyxLQUFvQjtZQUM1QyxJQUFNLFFBQVEsR0FBRyxLQUFLLENBQUMsUUFBUSxDQUFDO1lBQ2hDLElBQUksS0FBSSxDQUFDLFdBQVcsQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFDLEVBQUUsQ0FBQyxFQUFFO2dCQUN6QyxLQUFJLENBQUMsV0FBVyxDQUFDLFVBQVUsQ0FBQyxRQUFRLENBQUMsRUFBRSxDQUFDLENBQUM7YUFDMUM7UUFDSCxDQUFDLENBQUM7UUFFTSwwQkFBcUIsR0FBRztZQUM5QixJQUFJLENBQUMsS0FBSSxDQUFDLE1BQU0sQ0FBQyxTQUFTLEVBQUU7Z0JBQzFCLG9DQUFvQztnQkFDcEMsT0FBTzthQUNSO1lBRUQsSUFBSSxlQUFlLEdBQUcsS0FBSSxDQUFDLE1BQU0sQ0FBQyxTQUFTLENBQUMsSUFBSSxFQUFFLENBQUMsTUFBTSxDQUFDLFVBQUMsUUFBUSxJQUFLLE9BQUEsUUFBUSxDQUFDLE9BQU8sRUFBaEIsQ0FBZ0IsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDO1lBQ2hHLEtBQUksQ0FBQyxXQUFXLENBQUMsVUFBVSxDQUFDLGVBQWUsQ0FBQyxDQUFDLENBQUMsZUFBZSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMscUJBQXFCLENBQUMsaUJBQWlCLENBQUMsQ0FBQztRQUM5RyxDQUFDLENBQUM7UUFFTSxtQkFBYyxHQUFHO1lBQ3ZCLEtBQUksQ0FBQyxXQUFXLENBQUMsVUFBVSxFQUFFLENBQUM7UUFDaEMsQ0FBQyxDQUFBO1FBRU8scUJBQWdCLEdBQUc7WUFDekIsSUFBSSxDQUFDLEtBQUksQ0FBQyxNQUFNLENBQUMsU0FBUyxFQUFFO2dCQUMxQixvQ0FBb0M7Z0JBQ3BDLE9BQU87YUFDUjtZQUVELElBQU0sV0FBVyxHQUFhO2dCQUM1QixHQUFHLEVBQUUscUJBQXFCLENBQUMsaUJBQWlCO2dCQUM1QyxLQUFLLEVBQUUsV0FBSSxDQUFDLFlBQVksQ0FBQyxLQUFLLENBQUM7YUFDaEMsQ0FBQztZQUVGLElBQU0sU0FBUyxHQUFHLEtBQUksQ0FBQyxNQUFNLENBQUMsU0FBUyxDQUFDLElBQUksRUFBRSxDQUFDO1lBQy9DLElBQU0sa0JBQWtCLEdBQUcsVUFBQyxRQUF1QjtnQkFDakQsT0FBTyxFQUFFLEdBQUcsRUFBRSxRQUFRLENBQUMsRUFBRSxFQUFFLEtBQUssRUFBRSxRQUFRLENBQUMsS0FBSyxFQUFFLENBQUM7WUFDckQsQ0FBQyxDQUFDO1lBRUYsS0FBSSxDQUFDLFdBQVcsQ0FBQyxnQkFBZ0I7Z0JBQy9CLFdBQVc7ZUFBSyxTQUFTLENBQUMsR0FBRyxDQUFDLGtCQUFrQixDQUFDLFFBQ2pELENBQUM7WUFDSCxLQUFJLENBQUMscUJBQXFCLEVBQUUsQ0FBQztRQUMvQixDQUFDLENBQUM7UUFuRkEsSUFBSSxDQUFDLE1BQU0sR0FBRyxNQUFNLENBQUM7UUFDckIsSUFBSSxDQUFDLFdBQVcsR0FBRyxPQUFPLENBQUM7UUFDM0IsSUFBSSxDQUFDLFNBQVMsR0FBRyxTQUFTLENBQUM7UUFFM0IsSUFBSSxDQUFDLGtCQUFrQixFQUFFLENBQUM7UUFDMUIsSUFBSSxDQUFDLGdCQUFnQixFQUFFLENBQUM7UUFDeEIsSUFBSSxDQUFDLGdCQUFnQixFQUFFLENBQUM7SUFDMUIsQ0FBQztJQUVPLGtEQUFrQixHQUExQjtRQUFBLGlCQVlDO1FBWEMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxjQUFjLENBQUMsU0FBUyxDQUFDLFVBQUMsQ0FBQyxFQUFFLEtBQWE7WUFDekQsK0RBQStEO1lBQy9ELElBQUksS0FBSyxLQUFLLHFCQUFxQixDQUFDLGlCQUFpQixFQUFFO2dCQUNyRCxJQUFNLGVBQWUsR0FBRyxLQUFJLENBQUMsTUFBTSxDQUFDLFNBQVMsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxNQUFNLENBQUMsVUFBQyxRQUFRLElBQUssT0FBQSxRQUFRLENBQUMsT0FBTyxFQUFoQixDQUFnQixDQUFDLENBQUMsR0FBRyxFQUFFLENBQUM7Z0JBQ2xHLElBQUksZUFBZSxFQUFFO29CQUNuQixLQUFJLENBQUMsTUFBTSxDQUFDLFNBQVMsQ0FBQyxPQUFPLENBQUMsZUFBZSxDQUFDLEVBQUUsQ0FBQyxDQUFDO2lCQUNuRDthQUNGO2lCQUFNO2dCQUNMLEtBQUksQ0FBQyxNQUFNLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxLQUFLLEVBQUUsSUFBSSxDQUFDLENBQUM7YUFDM0M7UUFDSCxDQUFDLENBQUMsQ0FBQztJQUNMLENBQUM7SUFFTyxnREFBZ0IsR0FBeEI7UUFDRSxJQUFJLENBQUMsTUFBTSxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxXQUFXLENBQUMsYUFBYSxFQUFFLElBQUksQ0FBQyxXQUFXLENBQUMsQ0FBQztRQUNoRixJQUFJLENBQUMsTUFBTSxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxXQUFXLENBQUMsZUFBZSxFQUFFLElBQUksQ0FBQyxxQkFBcUIsQ0FBQyxDQUFDO1FBQzVGLElBQUksQ0FBQyxNQUFNLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLFdBQVcsQ0FBQyxnQkFBZ0IsRUFBRSxJQUFJLENBQUMscUJBQXFCLENBQUMsQ0FBQztRQUM3RixJQUFJLENBQUMsTUFBTSxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxXQUFXLENBQUMsZUFBZSxFQUFFLElBQUksQ0FBQyxjQUFjLENBQUMsQ0FBQztRQUNyRix5Q0FBeUM7UUFDekMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsV0FBVyxDQUFDLGNBQWMsRUFBRSxJQUFJLENBQUMsY0FBYyxDQUFDLENBQUM7UUFDcEYsMkRBQTJEO1FBQzNELElBQUksQ0FBQyxNQUFNLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLFdBQVcsQ0FBQyxjQUFjLEVBQUUsSUFBSSxDQUFDLGdCQUFnQixDQUFDLENBQUM7UUFDdEYsSUFBSSxDQUFDLFNBQVMsQ0FBQyxTQUFTLEVBQUUsQ0FBQyxNQUFNLENBQUMsU0FBUyxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsZ0JBQWdCLENBQUMsQ0FBQztJQUMvRSxDQUFDO0lBeENjLHVDQUFpQixHQUFXLE1BQVgsQUFBaUIsQ0FBQztJQTJGcEQsNEJBQUM7Q0E3RkQsQUE2RkMsSUFBQTs7Ozs7O0FDekdELDJFQUEyRTtBQUMzRTs7R0FFRztBQUNIO0lBY0U7Ozs7O09BS0c7SUFDSCxpQkFBWSxLQUFhLEVBQUUsUUFBb0IsRUFBRSxNQUF1QjtRQUF2Qix1QkFBQSxFQUFBLGNBQXVCO1FBQ3RFLElBQUksQ0FBQyxLQUFLLEdBQUcsS0FBSyxDQUFDO1FBQ25CLElBQUksQ0FBQyxRQUFRLEdBQUcsUUFBUSxDQUFDO1FBQ3pCLElBQUksQ0FBQyxNQUFNLEdBQUcsTUFBTSxDQUFDO1FBQ3JCLElBQUksQ0FBQyxtQkFBbUIsR0FBRyxDQUFDLENBQUM7UUFDN0IsSUFBSSxDQUFDLE1BQU0sR0FBRyxLQUFLLENBQUM7UUFDcEIsSUFBSSxDQUFDLFNBQVMsR0FBRyxLQUFLLENBQUM7SUFDekIsQ0FBQztJQUVEOzs7O09BSUc7SUFDSCx1QkFBSyxHQUFMO1FBQ0UsSUFBSSxDQUFDLEtBQUssRUFBRSxDQUFDO1FBQ2IsT0FBTyxJQUFJLENBQUM7SUFDZCxDQUFDO0lBRUQ7O09BRUc7SUFDSCx1QkFBSyxHQUFMO1FBQ0UsSUFBSSxDQUFDLGFBQWEsRUFBRSxDQUFDO0lBQ3ZCLENBQUM7SUFFRDs7O09BR0c7SUFDSCx5QkFBTyxHQUFQO1FBQ0UsSUFBSSxDQUFDLFNBQVMsR0FBRyxJQUFJLENBQUM7UUFDdEIsSUFBSSxDQUFDLGFBQWEsRUFBRSxDQUFDO1FBRXJCLE9BQU8sSUFBSSxDQUFDO0lBQ2QsQ0FBQztJQUVEOzs7T0FHRztJQUNILHdCQUFNLEdBQU4sVUFBTyxLQUFjO1FBQ25CLElBQUksQ0FBQyxTQUFTLEdBQUcsS0FBSyxDQUFDO1FBRXZCLElBQUksS0FBSyxFQUFFO1lBQ1QsSUFBSSxDQUFDLEtBQUssRUFBRSxDQUFDO1NBQ2Q7UUFFRCxPQUFPLElBQUksQ0FBQztJQUNkLENBQUM7SUFFRDs7O09BR0c7SUFDSCx1QkFBSyxHQUFMO1FBQUEsaUJBZ0JDO1FBZkMsSUFBSSxDQUFDLGFBQWEsRUFBRSxDQUFDO1FBRXJCLElBQUksSUFBSSxDQUFDLFNBQVMsRUFBRTtZQUNsQixPQUFPO1NBQ1I7UUFFRCxJQUFJLElBQUksQ0FBQyxNQUFNLEVBQUU7WUFDZixJQUFJLENBQUMsbUJBQW1CLEdBQUcsV0FBVyxDQUFDLElBQUksQ0FBQyxRQUFRLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO1NBQ25FO2FBQU07WUFDTCxJQUFJLENBQUMsbUJBQW1CLEdBQUcsVUFBVSxDQUFDO2dCQUNwQyxLQUFJLENBQUMsTUFBTSxHQUFHLEtBQUssQ0FBQztnQkFDcEIsS0FBSSxDQUFDLFFBQVEsRUFBRSxDQUFDO1lBQ2xCLENBQUMsRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7U0FDaEI7UUFDRCxJQUFJLENBQUMsTUFBTSxHQUFHLElBQUksQ0FBQztJQUNyQixDQUFDO0lBRUQsMEJBQVEsR0FBUjtRQUNFLE9BQU8sSUFBSSxDQUFDLE1BQU0sQ0FBQztJQUNyQixDQUFDO0lBRU8sK0JBQWEsR0FBckI7UUFDRSxJQUFJLElBQUksQ0FBQyxNQUFNLEVBQUU7WUFDZixhQUFhLENBQUMsSUFBSSxDQUFDLG1CQUFtQixDQUFDLENBQUM7U0FDekM7YUFBTTtZQUNMLFlBQVksQ0FBQyxJQUFJLENBQUMsbUJBQW1CLENBQUMsQ0FBQztTQUN4QztRQUNELElBQUksQ0FBQyxNQUFNLEdBQUcsS0FBSyxDQUFDO0lBQ3RCLENBQUM7SUFDSCxjQUFDO0FBQUQsQ0F6R0EsQUF5R0MsSUFBQTtBQXpHWSwwQkFBTzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDSnBCLGdFQUErRDtBQUMvRCxvRUFBbUU7QUFDbkUsb0VBQW1FO0FBQ25FLDRFQUEyRTtBQUMzRSw4RUFBNkU7QUFDN0Usd0VBQXVFO0FBQ3ZFLDRFQUEyRTtBQUMzRSw0REFBMkQ7QUFDM0QscUdBQW9HO0FBQ3BHLHdGQUF1RjtBQUN2Riw2RkFBNEY7QUFDNUYsb0VBQW1FO0FBQ25FLHNEQUFxRDtBQUNyRCxvREFBb0U7QUFDcEUsb0VBQTBGO0FBQzFGLGdEQUErQztBQUMvQywwREFBeUQ7QUFDekQsMEVBQXlFO0FBQ3pFLHNFQUFxRTtBQUNyRSwwREFBeUQ7QUFDekQsOENBQTZDO0FBQzdDLDBGQUF5RjtBQUN6Rix3RUFBdUU7QUFDdkUsa0VBQWlFO0FBQ2pFLDhEQUE2RDtBQUM3RCwwRUFBeUU7QUFDekUsOEVBQTZFO0FBQzdFLHdEQUF1RDtBQUN2RCxrRUFBaUU7QUFDakUsNEVBQTJFO0FBQzNFLG9FQUFtRTtBQUNuRSxrREFBaUQ7QUFDakQsNEVBQTJFO0FBQzNFLG9EQUFtRDtBQUNuRCx3RUFBdUU7QUFDdkUsOERBQTZEO0FBQzdELDhEQUE2RDtBQUM3RCwwREFBeUQ7QUFDekQsd0RBQXVEO0FBQ3ZELDREQUFpRjtBQUNqRiw2Q0FBNEM7QUFDNUMsNENBQTJDO0FBQzNDLGdFQUErRDtBQUMvRCx5Q0FBNEQ7QUFHNUQsNENBQTJDO0FBQzNDLGdFQUErRDtBQUMvRCxvRUFBbUU7QUFDbkUsMkVBQTBFO0FBQzFFLCtFQUE4RTtBQUM5RSwrRUFBK0Y7QUFDL0Ysa0VBQWlFO0FBRWpFLElBQWlCLFNBQVMsQ0FrZ0J6QjtBQWxnQkQsV0FBaUIsU0FBUztJQUN4QixTQUFnQixjQUFjLENBQUMsTUFBaUIsRUFBRSxNQUFxQjtRQUFyQix1QkFBQSxFQUFBLFdBQXFCO1FBQ3JFLE9BQU8sU0FBUyxDQUFDLGVBQWUsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLENBQUM7SUFDbkQsQ0FBQztJQUZlLHdCQUFjLGlCQUU3QixDQUFBO0lBRUQsU0FBZ0IseUJBQXlCLENBQUMsTUFBaUIsRUFBRSxNQUFxQjtRQUFyQix1QkFBQSxFQUFBLFdBQXFCO1FBQ2hGLE9BQU8sU0FBUyxDQUFDLHdCQUF3QixDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsQ0FBQztJQUM1RCxDQUFDO0lBRmUsbUNBQXlCLDRCQUV4QyxDQUFBO0lBRUQsU0FBZ0IsMEJBQTBCLENBQUMsTUFBaUIsRUFBRSxNQUFxQjtRQUFyQix1QkFBQSxFQUFBLFdBQXFCO1FBQ2pGLE9BQU8sU0FBUyxDQUFDLHlCQUF5QixDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsQ0FBQztJQUM3RCxDQUFDO0lBRmUsb0NBQTBCLDZCQUV6QyxDQUFBO0lBRUQsU0FBZ0IsZ0JBQWdCLENBQUMsTUFBaUIsRUFBRSxNQUFxQjtRQUFyQix1QkFBQSxFQUFBLFdBQXFCO1FBQ3ZFLE9BQU8sU0FBUyxDQUFDLGVBQWUsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLENBQUM7SUFDbkQsQ0FBQztJQUZlLDBCQUFnQixtQkFFL0IsQ0FBQTtJQUVELFNBQWdCLFFBQVEsQ0FBQyxNQUFnQjtRQUN2QyxJQUFJLGVBQWUsR0FBRyxJQUFJLGlDQUFlLEVBQUUsQ0FBQztRQUU1QyxJQUFJLHFCQUF3QyxDQUFDO1FBRTdDLElBQU0sVUFBVSxHQUFpQztZQUMvQyxJQUFJLHFDQUFpQixDQUFDLFdBQUksQ0FBQyxZQUFZLENBQUMsd0JBQXdCLENBQUMsRUFBRSxJQUFJLDZDQUFxQixFQUFFLENBQUM7WUFDL0YsSUFBSSxxQ0FBaUIsQ0FBQyxXQUFJLENBQUMsWUFBWSxDQUFDLE9BQU8sQ0FBQyxFQUFFLElBQUksK0NBQXNCLEVBQUUsQ0FBQztZQUMvRSxJQUFJLHFDQUFpQixDQUFDLFdBQUksQ0FBQyxZQUFZLENBQUMsc0JBQXNCLENBQUMsRUFBRSxJQUFJLHlDQUFtQixFQUFFLENBQUM7WUFDM0YsSUFBSSxxQ0FBaUIsQ0FBQyxXQUFJLENBQUMsWUFBWSxDQUFDLHdCQUF3QixDQUFDLEVBQUUsSUFBSSw2Q0FBcUIsRUFBRSxDQUFDO1NBQ2hHLENBQUM7UUFFRixJQUFJLE1BQU0sQ0FBQyxPQUFPLEVBQUU7WUFDbEIsSUFBTSxnQkFBZ0IsR0FBRyxJQUFJLG1DQUFnQixFQUFFLENBQUM7WUFFaEQsZ0JBQWdCLENBQUMsbUJBQW1CLENBQUM7Z0JBQ25DLG9HQUFvRztnQkFDcEcsYUFBYSxDQUFDLGFBQWEsRUFBRSxDQUFDLEdBQUcsQ0FBQyxFQUFFLEtBQUssRUFBRSxFQUFFLEVBQUUsTUFBTSxFQUFFLEVBQUUsRUFBRSxDQUFDLENBQUM7WUFDL0QsQ0FBQyxDQUFDLENBQUM7WUFFSCxVQUFVLENBQUMsT0FBTyxDQUFDLGdCQUFnQixDQUFDLENBQUM7U0FDdEM7UUFFRCxxQkFBcUIsR0FBRyxJQUFJLHFDQUFpQixDQUFDO1lBQzVDLFVBQVUsWUFBQTtTQUNYLENBQUMsQ0FBQztRQUVILElBQUksYUFBYSxHQUFHLElBQUksNkJBQWEsQ0FBQztZQUNwQyxVQUFVLEVBQUUsQ0FBQyxxQkFBcUIsQ0FBQztZQUNuQyxNQUFNLEVBQUUsSUFBSTtTQUNiLENBQUMsQ0FBQztRQUVILElBQUkseUJBQXlCLEdBQUcsSUFBSSxxREFBeUIsQ0FBQztZQUM1RCxhQUFhLEVBQUUsYUFBYTtZQUM1QixPQUFPLEVBQUUsZUFBZTtTQUN6QixDQUFDLENBQUM7UUFFSCxJQUFNLGlCQUFpQixHQUFHLElBQUkscUNBQWlCLEVBQUUsQ0FBQztRQUVsRCxJQUFJLDBCQUEwQixHQUFHLElBQUkseURBQTJCLENBQUM7WUFDL0QsVUFBVSxFQUFFLHlCQUF5QjtZQUNyQyxTQUFTLEVBQUUsYUFBYTtZQUN4QixTQUFTLEVBQUUsV0FBSSxDQUFDLFlBQVksQ0FBQyxvQkFBb0IsQ0FBQztZQUNsRCxJQUFJLEVBQUUsV0FBSSxDQUFDLFlBQVksQ0FBQyxNQUFNLENBQUM7U0FDaEMsQ0FBQyxDQUFDO1FBRUgscUJBQXFCLENBQUMsWUFBWSxDQUNoQyxJQUFJLHFDQUFpQixDQUNuQixJQUFJLDZDQUFxQixDQUFDO1lBQ3hCLElBQUksRUFBRSxXQUFJLENBQUMsWUFBWSxDQUFDLG9CQUFvQixDQUFDO1lBQzdDLE1BQU0sRUFBRSwwQkFBMEI7U0FDbkMsQ0FBQyxFQUNGLGlCQUFpQixFQUNqQjtZQUNFLElBQUksRUFBRSxTQUFTO1NBQ2hCLENBQ0YsQ0FDRixDQUFDO1FBRUYsYUFBYSxDQUFDLFlBQVksQ0FBQyx5QkFBeUIsQ0FBQyxDQUFDO1FBRXRELElBQUksVUFBVSxHQUFHLElBQUksdUJBQVUsQ0FBQztZQUM5QixVQUFVLEVBQUU7Z0JBQ1YsYUFBYTtnQkFDYixJQUFJLHFCQUFTLENBQUM7b0JBQ1osVUFBVSxFQUFFO3dCQUNWLElBQUkscUNBQWlCLENBQUM7NEJBQ3BCLGFBQWEsRUFBRSx5Q0FBcUIsQ0FBQyxXQUFXOzRCQUNoRCxrQkFBa0IsRUFBRSxJQUFJO3lCQUN6QixDQUFDO3dCQUNGLElBQUksaUJBQU8sQ0FBQyxFQUFFLEtBQUssRUFBRSxJQUFJLDJCQUFZLEVBQUUsRUFBRSxDQUFDO3dCQUMxQyxJQUFJLHFDQUFpQixDQUFDOzRCQUNwQixhQUFhLEVBQUUseUNBQXFCLENBQUMsU0FBUzs0QkFDOUMsVUFBVSxFQUFFLENBQUMsWUFBWSxDQUFDO3lCQUMzQixDQUFDO3FCQUNIO29CQUNELFVBQVUsRUFBRSxDQUFDLGdCQUFnQixDQUFDO2lCQUMvQixDQUFDO2dCQUNGLElBQUkscUJBQVMsQ0FBQztvQkFDWixVQUFVLEVBQUU7d0JBQ1YsSUFBSSwyQ0FBb0IsRUFBRTt3QkFDMUIsSUFBSSx1Q0FBa0IsRUFBRTt3QkFDeEIsSUFBSSwyQkFBWSxFQUFFO3dCQUNsQixJQUFJLGVBQU0sRUFBRTt3QkFDWixJQUFJLDJEQUE0QixFQUFFO3dCQUNsQyxJQUFJLHlDQUFtQixFQUFFO3dCQUN6QixJQUFJLG1DQUFnQixFQUFFO3dCQUN0QixJQUFJLCtCQUFjLEVBQUU7d0JBQ3BCLElBQUksMkNBQW9CLENBQUMsRUFBRSxhQUFhLEVBQUUsYUFBYSxFQUFFLENBQUM7d0JBQzFELElBQUksK0NBQXNCLEVBQUU7cUJBQzdCO29CQUNELFVBQVUsRUFBRSxDQUFDLG1CQUFtQixDQUFDO2lCQUNsQyxDQUFDO2FBQ0g7U0FDRixDQUFDLENBQUM7UUFFSCxPQUFPLElBQUkseUJBQVcsQ0FBQztZQUNyQixVQUFVLEVBQUU7Z0JBQ1YsZUFBZTtnQkFDZixJQUFJLG1DQUFnQixFQUFFO2dCQUN0QixJQUFJLDZDQUFxQixFQUFFO2dCQUMzQixJQUFJLHFDQUFpQixFQUFFO2dCQUN2QixVQUFVO2dCQUNWLElBQUksbUJBQVEsRUFBRTtnQkFDZCxJQUFJLDZDQUFxQixFQUFFO2dCQUMzQixJQUFJLHFCQUFTLEVBQUU7Z0JBQ2YsSUFBSSx5Q0FBbUIsRUFBRTthQUMxQjtZQUNELFNBQVMsRUFBRSxJQUFJO1lBQ2YseUJBQXlCLEVBQUU7Z0JBQ3pCLHlCQUFXLENBQUMsV0FBVyxDQUFDLFFBQVE7Z0JBQ2hDLHlCQUFXLENBQUMsV0FBVyxDQUFDLE1BQU07Z0JBQzlCLHlCQUFXLENBQUMsV0FBVyxDQUFDLFFBQVE7YUFDakM7U0FDRixDQUFDLENBQUM7SUFDTCxDQUFDO0lBbkhlLGtCQUFRLFdBbUh2QixDQUFBO0lBRUQsU0FBZ0IsV0FBVztRQUN6QixPQUFPLElBQUkseUJBQVcsQ0FBQztZQUNyQixVQUFVLEVBQUU7Z0JBQ1YsSUFBSSxtQ0FBZ0IsRUFBRTtnQkFDdEIsSUFBSSwrQkFBYyxFQUFFO2dCQUNwQixJQUFJLDZDQUFxQixFQUFFO2dCQUMzQixJQUFJLHFCQUFTLENBQUM7b0JBQ1osVUFBVSxFQUFFLENBQUMsSUFBSSwrQkFBYyxDQUFDLEVBQUUsSUFBSSxFQUFFLFdBQUksQ0FBQyxZQUFZLENBQUMsbUJBQW1CLENBQUMsRUFBRSxDQUFDLEVBQUUsSUFBSSwyQkFBWSxFQUFFLENBQUM7b0JBQ3RHLFFBQVEsRUFBRSxlQUFlO2lCQUMxQixDQUFDO2dCQUNGLElBQUksdUJBQVUsQ0FBQztvQkFDYixVQUFVLEVBQUU7d0JBQ1YsSUFBSSxxQkFBUyxDQUFDOzRCQUNaLFVBQVUsRUFBRTtnQ0FDVixJQUFJLDJDQUFvQixFQUFFO2dDQUMxQixJQUFJLHVDQUFrQixFQUFFO2dDQUN4QixJQUFJLDJCQUFZLEVBQUU7Z0NBQ2xCLElBQUksZUFBTSxFQUFFO2dDQUNaLElBQUksK0NBQXNCLEVBQUU7NkJBQzdCOzRCQUNELFVBQVUsRUFBRSxDQUFDLG1CQUFtQixDQUFDO3lCQUNsQyxDQUFDO3FCQUNIO2lCQUNGLENBQUM7YUFDSDtZQUNELFVBQVUsRUFBRSxDQUFDLGFBQWEsQ0FBQztZQUMzQixTQUFTLEVBQUUsSUFBSTtZQUNmLHlCQUF5QixFQUFFO2dCQUN6Qix5QkFBVyxDQUFDLFdBQVcsQ0FBQyxRQUFRO2dCQUNoQyx5QkFBVyxDQUFDLFdBQVcsQ0FBQyxNQUFNO2dCQUM5Qix5QkFBVyxDQUFDLFdBQVcsQ0FBQyxRQUFRO2FBQ2pDO1NBQ0YsQ0FBQyxDQUFDO0lBQ0wsQ0FBQztJQWpDZSxxQkFBVyxjQWlDMUIsQ0FBQTtJQUVELFNBQWdCLG1CQUFtQjtRQUNqQyxJQUFJLGVBQWUsR0FBRyxJQUFJLGlDQUFlLEVBQUUsQ0FBQztRQUU1QyxJQUFJLHFCQUFxQixHQUFHLElBQUkscUNBQWlCLENBQUM7WUFDaEQsVUFBVSxFQUFFO2dCQUNWLElBQUkscUNBQWlCLENBQUMsV0FBSSxDQUFDLFlBQVksQ0FBQyx3QkFBd0IsQ0FBQyxFQUFFLElBQUksNkNBQXFCLEVBQUUsQ0FBQztnQkFDL0YsSUFBSSxxQ0FBaUIsQ0FBQyxXQUFJLENBQUMsWUFBWSxDQUFDLE9BQU8sQ0FBQyxFQUFFLElBQUksK0NBQXNCLEVBQUUsQ0FBQztnQkFDL0UsSUFBSSxxQ0FBaUIsQ0FBQyxXQUFJLENBQUMsWUFBWSxDQUFDLHNCQUFzQixDQUFDLEVBQUUsSUFBSSx5Q0FBbUIsRUFBRSxDQUFDO2dCQUMzRixJQUFJLHFDQUFpQixDQUFDLFdBQUksQ0FBQyxZQUFZLENBQUMsd0JBQXdCLENBQUMsRUFBRSxJQUFJLDZDQUFxQixFQUFFLENBQUM7YUFDaEc7U0FDRixDQUFDLENBQUM7UUFFSCxJQUFJLGFBQWEsR0FBRyxJQUFJLDZCQUFhLENBQUM7WUFDcEMsVUFBVSxFQUFFLENBQUMscUJBQXFCLENBQUM7WUFDbkMsTUFBTSxFQUFFLElBQUk7WUFDWix1QkFBdUIsRUFBRSxLQUFLO1lBQzlCLFNBQVMsRUFBRSxDQUFDLENBQUM7U0FDZCxDQUFDLENBQUM7UUFFSCxJQUFJLHlCQUF5QixHQUFHLElBQUkscURBQXlCLENBQUM7WUFDNUQsYUFBYSxFQUFFLGFBQWE7WUFDNUIsT0FBTyxFQUFFLGVBQWU7U0FDekIsQ0FBQyxDQUFDO1FBRUgsSUFBSSwwQkFBMEIsR0FBRyxJQUFJLHlEQUEyQixDQUFDO1lBQy9ELFVBQVUsRUFBRSx5QkFBeUI7WUFDckMsU0FBUyxFQUFFLGFBQWE7WUFDeEIsU0FBUyxFQUFFLFdBQUksQ0FBQyxZQUFZLENBQUMsb0JBQW9CLENBQUM7WUFDbEQsSUFBSSxFQUFFLFdBQUksQ0FBQyxZQUFZLENBQUMsTUFBTSxDQUFDO1NBQ2hDLENBQUMsQ0FBQztRQUVILElBQU0saUJBQWlCLEdBQUcsSUFBSSxxQ0FBaUIsRUFBRSxDQUFDO1FBRWxELHFCQUFxQixDQUFDLFlBQVksQ0FDaEMsSUFBSSxxQ0FBaUIsQ0FDbkIsSUFBSSw2Q0FBcUIsQ0FBQztZQUN4QixJQUFJLEVBQUUsV0FBSSxDQUFDLFlBQVksQ0FBQyxvQkFBb0IsQ0FBQztZQUM3QyxNQUFNLEVBQUUsMEJBQTBCO1NBQ25DLENBQUMsRUFDRixpQkFBaUIsRUFDakI7WUFDRSxJQUFJLEVBQUUsU0FBUztTQUNoQixDQUNGLENBQ0YsQ0FBQztRQUVGLGFBQWEsQ0FBQyxZQUFZLENBQUMseUJBQXlCLENBQUMsQ0FBQztRQUV0RCxhQUFhLENBQUMsWUFBWSxDQUFDLElBQUkseUJBQVcsQ0FBQyxFQUFFLE1BQU0sRUFBRSxhQUFhLEVBQUUsQ0FBQyxDQUFDLENBQUM7UUFDdkUseUJBQXlCLENBQUMsWUFBWSxDQUFDLElBQUkseUJBQVcsQ0FBQyxFQUFFLE1BQU0sRUFBRSxhQUFhLEVBQUUsQ0FBQyxDQUFDLENBQUM7UUFFbkYsSUFBSSxVQUFVLEdBQUcsSUFBSSx1QkFBVSxDQUFDO1lBQzlCLFVBQVUsRUFBRTtnQkFDVixJQUFJLHFCQUFTLENBQUM7b0JBQ1osVUFBVSxFQUFFO3dCQUNWLElBQUkscUNBQWlCLENBQUM7NEJBQ3BCLGFBQWEsRUFBRSx5Q0FBcUIsQ0FBQyxXQUFXOzRCQUNoRCxrQkFBa0IsRUFBRSxJQUFJO3lCQUN6QixDQUFDO3dCQUNGLElBQUksaUJBQU8sQ0FBQyxFQUFFLEtBQUssRUFBRSxJQUFJLDJCQUFZLEVBQUUsRUFBRSxDQUFDO3dCQUMxQyxJQUFJLHFDQUFpQixDQUFDOzRCQUNwQixhQUFhLEVBQUUseUNBQXFCLENBQUMsU0FBUzs0QkFDOUMsVUFBVSxFQUFFLENBQUMsWUFBWSxDQUFDO3lCQUMzQixDQUFDO3FCQUNIO29CQUNELFVBQVUsRUFBRSxDQUFDLGdCQUFnQixDQUFDO2lCQUMvQixDQUFDO2FBQ0g7U0FDRixDQUFDLENBQUM7UUFFSCxPQUFPLElBQUkseUJBQVcsQ0FBQztZQUNyQixVQUFVLEVBQUU7Z0JBQ1YsZUFBZTtnQkFDZixJQUFJLG1DQUFnQixFQUFFO2dCQUN0QixJQUFJLHFDQUFpQixFQUFFO2dCQUN2QixJQUFJLDZDQUFxQixFQUFFO2dCQUMzQixJQUFJLDZDQUFxQixFQUFFO2dCQUMzQixVQUFVO2dCQUNWLElBQUksbUJBQVEsQ0FBQztvQkFDWCxVQUFVLEVBQUU7d0JBQ1YsSUFBSSw2QkFBYSxDQUFDLEVBQUUsT0FBTyxFQUFFLG9DQUFvQixDQUFDLEtBQUssRUFBRSxDQUFDO3dCQUMxRCxJQUFJLG1DQUFnQixFQUFFO3dCQUN0QixJQUFJLCtCQUFjLEVBQUU7d0JBQ3BCLElBQUksMkRBQTRCLEVBQUU7d0JBQ2xDLElBQUkseUNBQW1CLEVBQUU7d0JBQ3pCLElBQUksdUNBQWtCLEVBQUU7d0JBQ3hCLElBQUksMkNBQW9CLENBQUMsRUFBRSxhQUFhLEVBQUUsYUFBYSxFQUFFLENBQUM7d0JBQzFELElBQUksK0NBQXNCLEVBQUU7cUJBQzdCO2lCQUNGLENBQUM7Z0JBQ0YsYUFBYTtnQkFDYixJQUFJLHFCQUFTLEVBQUU7Z0JBQ2YsSUFBSSx5Q0FBbUIsRUFBRTthQUMxQjtZQUNELFVBQVUsRUFBRSxDQUFDLHFCQUFxQixDQUFDO1lBQ25DLFNBQVMsRUFBRSxJQUFJO1lBQ2YseUJBQXlCLEVBQUU7Z0JBQ3pCLHlCQUFXLENBQUMsV0FBVyxDQUFDLFFBQVE7Z0JBQ2hDLHlCQUFXLENBQUMsV0FBVyxDQUFDLE1BQU07Z0JBQzlCLHlCQUFXLENBQUMsV0FBVyxDQUFDLFFBQVE7YUFDakM7U0FDRixDQUFDLENBQUM7SUFDTCxDQUFDO0lBdEdlLDZCQUFtQixzQkFzR2xDLENBQUE7SUFFRCxTQUFnQixzQkFBc0I7UUFDcEMsT0FBTyxJQUFJLHlCQUFXLENBQUM7WUFDckIsVUFBVSxFQUFFO2dCQUNWLElBQUksbUNBQWdCLEVBQUU7Z0JBQ3RCLElBQUksK0JBQWMsRUFBRTtnQkFDcEIsSUFBSSw2Q0FBcUIsRUFBRTtnQkFDM0IsSUFBSSxtQkFBUSxDQUFDO29CQUNYLFVBQVUsRUFBRTt3QkFDViwyREFBMkQ7d0JBQzNELElBQUksYUFBSyxDQUFDLEVBQUUsUUFBUSxFQUFFLHNCQUFzQixFQUFFLENBQUM7d0JBQy9DLElBQUksK0NBQXNCLEVBQUU7cUJBQzdCO2lCQUNGLENBQUM7Z0JBQ0YsSUFBSSxxQkFBUyxDQUFDO29CQUNaLFVBQVUsRUFBRSxDQUFDLElBQUksK0JBQWMsQ0FBQyxFQUFFLElBQUksRUFBRSwwQkFBMEIsRUFBRSxDQUFDLEVBQUUsSUFBSSwyQkFBWSxFQUFFLENBQUM7b0JBQzFGLFFBQVEsRUFBRSxlQUFlO2lCQUMxQixDQUFDO2FBQ0g7WUFDRCxVQUFVLEVBQUUsQ0FBQyxhQUFhLEVBQUUscUJBQXFCLENBQUM7WUFDbEQsU0FBUyxFQUFFLElBQUk7WUFDZix5QkFBeUIsRUFBRTtnQkFDekIseUJBQVcsQ0FBQyxXQUFXLENBQUMsUUFBUTtnQkFDaEMseUJBQVcsQ0FBQyxXQUFXLENBQUMsTUFBTTtnQkFDOUIseUJBQVcsQ0FBQyxXQUFXLENBQUMsUUFBUTthQUNqQztTQUNGLENBQUMsQ0FBQztJQUNMLENBQUM7SUExQmUsZ0NBQXNCLHlCQTBCckMsQ0FBQTtJQUVELFNBQWdCLG9CQUFvQjtRQUNsQyxJQUFJLFVBQVUsR0FBRyxJQUFJLHVCQUFVLENBQUM7WUFDOUIsVUFBVSxFQUFFO2dCQUNWLElBQUkscUJBQVMsQ0FBQztvQkFDWixVQUFVLEVBQUU7d0JBQ1YsSUFBSSxxQ0FBaUIsQ0FBQzs0QkFDcEIsYUFBYSxFQUFFLHlDQUFxQixDQUFDLFdBQVc7NEJBQ2hELGtCQUFrQixFQUFFLElBQUk7eUJBQ3pCLENBQUM7d0JBQ0YsSUFBSSxpQkFBTyxDQUFDLEVBQUUsc0NBQXNDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQzt3QkFDM0QsSUFBSSxxQ0FBaUIsQ0FBQzs0QkFDcEIsYUFBYSxFQUFFLHlDQUFxQixDQUFDLFNBQVM7NEJBQzlDLFVBQVUsRUFBRSxDQUFDLFlBQVksQ0FBQzt5QkFDM0IsQ0FBQztxQkFDSDtvQkFDRCxVQUFVLEVBQUUsQ0FBQyxnQkFBZ0IsQ0FBQztpQkFDL0IsQ0FBQzthQUNIO1NBQ0YsQ0FBQyxDQUFDO1FBRUgsT0FBTyxJQUFJLGlDQUFlLENBQUM7WUFDekIsVUFBVSxFQUFFO2dCQUNWLElBQUksaUNBQWUsRUFBRTtnQkFDckIsSUFBSSxtQ0FBZ0IsRUFBRTtnQkFDdEIsSUFBSSw2Q0FBcUIsRUFBRTtnQkFDM0IsSUFBSSxxQkFBUyxFQUFFO2dCQUNmLFVBQVU7Z0JBQ1YsSUFBSSxtQkFBUSxDQUFDLEVBQUUseUJBQXlCLEVBQUUsSUFBSSxFQUFFLENBQUM7Z0JBQ2pELElBQUkseUNBQW1CLEVBQUU7YUFDMUI7WUFDRCxVQUFVLEVBQUUsQ0FBQyx1QkFBdUIsQ0FBQztZQUNyQyxTQUFTLEVBQUUsSUFBSTtZQUNmLHlCQUF5QixFQUFFO2dCQUN6Qix5QkFBVyxDQUFDLFdBQVcsQ0FBQyxRQUFRO2dCQUNoQyx5QkFBVyxDQUFDLFdBQVcsQ0FBQyxNQUFNO2dCQUM5Qix5QkFBVyxDQUFDLFdBQVcsQ0FBQyxRQUFRO2FBQ2pDO1NBQ0YsQ0FBQyxDQUFDO0lBQ0wsQ0FBQztJQXRDZSw4QkFBb0IsdUJBc0NuQyxDQUFBO0lBRUQsU0FBZ0IsYUFBYSxDQUFDLE1BQWlCLEVBQUUsTUFBcUI7UUFBckIsdUJBQUEsRUFBQSxXQUFxQjtRQUNwRSxzREFBc0Q7UUFDdEQsSUFBSSxzQkFBc0IsR0FBRyxHQUFHLENBQUM7UUFFakMsT0FBTyxJQUFJLHFCQUFTLENBQ2xCLE1BQU0sRUFDTjtZQUNFO2dCQUNFLEVBQUUsRUFBRSxzQkFBc0IsRUFBRTtnQkFDNUIsU0FBUyxFQUFFLFVBQUMsT0FBMkI7b0JBQ3JDLE9BQU8sQ0FDTCxPQUFPLENBQUMsUUFBUSxJQUFJLE9BQU8sQ0FBQyxhQUFhLEdBQUcsc0JBQXNCLElBQUksT0FBTyxDQUFDLElBQUksSUFBSSxPQUFPLENBQUMsWUFBWSxDQUMzRyxDQUFDO2dCQUNKLENBQUM7YUFDRjtZQUNEO2dCQUNFLEVBQUUsRUFBRSxXQUFXLEVBQUU7Z0JBQ2pCLFNBQVMsRUFBRSxVQUFDLE9BQTJCO29CQUNyQyxPQUFPLE9BQU8sQ0FBQyxJQUFJLElBQUksT0FBTyxDQUFDLFlBQVksQ0FBQztnQkFDOUMsQ0FBQzthQUNGO1lBQ0Q7Z0JBQ0UsRUFBRSxFQUFFLG1CQUFtQixFQUFFO2dCQUN6QixTQUFTLEVBQUUsVUFBQyxPQUEyQjtvQkFDckMsT0FBTyxDQUNMLENBQUMsT0FBTyxDQUFDLElBQUk7d0JBQ2IsQ0FBQyxPQUFPLENBQUMsWUFBWTt3QkFDckIsT0FBTyxDQUFDLFFBQVE7d0JBQ2hCLE9BQU8sQ0FBQyxhQUFhLEdBQUcsc0JBQXNCLENBQy9DLENBQUM7Z0JBQ0osQ0FBQzthQUNGO1lBQ0Q7Z0JBQ0UsRUFBRSxFQUFFLFFBQVEsQ0FBQyxNQUFNLENBQUM7Z0JBQ3BCLFNBQVMsRUFBRSxVQUFDLE9BQTJCO29CQUNyQyxPQUFPLENBQUMsT0FBTyxDQUFDLElBQUksSUFBSSxDQUFDLE9BQU8sQ0FBQyxZQUFZLENBQUM7Z0JBQ2hELENBQUM7YUFDRjtTQUNGLEVBQ0QsTUFBTSxDQUNQLENBQUM7SUFDSixDQUFDO0lBekNlLHVCQUFhLGdCQXlDNUIsQ0FBQTtJQUVELFNBQWdCLHdCQUF3QixDQUFDLE1BQWlCLEVBQUUsTUFBcUI7UUFBckIsdUJBQUEsRUFBQSxXQUFxQjtRQUMvRSxPQUFPLElBQUkscUJBQVMsQ0FDbEIsTUFBTSxFQUNOO3lCQUVPLFVBQVUsRUFBRTtTQUVsQixFQUNELE1BQU0sQ0FDUCxDQUFDO0lBQ0osQ0FBQztJQVZlLGtDQUF3QiwyQkFVdkMsQ0FBQTtJQUVELFNBQWdCLHlCQUF5QixDQUFDLE1BQWlCLEVBQUUsTUFBcUI7UUFBckIsdUJBQUEsRUFBQSxXQUFxQjtRQUNoRixPQUFPLElBQUkscUJBQVMsQ0FBQyxNQUFNLEVBQUUsb0JBQW9CLEVBQUUsRUFBRSxNQUFNLENBQUMsQ0FBQztJQUMvRCxDQUFDO0lBRmUsbUNBQXlCLDRCQUV4QyxDQUFBO0lBRUQsU0FBZ0IsZUFBZSxDQUFDLE1BQWlCLEVBQUUsTUFBcUI7UUFBckIsdUJBQUEsRUFBQSxXQUFxQjtRQUN0RSxPQUFPLElBQUkscUJBQVMsQ0FDbEIsTUFBTSxFQUNOO3lCQUVPLFVBQVUsRUFBRTtTQUVsQixFQUNELE1BQU0sQ0FDUCxDQUFDO0lBQ0osQ0FBQztJQVZlLHlCQUFlLGtCQVU5QixDQUFBO0lBRUQsU0FBZ0IsVUFBVTtRQUN4QixJQUFNLGVBQWUsR0FBRyxJQUFJLGlDQUFlLEVBQUUsQ0FBQztRQUM5QyxJQUFNLGlCQUFpQixHQUFHLElBQUksNkJBQWEsQ0FBQztZQUMxQyxVQUFVLEVBQUU7Z0JBQ1YsSUFBSSxxQ0FBaUIsQ0FBQztvQkFDcEIsVUFBVSxFQUFFLENBQUMsSUFBSSxxQ0FBaUIsQ0FBQyxJQUFJLEVBQUUsZUFBZSxDQUFDLENBQUM7aUJBQzNELENBQUM7YUFDSDtZQUNELE1BQU0sRUFBRSxJQUFJO1NBQ2IsQ0FBQyxDQUFDO1FBRUgsSUFBTSxpQkFBaUIsR0FBRyxJQUFJLHFDQUFpQixFQUFFLENBQUM7UUFDbEQsSUFBTSxtQkFBbUIsR0FBRyxJQUFJLDZCQUFhLENBQUM7WUFDNUMsVUFBVSxFQUFFO2dCQUNWLElBQUkscUNBQWlCLENBQUM7b0JBQ3BCLFVBQVUsRUFBRSxDQUFDLElBQUkscUNBQWlCLENBQUMsSUFBSSxFQUFFLGlCQUFpQixDQUFDLENBQUM7aUJBQzdELENBQUM7YUFDSDtZQUNELE1BQU0sRUFBRSxJQUFJO1NBQ2IsQ0FBQyxDQUFDO1FBRUgsSUFBTSxPQUFPLEdBQUcsSUFBSSxpQkFBTyxDQUFDLEVBQUUsS0FBSyxFQUFFLElBQUksMkJBQVksRUFBRSxFQUFFLENBQUMsQ0FBQztRQUMzRCxJQUFNLHFCQUFxQixHQUFHLElBQUksNkNBQXFCLEVBQUUsQ0FBQztRQUMxRCxJQUFNLG9CQUFvQixHQUFHLElBQUksMkNBQW9CLENBQUM7WUFDcEQsYUFBYSxFQUFFLGlCQUFpQjtZQUNoQyw0QkFBNEIsRUFBRSxJQUFJO1lBQ2xDLFFBQVEsRUFBRSxpQ0FBaUM7WUFDM0MsSUFBSSxFQUFFLFdBQUksQ0FBQyxZQUFZLENBQUMsb0JBQW9CLENBQUM7U0FDOUMsQ0FBQyxDQUFDO1FBQ0gsSUFBTSxpQkFBaUIsR0FBRyxJQUFJLDJDQUFvQixDQUFDO1lBQ2pELGFBQWEsRUFBRSxtQkFBbUI7WUFDbEMsNEJBQTRCLEVBQUUsSUFBSTtZQUNsQyxRQUFRLEVBQUUsbUNBQW1DO1lBQzdDLFNBQVMsRUFBRSxXQUFJLENBQUMsWUFBWSxDQUFDLHNCQUFzQixDQUFDO1lBQ3BELElBQUksRUFBRSxXQUFJLENBQUMsWUFBWSxDQUFDLHNCQUFzQixDQUFDO1NBQ2hELENBQUMsQ0FBQztRQUNILElBQU0sV0FBVyxHQUFHLElBQUkseUJBQVcsQ0FBQztZQUNsQyxVQUFVLEVBQUU7Z0JBQ1YsSUFBSSxpQ0FBZSxFQUFFO2dCQUNyQixJQUFJLG1DQUFnQixFQUFFO2dCQUN0QixxQkFBcUI7Z0JBQ3JCLElBQUksdUJBQVUsQ0FBQztvQkFDYixVQUFVLEVBQUU7d0JBQ1YsSUFBSSxxQkFBUyxDQUFDOzRCQUNaLFVBQVUsRUFBRTtnQ0FDVixJQUFJLHFDQUFpQixDQUFDO29DQUNwQixhQUFhLEVBQUUseUNBQXFCLENBQUMsV0FBVztvQ0FDaEQsa0JBQWtCLEVBQUUsSUFBSTtpQ0FDekIsQ0FBQztnQ0FDRixPQUFPO2dDQUNQLElBQUkscUNBQWlCLENBQUM7b0NBQ3BCLGFBQWEsRUFBRSx5Q0FBcUIsQ0FBQyxhQUFhO29DQUNsRCxVQUFVLEVBQUUsQ0FBQyxZQUFZLENBQUM7aUNBQzNCLENBQUM7NkJBQ0g7NEJBQ0QsVUFBVSxFQUFFLENBQUMsZ0JBQWdCLENBQUM7eUJBQy9CLENBQUM7cUJBQ0g7aUJBQ0YsQ0FBQztnQkFDRixJQUFJLG1CQUFRLENBQUM7b0JBQ1gsVUFBVSxFQUFFO3dCQUNWLElBQUkscUJBQVMsQ0FBQzs0QkFDWixVQUFVLEVBQUU7Z0NBQ1YsSUFBSSw2QkFBYSxDQUFDLEVBQUUsT0FBTyxFQUFFLG9DQUFvQixDQUFDLEtBQUssRUFBRSxDQUFDO2dDQUMxRCxvQkFBb0I7Z0NBQ3BCLGlCQUFpQjs2QkFDbEI7NEJBQ0QsVUFBVSxFQUFFLENBQUMsaUJBQWlCLENBQUM7eUJBQ2hDLENBQUM7d0JBQ0YsSUFBSSxxQkFBUyxDQUFDOzRCQUNaLFVBQVUsRUFBRTtnQ0FDVixJQUFJLDZCQUFhLENBQUMsRUFBRSxPQUFPLEVBQUUsb0NBQW9CLENBQUMsV0FBVyxFQUFFLENBQUM7Z0NBQ2hFLGlCQUFpQjtnQ0FDakIsbUJBQW1COzZCQUNwQjs0QkFDRCxVQUFVLEVBQUUsQ0FBQyxvQkFBb0IsQ0FBQzt5QkFDbkMsQ0FBQztxQkFDSDtpQkFDRixDQUFDO2dCQUNGLElBQUksNkNBQXFCLEVBQUU7Z0JBQzNCLElBQUkseUNBQW1CLEVBQUU7YUFDMUI7WUFDRCxVQUFVLEVBQUUsQ0FBQyxZQUFZLENBQUM7WUFDMUIsU0FBUyxFQUFFLElBQUk7WUFDZix5QkFBeUIsRUFBRTtnQkFDekIseUJBQVcsQ0FBQyxXQUFXLENBQUMsUUFBUTtnQkFDaEMseUJBQVcsQ0FBQyxXQUFXLENBQUMsTUFBTTtnQkFDOUIseUJBQVcsQ0FBQyxXQUFXLENBQUMsUUFBUTthQUNqQztTQUNGLENBQUMsQ0FBQztRQUVILElBQU0saUJBQWlCLEdBQUcsSUFBSSxxQ0FBaUIsQ0FDN0MsSUFBSSx5Q0FBbUIsQ0FBQyxXQUFXLEVBQUUscUJBQXFCLEVBQUUsT0FBTyxFQUFFLGlCQUFpQixFQUFFLG9CQUFvQixDQUFDLEVBQzdHLElBQUkseUNBQW1CLENBQUMscUNBQWUsQ0FBQyxRQUFRLEVBQUUsaUJBQWlCLEVBQUUsZUFBZSxDQUFDLEVBQ3JGLElBQUkseUNBQW1CLENBQUMscUNBQWUsQ0FBQyxRQUFRLEVBQUUsbUJBQW1CLEVBQUUsaUJBQWlCLENBQUMsQ0FDMUYsQ0FBQztRQUVGLE9BQU87WUFDTCxFQUFFLEVBQUUsV0FBVztZQUNmLGlCQUFpQixFQUFFLGlCQUFpQjtTQUNyQyxDQUFDO0lBQ0osQ0FBQztJQXJHZSxvQkFBVSxhQXFHekIsQ0FBQTtBQUNILENBQUMsRUFsZ0JnQixTQUFTLEdBQVQsaUJBQVMsS0FBVCxpQkFBUyxRQWtnQnpCOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ3hqQkQsd0RBQXFEO0FBQ3JELDZCQUEwQjtBQUUxQixvREFBaUQ7QUFFakQscURBQTJFO0FBQzNFLHFDQUFrQztBQUNsQywyQ0FBd0M7QUFDeEMsK0NBQTRDO0FBRzVDLHVEQUFzRDtBQUN0RCw0Q0FBMkU7QUFDM0UsbUVBQWtFO0FBQ2xFLHlEQUFrRztBQUVsRyxpR0FBZ0c7QUFDaEcsK0NBQThDO0FBOEY5QztJQXNDRSxtQkFBWSxNQUFpQixFQUFFLG9CQUErQyxFQUFFLFFBQXVCO1FBQXZCLHlCQUFBLEVBQUEsYUFBdUI7UUFBdkcsaUJBZ09DO1FBMVBPLFdBQU0sR0FBRztZQUNmLGtCQUFrQixFQUFFLElBQUksaUNBQWUsRUFBaUM7WUFDeEUsaUJBQWlCLEVBQUUsSUFBSSxpQ0FBZSxFQUFrQztTQUN6RSxDQUFDO1FBd0JBLElBQUksb0JBQW9CLFlBQVkseUJBQVcsRUFBRTtZQUMvQyxzRkFBc0Y7WUFDdEYsSUFBSSxRQUFRLEdBQWdCLG9CQUFvQixDQUFDO1lBQ2pELElBQUksVUFBVSxHQUFHLEVBQUUsQ0FBQztZQUVwQiw0QkFBNEI7WUFDNUIsVUFBVSxDQUFDLElBQUksQ0FBQyxFQUFFLEVBQUUsRUFBRSxRQUFRLEVBQUUsQ0FBQyxDQUFDO1lBRWxDLElBQUksQ0FBQyxVQUFVLEdBQUcsVUFBVSxDQUFDO1NBQzlCO2FBQ0k7WUFDSCxvREFBb0Q7WUFDcEQsSUFBSSxDQUFDLFVBQVUsR0FBZ0Isb0JBQW9CLENBQUM7U0FDckQ7UUFFRCxJQUFJLENBQUMsdUJBQXVCLEdBQUcsSUFBSSxpREFBdUIsRUFBRSxDQUFDO1FBQzdELElBQUksQ0FBQyxNQUFNLEdBQUcsTUFBTSxDQUFDO1FBQ3JCLElBQUksQ0FBQyxvQkFBb0IsR0FBRyxJQUFJLGFBQWEsQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUV0RCxzRUFBc0U7UUFDdEUsUUFBUSxDQUFDLFFBQVEsR0FBRyxRQUFRLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxRQUFRLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUM7UUFFL0QsSUFBSSxDQUFDLE1BQU0sdUJBQ1QsNkJBQTZCLEVBQUUsSUFBSSxFQUNuQyxvQkFBb0IsRUFBRSxJQUFJLEVBQzFCLDBCQUEwQixFQUFFLEtBQUssRUFDakMsaUJBQWlCLEVBQUUsSUFBSSxJQUNwQixRQUFRLEtBQ1gsTUFBTSxFQUFFO2dCQUNOLFNBQVMsRUFBRSxJQUFJLGlDQUFlLEVBQW1CO2FBQ2xELEVBQ0QsZ0JBQWdCLEVBQUUsSUFBSSxtQ0FBZ0IsQ0FBQyxJQUFJLENBQUMsb0JBQW9CLENBQUMsU0FBUyxFQUFFLENBQUMsR0FDOUUsQ0FBQztRQUVGOzs7V0FHRztRQUNILElBQU0sWUFBWSxHQUFHO1lBQ25CLElBQU0sa0JBQWtCLEdBQUcsTUFBTSxDQUFDLFNBQVMsRUFBRSxJQUFJLEVBQUUsQ0FBQztZQUNwRCxLQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsUUFBUSxDQUFDLFFBQVEsSUFBSSxFQUFFLENBQUMsQ0FBQyxDQUFDO1lBRTNFLGtFQUFrRTtZQUNsRSxJQUFNLG9CQUFvQixHQUFhO2dCQUNyQyxRQUFRLEVBQUU7b0JBQ1IsaUVBQWlFO29CQUNqRSxLQUFLLEVBQUUsa0JBQWtCLENBQUMsS0FBSztvQkFDL0IsV0FBVyxFQUFFLGtCQUFrQixDQUFDLFdBQVc7b0JBQzNDLE9BQU8sRUFBRyxrQkFBMEIsQ0FBQyxPQUFPO2lCQUM3QztnQkFDRCxlQUFlLEVBQUcsa0JBQTBCLENBQUMsZUFBZTthQUM3RCxDQUFDO1lBRUYseUdBQXlHO1lBQ3pHLHVHQUF1RztZQUN2RyxtQ0FBbUM7WUFDbkMsS0FBSSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsS0FBSyxHQUFHLG9CQUFvQixDQUFDLFFBQVEsQ0FBQyxLQUFLLElBQUksUUFBUSxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUM7WUFDNUYsS0FBSSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsV0FBVyxHQUFHLG9CQUFvQixDQUFDLFFBQVEsQ0FBQyxXQUFXLElBQUksUUFBUSxDQUFDLFFBQVEsQ0FBQyxXQUFXLENBQUM7WUFDOUcsS0FBSSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsT0FBTyxHQUFHLG9CQUFvQixDQUFDLFFBQVEsQ0FBQyxPQUFPLElBQUksUUFBUSxDQUFDLFFBQVEsQ0FBQyxPQUFPLElBQUksRUFBRSxDQUFDO1lBQ3hHLEtBQUksQ0FBQyxNQUFNLENBQUMsZUFBZSxHQUFHLG9CQUFvQixDQUFDLGVBQWUsSUFBSSxRQUFRLENBQUMsZUFBZSxJQUFJLEVBQUUsQ0FBQztZQUVyRywyQkFBWSxDQUFDLHFCQUFxQixDQUFDLFFBQVEsQ0FBQyxDQUFDO1FBQy9DLENBQUMsQ0FBQztRQUVGLFlBQVksRUFBRSxDQUFDO1FBQ2YsSUFBSSxDQUFDLHVCQUF1QixDQUFDLFVBQVUsRUFBRSxDQUFDO1FBRTFDLHFGQUFxRjtRQUNyRixJQUFNLFlBQVksR0FBRztZQUNuQixZQUFZLEVBQUUsQ0FBQztZQUNmLEtBQUksQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLFNBQVMsQ0FBQyxRQUFRLENBQUMsS0FBSSxDQUFDLENBQUM7UUFDOUMsQ0FBQyxDQUFDO1FBRUYsSUFBTSxhQUFhLEdBQUcsSUFBSSxDQUFDLG9CQUFvQixDQUFDLFNBQVMsRUFBRSxDQUFDO1FBRTVELGFBQWEsQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsV0FBVyxDQUFDLFlBQVksRUFBRSxZQUFZLENBQUMsQ0FBQztRQUU3RSx1RUFBdUU7UUFDdkUsc0VBQXNFO1FBQ3RFLElBQUksSUFBQSx1Q0FBbUIsRUFBQyxhQUFhLENBQUMsRUFBRTtZQUN0QyxhQUFhLENBQUMsRUFBRSxDQUFDLHVDQUFtQixDQUFDLGtCQUFrQixFQUFFLFlBQVksQ0FBQyxDQUFDO1NBQ3hFO1FBRUQsSUFBSSxRQUFRLENBQUMsU0FBUyxFQUFFO1lBQ3RCLG9HQUFvRztZQUNwRyxnSEFBZ0g7WUFDaEgsd0dBQXdHO1lBQ3hHLElBQUksQ0FBQyxrQkFBa0IsR0FBRyxRQUFRLENBQUMsU0FBUyxZQUFZLFdBQVcsQ0FBQyxDQUFDO2dCQUNuRSxJQUFJLFNBQUcsQ0FBQyxRQUFRLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksU0FBRyxDQUFDLFFBQVEsQ0FBQyxTQUFTLENBQUMsQ0FBQztTQUM3RDthQUFNO1lBQ0wsSUFBSSxDQUFDLGtCQUFrQixHQUFHLElBQUksU0FBRyxDQUFDLE1BQU0sQ0FBQyxZQUFZLEVBQUUsQ0FBQyxDQUFDO1NBQzFEO1FBRUQsa0RBQWtEO1FBQ2xELGtGQUFrRjtRQUNsRixJQUFJLENBQUMsa0JBQWtCLEdBQUcsRUFBRSxDQUFDO1FBQzdCLElBQUksMEJBQTBCLEdBQUcsRUFBRSxDQUFDO1FBQ3BDLEtBQXNCLFVBQWUsRUFBZixLQUFBLElBQUksQ0FBQyxVQUFVLEVBQWYsY0FBZSxFQUFmLElBQWUsRUFBRTtZQUFsQyxJQUFJLFNBQVMsU0FBQTtZQUNoQixJQUFJLFNBQVMsQ0FBQyxTQUFTLElBQUksSUFBSSxFQUFFO2dCQUMvQix5REFBeUQ7Z0JBQ3pELDBCQUEwQixDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQzthQUM1QztZQUNELCtDQUErQztZQUMvQyxJQUFJLENBQUMsa0JBQWtCLENBQUMsSUFBSSxDQUFDLElBQUkseUJBQXlCLENBQ3hELE1BQU0sRUFDTixTQUFTLENBQUMsRUFBRSxFQUNaLElBQUksQ0FBQyxNQUFNLEVBQ1gsSUFBSSxDQUFDLHVCQUF1QixFQUM1QixTQUFTLENBQUMsaUJBQWlCLENBQzVCLENBQUMsQ0FBQztTQUNKO1FBQ0Qsa0VBQWtFO1FBQ2xFLDZHQUE2RztRQUM3Ryx5REFBeUQ7UUFDekQsSUFBSSwwQkFBMEIsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxFQUFFO1lBQ3pDLE1BQU0sS0FBSyxDQUFDLDRFQUE0RSxDQUFDLENBQUM7U0FDM0Y7UUFDRCw0RkFBNEY7UUFDNUYsNEdBQTRHO1FBQzVHLGlFQUFpRTtRQUNqRSxJQUFJLDBCQUEwQixDQUFDLE1BQU0sR0FBRyxDQUFDO2VBQ3BDLDBCQUEwQixDQUFDLENBQUMsQ0FBQyxLQUFLLElBQUksQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDLEVBQUU7WUFDbEYsTUFBTSxLQUFLLENBQUMsNkZBQTZGLENBQUMsQ0FBQztTQUM1RztRQUVELElBQUksY0FBYyxHQUFZLElBQUksQ0FBQyxDQUFDLGdEQUFnRDtRQUVwRix5RUFBeUU7UUFDekUsSUFBSSxnQkFBZ0IsR0FBRyxVQUFDLEtBQXNCO1lBQzVDLHVHQUF1RztZQUN2Ryw0R0FBNEc7WUFDNUcsbUdBQW1HO1lBQ25HLGtHQUFrRztZQUNsRyxJQUFJLEtBQUssSUFBSSxJQUFJLEVBQUU7Z0JBQ2pCLFFBQVEsS0FBSyxDQUFDLElBQUksRUFBRTtvQkFDbEIscUdBQXFHO29CQUNyRyw2RkFBNkY7b0JBQzdGLG9HQUFvRztvQkFDcEcsc0dBQXNHO29CQUN0Ryx5R0FBeUc7b0JBQ3pHLDhHQUE4RztvQkFDOUcscUVBQXFFO29CQUNyRSxLQUFLLE1BQU0sQ0FBQyxPQUFPLENBQUMsV0FBVyxDQUFDLFNBQVM7d0JBQ3ZDLGNBQWMsR0FBRyxLQUFnQixDQUFDO3dCQUNsQyxNQUFNO29CQUNSLDJHQUEyRztvQkFDM0cseUdBQXlHO29CQUN6RywrRkFBK0Y7b0JBQy9GLHVCQUF1QjtvQkFDdkIsS0FBSyxNQUFNLENBQUMsT0FBTyxDQUFDLFdBQVcsQ0FBQyxlQUFlO3dCQUM3QyxjQUFjLEdBQUcsSUFBSSxDQUFDO3dCQUN0QiwyR0FBMkc7d0JBQzNHLHdHQUF3Rzt3QkFDeEcseUdBQXlHO3dCQUN6Ryx5R0FBeUc7d0JBQ3pHLHNHQUFzRzt3QkFDdEcsd0dBQXdHO3dCQUN4Ryw0REFBNEQ7d0JBQzVELG1HQUFtRzt3QkFDbkcsS0FBSSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsU0FBUyxDQUFDLFFBQVEsQ0FBQyxLQUFJLENBQUMsQ0FBQzt3QkFDNUMsTUFBTTtvQkFDUiwyRkFBMkY7b0JBQzNGLEtBQUssTUFBTSxDQUFDLE9BQU8sQ0FBQyxXQUFXLENBQUMsWUFBWSxDQUFDO29CQUM3QyxLQUFLLE1BQU0sQ0FBQyxPQUFPLENBQUMsV0FBVyxDQUFDLGNBQWM7d0JBQzVDLGNBQWMsR0FBRyxJQUFJLENBQUM7d0JBQ3RCLE1BQU07aUJBQ1Q7YUFDRjtZQUVELDhCQUE4QjtZQUM5QixJQUFJLElBQUksR0FBRyxjQUFjLElBQUksSUFBSSxDQUFDO1lBQ2xDLElBQUksWUFBWSxHQUFHLEtBQUssQ0FBQztZQUN6QixJQUFJLElBQUksRUFBRTtnQkFDUixJQUFJLEVBQUUsR0FBRyxjQUFjLENBQUMsRUFBRSxDQUFDO2dCQUMzQiwyQ0FBMkM7Z0JBQzNDLElBQUksRUFBRSxDQUFDLFFBQVEsRUFBRTtvQkFDZixJQUFJLFFBQVEsR0FBRyxFQUFjLENBQUM7b0JBQzlCLFlBQVksR0FBRyxRQUFRLENBQUMsUUFBUSxJQUFJLFFBQVEsQ0FBQyxRQUFRLENBQUMsVUFBVSxJQUFJLEtBQUssQ0FBQztpQkFDM0U7YUFDRjtZQUVELElBQUksWUFBWSxFQUFFO2dCQUNoQix1RkFBdUY7Z0JBQ3ZGLDZGQUE2RjtnQkFDN0Ysb0JBQW9CO2dCQUNwQixLQUFJLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxTQUFTLENBQUMsUUFBUSxDQUFDLEtBQUksQ0FBQyxDQUFDO2FBQzdDO1lBRUQsS0FBSSxDQUFDLGdCQUFnQixDQUFDO2dCQUNwQixJQUFJLEVBQUUsSUFBSTtnQkFDVixZQUFZLEVBQUUsWUFBWTthQUMzQixFQUFFLFVBQUMsT0FBTztnQkFDVCwwR0FBMEc7Z0JBQzFHLGlDQUFpQztnQkFDakMsSUFBSSxPQUFPLENBQUMsSUFBSSxFQUFFO29CQUNoQjs7Ozs7O3VCQU1HO29CQUNILEtBQUksQ0FBQyxTQUFTLENBQUMsZ0JBQWdCLEVBQUUsQ0FBQyxhQUFhLENBQUMsS0FBSSxDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsV0FBVyxDQUFDLFNBQVMsRUFBRSxjQUFjLENBQUMsQ0FBQztpQkFDNUc7WUFDSCxDQUFDLENBQUMsQ0FBQztRQUNMLENBQUMsQ0FBQztRQUVGLGtFQUFrRTtRQUNsRSxJQUFJLElBQUksQ0FBQyxNQUFNLENBQUMsb0JBQW9CLEVBQUU7WUFDcEMsSUFBSSxDQUFDLG9CQUFvQixDQUFDLFNBQVMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxXQUFXLENBQUMsWUFBWSxFQUFFLGdCQUFnQixDQUFDLENBQUM7WUFDekcsSUFBSSxDQUFDLG9CQUFvQixDQUFDLFNBQVMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxXQUFXLENBQUMsY0FBYyxFQUFFLGdCQUFnQixDQUFDLENBQUM7WUFDM0csSUFBSSxDQUFDLG9CQUFvQixDQUFDLFNBQVMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxXQUFXLENBQUMsSUFBSSxFQUFFLGdCQUFnQixDQUFDLENBQUM7WUFDakcsSUFBSSxDQUFDLG9CQUFvQixDQUFDLFNBQVMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxXQUFXLENBQUMsTUFBTSxFQUFFLGdCQUFnQixDQUFDLENBQUM7WUFDbkcsSUFBSSxDQUFDLG9CQUFvQixDQUFDLFNBQVMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxXQUFXLENBQUMsU0FBUyxFQUFFLGdCQUFnQixDQUFDLENBQUM7WUFDdEcsSUFBSSxDQUFDLG9CQUFvQixDQUFDLFNBQVMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxXQUFXLENBQUMsZUFBZSxFQUFFLGdCQUFnQixDQUFDLENBQUM7WUFDNUcsSUFBSSxDQUFDLG9CQUFvQixDQUFDLFNBQVMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxXQUFXLENBQUMsYUFBYSxFQUFFLGdCQUFnQixDQUFDLENBQUM7WUFDMUcsSUFBSSxDQUFDLG9CQUFvQixDQUFDLFNBQVMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxXQUFXLENBQUMsZUFBZSxFQUFFLGdCQUFnQixDQUFDLENBQUM7U0FDN0c7UUFFRCxJQUFJLENBQUMsc0JBQXNCLEdBQUcsSUFBSSwrQ0FBc0IsQ0FBQyxZQUFZLENBQUMsQ0FBQztRQUV2RSxvQkFBb0I7UUFDcEIsZ0JBQWdCLENBQUMsSUFBSSxDQUFDLENBQUM7SUFDekIsQ0FBQztJQUVEOzs7T0FHRztJQUNJLGtCQUFRLEdBQWYsVUFBb0UsR0FBWTtRQUM5RSxPQUFPLFdBQUksQ0FBQyxZQUFZLENBQUMsR0FBRyxDQUFDLENBQUM7SUFDaEMsQ0FBQztJQUVEOzs7T0FHRztJQUNJLCtCQUFxQixHQUE1QixVQUE2QixrQkFBc0M7UUFDakUsV0FBSSxDQUFDLFNBQVMsQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDO0lBQ3JDLENBQUM7SUFFRCw4Q0FBMEIsR0FBMUI7UUFDRSxPQUFPLElBQUksQ0FBQyx1QkFBdUIsQ0FBQztJQUN0QyxDQUFDO0lBRUQsNkJBQVMsR0FBVDtRQUNFLE9BQU8sSUFBSSxDQUFDLE1BQU0sQ0FBQztJQUNyQixDQUFDO0lBRUQ7OztPQUdHO0lBQ0gsaUNBQWEsR0FBYjtRQUNFLE9BQU8sSUFBSSxDQUFDLFVBQVUsQ0FBQztJQUN6QixDQUFDO0lBRUQ7Ozs7T0FJRztJQUNILHFDQUFpQixHQUFqQixVQUFrQixTQUFvQixFQUFFLE1BQW1CO1FBQ3pELElBQUksY0FBYyxHQUFHLElBQUksQ0FBQyxVQUFVLENBQUMsT0FBTyxDQUFDLFNBQVMsQ0FBQyxDQUFDO1FBRXhELElBQU0sVUFBVSxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUM7UUFDbEMsSUFBTSxNQUFNLEdBQThCLElBQUksQ0FBQyxrQkFBa0IsQ0FBQyxjQUFjLENBQUMsQ0FBQztRQUNsRiwwQ0FBMEM7UUFDMUMscUdBQXFHO1FBQ3JHLElBQUksTUFBTSxLQUFLLElBQUksQ0FBQyxTQUFTLEVBQUU7WUFDN0IsT0FBTztZQUNQLGtGQUFrRjtZQUNsRiwrQ0FBK0M7U0FDaEQ7UUFFRCx1Q0FBdUM7UUFDdkMsSUFBSSxJQUFJLENBQUMsU0FBUyxFQUFFO1lBQ2xCLElBQUksQ0FBQyxTQUFTLENBQUMsS0FBSyxFQUFFLENBQUMsSUFBSSxFQUFFLENBQUM7U0FDL0I7UUFFRCwwQ0FBMEM7UUFDMUMsSUFBSSxDQUFDLFNBQVMsR0FBRyxNQUFNLENBQUM7UUFFeEIsMEdBQTBHO1FBQzFHLG1DQUFtQztRQUNuQyxJQUFJLElBQUksQ0FBQyxTQUFTLElBQUksSUFBSSxFQUFFO1lBQzFCLE9BQU87U0FDUjtRQUNELHlFQUF5RTtRQUN6RSxJQUFJLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxZQUFZLEVBQUUsRUFBRTtZQUNsQyxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQztZQUMzQixxRUFBcUU7WUFDckUsSUFBSSxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsS0FBSyxFQUFFLENBQUMsUUFBUSxFQUFFLEVBQUU7Z0JBQ3RDLElBQUksQ0FBQyxTQUFTLENBQUMsS0FBSyxFQUFFLENBQUMsSUFBSSxFQUFFLENBQUM7YUFDL0I7U0FDRjtRQUNELElBQUksTUFBTSxFQUFFO1lBQ1YsTUFBTSxFQUFFLENBQUM7U0FDVjtRQUNELElBQUksQ0FBQyxTQUFTLENBQUMsS0FBSyxFQUFFLENBQUMsSUFBSSxFQUFFLENBQUM7UUFDOUIsSUFBSSxDQUFDLE1BQU0sQ0FBQyxpQkFBaUIsQ0FBQyxRQUFRLENBQUMsSUFBSSxFQUFFLEVBQUUsVUFBVSxZQUFBLEVBQUUsU0FBUyxFQUFFLE1BQU0sRUFBRSxDQUFDLENBQUM7SUFDbEYsQ0FBQztJQUVEOzs7Ozs7O09BT0c7SUFDSCxvQ0FBZ0IsR0FBaEIsVUFBaUIsT0FBeUMsRUFBRSxNQUE4QztRQUF6Rix3QkFBQSxFQUFBLFlBQXlDO1FBQ3hELDBFQUEwRTtRQUMxRSxJQUFNLGNBQWMsR0FBdUI7WUFDekMsSUFBSSxFQUFFLEtBQUs7WUFDWCxZQUFZLEVBQUUsS0FBSztZQUNuQixZQUFZLEVBQUUsSUFBSSxDQUFDLE1BQU0sQ0FBQyxXQUFXLEVBQUUsS0FBSyxJQUFJLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxRQUFRLENBQUMsVUFBVTtZQUNuRixRQUFRLEVBQUUsMkJBQVksQ0FBQyxRQUFRO1lBQy9CLFNBQVMsRUFBRSxJQUFJLENBQUMsTUFBTSxDQUFDLFNBQVMsRUFBRTtZQUNsQyxLQUFLLEVBQUUsSUFBSSxDQUFDLGtCQUFrQixDQUFDLEtBQUssRUFBRTtZQUN0QyxhQUFhLEVBQUUsUUFBUSxDQUFDLElBQUksQ0FBQyxXQUFXO1NBQ3pDLENBQUM7UUFFRixnRkFBZ0Y7UUFDaEYsSUFBTSxnQkFBZ0IseUJBQVEsY0FBYyxHQUFLLE9BQU8sQ0FBRSxDQUFDO1FBRTNELG1HQUFtRztRQUNuRyxJQUFJLENBQUMsTUFBTSxDQUFDLGtCQUFrQixDQUFDLFFBQVEsQ0FBQyxJQUFJLEVBQUUsZ0JBQWdCLENBQUMsQ0FBQztRQUVoRSxJQUFJLGFBQWEsR0FBYyxJQUFJLENBQUM7UUFFcEMsd0JBQXdCO1FBQ3hCLDZEQUE2RDtRQUM3RCxLQUFzQixVQUFlLEVBQWYsS0FBQSxJQUFJLENBQUMsVUFBVSxFQUFmLGNBQWUsRUFBZixJQUFlLEVBQUU7WUFBbEMsSUFBSSxTQUFTLFNBQUE7WUFDaEIsSUFBTSxnQkFBZ0IsR0FBRyxTQUFTLENBQUMsU0FBUyxJQUFJLElBQUksSUFBSSxTQUFTLENBQUMsU0FBUyxDQUFDLGdCQUFnQixDQUFDLEtBQUssSUFBSSxDQUFDO1lBQ3ZHLElBQUksYUFBYSxJQUFJLElBQUksSUFBSSxnQkFBZ0IsRUFBRTtnQkFDN0MsYUFBYSxHQUFHLFNBQVMsQ0FBQzthQUMzQjtpQkFBTTtnQkFDTCxzREFBc0Q7Z0JBQ3RELFNBQVMsQ0FBQyxFQUFFLENBQUMsSUFBSSxFQUFFLENBQUM7YUFDckI7U0FDRjtRQUVELElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxhQUFhLEVBQUU7WUFDcEMsSUFBSSxNQUFNLEVBQUU7Z0JBQ1YsTUFBTSxDQUFDLGdCQUFnQixDQUFDLENBQUM7YUFDMUI7UUFDSCxDQUFDLENBQUMsQ0FBQztJQUNMLENBQUM7SUFFTyx5QkFBSyxHQUFiLFVBQWMsRUFBNkI7UUFDekMsSUFBSSxHQUFHLEdBQUcsRUFBRSxDQUFDLEtBQUssRUFBRSxDQUFDLGFBQWEsRUFBRSxDQUFDO1FBQ3JDLElBQUksTUFBTSxHQUFHLEVBQUUsQ0FBQyxnQkFBZ0IsRUFBRSxDQUFDO1FBRW5DLEVBQUUsQ0FBQyxpQkFBaUIsRUFBRSxDQUFDO1FBQ3ZCOzt1Q0FFK0I7UUFDL0IsSUFBSSxDQUFDLGtCQUFrQixDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUVwQywyR0FBMkc7UUFDM0csSUFBSSxNQUFNLENBQUMsU0FBUyxFQUFFLEVBQUU7WUFDdEIsSUFBSSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsU0FBUyxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsQ0FBQztTQUU3QztRQUVELDJHQUEyRztRQUMzRyw2REFBNkQ7UUFDN0QsMEdBQTBHO1FBQzFHLElBQUksTUFBTSxDQUFDLHFCQUFxQixFQUFFO1lBQ2hDLHFCQUFxQixDQUFDLGNBQVEsRUFBRSxDQUFDLFlBQVksQ0FBQyxRQUFRLENBQUMsRUFBRSxDQUFDLEtBQUssRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztTQUN4RTthQUFNO1lBQ0wsZUFBZTtZQUNmLFVBQVUsQ0FBQyxjQUFRLEVBQUUsQ0FBQyxZQUFZLENBQUMsUUFBUSxDQUFDLEVBQUUsQ0FBQyxLQUFLLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO1NBQ2hFO0lBQ0gsQ0FBQztJQUVPLDZCQUFTLEdBQWpCLFVBQWtCLEVBQTZCO1FBQzdDLEVBQUUsQ0FBQyxlQUFlLEVBQUUsQ0FBQztRQUVyQixJQUFNLFdBQVcsR0FBRyxFQUFFLENBQUMsS0FBSyxFQUFFLENBQUM7UUFDL0IsSUFBSSxXQUFXLENBQUMsYUFBYSxFQUFFLEVBQUU7WUFDL0IsV0FBVyxDQUFDLGFBQWEsRUFBRSxDQUFDLE1BQU0sRUFBRSxDQUFDO1NBQ3RDO1FBRUQsRUFBRSxDQUFDLGtCQUFrQixFQUFFLENBQUM7SUFDMUIsQ0FBQztJQUVELDJCQUFPLEdBQVA7UUFDRSxLQUE4QixVQUF1QixFQUF2QixLQUFBLElBQUksQ0FBQyxrQkFBa0IsRUFBdkIsY0FBdUIsRUFBdkIsSUFBdUIsRUFBRTtZQUFsRCxJQUFJLGlCQUFpQixTQUFBO1lBQ3hCLElBQUksQ0FBQyxTQUFTLENBQUMsaUJBQWlCLENBQUMsQ0FBQztTQUNuQztRQUNELElBQUksQ0FBQyxvQkFBb0IsQ0FBQyxrQkFBa0IsRUFBRSxDQUFDO1FBQy9DLElBQUksQ0FBQyxzQkFBc0IsQ0FBQyxPQUFPLEVBQUUsQ0FBQztJQUN4QyxDQUFDO0lBUUQsc0JBQUkseUNBQWtCO1FBTnRCOzs7OztXQUtHO2FBQ0g7WUFDRSxPQUFPLElBQUksQ0FBQyxNQUFNLENBQUMsa0JBQWtCLENBQUM7UUFDeEMsQ0FBQzs7O09BQUE7SUFNRCxzQkFBSSx3Q0FBaUI7UUFKckI7OztXQUdHO2FBQ0g7WUFDRSxPQUFPLElBQUksQ0FBQyxNQUFNLENBQUMsaUJBQWlCLENBQUM7UUFDdkMsQ0FBQzs7O09BQUE7SUFLRCxzQkFBSSwrQkFBUTtRQUhaOztXQUVHO2FBQ0g7WUFDRSxPQUFPLElBQUksQ0FBQyxTQUFTLENBQUM7UUFDeEIsQ0FBQzs7O09BQUE7SUFFRDs7T0FFRztJQUNILHNDQUFrQixHQUFsQjtRQUNFLE9BQU8sSUFBSSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsT0FBTyxDQUFDO0lBQ3RDLENBQUM7SUFFRDs7T0FFRztJQUNILHFDQUFpQixHQUFqQixVQUFrQixjQUE4QjtRQUM5QyxJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLGNBQWMsQ0FBQyxDQUFDO1FBQ2xELElBQUksQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLFNBQVMsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLENBQUM7SUFDOUMsQ0FBQztJQUVEOzs7O09BSUc7SUFDSCx3Q0FBb0IsR0FBcEIsVUFBcUIsY0FBOEI7UUFDakQsSUFBSSx1QkFBVSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxPQUFPLEVBQUUsY0FBYyxDQUFDLEtBQUssY0FBYyxFQUFFO1lBQ3RGLElBQUksQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLFNBQVMsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLENBQUM7WUFDNUMsT0FBTyxJQUFJLENBQUM7U0FDYjtRQUVELE9BQU8sS0FBSyxDQUFDO0lBQ2YsQ0FBQztJQUNILGdCQUFDO0FBQUQsQ0F4ZUEsQUF3ZUMsSUFBQTtBQXhlWSw4QkFBUztBQXFmdEI7O0dBRUc7QUFDSDtJQXFCRSwyQkFBWSxNQUFpQixFQUFFLEVBQWUsRUFBRSxNQUF3QixFQUFFLHVCQUFnRCxFQUFFLGlCQUFxQztRQWR6SixXQUFNLEdBQUc7WUFDZixZQUFZLEVBQUUsSUFBSSxpQ0FBZSxFQUF1QjtZQUN4RCxNQUFNLEVBQUUsSUFBSSxpQ0FBZSxFQUFtQjtZQUM5QyxhQUFhLEVBQUUsSUFBSSxpQ0FBZSxFQUE0QjtZQUM5RCxRQUFRLEVBQUUsSUFBSSxpQ0FBZSxFQUFtQjtZQUNoRCxlQUFlLEVBQUUsSUFBSSxpQ0FBZSxFQUFzQztZQUMxRSxlQUFlLEVBQUUsSUFBSSxpQ0FBZSxFQUFzQztZQUMxRSwwQkFBMEIsRUFBRSxJQUFJLGlDQUFlLEVBQXdEO1lBQ3ZHLGNBQWMsRUFBRSxJQUFJLGlDQUFlLEVBQXVCO1lBQzFELHFCQUFxQixFQUFFLElBQUksaUNBQWUsRUFBZ0M7WUFDMUUsY0FBYyxFQUFFLElBQUksaUNBQWUsRUFBdUI7WUFDMUQsU0FBUyxFQUFFLElBQUksaUNBQWUsRUFBdUI7U0FDdEQsQ0FBQztRQUdBLElBQUksQ0FBQyxhQUFhLEdBQUcsSUFBSSxhQUFhLENBQUMsTUFBTSxDQUFDLENBQUM7UUFDL0MsSUFBSSxDQUFDLEVBQUUsR0FBRyxFQUFFLENBQUM7UUFDYixJQUFJLENBQUMsTUFBTSxHQUFHLE1BQU0sQ0FBQztRQUNyQixJQUFJLENBQUMsdUJBQXVCLEdBQUcsdUJBQXVCLENBQUM7UUFDdkQsSUFBSSxDQUFDLGlCQUFpQixHQUFHLGlCQUFpQixDQUFDO0lBQzdDLENBQUM7SUFFRCxzREFBMEIsR0FBMUI7UUFDRSxPQUFPLElBQUksQ0FBQyx1QkFBdUIsQ0FBQztJQUN0QyxDQUFDO0lBRUQscUNBQVMsR0FBVDtRQUNFLE9BQU8sSUFBSSxDQUFDLE1BQU0sQ0FBQztJQUNyQixDQUFDO0lBRUQsaUNBQUssR0FBTDtRQUNFLE9BQU8sSUFBSSxDQUFDLEVBQUUsQ0FBQztJQUNqQixDQUFDO0lBRUQscUNBQVMsR0FBVDtRQUNFLE9BQU8sSUFBSSxDQUFDLGFBQWEsQ0FBQyxTQUFTLEVBQUUsQ0FBQztJQUN4QyxDQUFDO0lBTUQsc0JBQUksMkNBQVk7UUFKaEI7OztXQUdHO2FBQ0g7WUFDRSxPQUFPLElBQUksQ0FBQyxNQUFNLENBQUMsWUFBWSxDQUFDO1FBQ2xDLENBQUM7OztPQUFBO0lBTUQsc0JBQUkscUNBQU07UUFKVjs7O1dBR0c7YUFDSDtZQUNFLE9BQU8sSUFBSSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUM7UUFDNUIsQ0FBQzs7O09BQUE7SUFNRCxzQkFBSSw0Q0FBYTtRQUpqQjs7O1dBR0c7YUFDSDtZQUNFLE9BQU8sSUFBSSxDQUFDLE1BQU0sQ0FBQyxhQUFhLENBQUM7UUFDbkMsQ0FBQzs7O09BQUE7SUFNRCxzQkFBSSx1Q0FBUTtRQUpaOzs7V0FHRzthQUNIO1lBQ0UsT0FBTyxJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQztRQUM5QixDQUFDOzs7T0FBQTtJQU1ELHNCQUFJLDhDQUFlO1FBSm5COzs7V0FHRzthQUNIO1lBQ0UsT0FBTyxJQUFJLENBQUMsTUFBTSxDQUFDLGVBQWUsQ0FBQztRQUNyQyxDQUFDOzs7T0FBQTtJQU1ELHNCQUFJLDhDQUFlO1FBSm5COzs7V0FHRzthQUNIO1lBQ0UsT0FBTyxJQUFJLENBQUMsTUFBTSxDQUFDLGVBQWUsQ0FBQztRQUNyQyxDQUFDOzs7T0FBQTtJQU1ELHNCQUFJLDZDQUFjO1FBSmxCOzs7V0FHRzthQUNIO1lBQ0UsT0FBTyxJQUFJLENBQUMsTUFBTSxDQUFDLGNBQWMsQ0FBQztRQUNwQyxDQUFDOzs7T0FBQTtJQU1ELHNCQUFJLG9EQUFxQjtRQUp6Qjs7O1dBR0c7YUFDSDtZQUNFLE9BQU8sSUFBSSxDQUFDLE1BQU0sQ0FBQyxxQkFBcUIsQ0FBQztRQUMzQyxDQUFDOzs7T0FBQTtJQU1ELHNCQUFJLDZDQUFjO1FBSmxCOzs7V0FHRzthQUNIO1lBQ0UsT0FBTyxJQUFJLENBQUMsTUFBTSxDQUFDLGNBQWMsQ0FBQztRQUNwQyxDQUFDOzs7T0FBQTtJQU1ELHNCQUFJLHdDQUFTO1FBSmI7OztXQUdHO2FBQ0g7WUFDRSxPQUFPLElBQUksQ0FBQyxNQUFNLENBQUMsU0FBUyxDQUFDO1FBQy9CLENBQUM7OztPQUFBO0lBRUQsc0JBQUkseURBQTBCO2FBQTlCO1lBQ0UsT0FBTyxJQUFJLENBQUMsTUFBTSxDQUFDLDBCQUEwQixDQUFDO1FBQ2hELENBQUM7OztPQUFBO0lBRVMsOENBQWtCLEdBQTVCO1FBQ0UsSUFBSSxDQUFDLGFBQWEsQ0FBQyxrQkFBa0IsRUFBRSxDQUFDO1FBRXhDLElBQUksTUFBTSxHQUFRLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxlQUFlO1FBQzlDLEtBQUssSUFBSSxPQUFLLElBQUksTUFBTSxFQUFFO1lBQ3hCLElBQUksVUFBVSxHQUFvQyxNQUFNLENBQUMsT0FBSyxDQUFDLENBQUM7WUFDaEUsVUFBVSxDQUFDLGNBQWMsRUFBRSxDQUFDO1NBQzdCO0lBQ0gsQ0FBQztJQUNILHdCQUFDO0FBQUQsQ0ExSUEsQUEwSUMsSUFBQTtBQTFJWSw4Q0FBaUI7QUE0STlCOzs7R0FHRztBQUNIO0lBQXdDLDZDQUFpQjtJQUF6RDs7SUE2RUEsQ0FBQztJQXhFQyxvREFBZ0IsR0FBaEI7UUFDRSwrRkFBK0Y7UUFDL0YsZ0hBQWdIO1FBQ2hILDBCQUEwQjtRQUMxQixPQUFzQixJQUFJLENBQUMsU0FBUyxFQUFFLENBQUM7SUFDekMsQ0FBQztJQUVELHFEQUFpQixHQUFqQjtRQUNFLElBQUksQ0FBQyxxQkFBcUIsQ0FBQyxJQUFJLENBQUMsS0FBSyxFQUFFLENBQUMsQ0FBQztRQUN6QyxJQUFJLENBQUMsVUFBVSxHQUFHLElBQUksQ0FBQztJQUN6QixDQUFDO0lBRUQsZ0RBQVksR0FBWjtRQUNFLE9BQU8sSUFBSSxDQUFDLFVBQVUsQ0FBQztJQUN6QixDQUFDO0lBRU8seURBQXFCLEdBQTdCLFVBQThCLFNBQXFDO1FBQW5FLGlCQTBCQztRQXpCQyxJQUFJLG9CQUFvQixHQUFpQyxFQUFFLENBQUM7UUFFNUQsaUJBQU8sQ0FBQyxZQUFZLENBQUMsU0FBUyxFQUFFLFVBQUMsU0FBUztZQUN4QywrR0FBK0c7WUFDL0csMkdBQTJHO1lBQzNHLHVDQUF1QztZQUN2Qyw0R0FBNEc7WUFDNUcsZ0NBQWdDO1lBQ2hDLEtBQWdDLFVBQW9CLEVBQXBCLDZDQUFvQixFQUFwQixrQ0FBb0IsRUFBcEIsSUFBb0IsRUFBRTtnQkFBakQsSUFBSSxtQkFBbUIsNkJBQUE7Z0JBQzFCLElBQUksbUJBQW1CLEtBQUssU0FBUyxFQUFFO29CQUNyQywrRUFBK0U7b0JBQy9FLGtDQUFrQztvQkFDbEMsSUFBSSxPQUFPLEVBQUU7d0JBQ1gsT0FBTyxDQUFDLEtBQUssQ0FBQywrQkFBK0IsRUFBRSxTQUFTLENBQUMsQ0FBQztxQkFDM0Q7b0JBRUQsc0dBQXNHO29CQUN0RyxNQUFNLEtBQUssQ0FBQyxpQ0FBaUMsR0FBRyxTQUFTLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxDQUFDO2lCQUM3RTthQUNGO1lBRUQsU0FBUyxDQUFDLFVBQVUsRUFBRSxDQUFDO1lBQ3ZCLFNBQVMsQ0FBQyxTQUFTLENBQUMsS0FBSSxDQUFDLFNBQVMsRUFBRSxFQUFFLEtBQUksQ0FBQyxDQUFDO1lBQzVDLG9CQUFvQixDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQztRQUN2QyxDQUFDLENBQUMsQ0FBQztJQUNMLENBQUM7SUFFRCxtREFBZSxHQUFmOztRQUNFLDBHQUEwRztRQUMxRyxJQUFJLElBQUksQ0FBQyxVQUFVLEVBQUU7WUFDbkIsSUFBSSxDQUFDLFNBQVMsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLEtBQUssRUFBRSxDQUFDLENBQUM7WUFDdEMsSUFBSSxDQUFDLG1CQUFtQixDQUFDLElBQUksQ0FBQyxLQUFLLEVBQUUsQ0FBQyxDQUFDO1lBQ3ZDLElBQUksQ0FBQyxVQUFVLEdBQUcsS0FBSyxDQUFDO1NBQ3pCO1FBQ0QsTUFBQSxJQUFJLENBQUMsaUJBQWlCLDBDQUFFLE9BQU8sRUFBRSxDQUFDO1FBQ2xDLElBQUksQ0FBQyxRQUFRLEdBQUcsSUFBSSxDQUFDO0lBQ3ZCLENBQUM7SUFFRCw4Q0FBVSxHQUFWO1FBQ0UsT0FBTyxJQUFJLENBQUMsUUFBUSxDQUFDO0lBQ3ZCLENBQUM7SUFFTyx1REFBbUIsR0FBM0IsVUFBNEIsU0FBcUM7UUFDL0QsU0FBUyxDQUFDLE9BQU8sRUFBRSxDQUFDO1FBRXBCLElBQUksU0FBUyxZQUFZLHFCQUFTLEVBQUU7WUFDbEMsS0FBMkIsVUFBeUIsRUFBekIsS0FBQSxTQUFTLENBQUMsYUFBYSxFQUFFLEVBQXpCLGNBQXlCLEVBQXpCLElBQXlCLEVBQUU7Z0JBQWpELElBQUksY0FBYyxTQUFBO2dCQUNyQixJQUFJLENBQUMsbUJBQW1CLENBQUMsY0FBYyxDQUFDLENBQUM7YUFDMUM7U0FDRjtJQUNILENBQUM7SUFFRCxzREFBa0IsR0FBbEI7UUFDRSxpQkFBTSxrQkFBa0IsV0FBRSxDQUFDO0lBQzdCLENBQUM7SUFDSCxnQ0FBQztBQUFELENBN0VBLEFBNkVDLENBN0V1QyxpQkFBaUIsR0E2RXhEO0FBY0Q7Ozs7O0dBS0c7QUFDSDtJQU9FLHVCQUFZLE1BQWlCO1FBQTdCLGlCQW9HQztRQXRHTyxrQkFBYSxHQUFvRCxFQUFFLENBQUM7UUFHMUUsSUFBSSxDQUFDLE1BQU0sR0FBRyxNQUFNLENBQUM7UUFFckIsc0ZBQXNGO1FBQ3RGLElBQU0sd0JBQXdCLEdBQUcsTUFBTSxDQUFDLG1CQUFtQixDQUFDLE1BQU0sQ0FBQyxjQUFjLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztRQUN2RixJQUFNLGFBQWEsa0JBQUksYUFBYSxHQUFLLHdCQUF3QixPQUFDLENBQUM7UUFDbkUsSUFBTSxPQUFPLEdBQUcsbUJBQW1CLENBQUMsTUFBTSxDQUFDLENBQUMsTUFBTSxDQUFDLFVBQUEsSUFBSSxJQUFJLE9BQUEsYUFBYSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBbEMsQ0FBa0MsQ0FBQyxDQUFDO1FBQy9GLGdEQUFnRDtRQUNoRCxJQUFJLE9BQU8sR0FBVSxFQUFFLENBQUM7UUFDeEIsSUFBSSxVQUFVLEdBQVUsRUFBRSxDQUFDO1FBRTNCLEtBQW1CLFVBQU8sRUFBUCxtQkFBTyxFQUFQLHFCQUFPLEVBQVAsSUFBTyxFQUFFO1lBQXZCLElBQUksTUFBTSxnQkFBQTtZQUNiLElBQUksT0FBYSxNQUFPLENBQUMsTUFBTSxDQUFDLEtBQUssVUFBVSxFQUFFO2dCQUMvQyxPQUFPLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDO2FBQ3RCO2lCQUFNO2dCQUNMLFVBQVUsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUM7YUFDekI7U0FDRjtRQUVELHdCQUF3QjtRQUN4QixJQUFJLE9BQU8sR0FBUSxFQUFFLENBQUM7Z0NBR2IsTUFBTTtZQUNiLE9BQU8sQ0FBQyxNQUFNLENBQUMsR0FBRztnQkFDaEIsdUVBQXVFO2dCQUN2RSxPQUFhLE1BQU8sQ0FBQyxNQUFNLENBQUMsQ0FBQyxLQUFLLENBQUMsTUFBTSxFQUFFLFNBQVMsQ0FBQyxDQUFDO1lBQ3hELENBQUMsQ0FBQzs7UUFMSixzR0FBc0c7UUFDdEcsS0FBbUIsVUFBTyxFQUFQLG1CQUFPLEVBQVAscUJBQU8sRUFBUCxJQUFPO1lBQXJCLElBQUksTUFBTSxnQkFBQTtvQkFBTixNQUFNO1NBS2Q7Z0NBR1EsUUFBUTtZQUNmLCtHQUErRztZQUMvRyxtQkFBbUI7WUFDbkIsSUFBTSxrQkFBa0IsR0FBRyxDQUFDLFVBQUMsTUFBaUI7Z0JBQzVDLE9BQU8sTUFBTSxFQUFFO29CQUNiLElBQU0sb0JBQWtCLEdBQUcsTUFBTSxDQUFDLHdCQUF3QixDQUFDLE1BQU0sRUFBRSxRQUFRLENBQUMsQ0FBQztvQkFDN0UsSUFBSSxvQkFBa0IsRUFBRTt3QkFDdEIsT0FBTyxvQkFBa0IsQ0FBQztxQkFDM0I7b0JBQ0QsMkdBQTJHO29CQUMzRyxNQUFNLEdBQUcsTUFBTSxDQUFDLGNBQWMsQ0FBQyxNQUFNLENBQUMsQ0FBQztpQkFDeEM7WUFDSCxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQztZQUVYLGdFQUFnRTtZQUNoRSxJQUFJLGtCQUFrQixJQUFJLENBQUMsa0JBQWtCLENBQUMsR0FBRyxJQUFJLGtCQUFrQixDQUFDLEdBQUcsQ0FBQyxFQUFFO2dCQUM1RSxNQUFNLENBQUMsY0FBYyxDQUFDLE9BQU8sRUFBRSxRQUFRLEVBQUU7b0JBQ3ZDLEdBQUcsRUFBRSxjQUFNLE9BQUEsa0JBQWtCLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsRUFBbkMsQ0FBbUM7b0JBQzlDLEdBQUcsRUFBRSxVQUFDLEtBQVUsSUFBSyxPQUFBLGtCQUFrQixDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsTUFBTSxFQUFFLEtBQUssQ0FBQyxFQUExQyxDQUEwQztpQkFDaEUsQ0FBQyxDQUFDO2FBQ0o7WUFDRCxxREFBcUQ7aUJBQ2hEO2dCQUNILE9BQU8sQ0FBQyxRQUFRLENBQUMsR0FBUyxNQUFPLENBQUMsUUFBUSxDQUFDLENBQUM7YUFDN0M7O1FBekJILHlEQUF5RDtRQUN6RCxLQUFxQixVQUFVLEVBQVYseUJBQVUsRUFBVix3QkFBVSxFQUFWLElBQVU7WUFBMUIsSUFBSSxRQUFRLG1CQUFBO29CQUFSLFFBQVE7U0F5QmhCO1FBRUQsNEZBQTRGO1FBQzVGLE9BQU8sQ0FBQyxFQUFFLEdBQUcsVUFBQyxTQUFzQixFQUFFLFFBQTZCO1lBQ2pFLE1BQU0sQ0FBQyxFQUFFLENBQUMsU0FBUyxFQUFFLFFBQVEsQ0FBQyxDQUFDO1lBRS9CLElBQUksQ0FBQyxLQUFJLENBQUMsYUFBYSxDQUFDLFNBQVMsQ0FBQyxFQUFFO2dCQUNsQyxLQUFJLENBQUMsYUFBYSxDQUFDLFNBQVMsQ0FBQyxHQUFHLEVBQUUsQ0FBQzthQUNwQztZQUVELEtBQUksQ0FBQyxhQUFhLENBQUMsU0FBUyxDQUFDLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDO1lBRTdDLE9BQU8sT0FBTyxDQUFDO1FBQ2pCLENBQUMsQ0FBQztRQUVGLG9HQUFvRztRQUNwRyxPQUFPLENBQUMsR0FBRyxHQUFHLFVBQUMsU0FBc0IsRUFBRSxRQUE2QjtZQUNsRSxNQUFNLENBQUMsR0FBRyxDQUFDLFNBQVMsRUFBRSxRQUFRLENBQUMsQ0FBQztZQUVoQyxJQUFJLEtBQUksQ0FBQyxhQUFhLENBQUMsU0FBUyxDQUFDLEVBQUU7Z0JBQ2pDLHVCQUFVLENBQUMsTUFBTSxDQUFDLEtBQUksQ0FBQyxhQUFhLENBQUMsU0FBUyxDQUFDLEVBQUUsUUFBUSxDQUFDLENBQUM7YUFDNUQ7WUFFRCxPQUFPLE9BQU8sQ0FBQztRQUNqQixDQUFDLENBQUM7UUFFRixPQUFPLENBQUMsYUFBYSxHQUFHLFVBQUMsS0FBa0IsRUFBRSxJQUFRO1lBQ25ELElBQUksS0FBSSxDQUFDLGFBQWEsQ0FBQyxLQUFLLENBQUMsRUFBRSxFQUFFLHdEQUF3RDtnQkFDdkYsZ0dBQWdHO2dCQUNoRyxJQUFJLGVBQWUsR0FBb0IsTUFBTSxDQUFDLE1BQU0sQ0FBQyxFQUFFLEVBQUU7b0JBQ3ZELFNBQVMsRUFBRSxJQUFJLENBQUMsR0FBRyxFQUFFO29CQUNyQixJQUFJLEVBQUUsS0FBSztvQkFDWCx1RUFBdUU7b0JBQ3ZFLFNBQVMsRUFBRSxJQUFJO2lCQUNoQixFQUFFLElBQUksQ0FBQyxDQUFDO2dCQUVULG1DQUFtQztnQkFDbkMsS0FBcUIsVUFBeUIsRUFBekIsS0FBQSxLQUFJLENBQUMsYUFBYSxDQUFDLEtBQUssQ0FBQyxFQUF6QixjQUF5QixFQUF6QixJQUF5QixFQUFFO29CQUEzQyxJQUFJLFFBQVEsU0FBQTtvQkFDZixRQUFRLENBQUMsZUFBZSxDQUFDLENBQUM7aUJBQzNCO2FBQ0Y7UUFDSCxDQUFDLENBQUM7UUFFRixJQUFJLENBQUMsT0FBTyxHQUFrQixPQUFPLENBQUM7SUFDeEMsQ0FBQztJQUVEOzs7T0FHRztJQUNILGlDQUFTLEdBQVQ7UUFDRSxPQUFPLElBQUksQ0FBQyxPQUFPLENBQUM7SUFDdEIsQ0FBQztJQUVEOztPQUVHO0lBQ0gsMENBQWtCLEdBQWxCO1FBQ0UsSUFBSTtZQUNGLG9GQUFvRjtZQUNwRixzR0FBc0c7WUFDdEcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxTQUFTLEVBQUUsQ0FBQztTQUN6QjtRQUFDLE9BQU8sS0FBSyxFQUFFO1lBQ2QsSUFBSSxLQUFLLFlBQVksSUFBSSxDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsMEJBQTBCLEVBQUU7Z0JBQ25FLDBHQUEwRztnQkFDMUcsbUdBQW1HO2dCQUNuRyxJQUFJLENBQUMsYUFBYSxHQUFHLEVBQUUsQ0FBQzthQUN6QjtTQUNGO1FBRUQsS0FBSyxJQUFJLFNBQVMsSUFBSSxJQUFJLENBQUMsYUFBYSxFQUFFO1lBQ3hDLEtBQXFCLFVBQTZCLEVBQTdCLEtBQUEsSUFBSSxDQUFDLGFBQWEsQ0FBQyxTQUFTLENBQUMsRUFBN0IsY0FBNkIsRUFBN0IsSUFBNkIsRUFBRTtnQkFBL0MsSUFBSSxRQUFRLFNBQUE7Z0JBQ2YsSUFBSSxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsU0FBd0IsRUFBRSxRQUFRLENBQUMsQ0FBQzthQUNyRDtTQUNGO0lBQ0gsQ0FBQztJQUNILG9CQUFDO0FBQUQsQ0EzSUEsQUEySUMsSUFBQTtBQTNJWSxzQ0FBYTtBQTZJMUIsU0FBUyxtQkFBbUIsQ0FBQyxNQUFjO0lBQ3pDLElBQUksS0FBSyxHQUFhLEVBQUUsQ0FBQztJQUV6QixPQUFPLE1BQU0sRUFBRTtRQUNiLElBQU0sUUFBUSxHQUFHLE1BQU0sQ0FBQyxtQkFBbUIsQ0FBQyxNQUFNLENBQUMsQ0FBQyxNQUFNLENBQUMsVUFBQSxJQUFJLElBQUksT0FBQSxLQUFLLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUExQixDQUEwQixDQUFDLENBQUM7UUFDL0YsS0FBSyxHQUFHLEtBQUssQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLENBQUM7UUFDL0Isd0JBQXdCO1FBQ3hCLE1BQU0sR0FBRyxNQUFNLENBQUMsY0FBYyxDQUFDLE1BQU0sQ0FBQyxDQUFDO0tBQ3hDO0lBRUQsT0FBTyxLQUFLLENBQUM7QUFDZixDQUFDOzs7Ozs7QUMvK0JELG9EQUFpRDtBQUVqRDs7R0FFRztBQUNILElBQWlCLE9BQU8sQ0ErQnZCO0FBL0JELFdBQWlCLE9BQU87SUFLdEIsU0FBZ0IsWUFBWSxDQUFDLFNBQXFDLEVBQUUsS0FBNEI7UUFDOUYsSUFBSSxtQkFBbUIsR0FBRyxVQUFDLFNBQXFDLEVBQUUsTUFBbUM7WUFDbkcsS0FBSyxDQUFDLFNBQVMsRUFBRSxNQUFNLENBQUMsQ0FBQztZQUV6QiwrREFBK0Q7WUFDL0QsSUFBSSxTQUFTLFlBQVkscUJBQVMsRUFBRTtnQkFDbEMsS0FBMkIsVUFBeUIsRUFBekIsS0FBQSxTQUFTLENBQUMsYUFBYSxFQUFFLEVBQXpCLGNBQXlCLEVBQXpCLElBQXlCLEVBQUU7b0JBQWpELElBQUksY0FBYyxTQUFBO29CQUNyQixtQkFBbUIsQ0FBQyxjQUFjLEVBQUUsU0FBUyxDQUFDLENBQUM7aUJBQ2hEO2FBQ0Y7UUFDSCxDQUFDLENBQUM7UUFFRix3Q0FBd0M7UUFDeEMsbUJBQW1CLENBQUMsU0FBUyxDQUFDLENBQUM7SUFDakMsQ0FBQztJQWRlLG9CQUFZLGVBYzNCLENBQUE7SUFFRCwyRUFBMkU7SUFDM0UsSUFBWSxPQVFYO0lBUkQsV0FBWSxPQUFPO1FBQ2pCLGdEQUFjLENBQUE7UUFDZCw0Q0FBWSxDQUFBO1FBQ1osa0RBQWUsQ0FBQTtRQUNmLGdEQUFjLENBQUE7UUFDZCx3Q0FBVSxDQUFBO1FBQ1Ysb0NBQVEsQ0FBQTtRQUNSLHNDQUFTLENBQUE7SUFDWCxDQUFDLEVBUlcsT0FBTyxHQUFQLGVBQU8sS0FBUCxlQUFPLFFBUWxCO0FBQ0gsQ0FBQyxFQS9CZ0IsT0FBTyxHQUFQLGVBQU8sS0FBUCxlQUFPLFFBK0J2Qjs7Ozs7O0FDckNELHFEQUEyRDtBQVEzRDs7R0FFRztBQUNIO0lBVUUsMEJBQTZCLE1BQWlCO1FBQTlDLGlCQVdDO1FBWDRCLFdBQU0sR0FBTixNQUFNLENBQVc7UUFON0IsV0FBTSxHQUFHO1lBQ3hCLFNBQVMsRUFBRSxJQUFJLGlDQUFlLEVBQThDO1NBQzdFLENBQUM7UUFLQSxJQUFJLENBQUMsV0FBVyxFQUFFLENBQUM7UUFFbkIsSUFBTSxPQUFPLEdBQUc7WUFDZCxLQUFJLENBQUMsY0FBYyxFQUFFLENBQUM7UUFDeEIsQ0FBQyxDQUFDO1FBRUYsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLFdBQVcsQ0FBQyxZQUFZLEVBQUUsT0FBTyxDQUFDLENBQUM7UUFDNUQsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLFdBQVcsQ0FBQyxhQUFhLEVBQUUsT0FBTyxDQUFDLENBQUM7UUFDN0QsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLFdBQVcsQ0FBQyxLQUFLLEVBQUUsT0FBTyxDQUFDLENBQUM7UUFDckQsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLFdBQVcsQ0FBQyxPQUFPLEVBQUUsT0FBTyxDQUFDLENBQUM7SUFDekQsQ0FBQztJQUVELG9DQUFTLEdBQVQsVUFBVSxNQUFjO1FBQ3RCLElBQUksQ0FBQyxNQUFNLENBQUMsU0FBUyxDQUFDLE1BQU0sRUFBRSxnQkFBZ0IsQ0FBQyxVQUFVLENBQUMsQ0FBQztJQUM3RCxDQUFDO0lBRUQsb0NBQVMsR0FBVDtRQUNFLE9BQU8sSUFBSSxDQUFDLE1BQU0sQ0FBQyxTQUFTLEVBQUUsQ0FBQztJQUNqQyxDQUFDO0lBRUQsbUNBQVEsR0FBUixVQUFTLEtBQWM7UUFDckIsSUFBSSxLQUFLLEVBQUU7WUFDVCxJQUFJLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxVQUFVLENBQUMsQ0FBQztTQUMvQzthQUFNO1lBQ0wsSUFBSSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsZ0JBQWdCLENBQUMsVUFBVSxDQUFDLENBQUM7U0FDakQ7SUFDSCxDQUFDO0lBRUQsc0NBQVcsR0FBWDtRQUNFLElBQUksSUFBSSxDQUFDLE9BQU8sRUFBRSxJQUFJLElBQUksQ0FBQyxTQUFTLEVBQUUsS0FBSyxDQUFDLEVBQUU7WUFDNUMsdUdBQXVHO1lBQ3ZHLGlEQUFpRDtZQUNqRCxJQUFJLENBQUMsWUFBWSxFQUFFLENBQUM7U0FDckI7YUFBTTtZQUNMLElBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLENBQUM7U0FDckI7SUFDSCxDQUFDO0lBRUQsa0NBQU8sR0FBUDtRQUNFLE9BQU8sSUFBSSxDQUFDLE1BQU0sQ0FBQyxPQUFPLEVBQUUsQ0FBQztJQUMvQixDQUFDO0lBRUQ7O09BRUc7SUFDSCxzQ0FBVyxHQUFYO1FBQ0UsSUFBSSxDQUFDLFlBQVksR0FBRyxJQUFJLENBQUMsU0FBUyxFQUFFLENBQUM7SUFDdkMsQ0FBQztJQUVEOztPQUVHO0lBQ0gsdUNBQVksR0FBWjtRQUNFLElBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLFlBQVksS0FBSyxDQUFDLENBQUMsQ0FBQztRQUN2QyxJQUFJLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxZQUFZLENBQUMsQ0FBQztJQUNwQyxDQUFDO0lBRUQsMENBQWUsR0FBZjtRQUNFLE9BQU8sSUFBSSxnQkFBZ0IsQ0FBQyxJQUFJLENBQUMsQ0FBQztJQUNwQyxDQUFDO0lBRUQseUNBQWMsR0FBZDtRQUNFLElBQU0sV0FBVyxHQUFHLElBQUksQ0FBQyxPQUFPLEVBQUUsQ0FBQztRQUNuQyxJQUFNLFlBQVksR0FBRyxJQUFJLENBQUMsU0FBUyxFQUFFLENBQUM7UUFFdEMsSUFBTSxPQUFPLEdBQUcsV0FBVyxJQUFJLFlBQVksS0FBSyxDQUFDLENBQUM7UUFDbEQsSUFBTSxRQUFRLEdBQUcsV0FBVyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLFlBQVksQ0FBQztRQUVoRCxJQUFJLENBQUMsV0FBVyxFQUFFLENBQUM7UUFFbkIsSUFBSSxDQUFDLE1BQU0sQ0FBQyxTQUFTLENBQUMsUUFBUSxDQUFDLElBQUksRUFBRSxFQUFFLE1BQU0sRUFBRSxRQUFRLEVBQUUsS0FBSyxFQUFFLE9BQU8sRUFBRSxDQUFDLENBQUM7SUFDN0UsQ0FBQztJQUtELHNCQUFJLHVDQUFTO1FBSGI7O1dBRUc7YUFDSDtZQUNFLE9BQU8sSUFBSSxDQUFDLE1BQU0sQ0FBQyxTQUFTLENBQUMsUUFBUSxFQUFFLENBQUM7UUFDMUMsQ0FBQzs7O09BQUE7SUF2RnVCLDJCQUFVLEdBQUcscUJBQUgsQUFBd0IsQ0FBQztJQXdGN0QsdUJBQUM7Q0ExRkQsQUEwRkMsSUFBQTtBQUVEO0lBRUUsMEJBQW9CLFVBQTRCO1FBQTVCLGVBQVUsR0FBVixVQUFVLENBQWtCO1FBQzlDLDhHQUE4RztRQUM5RyxxQ0FBcUM7UUFDckMsVUFBVSxDQUFDLFdBQVcsRUFBRSxDQUFDO0lBQzNCLENBQUM7SUFFRCxpQ0FBTSxHQUFOLFVBQU8sTUFBYztRQUNuQixzR0FBc0c7UUFDdEcsSUFBSSxDQUFDLFVBQVUsQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDaEMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLENBQUM7SUFDcEMsQ0FBQztJQUVELGlDQUFNLEdBQU4sVUFBTyxNQUFjO1FBQ25CLElBQUksTUFBTSxLQUFLLENBQUMsRUFBRTtZQUNoQiwyR0FBMkc7WUFDM0csc0dBQXNHO1lBQ3RHLGlCQUFpQjtZQUNqQixpR0FBaUc7WUFDakcsNERBQTREO1lBQzVELElBQUksQ0FBQyxVQUFVLENBQUMsWUFBWSxFQUFFLENBQUM7WUFDL0IsSUFBSSxDQUFDLFVBQVUsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLENBQUM7U0FDaEM7YUFBTTtZQUNMLElBQUksQ0FBQyxVQUFVLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxDQUFDO1lBQ2hDLElBQUksQ0FBQyxVQUFVLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxDQUFDO1lBQ2xDLElBQUksQ0FBQyxVQUFVLENBQUMsV0FBVyxFQUFFLENBQUM7U0FDL0I7SUFDSCxDQUFDO0lBQ0gsdUJBQUM7QUFBRCxDQTdCQSxBQTZCQyxJQUFBO0FBN0JZLDRDQUFnQjs7Ozs7O0FDbkc3QiwrQkFBK0I7QUFDL0IsSUFBTSxVQUFVLEdBQUcsRUFBRSxDQUFDO0FBRXRCLCtCQUErQjtBQUMvQixJQUFNLGlCQUFpQixHQUFHLENBQUMsQ0FBQztBQUM1QixJQUFJLFNBQVMsR0FBVyxDQUFDLENBQUM7QUFFMUIsSUFBTSxpQkFBaUIsR0FBRyxFQUFFLENBQUMsQ0FBQyw4QkFBOEI7QUFFNUQsSUFBSyxTQUtKO0FBTEQsV0FBSyxTQUFTO0lBQ1osd0JBQVcsQ0FBQTtJQUNYLDhCQUFpQixDQUFBO0lBQ2pCLDBCQUFhLENBQUE7SUFDYiw0QkFBZSxDQUFBO0FBQ2pCLENBQUMsRUFMSSxTQUFTLEtBQVQsU0FBUyxRQUtiO0FBRUQsSUFBSyxrQkFHSjtBQUhELFdBQUssa0JBQWtCO0lBQ3JCLHlDQUFtQixDQUFBO0lBQ25CLHdDQUFrQixDQUFBO0FBQ3BCLENBQUMsRUFISSxrQkFBa0IsS0FBbEIsa0JBQWtCLFFBR3RCO0FBSUQsSUFBTSxhQUFhLEdBQUcsSUFBSSxHQUFHLENBQXVCO0lBQ2xELENBQUMsU0FBUyxDQUFDLEdBQUcsRUFBRSxTQUFTLENBQUMsTUFBTSxDQUFDO0lBQ2pDLENBQUMsU0FBUyxDQUFDLE1BQU0sRUFBRSxTQUFTLENBQUMsR0FBRyxDQUFDO0lBQ2pDLENBQUMsU0FBUyxDQUFDLElBQUksRUFBRSxTQUFTLENBQUMsS0FBSyxDQUFDO0lBQ2pDLENBQUMsU0FBUyxDQUFDLEtBQUssRUFBRSxTQUFTLENBQUMsSUFBSSxDQUFDO0NBQ2xDLENBQUMsQ0FBQztBQUVIOzs7R0FHRztBQUNILElBQU0sbUJBQW1CLEdBQUcsVUFBQyxlQUFvQixFQUFFLEdBQWtCO0lBQ25FLElBQUksR0FBRyxDQUFDLE1BQU0sRUFBRTtRQUNkLGVBQWUsQ0FBQyxHQUFHLENBQUMsVUFBVSxFQUFFLFVBQVUsQ0FBQyxDQUFDO1FBQzVDLGVBQWUsQ0FBQyxHQUFHLENBQUMsY0FBYyxFQUFFLFdBQVcsQ0FBQyxDQUFDO0tBQ2xEO1NBQU07UUFDTCxlQUFlLENBQUMsR0FBRyxDQUFDLFVBQVUsRUFBRSxVQUFVLENBQUMsQ0FBQztRQUM1QyxlQUFlLENBQUMsR0FBRyxDQUFDLGVBQWUsRUFBRSxZQUFZLENBQUMsQ0FBQztRQUNuRCxlQUFlLENBQUMsR0FBRyxDQUFDLFVBQVUsRUFBRSxRQUFRLENBQUMsQ0FBQztRQUMxQyxlQUFlLENBQUMsR0FBRyxDQUFDLFdBQVcsRUFBRSxRQUFRLENBQUMsQ0FBQztLQUM1QztJQUNELGVBQWUsQ0FBQyxHQUFHLENBQUMsU0FBUyxFQUFFLGFBQWEsQ0FBQyxDQUFDO0FBQ2hELENBQUMsQ0FBQztBQUVGOzs7R0FHRztBQUNILElBQU0sZUFBZSxHQUFHLFVBQ3RCLGVBQW9CLEVBQ3BCLEVBQTRCLEVBQzVCLFNBQW9CLEVBQ3BCLHNCQUE4QjtRQUY1QixTQUFTLGVBQUE7SUFHWCxRQUFRLFNBQVMsRUFBRTtRQUNqQixLQUFLLFFBQVE7WUFDWCx3QkFBd0IsQ0FDdEIsZUFBZSxFQUFFLFNBQVMsRUFBRSxzQkFBc0IsQ0FBQyxDQUFDO1lBQ3RELE1BQU07UUFDUixLQUFLLEtBQUs7WUFDUixxQkFBcUIsQ0FDbkIsZUFBZSxFQUFFLFNBQVMsRUFBRSxzQkFBc0IsQ0FBQyxDQUFDO0tBQ3pEO0FBQ0gsQ0FBQyxDQUFDO0FBRUY7OztHQUdHO0FBQ0gsSUFBTSxVQUFVLEdBQUcsVUFDakIsZUFBb0IsRUFDcEIsR0FBa0IsRUFDbEIsU0FBb0IsRUFDcEIsbUJBQXlCO0lBRXpCLElBQU0sb0JBQW9CLEdBQUcsYUFBYSxDQUFDLEdBQUcsQ0FBQyxTQUFTLENBQUMsQ0FBQztJQUMxRCxJQUFJLEdBQUcsQ0FBQyxJQUFJLEtBQUssTUFBTSxJQUFJLEdBQUcsQ0FBQyxRQUFRLEVBQUU7UUFDdkMsZUFBZSxDQUFDLEdBQUcsQ0FBQyxvQkFBb0IsRUFBRSxHQUFHLENBQUMsQ0FBQztRQUMvQyxPQUFPO0tBQ1I7SUFDRCxJQUFJLEdBQUcsQ0FBQyxJQUFJLEtBQUssTUFBTSxJQUFJLENBQUMsR0FBRyxDQUFDLFFBQVEsRUFBRTtRQUN4QyxPQUFPO0tBQ1I7SUFFRCxJQUFJLG9CQUFvQixHQUFHLFVBQVUsQ0FBQyxHQUFHLENBQUMsSUFBYyxDQUFDLENBQUM7SUFFMUQsSUFBSSxHQUFHLENBQUMsV0FBVyxFQUFFO1FBQ25CLElBQUksVUFBVSxHQUFHLE1BQU0sQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDbEMsSUFBSSxVQUFVLEdBQUcsQ0FBQyxFQUFFO1lBQ2xCLFVBQVUsR0FBRyxpQkFBaUIsR0FBRyxVQUFVLENBQUM7U0FDN0M7UUFFRCxJQUFNLFlBQVUsR0FBRyxtQkFBbUIsQ0FBQyxNQUFNLEdBQUcsaUJBQWlCLENBQUM7UUFDbEUsSUFBTSxvQkFBb0IsR0FBRyxZQUFVLEdBQUcsVUFBVSxDQUFDO1FBQ3JELG9CQUFvQixHQUFHLENBQUMsR0FBRyxHQUFHLG9CQUFvQixDQUFDLEdBQUcsbUJBQW1CLENBQUMsTUFBTSxDQUFDO0tBQ2xGO0lBRUQsSUFBSSxHQUFHLENBQUMsU0FBUyxLQUFLLEtBQUs7UUFDekIsZUFBZSxDQUFDLEdBQUcsQ0FDakIsb0JBQW9CLEVBQUUsVUFBRyxvQkFBb0IsTUFBRyxDQUFDLENBQUM7SUFDdEQsZUFBZSxDQUFDLGVBQWUsRUFBRSxHQUFHLEVBQUUsU0FBUyxFQUFFLG9CQUFvQixDQUFDLENBQUM7QUFDekUsQ0FBQyxDQUFDO0FBRUY7OztHQUdHO0FBQ0gsSUFBTSwwQ0FBMEMsR0FBRyxVQUNqRCxlQUFvQixFQUFFLEdBQWtCLEVBQ3hDLG1CQUF5QjtJQUV6QixRQUFRLEdBQUcsQ0FBQyxRQUFRLEVBQUU7UUFDdEIsS0FBSyxFQUFFO1lBQ0wsZUFBZSxDQUFDLEdBQUcsQ0FBQyxjQUFjLEVBQUUsZUFBZSxDQUFDLENBQUM7WUFDckQsZUFBZSxDQUFDLEdBQUcsQ0FBQyxTQUFTLENBQUMsTUFBTSxFQUFFLEdBQUcsQ0FBQyxDQUFDO1lBQzNDLFVBQVUsQ0FBQyxlQUFlLEVBQUUsR0FBRyxFQUFFLFNBQVMsQ0FBQyxNQUFNLEVBQUUsbUJBQW1CLENBQUMsQ0FBQztZQUN4RSxNQUFNO1FBQ1IsS0FBSyxrQkFBa0IsQ0FBQyxZQUFZO1lBQ2xDLG1DQUFtQyxDQUNqQyxlQUFlLEVBQUUsU0FBUyxDQUFDLEtBQUssRUFBRSxHQUFHLEVBQUUsbUJBQW1CLENBQUMsQ0FBQztZQUM5RCxNQUFNO1FBQ1IsS0FBSyxrQkFBa0IsQ0FBQyxXQUFXO1lBQ2pDLG1DQUFtQyxDQUNqQyxlQUFlLEVBQUUsU0FBUyxDQUFDLElBQUksRUFBRSxHQUFHLEVBQUUsbUJBQW1CLENBQUMsQ0FBQztZQUM3RCxNQUFNO0tBQ1A7QUFDSCxDQUFDLENBQUM7QUFFRixJQUFNLG1DQUFtQyxHQUFHLFVBQzFDLGVBQW9CLEVBQ3BCLFNBQW1DLEVBQ25DLEdBQWtCLEVBQ2xCLG1CQUF5QjtJQUV2QixJQUFNLFdBQVcsR0FBRyxTQUFTLEtBQUssU0FBUyxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBQ2pELGFBQWEsQ0FBQyxDQUFDLENBQUMsYUFBYSxDQUFDO0lBRWhDLGVBQWUsQ0FBQyxHQUFHLENBQUMsY0FBYyxFQUFFLFdBQVcsQ0FBQyxDQUFDO0lBQ2pELGVBQWUsQ0FBQyxHQUFHLENBQUMsU0FBUyxDQUFDLEdBQUcsRUFBRSxHQUFHLENBQUMsQ0FBQztJQUN4QyxVQUFVLENBQUMsZUFBZSxFQUFFLEdBQUcsRUFBRSxTQUFTLEVBQUUsbUJBQW1CLENBQUMsQ0FBQztBQUNyRSxDQUFDLENBQUM7QUFFRjs7O0dBR0c7QUFDSCxJQUFNLG1CQUFtQixHQUFHLFVBQUMsZUFBb0IsRUFBRSxHQUFrQixFQUFFLFNBQW9CO0lBQ3pGLHFEQUFxRDtJQUNyRCxJQUFJLEdBQUcsQ0FBQyxRQUFRLEtBQUssTUFBTSxFQUFFO1FBQzNCLGVBQWUsQ0FBQyxHQUFHLENBQUMsU0FBUyxFQUFFLEdBQUcsQ0FBQyxDQUFDO0tBQ3JDO1NBQU07UUFDTCxRQUFRLEdBQUcsQ0FBQyxhQUFhLEVBQUU7WUFDekIsS0FBSyxXQUFXO2dCQUNkLGVBQWUsQ0FBQyxHQUFHLENBQUMsU0FBUyxFQUFFLFVBQUcsR0FBRyxDQUFDLFFBQVEsTUFBRyxDQUFDLENBQUM7Z0JBQ25ELGVBQWUsQ0FBQyxHQUFHLENBQUMsYUFBYSxDQUFDLEdBQUcsQ0FBQyxTQUFTLENBQUMsRUFBRSxNQUFNLENBQUMsQ0FBQztnQkFDMUQsZUFBZSxDQUFDLEdBQUcsQ0FBQyxpQkFBaUIsRUFBRSxZQUFZLENBQUMsQ0FBQztnQkFDckQsTUFBTTtZQUNSLEtBQUssUUFBUTtnQkFDWCxlQUFlLENBQUMsR0FBRyxDQUFDLFNBQVMsRUFBRSxVQUFHLEdBQUcsQ0FBQyxRQUFRLEdBQUcsR0FBRyxDQUFDLElBQUksR0FBRyxDQUFDLE1BQUcsQ0FBQyxDQUFDO2dCQUNsRSxlQUFlLENBQUMsR0FBRyxDQUFDLGFBQWEsQ0FBQyxHQUFHLENBQUMsU0FBUyxDQUFDLEVBQUUsTUFBTSxDQUFDLENBQUM7Z0JBQzFELGVBQWUsQ0FBQyxHQUFHLENBQUMsaUJBQWlCLEVBQUUsUUFBUSxDQUFDLENBQUM7Z0JBQ2pELE1BQU07WUFDUixLQUFLLFlBQVk7Z0JBQ2YsZUFBZSxDQUFDLEdBQUcsQ0FBQyxTQUFTLEVBQUUsTUFBTSxDQUFDLENBQUM7Z0JBQ3ZDLGVBQWUsQ0FBQyxHQUFHLENBQUMsYUFBYSxDQUFDLEdBQUcsQ0FBQyxTQUFTLENBQUMsRUFBRSxVQUFHLEdBQUcsR0FBRyxHQUFHLENBQUMsUUFBUSxNQUFHLENBQUMsQ0FBQztnQkFDNUUsZUFBZSxDQUFDLEdBQUcsQ0FBQyxpQkFBaUIsRUFBRSxVQUFVLENBQUMsQ0FBQztnQkFDbkQsTUFBTTtZQUNSO2dCQUNFLGVBQWUsQ0FBQyxHQUFHLENBQUMsU0FBUyxFQUFFLFVBQUcsR0FBRyxDQUFDLFFBQVEsTUFBRyxDQUFDLENBQUM7Z0JBQ25ELGVBQWUsQ0FBQyxHQUFHLENBQUMsaUJBQWlCLEVBQUUsWUFBWSxDQUFDLENBQUM7U0FDeEQ7S0FDRjtBQUNILENBQUMsQ0FBQztBQUVGLElBQU0sVUFBVSxHQUFHLFVBQUMsU0FBaUI7SUFDbkMsT0FBQSxTQUFTLENBQUMsS0FBSyxDQUFDLFFBQVEsQ0FBQyxDQUFDLE1BQU07QUFBaEMsQ0FBZ0MsQ0FBQztBQUVuQyxJQUFNLHdCQUF3QixHQUFHLFVBQy9CLGVBQW9CLEVBQ3BCLFNBQW9CLEVBQ3BCLHNCQUE4QjtJQUM5QixRQUFRLFNBQVMsRUFBRTtRQUNqQixLQUFLLFNBQVMsQ0FBQyxNQUFNO1lBQ25CLGVBQWUsQ0FBQyxHQUFHLENBQUMsV0FBVyxFQUFFLGtCQUFrQixDQUFDLENBQUM7WUFDckQsTUFBTTtRQUNSLEtBQUssU0FBUyxDQUFDLElBQUk7WUFDakIsZUFBZSxDQUFDLEdBQUcsQ0FBQyxXQUFXLEVBQUUsaUJBQWlCLENBQUMsQ0FBQztZQUNwRCxNQUFNO1FBQ1IsS0FBSyxTQUFTLENBQUMsS0FBSztZQUNsQixlQUFlLENBQUMsR0FBRyxDQUFDLFdBQVcsRUFBRSxrQkFBa0IsQ0FBQyxDQUFDO1lBQ3JELE1BQU07S0FDVDtBQUNILENBQUMsQ0FBQztBQUVGLElBQU0scUJBQXFCLEdBQUcsVUFDNUIsZUFBb0IsRUFDcEIsU0FBb0IsRUFDcEIsTUFBYztJQUNWLElBQU0sNkJBQTZCLEdBQUcsU0FBUyxDQUFDO0lBQ2hELGVBQWUsQ0FBQyxHQUFHLENBQUMsNkJBQTZCLEVBQUUsVUFBRyxHQUFHLEdBQUcsTUFBTSxNQUFHLENBQUMsQ0FBQztBQUM3RSxDQUFDLENBQUM7QUFFRjs7R0FFRztBQUNILElBQWlCLFFBQVEsQ0FpRHhCO0FBakRELFdBQWlCLFFBQVE7SUFDViwyQkFBa0IsR0FBRyxVQUNoQyxZQUEyQixFQUMzQixtQkFBeUI7UUFFekIsSUFBTSxHQUFHLEdBQUcsWUFBWSxDQUFDLEdBQUcsQ0FBQztRQUM3QixJQUFNLGVBQWUsR0FBRyxZQUFZLENBQUMsYUFBYSxFQUFFLENBQUM7UUFHckQsbUJBQW1CLENBQUMsZUFBZSxFQUFFLEdBQUcsQ0FBQyxDQUFDO1FBRTFDLFNBQVMsR0FBRyxVQUFVLENBQUMsWUFBWSxDQUFDLE9BQU8sRUFBRSxDQUFDLENBQUM7UUFDL0MsMENBQTBDLENBQUMsZUFBZSxFQUFFLEdBQUcsRUFBRSxtQkFBbUIsQ0FBQyxDQUFDO1FBRXRGLHVEQUF1RDtRQUN2RCxJQUFNLFNBQVMsR0FBRyxHQUFHLENBQUMsS0FBSyxLQUFLLFFBQVEsQ0FBQyxDQUFDLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDO1FBQ2hFLGVBQWUsQ0FBQyxHQUFHLENBQUMsWUFBWSxFQUFFLFNBQVMsQ0FBQyxDQUFDO1FBRTdDLDZDQUE2QztRQUM3QyxJQUFNLGFBQWEsR0FBRyxHQUFHLENBQUMsSUFBSSxDQUFDO1FBQy9CLElBQUksR0FBRyxDQUFDLFFBQVEsS0FBSyxFQUFFLEVBQUU7WUFDdkIsZUFBZSxDQUFDLEdBQUcsQ0FBQyxPQUFPLEVBQUUsVUFBRyxhQUFhLE1BQUcsQ0FBQyxDQUFDO1lBQ2xELG1CQUFtQixDQUFDLGVBQWUsRUFBRSxHQUFHLEVBQUUsU0FBUyxDQUFDLElBQUksQ0FBQyxDQUFDO1NBQzNEO2FBQU07WUFDTCxlQUFlLENBQUMsR0FBRyxDQUFDLFFBQVEsRUFBRSxVQUFHLGFBQWEsTUFBRyxDQUFDLENBQUM7WUFDbkQsbUJBQW1CLENBQUMsZUFBZSxFQUFFLEdBQUcsRUFBRSxTQUFTLENBQUMsR0FBRyxDQUFDLENBQUM7U0FDMUQ7SUFDSCxDQUFDLENBQUM7SUFFRjs7T0FFRztJQUNVLDJCQUFrQixHQUFHLFVBQ2hDLGVBQXdDLEVBQ3hDLE1BQTJCLEVBQzNCLFdBQWlCO1FBRWpCLElBQU0sa0JBQWtCLEdBQUcsZUFBZSxDQUFDLGFBQWEsRUFBRSxDQUFDO1FBQzNELElBQU0sZUFBZSxHQUFHLFdBQVcsQ0FBQyxLQUFLLEdBQUcsTUFBTSxDQUFDLGVBQWUsR0FBRyxHQUFHLEdBQUcsQ0FBQyxDQUFDLFdBQVcsQ0FBQyxLQUFLLEdBQUcsTUFBTSxDQUFDLEtBQUssR0FBRyxHQUFHLENBQUMsR0FBRyxNQUFNLENBQUMsYUFBYSxHQUFHLEdBQUcsQ0FBQyxDQUFDO1FBQ25KLElBQU0sZUFBZSxHQUFHLFdBQVcsQ0FBQyxNQUFNLEdBQUcsTUFBTSxDQUFDLGVBQWUsR0FBRyxHQUFHLEdBQUcsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxLQUFLLEdBQUcsVUFBVSxDQUFDLEdBQUcsTUFBTSxDQUFDLGFBQWEsR0FBRyxHQUFHLENBQUMsQ0FBQztRQUN2SSxrQkFBa0IsQ0FBQyxHQUFHLENBQUMsVUFBVSxFQUFFLFVBQVUsQ0FBQyxDQUFDO1FBQy9DLGtCQUFrQixDQUFDLEdBQUcsQ0FBQyxVQUFVLEVBQUUsUUFBUSxDQUFDLENBQUM7UUFDN0Msa0JBQWtCLENBQUMsR0FBRyxDQUFDLE9BQU8sRUFBRSxVQUFHLE1BQU0sQ0FBQyxLQUFLLE1BQUcsQ0FBQyxDQUFDO1FBQ3BELGtCQUFrQixDQUFDLEdBQUcsQ0FBQyxTQUFTLENBQUMsSUFBSSxFQUFFLFVBQUcsZUFBZSxPQUFJLENBQUMsQ0FBQztRQUMvRCxrQkFBa0IsQ0FBQyxHQUFHLENBQUMsU0FBUyxDQUFDLEtBQUssRUFBRSxPQUFPLENBQUMsQ0FBQztRQUNqRCxrQkFBa0IsQ0FBQyxHQUFHLENBQUMsU0FBUyxDQUFDLEdBQUcsRUFBRSxVQUFHLGVBQWUsT0FBSSxDQUFDLENBQUM7UUFDOUQsa0JBQWtCLENBQUMsR0FBRyxDQUFDLFNBQVMsQ0FBQyxNQUFNLEVBQUUsT0FBTyxDQUFDLENBQUM7UUFDbEQsa0JBQWtCLENBQUMsR0FBRyxDQUFDLFFBQVEsRUFBRSxVQUFHLE1BQU0sQ0FBQyxLQUFLLEdBQUcsVUFBVSxPQUFJLENBQUMsQ0FBQztJQUNyRSxDQUFDLENBQUM7QUFDSixDQUFDLEVBakRnQixRQUFRLEdBQVIsZ0JBQVEsS0FBUixnQkFBUSxRQWlEeEIiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwiLyoqXG4gKiBAY2F0ZWdvcnkgVXRpbHNcbiAqL1xuZXhwb3J0IG5hbWVzcGFjZSBBcnJheVV0aWxzIHtcbiAgLyoqXG4gICAqIFJlbW92ZXMgYW4gaXRlbSBmcm9tIGFuIGFycmF5LlxuICAgKiBAcGFyYW0gYXJyYXkgdGhlIGFycmF5IHRoYXQgbWF5IGNvbnRhaW4gdGhlIGl0ZW0gdG8gcmVtb3ZlXG4gICAqIEBwYXJhbSBpdGVtIHRoZSBpdGVtIHRvIHJlbW92ZSBmcm9tIHRoZSBhcnJheVxuICAgKiBAcmV0dXJucyB7YW55fSB0aGUgcmVtb3ZlZCBpdGVtIG9yIG51bGwgaWYgaXQgd2Fzbid0IHBhcnQgb2YgdGhlIGFycmF5XG4gICAqL1xuICBleHBvcnQgZnVuY3Rpb24gcmVtb3ZlPFQ+KGFycmF5OiBUW10sIGl0ZW06IFQpOiBUIHwgbnVsbCB7XG4gICAgbGV0IGluZGV4ID0gYXJyYXkuaW5kZXhPZihpdGVtKTtcblxuICAgIGlmIChpbmRleCA+IC0xKSB7XG4gICAgICByZXR1cm4gYXJyYXkuc3BsaWNlKGluZGV4LCAxKVswXTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICB9XG59XG4iLCJpbXBvcnQgeyBMaXN0SXRlbSwgTGlzdFNlbGVjdG9yLCBMaXN0U2VsZWN0b3JDb25maWcgfSBmcm9tICcuL2NvbXBvbmVudHMvbGlzdHNlbGVjdG9yJztcbmltcG9ydCB7IFVJSW5zdGFuY2VNYW5hZ2VyIH0gZnJvbSAnLi91aW1hbmFnZXInO1xuaW1wb3J0IHsgQXVkaW9UcmFja0V2ZW50LCBQbGF5ZXJBUEksIEF1ZGlvVHJhY2sgfSBmcm9tICdiaXRtb3Zpbi1wbGF5ZXInO1xuaW1wb3J0IHsgaTE4biB9IGZyb20gJy4vbG9jYWxpemF0aW9uL2kxOG4nO1xuXG4vKipcbiAqIEhlbHBlciBjbGFzcyB0byBoYW5kbGUgYWxsIGF1ZGlvIHRyYWNrcyByZWxhdGVkIGV2ZW50c1xuICpcbiAqIFRoaXMgY2xhc3MgbGlzdGVucyB0byBwbGF5ZXIgZXZlbnRzIGFzIHdlbGwgYXMgdGhlIGBMaXN0U2VsZWN0b3JgIGV2ZW50IGlmIHNlbGVjdGlvbiBjaGFuZ2VkXG4gKlxuICogQGNhdGVnb3J5IFV0aWxzXG4gKi9cbmV4cG9ydCBjbGFzcyBBdWRpb1RyYWNrU3dpdGNoSGFuZGxlciB7XG5cbiAgcHJpdmF0ZSBwbGF5ZXI6IFBsYXllckFQSTtcbiAgcHJpdmF0ZSBsaXN0RWxlbWVudDogTGlzdFNlbGVjdG9yPExpc3RTZWxlY3RvckNvbmZpZz47XG4gIHByaXZhdGUgdWltYW5hZ2VyOiBVSUluc3RhbmNlTWFuYWdlcjtcblxuICBjb25zdHJ1Y3RvcihwbGF5ZXI6IFBsYXllckFQSSwgZWxlbWVudDogTGlzdFNlbGVjdG9yPExpc3RTZWxlY3RvckNvbmZpZz4sIHVpbWFuYWdlcjogVUlJbnN0YW5jZU1hbmFnZXIpIHtcbiAgICB0aGlzLnBsYXllciA9IHBsYXllcjtcbiAgICB0aGlzLmxpc3RFbGVtZW50ID0gZWxlbWVudDtcbiAgICB0aGlzLnVpbWFuYWdlciA9IHVpbWFuYWdlcjtcblxuICAgIHRoaXMuYmluZFNlbGVjdGlvbkV2ZW50KCk7XG4gICAgdGhpcy5iaW5kUGxheWVyRXZlbnRzKCk7XG4gICAgdGhpcy5yZWZyZXNoQXVkaW9UcmFja3MoKTtcbiAgfVxuXG4gIHByaXZhdGUgYmluZFNlbGVjdGlvbkV2ZW50KCk6IHZvaWQge1xuICAgIHRoaXMubGlzdEVsZW1lbnQub25JdGVtU2VsZWN0ZWQuc3Vic2NyaWJlKChfLCB2YWx1ZTogc3RyaW5nKSA9PiB7XG4gICAgICB0aGlzLnBsYXllci5zZXRBdWRpbyh2YWx1ZSk7XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIGJpbmRQbGF5ZXJFdmVudHMoKTogdm9pZCB7XG4gICAgLy8gVXBkYXRlIHNlbGVjdGlvbiB3aGVuIHNlbGVjdGVkIHRyYWNrIGhhcyBjaGFuZ2VkXG4gICAgdGhpcy5wbGF5ZXIub24odGhpcy5wbGF5ZXIuZXhwb3J0cy5QbGF5ZXJFdmVudC5BdWRpb0NoYW5nZWQsIHRoaXMuc2VsZWN0Q3VycmVudEF1ZGlvVHJhY2spO1xuICAgIC8vIFVwZGF0ZSB0cmFja3Mgd2hlbiBzb3VyY2UgZ29lcyBhd2F5XG4gICAgdGhpcy5wbGF5ZXIub24odGhpcy5wbGF5ZXIuZXhwb3J0cy5QbGF5ZXJFdmVudC5Tb3VyY2VVbmxvYWRlZCwgdGhpcy5yZWZyZXNoQXVkaW9UcmFja3MpO1xuICAgIC8vIFVwZGF0ZSB0cmFja3Mgd2hlbiB0aGUgcGVyaW9kIHdpdGhpbiBhIHNvdXJjZSBjaGFuZ2VzXG4gICAgdGhpcy5wbGF5ZXIub24odGhpcy5wbGF5ZXIuZXhwb3J0cy5QbGF5ZXJFdmVudC5QZXJpb2RTd2l0Y2hlZCwgdGhpcy5yZWZyZXNoQXVkaW9UcmFja3MpO1xuICAgIC8vIFVwZGF0ZSB0cmFja3Mgd2hlbiBhIHRyYWNrIGlzIGFkZGVkIG9yIHJlbW92ZWRcbiAgICB0aGlzLnBsYXllci5vbih0aGlzLnBsYXllci5leHBvcnRzLlBsYXllckV2ZW50LkF1ZGlvQWRkZWQsIHRoaXMuYWRkQXVkaW9UcmFjayk7XG4gICAgdGhpcy5wbGF5ZXIub24odGhpcy5wbGF5ZXIuZXhwb3J0cy5QbGF5ZXJFdmVudC5BdWRpb1JlbW92ZWQsIHRoaXMucmVtb3ZlQXVkaW9UcmFjayk7XG4gICAgdGhpcy51aW1hbmFnZXIuZ2V0Q29uZmlnKCkuZXZlbnRzLm9uVXBkYXRlZC5zdWJzY3JpYmUodGhpcy5yZWZyZXNoQXVkaW9UcmFja3MpO1xuICB9XG5cbiAgcHJpdmF0ZSBhZGRBdWRpb1RyYWNrID0gKGV2ZW50OiBBdWRpb1RyYWNrRXZlbnQpID0+IHtcbiAgICBjb25zdCBhdWRpb1RyYWNrID0gZXZlbnQudHJhY2s7XG4gICAgaWYgKCF0aGlzLmxpc3RFbGVtZW50Lmhhc0l0ZW0oYXVkaW9UcmFjay5pZCkpIHtcbiAgICAgIHRoaXMubGlzdEVsZW1lbnQuYWRkSXRlbShhdWRpb1RyYWNrLmlkLCBpMThuLmdldExvY2FsaXplcihhdWRpb1RyYWNrLmxhYmVsKSwgdHJ1ZSk7XG4gICAgfVxuICB9O1xuXG4gIHByaXZhdGUgcmVtb3ZlQXVkaW9UcmFjayA9IChldmVudDogQXVkaW9UcmFja0V2ZW50KSA9PiB7XG4gICAgY29uc3QgYXVkaW9UcmFjayA9IGV2ZW50LnRyYWNrO1xuICAgIGlmICh0aGlzLmxpc3RFbGVtZW50Lmhhc0l0ZW0oYXVkaW9UcmFjay5pZCkpIHtcbiAgICAgIHRoaXMubGlzdEVsZW1lbnQucmVtb3ZlSXRlbShhdWRpb1RyYWNrLmlkKTtcbiAgICB9XG4gIH07XG5cbiAgcHJpdmF0ZSBzZWxlY3RDdXJyZW50QXVkaW9UcmFjayA9ICgpID0+IHtcbiAgICBsZXQgY3VycmVudEF1ZGlvVHJhY2sgPSB0aGlzLnBsYXllci5nZXRBdWRpbygpO1xuXG4gICAgLy8gSExTIHN0cmVhbXMgZG9uJ3QgYWx3YXlzIHByb3ZpZGUgdGhpcywgc28gd2UgaGF2ZSB0byBjaGVja1xuICAgIGlmIChjdXJyZW50QXVkaW9UcmFjaykge1xuICAgICAgdGhpcy5saXN0RWxlbWVudC5zZWxlY3RJdGVtKGN1cnJlbnRBdWRpb1RyYWNrLmlkKTtcbiAgICB9XG4gIH07XG5cbiAgcHJpdmF0ZSByZWZyZXNoQXVkaW9UcmFja3MgPSAoKSA9PiB7XG4gICAgY29uc3QgYXVkaW9UcmFja3MgPSB0aGlzLnBsYXllci5nZXRBdmFpbGFibGVBdWRpbygpO1xuICAgIGNvbnN0IGF1ZGlvVHJhY2tUb0xpc3RJdGVtID0gKGF1ZGlvVHJhY2s6IEF1ZGlvVHJhY2spOiBMaXN0SXRlbSA9PiB7XG4gICAgICByZXR1cm4geyBrZXk6IGF1ZGlvVHJhY2suaWQsIGxhYmVsOiBhdWRpb1RyYWNrLmxhYmVsIH07XG4gICAgfTtcblxuICAgIHRoaXMubGlzdEVsZW1lbnQuc3luY2hyb25pemVJdGVtcyhhdWRpb1RyYWNrcy5tYXAoYXVkaW9UcmFja1RvTGlzdEl0ZW0pKTtcbiAgICB0aGlzLnNlbGVjdEN1cnJlbnRBdWRpb1RyYWNrKCk7XG4gIH07XG59XG4iLCJkZWNsYXJlIGdsb2JhbCB7XG4gIGludGVyZmFjZSBOYXZpZ2F0b3Ige1xuICAgIG1zTWF4VG91Y2hQb2ludHM/OiBudW1iZXI7XG4gIH1cbn1cblxuLyoqXG4gKiBAY2F0ZWdvcnkgVXRpbHNcbiAqL1xuZXhwb3J0IGNsYXNzIEJyb3dzZXJVdGlscyB7XG4gIC8vIGlzTW9iaWxlIG9ubHkgbmVlZHMgdG8gYmUgZXZhbHVhdGVkIG9uY2UgKGl0IGNhbm5vdCBjaGFuZ2UgZHVyaW5nIGEgYnJvd3NlciBzZXNzaW9uKVxuICAvLyBNb2JpbGUgZGV0ZWN0aW9uIGFjY29yZGluZyB0byBNb3ppbGxhIHJlY29tbWVuZGF0aW9uOiBcIkluIHN1bW1hcnksIHdlIHJlY29tbWVuZCBsb29raW5nIGZvciB0aGUgc3RyaW5nIOKAnE1vYmnigJ1cbiAgLy8gYW55d2hlcmUgaW4gdGhlIFVzZXIgQWdlbnQgdG8gZGV0ZWN0IGEgbW9iaWxlIGRldmljZS5cIlxuICAvLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9IVFRQL0Jyb3dzZXJfZGV0ZWN0aW9uX3VzaW5nX3RoZV91c2VyX2FnZW50XG4gIHN0YXRpYyBnZXQgaXNNb2JpbGUoKTogYm9vbGVhbiB7XG4gICAgaWYgKCF0aGlzLndpbmRvd0V4aXN0cygpKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHJldHVybiBuYXZpZ2F0b3IgJiYgbmF2aWdhdG9yLnVzZXJBZ2VudCAmJiAvTW9iaS8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KTtcbiAgfVxuXG4gIHN0YXRpYyBnZXQgaXNDaHJvbWUoKTogYm9vbGVhbiB7XG4gICAgaWYgKCF0aGlzLndpbmRvd0V4aXN0cygpKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHJldHVybiBuYXZpZ2F0b3IgJiYgbmF2aWdhdG9yLnVzZXJBZ2VudCAmJiAvQ2hyb21lLy50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpO1xuICB9XG5cbiAgc3RhdGljIGdldCBpc0FuZHJvaWQoKTogYm9vbGVhbiB7XG4gICAgaWYgKCF0aGlzLndpbmRvd0V4aXN0cygpKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHJldHVybiBuYXZpZ2F0b3IgJiYgbmF2aWdhdG9yLnVzZXJBZ2VudCAmJiAvQW5kcm9pZC8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSAmJiAhdGhpcy5pc0hpc2Vuc2U7XG4gIH1cblxuICBzdGF0aWMgZ2V0IGlzSU9TKCk6IGJvb2xlYW4ge1xuICAgIGlmICghdGhpcy53aW5kb3dFeGlzdHMoKSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICByZXR1cm4gbmF2aWdhdG9yICYmIG5hdmlnYXRvci51c2VyQWdlbnQgJiYgL2lQYWR8aVBob25lfGlQb2QvLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCk7XG4gIH1cblxuICBzdGF0aWMgZ2V0IGlzTWFjSW50ZWwoKTogYm9vbGVhbiB7XG4gICAgaWYgKCF0aGlzLndpbmRvd0V4aXN0cygpKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHJldHVybiBuYXZpZ2F0b3IgJiYgbmF2aWdhdG9yLnVzZXJBZ2VudCAmJiBuYXZpZ2F0b3IucGxhdGZvcm0gPT09ICdNYWNJbnRlbCc7XG4gIH1cblxuICBzdGF0aWMgZ2V0IGlzSGlzZW5zZSgpOiBib29sZWFuIHtcbiAgICBpZiAoIXRoaXMud2luZG93RXhpc3RzKCkpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgcmV0dXJuIG5hdmlnYXRvciAmJiBuYXZpZ2F0b3IudXNlckFnZW50ICYmIC9IaXNlbnNlLy50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpO1xuICB9XG5cbiAgc3RhdGljIGdldCBpc1BsYXlTdGF0aW9uKCk6IGJvb2xlYW4ge1xuICAgIGlmICghdGhpcy53aW5kb3dFeGlzdHMoKSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICByZXR1cm4gbmF2aWdhdG9yICYmIG5hdmlnYXRvci51c2VyQWdlbnQgJiYgL1BsYXlTdGF0aW9uL2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KTtcbiAgfVxuXG4gIHN0YXRpYyBnZXQgaXNXZWJPcygpOiBib29sZWFuIHtcbiAgICBpZiAoIXRoaXMud2luZG93RXhpc3RzKCkpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgcmV0dXJuIChcbiAgICAgIG5hdmlnYXRvciAmJlxuICAgICAgbmF2aWdhdG9yLnVzZXJBZ2VudCAmJlxuICAgICAgKG5hdmlnYXRvci51c2VyQWdlbnQuaW5jbHVkZXMoJ1dlYjBTJykgfHwgbmF2aWdhdG9yLnVzZXJBZ2VudC5pbmNsdWRlcygnTmV0Q2FzdCcpKVxuICAgICk7XG4gIH1cblxuICBzdGF0aWMgZ2V0IGlzVGl6ZW4oKTogYm9vbGVhbiB7XG4gICAgaWYgKCF0aGlzLndpbmRvd0V4aXN0cygpKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHJldHVybiBuYXZpZ2F0b3IgJiYgbmF2aWdhdG9yLnVzZXJBZ2VudCAmJiAvVGl6ZW4vLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCk7XG4gIH1cblxuICAvLyBodHRwczovL2hhY2tzLm1vemlsbGEub3JnLzIwMTMvMDQvZGV0ZWN0aW5nLXRvdWNoLWl0cy10aGUtd2h5LW5vdC10aGUtaG93L1xuICBzdGF0aWMgZ2V0IGlzVG91Y2hTdXBwb3J0ZWQoKSB7XG4gICAgaWYgKCF0aGlzLndpbmRvd0V4aXN0cygpKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHJldHVybiAnb250b3VjaHN0YXJ0JyBpbiB3aW5kb3cgfHwgbmF2aWdhdG9yICYmIG5hdmlnYXRvci51c2VyQWdlbnQgJiYgKG5hdmlnYXRvci5tYXhUb3VjaFBvaW50cyA+IDAgfHwgbmF2aWdhdG9yLm1zTWF4VG91Y2hQb2ludHMgPiAwKTtcbiAgfVxuXG4gIHByaXZhdGUgc3RhdGljIHdpbmRvd0V4aXN0cygpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCc7XG4gIH1cbn1cbiIsImltcG9ydCB7IENsaWNrT3ZlcmxheSwgQ2xpY2tPdmVybGF5Q29uZmlnIH0gZnJvbSAnLi9jbGlja292ZXJsYXknO1xuaW1wb3J0IHsgVUlJbnN0YW5jZU1hbmFnZXIgfSBmcm9tICcuLi91aW1hbmFnZXInO1xuaW1wb3J0IHsgQWQsIEFkRXZlbnQsIFBsYXllckFQSSB9IGZyb20gJ2JpdG1vdmluLXBsYXllcic7XG5cbi8qKlxuICogQSBzaW1wbGUgY2xpY2sgY2FwdHVyZSBvdmVybGF5IGZvciBjbGlja1Rocm91Z2hVcmxzIG9mIGFkcy5cbiAqXG4gKiBAY2F0ZWdvcnkgQ29tcG9uZW50c1xuICovXG5leHBvcnQgY2xhc3MgQWRDbGlja092ZXJsYXkgZXh0ZW5kcyBDbGlja092ZXJsYXkge1xuICBjb25zdHJ1Y3Rvcihjb25maWc6IENsaWNrT3ZlcmxheUNvbmZpZyA9IHt9KSB7XG4gICAgc3VwZXIoY29uZmlnKTtcblxuICAgIHRoaXMuY29uZmlnID0gdGhpcy5tZXJnZUNvbmZpZyhjb25maWcsIHtcbiAgICAgIGFjY2VwdHNUb3VjaFdpdGhVaUhpZGRlbjogdHJ1ZSxcbiAgICB9LCB0aGlzLmNvbmZpZyk7XG4gIH1cblxuICBjb25maWd1cmUocGxheWVyOiBQbGF5ZXJBUEksIHVpbWFuYWdlcjogVUlJbnN0YW5jZU1hbmFnZXIpOiB2b2lkIHtcbiAgICBzdXBlci5jb25maWd1cmUocGxheWVyLCB1aW1hbmFnZXIpO1xuXG4gICAgbGV0IGNsaWNrVGhyb3VnaENhbGxiYWNrOiAoKSA9PiB2b2lkID0gbnVsbDtcblxuICAgIHBsYXllci5vbihwbGF5ZXIuZXhwb3J0cy5QbGF5ZXJFdmVudC5BZFN0YXJ0ZWQsIChldmVudDogQWRFdmVudCkgPT4ge1xuICAgICAgbGV0IGFkID0gZXZlbnQuYWQ7XG4gICAgICB0aGlzLnNldFVybChhZC5jbGlja1Rocm91Z2hVcmwpO1xuICAgICAgY2xpY2tUaHJvdWdoQ2FsbGJhY2sgPSBhZC5jbGlja1Rocm91Z2hVcmxPcGVuZWQ7XG4gICAgfSk7XG5cbiAgICAvLyBDbGVhciBjbGljay10aHJvdWdoIFVSTCB3aGVuIGFkIGhhcyBmaW5pc2hlZFxuICAgIGxldCBhZEZpbmlzaGVkSGFuZGxlciA9ICgpID0+IHtcbiAgICAgIHRoaXMuc2V0VXJsKG51bGwpO1xuICAgIH07XG5cbiAgICBwbGF5ZXIub24ocGxheWVyLmV4cG9ydHMuUGxheWVyRXZlbnQuQWRGaW5pc2hlZCwgYWRGaW5pc2hlZEhhbmRsZXIpO1xuICAgIHBsYXllci5vbihwbGF5ZXIuZXhwb3J0cy5QbGF5ZXJFdmVudC5BZFNraXBwZWQsIGFkRmluaXNoZWRIYW5kbGVyKTtcbiAgICBwbGF5ZXIub24ocGxheWVyLmV4cG9ydHMuUGxheWVyRXZlbnQuQWRFcnJvciwgYWRGaW5pc2hlZEhhbmRsZXIpO1xuXG4gICAgdGhpcy5vbkNsaWNrLnN1YnNjcmliZSgoKSA9PiB7XG4gICAgICAvLyBQYXVzZSB0aGUgYWQgd2hlbiBvdmVybGF5IGlzIGNsaWNrZWRcbiAgICAgIHBsYXllci5wYXVzZSgndWktYWQtY2xpY2stb3ZlcmxheScpO1xuXG4gICAgICBpZiAoY2xpY2tUaHJvdWdoQ2FsbGJhY2spIHtcbiAgICAgICAgY2xpY2tUaHJvdWdoQ2FsbGJhY2soKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxufVxuIiwiaW1wb3J0IHtMYWJlbCwgTGFiZWxDb25maWd9IGZyb20gJy4vbGFiZWwnO1xuaW1wb3J0IHtVSUluc3RhbmNlTWFuYWdlcn0gZnJvbSAnLi4vdWltYW5hZ2VyJztcbmltcG9ydCB7U3RyaW5nVXRpbHN9IGZyb20gJy4uL3N0cmluZ3V0aWxzJztcbmltcG9ydCB7IEFkRXZlbnQsIExpbmVhckFkLCBQbGF5ZXJBUEkgfSBmcm9tICdiaXRtb3Zpbi1wbGF5ZXInO1xuaW1wb3J0IHsgaTE4biB9IGZyb20gJy4uL2xvY2FsaXphdGlvbi9pMThuJztcblxuLyoqXG4gKiBBIGxhYmVsIHRoYXQgZGlzcGxheXMgYSBtZXNzYWdlIGFib3V0IGEgcnVubmluZyBhZCwgb3B0aW9uYWxseSB3aXRoIGEgY291bnRkb3duLlxuICpcbiAqIEBjYXRlZ29yeSBDb21wb25lbnRzXG4gKi9cbmV4cG9ydCBjbGFzcyBBZE1lc3NhZ2VMYWJlbCBleHRlbmRzIExhYmVsPExhYmVsQ29uZmlnPiB7XG5cbiAgY29uc3RydWN0b3IoY29uZmlnOiBMYWJlbENvbmZpZyA9IHt9KSB7XG4gICAgc3VwZXIoY29uZmlnKTtcblxuICAgIHRoaXMuY29uZmlnID0gdGhpcy5tZXJnZUNvbmZpZyhjb25maWcsIHtcbiAgICAgIGNzc0NsYXNzOiAndWktbGFiZWwtYWQtbWVzc2FnZScsXG4gICAgICB0ZXh0OiBpMThuLmdldExvY2FsaXplcignYWRzLnJlbWFpbmluZ1RpbWUnKSAsXG4gICAgfSwgdGhpcy5jb25maWcpO1xuICB9XG5cbiAgY29uZmlndXJlKHBsYXllcjogUGxheWVyQVBJLCB1aW1hbmFnZXI6IFVJSW5zdGFuY2VNYW5hZ2VyKTogdm9pZCB7XG4gICAgc3VwZXIuY29uZmlndXJlKHBsYXllciwgdWltYW5hZ2VyKTtcblxuICAgIGxldCBjb25maWcgPSB0aGlzLmdldENvbmZpZygpO1xuICAgIGxldCB0ZXh0ID0gY29uZmlnLnRleHQ7XG5cbiAgICBsZXQgdXBkYXRlTWVzc2FnZUhhbmRsZXIgPSAoKSA9PiB7XG4gICAgICB0aGlzLnNldFRleHQoU3RyaW5nVXRpbHMucmVwbGFjZUFkTWVzc2FnZVBsYWNlaG9sZGVycyhpMThuLnBlcmZvcm1Mb2NhbGl6YXRpb24odGV4dCksIG51bGwsIHBsYXllcikpO1xuICAgIH07XG5cbiAgICBsZXQgYWRTdGFydEhhbmRsZXIgPSAoZXZlbnQ6IEFkRXZlbnQpID0+IHtcbiAgICAgIGxldCB1aUNvbmZpZyA9IChldmVudC5hZCBhcyBMaW5lYXJBZCkudWlDb25maWc7XG4gICAgICB0ZXh0ID0gdWlDb25maWcgJiYgdWlDb25maWcubWVzc2FnZSB8fCBjb25maWcudGV4dDtcblxuICAgICAgdXBkYXRlTWVzc2FnZUhhbmRsZXIoKTtcblxuICAgICAgcGxheWVyLm9uKHBsYXllci5leHBvcnRzLlBsYXllckV2ZW50LlRpbWVDaGFuZ2VkLCB1cGRhdGVNZXNzYWdlSGFuZGxlcik7XG4gICAgfTtcblxuICAgIGxldCBhZEVuZEhhbmRsZXIgPSAoKSA9PiB7XG4gICAgICBwbGF5ZXIub2ZmKHBsYXllci5leHBvcnRzLlBsYXllckV2ZW50LlRpbWVDaGFuZ2VkLCB1cGRhdGVNZXNzYWdlSGFuZGxlcik7XG4gICAgfTtcblxuICAgIHBsYXllci5vbihwbGF5ZXIuZXhwb3J0cy5QbGF5ZXJFdmVudC5BZFN0YXJ0ZWQsIGFkU3RhcnRIYW5kbGVyKTtcbiAgICBwbGF5ZXIub24ocGxheWVyLmV4cG9ydHMuUGxheWVyRXZlbnQuQWRTa2lwcGVkLCBhZEVuZEhhbmRsZXIpO1xuICAgIHBsYXllci5vbihwbGF5ZXIuZXhwb3J0cy5QbGF5ZXJFdmVudC5BZEVycm9yLCBhZEVuZEhhbmRsZXIpO1xuICAgIHBsYXllci5vbihwbGF5ZXIuZXhwb3J0cy5QbGF5ZXJFdmVudC5BZEZpbmlzaGVkLCBhZEVuZEhhbmRsZXIpO1xuICB9XG59IiwiaW1wb3J0IHsgQnV0dG9uQ29uZmlnLCBCdXR0b24gfSBmcm9tICcuL2J1dHRvbic7XG5pbXBvcnQgeyBVSUluc3RhbmNlTWFuYWdlciB9IGZyb20gJy4uL3VpbWFuYWdlcic7XG5pbXBvcnQgeyBTdHJpbmdVdGlscyB9IGZyb20gJy4uL3N0cmluZ3V0aWxzJztcbmltcG9ydCB7IEFkRXZlbnQsIExpbmVhckFkLCBQbGF5ZXJBUEkgfSBmcm9tICdiaXRtb3Zpbi1wbGF5ZXInO1xuXG4vKipcbiAqIENvbmZpZ3VyYXRpb24gaW50ZXJmYWNlIGZvciB0aGUge0BsaW5rIEFkU2tpcEJ1dHRvbn0uXG4gKlxuICogQGNhdGVnb3J5IENvbmZpZ3NcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBBZFNraXBCdXR0b25Db25maWcgZXh0ZW5kcyBCdXR0b25Db25maWcge1xuICAvKipcbiAgICogTWVzc2FnZSB3aGljaCBnZXRzIGRpc3BsYXllZCBkdXJpbmcgdGhlIGNvdW50ZG93biBpcyBhY3RpdmUuXG4gICAqIFN1cHBvcnRlZCBwbGFjZWhvbGRlcnM6IGxvb2sgYXQge0BsaW5rIFN0cmluZ1V0aWxzLnJlcGxhY2VBZE1lc3NhZ2VQbGFjZWhvbGRlcnN9XG4gICAqL1xuICB1bnRpbFNraXBwYWJsZU1lc3NhZ2U/OiBzdHJpbmc7XG4gIC8qKlxuICAgKiBNZXNzYWdlIGRpc3BsYXllZCB3aGVuIHRoZSBhZCBpcyBza2lwcGFibGUuXG4gICAqIFN1cHBvcnRlZCBwbGFjZWhvbGRlcnM6IGxvb2sgYXQge0BsaW5rIFN0cmluZ1V0aWxzLnJlcGxhY2VBZE1lc3NhZ2VQbGFjZWhvbGRlcnN9XG4gICAqL1xuICBza2lwcGFibGVNZXNzYWdlPzogc3RyaW5nO1xufVxuXG4vKipcbiAqIEEgYnV0dG9uIHRoYXQgaXMgZGlzcGxheWVkIGR1cmluZyBhZHMgYW5kIGNhbiBiZSB1c2VkIHRvIHNraXAgdGhlIGFkLlxuICpcbiAqIEBjYXRlZ29yeSBCdXR0b25zXG4gKi9cbmV4cG9ydCBjbGFzcyBBZFNraXBCdXR0b24gZXh0ZW5kcyBCdXR0b248QWRTa2lwQnV0dG9uQ29uZmlnPiB7XG5cbiAgY29uc3RydWN0b3IoY29uZmlnOiBBZFNraXBCdXR0b25Db25maWcgPSB7fSkge1xuICAgIHN1cGVyKGNvbmZpZyk7XG5cbiAgICB0aGlzLmNvbmZpZyA9IHRoaXMubWVyZ2VDb25maWcoY29uZmlnLCA8QWRTa2lwQnV0dG9uQ29uZmlnPntcbiAgICAgIGNzc0NsYXNzOiAndWktYnV0dG9uLWFkLXNraXAnLFxuICAgICAgdW50aWxTa2lwcGFibGVNZXNzYWdlOiAnU2tpcCBhZCBpbiB7cmVtYWluaW5nVGltZX0nLFxuICAgICAgc2tpcHBhYmxlTWVzc2FnZTogJ1NraXAgYWQnLFxuICAgICAgYWNjZXB0c1RvdWNoV2l0aFVpSGlkZGVuOiB0cnVlLFxuICAgIH0sIHRoaXMuY29uZmlnKTtcbiAgfVxuXG4gIGNvbmZpZ3VyZShwbGF5ZXI6IFBsYXllckFQSSwgdWltYW5hZ2VyOiBVSUluc3RhbmNlTWFuYWdlcik6IHZvaWQge1xuICAgIHN1cGVyLmNvbmZpZ3VyZShwbGF5ZXIsIHVpbWFuYWdlcik7XG5cbiAgICBsZXQgY29uZmlnID0gdGhpcy5nZXRDb25maWcoKTtcbiAgICBsZXQgdW50aWxTa2lwcGFibGVNZXNzYWdlID0gY29uZmlnLnVudGlsU2tpcHBhYmxlTWVzc2FnZTtcbiAgICBsZXQgc2tpcHBhYmxlTWVzc2FnZSA9IGNvbmZpZy5za2lwcGFibGVNZXNzYWdlO1xuICAgIGxldCBza2lwT2Zmc2V0ID0gLTE7XG5cbiAgICBsZXQgdXBkYXRlU2tpcE1lc3NhZ2VIYW5kbGVyID0gKCkgPT4ge1xuICAgICAgdGhpcy5zaG93KCk7XG5cbiAgICAgIC8vIFVwZGF0ZSB0aGUgc2tpcCBtZXNzYWdlIG9uIHRoZSBidXR0b25cbiAgICAgIGlmIChwbGF5ZXIuZ2V0Q3VycmVudFRpbWUoKSA8IHNraXBPZmZzZXQpIHtcbiAgICAgICAgdGhpcy5zZXRUZXh0KFN0cmluZ1V0aWxzLnJlcGxhY2VBZE1lc3NhZ2VQbGFjZWhvbGRlcnModW50aWxTa2lwcGFibGVNZXNzYWdlLCBza2lwT2Zmc2V0LCBwbGF5ZXIpKTtcbiAgICAgICAgdGhpcy5kaXNhYmxlKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnNldFRleHQoc2tpcHBhYmxlTWVzc2FnZSk7XG4gICAgICAgIHRoaXMuZW5hYmxlKCk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIGxldCBhZFN0YXJ0SGFuZGxlciA9IChldmVudDogQWRFdmVudCkgPT4ge1xuICAgICAgbGV0IGFkID0gZXZlbnQuYWQgYXMgTGluZWFyQWQ7XG4gICAgICBza2lwT2Zmc2V0ID0gYWQuc2tpcHBhYmxlQWZ0ZXI7XG4gICAgICB1bnRpbFNraXBwYWJsZU1lc3NhZ2UgPSBhZC51aUNvbmZpZyAmJiBhZC51aUNvbmZpZy51bnRpbFNraXBwYWJsZU1lc3NhZ2UgfHwgY29uZmlnLnVudGlsU2tpcHBhYmxlTWVzc2FnZTtcbiAgICAgIHNraXBwYWJsZU1lc3NhZ2UgPSBhZC51aUNvbmZpZyAmJiBhZC51aUNvbmZpZy5za2lwcGFibGVNZXNzYWdlIHx8IGNvbmZpZy5za2lwcGFibGVNZXNzYWdlO1xuXG4gICAgICAvLyBEaXNwbGF5IHRoaXMgYnV0dG9uIG9ubHkgaWYgYWQgaXMgc2tpcHBhYmxlLlxuICAgICAgLy8gTm9uLXNraXBwYWJsZSBhZHMgd2lsbCByZXR1cm4gLTEgZm9yIHNraXBwYWJsZUFmdGVyIGZvciBwbGF5ZXIgdmVyc2lvbiA8IHY4LjMuMC5cbiAgICAgIGlmICh0eXBlb2Ygc2tpcE9mZnNldCA9PT0gJ251bWJlcicgJiYgc2tpcE9mZnNldCA+PSAwKSB7XG4gICAgICAgIHVwZGF0ZVNraXBNZXNzYWdlSGFuZGxlcigpO1xuICAgICAgICBwbGF5ZXIub24ocGxheWVyLmV4cG9ydHMuUGxheWVyRXZlbnQuVGltZUNoYW5nZWQsIHVwZGF0ZVNraXBNZXNzYWdlSGFuZGxlcik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmhpZGUoKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgbGV0IGFkRW5kSGFuZGxlciA9ICgpID0+IHtcbiAgICAgIHBsYXllci5vZmYocGxheWVyLmV4cG9ydHMuUGxheWVyRXZlbnQuVGltZUNoYW5nZWQsIHVwZGF0ZVNraXBNZXNzYWdlSGFuZGxlcik7XG4gICAgfTtcblxuICAgIHBsYXllci5vbihwbGF5ZXIuZXhwb3J0cy5QbGF5ZXJFdmVudC5BZFN0YXJ0ZWQsIGFkU3RhcnRIYW5kbGVyKTtcbiAgICBwbGF5ZXIub24ocGxheWVyLmV4cG9ydHMuUGxheWVyRXZlbnQuQWRTa2lwcGVkLCBhZEVuZEhhbmRsZXIpO1xuICAgIHBsYXllci5vbihwbGF5ZXIuZXhwb3J0cy5QbGF5ZXJFdmVudC5BZEVycm9yLCBhZEVuZEhhbmRsZXIpO1xuICAgIHBsYXllci5vbihwbGF5ZXIuZXhwb3J0cy5QbGF5ZXJFdmVudC5BZEZpbmlzaGVkLCBhZEVuZEhhbmRsZXIpO1xuXG4gICAgdGhpcy5vbkNsaWNrLnN1YnNjcmliZSgoKSA9PiB7XG4gICAgICAvLyBUcnkgdG8gc2tpcCB0aGUgYWQgKHRoaXMgb25seSB3b3JrcyBpZiBpdCBpcyBza2lwcGFibGUgc28gd2UgZG9uJ3QgbmVlZCB0byB0YWtlIGV4dHJhIGNhcmUgb2YgdGhhdCBoZXJlKVxuICAgICAgcGxheWVyLmFkcy5za2lwKCk7XG4gICAgfSk7XG4gIH1cbn0iLCJpbXBvcnQge1RvZ2dsZUJ1dHRvbiwgVG9nZ2xlQnV0dG9uQ29uZmlnfSBmcm9tICcuL3RvZ2dsZWJ1dHRvbic7XG5pbXBvcnQge1VJSW5zdGFuY2VNYW5hZ2VyfSBmcm9tICcuLi91aW1hbmFnZXInO1xuaW1wb3J0IHsgUGxheWVyQVBJIH0gZnJvbSAnYml0bW92aW4tcGxheWVyJztcbmltcG9ydCB7IGkxOG4gfSBmcm9tICcuLi9sb2NhbGl6YXRpb24vaTE4bic7XG5cbi8qKlxuICogQSBidXR0b24gdGhhdCB0b2dnbGVzIEFwcGxlIEFpclBsYXkuXG4gKlxuICogQGNhdGVnb3J5IEJ1dHRvbnNcbiAqL1xuZXhwb3J0IGNsYXNzIEFpclBsYXlUb2dnbGVCdXR0b24gZXh0ZW5kcyBUb2dnbGVCdXR0b248VG9nZ2xlQnV0dG9uQ29uZmlnPiB7XG5cbiAgY29uc3RydWN0b3IoY29uZmlnOiBUb2dnbGVCdXR0b25Db25maWcgPSB7fSkge1xuICAgIHN1cGVyKGNvbmZpZyk7XG5cbiAgICB0aGlzLmNvbmZpZyA9IHRoaXMubWVyZ2VDb25maWcoY29uZmlnLCB7XG4gICAgICBjc3NDbGFzczogJ3VpLWFpcnBsYXl0b2dnbGVidXR0b24nLFxuICAgICAgdGV4dDogaTE4bi5nZXRMb2NhbGl6ZXIoJ2FwcGxlQWlycGxheScpLFxuICAgIH0sIHRoaXMuY29uZmlnKTtcbiAgfVxuXG4gIGNvbmZpZ3VyZShwbGF5ZXI6IFBsYXllckFQSSwgdWltYW5hZ2VyOiBVSUluc3RhbmNlTWFuYWdlcik6IHZvaWQge1xuICAgIHN1cGVyLmNvbmZpZ3VyZShwbGF5ZXIsIHVpbWFuYWdlcik7XG5cbiAgICBpZiAoIXBsYXllci5pc0FpcnBsYXlBdmFpbGFibGUpIHtcbiAgICAgIC8vIElmIHRoZSBwbGF5ZXIgZG9lcyBub3Qgc3VwcG9ydCBBaXJwbGF5IChwbGF5ZXIgNy4wKSwgd2UganVzdCBoaWRlIHRoaXMgY29tcG9uZW50IGFuZCBza2lwIGNvbmZpZ3VyYXRpb25cbiAgICAgIHRoaXMuaGlkZSgpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMub25DbGljay5zdWJzY3JpYmUoKCkgPT4ge1xuICAgICAgaWYgKHBsYXllci5pc0FpcnBsYXlBdmFpbGFibGUoKSkge1xuICAgICAgICBwbGF5ZXIuc2hvd0FpcnBsYXlUYXJnZXRQaWNrZXIoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChjb25zb2xlKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coJ0FpclBsYXkgdW5hdmFpbGFibGUnKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuXG4gICAgY29uc3QgYWlyUGxheUF2YWlsYWJsZUhhbmRsZXIgPSAoKSA9PiB7XG4gICAgICBpZiAocGxheWVyLmlzQWlycGxheUF2YWlsYWJsZSgpKSB7XG4gICAgICAgIHRoaXMuc2hvdygpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5oaWRlKCk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIGNvbnN0IGFpclBsYXlDaGFuZ2VkSGFuZGxlciA9ICgpID0+IHtcbiAgICAgIGlmIChwbGF5ZXIuaXNBaXJwbGF5QWN0aXZlKCkpIHtcbiAgICAgICAgdGhpcy5vbigpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5vZmYoKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgcGxheWVyLm9uKHBsYXllci5leHBvcnRzLlBsYXllckV2ZW50LkFpcnBsYXlBdmFpbGFibGUsIGFpclBsYXlBdmFpbGFibGVIYW5kbGVyKTtcbiAgICBwbGF5ZXIub24ocGxheWVyLmV4cG9ydHMuUGxheWVyRXZlbnQuQWlycGxheUNoYW5nZWQsIGFpclBsYXlDaGFuZ2VkSGFuZGxlcik7XG5cbiAgICAvLyBTdGFydHVwIGluaXRcbiAgICBhaXJQbGF5QXZhaWxhYmxlSGFuZGxlcigpOyAvLyBIaWRlIGJ1dHRvbiBpZiBBaXJQbGF5IGlzIG5vdCBhdmFpbGFibGVcbiAgICBhaXJQbGF5Q2hhbmdlZEhhbmRsZXIoKTtcbiAgfVxufSIsImltcG9ydCB7U2VsZWN0Qm94fSBmcm9tICcuL3NlbGVjdGJveCc7XG5pbXBvcnQge0xpc3RTZWxlY3RvckNvbmZpZ30gZnJvbSAnLi9saXN0c2VsZWN0b3InO1xuaW1wb3J0IHtVSUluc3RhbmNlTWFuYWdlcn0gZnJvbSAnLi4vdWltYW5hZ2VyJztcbmltcG9ydCB7IFBsYXllckFQSSB9IGZyb20gJ2JpdG1vdmluLXBsYXllcic7XG5pbXBvcnQgeyBpMThuIH0gZnJvbSAnLi4vbG9jYWxpemF0aW9uL2kxOG4nO1xuXG4vKipcbiAqIEEgc2VsZWN0IGJveCBwcm92aWRpbmcgYSBzZWxlY3Rpb24gYmV0d2VlbiAnYXV0bycgYW5kIHRoZSBhdmFpbGFibGUgYXVkaW8gcXVhbGl0aWVzLlxuICpcbiAqIEBjYXRlZ29yeSBDb21wb25lbnRzXG4gKi9cbmV4cG9ydCBjbGFzcyBBdWRpb1F1YWxpdHlTZWxlY3RCb3ggZXh0ZW5kcyBTZWxlY3RCb3gge1xuXG4gIGNvbnN0cnVjdG9yKGNvbmZpZzogTGlzdFNlbGVjdG9yQ29uZmlnID0ge30pIHtcbiAgICBzdXBlcihjb25maWcpO1xuXG4gICAgdGhpcy5jb25maWcgPSB0aGlzLm1lcmdlQ29uZmlnKGNvbmZpZywge1xuICAgICAgY3NzQ2xhc3NlczogWyd1aS1hdWRpb3F1YWxpdHlzZWxlY3Rib3gnXSxcbiAgICB9LCB0aGlzLmNvbmZpZyk7XG4gIH1cblxuICBjb25maWd1cmUocGxheWVyOiBQbGF5ZXJBUEksIHVpbWFuYWdlcjogVUlJbnN0YW5jZU1hbmFnZXIpOiB2b2lkIHtcbiAgICBzdXBlci5jb25maWd1cmUocGxheWVyLCB1aW1hbmFnZXIpO1xuXG4gICAgbGV0IHNlbGVjdEN1cnJlbnRBdWRpb1F1YWxpdHkgPSAoKSA9PiB7XG4gICAgICB0aGlzLnNlbGVjdEl0ZW0ocGxheWVyLmdldEF1ZGlvUXVhbGl0eSgpLmlkKTtcbiAgICB9O1xuXG4gICAgbGV0IHVwZGF0ZUF1ZGlvUXVhbGl0aWVzID0gKCkgPT4ge1xuICAgICAgbGV0IGF1ZGlvUXVhbGl0aWVzID0gcGxheWVyLmdldEF2YWlsYWJsZUF1ZGlvUXVhbGl0aWVzKCk7XG5cbiAgICAgIHRoaXMuY2xlYXJJdGVtcygpO1xuXG4gICAgICAvLyBBZGQgZW50cnkgZm9yIGF1dG9tYXRpYyBxdWFsaXR5IHN3aXRjaGluZyAoZGVmYXVsdCBzZXR0aW5nKVxuICAgICAgdGhpcy5hZGRJdGVtKCdhdXRvJywgaTE4bi5nZXRMb2NhbGl6ZXIoJ2F1dG8nKSk7XG5cbiAgICAgIC8vIEFkZCBhdWRpbyBxdWFsaXRpZXNcbiAgICAgIGZvciAobGV0IGF1ZGlvUXVhbGl0eSBvZiBhdWRpb1F1YWxpdGllcykge1xuICAgICAgICB0aGlzLmFkZEl0ZW0oYXVkaW9RdWFsaXR5LmlkLCBhdWRpb1F1YWxpdHkubGFiZWwpO1xuICAgICAgfVxuXG4gICAgICAvLyBTZWxlY3QgaW5pdGlhbCBxdWFsaXR5XG4gICAgICBzZWxlY3RDdXJyZW50QXVkaW9RdWFsaXR5KCk7XG4gICAgfTtcblxuICAgIHRoaXMub25JdGVtU2VsZWN0ZWQuc3Vic2NyaWJlKChzZW5kZXI6IEF1ZGlvUXVhbGl0eVNlbGVjdEJveCwgdmFsdWU6IHN0cmluZykgPT4ge1xuICAgICAgcGxheWVyLnNldEF1ZGlvUXVhbGl0eSh2YWx1ZSk7XG4gICAgfSk7XG5cbiAgICAvLyBVcGRhdGUgcXVhbGl0aWVzIHdoZW4gYXVkaW8gdHJhY2sgaGFzIGNoYW5nZWRcbiAgICBwbGF5ZXIub24ocGxheWVyLmV4cG9ydHMuUGxheWVyRXZlbnQuQXVkaW9DaGFuZ2VkLCB1cGRhdGVBdWRpb1F1YWxpdGllcyk7XG4gICAgLy8gVXBkYXRlIHF1YWxpdGllcyB3aGVuIHNvdXJjZSBnb2VzIGF3YXlcbiAgICBwbGF5ZXIub24ocGxheWVyLmV4cG9ydHMuUGxheWVyRXZlbnQuU291cmNlVW5sb2FkZWQsIHVwZGF0ZUF1ZGlvUXVhbGl0aWVzKTtcbiAgICAvLyBVcGRhdGUgcXVhbGl0aWVzIHdoZW4gdGhlIHBlcmlvZCB3aXRoaW4gYSBzb3VyY2UgY2hhbmdlc1xuICAgIHBsYXllci5vbihwbGF5ZXIuZXhwb3J0cy5QbGF5ZXJFdmVudC5QZXJpb2RTd2l0Y2hlZCwgdXBkYXRlQXVkaW9RdWFsaXRpZXMpO1xuICAgIC8vIFVwZGF0ZSBxdWFsaXR5IHNlbGVjdGlvbiB3aGVuIHF1YWxpdHkgaXMgY2hhbmdlZCAoZnJvbSBvdXRzaWRlKVxuICAgIHBsYXllci5vbihwbGF5ZXIuZXhwb3J0cy5QbGF5ZXJFdmVudC5BdWRpb1F1YWxpdHlDaGFuZ2VkLCBzZWxlY3RDdXJyZW50QXVkaW9RdWFsaXR5KTtcbiAgICBpZiAoKHBsYXllci5leHBvcnRzLlBsYXllckV2ZW50IGFzIGFueSkuQXVkaW9RdWFsaXR5QWRkZWQpIHtcbiAgICAgIC8vIFVwZGF0ZSBxdWFsaXRpZXMgd2hlbiB0aGVpciBhdmFpbGFiaWxpdHkgY2hhbmdlZFxuICAgICAgLy8gVE9ETzogcmVtb3ZlIGFueSBjYXN0IGFmdGVyIG5leHQgcGxheWVyIHJlbGVhc2VcbiAgICAgIHBsYXllci5vbigocGxheWVyLmV4cG9ydHMuUGxheWVyRXZlbnQgYXMgYW55KS5BdWRpb1F1YWxpdHlBZGRlZCwgdXBkYXRlQXVkaW9RdWFsaXRpZXMpO1xuICAgICAgcGxheWVyLm9uKChwbGF5ZXIuZXhwb3J0cy5QbGF5ZXJFdmVudCBhcyBhbnkpLkF1ZGlvUXVhbGl0eVJlbW92ZWQsIHVwZGF0ZUF1ZGlvUXVhbGl0aWVzKTtcbiAgICB9XG5cbiAgICB1aW1hbmFnZXIuZ2V0Q29uZmlnKCkuZXZlbnRzLm9uVXBkYXRlZC5zdWJzY3JpYmUodXBkYXRlQXVkaW9RdWFsaXRpZXMpO1xuICB9XG59IiwiaW1wb3J0IHtMaXN0Qm94fSBmcm9tICcuL2xpc3Rib3gnO1xuaW1wb3J0IHtVSUluc3RhbmNlTWFuYWdlcn0gZnJvbSAnLi4vdWltYW5hZ2VyJztcbmltcG9ydCB7QXVkaW9UcmFja1N3aXRjaEhhbmRsZXJ9IGZyb20gJy4uL2F1ZGlvdHJhY2t1dGlscyc7XG5pbXBvcnQgeyBQbGF5ZXJBUEkgfSBmcm9tICdiaXRtb3Zpbi1wbGF5ZXInO1xuXG4vKipcbiAqIEEgZWxlbWVudCB0aGF0IGlzIHNpbWlsYXIgdG8gYSBzZWxlY3QgYm94IHdoZXJlIHRoZSB1c2VyIGNhbiBzZWxlY3QgYSBzdWJ0aXRsZVxuICpcbiAqIEBjYXRlZ29yeSBDb21wb25lbnRzXG4gKi9cbmV4cG9ydCBjbGFzcyBBdWRpb1RyYWNrTGlzdEJveCBleHRlbmRzIExpc3RCb3gge1xuXG4gIGNvbmZpZ3VyZShwbGF5ZXI6IFBsYXllckFQSSwgdWltYW5hZ2VyOiBVSUluc3RhbmNlTWFuYWdlcik6IHZvaWQge1xuICAgIHN1cGVyLmNvbmZpZ3VyZShwbGF5ZXIsIHVpbWFuYWdlcik7XG4gICAgbmV3IEF1ZGlvVHJhY2tTd2l0Y2hIYW5kbGVyKHBsYXllciwgdGhpcywgdWltYW5hZ2VyKTtcbiAgfVxufVxuIiwiaW1wb3J0IHtTZWxlY3RCb3h9IGZyb20gJy4vc2VsZWN0Ym94JztcbmltcG9ydCB7TGlzdFNlbGVjdG9yQ29uZmlnfSBmcm9tICcuL2xpc3RzZWxlY3Rvcic7XG5pbXBvcnQge1VJSW5zdGFuY2VNYW5hZ2VyfSBmcm9tICcuLi91aW1hbmFnZXInO1xuaW1wb3J0IHtBdWRpb1RyYWNrU3dpdGNoSGFuZGxlcn0gZnJvbSAnLi4vYXVkaW90cmFja3V0aWxzJztcbmltcG9ydCB7IFBsYXllckFQSSB9IGZyb20gJ2JpdG1vdmluLXBsYXllcic7XG5cbi8qKlxuICogQSBzZWxlY3QgYm94IHByb3ZpZGluZyBhIHNlbGVjdGlvbiBiZXR3ZWVuIGF2YWlsYWJsZSBhdWRpbyB0cmFja3MgKGUuZy4gZGlmZmVyZW50IGxhbmd1YWdlcykuXG4gKlxuICogQGNhdGVnb3J5IENvbXBvbmVudHNcbiAqL1xuZXhwb3J0IGNsYXNzIEF1ZGlvVHJhY2tTZWxlY3RCb3ggZXh0ZW5kcyBTZWxlY3RCb3gge1xuXG4gIGNvbnN0cnVjdG9yKGNvbmZpZzogTGlzdFNlbGVjdG9yQ29uZmlnID0ge30pIHtcbiAgICBzdXBlcihjb25maWcpO1xuXG4gICAgdGhpcy5jb25maWcgPSB0aGlzLm1lcmdlQ29uZmlnKGNvbmZpZywge1xuICAgICAgY3NzQ2xhc3NlczogWyd1aS1hdWRpb3RyYWNrc2VsZWN0Ym94J10sXG4gICAgfSwgdGhpcy5jb25maWcpO1xuICB9XG5cbiAgY29uZmlndXJlKHBsYXllcjogUGxheWVyQVBJLCB1aW1hbmFnZXI6IFVJSW5zdGFuY2VNYW5hZ2VyKTogdm9pZCB7XG4gICAgc3VwZXIuY29uZmlndXJlKHBsYXllciwgdWltYW5hZ2VyKTtcblxuICAgIG5ldyBBdWRpb1RyYWNrU3dpdGNoSGFuZGxlcihwbGF5ZXIsIHRoaXMsIHVpbWFuYWdlcik7XG4gIH1cbn0iLCJpbXBvcnQge0NvbnRhaW5lckNvbmZpZywgQ29udGFpbmVyfSBmcm9tICcuL2NvbnRhaW5lcic7XG5pbXBvcnQge1VJSW5zdGFuY2VNYW5hZ2VyfSBmcm9tICcuLi91aW1hbmFnZXInO1xuaW1wb3J0IHtDb21wb25lbnQsIENvbXBvbmVudENvbmZpZ30gZnJvbSAnLi9jb21wb25lbnQnO1xuaW1wb3J0IHtUaW1lb3V0fSBmcm9tICcuLi90aW1lb3V0JztcbmltcG9ydCB7IFBsYXllckFQSSB9IGZyb20gJ2JpdG1vdmluLXBsYXllcic7XG5cbi8qKlxuICogQ29uZmlndXJhdGlvbiBpbnRlcmZhY2UgZm9yIHRoZSB7QGxpbmsgQnVmZmVyaW5nT3ZlcmxheX0gY29tcG9uZW50LlxuICpcbiAqIEBjYXRlZ29yeSBDb25maWdzXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgQnVmZmVyaW5nT3ZlcmxheUNvbmZpZyBleHRlbmRzIENvbnRhaW5lckNvbmZpZyB7XG4gIC8qKlxuICAgKiBEZWxheSBpbiBtaWxsaXNlY29uZHMgYWZ0ZXIgd2hpY2ggdGhlIGJ1ZmZlcmluZyBvdmVybGF5IHdpbGwgYmUgZGlzcGxheWVkLiBVc2VmdWwgdG8gYnlwYXNzIHNob3J0IHN0YWxscyB3aXRob3V0XG4gICAqIGRpc3BsYXlpbmcgdGhlIG92ZXJsYXkuIFNldCB0byAwIHRvIGRpc3BsYXkgdGhlIG92ZXJsYXkgaW5zdGFudGx5LlxuICAgKiBEZWZhdWx0OiAxMDAwbXMgKDEgc2Vjb25kKVxuICAgKi9cbiAgc2hvd0RlbGF5TXM/OiBudW1iZXI7XG59XG5cbi8qKlxuICogT3ZlcmxheXMgdGhlIHBsYXllciBhbmQgZGlzcGxheXMgYSBidWZmZXJpbmcgaW5kaWNhdG9yLlxuICpcbiAqIEBjYXRlZ29yeSBDb21wb25lbnRzXG4gKi9cbmV4cG9ydCBjbGFzcyBCdWZmZXJpbmdPdmVybGF5IGV4dGVuZHMgQ29udGFpbmVyPEJ1ZmZlcmluZ092ZXJsYXlDb25maWc+IHtcblxuICBwcml2YXRlIGluZGljYXRvcnM6IENvbXBvbmVudDxDb21wb25lbnRDb25maWc+W107XG5cbiAgY29uc3RydWN0b3IoY29uZmlnOiBCdWZmZXJpbmdPdmVybGF5Q29uZmlnID0ge30pIHtcbiAgICBzdXBlcihjb25maWcpO1xuXG4gICAgdGhpcy5pbmRpY2F0b3JzID0gW1xuICAgICAgbmV3IENvbXBvbmVudDxDb21wb25lbnRDb25maWc+KHsgdGFnOiAnZGl2JywgY3NzQ2xhc3M6ICd1aS1idWZmZXJpbmctb3ZlcmxheS1pbmRpY2F0b3InLCByb2xlOiAnaW1nJyB9KSxcbiAgICAgIG5ldyBDb21wb25lbnQ8Q29tcG9uZW50Q29uZmlnPih7IHRhZzogJ2RpdicsIGNzc0NsYXNzOiAndWktYnVmZmVyaW5nLW92ZXJsYXktaW5kaWNhdG9yJywgcm9sZTogJ2ltZycgfSksXG4gICAgICBuZXcgQ29tcG9uZW50PENvbXBvbmVudENvbmZpZz4oeyB0YWc6ICdkaXYnLCBjc3NDbGFzczogJ3VpLWJ1ZmZlcmluZy1vdmVybGF5LWluZGljYXRvcicsIHJvbGU6ICdpbWcnIH0pLFxuICAgIF07XG5cbiAgICB0aGlzLmNvbmZpZyA9IHRoaXMubWVyZ2VDb25maWcoY29uZmlnLCA8QnVmZmVyaW5nT3ZlcmxheUNvbmZpZz57XG4gICAgICBjc3NDbGFzczogJ3VpLWJ1ZmZlcmluZy1vdmVybGF5JyxcbiAgICAgIGhpZGRlbjogdHJ1ZSxcbiAgICAgIGNvbXBvbmVudHM6IHRoaXMuaW5kaWNhdG9ycyxcbiAgICAgIHNob3dEZWxheU1zOiAxMDAwLFxuICAgIH0sIHRoaXMuY29uZmlnKTtcbiAgfVxuXG4gIGNvbmZpZ3VyZShwbGF5ZXI6IFBsYXllckFQSSwgdWltYW5hZ2VyOiBVSUluc3RhbmNlTWFuYWdlcik6IHZvaWQge1xuICAgIHN1cGVyLmNvbmZpZ3VyZShwbGF5ZXIsIHVpbWFuYWdlcik7XG5cbiAgICBsZXQgY29uZmlnID0gdGhpcy5nZXRDb25maWcoKTtcblxuICAgIGxldCBvdmVybGF5U2hvd1RpbWVvdXQgPSBuZXcgVGltZW91dChjb25maWcuc2hvd0RlbGF5TXMsICgpID0+IHtcbiAgICAgIHRoaXMuc2hvdygpO1xuICAgIH0pO1xuXG4gICAgbGV0IHNob3dPdmVybGF5ID0gKCkgPT4ge1xuICAgICAgb3ZlcmxheVNob3dUaW1lb3V0LnN0YXJ0KCk7XG4gICAgfTtcblxuICAgIGxldCBoaWRlT3ZlcmxheSA9ICgpID0+IHtcbiAgICAgIG92ZXJsYXlTaG93VGltZW91dC5jbGVhcigpO1xuICAgICAgdGhpcy5oaWRlKCk7XG4gICAgfTtcblxuICAgIHBsYXllci5vbihwbGF5ZXIuZXhwb3J0cy5QbGF5ZXJFdmVudC5TdGFsbFN0YXJ0ZWQsIHNob3dPdmVybGF5KTtcbiAgICBwbGF5ZXIub24ocGxheWVyLmV4cG9ydHMuUGxheWVyRXZlbnQuU3RhbGxFbmRlZCwgaGlkZU92ZXJsYXkpO1xuICAgIHBsYXllci5vbihwbGF5ZXIuZXhwb3J0cy5QbGF5ZXJFdmVudC5QbGF5LCBzaG93T3ZlcmxheSk7XG4gICAgcGxheWVyLm9uKHBsYXllci5leHBvcnRzLlBsYXllckV2ZW50LlBsYXlpbmcsIGhpZGVPdmVybGF5KTtcbiAgICBwbGF5ZXIub24ocGxheWVyLmV4cG9ydHMuUGxheWVyRXZlbnQuUGF1c2VkLCBoaWRlT3ZlcmxheSk7XG4gICAgcGxheWVyLm9uKHBsYXllci5leHBvcnRzLlBsYXllckV2ZW50LlNlZWssIHNob3dPdmVybGF5KTtcbiAgICBwbGF5ZXIub24ocGxheWVyLmV4cG9ydHMuUGxheWVyRXZlbnQuU2Vla2VkLCBoaWRlT3ZlcmxheSk7XG4gICAgcGxheWVyLm9uKHBsYXllci5leHBvcnRzLlBsYXllckV2ZW50LlRpbWVTaGlmdCwgc2hvd092ZXJsYXkpO1xuICAgIHBsYXllci5vbihwbGF5ZXIuZXhwb3J0cy5QbGF5ZXJFdmVudC5UaW1lU2hpZnRlZCwgaGlkZU92ZXJsYXkpO1xuICAgIHBsYXllci5vbihwbGF5ZXIuZXhwb3J0cy5QbGF5ZXJFdmVudC5Tb3VyY2VVbmxvYWRlZCwgaGlkZU92ZXJsYXkpO1xuXG4gICAgLy8gU2hvdyBvdmVybGF5IGlmIHBsYXllciBpcyBhbHJlYWR5IHN0YWxsZWQgYXQgaW5pdFxuICAgIGlmIChwbGF5ZXIuaXNTdGFsbGVkKCkpIHtcbiAgICAgIHRoaXMuc2hvdygpO1xuICAgIH1cbiAgfVxufVxuIiwiaW1wb3J0IHtDb21wb25lbnRDb25maWcsIENvbXBvbmVudH0gZnJvbSAnLi9jb21wb25lbnQnO1xuaW1wb3J0IHtET019IGZyb20gJy4uL2RvbSc7XG5pbXBvcnQge0V2ZW50RGlzcGF0Y2hlciwgTm9BcmdzLCBFdmVudH0gZnJvbSAnLi4vZXZlbnRkaXNwYXRjaGVyJztcbmltcG9ydCB7IExvY2FsaXphYmxlVGV4dCAsIGkxOG4gfSBmcm9tICcuLi9sb2NhbGl6YXRpb24vaTE4bic7XG5cbi8qKlxuICogQ29uZmlndXJhdGlvbiBpbnRlcmZhY2UgZm9yIGEge0BsaW5rIEJ1dHRvbn0gY29tcG9uZW50LlxuICpcbiAqIEBjYXRlZ29yeSBDb25maWdzXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgQnV0dG9uQ29uZmlnIGV4dGVuZHMgQ29tcG9uZW50Q29uZmlnIHtcbiAgLyoqXG4gICAqIFRoZSB0ZXh0IGFzIHN0cmluZyBvciBsb2NhbGl6ZSBjYWxsYmFjayBvbiB0aGUgYnV0dG9uLlxuICAgKi9cbiAgdGV4dD86IExvY2FsaXphYmxlVGV4dDtcbiAgLyoqXG4gICAqIFdDQUcyMCBzdGFuZGFyZCBmb3IgZGVmaW5pbmcgaW5mbyBhYm91dCB0aGUgY29tcG9uZW50ICh1c3VhbGx5IHRoZSBuYW1lKVxuICAgKi9cbiAgYXJpYUxhYmVsPzogTG9jYWxpemFibGVUZXh0O1xuXG4gIC8qKlxuICAgKiBTcGVjaWZpZXMgd2hldGhlciB0aGUgZmlyc3QgdG91Y2ggZXZlbnQgcmVjZWl2ZWQgYnkgdGhlIHtAbGluayBVSUNvbnRhaW5lcn0gc2hvdWxkIGJlIHByZXZlbnRlZCBvciBub3QuXG4gICAqXG4gICAqIERlZmF1bHQ6IGZhbHNlXG4gICAqL1xuICBhY2NlcHRzVG91Y2hXaXRoVWlIaWRkZW4/OiBib29sZWFuO1xufVxuXG4vKipcbiAqIEEgc2ltcGxlIGNsaWNrYWJsZSBidXR0b24uXG4gKlxuICogQGNhdGVnb3J5IENvbXBvbmVudHNcbiAqL1xuZXhwb3J0IGNsYXNzIEJ1dHRvbjxDb25maWcgZXh0ZW5kcyBCdXR0b25Db25maWc+IGV4dGVuZHMgQ29tcG9uZW50PENvbmZpZz4ge1xuXG4gIHByaXZhdGUgYnV0dG9uRXZlbnRzID0ge1xuICAgIG9uQ2xpY2s6IG5ldyBFdmVudERpc3BhdGNoZXI8QnV0dG9uPENvbmZpZz4sIE5vQXJncz4oKSxcbiAgfTtcblxuICBjb25zdHJ1Y3Rvcihjb25maWc6IENvbmZpZykge1xuICAgIHN1cGVyKGNvbmZpZyk7XG5cbiAgICB0aGlzLmNvbmZpZyA9IHRoaXMubWVyZ2VDb25maWcoY29uZmlnLCB7XG4gICAgICBjc3NDbGFzczogJ3VpLWJ1dHRvbicsXG4gICAgICByb2xlOiAnYnV0dG9uJyxcbiAgICAgIHRhYkluZGV4OiAwLFxuICAgICAgYWNjZXB0c1RvdWNoV2l0aFVpSGlkZGVuOiBmYWxzZSxcbiAgICB9IGFzIENvbmZpZywgdGhpcy5jb25maWcpO1xuICB9XG5cbiAgcHJvdGVjdGVkIHRvRG9tRWxlbWVudCgpOiBET00ge1xuICAgIGNvbnN0IGJ1dHRvbkVsZW1lbnRBdHRyaWJ1dGVzOiB7IFtuYW1lOiBzdHJpbmddOiBzdHJpbmcgfSA9IHtcbiAgICAgICdpZCc6IHRoaXMuY29uZmlnLmlkLFxuICAgICAgJ2FyaWEtbGFiZWwnOiBpMThuLnBlcmZvcm1Mb2NhbGl6YXRpb24odGhpcy5jb25maWcuYXJpYUxhYmVsIHx8IHRoaXMuY29uZmlnLnRleHQpLFxuICAgICAgJ2NsYXNzJzogdGhpcy5nZXRDc3NDbGFzc2VzKCksXG4gICAgICAndHlwZScgOiAnYnV0dG9uJyxcbiAgICAgIC8qKlxuICAgICAgKiBXQ0FHMjAgc3RhbmRhcmQgdG8gZGlzcGxheSBpZiBhIGJ1dHRvbiBpcyBwcmVzc2VkIG9yIG5vdFxuICAgICAgKi9cbiAgICAgICdhcmlhLXByZXNzZWQnOiAnZmFsc2UnLFxuICAgICAgJ3RhYmluZGV4JzogdGhpcy5jb25maWcudGFiSW5kZXgudG9TdHJpbmcoKSxcbiAgICB9O1xuXG4gICAgaWYgKHRoaXMuY29uZmlnLnJvbGUgIT0gbnVsbCkge1xuICAgICAgYnV0dG9uRWxlbWVudEF0dHJpYnV0ZXNbJ3JvbGUnXSA9IHRoaXMuY29uZmlnLnJvbGU7XG4gICAgfVxuXG4gICAgLy8gQ3JlYXRlIHRoZSBidXR0b24gZWxlbWVudCB3aXRoIHRoZSB0ZXh0IGxhYmVsXG4gICAgbGV0IGJ1dHRvbkVsZW1lbnQgPSBuZXcgRE9NKCdidXR0b24nLCBidXR0b25FbGVtZW50QXR0cmlidXRlcywgdGhpcykuYXBwZW5kKG5ldyBET00oJ3NwYW4nLCB7XG4gICAgICAnY2xhc3MnOiB0aGlzLnByZWZpeENzcygnbGFiZWwnKSxcbiAgICB9KS5odG1sKGkxOG4ucGVyZm9ybUxvY2FsaXphdGlvbih0aGlzLmNvbmZpZy50ZXh0KSkpO1xuXG4gICAgLy8gTGlzdGVuIGZvciB0aGUgY2xpY2sgZXZlbnQgb24gdGhlIGJ1dHRvbiBlbGVtZW50IGFuZCB0cmlnZ2VyIHRoZSBjb3JyZXNwb25kaW5nIGV2ZW50IG9uIHRoZSBidXR0b24gY29tcG9uZW50XG4gICAgYnV0dG9uRWxlbWVudC5vbignY2xpY2snLCAoKSA9PiB7XG4gICAgICB0aGlzLm9uQ2xpY2tFdmVudCgpO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIGJ1dHRvbkVsZW1lbnQ7XG4gIH1cblxuICAvKipcbiAgICogU2V0cyB0ZXh0IG9uIHRoZSBsYWJlbCBvZiB0aGUgYnV0dG9uLlxuICAgKiBAcGFyYW0gdGV4dCB0aGUgdGV4dCB0byBwdXQgaW50byB0aGUgbGFiZWwgb2YgdGhlIGJ1dHRvblxuICAgKi9cbiAgc2V0VGV4dCh0ZXh0OiBMb2NhbGl6YWJsZVRleHQpOiB2b2lkIHtcbiAgICB0aGlzLmdldERvbUVsZW1lbnQoKS5maW5kKCcuJyArIHRoaXMucHJlZml4Q3NzKCdsYWJlbCcpKS5odG1sKGkxOG4ucGVyZm9ybUxvY2FsaXphdGlvbih0ZXh0KSk7XG4gIH1cblxuICBwcm90ZWN0ZWQgb25DbGlja0V2ZW50KCkge1xuICAgIHRoaXMuYnV0dG9uRXZlbnRzLm9uQ2xpY2suZGlzcGF0Y2godGhpcyk7XG4gIH1cblxuICAvKipcbiAgICogR2V0cyB0aGUgZXZlbnQgdGhhdCBpcyBmaXJlZCB3aGVuIHRoZSBidXR0b24gaXMgY2xpY2tlZC5cbiAgICogQHJldHVybnMge0V2ZW50PEJ1dHRvbjxDb25maWc+LCBOb0FyZ3M+fVxuICAgKi9cbiAgZ2V0IG9uQ2xpY2soKTogRXZlbnQ8QnV0dG9uPENvbmZpZz4sIE5vQXJncz4ge1xuICAgIHJldHVybiB0aGlzLmJ1dHRvbkV2ZW50cy5vbkNsaWNrLmdldEV2ZW50KCk7XG4gIH1cbn1cbiIsImltcG9ydCB7Q29udGFpbmVyQ29uZmlnLCBDb250YWluZXJ9IGZyb20gJy4vY29udGFpbmVyJztcbmltcG9ydCB7TGFiZWwsIExhYmVsQ29uZmlnfSBmcm9tICcuL2xhYmVsJztcbmltcG9ydCB7VUlJbnN0YW5jZU1hbmFnZXJ9IGZyb20gJy4uL3VpbWFuYWdlcic7XG5pbXBvcnQgeyBDYXN0U3RhcnRlZEV2ZW50LCBDYXN0V2FpdGluZ0ZvckRldmljZUV2ZW50LCBQbGF5ZXJBUEkgfSBmcm9tICdiaXRtb3Zpbi1wbGF5ZXInO1xuaW1wb3J0IHsgaTE4biB9IGZyb20gJy4uL2xvY2FsaXphdGlvbi9pMThuJztcblxuLyoqXG4gKiBPdmVybGF5cyB0aGUgcGxheWVyIGFuZCBkaXNwbGF5cyB0aGUgc3RhdHVzIG9mIGEgQ2FzdCBzZXNzaW9uLlxuICpcbiAqIEBjYXRlZ29yeSBDb21wb25lbnRzXG4gKi9cbmV4cG9ydCBjbGFzcyBDYXN0U3RhdHVzT3ZlcmxheSBleHRlbmRzIENvbnRhaW5lcjxDb250YWluZXJDb25maWc+IHtcblxuICBwcml2YXRlIHN0YXR1c0xhYmVsOiBMYWJlbDxMYWJlbENvbmZpZz47XG5cbiAgY29uc3RydWN0b3IoY29uZmlnOiBDb250YWluZXJDb25maWcgPSB7fSkge1xuICAgIHN1cGVyKGNvbmZpZyk7XG5cbiAgICB0aGlzLnN0YXR1c0xhYmVsID0gbmV3IExhYmVsPExhYmVsQ29uZmlnPih7IGNzc0NsYXNzOiAndWktY2FzdC1zdGF0dXMtbGFiZWwnIH0pO1xuXG4gICAgdGhpcy5jb25maWcgPSB0aGlzLm1lcmdlQ29uZmlnKGNvbmZpZywge1xuICAgICAgY3NzQ2xhc3M6ICd1aS1jYXN0LXN0YXR1cy1vdmVybGF5JyxcbiAgICAgIGNvbXBvbmVudHM6IFt0aGlzLnN0YXR1c0xhYmVsXSxcbiAgICAgIGhpZGRlbjogdHJ1ZSxcbiAgICB9LCB0aGlzLmNvbmZpZyk7XG4gIH1cblxuICBjb25maWd1cmUocGxheWVyOiBQbGF5ZXJBUEksIHVpbWFuYWdlcjogVUlJbnN0YW5jZU1hbmFnZXIpOiB2b2lkIHtcbiAgICBzdXBlci5jb25maWd1cmUocGxheWVyLCB1aW1hbmFnZXIpO1xuXG4gICAgcGxheWVyLm9uKHBsYXllci5leHBvcnRzLlBsYXllckV2ZW50LkNhc3RXYWl0aW5nRm9yRGV2aWNlLFxuICAgICAgKGV2ZW50OiBDYXN0V2FpdGluZ0ZvckRldmljZUV2ZW50KSA9PiB7XG4gICAgICAgIHRoaXMuc2hvdygpO1xuICAgICAgICAvLyBHZXQgZGV2aWNlIG5hbWUgYW5kIHVwZGF0ZSBzdGF0dXMgdGV4dCB3aGlsZSBjb25uZWN0aW5nXG4gICAgICAgIGxldCBjYXN0RGV2aWNlTmFtZSA9IGV2ZW50LmNhc3RQYXlsb2FkLmRldmljZU5hbWU7XG4gICAgICAgIHRoaXMuc3RhdHVzTGFiZWwuc2V0VGV4dChpMThuLmdldExvY2FsaXplcignY29ubmVjdGluZ1RvJywgeyBjYXN0RGV2aWNlTmFtZSB9KSk7XG4gICAgICB9KTtcbiAgICBwbGF5ZXIub24ocGxheWVyLmV4cG9ydHMuUGxheWVyRXZlbnQuQ2FzdFN0YXJ0ZWQsIChldmVudDogQ2FzdFN0YXJ0ZWRFdmVudCkgPT4ge1xuICAgICAgLy8gU2Vzc2lvbiBpcyBzdGFydGVkIG9yIHJlc3VtZWRcbiAgICAgIC8vIEZvciBjYXNlcyB3aGVuIGEgc2Vzc2lvbiBpcyByZXN1bWVkLCB3ZSBkbyBub3QgcmVjZWl2ZSB0aGUgcHJldmlvdXMgZXZlbnRzIGFuZCB0aGVyZWZvcmUgc2hvdyB0aGUgc3RhdHVzIHBhbmVsXG4gICAgICAvLyBoZXJlIHRvb1xuICAgICAgdGhpcy5zaG93KCk7XG4gICAgICBsZXQgY2FzdERldmljZU5hbWUgPSBldmVudC5kZXZpY2VOYW1lO1xuICAgICAgdGhpcy5zdGF0dXNMYWJlbC5zZXRUZXh0KGkxOG4uZ2V0TG9jYWxpemVyKCdwbGF5aW5nT24nLCB7IGNhc3REZXZpY2VOYW1lIH0pKTtcbiAgICB9KTtcbiAgICBwbGF5ZXIub24ocGxheWVyLmV4cG9ydHMuUGxheWVyRXZlbnQuQ2FzdFN0b3BwZWQsIChldmVudCkgPT4ge1xuICAgICAgLy8gQ2FzdCBzZXNzaW9uIGdvbmUsIGhpZGUgdGhlIHN0YXR1cyBwYW5lbFxuICAgICAgdGhpcy5oaWRlKCk7XG4gICAgfSk7XG4gIH1cbn0iLCJpbXBvcnQge1RvZ2dsZUJ1dHRvbiwgVG9nZ2xlQnV0dG9uQ29uZmlnfSBmcm9tICcuL3RvZ2dsZWJ1dHRvbic7XG5pbXBvcnQge1VJSW5zdGFuY2VNYW5hZ2VyfSBmcm9tICcuLi91aW1hbmFnZXInO1xuaW1wb3J0IHsgUGxheWVyQVBJIH0gZnJvbSAnYml0bW92aW4tcGxheWVyJztcbmltcG9ydCB7IGkxOG4gfSBmcm9tICcuLi9sb2NhbGl6YXRpb24vaTE4bic7XG5cbi8qKlxuICogQSBidXR0b24gdGhhdCB0b2dnbGVzIGNhc3RpbmcgdG8gYSBDYXN0IHJlY2VpdmVyLlxuICpcbiAqIEBjYXRlZ29yeSBCdXR0b25zXG4gKi9cbmV4cG9ydCBjbGFzcyBDYXN0VG9nZ2xlQnV0dG9uIGV4dGVuZHMgVG9nZ2xlQnV0dG9uPFRvZ2dsZUJ1dHRvbkNvbmZpZz4ge1xuXG4gIGNvbnN0cnVjdG9yKGNvbmZpZzogVG9nZ2xlQnV0dG9uQ29uZmlnID0ge30pIHtcbiAgICBzdXBlcihjb25maWcpO1xuXG4gICAgdGhpcy5jb25maWcgPSB0aGlzLm1lcmdlQ29uZmlnKGNvbmZpZywge1xuICAgICAgY3NzQ2xhc3M6ICd1aS1jYXN0dG9nZ2xlYnV0dG9uJyxcbiAgICAgIHRleHQ6IGkxOG4uZ2V0TG9jYWxpemVyKCdnb29nbGVDYXN0JyksXG4gICAgfSwgdGhpcy5jb25maWcpO1xuICB9XG5cbiAgY29uZmlndXJlKHBsYXllcjogUGxheWVyQVBJLCB1aW1hbmFnZXI6IFVJSW5zdGFuY2VNYW5hZ2VyKTogdm9pZCB7XG4gICAgc3VwZXIuY29uZmlndXJlKHBsYXllciwgdWltYW5hZ2VyKTtcblxuICAgIHRoaXMub25DbGljay5zdWJzY3JpYmUoKCkgPT4ge1xuICAgICAgaWYgKHBsYXllci5pc0Nhc3RBdmFpbGFibGUoKSkge1xuICAgICAgICBpZiAocGxheWVyLmlzQ2FzdGluZygpKSB7XG4gICAgICAgICAgcGxheWVyLmNhc3RTdG9wKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcGxheWVyLmNhc3RWaWRlbygpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoY29uc29sZSkge1xuICAgICAgICAgIGNvbnNvbGUubG9nKCdDYXN0IHVuYXZhaWxhYmxlJyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGxldCBjYXN0QXZhaWxhYmxlSGFuZGVyID0gKCkgPT4ge1xuICAgICAgaWYgKHBsYXllci5pc0Nhc3RBdmFpbGFibGUoKSkge1xuICAgICAgICB0aGlzLnNob3coKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuaGlkZSgpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBwbGF5ZXIub24ocGxheWVyLmV4cG9ydHMuUGxheWVyRXZlbnQuQ2FzdEF2YWlsYWJsZSwgY2FzdEF2YWlsYWJsZUhhbmRlcik7XG5cbiAgICAvLyBUb2dnbGUgYnV0dG9uICdvbicgc3RhdGVcbiAgICBwbGF5ZXIub24ocGxheWVyLmV4cG9ydHMuUGxheWVyRXZlbnQuQ2FzdFdhaXRpbmdGb3JEZXZpY2UsICgpID0+IHtcbiAgICAgIHRoaXMub24oKTtcbiAgICB9KTtcbiAgICBwbGF5ZXIub24ocGxheWVyLmV4cG9ydHMuUGxheWVyRXZlbnQuQ2FzdFN0YXJ0ZWQsICgpID0+IHtcbiAgICAgIC8vIFdoZW4gYSBzZXNzaW9uIGlzIHJlc3VtZWQsIHRoZXJlIGlzIG5vIENhc3RTdGFydCBldmVudCwgc28gd2UgYWxzbyBuZWVkIHRvIHRvZ2dsZSBoZXJlIGZvciBzdWNoIGNhc2VzXG4gICAgICB0aGlzLm9uKCk7XG4gICAgfSk7XG4gICAgcGxheWVyLm9uKHBsYXllci5leHBvcnRzLlBsYXllckV2ZW50LkNhc3RTdG9wcGVkLCAoKSA9PiB7XG4gICAgICB0aGlzLm9mZigpO1xuICAgIH0pO1xuXG4gICAgLy8gU3RhcnR1cCBpbml0XG4gICAgY2FzdEF2YWlsYWJsZUhhbmRlcigpOyAvLyBIaWRlIGJ1dHRvbiBpZiBDYXN0IG5vdCBhdmFpbGFibGVcbiAgICBpZiAocGxheWVyLmlzQ2FzdGluZygpKSB7XG4gICAgICB0aGlzLm9uKCk7XG4gICAgfVxuICB9XG59IiwiaW1wb3J0IHtVSUNvbnRhaW5lciwgVUlDb250YWluZXJDb25maWd9IGZyb20gJy4vdWljb250YWluZXInO1xuaW1wb3J0IHtVSUluc3RhbmNlTWFuYWdlcn0gZnJvbSAnLi4vdWltYW5hZ2VyJztcbmltcG9ydCB7VGltZW91dH0gZnJvbSAnLi4vdGltZW91dCc7XG5pbXBvcnQgeyBQbGF5ZXJBUEkgfSBmcm9tICdiaXRtb3Zpbi1wbGF5ZXInO1xuXG4vKipcbiAqIFRoZSBiYXNlIGNvbnRhaW5lciBmb3IgQ2FzdCByZWNlaXZlcnMgdGhhdCBjb250YWlucyBhbGwgb2YgdGhlIFVJIGFuZCB0YWtlcyBjYXJlIHRoYXQgdGhlIFVJIGlzIHNob3duIG9uXG4gKiBjZXJ0YWluIHBsYXliYWNrIGV2ZW50cy5cbiAqXG4gKiBAY2F0ZWdvcnkgQ29udGFpbmVyc1xuICovXG5leHBvcnQgY2xhc3MgQ2FzdFVJQ29udGFpbmVyIGV4dGVuZHMgVUlDb250YWluZXIge1xuXG4gIHByaXZhdGUgY2FzdFVpSGlkZVRpbWVvdXQ6IFRpbWVvdXQ7XG5cbiAgY29uc3RydWN0b3IoY29uZmlnOiBVSUNvbnRhaW5lckNvbmZpZykge1xuICAgIHN1cGVyKGNvbmZpZyk7XG4gIH1cblxuICBjb25maWd1cmUocGxheWVyOiBQbGF5ZXJBUEksIHVpbWFuYWdlcjogVUlJbnN0YW5jZU1hbmFnZXIpOiB2b2lkIHtcbiAgICBzdXBlci5jb25maWd1cmUocGxheWVyLCB1aW1hbmFnZXIpO1xuXG4gICAgbGV0IGNvbmZpZyA9IHRoaXMuZ2V0Q29uZmlnKCk7XG5cbiAgICAvKlxuICAgICAqIFNob3cgVUkgb24gQ2FzdCBkZXZpY2VzIGF0IGNlcnRhaW4gcGxheWJhY2sgZXZlbnRzXG4gICAgICpcbiAgICAgKiBTaW5jZSBhIENhc3QgcmVjZWl2ZXIgZG9lcyBub3QgaGF2ZSBhIGRpcmVjdCBIQ0ksIHdlIHNob3cgdGhlIFVJIG9uIGNlcnRhaW4gcGxheWJhY2sgZXZlbnRzIHRvIGdpdmUgdGhlIHVzZXJcbiAgICAgKiBhIGNoYW5jZSB0byBzZWUgb24gdGhlIHNjcmVlbiB3aGF0J3MgZ29pbmcgb24sIGUuZy4gb24gcGxheS9wYXVzZSBvciBhIHNlZWsgdGhlIFVJIGlzIHNob3duIGFuZCB0aGUgdXNlciBjYW5cbiAgICAgKiBzZWUgdGhlIGN1cnJlbnQgdGltZSBhbmQgcG9zaXRpb24gb24gdGhlIHNlZWsgYmFyLlxuICAgICAqIFRoZSBVSSBpcyBzaG93biBwZXJtYW5lbnRseSB3aGlsZSBwbGF5YmFjayBpcyBwYXVzZWQsIG90aGVyd2lzZSBoaWRlcyBhdXRvbWF0aWNhbGx5IGFmdGVyIHRoZSBjb25maWd1cmVkXG4gICAgICogaGlkZSBkZWxheSB0aW1lLlxuICAgICAqL1xuXG4gICAgbGV0IGlzVWlTaG93biA9IGZhbHNlO1xuXG4gICAgbGV0IGhpZGVVaSA9ICgpID0+IHtcbiAgICAgIHVpbWFuYWdlci5vbkNvbnRyb2xzSGlkZS5kaXNwYXRjaCh0aGlzKTtcbiAgICAgIGlzVWlTaG93biA9IGZhbHNlO1xuICAgIH07XG5cbiAgICB0aGlzLmNhc3RVaUhpZGVUaW1lb3V0ID0gbmV3IFRpbWVvdXQoY29uZmlnLmhpZGVEZWxheSwgaGlkZVVpKTtcblxuICAgIGxldCBzaG93VWkgPSAoKSA9PiB7XG4gICAgICBpZiAoIWlzVWlTaG93bikge1xuICAgICAgICB1aW1hbmFnZXIub25Db250cm9sc1Nob3cuZGlzcGF0Y2godGhpcyk7XG4gICAgICAgIGlzVWlTaG93biA9IHRydWU7XG4gICAgICB9XG4gICAgfTtcblxuICAgIGxldCBzaG93VWlQZXJtYW5lbnRseSA9ICgpID0+IHtcbiAgICAgIHNob3dVaSgpO1xuICAgICAgdGhpcy5jYXN0VWlIaWRlVGltZW91dC5jbGVhcigpO1xuICAgIH07XG5cbiAgICBsZXQgc2hvd1VpV2l0aFRpbWVvdXQgPSAoKSA9PiB7XG4gICAgICBzaG93VWkoKTtcbiAgICAgIHRoaXMuY2FzdFVpSGlkZVRpbWVvdXQuc3RhcnQoKTtcbiAgICB9O1xuXG4gICAgbGV0IHNob3dVaUFmdGVyU2VlayA9ICgpID0+IHtcbiAgICAgIGlmIChwbGF5ZXIuaXNQbGF5aW5nKCkpIHtcbiAgICAgICAgc2hvd1VpV2l0aFRpbWVvdXQoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNob3dVaVBlcm1hbmVudGx5KCk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHBsYXllci5vbihwbGF5ZXIuZXhwb3J0cy5QbGF5ZXJFdmVudC5QbGF5LCBzaG93VWlXaXRoVGltZW91dCk7XG4gICAgcGxheWVyLm9uKHBsYXllci5leHBvcnRzLlBsYXllckV2ZW50LlBhdXNlZCwgc2hvd1VpUGVybWFuZW50bHkpO1xuICAgIHBsYXllci5vbihwbGF5ZXIuZXhwb3J0cy5QbGF5ZXJFdmVudC5TZWVrLCBzaG93VWlQZXJtYW5lbnRseSk7XG4gICAgcGxheWVyLm9uKHBsYXllci5leHBvcnRzLlBsYXllckV2ZW50LlNlZWtlZCwgc2hvd1VpQWZ0ZXJTZWVrKTtcblxuICAgIHVpbWFuYWdlci5nZXRDb25maWcoKS5ldmVudHMub25VcGRhdGVkLnN1YnNjcmliZShzaG93VWlXaXRoVGltZW91dCk7XG4gIH1cblxuICByZWxlYXNlKCk6IHZvaWQge1xuICAgIHN1cGVyLnJlbGVhc2UoKTtcbiAgICB0aGlzLmNhc3RVaUhpZGVUaW1lb3V0LmNsZWFyKCk7XG4gIH1cbn0iLCJpbXBvcnQge0J1dHRvbiwgQnV0dG9uQ29uZmlnfSBmcm9tICcuL2J1dHRvbic7XG5cbi8qKlxuICogQ29uZmlndXJhdGlvbiBpbnRlcmZhY2UgZm9yIGEge0BsaW5rIENsaWNrT3ZlcmxheX0uXG4gKlxuICogQGNhdGVnb3J5IENvbmZpZ3NcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBDbGlja092ZXJsYXlDb25maWcgZXh0ZW5kcyBCdXR0b25Db25maWcge1xuICAvKipcbiAgICogVGhlIHVybCB0byBvcGVuIHdoZW4gdGhlIG92ZXJsYXkgaXMgY2xpY2tlZC4gU2V0IHRvIG51bGwgdG8gZGlzYWJsZSB0aGUgY2xpY2sgaGFuZGxlci5cbiAgICovXG4gIHVybD86IHN0cmluZztcbn1cblxuLyoqXG4gKiBBIGNsaWNrIG92ZXJsYXkgdGhhdCBvcGVucyBhbiB1cmwgaW4gYSBuZXcgdGFiIGlmIGNsaWNrZWQuXG4gKlxuICogQGNhdGVnb3J5IENvbXBvbmVudHNcbiAqL1xuZXhwb3J0IGNsYXNzIENsaWNrT3ZlcmxheSBleHRlbmRzIEJ1dHRvbjxDbGlja092ZXJsYXlDb25maWc+IHtcblxuICBjb25zdHJ1Y3Rvcihjb25maWc6IENsaWNrT3ZlcmxheUNvbmZpZyA9IHt9KSB7XG4gICAgc3VwZXIoY29uZmlnKTtcblxuICAgIHRoaXMuY29uZmlnID0gdGhpcy5tZXJnZUNvbmZpZyhjb25maWcsIHtcbiAgICAgIGNzc0NsYXNzOiAndWktY2xpY2tvdmVybGF5JyxcbiAgICAgIHJvbGU6IHRoaXMuY29uZmlnLnJvbGUsXG4gICAgfSwgPENsaWNrT3ZlcmxheUNvbmZpZz50aGlzLmNvbmZpZyk7XG4gIH1cblxuICBpbml0aWFsaXplKCk6IHZvaWQge1xuICAgIHN1cGVyLmluaXRpYWxpemUoKTtcblxuICAgIHRoaXMuc2V0VXJsKCg8Q2xpY2tPdmVybGF5Q29uZmlnPnRoaXMuY29uZmlnKS51cmwpO1xuICAgIGxldCBlbGVtZW50ID0gdGhpcy5nZXREb21FbGVtZW50KCk7XG4gICAgZWxlbWVudC5vbignY2xpY2snLCAoKSA9PiB7XG4gICAgICBpZiAoZWxlbWVudC5kYXRhKCd1cmwnKSkge1xuICAgICAgICB3aW5kb3cub3BlbihlbGVtZW50LmRhdGEoJ3VybCcpLCAnX2JsYW5rJyk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogR2V0cyB0aGUgVVJMIHRoYXQgc2hvdWxkIGJlIGZvbGxvd2VkIHdoZW4gdGhlIHdhdGVybWFyayBpcyBjbGlja2VkLlxuICAgKiBAcmV0dXJucyB7c3RyaW5nfSB0aGUgd2F0ZXJtYXJrIFVSTFxuICAgKi9cbiAgZ2V0VXJsKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0RG9tRWxlbWVudCgpLmRhdGEoJ3VybCcpO1xuICB9XG5cbiAgc2V0VXJsKHVybDogc3RyaW5nKTogdm9pZCB7XG4gICAgaWYgKHVybCA9PT0gdW5kZWZpbmVkIHx8IHVybCA9PSBudWxsKSB7XG4gICAgICB1cmwgPSAnJztcbiAgICB9XG4gICAgdGhpcy5nZXREb21FbGVtZW50KCkuZGF0YSgndXJsJywgdXJsKTtcbiAgfVxufSIsImltcG9ydCB7QnV0dG9uQ29uZmlnLCBCdXR0b259IGZyb20gJy4vYnV0dG9uJztcbmltcG9ydCB7VUlJbnN0YW5jZU1hbmFnZXJ9IGZyb20gJy4uL3VpbWFuYWdlcic7XG5pbXBvcnQge0NvbXBvbmVudCwgQ29tcG9uZW50Q29uZmlnfSBmcm9tICcuL2NvbXBvbmVudCc7XG5pbXBvcnQgeyBQbGF5ZXJBUEkgfSBmcm9tICdiaXRtb3Zpbi1wbGF5ZXInO1xuaW1wb3J0IHsgaTE4biB9IGZyb20gJy4uL2xvY2FsaXphdGlvbi9pMThuJztcblxuLyoqXG4gKiBDb25maWd1cmF0aW9uIGludGVyZmFjZSBmb3IgdGhlIHtAbGluayBDbG9zZUJ1dHRvbn0uXG4gKlxuICogQGNhdGVnb3J5IENvbmZpZ3NcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBDbG9zZUJ1dHRvbkNvbmZpZyBleHRlbmRzIEJ1dHRvbkNvbmZpZyB7XG4gIC8qKlxuICAgKiBUaGUgY29tcG9uZW50IHRoYXQgc2hvdWxkIGJlIGNsb3NlZCB3aGVuIHRoZSBidXR0b24gaXMgY2xpY2tlZC5cbiAgICovXG4gIHRhcmdldDogQ29tcG9uZW50PENvbXBvbmVudENvbmZpZz47XG59XG5cbi8qKlxuICogQSBidXR0b24gdGhhdCBjbG9zZXMgKGhpZGVzKSBhIGNvbmZpZ3VyZWQgY29tcG9uZW50LlxuICpcbiAqIEBjYXRlZ29yeSBCdXR0b25zXG4gKi9cbmV4cG9ydCBjbGFzcyBDbG9zZUJ1dHRvbiBleHRlbmRzIEJ1dHRvbjxDbG9zZUJ1dHRvbkNvbmZpZz4ge1xuXG4gIGNvbnN0cnVjdG9yKGNvbmZpZzogQ2xvc2VCdXR0b25Db25maWcpIHtcbiAgICBzdXBlcihjb25maWcpO1xuXG4gICAgdGhpcy5jb25maWcgPSB0aGlzLm1lcmdlQ29uZmlnKGNvbmZpZywge1xuICAgICAgY3NzQ2xhc3M6ICd1aS1jbG9zZWJ1dHRvbicsXG4gICAgICB0ZXh0OiBpMThuLmdldExvY2FsaXplcignY2xvc2UnKSxcbiAgICB9IGFzIENsb3NlQnV0dG9uQ29uZmlnLCB0aGlzLmNvbmZpZyk7XG4gIH1cblxuICBjb25maWd1cmUocGxheWVyOiBQbGF5ZXJBUEksIHVpbWFuYWdlcjogVUlJbnN0YW5jZU1hbmFnZXIpOiB2b2lkIHtcbiAgICBzdXBlci5jb25maWd1cmUocGxheWVyLCB1aW1hbmFnZXIpO1xuXG4gICAgbGV0IGNvbmZpZyA9IHRoaXMuZ2V0Q29uZmlnKCk7XG5cbiAgICB0aGlzLm9uQ2xpY2suc3Vic2NyaWJlKCgpID0+IHtcbiAgICAgIGNvbmZpZy50YXJnZXQuaGlkZSgpO1xuICAgIH0pO1xuICB9XG59IiwiaW1wb3J0IHtHdWlkfSBmcm9tICcuLi9ndWlkJztcbmltcG9ydCB7RE9NfSBmcm9tICcuLi9kb20nO1xuaW1wb3J0IHtFdmVudERpc3BhdGNoZXIsIE5vQXJncywgRXZlbnR9IGZyb20gJy4uL2V2ZW50ZGlzcGF0Y2hlcic7XG5pbXBvcnQge1VJSW5zdGFuY2VNYW5hZ2VyfSBmcm9tICcuLi91aW1hbmFnZXInO1xuaW1wb3J0IHsgUGxheWVyQVBJIH0gZnJvbSAnYml0bW92aW4tcGxheWVyJztcbmltcG9ydCB7IGkxOG4sIExvY2FsaXphYmxlVGV4dCB9IGZyb20gJy4uL2xvY2FsaXphdGlvbi9pMThuJztcblxuLyoqXG4gKiBCYXNlIGNvbmZpZ3VyYXRpb24gaW50ZXJmYWNlIGZvciBhIGNvbXBvbmVudC5cbiAqIFNob3VsZCBiZSBleHRlbmRlZCBieSBjb21wb25lbnRzIHRoYXQgd2FudCB0byBhZGQgYWRkaXRpb25hbCBjb25maWd1cmF0aW9uIG9wdGlvbnMuXG4gKlxuICogQGNhdGVnb3J5IENvbmZpZ3NcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBDb21wb25lbnRDb25maWcge1xuICAvKipcbiAgICogVGhlIEhUTUwgdGFnIG5hbWUgb2YgdGhlIGNvbXBvbmVudC5cbiAgICogRGVmYXVsdDogJ2RpdidcbiAgICovXG4gIHRhZz86IHN0cmluZztcbiAgLyoqXG4gICAqIFRoZSBIVE1MIElEIG9mIHRoZSBjb21wb25lbnQuXG4gICAqIERlZmF1bHQ6IGF1dG9tYXRpY2FsbHkgZ2VuZXJhdGVkIHdpdGggcGF0dGVybiAndWktaWQte2d1aWR9Jy5cbiAgICovXG4gIGlkPzogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBBIHByZWZpeCB0byBwcmVwZW5kIGFsbCBDU1MgY2xhc3NlcyB3aXRoLlxuICAgKi9cbiAgY3NzUHJlZml4Pzogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBUaGUgQ1NTIGNsYXNzZXMgb2YgdGhlIGNvbXBvbmVudC4gVGhpcyBpcyB1c3VhbGx5IHRoZSBjbGFzcyBmcm9tIHdoZXJlIHRoZSBjb21wb25lbnQgdGFrZXMgaXRzIHN0eWxpbmcuXG4gICAqL1xuICBjc3NDbGFzcz86IHN0cmluZzsgLy8gJ2NsYXNzJyBpcyBhIHJlc2VydmVkIGtleXdvcmQsIHNvIHdlIG5lZWQgdG8gbWFrZSB0aGUgbmFtZSBtb3JlIGNvbXBsaWNhdGVkXG5cbiAgLyoqXG4gICAqIEFkZGl0aW9uYWwgQ1NTIGNsYXNzZXMgb2YgdGhlIGNvbXBvbmVudC5cbiAgICovXG4gIGNzc0NsYXNzZXM/OiBzdHJpbmdbXTtcblxuICAvKipcbiAgICogU3BlY2lmaWVzIGlmIHRoZSBjb21wb25lbnQgc2hvdWxkIGJlIGhpZGRlbiBhdCBzdGFydHVwLlxuICAgKiBEZWZhdWx0OiBmYWxzZVxuICAgKi9cbiAgaGlkZGVuPzogYm9vbGVhbjtcblxuICAvKipcbiAgICogU3BlY2lmaWVzIGlmIHRoZSBjb21wb25lbnQgaXMgZW5hYmxlZCAoaW50ZXJhY3RpdmUpIG9yIG5vdC5cbiAgICogRGVmYXVsdDogZmFsc2VcbiAgICovXG4gIGRpc2FibGVkPzogYm9vbGVhbjtcblxuICAvKipcbiAgICogU3BlY2lmaWVzIHRoZSBjb21wb25lbnQgcm9sZSBmb3IgV0NBRzIwIHN0YW5kYXJkXG4gICAqL1xuICByb2xlPzogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBXQ0FHMjAgcmVxdWlyZW1lbnQgZm9yIHNjcmVlbiByZWFkZXIgbmF2aWdhdGlvblxuICAgKi9cbiAgdGFiSW5kZXg/OiBudW1iZXI7XG5cbiAgLyoqXG4gICAqIFdDQUcyMCBzdGFuZGFyZCBmb3IgZGVmaW5pbmcgaW5mbyBhYm91dCB0aGUgY29tcG9uZW50ICh1c3VhbGx5IHRoZSBuYW1lKVxuICAgKi9cbiAgYXJpYUxhYmVsPzogTG9jYWxpemFibGVUZXh0O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIENvbXBvbmVudEhvdmVyQ2hhbmdlZEV2ZW50QXJncyBleHRlbmRzIE5vQXJncyB7XG4gIC8qKlxuICAgKiBUcnVlIGlzIHRoZSBjb21wb25lbnQgaXMgaG92ZXJlZCwgZWxzZSBmYWxzZS5cbiAgICovXG4gIGhvdmVyZWQ6IGJvb2xlYW47XG59XG5cbmV4cG9ydCBlbnVtIFZpZXdNb2RlIHtcbiAgLyoqXG4gICAqIEluZGljYXRlcyB0aGF0IHRoZSBjb21wb25lbnQgaGFzIGVudGVyZWQgYSB2aWV3IG1vZGUgd2hlcmUgaXQgbXVzdCBzdGF5IHZpc2libGUuIEF1dG8taGlkaW5nIG9mIHRoaXMgY29tcG9uZW50XG4gICAqIG11c3QgYmUgZGlzYWJsZWQgYXMgbG9uZyBhcyBpdCByZXNpZGVzIGluIHRoaXMgc3RhdGUuXG4gICAqL1xuICBQZXJzaXN0ZW50ID0gJ3BlcnNpc3RlbnQnLFxuXG4gIC8qKlxuICAgKiBUaGUgY29udHJvbCBjYW4gYmUgaGlkZGVuIGF0IGFueSB0aW1lLlxuICAgKi9cbiAgVGVtcG9yYXJ5ID0gJ3RlbXBvcmFyeScsXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgVmlld01vZGVDaGFuZ2VkRXZlbnRBcmdzIGV4dGVuZHMgTm9BcmdzIHtcbiAgLyoqXG4gICAqIFRoZSBgVmlld01vZGVgIHRoZSBjb250cm9sIGlzIGN1cnJlbnRseSBpbi5cbiAgICovXG4gIG1vZGU6IFZpZXdNb2RlO1xufVxuXG4vKipcbiAqIFRoZSBiYXNlIGNsYXNzIG9mIHRoZSBVSSBmcmFtZXdvcmsuXG4gKiBFYWNoIGNvbXBvbmVudCBtdXN0IGV4dGVuZCB0aGlzIGNsYXNzIGFuZCBvcHRpb25hbGx5IHRoZSBjb25maWcgaW50ZXJmYWNlLlxuICpcbiAqIEBjYXRlZ29yeSBDb21wb25lbnRzXG4gKi9cbmV4cG9ydCBjbGFzcyBDb21wb25lbnQ8Q29uZmlnIGV4dGVuZHMgQ29tcG9uZW50Q29uZmlnPiB7XG5cbiAgLyoqXG4gICAqIFRoZSBjbGFzc25hbWUgdGhhdCBpcyBhdHRhY2hlZCB0byB0aGUgZWxlbWVudCB3aGVuIGl0IGlzIGluIHRoZSBoaWRkZW4gc3RhdGUuXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqL1xuICBwcml2YXRlIHN0YXRpYyByZWFkb25seSBDTEFTU19ISURERU4gPSAnaGlkZGVuJztcblxuICAvKipcbiAgICogVGhlIGNsYXNzbmFtZSB0aGF0IGlzIGF0dGFjaGVkIHRvIHRoZSBlbGVtZW50IHdoZW4gaXQgaXMgaW4gdGhlIGRpc2FibGVkIHN0YXRlLlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKi9cbiAgcHJpdmF0ZSBzdGF0aWMgcmVhZG9ubHkgQ0xBU1NfRElTQUJMRUQgPSAnZGlzYWJsZWQnO1xuXG4gIC8qKlxuICAgKiBDb25maWd1cmF0aW9uIG9iamVjdCBvZiB0aGlzIGNvbXBvbmVudC5cbiAgICovXG4gIHByb3RlY3RlZCBjb25maWc6IENvbmZpZztcblxuICAvKipcbiAgICogVGhlIGNvbXBvbmVudCdzIERPTSBlbGVtZW50LlxuICAgKi9cbiAgcHJpdmF0ZSBlbGVtZW50OiBET007XG5cbiAgLyoqXG4gICAqIEZsYWcgdGhhdCBrZWVwcyB0cmFjayBvZiB0aGUgaGlkZGVuIHN0YXRlLlxuICAgKi9cbiAgcHJpdmF0ZSBoaWRkZW46IGJvb2xlYW47XG5cbiAgLyoqXG4gICAqIEZsYXQgdGhhdCBrZWVwcyB0cmFjayBvZiB0aGUgZGlzYWJsZWQgc3RhdGUuXG4gICAqL1xuICBwcml2YXRlIGRpc2FibGVkOiBib29sZWFuO1xuXG4gIC8qKlxuICAgKiBGbGFnIHRoYXQga2VlcHMgdHJhY2sgb2YgdGhlIGhvdmVyIHN0YXRlLlxuICAgKi9cbiAgcHJpdmF0ZSBob3ZlcmVkOiBib29sZWFuO1xuXG4gIC8qKlxuICAgKiBUaGUgY3VycmVudCB2aWV3IG1vZGUgb2YgdGhlIGNvbXBvbmVudC5cbiAgICovXG4gIHByaXZhdGUgdmlld01vZGU6IFZpZXdNb2RlO1xuXG4gIC8qKlxuICAgKiBUaGUgbGlzdCBvZiBldmVudHMgdGhhdCB0aGlzIGNvbXBvbmVudCBvZmZlcnMuIFRoZXNlIGV2ZW50cyBzaG91bGQgYWx3YXlzIGJlIHByaXZhdGUgYW5kIG9ubHkgZGlyZWN0bHlcbiAgICogYWNjZXNzZWQgZnJvbSB3aXRoaW4gdGhlIGltcGxlbWVudGluZyBjb21wb25lbnQuXG4gICAqXG4gICAqIEJlY2F1c2UgVHlwZVNjcmlwdCBkb2VzIG5vdCBzdXBwb3J0IHByaXZhdGUgcHJvcGVydGllcyB3aXRoIHRoZSBzYW1lIG5hbWUgb24gZGlmZmVyZW50IGNsYXNzIGhpZXJhcmNoeSBsZXZlbHNcbiAgICogKGkuZS4gc3VwZXJjbGFzcyBhbmQgc3ViY2xhc3MgY2Fubm90IGNvbnRhaW4gYSBwcml2YXRlIHByb3BlcnR5IHdpdGggdGhlIHNhbWUgbmFtZSksIHRoZSBkZWZhdWx0IG5hbWluZ1xuICAgKiBjb252ZW50aW9uIGZvciB0aGUgZXZlbnQgbGlzdCBvZiBhIGNvbXBvbmVudCB0aGF0IHNob3VsZCBiZSBmb2xsb3dlZCBieSBzdWJjbGFzc2VzIGlzIHRoZSBjb25jYXRlbmF0aW9uIG9mIHRoZVxuICAgKiBjYW1lbC1jYXNlZCBjbGFzcyBuYW1lICsgJ0V2ZW50cycgKGUuZy4gU3ViQ2xhc3MgZXh0ZW5kcyBDb21wb25lbnQgPT4gc3ViQ2xhc3NFdmVudHMpLlxuICAgKiBTZWUge0BsaW5rICNjb21wb25lbnRFdmVudHN9IGZvciBhbiBleGFtcGxlLlxuICAgKlxuICAgKiBFdmVudCBwcm9wZXJ0aWVzIHNob3VsZCBiZSBuYW1lZCBpbiBjYW1lbCBjYXNlIHdpdGggYW4gJ29uJyBwcmVmaXggYW5kIGluIHRoZSBwcmVzZW50IHRlbnNlLiBBc3luYyBldmVudHMgbWF5XG4gICAqIGhhdmUgYSBzdGFydCBldmVudCAod2hlbiB0aGUgb3BlcmF0aW9uIHN0YXJ0cykgaW4gdGhlIHByZXNlbnQgdGVuc2UsIGFuZCBtdXN0IGhhdmUgYW4gZW5kIGV2ZW50ICh3aGVuIHRoZVxuICAgKiBvcGVyYXRpb24gZW5kcykgaW4gdGhlIHBhc3QgdGVuc2UgKG9yIHByZXNlbnQgdGVuc2UgaW4gc3BlY2lhbCBjYXNlcyAoZS5nLiBvblN0YXJ0L29uU3RhcnRlZCBvciBvblBsYXkvb25QbGF5aW5nKS5cbiAgICogU2VlIHtAbGluayAjY29tcG9uZW50RXZlbnRzI29uU2hvd30gZm9yIGFuIGV4YW1wbGUuXG4gICAqXG4gICAqIEVhY2ggZXZlbnQgc2hvdWxkIGJlIGFjY29tcGFuaWVkIHdpdGggYSBwcm90ZWN0ZWQgbWV0aG9kIG5hbWVkIGJ5IHRoZSBjb252ZW50aW9uIGV2ZW50TmFtZSArICdFdmVudCdcbiAgICogKGUuZy4gb25TdGFydEV2ZW50KSwgdGhhdCBhY3R1YWxseSB0cmlnZ2VycyB0aGUgZXZlbnQgYnkgY2FsbGluZyB7QGxpbmsgRXZlbnREaXNwYXRjaGVyI2Rpc3BhdGNoIGRpc3BhdGNofSBhbmRcbiAgICogcGFzc2luZyBhIHJlZmVyZW5jZSB0byB0aGUgY29tcG9uZW50IGFzIGZpcnN0IHBhcmFtZXRlci4gQ29tcG9uZW50cyBzaG91bGQgYWx3YXlzIHRyaWdnZXIgdGhlaXIgZXZlbnRzIHdpdGggdGhlc2VcbiAgICogbWV0aG9kcy4gSW1wbGVtZW50aW5nIHRoaXMgcGF0dGVybiBnaXZlcyBzdWJjbGFzc2VzIG1lYW5zIHRvIGRpcmVjdGx5IGxpc3RlbiB0byB0aGUgZXZlbnRzIGJ5IG92ZXJyaWRpbmcgdGhlXG4gICAqIG1ldGhvZCAoYW5kIHNhdmluZyB0aGUgb3ZlcmhlYWQgb2YgcGFzc2luZyBhIGhhbmRsZXIgdG8gdGhlIGV2ZW50IGRpc3BhdGNoZXIpIGFuZCBtb3JlIGltcG9ydGFudGx5IHRvIHRyaWdnZXJcbiAgICogdGhlc2UgZXZlbnRzIHdpdGhvdXQgaGF2aW5nIGFjY2VzcyB0byB0aGUgcHJpdmF0ZSBldmVudCBsaXN0LlxuICAgKiBTZWUge0BsaW5rICNvblNob3d9IGZvciBhbiBleGFtcGxlLlxuICAgKlxuICAgKiBUbyBwcm92aWRlIGV4dGVybmFsIGNvZGUgdGhlIHBvc3NpYmlsaXR5IHRvIGxpc3RlbiB0byB0aGlzIGNvbXBvbmVudCdzIGV2ZW50cyAoc3Vic2NyaWJlLCB1bnN1YnNjcmliZSwgZXRjLiksXG4gICAqIGVhY2ggZXZlbnQgc2hvdWxkIGFsc28gYmUgYWNjb21wYW5pZWQgYnkgYSBwdWJsaWMgZ2V0dGVyIGZ1bmN0aW9uIHdpdGggdGhlIHNhbWUgbmFtZSBhcyB0aGUgZXZlbnQncyBwcm9wZXJ0eSxcbiAgICogdGhhdCByZXR1cm5zIHRoZSB7QGxpbmsgRXZlbnR9IG9idGFpbmVkIGZyb20gdGhlIGV2ZW50IGRpc3BhdGNoZXIgYnkgY2FsbGluZyB7QGxpbmsgRXZlbnREaXNwYXRjaGVyI2dldEV2ZW50fS5cbiAgICogU2VlIHtAbGluayAjb25TaG93fSBmb3IgYW4gZXhhbXBsZS5cbiAgICpcbiAgICogRnVsbCBleGFtcGxlIGZvciBhbiBldmVudCByZXByZXNlbnRpbmcgYW4gZXhhbXBsZSBhY3Rpb24gaW4gYSBleGFtcGxlIGNvbXBvbmVudDpcbiAgICpcbiAgICogPGNvZGU+XG4gICAqIC8vIERlZmluZSBhbiBleGFtcGxlIGNvbXBvbmVudCBjbGFzcyB3aXRoIGFuIGV4YW1wbGUgZXZlbnRcbiAgICogY2xhc3MgRXhhbXBsZUNvbXBvbmVudCBleHRlbmRzIENvbXBvbmVudDxDb21wb25lbnRDb25maWc+IHtcbiAgICAgKlxuICAgICAqICAgICBwcml2YXRlIGV4YW1wbGVDb21wb25lbnRFdmVudHMgPSB7XG4gICAgICogICAgICAgICBvbkV4YW1wbGVBY3Rpb246IG5ldyBFdmVudERpc3BhdGNoZXI8RXhhbXBsZUNvbXBvbmVudCwgTm9BcmdzPigpXG4gICAgICogICAgIH1cbiAgICAgKlxuICAgICAqICAgICAvLyBjb25zdHJ1Y3RvciBhbmQgb3RoZXIgc3R1ZmYuLi5cbiAgICAgKlxuICAgICAqICAgICBwcm90ZWN0ZWQgb25FeGFtcGxlQWN0aW9uRXZlbnQoKSB7XG4gICAgICogICAgICAgIHRoaXMuZXhhbXBsZUNvbXBvbmVudEV2ZW50cy5vbkV4YW1wbGVBY3Rpb24uZGlzcGF0Y2godGhpcyk7XG4gICAgICogICAgfVxuICAgICAqXG4gICAgICogICAgZ2V0IG9uRXhhbXBsZUFjdGlvbigpOiBFdmVudDxFeGFtcGxlQ29tcG9uZW50LCBOb0FyZ3M+IHtcbiAgICAgKiAgICAgICAgcmV0dXJuIHRoaXMuZXhhbXBsZUNvbXBvbmVudEV2ZW50cy5vbkV4YW1wbGVBY3Rpb24uZ2V0RXZlbnQoKTtcbiAgICAgKiAgICB9XG4gICAgICogfVxuICAgKlxuICAgKiAvLyBDcmVhdGUgYW4gaW5zdGFuY2Ugb2YgdGhlIGNvbXBvbmVudCBzb21ld2hlcmVcbiAgICogdmFyIGV4YW1wbGVDb21wb25lbnRJbnN0YW5jZSA9IG5ldyBFeGFtcGxlQ29tcG9uZW50KCk7XG4gICAqXG4gICAqIC8vIFN1YnNjcmliZSB0byB0aGUgZXhhbXBsZSBldmVudCBvbiB0aGUgY29tcG9uZW50XG4gICAqIGV4YW1wbGVDb21wb25lbnRJbnN0YW5jZS5vbkV4YW1wbGVBY3Rpb24uc3Vic2NyaWJlKGZ1bmN0aW9uIChzZW5kZXI6IEV4YW1wbGVDb21wb25lbnQpIHtcbiAgICAgKiAgICAgY29uc29sZS5sb2coJ29uRXhhbXBsZUFjdGlvbiBvZiAnICsgc2VuZGVyICsgJyBoYXMgZmlyZWQhJyk7XG4gICAgICogfSk7XG4gICAqIDwvY29kZT5cbiAgICovXG4gIHByaXZhdGUgY29tcG9uZW50RXZlbnRzID0ge1xuICAgIG9uU2hvdzogbmV3IEV2ZW50RGlzcGF0Y2hlcjxDb21wb25lbnQ8Q29uZmlnPiwgTm9BcmdzPigpLFxuICAgIG9uSGlkZTogbmV3IEV2ZW50RGlzcGF0Y2hlcjxDb21wb25lbnQ8Q29uZmlnPiwgTm9BcmdzPigpLFxuICAgIG9uVmlld01vZGVDaGFuZ2VkOiBuZXcgRXZlbnREaXNwYXRjaGVyPENvbXBvbmVudDxDb25maWc+LCBWaWV3TW9kZUNoYW5nZWRFdmVudEFyZ3M+KCksXG4gICAgb25Ib3ZlckNoYW5nZWQ6IG5ldyBFdmVudERpc3BhdGNoZXI8Q29tcG9uZW50PENvbmZpZz4sIENvbXBvbmVudEhvdmVyQ2hhbmdlZEV2ZW50QXJncz4oKSxcbiAgICBvbkVuYWJsZWQ6IG5ldyBFdmVudERpc3BhdGNoZXI8Q29tcG9uZW50PENvbmZpZz4sIE5vQXJncz4oKSxcbiAgICBvbkRpc2FibGVkOiBuZXcgRXZlbnREaXNwYXRjaGVyPENvbXBvbmVudDxDb25maWc+LCBOb0FyZ3M+KCksXG4gIH07XG5cbiAgLyoqXG4gICAqIENvbnN0cnVjdHMgYSBjb21wb25lbnQgd2l0aCBhbiBvcHRpb25hbGx5IHN1cHBsaWVkIGNvbmZpZy4gQWxsIHN1YmNsYXNzZXMgbXVzdCBjYWxsIHRoZSBjb25zdHJ1Y3RvciBvZiB0aGVpclxuICAgKiBzdXBlcmNsYXNzIGFuZCB0aGVuIG1lcmdlIHRoZWlyIGNvbmZpZ3VyYXRpb24gaW50byB0aGUgY29tcG9uZW50J3MgY29uZmlndXJhdGlvbi5cbiAgICogQHBhcmFtIGNvbmZpZyB0aGUgY29uZmlndXJhdGlvbiBmb3IgdGhlIGNvbXBvbmVudFxuICAgKi9cbiAgY29uc3RydWN0b3IoY29uZmlnOiBDb21wb25lbnRDb25maWcgPSB7fSkge1xuICAgIC8vIENyZWF0ZSB0aGUgY29uZmlndXJhdGlvbiBmb3IgdGhpcyBjb21wb25lbnRcbiAgICB0aGlzLmNvbmZpZyA9IDxDb25maWc+dGhpcy5tZXJnZUNvbmZpZyhjb25maWcsIHtcbiAgICAgIHRhZzogJ2RpdicsXG4gICAgICBpZDogJ3t7UFJFRklYfX0taWQtJyArIEd1aWQubmV4dCgpLFxuICAgICAgY3NzUHJlZml4OiAne3tQUkVGSVh9fScsXG4gICAgICBjc3NDbGFzczogJ3VpLWNvbXBvbmVudCcsXG4gICAgICBjc3NDbGFzc2VzOiBbXSxcbiAgICAgIGhpZGRlbjogZmFsc2UsXG4gICAgICBkaXNhYmxlZDogZmFsc2UsXG4gICAgfSwge30pO1xuICAgIHRoaXMudmlld01vZGUgPSBWaWV3TW9kZS5UZW1wb3Jhcnk7XG4gIH1cblxuICAvKipcbiAgICogSW5pdGlhbGl6ZXMgdGhlIGNvbXBvbmVudCwgZS5nLiBieSBhcHBseWluZyBjb25maWcgc2V0dGluZ3MuXG4gICAqIFRoaXMgbWV0aG9kIG11c3Qgbm90IGJlIGNhbGxlZCBmcm9tIG91dHNpZGUgdGhlIFVJIGZyYW1ld29yay5cbiAgICpcbiAgICogVGhpcyBtZXRob2QgaXMgYXV0b21hdGljYWxseSBjYWxsZWQgYnkgdGhlIHtAbGluayBVSUluc3RhbmNlTWFuYWdlcn0uIElmIHRoZSBjb21wb25lbnQgaXMgYW4gaW5uZXIgY29tcG9uZW50IG9mXG4gICAqIHNvbWUgY29tcG9uZW50LCBhbmQgdGh1cyBlbmNhcHN1bGF0ZWQgYWJkIG1hbmFnZWQgaW50ZXJuYWxseSBhbmQgbmV2ZXIgZGlyZWN0bHkgZXhwb3NlZCB0byB0aGUgVUlNYW5hZ2VyLFxuICAgKiB0aGlzIG1ldGhvZCBtdXN0IGJlIGNhbGxlZCBmcm9tIHRoZSBtYW5hZ2luZyBjb21wb25lbnQncyB7QGxpbmsgI2luaXRpYWxpemV9IG1ldGhvZC5cbiAgICovXG4gIGluaXRpYWxpemUoKTogdm9pZCB7XG4gICAgdGhpcy5oaWRkZW4gPSB0aGlzLmNvbmZpZy5oaWRkZW47XG4gICAgdGhpcy5kaXNhYmxlZCA9IHRoaXMuY29uZmlnLmRpc2FibGVkO1xuXG4gICAgLy8gSGlkZSB0aGUgY29tcG9uZW50IGF0IGluaXRpYWxpemF0aW9uIGlmIGl0IGlzIGNvbmZpZ3VyZWQgdG8gYmUgaGlkZGVuXG4gICAgaWYgKHRoaXMuaXNIaWRkZW4oKSkge1xuICAgICAgdGhpcy5oaWRkZW4gPSBmYWxzZTsgLy8gU2V0IGZsYWcgdG8gZmFsc2UgZm9yIHRoZSBmb2xsb3dpbmcgaGlkZSgpIGNhbGwgdG8gd29yayAoaGlkZSgpIGNoZWNrcyB0aGUgZmxhZylcbiAgICAgIHRoaXMuaGlkZSgpO1xuICAgIH1cblxuICAgIC8vIERpc2FibGUgdGhlIGNvbXBvbmVudCBhdCBpbml0aWFsaXphdGlvbiBpZiBpdCBpcyBjb25maWd1cmVkIHRvIGJlIGRpc2FibGVkXG4gICAgaWYgKHRoaXMuaXNEaXNhYmxlZCgpKSB7XG4gICAgICB0aGlzLmRpc2FibGVkID0gZmFsc2U7IC8vIFNldCBmbGFnIHRvIGZhbHNlIGZvciB0aGUgZm9sbG93aW5nIGRpc2FibGUoKSBjYWxsIHRvIHdvcmsgKGRpc2FibGUoKSBjaGVja3MgdGhlIGZsYWcpXG4gICAgICB0aGlzLmRpc2FibGUoKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ29uZmlndXJlcyB0aGUgY29tcG9uZW50IGZvciB0aGUgc3VwcGxpZWQgUGxheWVyIGFuZCBVSUluc3RhbmNlTWFuYWdlci4gVGhpcyBpcyB0aGUgcGxhY2Ugd2hlcmUgYWxsIHRoZSBtYWdpY1xuICAgKiBoYXBwZW5zLCB3aGVyZSBjb21wb25lbnRzIHR5cGljYWxseSBzdWJzY3JpYmUgYW5kIHJlYWN0IHRvIGV2ZW50cyAob24gdGhlaXIgRE9NIGVsZW1lbnQsIHRoZSBQbGF5ZXIsIG9yIHRoZVxuICAgKiBVSUluc3RhbmNlTWFuYWdlciksIGFuZCBiYXNpY2FsbHkgZXZlcnl0aGluZyB0aGF0IG1ha2VzIHRoZW0gaW50ZXJhY3RpdmUuXG4gICAqIFRoaXMgbWV0aG9kIGlzIGNhbGxlZCBvbmx5IG9uY2UsIHdoZW4gdGhlIFVJTWFuYWdlciBpbml0aWFsaXplcyB0aGUgVUkuXG4gICAqXG4gICAqIFN1YmNsYXNzZXMgdXN1YWxseSBvdmVyd3JpdGUgdGhpcyBtZXRob2QgdG8gYWRkIHRoZWlyIG93biBmdW5jdGlvbmFsaXR5LlxuICAgKlxuICAgKiBAcGFyYW0gcGxheWVyIHRoZSBwbGF5ZXIgd2hpY2ggdGhpcyBjb21wb25lbnQgY29udHJvbHNcbiAgICogQHBhcmFtIHVpbWFuYWdlciB0aGUgVUlJbnN0YW5jZU1hbmFnZXIgdGhhdCBtYW5hZ2VzIHRoaXMgY29tcG9uZW50XG4gICAqL1xuICBjb25maWd1cmUocGxheWVyOiBQbGF5ZXJBUEksIHVpbWFuYWdlcjogVUlJbnN0YW5jZU1hbmFnZXIpOiB2b2lkIHtcbiAgICB0aGlzLm9uU2hvdy5zdWJzY3JpYmUoKCkgPT4gdWltYW5hZ2VyLm9uQ29tcG9uZW50U2hvdy5kaXNwYXRjaCh0aGlzKSk7XG4gICAgdGhpcy5vbkhpZGUuc3Vic2NyaWJlKCgpID0+IHVpbWFuYWdlci5vbkNvbXBvbmVudEhpZGUuZGlzcGF0Y2godGhpcykpO1xuICAgIHRoaXMub25WaWV3TW9kZUNoYW5nZWQuc3Vic2NyaWJlKChfLCBhcmdzKSA9PiB1aW1hbmFnZXIub25Db21wb25lbnRWaWV3TW9kZUNoYW5nZWQuZGlzcGF0Y2godGhpcywgYXJncykpO1xuXG4gICAgLy8gVHJhY2sgdGhlIGhvdmVyZWQgc3RhdGUgb2YgdGhlIGVsZW1lbnRcbiAgICB0aGlzLmdldERvbUVsZW1lbnQoKS5vbignbW91c2VlbnRlcicsICgpID0+IHRoaXMub25Ib3ZlckNoYW5nZWRFdmVudCh0cnVlKSk7XG4gICAgdGhpcy5nZXREb21FbGVtZW50KCkub24oJ21vdXNlbGVhdmUnLCAoKSA9PiB0aGlzLm9uSG92ZXJDaGFuZ2VkRXZlbnQoZmFsc2UpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZWxlYXNlcyBhbGwgcmVzb3VyY2VzIGFuZCBkZXBlbmRlbmNpZXMgdGhhdCB0aGUgY29tcG9uZW50IGhvbGRzLiBQbGF5ZXIsIERPTSwgYW5kIFVJTWFuYWdlciBldmVudHMgYXJlXG4gICAqIGF1dG9tYXRpY2FsbHkgcmVtb3ZlZCBkdXJpbmcgcmVsZWFzZSBhbmQgZG8gbm90IGV4cGxpY2l0bHkgbmVlZCB0byBiZSByZW1vdmVkIGhlcmUuXG4gICAqIFRoaXMgbWV0aG9kIGlzIGNhbGxlZCBieSB0aGUgVUlNYW5hZ2VyIHdoZW4gaXQgcmVsZWFzZXMgdGhlIFVJLlxuICAgKlxuICAgKiBTdWJjbGFzc2VzIHRoYXQgbmVlZCB0byByZWxlYXNlIHJlc291cmNlcyBzaG91bGQgb3ZlcnJpZGUgdGhpcyBtZXRob2QgYW5kIGNhbGwgc3VwZXIucmVsZWFzZSgpLlxuICAgKi9cbiAgcmVsZWFzZSgpOiB2b2lkIHtcbiAgICAvLyBOb3RoaW5nIHRvIGRvIGhlcmUsIG92ZXJyaWRlIHdoZXJlIG5lY2Vzc2FyeVxuICB9XG5cbiAgLyoqXG4gICAqIEdlbmVyYXRlIHRoZSBET00gZWxlbWVudCBmb3IgdGhpcyBjb21wb25lbnQuXG4gICAqXG4gICAqIFN1YmNsYXNzZXMgdXN1YWxseSBvdmVyd3JpdGUgdGhpcyBtZXRob2QgdG8gZXh0ZW5kIG9yIHJlcGxhY2UgdGhlIERPTSBlbGVtZW50IHdpdGggdGhlaXIgb3duIGRlc2lnbi5cbiAgICovXG4gIHByb3RlY3RlZCB0b0RvbUVsZW1lbnQoKTogRE9NIHtcbiAgICBsZXQgZWxlbWVudCA9IG5ldyBET00odGhpcy5jb25maWcudGFnLCB7XG4gICAgICAnaWQnOiB0aGlzLmNvbmZpZy5pZCxcbiAgICAgICdjbGFzcyc6IHRoaXMuZ2V0Q3NzQ2xhc3NlcygpLFxuICAgICAgJ3JvbGUnOiB0aGlzLmNvbmZpZy5yb2xlLFxuICAgIH0sIHRoaXMpO1xuXG4gICAgcmV0dXJuIGVsZW1lbnQ7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgRE9NIGVsZW1lbnQgb2YgdGhpcyBjb21wb25lbnQuIENyZWF0ZXMgdGhlIERPTSBlbGVtZW50IGlmIGl0IGRvZXMgbm90IHlldCBleGlzdC5cbiAgICpcbiAgICogU2hvdWxkIG5vdCBiZSBvdmVyd3JpdHRlbiBieSBzdWJjbGFzc2VzLlxuICAgKlxuICAgKiBAcmV0dXJucyB7RE9NfVxuICAgKi9cbiAgZ2V0RG9tRWxlbWVudCgpOiBET00ge1xuICAgIGlmICghdGhpcy5lbGVtZW50KSB7XG4gICAgICB0aGlzLmVsZW1lbnQgPSB0aGlzLnRvRG9tRWxlbWVudCgpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLmVsZW1lbnQ7XG4gIH1cblxuICAvKipcbiAgICogQ2hlY2tzIGlmIHRoaXMgY29tcG9uZW50IGhhcyBhIERPTSBlbGVtZW50LlxuICAgKi9cbiAgaGFzRG9tRWxlbWVudCgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gQm9vbGVhbih0aGlzLmVsZW1lbnQpO1xuICB9XG5cbiAgc2V0QXJpYUxhYmVsKGxhYmVsOiBMb2NhbGl6YWJsZVRleHQpOiB2b2lkIHtcbiAgICB0aGlzLnNldEFyaWFBdHRyKCdsYWJlbCcsIGkxOG4ucGVyZm9ybUxvY2FsaXphdGlvbihsYWJlbCkpO1xuICB9XG5cbiAgc2V0QXJpYUF0dHIobmFtZTogc3RyaW5nLCB2YWx1ZTogc3RyaW5nKSB7XG4gICAgdGhpcy5nZXREb21FbGVtZW50KCkuYXR0cihgYXJpYS0ke25hbWV9YCwgdmFsdWUpO1xuICB9XG5cbiAgLyoqXG4gICAqIE1lcmdlcyBhIGNvbmZpZ3VyYXRpb24gd2l0aCBhIGRlZmF1bHQgY29uZmlndXJhdGlvbiBhbmQgYSBiYXNlIGNvbmZpZ3VyYXRpb24gZnJvbSB0aGUgc3VwZXJjbGFzcy5cbiAgICpcbiAgICogQHBhcmFtIGNvbmZpZyB0aGUgY29uZmlndXJhdGlvbiBzZXR0aW5ncyBmb3IgdGhlIGNvbXBvbmVudHMsIGFzIHVzdWFsbHkgcGFzc2VkIHRvIHRoZSBjb25zdHJ1Y3RvclxuICAgKiBAcGFyYW0gZGVmYXVsdHMgYSBkZWZhdWx0IGNvbmZpZ3VyYXRpb24gZm9yIHNldHRpbmdzIHRoYXQgYXJlIG5vdCBwYXNzZWQgd2l0aCB0aGUgY29uZmlndXJhdGlvblxuICAgKiBAcGFyYW0gYmFzZSBjb25maWd1cmF0aW9uIGluaGVyaXRlZCBmcm9tIGEgc3VwZXJjbGFzc1xuICAgKiBAcmV0dXJucyB7Q29uZmlnfVxuICAgKi9cbiAgcHJvdGVjdGVkIG1lcmdlQ29uZmlnPENvbmZpZz4oY29uZmlnOiBDb25maWcsIGRlZmF1bHRzOiBDb25maWcsIGJhc2U6IENvbmZpZyk6IENvbmZpZyB7XG4gICAgLy8gRXh0ZW5kIGRlZmF1bHQgY29uZmlnIHdpdGggc3VwcGxpZWQgY29uZmlnXG4gICAgbGV0IG1lcmdlZCA9IE9iamVjdC5hc3NpZ24oe30sIGJhc2UsIGRlZmF1bHRzLCBjb25maWcpO1xuXG4gICAgLy8gUmV0dXJuIHRoZSBleHRlbmRlZCBjb25maWdcbiAgICByZXR1cm4gbWVyZ2VkO1xuICB9XG5cbiAgLyoqXG4gICAqIEhlbHBlciBtZXRob2QgdGhhdCByZXR1cm5zIGEgc3RyaW5nIG9mIGFsbCBDU1MgY2xhc3NlcyBvZiB0aGUgY29tcG9uZW50LlxuICAgKlxuICAgKiBAcmV0dXJucyB7c3RyaW5nfVxuICAgKi9cbiAgcHJvdGVjdGVkIGdldENzc0NsYXNzZXMoKTogc3RyaW5nIHtcbiAgICAvLyBNZXJnZSBhbGwgQ1NTIGNsYXNzZXMgaW50byBzaW5nbGUgYXJyYXlcbiAgICBsZXQgZmxhdHRlbmVkQXJyYXkgPSBbdGhpcy5jb25maWcuY3NzQ2xhc3NdLmNvbmNhdCh0aGlzLmNvbmZpZy5jc3NDbGFzc2VzKTtcbiAgICAvLyBQcmVmaXggY2xhc3Nlc1xuICAgIGZsYXR0ZW5lZEFycmF5ID0gZmxhdHRlbmVkQXJyYXkubWFwKChjc3MpID0+IHtcbiAgICAgIHJldHVybiB0aGlzLnByZWZpeENzcyhjc3MpO1xuICAgIH0pO1xuICAgIC8vIEpvaW4gYXJyYXkgdmFsdWVzIGludG8gYSBzdHJpbmdcbiAgICBsZXQgZmxhdHRlbmVkU3RyaW5nID0gZmxhdHRlbmVkQXJyYXkuam9pbignICcpO1xuICAgIC8vIFJldHVybiB0cmltbWVkIHN0cmluZyB0byBwcmV2ZW50IHdoaXRlc3BhY2UgYXQgdGhlIGVuZCBmcm9tIHRoZSBqb2luIG9wZXJhdGlvblxuICAgIHJldHVybiBmbGF0dGVuZWRTdHJpbmcudHJpbSgpO1xuICB9XG5cbiAgcHJvdGVjdGVkIHByZWZpeENzcyhjc3NDbGFzc09ySWQ6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHRoaXMuY29uZmlnLmNzc1ByZWZpeCArICctJyArIGNzc0NsYXNzT3JJZDtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBjb25maWd1cmF0aW9uIG9iamVjdCBvZiB0aGUgY29tcG9uZW50LlxuICAgKiBAcmV0dXJucyB7Q29uZmlnfVxuICAgKi9cbiAgcHVibGljIGdldENvbmZpZygpOiBDb25maWcge1xuICAgIHJldHVybiB0aGlzLmNvbmZpZztcbiAgfVxuXG4gIC8qKlxuICAgKiBIaWRlcyB0aGUgY29tcG9uZW50IGlmIHNob3duLlxuICAgKiBUaGlzIG1ldGhvZCBiYXNpY2FsbHkgdHJhbnNmZXJzIHRoZSBjb21wb25lbnQgaW50byB0aGUgaGlkZGVuIHN0YXRlLiBBY3R1YWwgaGlkaW5nIGlzIGRvbmUgdmlhIENTUy5cbiAgICovXG4gIGhpZGUoKSB7XG4gICAgaWYgKCF0aGlzLmhpZGRlbikge1xuICAgICAgdGhpcy5oaWRkZW4gPSB0cnVlO1xuICAgICAgdGhpcy5nZXREb21FbGVtZW50KCkuYWRkQ2xhc3ModGhpcy5wcmVmaXhDc3MoQ29tcG9uZW50LkNMQVNTX0hJRERFTikpO1xuICAgICAgdGhpcy5vbkhpZGVFdmVudCgpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTaG93cyB0aGUgY29tcG9uZW50IGlmIGhpZGRlbi5cbiAgICovXG4gIHNob3coKSB7XG4gICAgaWYgKHRoaXMuaGlkZGVuKSB7XG4gICAgICB0aGlzLmdldERvbUVsZW1lbnQoKS5yZW1vdmVDbGFzcyh0aGlzLnByZWZpeENzcyhDb21wb25lbnQuQ0xBU1NfSElEREVOKSk7XG4gICAgICB0aGlzLmhpZGRlbiA9IGZhbHNlO1xuICAgICAgdGhpcy5vblNob3dFdmVudCgpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBEZXRlcm1pbmVzIGlmIHRoZSBjb21wb25lbnQgaXMgaGlkZGVuLlxuICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gdHJ1ZSBpZiB0aGUgY29tcG9uZW50IGlzIGhpZGRlbiwgZWxzZSBmYWxzZVxuICAgKi9cbiAgaXNIaWRkZW4oKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuaGlkZGVuO1xuICB9XG5cbiAgLyoqXG4gICAqIERldGVybWluZXMgaWYgdGhlIGNvbXBvbmVudCBpcyBzaG93bi5cbiAgICogQHJldHVybnMge2Jvb2xlYW59IHRydWUgaWYgdGhlIGNvbXBvbmVudCBpcyB2aXNpYmxlLCBlbHNlIGZhbHNlXG4gICAqL1xuICBpc1Nob3duKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiAhdGhpcy5pc0hpZGRlbigpO1xuICB9XG5cbiAgLyoqXG4gICAqIFRvZ2dsZXMgdGhlIGhpZGRlbiBzdGF0ZSBieSBoaWRpbmcgdGhlIGNvbXBvbmVudCBpZiBpdCBpcyBzaG93biwgb3Igc2hvd2luZyBpdCBpZiBoaWRkZW4uXG4gICAqL1xuICB0b2dnbGVIaWRkZW4oKSB7XG4gICAgaWYgKHRoaXMuaXNIaWRkZW4oKSkge1xuICAgICAgdGhpcy5zaG93KCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuaGlkZSgpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBEaXNhYmxlcyB0aGUgY29tcG9uZW50LlxuICAgKiBUaGlzIG1ldGhvZCBiYXNpY2FsbHkgdHJhbnNmZXJzIHRoZSBjb21wb25lbnQgaW50byB0aGUgZGlzYWJsZWQgc3RhdGUuIEFjdHVhbCBkaXNhYmxpbmcgaXMgZG9uZSB2aWEgQ1NTIG9yIGNoaWxkXG4gICAqIGNvbXBvbmVudHMuIChlLmcuIEJ1dHRvbiBuZWVkcyB0byB1bnN1YnNjcmliZSBjbGljayBsaXN0ZW5lcnMpXG4gICAqL1xuICBkaXNhYmxlKCk6IHZvaWQge1xuICAgIGlmICghdGhpcy5kaXNhYmxlZCkge1xuICAgICAgdGhpcy5kaXNhYmxlZCA9IHRydWU7XG4gICAgICB0aGlzLmdldERvbUVsZW1lbnQoKS5hZGRDbGFzcyh0aGlzLnByZWZpeENzcyhDb21wb25lbnQuQ0xBU1NfRElTQUJMRUQpKTtcbiAgICAgIHRoaXMub25EaXNhYmxlZEV2ZW50KCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEVuYWJsZXMgdGhlIGNvbXBvbmVudC5cbiAgICogVGhpcyBtZXRob2QgYmFzaWNhbGx5IHRyYW5zZmVycyB0aGUgY29tcG9uZW50IGludG8gdGhlIGVuYWJsZWQgc3RhdGUuIEFjdHVhbCBlbmFibGluZyBpcyBkb25lIHZpYSBDU1Mgb3IgY2hpbGRcbiAgICogY29tcG9uZW50cy4gKGUuZy4gQnV0dG9uIG5lZWRzIHRvIHN1YnNjcmliZSBjbGljayBsaXN0ZW5lcnMpXG4gICAqL1xuICBlbmFibGUoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuZGlzYWJsZWQpIHtcbiAgICAgIHRoaXMuZ2V0RG9tRWxlbWVudCgpLnJlbW92ZUNsYXNzKHRoaXMucHJlZml4Q3NzKENvbXBvbmVudC5DTEFTU19ESVNBQkxFRCkpO1xuICAgICAgdGhpcy5kaXNhYmxlZCA9IGZhbHNlO1xuICAgICAgdGhpcy5vbkVuYWJsZWRFdmVudCgpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBEZXRlcm1pbmVzIGlmIHRoZSBjb21wb25lbnQgaXMgZGlzYWJsZWQuXG4gICAqIEByZXR1cm5zIHtib29sZWFufSB0cnVlIGlmIHRoZSBjb21wb25lbnQgaXMgZGlzYWJsZWQsIGVsc2UgZmFsc2VcbiAgICovXG4gIGlzRGlzYWJsZWQoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuZGlzYWJsZWQ7XG4gIH1cblxuICAvKipcbiAgICogRGV0ZXJtaW5lcyBpZiB0aGUgY29tcG9uZW50IGlzIGVuYWJsZWQuXG4gICAqIEByZXR1cm5zIHtib29sZWFufSB0cnVlIGlmIHRoZSBjb21wb25lbnQgaXMgZW5hYmxlZCwgZWxzZSBmYWxzZVxuICAgKi9cbiAgaXNFbmFibGVkKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiAhdGhpcy5pc0Rpc2FibGVkKCk7XG4gIH1cblxuICAvKipcbiAgICogRGV0ZXJtaW5lcyBpZiB0aGUgY29tcG9uZW50IGlzIGN1cnJlbnRseSBob3ZlcmVkLlxuICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gdHJ1ZSBpZiB0aGUgY29tcG9uZW50IGlzIGhvdmVyZWQsIGVsc2UgZmFsc2VcbiAgICovXG4gIGlzSG92ZXJlZCgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5ob3ZlcmVkO1xuICB9XG5cbiAgLyoqXG4gICAqIEZpcmVzIHRoZSBvblNob3cgZXZlbnQuXG4gICAqIFNlZSB0aGUgZGV0YWlsZWQgZXhwbGFuYXRpb24gb24gZXZlbnQgYXJjaGl0ZWN0dXJlIG9uIHRoZSB7QGxpbmsgI2NvbXBvbmVudEV2ZW50cyBldmVudHMgbGlzdH0uXG4gICAqL1xuICBwcm90ZWN0ZWQgb25TaG93RXZlbnQoKTogdm9pZCB7XG4gICAgdGhpcy5jb21wb25lbnRFdmVudHMub25TaG93LmRpc3BhdGNoKHRoaXMpO1xuICB9XG5cbiAgLyoqXG4gICAqIEZpcmVzIHRoZSBvbkhpZGUgZXZlbnQuXG4gICAqIFNlZSB0aGUgZGV0YWlsZWQgZXhwbGFuYXRpb24gb24gZXZlbnQgYXJjaGl0ZWN0dXJlIG9uIHRoZSB7QGxpbmsgI2NvbXBvbmVudEV2ZW50cyBldmVudHMgbGlzdH0uXG4gICAqL1xuICBwcm90ZWN0ZWQgb25IaWRlRXZlbnQoKTogdm9pZCB7XG4gICAgdGhpcy5jb21wb25lbnRFdmVudHMub25IaWRlLmRpc3BhdGNoKHRoaXMpO1xuICB9XG5cbiAgLyoqXG4gICAqIEZpcmVzIHRoZSBvbkVuYWJsZWQgZXZlbnQuXG4gICAqIFNlZSB0aGUgZGV0YWlsZWQgZXhwbGFuYXRpb24gb24gZXZlbnQgYXJjaGl0ZWN0dXJlIG9uIHRoZSB7QGxpbmsgI2NvbXBvbmVudEV2ZW50cyBldmVudHMgbGlzdH0uXG4gICAqL1xuICBwcm90ZWN0ZWQgb25FbmFibGVkRXZlbnQoKTogdm9pZCB7XG4gICAgdGhpcy5jb21wb25lbnRFdmVudHMub25FbmFibGVkLmRpc3BhdGNoKHRoaXMpO1xuICB9XG5cbiAgLyoqXG4gICAqIEZpcmVzIHRoZSBvbkRpc2FibGVkIGV2ZW50LlxuICAgKiBTZWUgdGhlIGRldGFpbGVkIGV4cGxhbmF0aW9uIG9uIGV2ZW50IGFyY2hpdGVjdHVyZSBvbiB0aGUge0BsaW5rICNjb21wb25lbnRFdmVudHMgZXZlbnRzIGxpc3R9LlxuICAgKi9cbiAgcHJvdGVjdGVkIG9uRGlzYWJsZWRFdmVudCgpOiB2b2lkIHtcbiAgICB0aGlzLmNvbXBvbmVudEV2ZW50cy5vbkRpc2FibGVkLmRpc3BhdGNoKHRoaXMpO1xuICB9XG5cbiAgLyoqXG4gICAqIEZpcmVzIHRoZSBvblZpZXdNb2RlQ2hhbmdlZCBldmVudC5cbiAgICogU2VlIHRoZSBkZXRhaWxlZCBleHBsYW5hdGlvbiBvbiBldmVudCBhcmNoaXRlY3R1cmUgb24gdGhlIHtAbGluayAjY29tcG9uZW50RXZlbnRzIGV2ZW50cyBsaXN0fS5cbiAgICovXG4gIHByb3RlY3RlZCBvblZpZXdNb2RlQ2hhbmdlZEV2ZW50KG1vZGU6IFZpZXdNb2RlKTogdm9pZCB7XG4gICAgaWYgKHRoaXMudmlld01vZGUgPT09IG1vZGUpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLnZpZXdNb2RlID0gbW9kZTtcbiAgICB0aGlzLmNvbXBvbmVudEV2ZW50cy5vblZpZXdNb2RlQ2hhbmdlZC5kaXNwYXRjaCh0aGlzLCB7IG1vZGUgfSk7XG4gIH1cblxuICAvKipcbiAgICogRmlyZXMgdGhlIG9uSG92ZXJDaGFuZ2VkIGV2ZW50LlxuICAgKiBTZWUgdGhlIGRldGFpbGVkIGV4cGxhbmF0aW9uIG9uIGV2ZW50IGFyY2hpdGVjdHVyZSBvbiB0aGUge0BsaW5rICNjb21wb25lbnRFdmVudHMgZXZlbnRzIGxpc3R9LlxuICAgKi9cbiAgcHJvdGVjdGVkIG9uSG92ZXJDaGFuZ2VkRXZlbnQoaG92ZXJlZDogYm9vbGVhbik6IHZvaWQge1xuICAgIHRoaXMuaG92ZXJlZCA9IGhvdmVyZWQ7XG4gICAgdGhpcy5jb21wb25lbnRFdmVudHMub25Ib3ZlckNoYW5nZWQuZGlzcGF0Y2godGhpcywgeyBob3ZlcmVkOiBob3ZlcmVkIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIGV2ZW50IHRoYXQgaXMgZmlyZWQgd2hlbiB0aGUgY29tcG9uZW50IGlzIHNob3dpbmcuXG4gICAqIFNlZSB0aGUgZGV0YWlsZWQgZXhwbGFuYXRpb24gb24gZXZlbnQgYXJjaGl0ZWN0dXJlIG9uIHRoZSB7QGxpbmsgI2NvbXBvbmVudEV2ZW50cyBldmVudHMgbGlzdH0uXG4gICAqIEByZXR1cm5zIHtFdmVudDxDb21wb25lbnQ8Q29uZmlnPiwgTm9BcmdzPn1cbiAgICovXG4gIGdldCBvblNob3coKTogRXZlbnQ8Q29tcG9uZW50PENvbmZpZz4sIE5vQXJncz4ge1xuICAgIHJldHVybiB0aGlzLmNvbXBvbmVudEV2ZW50cy5vblNob3cuZ2V0RXZlbnQoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBldmVudCB0aGF0IGlzIGZpcmVkIHdoZW4gdGhlIGNvbXBvbmVudCBpcyBoaWRpbmcuXG4gICAqIFNlZSB0aGUgZGV0YWlsZWQgZXhwbGFuYXRpb24gb24gZXZlbnQgYXJjaGl0ZWN0dXJlIG9uIHRoZSB7QGxpbmsgI2NvbXBvbmVudEV2ZW50cyBldmVudHMgbGlzdH0uXG4gICAqIEByZXR1cm5zIHtFdmVudDxDb21wb25lbnQ8Q29uZmlnPiwgTm9BcmdzPn1cbiAgICovXG4gIGdldCBvbkhpZGUoKTogRXZlbnQ8Q29tcG9uZW50PENvbmZpZz4sIE5vQXJncz4ge1xuICAgIHJldHVybiB0aGlzLmNvbXBvbmVudEV2ZW50cy5vbkhpZGUuZ2V0RXZlbnQoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBldmVudCB0aGF0IGlzIGZpcmVkIHdoZW4gdGhlIGNvbXBvbmVudCBpcyBlbmFibGluZy5cbiAgICogU2VlIHRoZSBkZXRhaWxlZCBleHBsYW5hdGlvbiBvbiBldmVudCBhcmNoaXRlY3R1cmUgb24gdGhlIHtAbGluayAjY29tcG9uZW50RXZlbnRzIGV2ZW50cyBsaXN0fS5cbiAgICogQHJldHVybnMge0V2ZW50PENvbXBvbmVudDxDb25maWc+LCBOb0FyZ3M+fVxuICAgKi9cbiAgZ2V0IG9uRW5hYmxlZCgpOiBFdmVudDxDb21wb25lbnQ8Q29uZmlnPiwgTm9BcmdzPiB7XG4gICAgcmV0dXJuIHRoaXMuY29tcG9uZW50RXZlbnRzLm9uRW5hYmxlZC5nZXRFdmVudCgpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIGV2ZW50IHRoYXQgaXMgZmlyZWQgd2hlbiB0aGUgY29tcG9uZW50IGlzIGRpc2FibGluZy5cbiAgICogU2VlIHRoZSBkZXRhaWxlZCBleHBsYW5hdGlvbiBvbiBldmVudCBhcmNoaXRlY3R1cmUgb24gdGhlIHtAbGluayAjY29tcG9uZW50RXZlbnRzIGV2ZW50cyBsaXN0fS5cbiAgICogQHJldHVybnMge0V2ZW50PENvbXBvbmVudDxDb25maWc+LCBOb0FyZ3M+fVxuICAgKi9cbiAgZ2V0IG9uRGlzYWJsZWQoKTogRXZlbnQ8Q29tcG9uZW50PENvbmZpZz4sIE5vQXJncz4ge1xuICAgIHJldHVybiB0aGlzLmNvbXBvbmVudEV2ZW50cy5vbkRpc2FibGVkLmdldEV2ZW50KCk7XG4gIH1cblxuICAvKipcbiAgICogR2V0cyB0aGUgZXZlbnQgdGhhdCBpcyBmaXJlZCB3aGVuIHRoZSBjb21wb25lbnQncyBob3Zlci1zdGF0ZSBpcyBjaGFuZ2luZy5cbiAgICogQHJldHVybnMge0V2ZW50PENvbXBvbmVudDxDb25maWc+LCBDb21wb25lbnRIb3ZlckNoYW5nZWRFdmVudEFyZ3M+fVxuICAgKi9cbiAgZ2V0IG9uSG92ZXJDaGFuZ2VkKCk6IEV2ZW50PENvbXBvbmVudDxDb25maWc+LCBDb21wb25lbnRIb3ZlckNoYW5nZWRFdmVudEFyZ3M+IHtcbiAgICByZXR1cm4gdGhpcy5jb21wb25lbnRFdmVudHMub25Ib3ZlckNoYW5nZWQuZ2V0RXZlbnQoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBldmVudCB0aGF0IGlzIGZpcmVkIHdoZW4gdGhlIGBWaWV3TW9kZWAgb2YgdGhpcyBjb21wb25lbnQgaGFzIGNoYW5nZWQuXG4gICAqIEByZXR1cm5zIHtFdmVudDxDb21wb25lbnQ8Q29uZmlnPiwgVmlld01vZGVDaGFuZ2VkRXZlbnRBcmdzPn1cbiAgICovXG4gIGdldCBvblZpZXdNb2RlQ2hhbmdlZCgpOiBFdmVudDxDb21wb25lbnQ8Q29uZmlnPiwgVmlld01vZGVDaGFuZ2VkRXZlbnRBcmdzPiB7XG4gICAgcmV0dXJuIHRoaXMuY29tcG9uZW50RXZlbnRzLm9uVmlld01vZGVDaGFuZ2VkLmdldEV2ZW50KCk7XG4gIH1cbn0iLCJpbXBvcnQgeyBDb21wb25lbnRDb25maWcsIENvbXBvbmVudCwgVmlld01vZGVDaGFuZ2VkRXZlbnRBcmdzLCBWaWV3TW9kZSB9IGZyb20gJy4vY29tcG9uZW50JztcbmltcG9ydCB7RE9NfSBmcm9tICcuLi9kb20nO1xuaW1wb3J0IHtBcnJheVV0aWxzfSBmcm9tICcuLi9hcnJheXV0aWxzJztcbmltcG9ydCB7IGkxOG4gfSBmcm9tICcuLi9sb2NhbGl6YXRpb24vaTE4bic7XG5cbi8qKlxuICogQ29uZmlndXJhdGlvbiBpbnRlcmZhY2UgZm9yIGEge0BsaW5rIENvbnRhaW5lcn0uXG4gKlxuICogQGNhdGVnb3J5IENvbmZpZ3NcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBDb250YWluZXJDb25maWcgZXh0ZW5kcyBDb21wb25lbnRDb25maWcge1xuICAvKipcbiAgICogQ2hpbGQgY29tcG9uZW50cyBvZiB0aGUgY29udGFpbmVyLlxuICAgKi9cbiAgY29tcG9uZW50cz86IENvbXBvbmVudDxDb21wb25lbnRDb25maWc+W107XG59XG5cbi8qKlxuICogQSBjb250YWluZXIgY29tcG9uZW50IHRoYXQgY2FuIGNvbnRhaW4gYSBjb2xsZWN0aW9uIG9mIGNoaWxkIGNvbXBvbmVudHMuXG4gKiBDb21wb25lbnRzIGNhbiBiZSBhZGRlZCBhdCBjb25zdHJ1Y3Rpb24gdGltZSB0aHJvdWdoIHRoZSB7QGxpbmsgQ29udGFpbmVyQ29uZmlnI2NvbXBvbmVudHN9IHNldHRpbmcsIG9yIGxhdGVyXG4gKiB0aHJvdWdoIHRoZSB7QGxpbmsgQ29udGFpbmVyI2FkZENvbXBvbmVudH0gbWV0aG9kLiBUaGUgVUlNYW5hZ2VyIGF1dG9tYXRpY2FsbHkgdGFrZXMgY2FyZSBvZiBhbGwgY29tcG9uZW50cywgaS5lLiBpdFxuICogaW5pdGlhbGl6ZXMgYW5kIGNvbmZpZ3VyZXMgdGhlbSBhdXRvbWF0aWNhbGx5LlxuICpcbiAqIEluIHRoZSBET00sIHRoZSBjb250YWluZXIgY29uc2lzdHMgb2YgYW4gb3V0ZXIgPGRpdj4gKHRoYXQgY2FuIGJlIGNvbmZpZ3VyZWQgYnkgdGhlIGNvbmZpZykgYW5kIGFuIGlubmVyIHdyYXBwZXJcbiAqIDxkaXY+IHRoYXQgY29udGFpbnMgdGhlIGNvbXBvbmVudHMuIFRoaXMgZG91YmxlLTxkaXY+LXN0cnVjdHVyZSBpcyBvZnRlbiByZXF1aXJlZCB0byBhY2hpZXZlIG1hbnkgYWR2YW5jZWQgZWZmZWN0c1xuICogaW4gQ1NTIGFuZC9vciBKUywgZS5nLiBhbmltYXRpb25zIGFuZCBjZXJ0YWluIGZvcm1hdHRpbmcgd2l0aCBhYnNvbHV0ZSBwb3NpdGlvbmluZy5cbiAqXG4gKiBET00gZXhhbXBsZTpcbiAqIDxjb2RlPlxuICogICAgIDxkaXYgY2xhc3M9J3VpLWNvbnRhaW5lcic+XG4gKiAgICAgICAgIDxkaXYgY2xhc3M9J2NvbnRhaW5lci13cmFwcGVyJz5cbiAqICAgICAgICAgICAgIC4uLiBjaGlsZCBjb21wb25lbnRzIC4uLlxuICogICAgICAgICA8L2Rpdj5cbiAqICAgICA8L2Rpdj5cbiAqIDwvY29kZT5cbiAqXG4gKiBAY2F0ZWdvcnkgQ29tcG9uZW50c1xuICovXG5leHBvcnQgY2xhc3MgQ29udGFpbmVyPENvbmZpZyBleHRlbmRzIENvbnRhaW5lckNvbmZpZz4gZXh0ZW5kcyBDb21wb25lbnQ8Q29uZmlnPiB7XG5cbiAgLyoqXG4gICAqIEEgcmVmZXJlbmNlIHRvIHRoZSBpbm5lciBlbGVtZW50IHRoYXQgY29udGFpbnMgdGhlIGNvbXBvbmVudHMgb2YgdGhlIGNvbnRhaW5lci5cbiAgICovXG4gIHByaXZhdGUgaW5uZXJDb250YWluZXJFbGVtZW50OiBET007XG4gIHByaXZhdGUgY29tcG9uZW50c1RvQWRkOiBDb21wb25lbnQ8Q29tcG9uZW50Q29uZmlnPltdO1xuICBwcml2YXRlIGNvbXBvbmVudHNUb1JlbW92ZTogQ29tcG9uZW50PENvbXBvbmVudENvbmZpZz5bXTtcbiAgcHJpdmF0ZSBjb21wb25lbnRzSW5QZXJzaXN0ZW50Vmlld01vZGU6IG51bWJlcjtcblxuICBjb25zdHJ1Y3Rvcihjb25maWc6IENvbmZpZykge1xuICAgIHN1cGVyKGNvbmZpZyk7XG5cbiAgICB0aGlzLmNvbmZpZyA9IHRoaXMubWVyZ2VDb25maWcoY29uZmlnLCB7XG4gICAgICBjc3NDbGFzczogJ3VpLWNvbnRhaW5lcicsXG4gICAgICBjb21wb25lbnRzOiBbXSxcbiAgICB9IGFzIENvbmZpZywgdGhpcy5jb25maWcpO1xuXG4gICAgdGhpcy5jb21wb25lbnRzVG9BZGQgPSBbXTtcbiAgICB0aGlzLmNvbXBvbmVudHNUb1JlbW92ZSA9IFtdO1xuICAgIHRoaXMuY29tcG9uZW50c0luUGVyc2lzdGVudFZpZXdNb2RlID0gMDtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGRzIGEgY2hpbGQgY29tcG9uZW50IHRvIHRoZSBjb250YWluZXIuXG4gICAqIEBwYXJhbSBjb21wb25lbnQgdGhlIGNvbXBvbmVudCB0byBhZGRcbiAgICovXG4gIGFkZENvbXBvbmVudChjb21wb25lbnQ6IENvbXBvbmVudDxDb21wb25lbnRDb25maWc+KSB7XG4gICAgdGhpcy5jb25maWcuY29tcG9uZW50cy5wdXNoKGNvbXBvbmVudCk7XG4gICAgdGhpcy5jb21wb25lbnRzVG9BZGQucHVzaChjb21wb25lbnQpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlbW92ZXMgYSBjaGlsZCBjb21wb25lbnQgZnJvbSB0aGUgY29udGFpbmVyLlxuICAgKiBAcGFyYW0gY29tcG9uZW50IHRoZSBjb21wb25lbnQgdG8gcmVtb3ZlXG4gICAqIEByZXR1cm5zIHtib29sZWFufSB0cnVlIGlmIHRoZSBjb21wb25lbnQgaGFzIGJlZW4gcmVtb3ZlZCwgZmFsc2UgaWYgaXQgaXMgbm90IGNvbnRhaW5lZCBpbiB0aGlzIGNvbnRhaW5lclxuICAgKi9cbiAgcmVtb3ZlQ29tcG9uZW50KGNvbXBvbmVudDogQ29tcG9uZW50PENvbXBvbmVudENvbmZpZz4pOiBib29sZWFuIHtcbiAgICBpZiAoQXJyYXlVdGlscy5yZW1vdmUodGhpcy5jb25maWcuY29tcG9uZW50cywgY29tcG9uZW50KSAhPSBudWxsKSB7XG4gICAgICB0aGlzLmNvbXBvbmVudHNUb1JlbW92ZS5wdXNoKGNvbXBvbmVudCk7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIGFuIGFycmF5IG9mIGFsbCBjaGlsZCBjb21wb25lbnRzIGluIHRoaXMgY29udGFpbmVyLlxuICAgKiBAcmV0dXJucyB7Q29tcG9uZW50PENvbXBvbmVudENvbmZpZz5bXX1cbiAgICovXG4gIGdldENvbXBvbmVudHMoKTogQ29tcG9uZW50PENvbXBvbmVudENvbmZpZz5bXSB7XG4gICAgcmV0dXJuIHRoaXMuY29uZmlnLmNvbXBvbmVudHM7XG4gIH1cblxuICAvKipcbiAgICogUmVtb3ZlcyBhbGwgY2hpbGQgY29tcG9uZW50cyBmcm9tIHRoZSBjb250YWluZXIuXG4gICAqL1xuICByZW1vdmVDb21wb25lbnRzKCk6IHZvaWQge1xuICAgIGZvciAobGV0IGNvbXBvbmVudCBvZiB0aGlzLmdldENvbXBvbmVudHMoKS5zbGljZSgpKSB7XG4gICAgICB0aGlzLnJlbW92ZUNvbXBvbmVudChjb21wb25lbnQpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBVcGRhdGVzIHRoZSBET00gb2YgdGhlIGNvbnRhaW5lciB3aXRoIHRoZSBjdXJyZW50IGNvbXBvbmVudHMuXG4gICAqL1xuICBwcm90ZWN0ZWQgdXBkYXRlQ29tcG9uZW50cygpOiB2b2lkIHtcbiAgICAvKiBXZSBjYW5ub3QganVzdCBjbGVhciB0aGUgY29udGFpbmVyIHRvIHJlbW92ZSBhbGwgZWxlbWVudHMgYW5kIHRoZW4gcmUtYWRkIHRob3NlIHRoYXQgc2hvdWxkIHN0YXksIGJlY2F1c2VcbiAgICAgKiBJRSBsb29zZXMgdGhlIGlubmVySFRNTCBvZiB1bmF0dGFjaGVkIGVsZW1lbnRzLCBsZWFkaW5nIHRvIGVtcHR5IGVsZW1lbnRzIHdpdGhpbiB0aGUgY29udGFpbmVyIChlLmcuIG1pc3NpbmdcbiAgICAgKiBzdWJ0aXRsZSB0ZXh0IGluIFN1YnRpdGxlTGFiZWwpLlxuICAgICAqIEluc3RlYWQsIHdlIGtlZXAgYSBsaXN0IG9mIGVsZW1lbnRzIHRvIGFkZCBhbmQgcmVtb3ZlLCBsZWF2aW5nIHJlbWFpbmluZyBlbGVtZW50cyBhbG9uZS4gQnkga2VlcGluZyB0aGVtIGluXG4gICAgICogdGhlIERPTSwgdGhlaXIgY29udGVudCBnZXRzIHByZXNlcnZlZCBpbiBhbGwgYnJvd3NlcnMuXG4gICAgICovXG4gICAgbGV0IGNvbXBvbmVudDtcblxuICAgIHdoaWxlIChjb21wb25lbnQgPSB0aGlzLmNvbXBvbmVudHNUb1JlbW92ZS5zaGlmdCgpKSB7XG4gICAgICBjb21wb25lbnQuZ2V0RG9tRWxlbWVudCgpLnJlbW92ZSgpO1xuICAgIH1cblxuICAgIHdoaWxlIChjb21wb25lbnQgPSB0aGlzLmNvbXBvbmVudHNUb0FkZC5zaGlmdCgpKSB7XG4gICAgICB0aGlzLmlubmVyQ29udGFpbmVyRWxlbWVudC5hcHBlbmQoY29tcG9uZW50LmdldERvbUVsZW1lbnQoKSk7XG4gICAgfVxuICB9XG5cbiAgcHJvdGVjdGVkIHRvRG9tRWxlbWVudCgpOiBET00ge1xuICAgIC8vIENyZWF0ZSB0aGUgY29udGFpbmVyIGVsZW1lbnQgKHRoZSBvdXRlciA8ZGl2PilcbiAgICBsZXQgY29udGFpbmVyRWxlbWVudCA9IG5ldyBET00odGhpcy5jb25maWcudGFnLCB7XG4gICAgICAnaWQnOiB0aGlzLmNvbmZpZy5pZCxcbiAgICAgICdjbGFzcyc6IHRoaXMuZ2V0Q3NzQ2xhc3NlcygpLFxuICAgICAgJ3JvbGUnOiB0aGlzLmNvbmZpZy5yb2xlLFxuICAgICAgJ2FyaWEtbGFiZWwnOiBpMThuLnBlcmZvcm1Mb2NhbGl6YXRpb24odGhpcy5jb25maWcuYXJpYUxhYmVsKSxcbiAgICB9LCB0aGlzKTtcblxuICAgIC8vIENyZWF0ZSB0aGUgaW5uZXIgY29udGFpbmVyIGVsZW1lbnQgKHRoZSBpbm5lciA8ZGl2PikgdGhhdCB3aWxsIGNvbnRhaW4gdGhlIGNvbXBvbmVudHNcbiAgICBsZXQgaW5uZXJDb250YWluZXIgPSBuZXcgRE9NKHRoaXMuY29uZmlnLnRhZywge1xuICAgICAgJ2NsYXNzJzogdGhpcy5wcmVmaXhDc3MoJ2NvbnRhaW5lci13cmFwcGVyJyksXG4gICAgfSk7XG4gICAgdGhpcy5pbm5lckNvbnRhaW5lckVsZW1lbnQgPSBpbm5lckNvbnRhaW5lcjtcblxuICAgIGZvciAobGV0IGluaXRpYWxDb21wb25lbnQgb2YgdGhpcy5jb25maWcuY29tcG9uZW50cykge1xuICAgICAgdGhpcy5jb21wb25lbnRzVG9BZGQucHVzaChpbml0aWFsQ29tcG9uZW50KTtcbiAgICB9XG4gICAgdGhpcy51cGRhdGVDb21wb25lbnRzKCk7XG5cbiAgICBjb250YWluZXJFbGVtZW50LmFwcGVuZChpbm5lckNvbnRhaW5lcik7XG5cbiAgICByZXR1cm4gY29udGFpbmVyRWxlbWVudDtcbiAgfVxuXG4gIHByb3RlY3RlZCBzdXNwZW5kSGlkZVRpbWVvdXQoKTogdm9pZCB7XG4gICAgLy8gdG8gYmUgaW1wbGVtZW50ZWQgaW4gc3ViY2xhc3NcbiAgfVxuXG4gIHByb3RlY3RlZCByZXN1bWVIaWRlVGltZW91dCgpOiB2b2lkIHtcbiAgICAvLyB0byBiZSBpbXBsZW1lbnRlZCBpbiBzdWJjbGFzc1xuICB9XG5cbiAgcHJvdGVjdGVkIHRyYWNrQ29tcG9uZW50Vmlld01vZGUobW9kZTogVmlld01vZGUpIHtcbiAgICBpZiAobW9kZSA9PT0gVmlld01vZGUuUGVyc2lzdGVudCkge1xuICAgICAgdGhpcy5jb21wb25lbnRzSW5QZXJzaXN0ZW50Vmlld01vZGUrKztcbiAgICB9IGVsc2UgaWYgKG1vZGUgPT09IFZpZXdNb2RlLlRlbXBvcmFyeSkge1xuICAgICAgdGhpcy5jb21wb25lbnRzSW5QZXJzaXN0ZW50Vmlld01vZGUgPSBNYXRoLm1heCh0aGlzLmNvbXBvbmVudHNJblBlcnNpc3RlbnRWaWV3TW9kZSAtIDEsIDApO1xuICAgIH1cblxuICAgIGlmICh0aGlzLmNvbXBvbmVudHNJblBlcnNpc3RlbnRWaWV3TW9kZSA+IDApIHtcbiAgICAgIC8vIFRoZXJlIGlzIGF0IGxlYXN0IG9uZSBjb21wb25lbnQgdGhhdCBtdXN0IG5vdCBiZSBoaWRkZW4sXG4gICAgICAvLyB0aGVyZWZvcmUgdGhlIGhpZGUgdGltZW91dCBtdXN0IGJlIHN1c3BlbmRlZFxuICAgICAgdGhpcy5zdXNwZW5kSGlkZVRpbWVvdXQoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5yZXN1bWVIaWRlVGltZW91dCgpO1xuICAgIH1cbiAgfVxufSIsImltcG9ydCB7Q29udGFpbmVyQ29uZmlnLCBDb250YWluZXJ9IGZyb20gJy4vY29udGFpbmVyJztcbmltcG9ydCB7VUlJbnN0YW5jZU1hbmFnZXJ9IGZyb20gJy4uL3VpbWFuYWdlcic7XG5pbXBvcnQge1VJVXRpbHN9IGZyb20gJy4uL3VpdXRpbHMnO1xuaW1wb3J0IHtTcGFjZXJ9IGZyb20gJy4vc3BhY2VyJztcbmltcG9ydCB7IFBsYXllckFQSSB9IGZyb20gJ2JpdG1vdmluLXBsYXllcic7XG5pbXBvcnQgeyBpMThuIH0gZnJvbSAnLi4vbG9jYWxpemF0aW9uL2kxOG4nO1xuaW1wb3J0IHsgQnJvd3NlclV0aWxzIH0gZnJvbSAnLi4vYnJvd3NlcnV0aWxzJztcbmltcG9ydCB7Q29tcG9uZW50LCBDb21wb25lbnRDb25maWd9IGZyb20gJy4vY29tcG9uZW50JztcbmltcG9ydCB7U2V0dGluZ3NQYW5lbH0gZnJvbSAnLi9zZXR0aW5nc3BhbmVsJztcblxuLyoqXG4gKiBDb25maWd1cmF0aW9uIGludGVyZmFjZSBmb3IgdGhlIHtAbGluayBDb250cm9sQmFyfS5cbiAqXG4gKiBAY2F0ZWdvcnkgQ29uZmlnc1xuICovXG5leHBvcnQgaW50ZXJmYWNlIENvbnRyb2xCYXJDb25maWcgZXh0ZW5kcyBDb250YWluZXJDb25maWcge1xuICAvLyBub3RoaW5nIHlldFxufVxuXG4vKipcbiAqIEEgY29udGFpbmVyIGZvciBtYWluIHBsYXllciBjb250cm9sIGNvbXBvbmVudHMsIGUuZy4gcGxheSB0b2dnbGUgYnV0dG9uLCBzZWVrIGJhciwgdm9sdW1lIGNvbnRyb2wsIGZ1bGxzY3JlZW4gdG9nZ2xlXG4gKiBidXR0b24uXG4gKlxuICogQGNhdGVnb3J5IENvbXBvbmVudHNcbiAqL1xuZXhwb3J0IGNsYXNzIENvbnRyb2xCYXIgZXh0ZW5kcyBDb250YWluZXI8Q29udHJvbEJhckNvbmZpZz4ge1xuXG4gIGNvbnN0cnVjdG9yKGNvbmZpZzogQ29udHJvbEJhckNvbmZpZykge1xuICAgIHN1cGVyKGNvbmZpZyk7XG5cbiAgICB0aGlzLmNvbmZpZyA9IHRoaXMubWVyZ2VDb25maWcoY29uZmlnLCB7XG4gICAgICBjc3NDbGFzczogJ3VpLWNvbnRyb2xiYXInLFxuICAgICAgaGlkZGVuOiB0cnVlLFxuICAgICAgcm9sZTogJ3JlZ2lvbicsXG4gICAgICBhcmlhTGFiZWw6IGkxOG4uZ2V0TG9jYWxpemVyKCdjb250cm9sQmFyJyksXG4gICAgfSwgPENvbnRyb2xCYXJDb25maWc+dGhpcy5jb25maWcpO1xuICB9XG5cbiAgY29uZmlndXJlKHBsYXllcjogUGxheWVyQVBJLCB1aW1hbmFnZXI6IFVJSW5zdGFuY2VNYW5hZ2VyKTogdm9pZCB7XG4gICAgc3VwZXIuY29uZmlndXJlKHBsYXllciwgdWltYW5hZ2VyKTtcblxuICAgIC8vIENvdW50cyBob3cgbWFueSBjb21wb25lbnRzIGFyZSBob3ZlcmVkIGFuZCBibG9jayBoaWRpbmcgb2YgdGhlIGNvbnRyb2wgYmFyXG4gICAgbGV0IGhvdmVyU3RhY2tDb3VudCA9IDA7XG4gICAgbGV0IGlzU2V0dGluZ3NQYW5lbFNob3duID0gZmFsc2U7XG5cbiAgICAvLyBPbmx5IGVuYWJsaW5nIHRoaXMgZm9yIHBsYXRmb3JtcyB3aXRob3V0IHRvdWNoIGlucHV0LlxuICAgIC8vIEVuYWJsaW5nIHRoaXMgZm9yIHRvdWNoIGRldmljZXMgY2F1c2VzIHRoZSBVSSB0byBub3QgZGlzYXBwZWFyIGFmdGVyIGhpZGVEZWxheSBzZWNvbmRzLFxuICAgIC8vIGJlY2F1c2UgYG1vdXNlbGVhdmVgIGV2ZW50IGlzIG5vdCBlbWl0dGVkLlxuICAgIC8vIEluc3RlYWQsIGl0IHdpbGwgc3RheSB2aXNpYmxlIHVudGlsIGFub3RoZXIgbWFudWFsIGludGVyYWN0aW9uIGlzIHBlcmZvcm1lZC5cbiAgICBpZiAodWltYW5hZ2VyLmdldENvbmZpZygpLmRpc2FibGVBdXRvSGlkZVdoZW5Ib3ZlcmVkICYmICFCcm93c2VyVXRpbHMuaXNUb3VjaFN1cHBvcnRlZCkge1xuICAgICAgLy8gVHJhY2sgaG92ZXIgc3RhdHVzIG9mIGNoaWxkIGNvbXBvbmVudHNcbiAgICAgIFVJVXRpbHMudHJhdmVyc2VUcmVlKHRoaXMsIChjb21wb25lbnQpID0+IHtcbiAgICAgICAgLy8gRG8gbm90IHRyYWNrIGhvdmVyIHN0YXR1cyBvZiBjaGlsZCBjb250YWluZXJzIG9yIHNwYWNlcnMsIG9ubHkgb2YgJ3JlYWwnIGNvbnRyb2xzXG4gICAgICAgIGlmIChjb21wb25lbnQgaW5zdGFuY2VvZiBDb250YWluZXIgfHwgY29tcG9uZW50IGluc3RhbmNlb2YgU3BhY2VyKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gU3Vic2NyaWJlIGhvdmVyIGV2ZW50IGFuZCBrZWVwIGEgY291bnQgb2YgdGhlIG51bWJlciBvZiBob3ZlcmVkIGNoaWxkcmVuXG4gICAgICAgIGNvbXBvbmVudC5vbkhvdmVyQ2hhbmdlZC5zdWJzY3JpYmUoKF8sIGFyZ3MpID0+IHtcbiAgICAgICAgICBpZiAoYXJncy5ob3ZlcmVkKSB7XG4gICAgICAgICAgICBob3ZlclN0YWNrQ291bnQrKztcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaG92ZXJTdGFja0NvdW50LS07XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGlmIChCcm93c2VyVXRpbHMuaXNNb2JpbGUpIHtcbiAgICAgIHVpbWFuYWdlci5vbkNvbXBvbmVudFNob3cuc3Vic2NyaWJlKChjb21wb25lbnQ6IENvbXBvbmVudDxDb21wb25lbnRDb25maWc+KSA9PiB7XG4gICAgICAgIGlmIChjb21wb25lbnQgaW5zdGFuY2VvZiBTZXR0aW5nc1BhbmVsKSB7XG4gICAgICAgICAgaXNTZXR0aW5nc1BhbmVsU2hvd24gPSB0cnVlO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgdWltYW5hZ2VyLm9uQ29tcG9uZW50SGlkZS5zdWJzY3JpYmUoKGNvbXBvbmVudDogQ29tcG9uZW50PENvbXBvbmVudENvbmZpZz4pID0+IHtcbiAgICAgICAgaWYgKGNvbXBvbmVudCBpbnN0YW5jZW9mIFNldHRpbmdzUGFuZWwpIHtcbiAgICAgICAgICBpc1NldHRpbmdzUGFuZWxTaG93biA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICB1aW1hbmFnZXIub25Db250cm9sc1Nob3cuc3Vic2NyaWJlKCgpID0+IHtcbiAgICAgIHRoaXMuc2hvdygpO1xuICAgIH0pO1xuXG4gICAgdWltYW5hZ2VyLm9uUHJldmlld0NvbnRyb2xzSGlkZS5zdWJzY3JpYmUoKHNlbmRlciwgYXJncykgPT4ge1xuICAgICAgLy8gQ2FuY2VsIHRoZSBoaWRlIGV2ZW50IGlmIGhvdmVyZWQgY2hpbGQgY29tcG9uZW50cyBibG9jayBoaWRpbmcgb3IgaWYgdGhlIHNldHRpbmdzIHBhbmVsIGlzIGFjdGl2ZSBvbiBtb2JpbGUuXG4gICAgICBhcmdzLmNhbmNlbCA9IGFyZ3MuY2FuY2VsIHx8IChob3ZlclN0YWNrQ291bnQgPiAwIHx8IGlzU2V0dGluZ3NQYW5lbFNob3duKTtcbiAgICB9KTtcblxuICAgIHVpbWFuYWdlci5vbkNvbnRyb2xzSGlkZS5zdWJzY3JpYmUoKCkgPT4ge1xuICAgICAgdGhpcy5oaWRlKCk7XG4gICAgfSk7XG4gIH1cbn1cbiIsImltcG9ydCB7IFBsYXllckFQSSwgU2VnbWVudFBsYXliYWNrRXZlbnQsIFZpZGVvUXVhbGl0eSB9IGZyb20gJ2JpdG1vdmluLXBsYXllcic7XHJcbmltcG9ydCB7IGkxOG4gfSBmcm9tICcuLi9sb2NhbGl6YXRpb24vaTE4bic7XHJcbmltcG9ydCB7IENvbnRhaW5lciwgQ29udGFpbmVyQ29uZmlnIH0gZnJvbSAnLi9jb250YWluZXInO1xyXG5pbXBvcnQgeyBFY29Nb2RlVG9nZ2xlQnV0dG9uIH0gZnJvbSAnLi9lY29tb2RldG9nZ2xlYnV0dG9uJztcclxuaW1wb3J0IHsgTGFiZWwsIExhYmVsQ29uZmlnIH0gZnJvbSAnLi9sYWJlbCc7XHJcbmltcG9ydCB7IFNldHRpbmdzUGFuZWxJdGVtIH0gZnJvbSAnLi9zZXR0aW5nc3BhbmVsaXRlbSc7XHJcblxyXG4vKipcclxuICogQGNhdGVnb3J5IENvbnRhaW5lcnNcclxuICovXHJcbmV4cG9ydCBjbGFzcyBFY29Nb2RlQ29udGFpbmVyIGV4dGVuZHMgQ29udGFpbmVyPENvbnRhaW5lckNvbmZpZz4ge1xyXG4gIHByaXZhdGUgZWNvTW9kZVNhdmVkRW1pc3Npb25zSXRlbTogU2V0dGluZ3NQYW5lbEl0ZW07XHJcbiAgcHJpdmF0ZSBlY29Nb2RlVG9nZ2xlQnV0dG9uSXRlbTogU2V0dGluZ3NQYW5lbEl0ZW07XHJcbiAgcHJpdmF0ZSBlbWlzc2lvbnNTYXZlZExhYmVsOiBMYWJlbDxMYWJlbENvbmZpZz47XHJcbiAgcHJpdmF0ZSBzYXZlZEVtaXNzb25zID0gMDtcclxuICBwcml2YXRlIGN1cnJlbnRFbmVyZ3lFbWlzc2lvbjogbnVtYmVyO1xyXG5cclxuICBjb25zdHJ1Y3Rvcihjb25maWc6IENvbnRhaW5lckNvbmZpZyA9IHt9KSB7XHJcbiAgICBzdXBlcihjb25maWcpO1xyXG5cclxuICAgIGNvbnN0IGVjb01vZGVUb2dnbGVCdXR0b24gPSBuZXcgRWNvTW9kZVRvZ2dsZUJ1dHRvbigpO1xyXG4gICAgY29uc3QgbGFiZWxFY29Nb2RlID0gbmV3IExhYmVsKHtcclxuICAgICAgdGV4dDogaTE4bi5nZXRMb2NhbGl6ZXIoJ2Vjb01vZGUudGl0bGUnKSxcclxuICAgICAgZm9yOiBlY29Nb2RlVG9nZ2xlQnV0dG9uLmdldENvbmZpZygpLmlkLFxyXG4gICAgICBpZDogJ2Vjb21vZGVsYWJlbCcsXHJcbiAgICB9KTtcclxuICAgIHRoaXMuZW1pc3Npb25zU2F2ZWRMYWJlbCA9IG5ldyBMYWJlbCh7XHJcbiAgICAgIHRleHQ6IGAke3RoaXMuc2F2ZWRFbWlzc29ucy50b0ZpeGVkKDQpfSBnQ08yYCxcclxuICAgICAgY3NzQ2xhc3M6ICd1aS1sYWJlbC1zYXZlZEVuZXJneScsXHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLmVjb01vZGVUb2dnbGVCdXR0b25JdGVtID0gbmV3IFNldHRpbmdzUGFuZWxJdGVtKGxhYmVsRWNvTW9kZSwgZWNvTW9kZVRvZ2dsZUJ1dHRvbik7XHJcbiAgICB0aGlzLmVjb01vZGVTYXZlZEVtaXNzaW9uc0l0ZW0gPSBuZXcgU2V0dGluZ3NQYW5lbEl0ZW0oJ1NhdmVkIEVtaXNzaW9ucycsIHRoaXMuZW1pc3Npb25zU2F2ZWRMYWJlbCwge1xyXG4gICAgICBoaWRkZW46IHRydWUsXHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLmFkZENvbXBvbmVudCh0aGlzLmVjb01vZGVUb2dnbGVCdXR0b25JdGVtKTtcclxuICAgIHRoaXMuYWRkQ29tcG9uZW50KHRoaXMuZWNvTW9kZVNhdmVkRW1pc3Npb25zSXRlbSk7XHJcblxyXG4gICAgZWNvTW9kZVRvZ2dsZUJ1dHRvbi5vblRvZ2dsZU9uLnN1YnNjcmliZSgoKSA9PiB7XHJcbiAgICAgIHRoaXMuZWNvTW9kZVNhdmVkRW1pc3Npb25zSXRlbS5zaG93KCk7XHJcbiAgICAgIHRoaXMub25Ub2dnbGVDYWxsYmFjaygpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgZWNvTW9kZVRvZ2dsZUJ1dHRvbi5vblRvZ2dsZU9mZi5zdWJzY3JpYmUoKCkgPT4ge1xyXG4gICAgICB0aGlzLmVjb01vZGVTYXZlZEVtaXNzaW9uc0l0ZW0uaGlkZSgpO1xyXG4gICAgICB0aGlzLm9uVG9nZ2xlQ2FsbGJhY2soKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBvblRvZ2dsZUNhbGxiYWNrOiAoKSA9PiB2b2lkO1xyXG5cclxuICBwdWJsaWMgc2V0T25Ub2dnbGVDYWxsYmFjayhjYWxsYmFjazogKCkgPT4gdm9pZCkge1xyXG4gICAgdGhpcy5vblRvZ2dsZUNhbGxiYWNrID0gY2FsbGJhY2s7XHJcbiAgfVxyXG5cclxuICBjb25maWd1cmUocGxheWVyOiBQbGF5ZXJBUEkpOiB2b2lkIHtcclxuICAgIHBsYXllci5vbihwbGF5ZXIuZXhwb3J0cy5QbGF5ZXJFdmVudC5TZWdtZW50UGxheWJhY2ssIChzZWdtZW50OiBTZWdtZW50UGxheWJhY2tFdmVudCkgPT4ge1xyXG4gICAgICBpZiAoIXNlZ21lbnQubWltZVR5cGUuaW5jbHVkZXMoJ3ZpZGVvJykpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGNvbnN0IHsgaGVpZ2h0LCB3aWR0aCwgYml0cmF0ZSwgZnJhbWVSYXRlIH0gPSBzZWdtZW50Lm1lZGlhSW5mbztcclxuICAgICAgY29uc3Qge1xyXG4gICAgICAgIGhlaWdodDogbWF4SGVpZ2h0LFxyXG4gICAgICAgIGJpdHJhdGU6IG1heEJpdHJhdGUsXHJcbiAgICAgICAgd2lkdGg6IG1heFdpZHRoLFxyXG4gICAgICB9ID0gdGhpcy5nZXRNYXhRdWFsaXR5QXZhaWxhYmxlKHBsYXllci5nZXRBdmFpbGFibGVWaWRlb1F1YWxpdGllcygpKTtcclxuXHJcbiAgICAgIGNvbnN0IGN1cnJlbnRFbmVyZ3lLd2ggPSB0aGlzLmNhbGN1bGF0ZUVuZXJneUNvbnN1bXB0aW9uKGZyYW1lUmF0ZSwgaGVpZ2h0LCB3aWR0aCwgYml0cmF0ZSwgc2VnbWVudC5kdXJhdGlvbik7XHJcblxyXG4gICAgICBjb25zdCBtYXhFbmVyZ3lLd2ggPSB0aGlzLmNhbGN1bGF0ZUVuZXJneUNvbnN1bXB0aW9uKFxyXG4gICAgICAgIGZyYW1lUmF0ZSxcclxuICAgICAgICBtYXhIZWlnaHQsXHJcbiAgICAgICAgbWF4V2lkdGgsXHJcbiAgICAgICAgbWF4Qml0cmF0ZSxcclxuICAgICAgICBzZWdtZW50LmR1cmF0aW9uLFxyXG4gICAgICApO1xyXG5cclxuICAgICAgaWYgKHRoaXMuZWNvTW9kZVNhdmVkRW1pc3Npb25zSXRlbS5pc1Nob3duKCkpIHtcclxuICAgICAgICB0aGlzLnVwZGF0ZVNhdmVkRW1pc3Npb25zKGN1cnJlbnRFbmVyZ3lLd2gsIG1heEVuZXJneUt3aCwgdGhpcy5lbWlzc2lvbnNTYXZlZExhYmVsKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICB1cGRhdGVTYXZlZEVtaXNzaW9ucyhcclxuICAgIGN1cnJlbnRFbmVyZ3lDb25zdXB0aW9uOiBudW1iZXIsXHJcbiAgICBtYXhFbmVyZ3lDb25zdXB0aW9uOiBudW1iZXIsXHJcbiAgICBlbWlzc2lvbnNTYXZlZExhYmVsOiBMYWJlbDxMYWJlbENvbmZpZz4sXHJcbiAgKSB7XHJcbiAgICAvLyA0NzUgaXMgdGhlIGF2ZXJhZ2UgY2FyYm9uIGludGVuc2l0eSBvZiBhbGwgY291bnRyaWVzIGluIGdDTzIva1doXHJcbiAgICBjb25zdCBhdmVyYWdlQ2FyYm9uSW50ZW5zaXR5ID0gNDc1O1xyXG5cclxuICAgIHRoaXMuY3VycmVudEVuZXJneUVtaXNzaW9uID0gY3VycmVudEVuZXJneUNvbnN1cHRpb24gKiBhdmVyYWdlQ2FyYm9uSW50ZW5zaXR5O1xyXG4gICAgY29uc3QgbWF4RW5lcmd5RW1pc3NvbiA9IG1heEVuZXJneUNvbnN1cHRpb24gKiBhdmVyYWdlQ2FyYm9uSW50ZW5zaXR5O1xyXG4gICAgdGhpcy5zYXZlZEVtaXNzb25zICs9IG1heEVuZXJneUVtaXNzb24gLSB0aGlzLmN1cnJlbnRFbmVyZ3lFbWlzc2lvbjtcclxuICAgIGVtaXNzaW9uc1NhdmVkTGFiZWwuc2V0VGV4dCh0aGlzLnNhdmVkRW1pc3NvbnMudG9GaXhlZCg0KSArICcgZ0NPMicpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogVGhlIGNhbGN1bGF0aW9ucyBhcmUgYmFzZWQgb24gdGhlIGZvbGxvd2luZyBwYXBlcjogaHR0cHM6Ly9hcnhpdi5vcmcvcGRmLzIyMTAuMDU0NDQucGRmXHJcbiAgICovXHJcbiAgY2FsY3VsYXRlRW5lcmd5Q29uc3VtcHRpb24oZnBzOiBudW1iZXIsIGhlaWdodDogbnVtYmVyLCB3aWR0aDogbnVtYmVyLCBiaXRyYXRlOiBudW1iZXIsIGR1cmF0aW9uOiBudW1iZXIpOiBudW1iZXIge1xyXG4gICAgY29uc3QgZnBzV2VpZ2h0ID0gMC4wMzU7XHJcbiAgICBjb25zdCBwaXhlbGRXZWlnaHQgPSA1Ljc2ZS05O1xyXG4gICAgY29uc3QgYmlyYXRlV2VpZ2h0ID0gNi45N2UtNjtcclxuICAgIGNvbnN0IGNvbnN0YW50T2Zmc2V0ID0gOC41MjtcclxuICAgIGNvbnN0IGJpdHJhdGVJbnRlcm5ldFdlaWdodCA9IDMuMjRlLTU7XHJcbiAgICBjb25zdCBpbnRlcm5ldENvbm5lY3Rpb25PZmZzZXQgPSAxLjE1O1xyXG4gICAgY29uc3QgdmlkZW9Db2RlYyA9IDQuMTY7XHJcblxyXG4gICAgY29uc3QgZW5lcmd5Q29uc3VtcHRpb25XID1cclxuICAgICAgZnBzV2VpZ2h0ICogZnBzICtcclxuICAgICAgcGl4ZWxkV2VpZ2h0ICogaGVpZ2h0ICogd2lkdGggK1xyXG4gICAgICAoYmlyYXRlV2VpZ2h0ICsgYml0cmF0ZUludGVybmV0V2VpZ2h0KSAqIChiaXRyYXRlIC8gMTAwMCkgK1xyXG4gICAgICB2aWRlb0NvZGVjICtcclxuICAgICAgY29uc3RhbnRPZmZzZXQgK1xyXG4gICAgICBpbnRlcm5ldENvbm5lY3Rpb25PZmZzZXQ7XHJcblxyXG4gICAgLy8gQ29udmVydCBlbmVyZ3kgY29uc3VtcHRpb24gZnJvbSBXYXR0cyAoVykgdG8gS2lsb3dhdHQtaG91cnMgKGtXaCkgZm9yIHRoZSBnaXZlbiB0aW1lIGR1cmF0aW9uIG9mIHRoZSBzZWdtZW50XHJcbiAgICBjb25zdCBlbmVyZ3lDb25zdW1wdGlvbkt3aCA9IChlbmVyZ3lDb25zdW1wdGlvblcgKiBkdXJhdGlvbikgLyAzLjZlNjtcclxuXHJcbiAgICByZXR1cm4gZW5lcmd5Q29uc3VtcHRpb25Ld2g7XHJcbiAgfVxyXG4gIGdldE1heFF1YWxpdHlBdmFpbGFibGUoYXZhaWxhYmxlVmlkZW9RdWFsaXRpZXM6IFZpZGVvUXVhbGl0eVtdKSB7XHJcbiAgICBjb25zdCBzb3J0ZWRRdWFsaXRpZXMgPSBhdmFpbGFibGVWaWRlb1F1YWxpdGllcy5zb3J0KChhLCBiKSA9PiBhLmJpdHJhdGUgLSBiLmJpdHJhdGUpO1xyXG4gICAgcmV0dXJuIHNvcnRlZFF1YWxpdGllc1tzb3J0ZWRRdWFsaXRpZXMubGVuZ3RoIC0gMV07XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCB7IFRvZ2dsZUJ1dHRvbiwgVG9nZ2xlQnV0dG9uQ29uZmlnIH0gZnJvbSAnLi90b2dnbGVidXR0b24nO1xyXG5pbXBvcnQgeyBVSUluc3RhbmNlTWFuYWdlciB9IGZyb20gJy4uL3VpbWFuYWdlcic7XHJcbmltcG9ydCB7IER5bmFtaWNBZGFwdGF0aW9uQ29uZmlnLCBQbGF5ZXJBUEksIFZpZGVvUXVhbGl0eUNoYW5nZWRFdmVudCB9IGZyb20gJ2JpdG1vdmluLXBsYXllcic7XHJcbmltcG9ydCB7IGkxOG4gfSBmcm9tICcuLi9sb2NhbGl6YXRpb24vaTE4bic7XHJcblxyXG4vKipcclxuICogQGNhdGVnb3J5IEJ1dHRvbnNcclxuICovXHJcbmV4cG9ydCBjbGFzcyBFY29Nb2RlVG9nZ2xlQnV0dG9uIGV4dGVuZHMgVG9nZ2xlQnV0dG9uPFRvZ2dsZUJ1dHRvbkNvbmZpZz4ge1xyXG4gIHByaXZhdGUgYWRhcHRhdGlvbkNvbmZpZzogRHluYW1pY0FkYXB0YXRpb25Db25maWc7XHJcblxyXG4gIGNvbnN0cnVjdG9yKGNvbmZpZzogVG9nZ2xlQnV0dG9uQ29uZmlnID0ge30pIHtcclxuICAgIHN1cGVyKGNvbmZpZyk7XHJcblxyXG4gICAgY29uc3QgZGVmYXVsdENvbmZpZzogVG9nZ2xlQnV0dG9uQ29uZmlnID0ge1xyXG4gICAgICB0ZXh0OiBpMThuLmdldExvY2FsaXplcignZWNvTW9kZScpLFxyXG4gICAgICBjc3NDbGFzczogJ3VpLWVjb21vZGV0b2dnbGVidXR0b24nLFxyXG4gICAgICBvbkNsYXNzOiAnb24nLFxyXG4gICAgICBvZmZDbGFzczogJ29mZicsXHJcbiAgICAgIGFyaWFMYWJlbDogaTE4bi5nZXRMb2NhbGl6ZXIoJ2Vjb01vZGUnKSxcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5jb25maWcgPSB0aGlzLm1lcmdlQ29uZmlnKGNvbmZpZywgZGVmYXVsdENvbmZpZywgdGhpcy5jb25maWcpO1xyXG4gIH1cclxuXHJcbiAgY29uZmlndXJlKHBsYXllcjogUGxheWVyQVBJLCB1aW1hbmFnZXI6IFVJSW5zdGFuY2VNYW5hZ2VyKTogdm9pZCB7XHJcbiAgICBzdXBlci5jb25maWd1cmUocGxheWVyLCB1aW1hbmFnZXIpO1xyXG5cclxuICAgIGlmICh0aGlzLmFyZUFkYXB0YXRpb25BcGlzQXZhaWxhYmxlKHBsYXllcikpIHtcclxuICAgICAgdGhpcy5vbkNsaWNrLnN1YnNjcmliZSgoKSA9PiB7XHJcbiAgICAgICAgdGhpcy50b2dnbGUoKTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICB0aGlzLm9uVG9nZ2xlT24uc3Vic2NyaWJlKCgpID0+IHtcclxuICAgICAgICB0aGlzLmVuYWJsZUVjb01vZGUocGxheWVyKTtcclxuICAgICAgICBwbGF5ZXIuc2V0VmlkZW9RdWFsaXR5KCdhdXRvJyk7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgdGhpcy5vblRvZ2dsZU9mZi5zdWJzY3JpYmUoKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuZGlzYWJsZUVjb01vZGUocGxheWVyKTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBwbGF5ZXIub24ocGxheWVyLmV4cG9ydHMuUGxheWVyRXZlbnQuVmlkZW9RdWFsaXR5Q2hhbmdlZCwgKHF1YWxpdHk6IFZpZGVvUXVhbGl0eUNoYW5nZWRFdmVudCkgPT4ge1xyXG4gICAgICAgIGlmIChxdWFsaXR5LnRhcmdldFF1YWxpdHkuaWQgIT09ICdhdXRvJykge1xyXG4gICAgICAgICAgdGhpcy5vZmYoKTtcclxuICAgICAgICAgIHRoaXMuZGlzYWJsZUVjb01vZGUocGxheWVyKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgc3VwZXIuZGlzYWJsZSgpO1xyXG4gICAgfVxyXG5cclxuICB9XHJcblxyXG4gIHByaXZhdGUgYXJlQWRhcHRhdGlvbkFwaXNBdmFpbGFibGUocGxheWVyOiBQbGF5ZXJBUEkpOiBib29sZWFuIHtcclxuICAgIGNvbnN0IGlzR2V0Q29uZmlnQXZhaWxhYmxlID0gQm9vbGVhbihwbGF5ZXIuYWRhcHRhdGlvbi5nZXRDb25maWcgJiYgdHlwZW9mIHBsYXllci5hZGFwdGF0aW9uLmdldENvbmZpZyA9PT0gJ2Z1bmN0aW9uJyk7XHJcbiAgICBjb25zdCBpc1NldENvbmZpZ0F2YWlsYWJsZSA9IEJvb2xlYW4ocGxheWVyLmFkYXB0YXRpb24uc2V0Q29uZmlnICYmIHR5cGVvZiBwbGF5ZXIuYWRhcHRhdGlvbi5zZXRDb25maWcgPT09ICdmdW5jdGlvbicpO1xyXG5cclxuICAgIHJldHVybiBCb29sZWFuKHBsYXllci5hZGFwdGF0aW9uICYmIGlzR2V0Q29uZmlnQXZhaWxhYmxlICYmIGlzU2V0Q29uZmlnQXZhaWxhYmxlKTtcclxuICB9XHJcblxyXG4gIGVuYWJsZUVjb01vZGUocGxheWVyOiBQbGF5ZXJBUEkpOiB2b2lkIHtcclxuICAgIHRoaXMuYWRhcHRhdGlvbkNvbmZpZyA9IHBsYXllci5hZGFwdGF0aW9uLmdldENvbmZpZygpO1xyXG4gICAgY29uc3QgY29kZWMgPSBwbGF5ZXIuZ2V0QXZhaWxhYmxlVmlkZW9RdWFsaXRpZXMoKVswXS5jb2RlYztcclxuXHJcbiAgICBpZiAoY29kZWMuaW5jbHVkZXMoJ2F2YycpKSB7XHJcbiAgICAgIHBsYXllci5hZGFwdGF0aW9uLnNldENvbmZpZyh7XHJcbiAgICAgICAgcmVzb2x1dGlvbjogeyBtYXhTZWxlY3RhYmxlVmlkZW9IZWlnaHQ6IDcyMCB9LFxyXG4gICAgICAgIGxpbWl0VG9QbGF5ZXJTaXplOiB0cnVlLFxyXG4gICAgICB9KTtcclxuICAgIH1cclxuICAgIGlmIChjb2RlYy5pbmNsdWRlcygnaHZjJykgfHwgY29kZWMuaW5jbHVkZXMoJ2hldicpKSB7XHJcbiAgICAgIHBsYXllci5hZGFwdGF0aW9uLnNldENvbmZpZyh7XHJcbiAgICAgICAgcmVzb2x1dGlvbjogeyBtYXhTZWxlY3RhYmxlVmlkZW9IZWlnaHQ6IDEwODAgfSxcclxuICAgICAgICBsaW1pdFRvUGxheWVyU2l6ZTogdHJ1ZSxcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAoY29kZWMuaW5jbHVkZXMoJ2F2MScpIHx8IGNvZGVjLmluY2x1ZGVzKCdhdjAxJykpIHtcclxuICAgICAgcGxheWVyLmFkYXB0YXRpb24uc2V0Q29uZmlnKHtcclxuICAgICAgICByZXNvbHV0aW9uOiB7IG1heFNlbGVjdGFibGVWaWRlb0hlaWdodDogMTQ0MCB9LFxyXG4gICAgICAgIGxpbWl0VG9QbGF5ZXJTaXplOiB0cnVlLFxyXG4gICAgICB9KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGRpc2FibGVFY29Nb2RlKHBsYXllcjogUGxheWVyQVBJKTogdm9pZCB7XHJcbiAgICBwbGF5ZXIuYWRhcHRhdGlvbi5zZXRDb25maWcodGhpcy5hZGFwdGF0aW9uQ29uZmlnKTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IHtDb250YWluZXJDb25maWcsIENvbnRhaW5lcn0gZnJvbSAnLi9jb250YWluZXInO1xuaW1wb3J0IHtMYWJlbCwgTGFiZWxDb25maWd9IGZyb20gJy4vbGFiZWwnO1xuaW1wb3J0IHtVSUluc3RhbmNlTWFuYWdlcn0gZnJvbSAnLi4vdWltYW5hZ2VyJztcbmltcG9ydCB7VHZOb2lzZUNhbnZhc30gZnJvbSAnLi90dm5vaXNlY2FudmFzJztcbmltcG9ydCB7IEVycm9yVXRpbHMgfSBmcm9tICcuLi9lcnJvcnV0aWxzJztcbmltcG9ydCB7IEVycm9yRXZlbnQsIFBsYXllckFQSSwgUGxheWVyRXZlbnRCYXNlIH0gZnJvbSAnYml0bW92aW4tcGxheWVyJztcbmltcG9ydCB7XG4gIGlzTW9iaWxlVjNQbGF5ZXJBUEksXG4gIE1vYmlsZVYzUGxheWVyQVBJLCBNb2JpbGVWM1BsYXllckVycm9yRXZlbnQsIE1vYmlsZVYzUGxheWVyRXZlbnQsIE1vYmlsZVYzU291cmNlRXJyb3JFdmVudCxcbn0gZnJvbSAnLi4vbW9iaWxldjNwbGF5ZXJhcGknO1xuXG5leHBvcnQgaW50ZXJmYWNlIEVycm9yTWVzc2FnZVRyYW5zbGF0b3Ige1xuICAoZXJyb3I6IEVycm9yRXZlbnQgfCBNb2JpbGVWM1BsYXllckVycm9yRXZlbnQpOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRXJyb3JNZXNzYWdlTWFwIHtcbiAgW2NvZGU6IG51bWJlcl06IHN0cmluZyB8IEVycm9yTWVzc2FnZVRyYW5zbGF0b3I7XG59XG5cbi8qKlxuICogQ29uZmlndXJhdGlvbiBpbnRlcmZhY2UgZm9yIHRoZSB7QGxpbmsgRXJyb3JNZXNzYWdlT3ZlcmxheX0uXG4gKlxuICogQGNhdGVnb3J5IENvbmZpZ3NcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBFcnJvck1lc3NhZ2VPdmVybGF5Q29uZmlnIGV4dGVuZHMgQ29udGFpbmVyQ29uZmlnIHtcbiAgLyoqXG4gICAqIEFsbG93cyBvdmVyd3JpdGluZyBvZiB0aGUgZXJyb3IgbWVzc2FnZXMgZGlzcGxheWVkIGluIHRoZSBvdmVybGF5IGZvciBjdXN0b21pemF0aW9uIGFuZCBsb2NhbGl6YXRpb24uXG4gICAqIFRoaXMgaXMgZWl0aGVyIGEgZnVuY3Rpb24gdGhhdCByZWNlaXZlcyBhbnkge0BsaW5rIEVycm9yRXZlbnR9IGFzIHBhcmFtZXRlciBhbmQgdHJhbnNsYXRlcyBlcnJvciBtZXNzYWdlcyxcbiAgICogb3IgYSBtYXAgb2YgZXJyb3IgY29kZXMgdGhhdCBvdmVyd3JpdGVzIHNwZWNpZmljIGVycm9yIG1lc3NhZ2VzIHdpdGggYSBwbGFpbiBzdHJpbmcgb3IgYSBmdW5jdGlvbiB0aGF0XG4gICAqIHJlY2VpdmVzIHRoZSB7QGxpbmsgRXJyb3JFdmVudH0gYXMgcGFyYW1ldGVyIGFuZCByZXR1cm5zIGEgY3VzdG9taXplZCBzdHJpbmcuXG4gICAqIFRoZSB0cmFuc2xhdGlvbiBmdW5jdGlvbnMgY2FuIGJlIHVzZWQgdG8gZXh0cmFjdCBkYXRhIChlLmcuIHBhcmFtZXRlcnMpIGZyb20gdGhlIG9yaWdpbmFsIGVycm9yIG1lc3NhZ2UuXG4gICAqXG4gICAqIEV4YW1wbGUgMSAoY2F0Y2gtYWxsIHRyYW5zbGF0aW9uIGZ1bmN0aW9uKTpcbiAgICogPGNvZGU+XG4gICAqIGVycm9yTWVzc2FnZU92ZXJsYXlDb25maWcgPSB7XG4gICAqICAgbWVzc2FnZXM6IGZ1bmN0aW9uKGVycm9yKSB7XG4gICAqICAgICBzd2l0Y2ggKGVycm9yLmNvZGUpIHtcbiAgICogICAgICAgLy8gT3ZlcndyaXRlIGVycm9yIDEwMDAgJ1Vua25vd24gZXJyb3InXG4gICAqICAgICAgIGNhc2UgMTAwMDpcbiAgICogICAgICAgICByZXR1cm4gJ0hvdXN0b24sIHdlIGhhdmUgYSBwcm9ibGVtJ1xuICAgKlxuICAgKiAgICAgICAvLyBUcmFuc2Zvcm0gZXJyb3IgMTIwMSAnVGhlIGRvd25sb2FkZWQgbWFuaWZlc3QgaXMgaW52YWxpZCcgdG8gdXBwZXJjYXNlXG4gICAqICAgICAgIGNhc2UgMTIwMTpcbiAgICogICAgICAgICB2YXIgZGVzY3JpcHRpb24gPSBFcnJvclV0aWxzLmRlZmF1bHRFcnJvck1lc3NhZ2VzW2Vycm9yLmNvZGVdO1xuICAgKiAgICAgICAgIHJldHVybiBkZXNjcmlwdGlvbi50b1VwcGVyQ2FzZSgpO1xuICAgKlxuICAgKiAgICAgICAvLyBDdXN0b21pemUgZXJyb3IgMTIwNyAnVGhlIG1hbmlmZXN0IGNvdWxkIG5vdCBiZSBsb2FkZWQnXG4gICAqICAgICAgIGNhc2UgMTIwNzpcbiAgICogICAgICAgICB2YXIgc3RhdHVzQ29kZSA9IGVycm9yLmRhdGEuc3RhdHVzQ29kZTtcbiAgICogICAgICAgICByZXR1cm4gJ01hbmlmZXN0IGxvYWRpbmcgZmFpbGVkIHdpdGggSFRUUCBlcnJvciAnICsgc3RhdHVzQ29kZTtcbiAgICogICAgIH1cbiAgICogICAgIC8vIFJldHVybiB1bm1vZGlmaWVkIGVycm9yIG1lc3NhZ2UgZm9yIGFsbCBvdGhlciBlcnJvcnNcbiAgICogICAgIHJldHVybiBlcnJvci5tZXNzYWdlO1xuICAgKiAgIH1cbiAgICogfTtcbiAgICogPC9jb2RlPlxuICAgKlxuICAgKiBFeGFtcGxlIDIgKHRyYW5zbGF0aW5nIHNwZWNpZmljIGVycm9ycyk6XG4gICAqIDxjb2RlPlxuICAgKiBlcnJvck1lc3NhZ2VPdmVybGF5Q29uZmlnID0ge1xuICAgKiAgIG1lc3NhZ2VzOiB7XG4gICAqICAgICAvLyBPdmVyd3JpdGUgZXJyb3IgMTAwMCAnVW5rbm93biBlcnJvcidcbiAgICogICAgIDEwMDA6ICdIb3VzdG9uLCB3ZSBoYXZlIGEgcHJvYmxlbScsXG4gICAqXG4gICAqICAgICAvLyBUcmFuc2Zvcm0gZXJyb3IgMTIwMSAnVW5zdXBwb3J0ZWQgbWFuaWZlc3QgZm9ybWF0JyB0byB1cHBlcmNhc2VcbiAgICogICAgIDEyMDE6IGZ1bmN0aW9uKGVycm9yKSB7XG4gICAqICAgICAgIHZhciBkZXNjcmlwdGlvbiA9IEVycm9yVXRpbHMuZGVmYXVsdEVycm9yTWVzc2FnZXNbZXJyb3IuY29kZV07XG4gICAqICAgICAgIHJldHVybiBkZXNjcmlwdGlvbi50b1VwcGVyQ2FzZSgpO1xuICAgKiAgICAgfSxcbiAgICpcbiAgICogICAgIC8vIEN1c3RvbWl6ZSBlcnJvciAxMjA3ICdUaGUgbWFuaWZlc3QgY291bGQgbm90IGJlIGxvYWRlZCdcbiAgICogICAgIDEyMDc6IGZ1bmN0aW9uKGVycm9yKSB7XG4gICAqICAgICAgIHZhciBzdGF0dXNDb2RlID0gZXJyb3IuZGF0YS5zdGF0dXNDb2RlO1xuICAgKiAgICAgICByZXR1cm4gJ01hbmlmZXN0IGxvYWRpbmcgZmFpbGVkIHdpdGggSFRUUCBlcnJvciAnICsgc3RhdHVzQ29kZTtcbiAgICogICAgIH1cbiAgICogICB9XG4gICAqIH07XG4gICAqIDwvY29kZT5cbiAgICovXG4gIG1lc3NhZ2VzPzogRXJyb3JNZXNzYWdlTWFwIHwgRXJyb3JNZXNzYWdlVHJhbnNsYXRvcjtcbn1cblxuLyoqXG4gKiBPdmVybGF5cyB0aGUgcGxheWVyIGFuZCBkaXNwbGF5cyBlcnJvciBtZXNzYWdlcy5cbiAqXG4gKiBAY2F0ZWdvcnkgQ29tcG9uZW50c1xuICovXG5leHBvcnQgY2xhc3MgRXJyb3JNZXNzYWdlT3ZlcmxheSBleHRlbmRzIENvbnRhaW5lcjxFcnJvck1lc3NhZ2VPdmVybGF5Q29uZmlnPiB7XG5cbiAgcHJpdmF0ZSBlcnJvckxhYmVsOiBMYWJlbDxMYWJlbENvbmZpZz47XG4gIHByaXZhdGUgdHZOb2lzZUJhY2tncm91bmQ6IFR2Tm9pc2VDYW52YXM7XG5cbiAgY29uc3RydWN0b3IoY29uZmlnOiBFcnJvck1lc3NhZ2VPdmVybGF5Q29uZmlnID0ge30pIHtcbiAgICBzdXBlcihjb25maWcpO1xuXG4gICAgdGhpcy5lcnJvckxhYmVsID0gbmV3IExhYmVsPExhYmVsQ29uZmlnPih7IGNzc0NsYXNzOiAndWktZXJyb3JtZXNzYWdlLWxhYmVsJyB9KTtcbiAgICB0aGlzLnR2Tm9pc2VCYWNrZ3JvdW5kID0gbmV3IFR2Tm9pc2VDYW52YXMoKTtcblxuICAgIHRoaXMuY29uZmlnID0gdGhpcy5tZXJnZUNvbmZpZyhjb25maWcsIHtcbiAgICAgIGNzc0NsYXNzOiAndWktZXJyb3JtZXNzYWdlLW92ZXJsYXknLFxuICAgICAgY29tcG9uZW50czogW3RoaXMudHZOb2lzZUJhY2tncm91bmQsIHRoaXMuZXJyb3JMYWJlbF0sXG4gICAgICBoaWRkZW46IHRydWUsXG4gICAgfSwgdGhpcy5jb25maWcpO1xuICB9XG5cbiAgY29uZmlndXJlKHBsYXllcjogUGxheWVyQVBJIHwgTW9iaWxlVjNQbGF5ZXJBUEksIHVpbWFuYWdlcjogVUlJbnN0YW5jZU1hbmFnZXIpOiB2b2lkIHtcbiAgICBzdXBlci5jb25maWd1cmUocGxheWVyLCB1aW1hbmFnZXIpO1xuXG4gICAgbGV0IGNvbmZpZyA9IHRoaXMuZ2V0Q29uZmlnKCk7XG5cbiAgICBjb25zdCBoYW5kbGVFcnJvck1lc3NhZ2UgPSAoXG4gICAgICBldmVudDogRXJyb3JFdmVudCB8IE1vYmlsZVYzU291cmNlRXJyb3JFdmVudCB8IE1vYmlsZVYzUGxheWVyRXJyb3JFdmVudCxcbiAgICAgIG1lc3NhZ2U6IHN0cmluZyxcbiAgICApID0+IHtcbiAgICAgIGNvbnN0IGN1c3RvbWl6ZWRNZXNzYWdlID0gY3VzdG9taXplRXJyb3JNZXNzYWdlKHVpbWFuYWdlci5nZXRDb25maWcoKS5lcnJvck1lc3NhZ2VzIHx8IGNvbmZpZy5tZXNzYWdlcywgZXZlbnQpO1xuICAgICAgaWYgKGN1c3RvbWl6ZWRNZXNzYWdlKSB7XG4gICAgICAgIG1lc3NhZ2UgPSBjdXN0b21pemVkTWVzc2FnZTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5kaXNwbGF5KG1lc3NhZ2UpO1xuICAgIH07XG5cbiAgICBpZiAoaXNNb2JpbGVWM1BsYXllckFQSShwbGF5ZXIpKSB7XG4gICAgICBjb25zdCBlcnJvckV2ZW50SGFuZGxlciA9IChldmVudDogTW9iaWxlVjNTb3VyY2VFcnJvckV2ZW50IHwgTW9iaWxlVjNQbGF5ZXJFcnJvckV2ZW50KSA9PiB7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBFcnJvclV0aWxzLmRlZmF1bHRNb2JpbGVWM0Vycm9yTWVzc2FnZVRyYW5zbGF0b3IoZXZlbnQpO1xuICAgICAgICBoYW5kbGVFcnJvck1lc3NhZ2UoZXZlbnQsIG1lc3NhZ2UpO1xuICAgICAgfTtcblxuICAgICAgcGxheWVyLm9uKE1vYmlsZVYzUGxheWVyRXZlbnQuUGxheWVyRXJyb3IsIGVycm9yRXZlbnRIYW5kbGVyKTtcbiAgICAgIHBsYXllci5vbihNb2JpbGVWM1BsYXllckV2ZW50LlNvdXJjZUVycm9yLCBlcnJvckV2ZW50SGFuZGxlcik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHBsYXllci5vbihwbGF5ZXIuZXhwb3J0cy5QbGF5ZXJFdmVudC5FcnJvciwgKGV2ZW50OiBFcnJvckV2ZW50KSA9PiB7XG4gICAgICAgIGxldCBtZXNzYWdlID0gRXJyb3JVdGlscy5kZWZhdWx0V2ViRXJyb3JNZXNzYWdlVHJhbnNsYXRvcihldmVudCk7XG4gICAgICAgIGhhbmRsZUVycm9yTWVzc2FnZShldmVudCwgbWVzc2FnZSk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBwbGF5ZXIub24ocGxheWVyLmV4cG9ydHMuUGxheWVyRXZlbnQuU291cmNlTG9hZGVkLCAoZXZlbnQ6IFBsYXllckV2ZW50QmFzZSkgPT4ge1xuICAgICAgaWYgKHRoaXMuaXNTaG93bigpKSB7XG4gICAgICAgIHRoaXMudHZOb2lzZUJhY2tncm91bmQuc3RvcCgpO1xuICAgICAgICB0aGlzLmhpZGUoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIGRpc3BsYXkoZXJyb3JNZXNzYWdlOiBzdHJpbmcpOiB2b2lkIHtcbiAgICB0aGlzLmVycm9yTGFiZWwuc2V0VGV4dChlcnJvck1lc3NhZ2UpO1xuICAgIHRoaXMudHZOb2lzZUJhY2tncm91bmQuc3RhcnQoKTtcbiAgICB0aGlzLnNob3coKTtcbiAgfVxuXG4gIHJlbGVhc2UoKTogdm9pZCB7XG4gICAgc3VwZXIucmVsZWFzZSgpO1xuXG4gICAgLy8gQ2FudmFzIHJlbmRlcmluZyBtdXN0IGJlIGV4cGxpY2l0bHkgc3RvcHBlZCwgZWxzZSBpdCBqdXN0IGNvbnRpbnVlcyBmb3JldmVyIGFuZCBob2dzIHJlc291cmNlc1xuICAgIHRoaXMudHZOb2lzZUJhY2tncm91bmQuc3RvcCgpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGN1c3RvbWl6ZUVycm9yTWVzc2FnZShcbiAgZXJyb3JNZXNzYWdlczogRXJyb3JNZXNzYWdlVHJhbnNsYXRvciB8IEVycm9yTWVzc2FnZU1hcCxcbiAgZXZlbnQ6IEVycm9yRXZlbnQgfCBNb2JpbGVWM1BsYXllckVycm9yRXZlbnQgfCBNb2JpbGVWM1NvdXJjZUVycm9yRXZlbnQsXG4pOiBzdHJpbmcgfCB1bmRlZmluZWQge1xuICBpZiAoIWVycm9yTWVzc2FnZXMpIHtcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9XG5cbiAgLy8gUHJvY2VzcyBtZXNzYWdlIHZvY2FidWxhcmllc1xuICBpZiAodHlwZW9mIGVycm9yTWVzc2FnZXMgPT09ICdmdW5jdGlvbicpIHtcbiAgICAvLyBUcmFuc2xhdGlvbiBmdW5jdGlvbiBmb3IgYWxsIGVycm9yc1xuICAgIHJldHVybiBlcnJvck1lc3NhZ2VzKGV2ZW50KTtcbiAgfVxuICBpZiAoZXJyb3JNZXNzYWdlc1tldmVudC5jb2RlXSkge1xuICAgIC8vIEl0J3Mgbm90IGEgdHJhbnNsYXRpb24gZnVuY3Rpb24sIHNvIGl0IG11c3QgYmUgYSBtYXAgb2Ygc3RyaW5ncyBvciB0cmFuc2xhdGlvbiBmdW5jdGlvbnNcbiAgICBjb25zdCBjdXN0b21NZXNzYWdlID0gZXJyb3JNZXNzYWdlc1tldmVudC5jb2RlXTtcblxuICAgIHJldHVybiB0eXBlb2YgY3VzdG9tTWVzc2FnZSA9PT0gJ3N0cmluZycgPyBjdXN0b21NZXNzYWdlIDogY3VzdG9tTWVzc2FnZShldmVudCk7XG4gIH1cbn1cbiIsImltcG9ydCB7IFRvZ2dsZUJ1dHRvbiwgVG9nZ2xlQnV0dG9uQ29uZmlnIH0gZnJvbSAnLi90b2dnbGVidXR0b24nO1xuaW1wb3J0IHsgVUlJbnN0YW5jZU1hbmFnZXIgfSBmcm9tICcuLi91aW1hbmFnZXInO1xuaW1wb3J0IHsgUGxheWVyQVBJIH0gZnJvbSAnYml0bW92aW4tcGxheWVyJztcbmltcG9ydCB7IGkxOG4gfSBmcm9tICcuLi9sb2NhbGl6YXRpb24vaTE4bic7XG5cbi8qKlxuICogQSBidXR0b24gdGhhdCB0b2dnbGVzIHRoZSBwbGF5ZXIgYmV0d2VlbiB3aW5kb3dlZCBhbmQgZnVsbHNjcmVlbiB2aWV3LlxuICpcbiAqIEBjYXRlZ29yeSBCdXR0b25zXG4gKi9cbmV4cG9ydCBjbGFzcyBGdWxsc2NyZWVuVG9nZ2xlQnV0dG9uIGV4dGVuZHMgVG9nZ2xlQnV0dG9uPFRvZ2dsZUJ1dHRvbkNvbmZpZz4ge1xuXG4gIGNvbnN0cnVjdG9yKGNvbmZpZzogVG9nZ2xlQnV0dG9uQ29uZmlnID0ge30pIHtcbiAgICBzdXBlcihjb25maWcpO1xuXG4gICAgdGhpcy5jb25maWcgPSB0aGlzLm1lcmdlQ29uZmlnKGNvbmZpZywge1xuICAgICAgY3NzQ2xhc3M6ICd1aS1mdWxsc2NyZWVudG9nZ2xlYnV0dG9uJyxcbiAgICAgIHRleHQ6IGkxOG4uZ2V0TG9jYWxpemVyKCdmdWxsc2NyZWVuJyksXG4gICAgfSwgdGhpcy5jb25maWcpO1xuICB9XG5cbiAgY29uZmlndXJlKHBsYXllcjogUGxheWVyQVBJLCB1aW1hbmFnZXI6IFVJSW5zdGFuY2VNYW5hZ2VyKTogdm9pZCB7XG4gICAgc3VwZXIuY29uZmlndXJlKHBsYXllciwgdWltYW5hZ2VyKTtcblxuICAgIGNvbnN0IGlzRnVsbFNjcmVlbkF2YWlsYWJsZSA9ICgpID0+IHtcbiAgICAgIHJldHVybiBwbGF5ZXIuaXNWaWV3TW9kZUF2YWlsYWJsZShwbGF5ZXIuZXhwb3J0cy5WaWV3TW9kZS5GdWxsc2NyZWVuKTtcbiAgICB9O1xuXG4gICAgY29uc3QgZnVsbHNjcmVlblN0YXRlSGFuZGxlciA9ICgpID0+IHtcbiAgICAgIHBsYXllci5nZXRWaWV3TW9kZSgpID09PSBwbGF5ZXIuZXhwb3J0cy5WaWV3TW9kZS5GdWxsc2NyZWVuID8gdGhpcy5vbigpIDogdGhpcy5vZmYoKTtcbiAgICB9O1xuXG4gICAgY29uc3QgZnVsbHNjcmVlbkF2YWlsYWJpbGl0eUNoYW5nZWRIYW5kbGVyID0gKCkgPT4ge1xuICAgICAgaXNGdWxsU2NyZWVuQXZhaWxhYmxlKCkgPyB0aGlzLnNob3coKSA6IHRoaXMuaGlkZSgpO1xuICAgIH07XG5cbiAgICBwbGF5ZXIub24ocGxheWVyLmV4cG9ydHMuUGxheWVyRXZlbnQuVmlld01vZGVDaGFuZ2VkLCBmdWxsc2NyZWVuU3RhdGVIYW5kbGVyKTtcblxuICAgIC8vIEF2YWlsYWJsZSBvbmx5IGluIG91ciBuYXRpdmUgU0RLcyBmb3Igbm93XG4gICAgaWYgKChwbGF5ZXIuZXhwb3J0cy5QbGF5ZXJFdmVudCBhcyBhbnkpLlZpZXdNb2RlQXZhaWxhYmlsaXR5Q2hhbmdlZCkge1xuICAgICAgcGxheWVyLm9uKFxuICAgICAgICAocGxheWVyLmV4cG9ydHMuUGxheWVyRXZlbnQgYXMgYW55KS5WaWV3TW9kZUF2YWlsYWJpbGl0eUNoYW5nZWQsXG4gICAgICAgIGZ1bGxzY3JlZW5BdmFpbGFiaWxpdHlDaGFuZ2VkSGFuZGxlcixcbiAgICAgICk7XG4gICAgfVxuXG4gICAgdWltYW5hZ2VyLmdldENvbmZpZygpLmV2ZW50cy5vblVwZGF0ZWQuc3Vic2NyaWJlKGZ1bGxzY3JlZW5BdmFpbGFiaWxpdHlDaGFuZ2VkSGFuZGxlcik7XG5cbiAgICB0aGlzLm9uQ2xpY2suc3Vic2NyaWJlKCgpID0+IHtcbiAgICAgIGlmICghaXNGdWxsU2NyZWVuQXZhaWxhYmxlKCkpIHtcbiAgICAgICAgaWYgKGNvbnNvbGUpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZygnRnVsbHNjcmVlbiB1bmF2YWlsYWJsZScpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgY29uc3QgdGFyZ2V0Vmlld01vZGUgPVxuICAgICAgICBwbGF5ZXIuZ2V0Vmlld01vZGUoKSA9PT0gcGxheWVyLmV4cG9ydHMuVmlld01vZGUuRnVsbHNjcmVlblxuICAgICAgICAgID8gcGxheWVyLmV4cG9ydHMuVmlld01vZGUuSW5saW5lXG4gICAgICAgICAgOiBwbGF5ZXIuZXhwb3J0cy5WaWV3TW9kZS5GdWxsc2NyZWVuO1xuXG4gICAgICBwbGF5ZXIuc2V0Vmlld01vZGUodGFyZ2V0Vmlld01vZGUpO1xuICAgIH0pO1xuXG4gICAgLy8gU3RhcnR1cCBpbml0XG4gICAgZnVsbHNjcmVlbkF2YWlsYWJpbGl0eUNoYW5nZWRIYW5kbGVyKCk7XG4gICAgZnVsbHNjcmVlblN0YXRlSGFuZGxlcigpO1xuICB9XG59XG4iLCJpbXBvcnQge1BsYXliYWNrVG9nZ2xlQnV0dG9uLCBQbGF5YmFja1RvZ2dsZUJ1dHRvbkNvbmZpZ30gZnJvbSAnLi9wbGF5YmFja3RvZ2dsZWJ1dHRvbic7XG5pbXBvcnQge0RPTX0gZnJvbSAnLi4vZG9tJztcbmltcG9ydCB7VUlJbnN0YW5jZU1hbmFnZXJ9IGZyb20gJy4uL3VpbWFuYWdlcic7XG5pbXBvcnQgeyBQbGF5ZXJBUEksIFBsYXllckV2ZW50QmFzZSwgV2FybmluZ0V2ZW50IH0gZnJvbSAnYml0bW92aW4tcGxheWVyJztcbmltcG9ydCB7IGkxOG4gfSBmcm9tICcuLi9sb2NhbGl6YXRpb24vaTE4bic7XG5cbi8qKlxuICogQSBidXR0b24gdGhhdCBvdmVybGF5cyB0aGUgdmlkZW8gYW5kIHRvZ2dsZXMgYmV0d2VlbiBwbGF5YmFjayBhbmQgcGF1c2UuXG4gKlxuICogQGNhdGVnb3J5IEJ1dHRvbnNcbiAqL1xuZXhwb3J0IGNsYXNzIEh1Z2VQbGF5YmFja1RvZ2dsZUJ1dHRvbiBleHRlbmRzIFBsYXliYWNrVG9nZ2xlQnV0dG9uIHtcblxuICBjb25zdHJ1Y3Rvcihjb25maWc6IFBsYXliYWNrVG9nZ2xlQnV0dG9uQ29uZmlnID0ge30pIHtcbiAgICBzdXBlcihjb25maWcpO1xuXG4gICAgdGhpcy5jb25maWcgPSB0aGlzLm1lcmdlQ29uZmlnKGNvbmZpZywge1xuICAgICAgY3NzQ2xhc3M6ICd1aS1odWdlcGxheWJhY2t0b2dnbGVidXR0b24nLFxuICAgICAgdGV4dDogaTE4bi5nZXRMb2NhbGl6ZXIoJ3BsYXlQYXVzZScpLFxuICAgICAgcm9sZTogJ2J1dHRvbicsXG4gICAgfSwgdGhpcy5jb25maWcpO1xuICB9XG5cbiAgY29uZmlndXJlKHBsYXllcjogUGxheWVyQVBJLCB1aW1hbmFnZXI6IFVJSW5zdGFuY2VNYW5hZ2VyKTogdm9pZCB7XG4gICAgLy8gVXBkYXRlIGJ1dHRvbiBzdGF0ZSB0aHJvdWdoIEFQSSBldmVudHNcbiAgICBzdXBlci5jb25maWd1cmUocGxheWVyLCB1aW1hbmFnZXIsIGZhbHNlKTtcblxuICAgIC8vIFNldCBlbnRlckZ1bGxzY3JlZW5PbkluaXRpYWxQbGF5YmFjayBpZiBzZXQgaW4gdGhlIHVpbWFuYWdlciBjb25maWdcbiAgICBpZiAodHlwZW9mIHVpbWFuYWdlci5nZXRDb25maWcoKS5lbnRlckZ1bGxzY3JlZW5PbkluaXRpYWxQbGF5YmFjayA9PT0gJ2Jvb2xlYW4nKSB7XG4gICAgICB0aGlzLmNvbmZpZy5lbnRlckZ1bGxzY3JlZW5PbkluaXRpYWxQbGF5YmFjayA9IHVpbWFuYWdlci5nZXRDb25maWcoKS5lbnRlckZ1bGxzY3JlZW5PbkluaXRpYWxQbGF5YmFjaztcbiAgICB9XG5cbiAgICBsZXQgdG9nZ2xlUGxheWJhY2sgPSAoKSA9PiB7XG4gICAgICBpZiAocGxheWVyLmlzUGxheWluZygpIHx8IHRoaXMuaXNQbGF5SW5pdGlhdGVkKSB7XG4gICAgICAgIHBsYXllci5wYXVzZSgndWknKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHBsYXllci5wbGF5KCd1aScpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBsZXQgdG9nZ2xlRnVsbHNjcmVlbiA9ICgpID0+IHtcbiAgICAgIGlmIChwbGF5ZXIuZ2V0Vmlld01vZGUoKSA9PT0gcGxheWVyLmV4cG9ydHMuVmlld01vZGUuRnVsbHNjcmVlbikge1xuICAgICAgICBwbGF5ZXIuc2V0Vmlld01vZGUocGxheWVyLmV4cG9ydHMuVmlld01vZGUuSW5saW5lKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHBsYXllci5zZXRWaWV3TW9kZShwbGF5ZXIuZXhwb3J0cy5WaWV3TW9kZS5GdWxsc2NyZWVuKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgbGV0IGZpcnN0UGxheSA9IHRydWU7XG4gICAgbGV0IGNsaWNrVGltZSA9IDA7XG4gICAgbGV0IGRvdWJsZUNsaWNrVGltZSA9IDA7XG5cbiAgICAvKlxuICAgICAqIFlvdVR1YmUtc3R5bGUgdG9nZ2xlIGJ1dHRvbiBoYW5kbGluZ1xuICAgICAqXG4gICAgICogVGhlIGdvYWwgaXMgdG8gcHJldmVudCBhIHNob3J0IHBhdXNlIG9yIHBsYXliYWNrIGludGVydmFsIGJldHdlZW4gYSBjbGljaywgdGhhdCB0b2dnbGVzIHBsYXliYWNrLCBhbmQgYVxuICAgICAqIGRvdWJsZSBjbGljaywgdGhhdCB0b2dnbGVzIGZ1bGxzY3JlZW4uIEluIHRoaXMgbmFpdmUgYXBwcm9hY2gsIHRoZSBmaXJzdCBjbGljayB3b3VsZCBlLmcuIHN0YXJ0IHBsYXliYWNrLFxuICAgICAqIHRoZSBzZWNvbmQgY2xpY2sgd291bGQgYmUgZGV0ZWN0ZWQgYXMgZG91YmxlIGNsaWNrIGFuZCB0b2dnbGUgdG8gZnVsbHNjcmVlbiwgYW5kIGFzIHNlY29uZCBub3JtYWwgY2xpY2sgc3RvcFxuICAgICAqIHBsYXliYWNrLCB3aGljaCByZXN1bHRzIGlzIGEgc2hvcnQgcGxheWJhY2sgaW50ZXJ2YWwgd2l0aCBtYXggbGVuZ3RoIG9mIHRoZSBkb3VibGUgY2xpY2sgZGV0ZWN0aW9uXG4gICAgICogcGVyaW9kICh1c3VhbGx5IDUwMG1zKS5cbiAgICAgKlxuICAgICAqIFRvIHNvbHZlIHRoaXMgaXNzdWUsIHdlIGRlZmVyIGhhbmRsaW5nIG9mIHRoZSBmaXJzdCBjbGljayBmb3IgMjAwbXMsIHdoaWNoIGlzIGFsbW9zdCB1bm5vdGljZWFibGUgdG8gdGhlIHVzZXIsXG4gICAgICogYW5kIGp1c3QgdG9nZ2xlIHBsYXliYWNrIGlmIG5vIHNlY29uZCBjbGljayAoZG91YmxlIGNsaWNrKSBoYXMgYmVlbiByZWdpc3RlcmVkIGR1cmluZyB0aGlzIHBlcmlvZC4gSWYgYSBkb3VibGVcbiAgICAgKiBjbGljayBpcyByZWdpc3RlcmVkLCB3ZSBqdXN0IHRvZ2dsZSB0aGUgZnVsbHNjcmVlbi4gSW4gdGhlIGZpcnN0IDIwMG1zLCB1bmRlc2lyZWQgcGxheWJhY2sgY2hhbmdlcyB0aHVzIGNhbm5vdFxuICAgICAqIGhhcHBlbi4gSWYgYSBkb3VibGUgY2xpY2sgaXMgcmVnaXN0ZXJlZCB3aXRoaW4gNTAwbXMsIHdlIHVuZG8gdGhlIHBsYXliYWNrIGNoYW5nZSBhbmQgc3dpdGNoIGZ1bGxzY3JlZW4gbW9kZS5cbiAgICAgKiBJbiB0aGUgZW5kLCB0aGlzIG1ldGhvZCBiYXNpY2FsbHkgaW50cm9kdWNlcyBhIDIwMG1zIG9ic2VydmluZyBpbnRlcnZhbCBpbiB3aGljaCBwbGF5YmFjayBjaGFuZ2VzIGFyZSBwcmV2ZW50ZWRcbiAgICAgKiBpZiBhIGRvdWJsZSBjbGljayBoYXBwZW5zLlxuICAgICAqL1xuICAgIHRoaXMub25DbGljay5zdWJzY3JpYmUoKCkgPT4ge1xuICAgICAgLy8gRGlyZWN0bHkgc3RhcnQgcGxheWJhY2sgb24gZmlyc3QgY2xpY2sgb2YgdGhlIGJ1dHRvbi5cbiAgICAgIC8vIFRoaXMgaXMgYSByZXF1aXJlZCB3b3JrYXJvdW5kIGZvciBtb2JpbGUgYnJvd3NlcnMgd2hlcmUgdmlkZW8gcGxheWJhY2sgbmVlZHMgdG8gYmUgdHJpZ2dlcmVkIGRpcmVjdGx5XG4gICAgICAvLyBieSB0aGUgdXNlci4gQSBkZWZlcnJlZCBwbGF5YmFjayBzdGFydCB0aHJvdWdoIHRoZSB0aW1lb3V0IGJlbG93IGlzIG5vdCBjb25zaWRlcmVkIGFzIHVzZXIgYWN0aW9uIGFuZFxuICAgICAgLy8gdGhlcmVmb3JlIGlnbm9yZWQgYnkgbW9iaWxlIGJyb3dzZXJzLlxuICAgICAgaWYgKGZpcnN0UGxheSkge1xuICAgICAgICAvLyBUcnkgdG8gc3RhcnQgcGxheWJhY2suIFRoZW4gd2Ugd2FpdCBmb3IgUGxheSBhbmQgb25seSB3aGVuIGl0IGFycml2ZXMsIHdlIGRpc2FibGUgdGhlIGZpcnN0UGxheSBmbGFnLlxuICAgICAgICAvLyBJZiB3ZSBkaXNhYmxlIHRoZSBmbGFnIGhlcmUsIG9uQ2xpY2sgd2FzIHRyaWdnZXJlZCBwcm9ncmFtbWF0aWNhbGx5IGluc3RlYWQgb2YgYnkgYSB1c2VyIGludGVyYWN0aW9uLCBhbmRcbiAgICAgICAgLy8gcGxheWJhY2sgaXMgYmxvY2tlZCAoZS5nLiBvbiBtb2JpbGUgZGV2aWNlcyBkdWUgdG8gdGhlIHByb2dyYW1tYXRpYyBwbGF5KCkgY2FsbCksIHdlIGxvb3NlIHRoZSBjaGFuY2UgdG9cbiAgICAgICAgLy8gZXZlciBzdGFydCBwbGF5YmFjayB0aHJvdWdoIGEgdXNlciBpbnRlcmFjdGlvbiBhZ2FpbiB3aXRoIHRoaXMgYnV0dG9uLlxuICAgICAgICB0b2dnbGVQbGF5YmFjaygpO1xuXG4gICAgICAgIGlmICh0aGlzLmNvbmZpZy5lbnRlckZ1bGxzY3JlZW5PbkluaXRpYWxQbGF5YmFjaykge1xuICAgICAgICAgIHBsYXllci5zZXRWaWV3TW9kZShwbGF5ZXIuZXhwb3J0cy5WaWV3TW9kZS5GdWxsc2NyZWVuKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgbGV0IG5vdyA9IERhdGUubm93KCk7XG5cbiAgICAgIGlmIChub3cgLSBjbGlja1RpbWUgPCAyMDApIHtcbiAgICAgICAgLy8gV2UgaGF2ZSBhIGRvdWJsZSBjbGljayBpbnNpZGUgdGhlIDIwMG1zIGludGVydmFsLCBqdXN0IHRvZ2dsZSBmdWxsc2NyZWVuIG1vZGVcbiAgICAgICAgdG9nZ2xlRnVsbHNjcmVlbigpO1xuICAgICAgICBkb3VibGVDbGlja1RpbWUgPSBub3c7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH0gZWxzZSBpZiAobm93IC0gY2xpY2tUaW1lIDwgNTAwKSB7XG4gICAgICAgIC8vIFdlIGhhdmUgYSBkb3VibGUgY2xpY2sgaW5zaWRlIHRoZSA1MDBtcyBpbnRlcnZhbCwgdW5kbyBwbGF5YmFjayB0b2dnbGUgYW5kIHRvZ2dsZSBmdWxsc2NyZWVuIG1vZGVcbiAgICAgICAgdG9nZ2xlRnVsbHNjcmVlbigpO1xuICAgICAgICB0b2dnbGVQbGF5YmFjaygpO1xuICAgICAgICBkb3VibGVDbGlja1RpbWUgPSBub3c7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgY2xpY2tUaW1lID0gbm93O1xuXG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgaWYgKERhdGUubm93KCkgLSBkb3VibGVDbGlja1RpbWUgPiAyMDApIHtcbiAgICAgICAgICAvLyBObyBkb3VibGUgY2xpY2sgZGV0ZWN0ZWQsIHNvIHdlIHRvZ2dsZSBwbGF5YmFjayBhbmQgd2FpdCB3aGF0IGhhcHBlbnMgbmV4dFxuICAgICAgICAgIHRvZ2dsZVBsYXliYWNrKCk7XG4gICAgICAgIH1cbiAgICAgIH0sIDIwMCk7XG4gICAgfSk7XG5cbiAgICBwbGF5ZXIub24ocGxheWVyLmV4cG9ydHMuUGxheWVyRXZlbnQuUGxheSwgKCkgPT4ge1xuICAgICAgLy8gUGxheWJhY2sgaGFzIHJlYWxseSBzdGFydGVkLCB3ZSBjYW4gZGlzYWJsZSB0aGUgZmxhZyB0byBzd2l0Y2ggdG8gbm9ybWFsIHRvZ2dsZSBidXR0b24gaGFuZGxpbmdcbiAgICAgIGZpcnN0UGxheSA9IGZhbHNlO1xuICAgIH0pO1xuXG4gICAgcGxheWVyLm9uKHBsYXllci5leHBvcnRzLlBsYXllckV2ZW50Lldhcm5pbmcsIChldmVudDogV2FybmluZ0V2ZW50KSA9PiB7XG4gICAgICBpZiAoZXZlbnQuY29kZSA9PT0gcGxheWVyLmV4cG9ydHMuV2FybmluZ0NvZGUuUExBWUJBQ0tfQ09VTERfTk9UX0JFX1NUQVJURUQpIHtcbiAgICAgICAgLy8gaWYgcGxheWJhY2sgY291bGQgbm90IGJlIHN0YXJ0ZWQsIHJlc2V0IHRoZSBmaXJzdCBwbGF5IGZsYWcgYXMgd2UgbmVlZCB0aGUgdXNlciBpbnRlcmFjdGlvbiB0byBzdGFydFxuICAgICAgICBmaXJzdFBsYXkgPSB0cnVlO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgY29uc3Qgc3VwcHJlc3NQbGF5QnV0dG9uVHJhbnNpdGlvbkFuaW1hdGlvbiA9ICgpID0+IHtcbiAgICAgIC8vIERpc2FibGUgdGhlIGN1cnJlbnQgYW5pbWF0aW9uXG4gICAgICB0aGlzLnNldFRyYW5zaXRpb25BbmltYXRpb25zRW5hYmxlZChmYWxzZSk7XG5cbiAgICAgIC8vIEVuYWJsZSB0aGUgdHJhbnNpdGlvbiBhbmltYXRpb25zIGZvciB0aGUgbmV4dCBzdGF0ZSBjaGFuZ2VcbiAgICAgIHRoaXMub25Ub2dnbGUuc3Vic2NyaWJlT25jZSgoKSA9PiB7XG4gICAgICAgIHRoaXMuc2V0VHJhbnNpdGlvbkFuaW1hdGlvbnNFbmFibGVkKHRydWUpO1xuICAgICAgfSk7XG4gICAgfTtcblxuICAgIC8vIEhpZGUgdGhlIHBsYXkgYnV0dG9uIGFuaW1hdGlvbiB3aGVuIHRoZSBVSSBpcyBsb2FkZWQgKGl0IHNob3VsZCBvbmx5IGJlIGFuaW1hdGVkIG9uIHN0YXRlIGNoYW5nZXMpXG4gICAgc3VwcHJlc3NQbGF5QnV0dG9uVHJhbnNpdGlvbkFuaW1hdGlvbigpO1xuXG4gICAgY29uc3QgaXNBdXRvcGxheUVuYWJsZWQgPSBwbGF5ZXIuZ2V0Q29uZmlnKCkucGxheWJhY2sgJiYgQm9vbGVhbihwbGF5ZXIuZ2V0Q29uZmlnKCkucGxheWJhY2suYXV0b3BsYXkpO1xuICAgIC8vIFdlIG9ubHkga25vdyBpZiBhbiBhdXRvcGxheSBhdHRlbXB0IGlzIHVwY29taW5nIGlmIHRoZSBwbGF5ZXIgaXMgbm90IHlldCByZWFkeS4gSXQgdGhlIHBsYXllciBpcyBhbHJlYWR5IHJlYWR5LFxuICAgIC8vIHRoZSBhdHRlbXB0IG1pZ2h0IGJlIHVwY29taW5nIG9yIG1pZ2h0IGhhdmUgYWxyZWFkeSBoYXBwZW5lZCwgYnV0IHdlIGRvbid0IGhhdmUgdG8gaGFuZGxlIHRoYXQgYmVjYXVzZSB3ZSBjYW5cbiAgICAvLyBzaW1wbHkgcmVseSBvbiBpc1BsYXlpbmcgYW5kIHRoZSBwbGF5IHN0YXRlIGV2ZW50cy5cbiAgICBjb25zdCBpc0F1dG9wbGF5VXBjb21pbmcgPSAhcGxheWVyLmdldFNvdXJjZSgpICYmIGlzQXV0b3BsYXlFbmFibGVkO1xuXG4gICAgLy8gSGlkZSB0aGUgcGxheSBidXR0b24gd2hlbiB0aGUgcGxheWVyIGlzIGFscmVhZHkgcGxheWluZyBvciBhdXRvcGxheSBpcyB1cGNvbWluZ1xuICAgIGlmIChwbGF5ZXIuaXNQbGF5aW5nKCkgfHwgaXNBdXRvcGxheVVwY29taW5nKSB7XG4gICAgICAvLyBIaWRlIHRoZSBwbGF5IGJ1dHRvbiAoc3dpdGNoIHRvIHBsYXlpbmcgc3RhdGUpXG4gICAgICB0aGlzLm9uKCk7XG4gICAgICAvLyBEaXNhYmxlIHRoZSBhbmltYXRpb24gb2YgdGhlIHBsYXlpbmcgc3RhdGUgc3dpdGNoXG4gICAgICBzdXBwcmVzc1BsYXlCdXR0b25UcmFuc2l0aW9uQW5pbWF0aW9uKCk7XG5cbiAgICAgIC8vIFNob3cgdGhlIHBsYXkgYnV0dG9uIHdpdGhvdXQgYW4gYW5pbWF0aW9uIGlmIGEgcGxheSBhdHRlbXB0IGlzIGJsb2NrZWRcbiAgICAgIHBsYXllci5vbihwbGF5ZXIuZXhwb3J0cy5QbGF5ZXJFdmVudC5XYXJuaW5nLCAoZXZlbnQ6IFdhcm5pbmdFdmVudCkgPT4ge1xuICAgICAgICBpZiAoZXZlbnQuY29kZSA9PT0gcGxheWVyLmV4cG9ydHMuV2FybmluZ0NvZGUuUExBWUJBQ0tfQ09VTERfTk9UX0JFX1NUQVJURUQpIHtcbiAgICAgICAgICBzdXBwcmVzc1BsYXlCdXR0b25UcmFuc2l0aW9uQW5pbWF0aW9uKCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIHByb3RlY3RlZCB0b0RvbUVsZW1lbnQoKTogRE9NIHtcbiAgICBsZXQgYnV0dG9uRWxlbWVudCA9IHN1cGVyLnRvRG9tRWxlbWVudCgpO1xuXG4gICAgLy8gQWRkIGNoaWxkIHRoYXQgY29udGFpbnMgdGhlIHBsYXkgYnV0dG9uIGltYWdlXG4gICAgLy8gU2V0dGluZyB0aGUgaW1hZ2UgZGlyZWN0bHkgb24gdGhlIGJ1dHRvbiBkb2VzIG5vdCB3b3JrIHRvZ2V0aGVyIHdpdGggc2NhbGluZyBhbmltYXRpb25zLCBiZWNhdXNlIHRoZSBidXR0b25cbiAgICAvLyBjYW4gY292ZXIgdGhlIHdob2xlIHZpZGVvIHBsYXllciBhcmUgYW5kIHNjYWxpbmcgd291bGQgZXh0ZW5kIGl0IGJleW9uZC4gQnkgYWRkaW5nIGFuIGlubmVyIGVsZW1lbnQsIGNvbmZpbmVkXG4gICAgLy8gdG8gdGhlIHNpemUgaWYgdGhlIGltYWdlLCBpdCBjYW4gc2NhbGUgaW5zaWRlIHRoZSBwbGF5ZXIgd2l0aG91dCBvdmVyc2hvb3RpbmcuXG4gICAgYnV0dG9uRWxlbWVudC5hcHBlbmQobmV3IERPTSgnZGl2Jywge1xuICAgICAgJ2NsYXNzJzogdGhpcy5wcmVmaXhDc3MoJ2ltYWdlJyksXG4gICAgfSkpO1xuXG4gICAgcmV0dXJuIGJ1dHRvbkVsZW1lbnQ7XG4gIH1cblxuICAvKipcbiAgICogRW5hYmxlcyBvciBkaXNhYmxlcyB0aGUgcGxheSBzdGF0ZSB0cmFuc2l0aW9uIGFuaW1hdGlvbnMgb2YgdGhlIHBsYXkgYnV0dG9uIGltYWdlLiBDYW4gYmUgdXNlZCB0byBzdXBwcmVzc1xuICAgKiBhbmltYXRpb25zLlxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IGVuYWJsZWQgdHJ1ZSB0byBlbmFibGUgdGhlIGFuaW1hdGlvbnMgKGRlZmF1bHQpLCBmYWxzZSB0byBkaXNhYmxlIHRoZW1cbiAgICovXG4gIHByb3RlY3RlZCBzZXRUcmFuc2l0aW9uQW5pbWF0aW9uc0VuYWJsZWQoZW5hYmxlZDogYm9vbGVhbik6IHZvaWQge1xuICAgIGNvbnN0IG5vVHJhbnNpdGlvbkFuaW1hdGlvbnNDbGFzcyA9IHRoaXMucHJlZml4Q3NzKCduby10cmFuc2l0aW9uLWFuaW1hdGlvbnMnKTtcblxuICAgIGlmIChlbmFibGVkKSB7XG4gICAgICB0aGlzLmdldERvbUVsZW1lbnQoKS5yZW1vdmVDbGFzcyhub1RyYW5zaXRpb25BbmltYXRpb25zQ2xhc3MpO1xuICAgIH0gZWxzZSBpZiAoIXRoaXMuZ2V0RG9tRWxlbWVudCgpLmhhc0NsYXNzKG5vVHJhbnNpdGlvbkFuaW1hdGlvbnNDbGFzcykpIHtcbiAgICAgIHRoaXMuZ2V0RG9tRWxlbWVudCgpLmFkZENsYXNzKG5vVHJhbnNpdGlvbkFuaW1hdGlvbnNDbGFzcyk7XG4gICAgfVxuICB9XG59XG4iLCJpbXBvcnQge0J1dHRvbkNvbmZpZywgQnV0dG9ufSBmcm9tICcuL2J1dHRvbic7XG5pbXBvcnQge0RPTX0gZnJvbSAnLi4vZG9tJztcbmltcG9ydCB7VUlJbnN0YW5jZU1hbmFnZXJ9IGZyb20gJy4uL3VpbWFuYWdlcic7XG5pbXBvcnQgeyBQbGF5ZXJBUEkgfSBmcm9tICdiaXRtb3Zpbi1wbGF5ZXInO1xuaW1wb3J0IHsgaTE4biB9IGZyb20gJy4uL2xvY2FsaXphdGlvbi9pMThuJztcblxuLyoqXG4gKiBBIGJ1dHRvbiB0byBwbGF5L3JlcGxheSBhIHZpZGVvLlxuICpcbiAqIEBjYXRlZ29yeSBCdXR0b25zXG4gKi9cbmV4cG9ydCBjbGFzcyBIdWdlUmVwbGF5QnV0dG9uIGV4dGVuZHMgQnV0dG9uPEJ1dHRvbkNvbmZpZz4ge1xuXG4gIGNvbnN0cnVjdG9yKGNvbmZpZzogQnV0dG9uQ29uZmlnID0ge30pIHtcbiAgICBzdXBlcihjb25maWcpO1xuXG4gICAgdGhpcy5jb25maWcgPSB0aGlzLm1lcmdlQ29uZmlnKGNvbmZpZywge1xuICAgICAgY3NzQ2xhc3M6ICd1aS1odWdlcmVwbGF5YnV0dG9uJyxcbiAgICAgIHRleHQ6IGkxOG4uZ2V0TG9jYWxpemVyKCdyZXBsYXknKSxcbiAgICB9LCB0aGlzLmNvbmZpZyk7XG4gIH1cblxuICBjb25maWd1cmUocGxheWVyOiBQbGF5ZXJBUEksIHVpbWFuYWdlcjogVUlJbnN0YW5jZU1hbmFnZXIpOiB2b2lkIHtcbiAgICBzdXBlci5jb25maWd1cmUocGxheWVyLCB1aW1hbmFnZXIpO1xuXG4gICAgdGhpcy5vbkNsaWNrLnN1YnNjcmliZSgoKSA9PiB7XG4gICAgICBwbGF5ZXIucGxheSgndWknKTtcbiAgICB9KTtcbiAgfVxuXG4gIHByb3RlY3RlZCB0b0RvbUVsZW1lbnQoKTogRE9NIHtcbiAgICBsZXQgYnV0dG9uRWxlbWVudCA9IHN1cGVyLnRvRG9tRWxlbWVudCgpO1xuXG4gICAgLy8gQWRkIGNoaWxkIHRoYXQgY29udGFpbnMgdGhlIHBsYXkgYnV0dG9uIGltYWdlXG4gICAgLy8gU2V0dGluZyB0aGUgaW1hZ2UgZGlyZWN0bHkgb24gdGhlIGJ1dHRvbiBkb2VzIG5vdCB3b3JrIHRvZ2V0aGVyIHdpdGggc2NhbGluZyBhbmltYXRpb25zLCBiZWNhdXNlIHRoZSBidXR0b25cbiAgICAvLyBjYW4gY292ZXIgdGhlIHdob2xlIHZpZGVvIHBsYXllciBhcmUgYW5kIHNjYWxpbmcgd291bGQgZXh0ZW5kIGl0IGJleW9uZC4gQnkgYWRkaW5nIGFuIGlubmVyIGVsZW1lbnQsIGNvbmZpbmVkXG4gICAgLy8gdG8gdGhlIHNpemUgaWYgdGhlIGltYWdlLCBpdCBjYW4gc2NhbGUgaW5zaWRlIHRoZSBwbGF5ZXIgd2l0aG91dCBvdmVyc2hvb3RpbmcuXG4gICAgYnV0dG9uRWxlbWVudC5hcHBlbmQobmV3IERPTSgnZGl2Jywge1xuICAgICAgJ2NsYXNzJzogdGhpcy5wcmVmaXhDc3MoJ2ltYWdlJyksXG4gICAgfSkpO1xuXG4gICAgcmV0dXJuIGJ1dHRvbkVsZW1lbnQ7XG4gIH1cbn0iLCJpbXBvcnQge0xpc3RTZWxlY3RvciwgTGlzdFNlbGVjdG9yQ29uZmlnfSBmcm9tICcuL2xpc3RzZWxlY3Rvcic7XG5pbXBvcnQge0RPTX0gZnJvbSAnLi4vZG9tJztcbmltcG9ydCB7IGkxOG4gfSBmcm9tICcuLi9sb2NhbGl6YXRpb24vaTE4bic7XG5cbi8qKlxuICogQGNhdGVnb3J5IENvbXBvbmVudHNcbiAqL1xuZXhwb3J0IGNsYXNzIEl0ZW1TZWxlY3Rpb25MaXN0IGV4dGVuZHMgTGlzdFNlbGVjdG9yPExpc3RTZWxlY3RvckNvbmZpZz4ge1xuXG4gIHByaXZhdGUgc3RhdGljIHJlYWRvbmx5IENMQVNTX1NFTEVDVEVEID0gJ3NlbGVjdGVkJztcblxuICBwcml2YXRlIGxpc3RFbGVtZW50OiBET007XG5cbiAgY29uc3RydWN0b3IoY29uZmlnOiBMaXN0U2VsZWN0b3JDb25maWcgPSB7fSkge1xuICAgIHN1cGVyKGNvbmZpZyk7XG5cbiAgICB0aGlzLmNvbmZpZyA9IHRoaXMubWVyZ2VDb25maWcoY29uZmlnLCB7XG4gICAgICB0YWc6ICd1bCcsXG4gICAgICBjc3NDbGFzczogJ3VpLWl0ZW1zZWxlY3Rpb25saXN0JyxcbiAgICB9LCB0aGlzLmNvbmZpZyk7XG4gIH1cblxuICBwcm90ZWN0ZWQgaXNBY3RpdmUoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuaXRlbXMubGVuZ3RoID4gMTtcbiAgfVxuXG4gIHByb3RlY3RlZCB0b0RvbUVsZW1lbnQoKTogRE9NIHtcbiAgICBsZXQgbGlzdEVsZW1lbnQgPSBuZXcgRE9NKCd1bCcsIHtcbiAgICAgICdpZCc6IHRoaXMuY29uZmlnLmlkLFxuICAgICAgJ2NsYXNzJzogdGhpcy5nZXRDc3NDbGFzc2VzKCksXG4gICAgfSwgdGhpcyk7XG5cbiAgICB0aGlzLmxpc3RFbGVtZW50ID0gbGlzdEVsZW1lbnQ7XG4gICAgdGhpcy51cGRhdGVEb21JdGVtcygpO1xuXG4gICAgcmV0dXJuIGxpc3RFbGVtZW50O1xuICB9XG5cbiAgcHJvdGVjdGVkIHVwZGF0ZURvbUl0ZW1zKHNlbGVjdGVkVmFsdWU6IHN0cmluZyA9IG51bGwpIHtcbiAgICAvLyBEZWxldGUgYWxsIGNoaWxkcmVuXG4gICAgdGhpcy5saXN0RWxlbWVudC5lbXB0eSgpO1xuXG4gICAgbGV0IHNlbGVjdGVkTGlzdEl0ZW06IERPTSA9IG51bGw7XG5cbiAgICBjb25zdCBzZWxlY3RJdGVtID0gKGxpc3RJdGVtOiBET00pID0+IHtcbiAgICAgIGxpc3RJdGVtLmFkZENsYXNzKHRoaXMucHJlZml4Q3NzKEl0ZW1TZWxlY3Rpb25MaXN0LkNMQVNTX1NFTEVDVEVEKSk7XG4gICAgfTtcblxuICAgIGNvbnN0IGRlc2VsZWN0SXRlbSA9IChsaXN0SXRlbTogRE9NKSA9PiB7XG4gICAgICBsaXN0SXRlbS5yZW1vdmVDbGFzcyh0aGlzLnByZWZpeENzcyhJdGVtU2VsZWN0aW9uTGlzdC5DTEFTU19TRUxFQ1RFRCkpO1xuICAgIH07XG5cbiAgICBmb3IgKGxldCBpdGVtIG9mIHRoaXMuaXRlbXMpIHtcbiAgICAgIGxldCBsaXN0SXRlbSA9IG5ldyBET00oJ2xpJywge1xuICAgICAgICAndHlwZSc6ICdsaScsXG4gICAgICAgICdjbGFzcyc6IHRoaXMucHJlZml4Q3NzKCd1aS1zZWxlY3Rpb25saXN0aXRlbScpLFxuICAgICAgfSkuYXBwZW5kKG5ldyBET00oJ2EnLCB7XG4gICAgICB9KS5odG1sKGkxOG4ucGVyZm9ybUxvY2FsaXphdGlvbihpdGVtLmxhYmVsKSkpO1xuXG4gICAgICBpZiAoIXNlbGVjdGVkTGlzdEl0ZW0pIHtcbiAgICAgICAgaWYgKHNlbGVjdGVkVmFsdWUgPT0gbnVsbCkgeyAvLyBJZiB0aGVyZSBpcyBubyBwcmUtc2VsZWN0ZWQgdmFsdWUsIHNlbGVjdCB0aGUgZmlyc3Qgb25lXG4gICAgICAgICAgc2VsZWN0ZWRMaXN0SXRlbSA9IGxpc3RJdGVtO1xuICAgICAgICB9IGVsc2UgaWYgKFN0cmluZyhzZWxlY3RlZFZhbHVlKSA9PT0gaXRlbS5rZXkpIHsgLy8gY29udmVydCBzZWxlY3RlZFZhbHVlIHRvIHN0cmluZyB0byBjYXRjaCAnbnVsbCcvbnVsbCBjYXNlXG4gICAgICAgICAgc2VsZWN0ZWRMaXN0SXRlbSA9IGxpc3RJdGVtO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIEhhbmRsZSBsaXN0IGl0ZW0gc2VsZWN0aW9uc1xuICAgICAgbGlzdEl0ZW0ub24oJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAvLyBEZXNlbGVjdCB0aGUgcHJldmlvdXMgaXRlbSAoaWYgdGhlcmUgd2FzIGEgc2VsZWN0ZWQgaXRlbSlcbiAgICAgICAgaWYgKHNlbGVjdGVkTGlzdEl0ZW0pIHtcbiAgICAgICAgICBkZXNlbGVjdEl0ZW0oc2VsZWN0ZWRMaXN0SXRlbSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBTZWxlY3QgdGhlIGNsaWNrZWQgaXRlbVxuICAgICAgICBzZWxlY3RlZExpc3RJdGVtID0gbGlzdEl0ZW07XG4gICAgICAgIHNlbGVjdEl0ZW0obGlzdEl0ZW0pO1xuXG4gICAgICAgIC8vIEZpcmUgdGhlIGV2ZW50XG4gICAgICAgIHRoaXMub25JdGVtU2VsZWN0ZWRFdmVudChpdGVtLmtleSwgZmFsc2UpO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIFNlbGVjdCBkZWZhdWx0IGl0ZW1cbiAgICAgIGlmIChzZWxlY3RlZExpc3RJdGVtKSB7XG4gICAgICAgIHNlbGVjdEl0ZW0oc2VsZWN0ZWRMaXN0SXRlbSk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMubGlzdEVsZW1lbnQuYXBwZW5kKGxpc3RJdGVtKTtcbiAgICB9XG4gIH1cblxuICBwcm90ZWN0ZWQgb25JdGVtQWRkZWRFdmVudCh2YWx1ZTogc3RyaW5nKSB7XG4gICAgc3VwZXIub25JdGVtQWRkZWRFdmVudCh2YWx1ZSk7XG4gICAgdGhpcy51cGRhdGVEb21JdGVtcyh0aGlzLnNlbGVjdGVkSXRlbSk7XG4gIH1cblxuICBwcm90ZWN0ZWQgb25JdGVtUmVtb3ZlZEV2ZW50KHZhbHVlOiBzdHJpbmcpIHtcbiAgICBzdXBlci5vbkl0ZW1SZW1vdmVkRXZlbnQodmFsdWUpO1xuICAgIHRoaXMudXBkYXRlRG9tSXRlbXModGhpcy5zZWxlY3RlZEl0ZW0pO1xuICB9XG5cbiAgcHJvdGVjdGVkIG9uSXRlbVNlbGVjdGVkRXZlbnQodmFsdWU6IHN0cmluZywgdXBkYXRlRG9tSXRlbXM6IGJvb2xlYW4gPSB0cnVlKSB7XG4gICAgc3VwZXIub25JdGVtU2VsZWN0ZWRFdmVudCh2YWx1ZSk7XG4gICAgaWYgKHVwZGF0ZURvbUl0ZW1zKSB7XG4gICAgICB0aGlzLnVwZGF0ZURvbUl0ZW1zKHZhbHVlKTtcbiAgICB9XG4gIH1cbn1cbiIsImltcG9ydCB7Q29tcG9uZW50Q29uZmlnLCBDb21wb25lbnR9IGZyb20gJy4vY29tcG9uZW50JztcbmltcG9ydCB7RE9NfSBmcm9tICcuLi9kb20nO1xuaW1wb3J0IHtFdmVudERpc3BhdGNoZXIsIEV2ZW50LCBOb0FyZ3N9IGZyb20gJy4uL2V2ZW50ZGlzcGF0Y2hlcic7XG5pbXBvcnQgeyBMb2NhbGl6YWJsZVRleHQsIGkxOG4gfSBmcm9tICcuLi9sb2NhbGl6YXRpb24vaTE4bic7XG5cbi8qKlxuICogQ29uZmlndXJhdGlvbiBpbnRlcmZhY2UgZm9yIGEge0BsaW5rIExhYmVsfSBjb21wb25lbnQuXG4gKlxuICogQGNhdGVnb3J5IENvbmZpZ3NcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBMYWJlbENvbmZpZyBleHRlbmRzIENvbXBvbmVudENvbmZpZyB7XG4gIC8qKlxuICAgKiBUaGUgdGV4dCBhcyBzdHJpbmcgb3IgbG9jYWxpemUgY2FsbGJhY2sgb24gdGhlIGxhYmVsLlxuICAgKi9cbiAgdGV4dD86IExvY2FsaXphYmxlVGV4dDtcblxuICAvKipcbiAgICogV0NBRzIwIHN0YW5kYXJkOiBBc3NvY2lhdGUgbGFiZWwgdG8gZm9ybSBjb250cm9sLlxuICAgKi9cbiAgZm9yPzogc3RyaW5nO1xufVxuXG4vKipcbiAqIEEgc2ltcGxlIHRleHQgbGFiZWwuXG4gKlxuICogRE9NIGV4YW1wbGU6XG4gKiA8Y29kZT5cbiAqICAgICA8c3BhbiBjbGFzcz0ndWktbGFiZWwnPi4uLnNvbWUgdGV4dC4uLjwvc3Bhbj5cbiAqIDwvY29kZT5cbiAqXG4gKiBAY2F0ZWdvcnkgQ29tcG9uZW50c1xuICovXG5leHBvcnQgY2xhc3MgTGFiZWw8Q29uZmlnIGV4dGVuZHMgTGFiZWxDb25maWc+IGV4dGVuZHMgQ29tcG9uZW50PENvbmZpZz4ge1xuXG4gIHByaXZhdGUgdGV4dDogTG9jYWxpemFibGVUZXh0O1xuXG4gIHByaXZhdGUgbGFiZWxFdmVudHMgPSB7XG4gICAgb25DbGljazogbmV3IEV2ZW50RGlzcGF0Y2hlcjxMYWJlbDxDb25maWc+LCBOb0FyZ3M+KCksXG4gICAgb25UZXh0Q2hhbmdlZDogbmV3IEV2ZW50RGlzcGF0Y2hlcjxMYWJlbDxDb25maWc+LCBzdHJpbmc+KCksXG4gIH07XG5cbiAgY29uc3RydWN0b3IoY29uZmlnOiBDb25maWcgPSB7fSBhcyBDb25maWcpIHtcbiAgICBzdXBlcihjb25maWcpO1xuXG4gICAgdGhpcy5jb25maWcgPSB0aGlzLm1lcmdlQ29uZmlnKGNvbmZpZywge1xuICAgICAgY3NzQ2xhc3M6ICd1aS1sYWJlbCcsXG4gICAgfSBhcyBDb25maWcsIHRoaXMuY29uZmlnKTtcbiAgICB0aGlzLnRleHQgPSB0aGlzLmNvbmZpZy50ZXh0O1xuICB9XG5cbiAgcHJvdGVjdGVkIHRvRG9tRWxlbWVudCgpOiBET00ge1xuICAgIGNvbnN0IHRhZ05hbWUgPSB0aGlzLmNvbmZpZy5mb3IgIT0gbnVsbCA/ICdsYWJlbCcgOiAnc3Bhbic7XG5cbiAgICBsZXQgbGFiZWxFbGVtZW50ID0gbmV3IERPTSh0YWdOYW1lLCB7XG4gICAgICAnaWQnOiB0aGlzLmNvbmZpZy5pZCxcbiAgICAgICdmb3InOiB0aGlzLmNvbmZpZy5mb3IsXG4gICAgICAnY2xhc3MnOiB0aGlzLmdldENzc0NsYXNzZXMoKSxcbiAgICB9LCB0aGlzKS5odG1sKGkxOG4ucGVyZm9ybUxvY2FsaXphdGlvbih0aGlzLnRleHQpKTtcblxuICAgIGxhYmVsRWxlbWVudC5vbignY2xpY2snLCAoKSA9PiB7XG4gICAgICB0aGlzLm9uQ2xpY2tFdmVudCgpO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIGxhYmVsRWxlbWVudDtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgdGhlIHRleHQgb24gdGhpcyBsYWJlbC5cbiAgICogQHBhcmFtIHRleHRcbiAgICovXG4gIHNldFRleHQodGV4dDogTG9jYWxpemFibGVUZXh0KSB7XG4gICAgaWYgKHRleHQgPT09IHRoaXMudGV4dCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMudGV4dCA9IHRleHQ7XG4gICAgY29uc3QgbG9jYWxpemVkVGV4dCA9IGkxOG4ucGVyZm9ybUxvY2FsaXphdGlvbih0ZXh0KTtcbiAgICB0aGlzLmdldERvbUVsZW1lbnQoKS5odG1sKGxvY2FsaXplZFRleHQpO1xuICAgIHRoaXMub25UZXh0Q2hhbmdlZEV2ZW50KGxvY2FsaXplZFRleHQpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIHRleHQgb24gdGhpcyBsYWJlbC5cbiAgICogQHJldHVybiB7c3RyaW5nfSBUaGUgdGV4dCBvbiB0aGUgbGFiZWxcbiAgICovXG4gIGdldFRleHQoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gaTE4bi5wZXJmb3JtTG9jYWxpemF0aW9uKHRoaXMudGV4dCk7XG4gIH1cblxuICAvKipcbiAgICogQ2xlYXJzIHRoZSB0ZXh0IG9uIHRoaXMgbGFiZWwuXG4gICAqL1xuICBjbGVhclRleHQoKSB7XG4gICAgdGhpcy5nZXREb21FbGVtZW50KCkuaHRtbCgnJyk7XG4gICAgdGhpcy5vblRleHRDaGFuZ2VkRXZlbnQobnVsbCk7XG4gIH1cblxuICAvKipcbiAgICogVGVzdHMgaWYgdGhlIGxhYmVsIGlzIGVtcHR5IGFuZCBkb2VzIG5vdCBjb250YWluIGFueSB0ZXh0LlxuICAgKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIHRoZSBsYWJlbCBpcyBlbXB0eSwgZWxzZSBmYWxzZVxuICAgKi9cbiAgaXNFbXB0eSgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gIXRoaXMudGV4dDtcbiAgfVxuXG4gIC8qKlxuICAgKiBGaXJlcyB0aGUge0BsaW5rICNvbkNsaWNrfSBldmVudC5cbiAgICogQ2FuIGJlIHVzZWQgYnkgc3ViY2xhc3NlcyB0byBsaXN0ZW4gdG8gdGhpcyBldmVudCB3aXRob3V0IHN1YnNjcmliaW5nIGFuIGV2ZW50IGxpc3RlbmVyIGJ5IG92ZXJ3cml0aW5nIHRoZSBtZXRob2RcbiAgICogYW5kIGNhbGxpbmcgdGhlIHN1cGVyIG1ldGhvZC5cbiAgICovXG4gIHByb3RlY3RlZCBvbkNsaWNrRXZlbnQoKSB7XG4gICAgdGhpcy5sYWJlbEV2ZW50cy5vbkNsaWNrLmRpc3BhdGNoKHRoaXMpO1xuICB9XG5cbiAgLyoqXG4gICAqIEZpcmVzIHRoZSB7QGxpbmsgI29uQ2xpY2t9IGV2ZW50LlxuICAgKiBDYW4gYmUgdXNlZCBieSBzdWJjbGFzc2VzIHRvIGxpc3RlbiB0byB0aGlzIGV2ZW50IHdpdGhvdXQgc3Vic2NyaWJpbmcgYW4gZXZlbnQgbGlzdGVuZXIgYnkgb3ZlcndyaXRpbmcgdGhlIG1ldGhvZFxuICAgKiBhbmQgY2FsbGluZyB0aGUgc3VwZXIgbWV0aG9kLlxuICAgKi9cbiAgcHJvdGVjdGVkIG9uVGV4dENoYW5nZWRFdmVudCh0ZXh0OiBzdHJpbmcpIHtcbiAgICB0aGlzLmxhYmVsRXZlbnRzLm9uVGV4dENoYW5nZWQuZGlzcGF0Y2godGhpcywgdGV4dCk7XG4gIH1cblxuICAvKipcbiAgICogR2V0cyB0aGUgZXZlbnQgdGhhdCBpcyBmaXJlZCB3aGVuIHRoZSBsYWJlbCBpcyBjbGlja2VkLlxuICAgKiBAcmV0dXJucyB7RXZlbnQ8TGFiZWw8TGFiZWxDb25maWc+LCBOb0FyZ3M+fVxuICAgKi9cbiAgZ2V0IG9uQ2xpY2soKTogRXZlbnQ8TGFiZWw8TGFiZWxDb25maWc+LCBOb0FyZ3M+IHtcbiAgICByZXR1cm4gdGhpcy5sYWJlbEV2ZW50cy5vbkNsaWNrLmdldEV2ZW50KCk7XG4gIH1cblxuICAvKipcbiAgICogR2V0cyB0aGUgZXZlbnQgdGhhdCBpcyBmaXJlZCB3aGVuIHRoZSB0ZXh0IG9uIHRoZSBsYWJlbCBpcyBjaGFuZ2VkLlxuICAgKiBAcmV0dXJucyB7RXZlbnQ8TGFiZWw8TGFiZWxDb25maWc+LCBzdHJpbmc+fVxuICAgKi9cbiAgZ2V0IG9uVGV4dENoYW5nZWQoKTogRXZlbnQ8TGFiZWw8TGFiZWxDb25maWc+LCBzdHJpbmc+IHtcbiAgICByZXR1cm4gdGhpcy5sYWJlbEV2ZW50cy5vblRleHRDaGFuZ2VkLmdldEV2ZW50KCk7XG4gIH1cbn1cbiIsImltcG9ydCB7IFRvZ2dsZUJ1dHRvbiwgVG9nZ2xlQnV0dG9uQ29uZmlnIH0gZnJvbSAnLi90b2dnbGVidXR0b24nO1xuaW1wb3J0IHsgTGlzdEl0ZW0sIExpc3RTZWxlY3RvciwgTGlzdFNlbGVjdG9yQ29uZmlnIH0gZnJvbSAnLi9saXN0c2VsZWN0b3InO1xuaW1wb3J0IHtET019IGZyb20gJy4uL2RvbSc7XG5pbXBvcnQgeyBQbGF5ZXJBUEkgfSBmcm9tICdiaXRtb3Zpbi1wbGF5ZXInO1xuaW1wb3J0IHsgVUlJbnN0YW5jZU1hbmFnZXIgfSBmcm9tICcuLi91aW1hbmFnZXInO1xuaW1wb3J0IHsgQXJyYXlVdGlscyB9IGZyb20gJy4uL2FycmF5dXRpbHMnO1xuXG4vKipcbiAqIEEgZWxlbWVudCB0byBzZWxlY3QgYSBzaW5nbGUgaXRlbSBvdXQgb2YgYSBsaXN0IG9mIGF2YWlsYWJsZSBpdGVtcy5cbiAqXG4gKiBET00gZXhhbXBsZTpcbiAqIDxjb2RlPlxuICogICA8ZGl2IGNsYXNzPSd1aS1saXN0Ym94Jz5cbiAqICAgICA8YnV0dG9uIGNsYXNzPSd1aS1saXN0Ym94LWJ1dHRvbic+bGFiZWw8L2J1dHRvbj5cbiAqICAgICAuLi5cbiAqICAgPC9kaXZcbiAqIDwvY29kZT5cbiAqXG4gKiBAY2F0ZWdvcnkgQ29tcG9uZW50c1xuICovXG4vLyBUT0RPOiBjaGFuZ2UgTGlzdFNlbGVjdG9yIHRvIGV4dGVuZHMgY29udGFpbmVyIGluIHY0IHRvIGltcHJvdmUgdXNhZ2Ugb2YgTGlzdEJveC5cbi8vICAgICAgIEN1cnJlbnRseSB3ZSBhcmUgY3JlYXRpbmcgdGhlIGRvbSBlbGVtZW50IG9mIHRoZSBsaXN0IGJveCB3aXRoIGNoaWxkIGVsZW1lbnRzIG1hbnVhbGx5IGhlcmUuXG4vLyAgICAgICBCdXQgdGhpcyBmdW5jdGlvbmFsaXR5IGlzIGFscmVhZHkgY292ZXJlZCB3aXRoaW4gdGhlIENvbnRhaW5lciBjb21wb25lbnQuXG5leHBvcnQgY2xhc3MgTGlzdEJveCBleHRlbmRzIExpc3RTZWxlY3RvcjxMaXN0U2VsZWN0b3JDb25maWc+IHtcbiAgcHJpdmF0ZSBsaXN0Qm94RWxlbWVudDogRE9NO1xuICBwcml2YXRlIGNvbXBvbmVudHM6IExpc3RCb3hJdGVtQnV0dG9uW10gPSBbXTtcblxuICBjb25zdHJ1Y3Rvcihjb25maWc6IExpc3RTZWxlY3RvckNvbmZpZyA9IHt9KSB7XG4gICAgc3VwZXIoY29uZmlnKTtcblxuICAgIHRoaXMuY29uZmlnID0gdGhpcy5tZXJnZUNvbmZpZyhjb25maWcsIHtcbiAgICAgIGNzc0NsYXNzOiAndWktbGlzdGJveCcsXG4gICAgfSBhcyBMaXN0U2VsZWN0b3JDb25maWcsIHRoaXMuY29uZmlnKTtcbiAgfVxuXG4gIHB1YmxpYyBjb25maWd1cmUocGxheWVyOiBQbGF5ZXJBUEksIHVpbWFuYWdlcjogVUlJbnN0YW5jZU1hbmFnZXIpOiB2b2lkIHtcbiAgICAvLyBTdWJzY3JpYmUgYmVmb3JlIHN1cGVyIGNhbGwgdG8gcmVjZWl2ZSBpbml0aWFsIGV2ZW50c1xuICAgIHRoaXMub25JdGVtQWRkZWQuc3Vic2NyaWJlKHRoaXMuYWRkTGlzdEJveERvbUl0ZW0pO1xuICAgIHRoaXMub25JdGVtUmVtb3ZlZC5zdWJzY3JpYmUodGhpcy5yZW1vdmVMaXN0Qm94RG9tSXRlbSk7XG4gICAgdGhpcy5vbkl0ZW1TZWxlY3RlZC5zdWJzY3JpYmUodGhpcy5yZWZyZXNoU2VsZWN0ZWRJdGVtKTtcblxuICAgIHN1cGVyLmNvbmZpZ3VyZShwbGF5ZXIsIHVpbWFuYWdlcik7XG4gIH1cblxuICBwcm90ZWN0ZWQgdG9Eb21FbGVtZW50KCk6IERPTSB7XG4gICAgbGV0IGxpc3RCb3hFbGVtZW50ID0gbmV3IERPTSgnZGl2Jywge1xuICAgICAgJ2lkJzogdGhpcy5jb25maWcuaWQsXG4gICAgICAnY2xhc3MnOiB0aGlzLmdldENzc0NsYXNzZXMoKSxcbiAgICB9LCB0aGlzKTtcblxuICAgIHRoaXMubGlzdEJveEVsZW1lbnQgPSBsaXN0Qm94RWxlbWVudDtcbiAgICB0aGlzLmNyZWF0ZUxpc3RCb3hEb21JdGVtcygpO1xuICAgIHRoaXMucmVmcmVzaFNlbGVjdGVkSXRlbSgpO1xuXG4gICAgcmV0dXJuIGxpc3RCb3hFbGVtZW50O1xuICB9XG5cbiAgcHJpdmF0ZSBjcmVhdGVMaXN0Qm94RG9tSXRlbXMoKSB7XG4gICAgLy8gRGVsZXRlIGFsbCBjaGlsZHJlblxuICAgIHRoaXMubGlzdEJveEVsZW1lbnQuZW1wdHkoKTtcbiAgICB0aGlzLmNvbXBvbmVudHMgPSBbXTtcblxuICAgIC8vIEFkZCB1cGRhdGVkIGNoaWxkcmVuXG4gICAgZm9yIChsZXQgaXRlbSBvZiB0aGlzLml0ZW1zKSB7XG4gICAgICB0aGlzLmFkZExpc3RCb3hEb21JdGVtKHRoaXMsIGl0ZW0ua2V5KTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHJlbW92ZUxpc3RCb3hEb21JdGVtID0gKF86IExpc3RCb3gsIGtleTogc3RyaW5nKSA9PiB7XG4gICAgY29uc3QgY29tcG9uZW50ID0gdGhpcy5nZXRDb21wb25lbnRGb3JLZXkoa2V5KTtcbiAgICBpZiAoY29tcG9uZW50KSB7XG4gICAgICBjb21wb25lbnQuZ2V0RG9tRWxlbWVudCgpLnJlbW92ZSgpO1xuICAgICAgQXJyYXlVdGlscy5yZW1vdmUodGhpcy5jb21wb25lbnRzLCBjb21wb25lbnQpO1xuICAgIH1cbiAgfTtcblxuICBwcml2YXRlIGFkZExpc3RCb3hEb21JdGVtID0gKF86IExpc3RCb3gsIGtleTogc3RyaW5nKSA9PiB7XG4gICAgY29uc3QgY29tcG9uZW50ID0gdGhpcy5nZXRDb21wb25lbnRGb3JLZXkoa2V5KTtcbiAgICBjb25zdCBuZXdJdGVtID0gdGhpcy5nZXRJdGVtRm9yS2V5KGtleSk7XG4gICAgaWYgKGNvbXBvbmVudCkge1xuICAgICAgLy8gVXBkYXRlIGV4aXN0aW5nIGNvbXBvbmVudFxuICAgICAgY29tcG9uZW50LnNldFRleHQobmV3SXRlbS5sYWJlbCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IGxpc3RCb3hJdGVtQnV0dG9uID0gdGhpcy5idWlsZExpc3RCb3hJdGVtQnV0dG9uKG5ld0l0ZW0pO1xuXG4gICAgICBsaXN0Qm94SXRlbUJ1dHRvbi5vbkNsaWNrLnN1YnNjcmliZSgoKSA9PiB7XG4gICAgICAgIHRoaXMuaGFuZGxlU2VsZWN0aW9uQ2hhbmdlKGxpc3RCb3hJdGVtQnV0dG9uKTtcbiAgICAgIH0pO1xuXG4gICAgICB0aGlzLmNvbXBvbmVudHMucHVzaChsaXN0Qm94SXRlbUJ1dHRvbik7XG4gICAgICB0aGlzLmxpc3RCb3hFbGVtZW50LmFwcGVuZChsaXN0Qm94SXRlbUJ1dHRvbi5nZXREb21FbGVtZW50KCkpO1xuICAgIH1cbiAgfTtcblxuICBwcml2YXRlIHJlZnJlc2hTZWxlY3RlZEl0ZW0gPSAoKSA9PiB7XG4gICAgLy8gVGhpcyBnZXRzIGNhbGxlZCB0d2ljZSBiZWNhdXNlIHRoZSBmaXJzdCB0aW1lIGlzIHRyaWdnZXJlZCB3aGVuIHRoZSB1c2VyIGNsaWNrcyBvbiB0aGUgTGlzdEJveEl0ZW1CdXR0b24uIEFuZCB0aGVcbiAgICAvLyBzZWNvbmQgY2FsbCBjb21lcyBmcm9tIHRoZSBwbGF5ZXIgZXZlbnQgd2hlbiB0aGUgYWN0dWFsIGl0ZW0gaXMgc2VsZWN0ZWQgKFN1YnRpdGxlIC8gQXVkaW9UcmFjayBpbiB0aGlzIGNhc2UpLlxuICAgIC8vIEFzIHRoaXMgaXMgYSBnZW5lcmljIGNvbXBvbmVudCB3ZSBjYW4ndCBwcm9oaWJpdCB0aGlzIGJlaGF2aW91ci4gV2UgbmVlZCB0byB0cmVhdCB0aGlzIGNvbXBvbmVudCBhcyBpdCBhY3RzXG4gICAgLy8gaW5kZXBlbmRlbnQgZnJvbSBQbGF5ZXJFdmVudHMgYW5kIG9uIHRoZSBvdGhlciBoYW5kIHdlIG5lZWQgdG8gcmVhY3QgdG8gUGxheWVyRXZlbnRzIGFzIGl0IGNvdWxkIGJlIHRyaWdnZXJlZFxuICAgIC8vIGZyb20gb3V0c2lkZS5cblxuICAgIGZvciAobGV0IGl0ZW0gb2YgdGhpcy5pdGVtcykge1xuICAgICAgY29uc3QgY29tcG9uZW50ID0gdGhpcy5nZXRDb21wb25lbnRGb3JLZXkoaXRlbS5rZXkpO1xuICAgICAgaWYgKGNvbXBvbmVudCkge1xuICAgICAgICBTdHJpbmcoY29tcG9uZW50LmtleSkgPT09IFN0cmluZyh0aGlzLnNlbGVjdGVkSXRlbSkgPyBjb21wb25lbnQub24oKSA6IGNvbXBvbmVudC5vZmYoKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgcHJpdmF0ZSBidWlsZExpc3RCb3hJdGVtQnV0dG9uKGxpc3RJdGVtOiBMaXN0SXRlbSk6IExpc3RCb3hJdGVtQnV0dG9uIHtcbiAgICByZXR1cm4gbmV3IExpc3RCb3hJdGVtQnV0dG9uKHtcbiAgICAgIGtleTogbGlzdEl0ZW0ua2V5LFxuICAgICAgdGV4dDogbGlzdEl0ZW0ubGFiZWwsXG4gICAgICBhcmlhTGFiZWw6IGxpc3RJdGVtLmFyaWFMYWJlbCxcbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgZ2V0Q29tcG9uZW50Rm9yS2V5KGtleTogc3RyaW5nKTogTGlzdEJveEl0ZW1CdXR0b24ge1xuICAgIHJldHVybiB0aGlzLmNvbXBvbmVudHMuZmluZCgoYykgPT4ga2V5ID09PSBjLmtleSk7XG4gIH1cblxuICBwcml2YXRlIGhhbmRsZVNlbGVjdGlvbkNoYW5nZSA9IChzZW5kZXI6IExpc3RCb3hJdGVtQnV0dG9uKSA9PiB7XG4gICAgdGhpcy5vbkl0ZW1TZWxlY3RlZEV2ZW50KHNlbmRlci5rZXkpO1xuICB9O1xufVxuXG5pbnRlcmZhY2UgTGlzdEJveEl0ZW1CdXR0b25Db25maWcgZXh0ZW5kcyBUb2dnbGVCdXR0b25Db25maWcge1xuICAvKipcbiAgICoga2V5IHRvIGlkZW50aWZ5IHNlbGVjdGVkIGl0ZW0uIFNpbWlsYXIgdG8gdGhlIHZhbHVlIGF0dHJpYnV0ZSBvZiBhbiBzZWxlY3Qgb3B0aW9uLlxuICAgKi9cbiAga2V5OiBzdHJpbmc7XG59XG5cbmNsYXNzIExpc3RCb3hJdGVtQnV0dG9uIGV4dGVuZHMgVG9nZ2xlQnV0dG9uPExpc3RCb3hJdGVtQnV0dG9uQ29uZmlnPiB7XG5cbiAgY29uc3RydWN0b3IoY29uZmlnOiBMaXN0Qm94SXRlbUJ1dHRvbkNvbmZpZykge1xuICAgIHN1cGVyKGNvbmZpZyk7XG5cbiAgICB0aGlzLmNvbmZpZyA9IHRoaXMubWVyZ2VDb25maWcoY29uZmlnLCB7XG4gICAgICBjc3NDbGFzczogJ3VpLWxpc3Rib3gtYnV0dG9uJyxcbiAgICAgIG9uQ2xhc3M6ICdzZWxlY3RlZCcsXG4gICAgICBvZmZDbGFzczogJycsXG4gICAgfSBhcyBMaXN0Qm94SXRlbUJ1dHRvbkNvbmZpZywgdGhpcy5jb25maWcpO1xuICB9XG5cbiAgZ2V0IGtleSgpOiBzdHJpbmcge1xuICAgIHJldHVybiAodGhpcy5jb25maWcgYXMgTGlzdEJveEl0ZW1CdXR0b25Db25maWcpLmtleTtcbiAgfVxufVxuIiwiaW1wb3J0IHtDb21wb25lbnQsIENvbXBvbmVudENvbmZpZ30gZnJvbSAnLi9jb21wb25lbnQnO1xuaW1wb3J0IHtFdmVudERpc3BhdGNoZXIsIEV2ZW50fSBmcm9tICcuLi9ldmVudGRpc3BhdGNoZXInO1xuaW1wb3J0IHtBcnJheVV0aWxzfSBmcm9tICcuLi9hcnJheXV0aWxzJztcbmltcG9ydCB7IExvY2FsaXphYmxlVGV4dCwgaTE4biB9IGZyb20gJy4uL2xvY2FsaXphdGlvbi9pMThuJztcblxuLyoqXG4gKiBBIG1hcCBvZiBpdGVtcyAoa2V5L3ZhbHVlIC0+IGxhYmVsfSBmb3IgYSB7QGxpbmsgTGlzdFNlbGVjdG9yfSBpbiBhIHtAbGluayBMaXN0U2VsZWN0b3JDb25maWd9LlxuICovXG5leHBvcnQgaW50ZXJmYWNlIExpc3RJdGVtIHtcbiAga2V5OiBzdHJpbmc7XG4gIGxhYmVsOiBMb2NhbGl6YWJsZVRleHQ7XG4gIHNvcnRlZEluc2VydD86IGJvb2xlYW47XG4gIGFyaWFMYWJlbD86IHN0cmluZztcbn1cblxuLyoqXG4gKiBGaWx0ZXIgZnVuY3Rpb24gdGhhdCBjYW4gYmUgdXNlZCB0byBmaWx0ZXIgb3V0IGxpc3QgaXRlbXMgYWRkZWQgdGhyb3VnaCB7QGxpbmsgTGlzdFNlbGVjdG9yLmFkZEl0ZW19LlxuICpcbiAqIFRoaXMgaXMgaW50ZW5kZWQgdG8gYmUgdXNlZCBpbiBjb25qdW5jdGlvbiB3aXRoIHN1YmNsYXNzZXMgdGhhdCBwb3B1bGF0ZSB0aGVtc2VsdmVzIGF1dG9tYXRpY2FsbHlcbiAqIHZpYSB0aGUgcGxheWVyIEFQSSwgZS5nLiB7QGxpbmsgU3VidGl0bGVTZWxlY3RCb3h9LlxuICovXG5leHBvcnQgaW50ZXJmYWNlIExpc3RJdGVtRmlsdGVyIHtcbiAgLyoqXG4gICAqIFRha2VzIGEgbGlzdCBpdGVtIGFuZCBkZWNpZGVzIHdoZXRoZXIgaXQgc2hvdWxkIHBhc3Mgb3IgYmUgZGlzY2FyZGVkLlxuICAgKiBAcGFyYW0ge0xpc3RJdGVtfSBsaXN0SXRlbSB0aGUgaXRlbSB0byBhcHBseSB0aGUgZmlsdGVyIHRvXG4gICAqIEByZXR1cm5zIHtib29sZWFufSB0cnVlIHRvIGxldCB0aGUgaXRlbSBwYXNzIHRocm91Z2ggdGhlIGZpbHRlciwgZmFsc2UgdG8gZGlzY2FyZCB0aGUgaXRlbVxuICAgKi9cbiAgKGxpc3RJdGVtOiBMaXN0SXRlbSk6IGJvb2xlYW47XG59XG5cbi8qKlxuICogVHJhbnNsYXRvciBmdW5jdGlvbiB0byB0cmFuc2xhdGUgbGFiZWxzIG9mIGxpc3QgaXRlbXMgYWRkZWQgdGhyb3VnaCB7QGxpbmsgTGlzdFNlbGVjdG9yLmFkZEl0ZW19LlxuICpcbiAqIFRoaXMgaXMgaW50ZW5kZWQgdG8gYmUgdXNlZCBpbiBjb25qdW5jdGlvbiB3aXRoIHN1YmNsYXNzZXMgdGhhdCBwb3B1bGF0ZSB0aGVtc2VsdmVzIGF1dG9tYXRpY2FsbHlcbiAqIHZpYSB0aGUgcGxheWVyIEFQSSwgZS5nLiB7QGxpbmsgU3VidGl0bGVTZWxlY3RCb3h9LlxuICovXG5leHBvcnQgaW50ZXJmYWNlIExpc3RJdGVtTGFiZWxUcmFuc2xhdG9yIHtcbiAgLyoqXG4gICAqIFRha2VzIGEgbGlzdCBpdGVtLCBvcHRpb25hbGx5IGNoYW5nZXMgdGhlIGxhYmVsLCBhbmQgcmV0dXJucyB0aGUgbmV3IGxhYmVsLlxuICAgKiBAcGFyYW0ge0xpc3RJdGVtfSBsaXN0SXRlbSB0aGUgaXRlbSB0byB0cmFuc2xhdGVcbiAgICogQHJldHVybnMge3N0cmluZ30gdGhlIHRyYW5zbGF0ZWQgb3Igb3JpZ2luYWwgbGFiZWxcbiAgICovXG4gIChsaXN0SXRlbTogTGlzdEl0ZW0pOiBzdHJpbmc7XG59XG5cbi8qKlxuICogQ29uZmlndXJhdGlvbiBpbnRlcmZhY2UgZm9yIGEge0BsaW5rIExpc3RTZWxlY3Rvcn0uXG4gKlxuICogQGNhdGVnb3J5IENvbmZpZ3NcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBMaXN0U2VsZWN0b3JDb25maWcgZXh0ZW5kcyBDb21wb25lbnRDb25maWcge1xuICBpdGVtcz86IExpc3RJdGVtW107XG4gIGZpbHRlcj86IExpc3RJdGVtRmlsdGVyO1xuICB0cmFuc2xhdG9yPzogTGlzdEl0ZW1MYWJlbFRyYW5zbGF0b3I7XG59XG5cbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBMaXN0U2VsZWN0b3I8Q29uZmlnIGV4dGVuZHMgTGlzdFNlbGVjdG9yQ29uZmlnPiBleHRlbmRzIENvbXBvbmVudDxMaXN0U2VsZWN0b3JDb25maWc+IHtcblxuICBwcm90ZWN0ZWQgaXRlbXM6IExpc3RJdGVtW107XG4gIHByb3RlY3RlZCBzZWxlY3RlZEl0ZW06IHN0cmluZztcblxuICBwcml2YXRlIGxpc3RTZWxlY3RvckV2ZW50cyA9IHtcbiAgICBvbkl0ZW1BZGRlZDogbmV3IEV2ZW50RGlzcGF0Y2hlcjxMaXN0U2VsZWN0b3I8Q29uZmlnPiwgc3RyaW5nPigpLFxuICAgIG9uSXRlbVJlbW92ZWQ6IG5ldyBFdmVudERpc3BhdGNoZXI8TGlzdFNlbGVjdG9yPENvbmZpZz4sIHN0cmluZz4oKSxcbiAgICBvbkl0ZW1TZWxlY3RlZDogbmV3IEV2ZW50RGlzcGF0Y2hlcjxMaXN0U2VsZWN0b3I8Q29uZmlnPiwgc3RyaW5nPigpLFxuICB9O1xuXG4gIGNvbnN0cnVjdG9yKGNvbmZpZzogTGlzdFNlbGVjdG9yQ29uZmlnID0ge30pIHtcbiAgICBzdXBlcihjb25maWcpO1xuXG4gICAgdGhpcy5jb25maWcgPSB0aGlzLm1lcmdlQ29uZmlnKGNvbmZpZywge1xuICAgICAgaXRlbXM6IFtdLFxuICAgICAgY3NzQ2xhc3M6ICd1aS1saXN0c2VsZWN0b3InLFxuICAgIH0sIHRoaXMuY29uZmlnKTtcblxuICAgIHRoaXMuaXRlbXMgPSB0aGlzLmNvbmZpZy5pdGVtcztcbiAgfVxuXG4gIHByaXZhdGUgZ2V0SXRlbUluZGV4KGtleTogc3RyaW5nKTogbnVtYmVyIHtcbiAgICBmb3IgKGxldCBpbmRleCBpbiB0aGlzLml0ZW1zKSB7XG4gICAgICBpZiAoa2V5ID09PSB0aGlzLml0ZW1zW2luZGV4XS5rZXkpIHtcbiAgICAgICAgcmV0dXJuIHBhcnNlSW50KGluZGV4KTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIC0xO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYWxsIGN1cnJlbnQgaXRlbXMgb2YgdGhpcyBzZWxlY3Rvci5cbiAgICogKiBAcmV0dXJucyB7TGlzdEl0ZW1bXX1cbiAgICovXG4gIGdldEl0ZW1zKCk6IExpc3RJdGVtW10ge1xuICAgIHJldHVybiB0aGlzLml0ZW1zO1xuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrcyBpZiB0aGUgc3BlY2lmaWVkIGl0ZW0gaXMgcGFydCBvZiB0aGlzIHNlbGVjdG9yLlxuICAgKiBAcGFyYW0ga2V5IHRoZSBrZXkgb2YgdGhlIGl0ZW0gdG8gY2hlY2tcbiAgICogQHJldHVybnMge2Jvb2xlYW59IHRydWUgaWYgdGhlIGl0ZW0gaXMgcGFydCBvZiB0aGlzIHNlbGVjdG9yLCBlbHNlIGZhbHNlXG4gICAqL1xuICBoYXNJdGVtKGtleTogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0SXRlbUluZGV4KGtleSkgPiAtMTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGRzIGFuIGl0ZW0gdG8gdGhpcyBzZWxlY3RvciBieSBkb2luZyBhIHNvcnRlZCBpbnNlcnQgb3IgYnkgYXBwZW5kaW5nIHRoZSBlbGVtZW50IHRvIHRoZSBlbmQgb2YgdGhlIGxpc3Qgb2YgaXRlbXMuXG4gICAqIElmIGFuIGl0ZW0gd2l0aCB0aGUgc3BlY2lmaWVkIGtleSBhbHJlYWR5IGV4aXN0cywgaXQgaXMgcmVwbGFjZWQuXG4gICAqIEBwYXJhbSBrZXkgdGhlIGtleSBvZiB0aGUgaXRlbSB0byBhZGRcbiAgICogQHBhcmFtIGxhYmVsIHRoZSAoaHVtYW4tcmVhZGFibGUpIGxhYmVsIG9mIHRoZSBpdGVtIHRvIGFkZFxuICAgKiBAcGFyYW0gc29ydGVkSW5zZXJ0IHdoZXRoZXIgdGhlIGl0ZW0gc2hvdWxkIGJlIGFkZGVkIHJlc3BlY3RpbmcgdGhlIG9yZGVyIG9mIGtleXNcbiAgICogQHBhcmFtIGFyaWFMYWJlbCBjdXN0b20gYXJpYSBsYWJlbCBmb3IgdGhlIGxpc3RJdGVtXG4gICAqL1xuICBhZGRJdGVtKGtleTogc3RyaW5nLCBsYWJlbDogTG9jYWxpemFibGVUZXh0LCBzb3J0ZWRJbnNlcnQgPSBmYWxzZSwgYXJpYUxhYmVsID0gJycpIHtcbiAgICBjb25zdCBsaXN0SXRlbSA9IHsga2V5OiBrZXksIGxhYmVsOiBpMThuLnBlcmZvcm1Mb2NhbGl6YXRpb24obGFiZWwpLCAuLi4oYXJpYUxhYmVsICYmIHsgYXJpYUxhYmVsIH0pfTtcblxuICAgIC8vIEFwcGx5IGZpbHRlciBmdW5jdGlvblxuICAgIGlmICh0aGlzLmNvbmZpZy5maWx0ZXIgJiYgIXRoaXMuY29uZmlnLmZpbHRlcihsaXN0SXRlbSkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBBcHBseSB0cmFuc2xhdG9yIGZ1bmN0aW9uXG4gICAgaWYgKHRoaXMuY29uZmlnLnRyYW5zbGF0b3IpIHtcbiAgICAgIGxpc3RJdGVtLmxhYmVsID0gdGhpcy5jb25maWcudHJhbnNsYXRvcihsaXN0SXRlbSk7XG4gICAgfVxuXG4gICAgLy8gVHJ5IHRvIHJlbW92ZSBrZXkgZmlyc3QgdG8gZ2V0IG92ZXJ3cml0ZSBiZWhhdmlvciBhbmQgYXZvaWQgZHVwbGljYXRlIGtleXNcbiAgICB0aGlzLnJlbW92ZUl0ZW0oa2V5KTsgLy8gVGhpcyB3aWxsIHRyaWdnZXIgYW4gSXRlbVJlbW92ZWQgYW5kIGFuIEl0ZW1BZGRlZCBldmVudFxuXG4gICAgLy8gQWRkIHRoZSBpdGVtIHRvIHRoZSBsaXN0XG4gICAgaWYgKHNvcnRlZEluc2VydCkge1xuICAgICAgY29uc3QgaW5kZXggPSB0aGlzLml0ZW1zLmZpbmRJbmRleChlbnRyeSA9PiBlbnRyeS5rZXkgPiBrZXkpO1xuICAgICAgaWYgKGluZGV4IDwgMCkge1xuICAgICAgICB0aGlzLml0ZW1zLnB1c2gobGlzdEl0ZW0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5pdGVtcy5zcGxpY2UoaW5kZXgsIDAsIGxpc3RJdGVtKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5pdGVtcy5wdXNoKGxpc3RJdGVtKTtcbiAgICB9XG4gICAgdGhpcy5vbkl0ZW1BZGRlZEV2ZW50KGtleSk7XG4gIH1cblxuICAvKipcbiAgICogUmVtb3ZlcyBhbiBpdGVtIGZyb20gdGhpcyBzZWxlY3Rvci5cbiAgICogQHBhcmFtIGtleSB0aGUga2V5IG9mIHRoZSBpdGVtIHRvIHJlbW92ZVxuICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gdHJ1ZSBpZiByZW1vdmFsIHdhcyBzdWNjZXNzZnVsLCBmYWxzZSBpZiB0aGUgaXRlbSBpcyBub3QgcGFydCBvZiB0aGlzIHNlbGVjdG9yXG4gICAqL1xuICByZW1vdmVJdGVtKGtleTogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgbGV0IGluZGV4ID0gdGhpcy5nZXRJdGVtSW5kZXgoa2V5KTtcbiAgICBpZiAoaW5kZXggPiAtMSkge1xuICAgICAgQXJyYXlVdGlscy5yZW1vdmUodGhpcy5pdGVtcywgdGhpcy5pdGVtc1tpbmRleF0pO1xuICAgICAgdGhpcy5vbkl0ZW1SZW1vdmVkRXZlbnQoa2V5KTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZWxlY3RzIGFuIGl0ZW0gZnJvbSB0aGUgaXRlbXMgaW4gdGhpcyBzZWxlY3Rvci5cbiAgICogQHBhcmFtIGtleSB0aGUga2V5IG9mIHRoZSBpdGVtIHRvIHNlbGVjdFxuICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gdHJ1ZSBpcyB0aGUgc2VsZWN0aW9uIHdhcyBzdWNjZXNzZnVsLCBmYWxzZSBpZiB0aGUgc2VsZWN0ZWQgaXRlbSBpcyBub3QgcGFydCBvZiB0aGUgc2VsZWN0b3JcbiAgICovXG4gIHNlbGVjdEl0ZW0oa2V5OiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICBpZiAoa2V5ID09PSB0aGlzLnNlbGVjdGVkSXRlbSkge1xuICAgICAgLy8gaXRlbUNvbmZpZyBpcyBhbHJlYWR5IHNlbGVjdGVkLCBzdXBwcmVzcyBhbnkgZnVydGhlciBhY3Rpb25cbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIGxldCBpbmRleCA9IHRoaXMuZ2V0SXRlbUluZGV4KGtleSk7XG5cbiAgICBpZiAoaW5kZXggPiAtMSkge1xuICAgICAgdGhpcy5zZWxlY3RlZEl0ZW0gPSBrZXk7XG4gICAgICB0aGlzLm9uSXRlbVNlbGVjdGVkRXZlbnQoa2V5KTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBrZXkgb2YgdGhlIHNlbGVjdGVkIGl0ZW0uXG4gICAqIEByZXR1cm5zIHtzdHJpbmd9IHRoZSBrZXkgb2YgdGhlIHNlbGVjdGVkIGl0ZW0gb3IgbnVsbCBpZiBubyBpdGVtIGlzIHNlbGVjdGVkXG4gICAqL1xuICBnZXRTZWxlY3RlZEl0ZW0oKTogc3RyaW5nIHwgbnVsbCB7XG4gICAgcmV0dXJuIHRoaXMuc2VsZWN0ZWRJdGVtO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIGl0ZW1zIGZvciB0aGUgZ2l2ZW4ga2V5IG9yIHVuZGVmaW5lZCBpZiBubyBpdGVtIHdpdGggdGhlIGdpdmVuIGtleSBleGlzdHMuXG4gICAqIEBwYXJhbSBrZXkgdGhlIGtleSBvZiB0aGUgaXRlbSB0byByZXR1cm5cbiAgICogQHJldHVybnMge0xpc3RJdGVtfSB0aGUgaXRlbSB3aXRoIHRoZSByZXF1ZXN0ZWQga2V5LiBVbmRlZmluZWQgaWYgbm8gaXRlbSB3aXRoIHRoZSBnaXZlbiBrZXkgZXhpc3RzLlxuICAgKi9cbiAgZ2V0SXRlbUZvcktleShrZXk6IHN0cmluZyk6IExpc3RJdGVtIHtcbiAgICByZXR1cm4gdGhpcy5pdGVtcy5maW5kKChpdGVtKSA9PiBpdGVtLmtleSA9PT0ga2V5KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTeW5jaHJvbml6ZSB0aGUgY3VycmVudCBpdGVtcyBvZiB0aGlzIHNlbGVjdG9yIHdpdGggdGhlIGdpdmVuIG9uZXMuIFRoaXMgd2lsbCByZW1vdmUgYW5kIGFkZCBpdGVtcyBzZWxlY3RpdmVseS5cbiAgICogRm9yIGVhY2ggcmVtb3ZlZCBpdGVtIHRoZSBJdGVtUmVtb3ZlZEV2ZW50IGFuZCBmb3IgZWFjaCBhZGRlZCBpdGVtIHRoZSBJdGVtQWRkZWRFdmVudCB3aWxsIGJlIHRyaWdnZXJlZC4gRmF2b3VyXG4gICAqIHRoaXMgbWV0aG9kIG92ZXIgdXNpbmcgY2xlYXJJdGVtcyBhbmQgYWRkaW5nIGFsbCBpdGVtcyBhZ2FpbiBhZnRlcndhcmRzLlxuICAgKiBAcGFyYW0gbmV3SXRlbXNcbiAgICovXG4gIHN5bmNocm9uaXplSXRlbXMobmV3SXRlbXM6IExpc3RJdGVtW10pOiB2b2lkIHtcbiAgICBuZXdJdGVtc1xuICAgICAgLmZpbHRlcigoaXRlbSkgPT4gIXRoaXMuaGFzSXRlbShpdGVtLmtleSkpXG4gICAgICAuZm9yRWFjaCgoaXRlbSkgPT4gdGhpcy5hZGRJdGVtKGl0ZW0ua2V5LCBpdGVtLmxhYmVsLCBpdGVtLnNvcnRlZEluc2VydCwgaXRlbS5hcmlhTGFiZWwpKTtcblxuICAgIHRoaXMuaXRlbXNcbiAgICAgIC5maWx0ZXIoKGl0ZW0pID0+IG5ld0l0ZW1zLmZpbHRlcigoaSkgPT4gaS5rZXkgPT09IGl0ZW0ua2V5KS5sZW5ndGggPT09IDApXG4gICAgICAuZm9yRWFjaCgoaXRlbSkgPT4gdGhpcy5yZW1vdmVJdGVtKGl0ZW0ua2V5KSk7XG4gIH1cblxuICAvKipcbiAgICogUmVtb3ZlcyBhbGwgaXRlbXMgZnJvbSB0aGlzIHNlbGVjdG9yLlxuICAgKi9cbiAgY2xlYXJJdGVtcygpIHtcbiAgICAvLyBsb2NhbCBjb3B5IGZvciBpdGVyYXRpb24gYWZ0ZXIgY2xlYXJcbiAgICBsZXQgaXRlbXMgPSB0aGlzLml0ZW1zO1xuICAgIC8vIGNsZWFyIGl0ZW1zXG4gICAgdGhpcy5pdGVtcyA9IFtdO1xuXG4gICAgLy8gY2xlYXIgdGhlIHNlbGVjdGlvbiBhcyB0aGUgc2VsZWN0ZWQgaXRlbSBpcyBhbHNvIHJlbW92ZWRcbiAgICB0aGlzLnNlbGVjdGVkSXRlbSA9IG51bGw7XG5cbiAgICAvLyBmaXJlIGV2ZW50c1xuICAgIGZvciAobGV0IGl0ZW0gb2YgaXRlbXMpIHtcbiAgICAgIHRoaXMub25JdGVtUmVtb3ZlZEV2ZW50KGl0ZW0ua2V5KTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgbnVtYmVyIG9mIGl0ZW1zIGluIHRoaXMgc2VsZWN0b3IuXG4gICAqIEByZXR1cm5zIHtudW1iZXJ9XG4gICAqL1xuICBpdGVtQ291bnQoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gT2JqZWN0LmtleXModGhpcy5pdGVtcykubGVuZ3RoO1xuICB9XG5cbiAgcHJvdGVjdGVkIG9uSXRlbUFkZGVkRXZlbnQoa2V5OiBzdHJpbmcpIHtcbiAgICB0aGlzLmxpc3RTZWxlY3RvckV2ZW50cy5vbkl0ZW1BZGRlZC5kaXNwYXRjaCh0aGlzLCBrZXkpO1xuICB9XG5cbiAgcHJvdGVjdGVkIG9uSXRlbVJlbW92ZWRFdmVudChrZXk6IHN0cmluZykge1xuICAgIHRoaXMubGlzdFNlbGVjdG9yRXZlbnRzLm9uSXRlbVJlbW92ZWQuZGlzcGF0Y2godGhpcywga2V5KTtcbiAgfVxuXG4gIHByb3RlY3RlZCBvbkl0ZW1TZWxlY3RlZEV2ZW50KGtleTogc3RyaW5nKSB7XG4gICAgdGhpcy5saXN0U2VsZWN0b3JFdmVudHMub25JdGVtU2VsZWN0ZWQuZGlzcGF0Y2godGhpcywga2V5KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBldmVudCB0aGF0IGlzIGZpcmVkIHdoZW4gYW4gaXRlbSBpcyBhZGRlZCB0byB0aGUgbGlzdCBvZiBpdGVtcy5cbiAgICogQHJldHVybnMge0V2ZW50PExpc3RTZWxlY3RvcjxDb25maWc+LCBzdHJpbmc+fVxuICAgKi9cbiAgZ2V0IG9uSXRlbUFkZGVkKCk6IEV2ZW50PExpc3RTZWxlY3RvcjxDb25maWc+LCBzdHJpbmc+IHtcbiAgICByZXR1cm4gdGhpcy5saXN0U2VsZWN0b3JFdmVudHMub25JdGVtQWRkZWQuZ2V0RXZlbnQoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBldmVudCB0aGF0IGlzIGZpcmVkIHdoZW4gYW4gaXRlbSBpcyByZW1vdmVkIGZyb20gdGhlIGxpc3Qgb2YgaXRlbXMuXG4gICAqIEByZXR1cm5zIHtFdmVudDxMaXN0U2VsZWN0b3I8Q29uZmlnPiwgc3RyaW5nPn1cbiAgICovXG4gIGdldCBvbkl0ZW1SZW1vdmVkKCk6IEV2ZW50PExpc3RTZWxlY3RvcjxDb25maWc+LCBzdHJpbmc+IHtcbiAgICByZXR1cm4gdGhpcy5saXN0U2VsZWN0b3JFdmVudHMub25JdGVtUmVtb3ZlZC5nZXRFdmVudCgpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIGV2ZW50IHRoYXQgaXMgZmlyZWQgd2hlbiBhbiBpdGVtIGlzIHNlbGVjdGVkIGZyb20gdGhlIGxpc3Qgb2YgaXRlbXMuXG4gICAqIEByZXR1cm5zIHtFdmVudDxMaXN0U2VsZWN0b3I8Q29uZmlnPiwgc3RyaW5nPn1cbiAgICovXG4gIGdldCBvbkl0ZW1TZWxlY3RlZCgpOiBFdmVudDxMaXN0U2VsZWN0b3I8Q29uZmlnPiwgc3RyaW5nPiB7XG4gICAgcmV0dXJuIHRoaXMubGlzdFNlbGVjdG9yRXZlbnRzLm9uSXRlbVNlbGVjdGVkLmdldEV2ZW50KCk7XG4gIH1cbn0iLCJpbXBvcnQge0xhYmVsQ29uZmlnLCBMYWJlbH0gZnJvbSAnLi9sYWJlbCc7XG5pbXBvcnQge1VJSW5zdGFuY2VNYW5hZ2VyfSBmcm9tICcuLi91aW1hbmFnZXInO1xuaW1wb3J0IHsgUGxheWVyQVBJIH0gZnJvbSAnYml0bW92aW4tcGxheWVyJztcblxuLyoqXG4gKiBFbnVtZXJhdGVzIHRoZSB0eXBlcyBvZiBjb250ZW50IHRoYXQgdGhlIHtAbGluayBNZXRhZGF0YUxhYmVsfSBjYW4gZGlzcGxheS5cbiAqL1xuZXhwb3J0IGVudW0gTWV0YWRhdGFMYWJlbENvbnRlbnQge1xuICAvKipcbiAgICogVGl0bGUgb2YgdGhlIGRhdGEgc291cmNlLlxuICAgKi9cbiAgVGl0bGUsXG4gIC8qKlxuICAgKiBEZXNjcmlwdGlvbiBmbyB0aGUgZGF0YSBzb3VyY2UuXG4gICAqL1xuICBEZXNjcmlwdGlvbixcbn1cblxuLyoqXG4gKiBDb25maWd1cmF0aW9uIGludGVyZmFjZSBmb3Ige0BsaW5rIE1ldGFkYXRhTGFiZWx9LlxuICpcbiAqIEBjYXRlZ29yeSBDb25maWdzXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgTWV0YWRhdGFMYWJlbENvbmZpZyBleHRlbmRzIExhYmVsQ29uZmlnIHtcbiAgLyoqXG4gICAqIFRoZSB0eXBlIG9mIGNvbnRlbnQgdGhhdCBzaG91bGQgYmUgZGlzcGxheWVkIGluIHRoZSBsYWJlbC5cbiAgICovXG4gIGNvbnRlbnQ6IE1ldGFkYXRhTGFiZWxDb250ZW50O1xufVxuXG4vKipcbiAqIEEgbGFiZWwgdGhhdCBjYW4gYmUgY29uZmlndXJlZCB0byBkaXNwbGF5IGNlcnRhaW4gbWV0YWRhdGEuXG4gKlxuICogQGNhdGVnb3J5IExhYmVsc1xuICovXG5leHBvcnQgY2xhc3MgTWV0YWRhdGFMYWJlbCBleHRlbmRzIExhYmVsPE1ldGFkYXRhTGFiZWxDb25maWc+IHtcblxuICBjb25zdHJ1Y3Rvcihjb25maWc6IE1ldGFkYXRhTGFiZWxDb25maWcpIHtcbiAgICBzdXBlcihjb25maWcpO1xuXG4gICAgdGhpcy5jb25maWcgPSB0aGlzLm1lcmdlQ29uZmlnKGNvbmZpZywge1xuICAgICAgY3NzQ2xhc3NlczogWydsYWJlbC1tZXRhZGF0YScsICdsYWJlbC1tZXRhZGF0YS0nICsgTWV0YWRhdGFMYWJlbENvbnRlbnRbY29uZmlnLmNvbnRlbnRdLnRvTG93ZXJDYXNlKCldLFxuICAgIH0gYXMgTWV0YWRhdGFMYWJlbENvbmZpZywgdGhpcy5jb25maWcpO1xuICB9XG5cbiAgY29uZmlndXJlKHBsYXllcjogUGxheWVyQVBJLCB1aW1hbmFnZXI6IFVJSW5zdGFuY2VNYW5hZ2VyKTogdm9pZCB7XG4gICAgc3VwZXIuY29uZmlndXJlKHBsYXllciwgdWltYW5hZ2VyKTtcblxuICAgIGxldCBjb25maWcgPSB0aGlzLmdldENvbmZpZygpO1xuICAgIGxldCB1aWNvbmZpZyA9IHVpbWFuYWdlci5nZXRDb25maWcoKTtcblxuICAgIGxldCBpbml0ID0gKCkgPT4ge1xuICAgICAgc3dpdGNoIChjb25maWcuY29udGVudCkge1xuICAgICAgICBjYXNlIE1ldGFkYXRhTGFiZWxDb250ZW50LlRpdGxlOlxuICAgICAgICAgIHRoaXMuc2V0VGV4dCh1aWNvbmZpZy5tZXRhZGF0YS50aXRsZSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgTWV0YWRhdGFMYWJlbENvbnRlbnQuRGVzY3JpcHRpb246XG4gICAgICAgICAgdGhpcy5zZXRUZXh0KHVpY29uZmlnLm1ldGFkYXRhLmRlc2NyaXB0aW9uKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgbGV0IHVubG9hZCA9ICgpID0+IHtcbiAgICAgIHRoaXMuc2V0VGV4dChudWxsKTtcbiAgICB9O1xuXG4gICAgLy8gSW5pdCBsYWJlbFxuICAgIGluaXQoKTtcbiAgICAvLyBDbGVhciBsYWJlbHMgd2hlbiBzb3VyY2UgaXMgdW5sb2FkZWRcbiAgICBwbGF5ZXIub24ocGxheWVyLmV4cG9ydHMuUGxheWVyRXZlbnQuU291cmNlVW5sb2FkZWQsIHVubG9hZCk7XG5cbiAgICB1aW1hbmFnZXIuZ2V0Q29uZmlnKCkuZXZlbnRzLm9uVXBkYXRlZC5zdWJzY3JpYmUoaW5pdCk7XG4gIH1cbn0iLCJpbXBvcnQge1RvZ2dsZUJ1dHRvbiwgVG9nZ2xlQnV0dG9uQ29uZmlnfSBmcm9tICcuL3RvZ2dsZWJ1dHRvbic7XG5pbXBvcnQge1VJSW5zdGFuY2VNYW5hZ2VyfSBmcm9tICcuLi91aW1hbmFnZXInO1xuaW1wb3J0IHsgUGxheWVyQVBJIH0gZnJvbSAnYml0bW92aW4tcGxheWVyJztcbmltcG9ydCB7IGkxOG4gfSBmcm9tICcuLi9sb2NhbGl6YXRpb24vaTE4bic7XG5cbi8qKlxuICogQSBidXR0b24gdGhhdCB0b2dnbGVzIEFwcGxlIG1hY09TIHBpY3R1cmUtaW4tcGljdHVyZSBtb2RlLlxuICpcbiAqIEBjYXRlZ29yeSBCdXR0b25zXG4gKi9cbmV4cG9ydCBjbGFzcyBQaWN0dXJlSW5QaWN0dXJlVG9nZ2xlQnV0dG9uIGV4dGVuZHMgVG9nZ2xlQnV0dG9uPFRvZ2dsZUJ1dHRvbkNvbmZpZz4ge1xuXG4gIGNvbnN0cnVjdG9yKGNvbmZpZzogVG9nZ2xlQnV0dG9uQ29uZmlnID0ge30pIHtcbiAgICBzdXBlcihjb25maWcpO1xuXG4gICAgdGhpcy5jb25maWcgPSB0aGlzLm1lcmdlQ29uZmlnKGNvbmZpZywge1xuICAgICAgY3NzQ2xhc3M6ICd1aS1waXB0b2dnbGVidXR0b24nLFxuICAgICAgdGV4dDogaTE4bi5nZXRMb2NhbGl6ZXIoJ3BpY3R1cmVJblBpY3R1cmUnKSxcbiAgICB9LCB0aGlzLmNvbmZpZyk7XG4gIH1cblxuICBjb25maWd1cmUocGxheWVyOiBQbGF5ZXJBUEksIHVpbWFuYWdlcjogVUlJbnN0YW5jZU1hbmFnZXIpOiB2b2lkIHtcbiAgICBzdXBlci5jb25maWd1cmUocGxheWVyLCB1aW1hbmFnZXIpO1xuXG4gICAgY29uc3QgaXNQaWN0dXJlSW5QaWN0dXJlQXZhaWxhYmxlID0gKCkgPT4ge1xuICAgICAgcmV0dXJuIHBsYXllci5pc1ZpZXdNb2RlQXZhaWxhYmxlKHBsYXllci5leHBvcnRzLlZpZXdNb2RlLlBpY3R1cmVJblBpY3R1cmUpO1xuICAgIH07XG5cbiAgICBjb25zdCBwaWN0dXJlSW5QaWN0dXJlU3RhdGVIYW5kbGVyID0gKCkgPT4ge1xuICAgICAgcGxheWVyLmdldFZpZXdNb2RlKCkgPT09IHBsYXllci5leHBvcnRzLlZpZXdNb2RlLlBpY3R1cmVJblBpY3R1cmUgPyB0aGlzLm9uKCkgOiB0aGlzLm9mZigpO1xuICAgIH07XG5cbiAgICBjb25zdCBwaWN0dXJlSW5QaWN0dXJlQXZhaWxhYmlsaXR5Q2hhbmdlZEhhbmRsZXIgPSAoKSA9PiB7XG4gICAgICBpc1BpY3R1cmVJblBpY3R1cmVBdmFpbGFibGUoKSA/IHRoaXMuc2hvdygpIDogdGhpcy5oaWRlKCk7XG4gICAgfTtcblxuICAgIHBsYXllci5vbihwbGF5ZXIuZXhwb3J0cy5QbGF5ZXJFdmVudC5WaWV3TW9kZUNoYW5nZWQsIHBpY3R1cmVJblBpY3R1cmVTdGF0ZUhhbmRsZXIpO1xuXG4gICAgLy8gQXZhaWxhYmxlIG9ubHkgaW4gb3VyIG5hdGl2ZSBTREtzIGZvciBub3dcbiAgICBpZiAoKHBsYXllci5leHBvcnRzLlBsYXllckV2ZW50IGFzIGFueSkuVmlld01vZGVBdmFpbGFiaWxpdHlDaGFuZ2VkKSB7XG4gICAgICBwbGF5ZXIub24oXG4gICAgICAgIChwbGF5ZXIuZXhwb3J0cy5QbGF5ZXJFdmVudCBhcyBhbnkpLlZpZXdNb2RlQXZhaWxhYmlsaXR5Q2hhbmdlZCxcbiAgICAgICAgcGljdHVyZUluUGljdHVyZUF2YWlsYWJpbGl0eUNoYW5nZWRIYW5kbGVyLFxuICAgICAgKTtcbiAgICB9XG5cbiAgICB1aW1hbmFnZXIuZ2V0Q29uZmlnKCkuZXZlbnRzLm9uVXBkYXRlZC5zdWJzY3JpYmUocGljdHVyZUluUGljdHVyZUF2YWlsYWJpbGl0eUNoYW5nZWRIYW5kbGVyKTtcblxuICAgIHRoaXMub25DbGljay5zdWJzY3JpYmUoKCkgPT4ge1xuICAgICAgaWYgKCFpc1BpY3R1cmVJblBpY3R1cmVBdmFpbGFibGUoKSkge1xuICAgICAgICBpZiAoY29uc29sZSkge1xuICAgICAgICAgIGNvbnNvbGUubG9nKCdQSVAgdW5hdmFpbGFibGUnKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHRhcmdldFZpZXdNb2RlID1cbiAgICAgICAgcGxheWVyLmdldFZpZXdNb2RlKCkgPT09IHBsYXllci5leHBvcnRzLlZpZXdNb2RlLlBpY3R1cmVJblBpY3R1cmVcbiAgICAgICAgICA/IHBsYXllci5leHBvcnRzLlZpZXdNb2RlLklubGluZVxuICAgICAgICAgIDogcGxheWVyLmV4cG9ydHMuVmlld01vZGUuUGljdHVyZUluUGljdHVyZTtcblxuICAgICAgcGxheWVyLnNldFZpZXdNb2RlKHRhcmdldFZpZXdNb2RlKTtcbiAgICB9KTtcblxuICAgIC8vIFN0YXJ0dXAgaW5pdFxuICAgIHBpY3R1cmVJblBpY3R1cmVBdmFpbGFiaWxpdHlDaGFuZ2VkSGFuZGxlcigpOyAvLyBIaWRlIGJ1dHRvbiBpZiBQSVAgbm90IGF2YWlsYWJsZVxuICAgIHBpY3R1cmVJblBpY3R1cmVTdGF0ZUhhbmRsZXIoKTtcbiAgfVxufVxuIiwiaW1wb3J0IHtTZWxlY3RCb3h9IGZyb20gJy4vc2VsZWN0Ym94JztcbmltcG9ydCB7TGlzdFNlbGVjdG9yQ29uZmlnfSBmcm9tICcuL2xpc3RzZWxlY3Rvcic7XG5pbXBvcnQge1VJSW5zdGFuY2VNYW5hZ2VyfSBmcm9tICcuLi91aW1hbmFnZXInO1xuaW1wb3J0IHsgUGxheWVyQVBJIH0gZnJvbSAnYml0bW92aW4tcGxheWVyJztcbmltcG9ydCB7IGkxOG4gfSBmcm9tICcuLi9sb2NhbGl6YXRpb24vaTE4bic7XG5cbi8qKlxuICogQSBzZWxlY3QgYm94IHByb3ZpZGluZyBhIHNlbGVjdGlvbiBvZiBkaWZmZXJlbnQgcGxheWJhY2sgc3BlZWRzLlxuICpcbiAqIEBjYXRlZ29yeSBDb21wb25lbnRzXG4gKi9cbmV4cG9ydCBjbGFzcyBQbGF5YmFja1NwZWVkU2VsZWN0Qm94IGV4dGVuZHMgU2VsZWN0Qm94IHtcbiAgcHJvdGVjdGVkIGRlZmF1bHRQbGF5YmFja1NwZWVkczogbnVtYmVyW107XG5cbiAgY29uc3RydWN0b3IoY29uZmlnOiBMaXN0U2VsZWN0b3JDb25maWcgPSB7fSkge1xuICAgIHN1cGVyKGNvbmZpZyk7XG4gICAgdGhpcy5kZWZhdWx0UGxheWJhY2tTcGVlZHMgPSBbMC4yNSwgMC41LCAxLCAxLjUsIDJdO1xuXG4gICAgdGhpcy5jb25maWcgPSB0aGlzLm1lcmdlQ29uZmlnKGNvbmZpZywge1xuICAgICAgY3NzQ2xhc3NlczogWyd1aS1wbGF5YmFja3NwZWVkc2VsZWN0Ym94J10sXG4gICAgfSwgdGhpcy5jb25maWcpO1xuICB9XG5cbiAgY29uZmlndXJlKHBsYXllcjogUGxheWVyQVBJLCB1aW1hbmFnZXI6IFVJSW5zdGFuY2VNYW5hZ2VyKTogdm9pZCB7XG4gICAgc3VwZXIuY29uZmlndXJlKHBsYXllciwgdWltYW5hZ2VyKTtcblxuICAgIHRoaXMuYWRkRGVmYXVsdEl0ZW1zKCk7XG5cbiAgICB0aGlzLm9uSXRlbVNlbGVjdGVkLnN1YnNjcmliZSgoc2VuZGVyOiBQbGF5YmFja1NwZWVkU2VsZWN0Qm94LCB2YWx1ZTogc3RyaW5nKSA9PiB7XG4gICAgICBwbGF5ZXIuc2V0UGxheWJhY2tTcGVlZChwYXJzZUZsb2F0KHZhbHVlKSk7XG4gICAgICB0aGlzLnNlbGVjdEl0ZW0odmFsdWUpO1xuICAgIH0pO1xuXG4gICAgY29uc3Qgc2V0RGVmYXVsdFZhbHVlID0gKCk6IHZvaWQgPT4ge1xuICAgICAgY29uc3QgcGxheWJhY2tTcGVlZCA9IHBsYXllci5nZXRQbGF5YmFja1NwZWVkKCk7XG4gICAgICB0aGlzLnNldFNwZWVkKHBsYXliYWNrU3BlZWQpO1xuICAgIH07XG5cbiAgICBwbGF5ZXIub24ocGxheWVyLmV4cG9ydHMuUGxheWVyRXZlbnQuUGxheWJhY2tTcGVlZENoYW5nZWQsIHNldERlZmF1bHRWYWx1ZSk7XG4gICAgdWltYW5hZ2VyLmdldENvbmZpZygpLmV2ZW50cy5vblVwZGF0ZWQuc3Vic2NyaWJlKHNldERlZmF1bHRWYWx1ZSk7XG4gIH1cblxuICBzZXRTcGVlZChzcGVlZDogbnVtYmVyKTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLnNlbGVjdEl0ZW0oU3RyaW5nKHNwZWVkKSkpIHtcbiAgICAgIC8vIGEgcGxheWJhY2sgc3BlZWQgd2FzIHNldCB3aGljaCBpcyBub3QgaW4gdGhlIGxpc3QsIGFkZCBpdCB0byB0aGUgbGlzdCB0byBzaG93IGl0IHRvIHRoZSB1c2VyXG4gICAgICB0aGlzLmNsZWFySXRlbXMoKTtcbiAgICAgIHRoaXMuYWRkRGVmYXVsdEl0ZW1zKFtzcGVlZF0pO1xuICAgICAgdGhpcy5zZWxlY3RJdGVtKFN0cmluZyhzcGVlZCkpO1xuICAgIH1cbiAgfVxuXG4gIGFkZERlZmF1bHRJdGVtcyhjdXN0b21JdGVtczogbnVtYmVyW10gPSBbXSk6IHZvaWQge1xuICAgIGNvbnN0IHNvcnRlZFNwZWVkcyA9IHRoaXMuZGVmYXVsdFBsYXliYWNrU3BlZWRzLmNvbmNhdChjdXN0b21JdGVtcykuc29ydCgpO1xuXG4gICAgc29ydGVkU3BlZWRzLmZvckVhY2goZWxlbWVudCA9PiB7XG4gICAgICBpZiAoZWxlbWVudCAhPT0gMSkge1xuICAgICAgICB0aGlzLmFkZEl0ZW0oU3RyaW5nKGVsZW1lbnQpLCBgJHtlbGVtZW50fXhgKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuYWRkSXRlbShTdHJpbmcoZWxlbWVudCksIGkxOG4uZ2V0TG9jYWxpemVyKCdub3JtYWwnKSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBjbGVhckl0ZW1zKCk6IHZvaWQge1xuICAgIHRoaXMuaXRlbXMgPSBbXTtcbiAgICB0aGlzLnNlbGVjdGVkSXRlbSA9IG51bGw7XG4gIH1cbn0iLCJpbXBvcnQge0xhYmVsQ29uZmlnLCBMYWJlbH0gZnJvbSAnLi9sYWJlbCc7XG5pbXBvcnQge1VJSW5zdGFuY2VNYW5hZ2VyfSBmcm9tICcuLi91aW1hbmFnZXInO1xuaW1wb3J0IExpdmVTdHJlYW1EZXRlY3RvckV2ZW50QXJncyA9IFBsYXllclV0aWxzLkxpdmVTdHJlYW1EZXRlY3RvckV2ZW50QXJncztcbmltcG9ydCB7UGxheWVyVXRpbHN9IGZyb20gJy4uL3BsYXllcnV0aWxzJztcbmltcG9ydCB7U3RyaW5nVXRpbHN9IGZyb20gJy4uL3N0cmluZ3V0aWxzJztcbmltcG9ydCB7IFBsYXllckFQSSB9IGZyb20gJ2JpdG1vdmluLXBsYXllcic7XG5pbXBvcnQgeyBpMThuIH0gZnJvbSAnLi4vbG9jYWxpemF0aW9uL2kxOG4nO1xuXG5leHBvcnQgZW51bSBQbGF5YmFja1RpbWVMYWJlbE1vZGUge1xuICAvKipcbiAgICogRGlzcGxheXMgdGhlIGN1cnJlbnQgdGltZVxuICAgKi9cbiAgQ3VycmVudFRpbWUsXG4gIC8qKlxuICAgKiBEaXNwbGF5cyB0aGUgZHVyYXRpb24gb2YgdGhlIGNvbnRlbnRcbiAgICovXG4gIFRvdGFsVGltZSxcbiAgLyoqXG4gICAqIERpc3BsYXlzIHRoZSBjdXJyZW50IHRpbWUgYW5kIHRoZSBkdXJhdGlvbiBvZiB0aGUgY29udGVudFxuICAgKiBGb3JtYXQ6ICR7Y3VycmVudFRpbWV9IC8gJHt0b3RhbFRpbWV9XG4gICAqL1xuICBDdXJyZW50QW5kVG90YWxUaW1lLFxuICAvKipcbiAgICogRGlzcGxheXMgdGhlIHJlbWFpbmluZyB0aW1lIG9mIHRoZSBjb250ZW50XG4gICAqL1xuICBSZW1haW5pbmdUaW1lLFxufVxuXG4vKipcbiAqIEBjYXRlZ29yeSBDb25maWdzXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgUGxheWJhY2tUaW1lTGFiZWxDb25maWcgZXh0ZW5kcyBMYWJlbENvbmZpZyB7XG4gIC8qKlxuICAgKiBUaGUgdHlwZSBvZiB3aGljaCB0aW1lIHNob3VsZCBiZSBkaXNwbGF5ZWQgaW4gdGhlIGxhYmVsLlxuICAgKiBEZWZhdWx0OiBQbGF5YmFja1RpbWVMYWJlbE1vZGUuQ3VycmVudEFuZFRvdGFsVGltZVxuICAgKi9cbiAgdGltZUxhYmVsTW9kZT86IFBsYXliYWNrVGltZUxhYmVsTW9kZTtcbiAgLyoqXG4gICAqIEJvb2xlYW4gaWYgdGhlIGxhYmVsIHNob3VsZCBiZSBoaWRkZW4gaW4gbGl2ZSBwbGF5YmFja1xuICAgKi9cbiAgaGlkZUluTGl2ZVBsYXliYWNrPzogYm9vbGVhbjtcbn1cblxuLyoqXG4gKiBBIGxhYmVsIHRoYXQgZGlzcGxheSB0aGUgY3VycmVudCBwbGF5YmFjayB0aW1lIGFuZCB0aGUgdG90YWwgdGltZSB0aHJvdWdoIHtAbGluayBQbGF5YmFja1RpbWVMYWJlbCNzZXRUaW1lIHNldFRpbWV9XG4gKiBvciBhbnkgc3RyaW5nIHRocm91Z2gge0BsaW5rIFBsYXliYWNrVGltZUxhYmVsI3NldFRleHQgc2V0VGV4dH0uXG4gKlxuICogQGNhdGVnb3J5IExhYmVsc1xuICovXG5leHBvcnQgY2xhc3MgUGxheWJhY2tUaW1lTGFiZWwgZXh0ZW5kcyBMYWJlbDxQbGF5YmFja1RpbWVMYWJlbENvbmZpZz4ge1xuXG4gIHByaXZhdGUgdGltZUZvcm1hdDogc3RyaW5nO1xuXG4gIGNvbnN0cnVjdG9yKGNvbmZpZzogUGxheWJhY2tUaW1lTGFiZWxDb25maWcgPSB7fSkge1xuICAgIHN1cGVyKGNvbmZpZyk7XG5cbiAgICB0aGlzLmNvbmZpZyA9IHRoaXMubWVyZ2VDb25maWcoY29uZmlnLCA8UGxheWJhY2tUaW1lTGFiZWxDb25maWc+e1xuICAgICAgY3NzQ2xhc3M6ICd1aS1wbGF5YmFja3RpbWVsYWJlbCcsXG4gICAgICB0aW1lTGFiZWxNb2RlOiBQbGF5YmFja1RpbWVMYWJlbE1vZGUuQ3VycmVudEFuZFRvdGFsVGltZSxcbiAgICAgIGhpZGVJbkxpdmVQbGF5YmFjazogZmFsc2UsXG4gICAgfSwgdGhpcy5jb25maWcpO1xuICB9XG5cbiAgY29uZmlndXJlKHBsYXllcjogUGxheWVyQVBJLCB1aW1hbmFnZXI6IFVJSW5zdGFuY2VNYW5hZ2VyKTogdm9pZCB7XG4gICAgc3VwZXIuY29uZmlndXJlKHBsYXllciwgdWltYW5hZ2VyKTtcblxuICAgIGxldCBjb25maWcgPSB0aGlzLmdldENvbmZpZygpO1xuICAgIGxldCBsaXZlID0gZmFsc2U7XG4gICAgbGV0IGxpdmVDc3NDbGFzcyA9IHRoaXMucHJlZml4Q3NzKCd1aS1wbGF5YmFja3RpbWVsYWJlbC1saXZlJyk7XG4gICAgbGV0IGxpdmVFZGdlQ3NzQ2xhc3MgPSB0aGlzLnByZWZpeENzcygndWktcGxheWJhY2t0aW1lbGFiZWwtbGl2ZS1lZGdlJyk7XG4gICAgbGV0IG1pbldpZHRoID0gMDtcblxuICAgIGxldCBsaXZlQ2xpY2tIYW5kbGVyID0gKCkgPT4ge1xuICAgICAgcGxheWVyLnRpbWVTaGlmdCgwKTtcbiAgICB9O1xuXG4gICAgbGV0IHVwZGF0ZUxpdmVTdGF0ZSA9ICgpID0+IHtcbiAgICAgIC8vIFBsYXllciBpcyBwbGF5aW5nIGEgbGl2ZSBzdHJlYW0gd2hlbiB0aGUgZHVyYXRpb24gaXMgaW5maW5pdGVcbiAgICAgIGxpdmUgPSBwbGF5ZXIuaXNMaXZlKCk7XG5cbiAgICAgIC8vIEF0dGFjaC9kZXRhY2ggbGl2ZSBtYXJrZXIgY2xhc3NcbiAgICAgIGlmIChsaXZlKSB7XG4gICAgICAgIHRoaXMuZ2V0RG9tRWxlbWVudCgpLmFkZENsYXNzKGxpdmVDc3NDbGFzcyk7XG4gICAgICAgIHRoaXMuc2V0VGV4dChpMThuLmdldExvY2FsaXplcignbGl2ZScpKTtcbiAgICAgICAgaWYgKGNvbmZpZy5oaWRlSW5MaXZlUGxheWJhY2spIHtcbiAgICAgICAgICB0aGlzLmhpZGUoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm9uQ2xpY2suc3Vic2NyaWJlKGxpdmVDbGlja0hhbmRsZXIpO1xuICAgICAgICB1cGRhdGVMaXZlVGltZXNoaWZ0U3RhdGUoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuZ2V0RG9tRWxlbWVudCgpLnJlbW92ZUNsYXNzKGxpdmVDc3NDbGFzcyk7XG4gICAgICAgIHRoaXMuZ2V0RG9tRWxlbWVudCgpLnJlbW92ZUNsYXNzKGxpdmVFZGdlQ3NzQ2xhc3MpO1xuICAgICAgICB0aGlzLnNob3coKTtcbiAgICAgICAgdGhpcy5vbkNsaWNrLnVuc3Vic2NyaWJlKGxpdmVDbGlja0hhbmRsZXIpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBsZXQgdXBkYXRlTGl2ZVRpbWVzaGlmdFN0YXRlID0gKCkgPT4ge1xuICAgICAgaWYgKCFsaXZlKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgLy8gVGhlIHBsYXllciBpcyBvbmx5IGF0IHRoZSBsaXZlIGVkZ2UgaWZmIHRoZSBzdHJlYW0gaXMgbm90IHNoaWZ0ZWQgYW5kIGl0IGlzIGFjdHVhbGx5IHBsYXlpbmcgb3IgcGxheWJhY2sgaGFzXG4gICAgICAvLyBuZXZlciBiZWVuIHN0YXJ0ZWQgKG1lYW5pbmcgaXQgaXNuJ3QgcGF1c2VkKS4gQSBwbGF5ZXIgdGhhdCBpcyBwYXVzZWQgaXMgYWx3YXlzIGJlaGluZCB0aGUgbGl2ZSBlZGdlLlxuICAgICAgLy8gQW4gZXhjZXB0aW9uIGlzIG1hZGUgZm9yIGxpdmUgc3RyZWFtcyB3aXRob3V0IGEgdGltZXNoaWZ0IHdpbmRvdywgYmVjYXVzZSBoZXJlIHdlIFwic3RvcFwiIHBsYXliYWNrIGluc3RlYWRcbiAgICAgIC8vIG9mIHBhdXNpbmcgaXQgKGZyb20gYSBVSSBwZXJzcGVjdGl2ZSksIHNvIHdlIGtlZXAgdGhlIGxpdmUgZWRnZSBpbmRpY2F0b3Igb24gYmVjYXVzZSBhIHBsYXkgd291bGQgYWx3YXlzXG4gICAgICAvLyByZXN1bWUgYXQgdGhlIGxpdmUgZWRnZS5cbiAgICAgIGNvbnN0IGlzVGltZXNoaWZ0ZWQgPSBwbGF5ZXIuZ2V0VGltZVNoaWZ0KCkgPCAwO1xuICAgICAgY29uc3QgaXNUaW1lc2hpZnRBdmFpbGFibGUgPSBwbGF5ZXIuZ2V0TWF4VGltZVNoaWZ0KCkgPCAwO1xuICAgICAgaWYgKCFpc1RpbWVzaGlmdGVkICYmICghcGxheWVyLmlzUGF1c2VkKCkgfHwgIWlzVGltZXNoaWZ0QXZhaWxhYmxlKSkge1xuICAgICAgICB0aGlzLmdldERvbUVsZW1lbnQoKS5hZGRDbGFzcyhsaXZlRWRnZUNzc0NsYXNzKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuZ2V0RG9tRWxlbWVudCgpLnJlbW92ZUNsYXNzKGxpdmVFZGdlQ3NzQ2xhc3MpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBsZXQgbGl2ZVN0cmVhbURldGVjdG9yID0gbmV3IFBsYXllclV0aWxzLkxpdmVTdHJlYW1EZXRlY3RvcihwbGF5ZXIsIHVpbWFuYWdlcik7XG4gICAgbGl2ZVN0cmVhbURldGVjdG9yLm9uTGl2ZUNoYW5nZWQuc3Vic2NyaWJlKChzZW5kZXIsIGFyZ3M6IExpdmVTdHJlYW1EZXRlY3RvckV2ZW50QXJncykgPT4ge1xuICAgICAgbGl2ZSA9IGFyZ3MubGl2ZTtcbiAgICAgIHVwZGF0ZUxpdmVTdGF0ZSgpO1xuICAgIH0pO1xuICAgIGxpdmVTdHJlYW1EZXRlY3Rvci5kZXRlY3QoKTsgLy8gSW5pdGlhbCBkZXRlY3Rpb25cblxuICAgIGxldCBwbGF5YmFja1RpbWVIYW5kbGVyID0gKCkgPT4ge1xuICAgICAgaWYgKCFsaXZlICYmIHBsYXllci5nZXREdXJhdGlvbigpICE9PSBJbmZpbml0eSkge1xuICAgICAgICB0aGlzLnNldFRpbWUoXG4gICAgICAgICAgUGxheWVyVXRpbHMuZ2V0Q3VycmVudFRpbWVSZWxhdGl2ZVRvU2Vla2FibGVSYW5nZShwbGF5ZXIpLFxuICAgICAgICAgIHBsYXllci5nZXREdXJhdGlvbigpKTtcbiAgICAgIH1cblxuICAgICAgLy8gVG8gYXZvaWQgJ2p1bXBpbmcnIGluIHRoZSBVSSBieSB2YXJ5aW5nIGxhYmVsIHNpemVzIGR1ZSB0byBub24tbW9ub3NwYWNlZCBmb250cyxcbiAgICAgIC8vIHdlIGdyYWR1YWxseSBpbmNyZWFzZSB0aGUgbWluLXdpZHRoIHdpdGggdGhlIGNvbnRlbnQgdG8gcmVhY2ggYSBzdGFibGUgc2l6ZS5cbiAgICAgIGxldCB3aWR0aCA9IHRoaXMuZ2V0RG9tRWxlbWVudCgpLndpZHRoKCk7XG4gICAgICBpZiAod2lkdGggPiBtaW5XaWR0aCkge1xuICAgICAgICBtaW5XaWR0aCA9IHdpZHRoO1xuICAgICAgICB0aGlzLmdldERvbUVsZW1lbnQoKS5jc3Moe1xuICAgICAgICAgICdtaW4td2lkdGgnOiBtaW5XaWR0aCArICdweCcsXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBsZXQgdXBkYXRlVGltZUZvcm1hdEJhc2VkT25EdXJhdGlvbiA9ICgpID0+IHtcbiAgICAgIC8vIFNldCB0aW1lIGZvcm1hdCBkZXBlbmRpbmcgb24gc291cmNlIGR1cmF0aW9uXG4gICAgICB0aGlzLnRpbWVGb3JtYXQgPSBNYXRoLmFicyhwbGF5ZXIuaXNMaXZlKCkgPyBwbGF5ZXIuZ2V0TWF4VGltZVNoaWZ0KCkgOiBwbGF5ZXIuZ2V0RHVyYXRpb24oKSkgPj0gMzYwMCA/XG4gICAgICBTdHJpbmdVdGlscy5GT1JNQVRfSEhNTVNTIDogU3RyaW5nVXRpbHMuRk9STUFUX01NU1M7XG4gICAgICBwbGF5YmFja1RpbWVIYW5kbGVyKCk7XG4gICAgfTtcblxuICAgIHBsYXllci5vbihwbGF5ZXIuZXhwb3J0cy5QbGF5ZXJFdmVudC5UaW1lQ2hhbmdlZCwgcGxheWJhY2tUaW1lSGFuZGxlcik7XG4gICAgcGxheWVyLm9uKHBsYXllci5leHBvcnRzLlBsYXllckV2ZW50LlJlYWR5LCB1cGRhdGVUaW1lRm9ybWF0QmFzZWRPbkR1cmF0aW9uKTtcbiAgICBwbGF5ZXIub24ocGxheWVyLmV4cG9ydHMuUGxheWVyRXZlbnQuU2Vla2VkLCBwbGF5YmFja1RpbWVIYW5kbGVyKTtcblxuICAgIHBsYXllci5vbihwbGF5ZXIuZXhwb3J0cy5QbGF5ZXJFdmVudC5UaW1lU2hpZnQsIHVwZGF0ZUxpdmVUaW1lc2hpZnRTdGF0ZSk7XG4gICAgcGxheWVyLm9uKHBsYXllci5leHBvcnRzLlBsYXllckV2ZW50LlRpbWVTaGlmdGVkLCB1cGRhdGVMaXZlVGltZXNoaWZ0U3RhdGUpO1xuICAgIHBsYXllci5vbihwbGF5ZXIuZXhwb3J0cy5QbGF5ZXJFdmVudC5QbGF5aW5nLCB1cGRhdGVMaXZlVGltZXNoaWZ0U3RhdGUpO1xuICAgIHBsYXllci5vbihwbGF5ZXIuZXhwb3J0cy5QbGF5ZXJFdmVudC5QYXVzZWQsIHVwZGF0ZUxpdmVUaW1lc2hpZnRTdGF0ZSk7XG4gICAgcGxheWVyLm9uKHBsYXllci5leHBvcnRzLlBsYXllckV2ZW50LlN0YWxsU3RhcnRlZCwgdXBkYXRlTGl2ZVRpbWVzaGlmdFN0YXRlKTtcbiAgICBwbGF5ZXIub24ocGxheWVyLmV4cG9ydHMuUGxheWVyRXZlbnQuU3RhbGxFbmRlZCwgdXBkYXRlTGl2ZVRpbWVzaGlmdFN0YXRlKTtcblxuICAgIGxldCBpbml0ID0gKCkgPT4ge1xuICAgICAgLy8gUmVzZXQgbWluLXdpZHRoIHdoZW4gYSBuZXcgc291cmNlIGlzIHJlYWR5IChlc3BlY2lhbGx5IGZvciBzd2l0Y2hpbmcgVk9EL0xpdmUgbW9kZXMgd2hlcmUgdGhlIGxhYmVsIGNvbnRlbnRcbiAgICAgIC8vIGNoYW5nZXMpXG4gICAgICBtaW5XaWR0aCA9IDA7XG4gICAgICB0aGlzLmdldERvbUVsZW1lbnQoKS5jc3Moe1xuICAgICAgICAnbWluLXdpZHRoJzogbnVsbCxcbiAgICAgIH0pO1xuXG4gICAgICB1cGRhdGVUaW1lRm9ybWF0QmFzZWRPbkR1cmF0aW9uKCk7XG4gICAgfTtcbiAgICB1aW1hbmFnZXIuZ2V0Q29uZmlnKCkuZXZlbnRzLm9uVXBkYXRlZC5zdWJzY3JpYmUoaW5pdCk7XG5cbiAgICBpbml0KCk7XG4gIH1cblxuICAvKipcbiAgICogU2V0cyB0aGUgY3VycmVudCBwbGF5YmFjayB0aW1lIGFuZCB0b3RhbCBkdXJhdGlvbi5cbiAgICogQHBhcmFtIHBsYXliYWNrU2Vjb25kcyB0aGUgY3VycmVudCBwbGF5YmFjayB0aW1lIGluIHNlY29uZHNcbiAgICogQHBhcmFtIGR1cmF0aW9uU2Vjb25kcyB0aGUgdG90YWwgZHVyYXRpb24gaW4gc2Vjb25kc1xuICAgKi9cbiAgc2V0VGltZShwbGF5YmFja1NlY29uZHM6IG51bWJlciwgZHVyYXRpb25TZWNvbmRzOiBudW1iZXIpIHtcbiAgICBsZXQgY3VycmVudFRpbWUgPSBTdHJpbmdVdGlscy5zZWNvbmRzVG9UaW1lKHBsYXliYWNrU2Vjb25kcywgdGhpcy50aW1lRm9ybWF0KTtcbiAgICBsZXQgdG90YWxUaW1lID0gU3RyaW5nVXRpbHMuc2Vjb25kc1RvVGltZShkdXJhdGlvblNlY29uZHMsIHRoaXMudGltZUZvcm1hdCk7XG5cbiAgICBzd2l0Y2ggKCg8UGxheWJhY2tUaW1lTGFiZWxDb25maWc+dGhpcy5jb25maWcpLnRpbWVMYWJlbE1vZGUpIHtcbiAgICAgIGNhc2UgUGxheWJhY2tUaW1lTGFiZWxNb2RlLkN1cnJlbnRUaW1lOlxuICAgICAgICB0aGlzLnNldFRleHQoYCR7Y3VycmVudFRpbWV9YCk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBQbGF5YmFja1RpbWVMYWJlbE1vZGUuVG90YWxUaW1lOlxuICAgICAgICB0aGlzLnNldFRleHQoYCR7dG90YWxUaW1lfWApO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgUGxheWJhY2tUaW1lTGFiZWxNb2RlLkN1cnJlbnRBbmRUb3RhbFRpbWU6XG4gICAgICAgIHRoaXMuc2V0VGV4dChgJHtjdXJyZW50VGltZX0gLyAke3RvdGFsVGltZX1gKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFBsYXliYWNrVGltZUxhYmVsTW9kZS5SZW1haW5pbmdUaW1lOlxuICAgICAgICBsZXQgcmVtYWluaW5nVGltZSA9IFN0cmluZ1V0aWxzLnNlY29uZHNUb1RpbWUoZHVyYXRpb25TZWNvbmRzIC0gcGxheWJhY2tTZWNvbmRzLCB0aGlzLnRpbWVGb3JtYXQpO1xuICAgICAgICB0aGlzLnNldFRleHQoYCR7cmVtYWluaW5nVGltZX1gKTtcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFNldHMgdGhlIGN1cnJlbnQgdGltZSBmb3JtYXRcbiAgICogQHBhcmFtIHRpbWVGb3JtYXQgdGhlIHRpbWUgZm9ybWF0XG4gICAqL1xuICBwcm90ZWN0ZWQgc2V0VGltZUZvcm1hdCh0aW1lRm9ybWF0OiBzdHJpbmcpOiB2b2lkIHtcbiAgICB0aGlzLnRpbWVGb3JtYXQgPSB0aW1lRm9ybWF0O1xuICB9XG59XG4iLCJpbXBvcnQge1RvZ2dsZUJ1dHRvbiwgVG9nZ2xlQnV0dG9uQ29uZmlnfSBmcm9tICcuL3RvZ2dsZWJ1dHRvbic7XG5pbXBvcnQge1VJSW5zdGFuY2VNYW5hZ2VyfSBmcm9tICcuLi91aW1hbmFnZXInO1xuaW1wb3J0IHtQbGF5ZXJVdGlsc30gZnJvbSAnLi4vcGxheWVydXRpbHMnO1xuaW1wb3J0IHsgUGxheWVyQVBJLCBXYXJuaW5nRXZlbnQgfSBmcm9tICdiaXRtb3Zpbi1wbGF5ZXInO1xuaW1wb3J0IHsgaTE4biB9IGZyb20gJy4uL2xvY2FsaXphdGlvbi9pMThuJztcblxuLyoqXG4gKiBAY2F0ZWdvcnkgQ29uZmlnc1xuICovXG5leHBvcnQgaW50ZXJmYWNlIFBsYXliYWNrVG9nZ2xlQnV0dG9uQ29uZmlnIGV4dGVuZHMgVG9nZ2xlQnV0dG9uQ29uZmlnIHtcbiAgLyoqXG4gICAqIFNwZWNpZnkgd2hldGhlciB0aGUgcGxheWVyIHNob3VsZCBiZSBzZXQgdG8gZW50ZXIgZnVsbHNjcmVlbiBieSBjbGlja2luZyBvbiB0aGUgcGxheWJhY2sgdG9nZ2xlIGJ1dHRvblxuICAgKiB3aGVuIGluaXRpYXRpbmcgdGhlIGluaXRpYWwgcGxheWJhY2suXG4gICAqIERlZmF1bHQgaXMgZmFsc2UuXG4gICAqL1xuICBlbnRlckZ1bGxzY3JlZW5PbkluaXRpYWxQbGF5YmFjaz86IGJvb2xlYW47XG59XG5cbi8qKlxuICogQSBidXR0b24gdGhhdCB0b2dnbGVzIGJldHdlZW4gcGxheWJhY2sgYW5kIHBhdXNlLlxuICpcbiAqIEBjYXRlZ29yeSBCdXR0b25zXG4gKi9cbmV4cG9ydCBjbGFzcyBQbGF5YmFja1RvZ2dsZUJ1dHRvbiBleHRlbmRzIFRvZ2dsZUJ1dHRvbjxQbGF5YmFja1RvZ2dsZUJ1dHRvbkNvbmZpZz4ge1xuXG4gIHByaXZhdGUgc3RhdGljIHJlYWRvbmx5IENMQVNTX1NUT1BUT0dHTEUgPSAnc3RvcHRvZ2dsZSc7XG4gIHByb3RlY3RlZCBpc1BsYXlJbml0aWF0ZWQ6IGJvb2xlYW47XG5cbiAgY29uc3RydWN0b3IoY29uZmlnOiBQbGF5YmFja1RvZ2dsZUJ1dHRvbkNvbmZpZyA9IHt9KSB7XG4gICAgc3VwZXIoY29uZmlnKTtcblxuICAgIHRoaXMuY29uZmlnID0gdGhpcy5tZXJnZUNvbmZpZyhjb25maWcsIHtcbiAgICAgIGNzc0NsYXNzOiAndWktcGxheWJhY2t0b2dnbGVidXR0b24nLFxuICAgICAgdGV4dDogaTE4bi5nZXRMb2NhbGl6ZXIoJ3BsYXknKSxcbiAgICAgIG9uQXJpYUxhYmVsOiBpMThuLmdldExvY2FsaXplcigncGF1c2UnKSxcbiAgICAgIG9mZkFyaWFMYWJlbDogaTE4bi5nZXRMb2NhbGl6ZXIoJ3BsYXknKSxcbiAgICB9LCB0aGlzLmNvbmZpZyk7XG5cbiAgICB0aGlzLmlzUGxheUluaXRpYXRlZCA9IGZhbHNlO1xuICB9XG5cbiAgY29uZmlndXJlKHBsYXllcjogUGxheWVyQVBJLCB1aW1hbmFnZXI6IFVJSW5zdGFuY2VNYW5hZ2VyLCBoYW5kbGVDbGlja0V2ZW50OiBib29sZWFuID0gdHJ1ZSk6IHZvaWQge1xuICAgIHN1cGVyLmNvbmZpZ3VyZShwbGF5ZXIsIHVpbWFuYWdlcik7XG5cbiAgICAvLyBTZXQgZW50ZXJGdWxsc2NyZWVuT25Jbml0aWFsUGxheWJhY2sgaWYgc2V0IGluIHRoZSB1aW1hbmFnZXIgY29uZmlnXG4gICAgaWYgKHR5cGVvZiB1aW1hbmFnZXIuZ2V0Q29uZmlnKCkuZW50ZXJGdWxsc2NyZWVuT25Jbml0aWFsUGxheWJhY2sgPT09ICdib29sZWFuJykge1xuICAgICAgdGhpcy5jb25maWcuZW50ZXJGdWxsc2NyZWVuT25Jbml0aWFsUGxheWJhY2sgPSB1aW1hbmFnZXIuZ2V0Q29uZmlnKCkuZW50ZXJGdWxsc2NyZWVuT25Jbml0aWFsUGxheWJhY2s7XG4gICAgfVxuXG4gICAgbGV0IGlzU2Vla2luZyA9IGZhbHNlO1xuICAgIGxldCBmaXJzdFBsYXkgPSB0cnVlO1xuXG4gICAgLy8gSGFuZGxlciB0byB1cGRhdGUgYnV0dG9uIHN0YXRlIGJhc2VkIG9uIHBsYXllciBzdGF0ZVxuICAgIGxldCBwbGF5YmFja1N0YXRlSGFuZGxlciA9ICgpID0+IHtcbiAgICAgIC8vIElmIHRoZSBVSSBpcyBjdXJyZW50bHkgc2Vla2luZywgcGxheWJhY2sgaXMgdGVtcG9yYXJpbHkgc3RvcHBlZCBidXQgdGhlIGJ1dHRvbnMgc2hvdWxkXG4gICAgICAvLyBub3QgcmVmbGVjdCB0aGF0IGFuZCBzdGF5IGFzLWlzIChlLmcgaW5kaWNhdGUgcGxheWJhY2sgd2hpbGUgc2Vla2luZykuXG4gICAgICBpZiAoaXNTZWVraW5nKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgaWYgKHBsYXllci5pc1BsYXlpbmcoKSB8fCB0aGlzLmlzUGxheUluaXRpYXRlZCkge1xuICAgICAgICB0aGlzLm9uKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLm9mZigpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICAvLyBDYWxsIGhhbmRsZXIgdXBvbiB0aGVzZSBldmVudHNcbiAgICBwbGF5ZXIub24ocGxheWVyLmV4cG9ydHMuUGxheWVyRXZlbnQuUGxheSwgKGUpID0+IHtcbiAgICAgIHRoaXMuaXNQbGF5SW5pdGlhdGVkID0gdHJ1ZTtcbiAgICAgIGZpcnN0UGxheSA9IGZhbHNlO1xuICAgICAgcGxheWJhY2tTdGF0ZUhhbmRsZXIoKTtcbiAgICB9KTtcblxuICAgIHBsYXllci5vbihwbGF5ZXIuZXhwb3J0cy5QbGF5ZXJFdmVudC5QYXVzZWQsIChlKSA9PiB7XG4gICAgICB0aGlzLmlzUGxheUluaXRpYXRlZCA9IGZhbHNlO1xuICAgICAgcGxheWJhY2tTdGF0ZUhhbmRsZXIoKTtcbiAgICB9KTtcblxuICAgIHBsYXllci5vbihwbGF5ZXIuZXhwb3J0cy5QbGF5ZXJFdmVudC5QbGF5aW5nLCAoZSkgPT4ge1xuICAgICAgdGhpcy5pc1BsYXlJbml0aWF0ZWQgPSBmYWxzZTtcbiAgICAgIHBsYXliYWNrU3RhdGVIYW5kbGVyKCk7XG4gICAgfSk7XG4gICAgLy8gYWZ0ZXIgdW5sb2FkaW5nICsgbG9hZGluZyBhIG5ldyBzb3VyY2UsIHRoZSBwbGF5ZXIgbWlnaHQgYmUgaW4gYSBkaWZmZXJlbnQgcGxheWluZyBzdGF0ZSAoZnJvbSBwbGF5aW5nIGludG8gc3RvcHBlZClcbiAgICBwbGF5ZXIub24ocGxheWVyLmV4cG9ydHMuUGxheWVyRXZlbnQuU291cmNlTG9hZGVkLCBwbGF5YmFja1N0YXRlSGFuZGxlcik7XG4gICAgdWltYW5hZ2VyLmdldENvbmZpZygpLmV2ZW50cy5vblVwZGF0ZWQuc3Vic2NyaWJlKHBsYXliYWNrU3RhdGVIYW5kbGVyKTtcbiAgICBwbGF5ZXIub24ocGxheWVyLmV4cG9ydHMuUGxheWVyRXZlbnQuU291cmNlVW5sb2FkZWQsIHBsYXliYWNrU3RhdGVIYW5kbGVyKTtcbiAgICAvLyB3aGVuIHBsYXliYWNrIGZpbmlzaGVzLCBwbGF5ZXIgdHVybnMgdG8gcGF1c2VkIG1vZGVcbiAgICBwbGF5ZXIub24ocGxheWVyLmV4cG9ydHMuUGxheWVyRXZlbnQuUGxheWJhY2tGaW5pc2hlZCwgcGxheWJhY2tTdGF0ZUhhbmRsZXIpO1xuICAgIHBsYXllci5vbihwbGF5ZXIuZXhwb3J0cy5QbGF5ZXJFdmVudC5DYXN0U3RhcnRlZCwgcGxheWJhY2tTdGF0ZUhhbmRsZXIpO1xuXG4gICAgLy8gV2hlbiBhIHBsYXliYWNrIGF0dGVtcHQgaXMgcmVqZWN0ZWQgd2l0aCB3YXJuaW5nIDUwMDgsIHdlIHN3aXRjaCB0aGUgYnV0dG9uIHN0YXRlIGJhY2sgdG8gb2ZmXG4gICAgLy8gVGhpcyBpcyByZXF1aXJlZCBmb3IgYmxvY2tlZCBhdXRvcGxheSwgYmVjYXVzZSB0aGVyZSBpcyBubyBQYXVzZWQgZXZlbnQgaW4gc3VjaCBjYXNlXG4gICAgcGxheWVyLm9uKHBsYXllci5leHBvcnRzLlBsYXllckV2ZW50Lldhcm5pbmcsIChldmVudDogV2FybmluZ0V2ZW50KSA9PiB7XG4gICAgICBpZiAoZXZlbnQuY29kZSA9PT0gcGxheWVyLmV4cG9ydHMuV2FybmluZ0NvZGUuUExBWUJBQ0tfQ09VTERfTk9UX0JFX1NUQVJURUQpIHtcbiAgICAgICAgdGhpcy5pc1BsYXlJbml0aWF0ZWQgPSBmYWxzZTtcbiAgICAgICAgZmlyc3RQbGF5ID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5vZmYoKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGNvbnN0IHVwZGF0ZUxpdmVTdGF0ZSA9ICgpID0+IHtcbiAgICAgIGNvbnN0IHNob3dTdG9wVG9nZ2xlID0gcGxheWVyLmlzTGl2ZSgpICYmICFQbGF5ZXJVdGlscy5pc1RpbWVTaGlmdEF2YWlsYWJsZShwbGF5ZXIpO1xuXG4gICAgICBpZiAoc2hvd1N0b3BUb2dnbGUpIHtcbiAgICAgICAgdGhpcy5nZXREb21FbGVtZW50KCkuYWRkQ2xhc3ModGhpcy5wcmVmaXhDc3MoUGxheWJhY2tUb2dnbGVCdXR0b24uQ0xBU1NfU1RPUFRPR0dMRSkpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5nZXREb21FbGVtZW50KCkucmVtb3ZlQ2xhc3ModGhpcy5wcmVmaXhDc3MoUGxheWJhY2tUb2dnbGVCdXR0b24uQ0xBU1NfU1RPUFRPR0dMRSkpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICAvLyBEZXRlY3QgYWJzZW5jZSBvZiB0aW1lc2hpZnRpbmcgb24gbGl2ZSBzdHJlYW1zIGFuZCBhZGQgdGFnZ2luZyBjbGFzcyB0byBjb252ZXJ0IGJ1dHRvbiBpY29ucyB0byBwbGF5L3N0b3BcbiAgICBsZXQgdGltZVNoaWZ0RGV0ZWN0b3IgPSBuZXcgUGxheWVyVXRpbHMuVGltZVNoaWZ0QXZhaWxhYmlsaXR5RGV0ZWN0b3IocGxheWVyKTtcbiAgICBsZXQgbGl2ZVN0cmVhbURldGVjdG9yID0gbmV3IFBsYXllclV0aWxzLkxpdmVTdHJlYW1EZXRlY3RvcihwbGF5ZXIsIHVpbWFuYWdlcik7XG5cbiAgICB0aW1lU2hpZnREZXRlY3Rvci5vblRpbWVTaGlmdEF2YWlsYWJpbGl0eUNoYW5nZWQuc3Vic2NyaWJlKCgpID0+IHVwZGF0ZUxpdmVTdGF0ZSgpKTtcbiAgICBsaXZlU3RyZWFtRGV0ZWN0b3Iub25MaXZlQ2hhbmdlZC5zdWJzY3JpYmUoKCkgPT4gdXBkYXRlTGl2ZVN0YXRlKCkpO1xuXG4gICAgdGltZVNoaWZ0RGV0ZWN0b3IuZGV0ZWN0KCk7IC8vIEluaXRpYWwgZGV0ZWN0aW9uXG4gICAgbGl2ZVN0cmVhbURldGVjdG9yLmRldGVjdCgpO1xuXG4gICAgaWYgKGhhbmRsZUNsaWNrRXZlbnQpIHtcbiAgICAgIC8vIENvbnRyb2wgcGxheWVyIGJ5IGJ1dHRvbiBldmVudHNcbiAgICAgIC8vIFdoZW4gYSBidXR0b24gZXZlbnQgdHJpZ2dlcnMgYSBwbGF5ZXIgQVBJIGNhbGwsIGV2ZW50cyBhcmUgZmlyZWQgd2hpY2ggaW4gdHVybiBjYWxsIHRoZSBldmVudCBoYW5kbGVyXG4gICAgICAvLyBhYm92ZSB0aGF0IHVwZGF0ZWQgdGhlIGJ1dHRvbiBzdGF0ZS5cbiAgICAgIHRoaXMub25DbGljay5zdWJzY3JpYmUoKCkgPT4ge1xuICAgICAgICBpZiAocGxheWVyLmlzUGxheWluZygpIHx8IHRoaXMuaXNQbGF5SW5pdGlhdGVkKSB7XG4gICAgICAgICAgcGxheWVyLnBhdXNlKCd1aScpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHBsYXllci5wbGF5KCd1aScpO1xuXG4gICAgICAgICAgaWYgKGZpcnN0UGxheSAmJiB0aGlzLmNvbmZpZy5lbnRlckZ1bGxzY3JlZW5PbkluaXRpYWxQbGF5YmFjaykge1xuICAgICAgICAgICAgcGxheWVyLnNldFZpZXdNb2RlKHBsYXllci5leHBvcnRzLlZpZXdNb2RlLkZ1bGxzY3JlZW4pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gVHJhY2sgVUkgc2Vla2luZyBzdGF0dXNcbiAgICB1aW1hbmFnZXIub25TZWVrLnN1YnNjcmliZSgoKSA9PiB7XG4gICAgICBpc1NlZWtpbmcgPSB0cnVlO1xuICAgIH0pO1xuICAgIHVpbWFuYWdlci5vblNlZWtlZC5zdWJzY3JpYmUoKCkgPT4ge1xuICAgICAgaXNTZWVraW5nID0gZmFsc2U7XG4gICAgfSk7XG5cbiAgICAvLyBTdGFydHVwIGluaXRcbiAgICBwbGF5YmFja1N0YXRlSGFuZGxlcigpO1xuICB9XG59XG4iLCJpbXBvcnQge0NvbnRhaW5lciwgQ29udGFpbmVyQ29uZmlnfSBmcm9tICcuL2NvbnRhaW5lcic7XG5pbXBvcnQge0h1Z2VQbGF5YmFja1RvZ2dsZUJ1dHRvbn0gZnJvbSAnLi9odWdlcGxheWJhY2t0b2dnbGVidXR0b24nO1xuXG4vKipcbiAqIEBjYXRlZ29yeSBDb25maWdzXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgUGxheWJhY2tUb2dnbGVPdmVybGF5Q29uZmlnIGV4dGVuZHMgQ29udGFpbmVyQ29uZmlnIHtcbiAgLyoqXG4gICAqIFNwZWNpZnkgd2hldGhlciB0aGUgcGxheWVyIHNob3VsZCBiZSBzZXQgdG8gZW50ZXIgZnVsbHNjcmVlbiBieSBjbGlja2luZyBvbiB0aGUgcGxheWJhY2sgdG9nZ2xlIGJ1dHRvblxuICAgKiB3aGVuIGluaXRpYXRpbmcgdGhlIGluaXRpYWwgcGxheWJhY2suXG4gICAqIERlZmF1bHQgaXMgZmFsc2UuXG4gICAqL1xuICBlbnRlckZ1bGxzY3JlZW5PbkluaXRpYWxQbGF5YmFjaz86IGJvb2xlYW47XG59XG5cbi8qKlxuICogT3ZlcmxheXMgdGhlIHBsYXllciBhbmQgZGlzcGxheXMgZXJyb3IgbWVzc2FnZXMuXG4gKlxuICogQGNhdGVnb3J5IENvbXBvbmVudHNcbiAqL1xuZXhwb3J0IGNsYXNzIFBsYXliYWNrVG9nZ2xlT3ZlcmxheSBleHRlbmRzIENvbnRhaW5lcjxQbGF5YmFja1RvZ2dsZU92ZXJsYXlDb25maWc+IHtcblxuICBwcml2YXRlIHBsYXliYWNrVG9nZ2xlQnV0dG9uOiBIdWdlUGxheWJhY2tUb2dnbGVCdXR0b247XG5cbiAgY29uc3RydWN0b3IoY29uZmlnOiBQbGF5YmFja1RvZ2dsZU92ZXJsYXlDb25maWcgPSB7fSkge1xuICAgIHN1cGVyKGNvbmZpZyk7XG5cbiAgICB0aGlzLnBsYXliYWNrVG9nZ2xlQnV0dG9uID0gbmV3IEh1Z2VQbGF5YmFja1RvZ2dsZUJ1dHRvbih7XG4gICAgICBlbnRlckZ1bGxzY3JlZW5PbkluaXRpYWxQbGF5YmFjazogQm9vbGVhbihjb25maWcuZW50ZXJGdWxsc2NyZWVuT25Jbml0aWFsUGxheWJhY2spLFxuICAgIH0pO1xuXG4gICAgdGhpcy5jb25maWcgPSB0aGlzLm1lcmdlQ29uZmlnKGNvbmZpZywge1xuICAgICAgY3NzQ2xhc3M6ICd1aS1wbGF5YmFja3RvZ2dsZS1vdmVybGF5JyxcbiAgICAgIGNvbXBvbmVudHM6IFt0aGlzLnBsYXliYWNrVG9nZ2xlQnV0dG9uXSxcbiAgICB9LCB0aGlzLmNvbmZpZyk7XG4gIH1cbn0iLCJpbXBvcnQgeyBCdXR0b24sIEJ1dHRvbkNvbmZpZyB9IGZyb20gJy4vYnV0dG9uJztcbmltcG9ydCB7IGkxOG4gfSBmcm9tICcuLi9sb2NhbGl6YXRpb24vaTE4bic7XG5pbXBvcnQgeyBQbGF5ZXJBUEksIFNlZWtFdmVudCwgVGltZVNoaWZ0RXZlbnQgfSBmcm9tICdiaXRtb3Zpbi1wbGF5ZXInO1xuaW1wb3J0IHsgVUlJbnN0YW5jZU1hbmFnZXIgfSBmcm9tICcuLi91aW1hbmFnZXInO1xuaW1wb3J0IHsgUGxheWVyVXRpbHMgfSBmcm9tICcuLi9wbGF5ZXJ1dGlscyc7XG5cbi8qKlxuICogQGNhdGVnb3J5IENvbmZpZ3NcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBRdWlja1NlZWtCdXR0b25Db25maWcgZXh0ZW5kcyBCdXR0b25Db25maWcge1xuICAvKipcbiAgICogU3BlY2lmeSBob3cgbWFueSBzZWNvbmRzIHRoZSBwbGF5ZXIgc2hvdWxkIHNlZWsgZm9yd2FyZC9iYWNrd2FyZHMgaW4gdGhlIHN0cmVhbS5cbiAgICogTmVnYXRpdmUgdmFsdWVzIG1lYW4gYSBiYWNrd2FyZHMgc2VlaywgcG9zaXRpdmUgdmFsdWVzIG1lYW4gYSBmb3J3YXJkIHNlZWsuXG4gICAqIERlZmF1bHQgaXMgLTEwLlxuICAgKi9cbiAgc2Vla1NlY29uZHM/OiBudW1iZXI7XG59XG5cbi8qKlxuICogQGNhdGVnb3J5IEJ1dHRvbnNcbiAqL1xuZXhwb3J0IGNsYXNzIFF1aWNrU2Vla0J1dHRvbiBleHRlbmRzIEJ1dHRvbjxRdWlja1NlZWtCdXR0b25Db25maWc+IHtcbiAgcHJpdmF0ZSBjdXJyZW50U2Vla1RhcmdldDogbnVtYmVyIHwgbnVsbDtcbiAgcHJpdmF0ZSBwbGF5ZXI6IFBsYXllckFQSTtcblxuICBjb25zdHJ1Y3Rvcihjb25maWc6IFF1aWNrU2Vla0J1dHRvbkNvbmZpZyA9IHt9KSB7XG4gICAgc3VwZXIoY29uZmlnKTtcbiAgICB0aGlzLmN1cnJlbnRTZWVrVGFyZ2V0ID0gbnVsbDtcblxuICAgIHRoaXMuY29uZmlnID0gdGhpcy5tZXJnZUNvbmZpZyhcbiAgICAgIGNvbmZpZyxcbiAgICAgIHtcbiAgICAgICAgc2Vla1NlY29uZHM6IC0xMCxcbiAgICAgICAgY3NzQ2xhc3M6ICd1aS1xdWlja3NlZWtidXR0b24nLFxuICAgICAgfSxcbiAgICAgIHRoaXMuY29uZmlnLFxuICAgICk7XG5cbiAgICBjb25zdCBzZWVrRGlyZWN0aW9uID0gdGhpcy5jb25maWcuc2Vla1NlY29uZHMgPCAwID8gJ3Jld2luZCcgOiAnZm9yd2FyZCc7XG5cbiAgICB0aGlzLmNvbmZpZy50ZXh0ID0gdGhpcy5jb25maWcudGV4dCB8fCBpMThuLmdldExvY2FsaXplcihgcXVpY2tzZWVrLiR7c2Vla0RpcmVjdGlvbn1gKTtcbiAgICB0aGlzLmNvbmZpZy5hcmlhTGFiZWwgPSB0aGlzLmNvbmZpZy5hcmlhTGFiZWwgfHwgaTE4bi5nZXRMb2NhbGl6ZXIoYHF1aWNrc2Vlay4ke3NlZWtEaXJlY3Rpb259YCk7XG5cbiAgICB0aGlzLmdldERvbUVsZW1lbnQoKS5kYXRhKHRoaXMucHJlZml4Q3NzKCdzZWVrLWRpcmVjdGlvbicpLCBzZWVrRGlyZWN0aW9uKTtcbiAgfVxuXG4gIGNvbmZpZ3VyZShwbGF5ZXI6IFBsYXllckFQSSwgdWltYW5hZ2VyOiBVSUluc3RhbmNlTWFuYWdlcik6IHZvaWQge1xuICAgIHN1cGVyLmNvbmZpZ3VyZShwbGF5ZXIsIHVpbWFuYWdlcik7XG4gICAgdGhpcy5wbGF5ZXIgPSBwbGF5ZXI7XG5cbiAgICBsZXQgaXNMaXZlOiBib29sZWFuO1xuICAgIGxldCBoYXNUaW1lU2hpZnQ6IGJvb2xlYW47XG5cbiAgICBjb25zdCBzd2l0Y2hWaXNpYmlsaXR5ID0gKGlzTGl2ZTogYm9vbGVhbiwgaGFzVGltZVNoaWZ0OiBib29sZWFuKSA9PiB7XG4gICAgICBpZiAoaXNMaXZlICYmICFoYXNUaW1lU2hpZnQpIHtcbiAgICAgICAgdGhpcy5oaWRlKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnNob3coKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgY29uc3QgdGltZVNoaWZ0RGV0ZWN0b3IgPSBuZXcgUGxheWVyVXRpbHMuVGltZVNoaWZ0QXZhaWxhYmlsaXR5RGV0ZWN0b3IocGxheWVyKTtcbiAgICB0aW1lU2hpZnREZXRlY3Rvci5vblRpbWVTaGlmdEF2YWlsYWJpbGl0eUNoYW5nZWQuc3Vic2NyaWJlKFxuICAgICAgKHNlbmRlciwgYXJnczogUGxheWVyVXRpbHMuVGltZVNoaWZ0QXZhaWxhYmlsaXR5Q2hhbmdlZEFyZ3MpID0+IHtcbiAgICAgICAgaGFzVGltZVNoaWZ0ID0gYXJncy50aW1lU2hpZnRBdmFpbGFibGU7XG4gICAgICAgIHN3aXRjaFZpc2liaWxpdHkoaXNMaXZlLCBoYXNUaW1lU2hpZnQpO1xuICAgICAgfSxcbiAgICApO1xuXG4gICAgbGV0IGxpdmVTdHJlYW1EZXRlY3RvciA9IG5ldyBQbGF5ZXJVdGlscy5MaXZlU3RyZWFtRGV0ZWN0b3IocGxheWVyLCB1aW1hbmFnZXIpO1xuICAgIGxpdmVTdHJlYW1EZXRlY3Rvci5vbkxpdmVDaGFuZ2VkLnN1YnNjcmliZSgoc2VuZGVyLCBhcmdzOiBQbGF5ZXJVdGlscy5MaXZlU3RyZWFtRGV0ZWN0b3JFdmVudEFyZ3MpID0+IHtcbiAgICAgIGlzTGl2ZSA9IGFyZ3MubGl2ZTtcbiAgICAgIHN3aXRjaFZpc2liaWxpdHkoaXNMaXZlLCBoYXNUaW1lU2hpZnQpO1xuICAgIH0pO1xuXG4gICAgLy8gSW5pdGlhbCBkZXRlY3Rpb25cbiAgICB0aW1lU2hpZnREZXRlY3Rvci5kZXRlY3QoKTtcbiAgICBsaXZlU3RyZWFtRGV0ZWN0b3IuZGV0ZWN0KCk7XG5cbiAgICB0aGlzLm9uQ2xpY2suc3Vic2NyaWJlKCgpID0+IHtcbiAgICAgIGlmIChpc0xpdmUgJiYgIWhhc1RpbWVTaGlmdCkge1xuICAgICAgICAvLyBJZiBubyBEVlIgd2luZG93IGlzIGF2YWlsYWJsZSwgdGhlIGJ1dHRvbiBzaG91bGQgYmUgaGlkZGVuIGFueXdheSwgc28gdGhpcyBpcyB0byBiZSBhYnNvbHV0ZWx5IHN1cmVcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBpZiAoaXNMaXZlICYmIHRoaXMuY29uZmlnLnNlZWtTZWNvbmRzID4gMCAmJiBwbGF5ZXIuZ2V0VGltZVNoaWZ0KCkgPT09IDApIHtcbiAgICAgICAgLy8gRG9uJ3QgZG8gYW55dGhpbmcgaWYgdGhlIHBsYXllciBpcyBhbHJlYWR5IG9uIHRoZSBsaXZlIGVkZ2VcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBjdXJyZW50UG9zaXRpb24gPVxuICAgICAgICB0aGlzLmN1cnJlbnRTZWVrVGFyZ2V0ICE9PSBudWxsXG4gICAgICAgICAgPyB0aGlzLmN1cnJlbnRTZWVrVGFyZ2V0XG4gICAgICAgICAgOiBpc0xpdmVcbiAgICAgICAgICAgID8gcGxheWVyLmdldFRpbWVTaGlmdCgpXG4gICAgICAgICAgICA6IHBsYXllci5nZXRDdXJyZW50VGltZSgpO1xuXG4gICAgICBjb25zdCBuZXdTZWVrVGltZSA9IGN1cnJlbnRQb3NpdGlvbiArIHRoaXMuY29uZmlnLnNlZWtTZWNvbmRzO1xuXG4gICAgICBpZiAoaXNMaXZlKSB7XG4gICAgICAgIGNvbnN0IGNsYW1wZWRWYWx1ZSA9IFBsYXllclV0aWxzLmNsYW1wVmFsdWVUb1JhbmdlKG5ld1NlZWtUaW1lLCBwbGF5ZXIuZ2V0TWF4VGltZVNoaWZ0KCksIDApO1xuICAgICAgICBwbGF5ZXIudGltZVNoaWZ0KGNsYW1wZWRWYWx1ZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCBjbGFtcGVkVmFsdWUgPSBQbGF5ZXJVdGlscy5jbGFtcFZhbHVlVG9SYW5nZShuZXdTZWVrVGltZSwgMCwgcGxheWVyLmdldER1cmF0aW9uKCkpO1xuICAgICAgICBwbGF5ZXIuc2VlayhjbGFtcGVkVmFsdWUpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgdGhpcy5wbGF5ZXIub24odGhpcy5wbGF5ZXIuZXhwb3J0cy5QbGF5ZXJFdmVudC5TZWVrLCB0aGlzLm9uU2Vlayk7XG4gICAgdGhpcy5wbGF5ZXIub24odGhpcy5wbGF5ZXIuZXhwb3J0cy5QbGF5ZXJFdmVudC5TZWVrZWQsIHRoaXMub25TZWVrZWRPclRpbWVTaGlmdGVkKTtcbiAgICB0aGlzLnBsYXllci5vbih0aGlzLnBsYXllci5leHBvcnRzLlBsYXllckV2ZW50LlRpbWVTaGlmdCwgdGhpcy5vblRpbWVTaGlmdCk7XG4gICAgdGhpcy5wbGF5ZXIub24odGhpcy5wbGF5ZXIuZXhwb3J0cy5QbGF5ZXJFdmVudC5UaW1lU2hpZnRlZCwgdGhpcy5vblNlZWtlZE9yVGltZVNoaWZ0ZWQpO1xuICB9XG5cbiAgcHJpdmF0ZSBvblNlZWsgPSAoZXZlbnQ6IFNlZWtFdmVudCk6IHZvaWQgPT4ge1xuICAgIHRoaXMuY3VycmVudFNlZWtUYXJnZXQgPSBldmVudC5zZWVrVGFyZ2V0O1xuICB9O1xuXG4gIHByaXZhdGUgb25TZWVrZWRPclRpbWVTaGlmdGVkID0gKCkgPT4ge1xuICAgIHRoaXMuY3VycmVudFNlZWtUYXJnZXQgPSBudWxsO1xuICB9O1xuXG4gIHByaXZhdGUgb25UaW1lU2hpZnQgPSAoZXZlbnQ6IFRpbWVTaGlmdEV2ZW50KTogdm9pZCA9PiB7XG4gICAgdGhpcy5jdXJyZW50U2Vla1RhcmdldCA9IHRoaXMucGxheWVyLmdldFRpbWVTaGlmdCgpICsgKGV2ZW50LnRhcmdldCAtIGV2ZW50LnBvc2l0aW9uKTtcbiAgfVxuXG4gIHJlbGVhc2UoKTogdm9pZCB7XG4gICAgdGhpcy5wbGF5ZXIub2ZmKHRoaXMucGxheWVyLmV4cG9ydHMuUGxheWVyRXZlbnQuU2VlaywgdGhpcy5vblNlZWspO1xuICAgIHRoaXMucGxheWVyLm9mZih0aGlzLnBsYXllci5leHBvcnRzLlBsYXllckV2ZW50LlNlZWtlZCwgdGhpcy5vblNlZWtlZE9yVGltZVNoaWZ0ZWQpO1xuICAgIHRoaXMucGxheWVyLm9mZih0aGlzLnBsYXllci5leHBvcnRzLlBsYXllckV2ZW50LlRpbWVTaGlmdCwgdGhpcy5vblRpbWVTaGlmdCk7XG4gICAgdGhpcy5wbGF5ZXIub2ZmKHRoaXMucGxheWVyLmV4cG9ydHMuUGxheWVyRXZlbnQuVGltZVNoaWZ0ZWQsIHRoaXMub25TZWVrZWRPclRpbWVTaGlmdGVkKTtcbiAgICB0aGlzLmN1cnJlbnRTZWVrVGFyZ2V0ID0gbnVsbDtcbiAgICB0aGlzLnBsYXllciA9IG51bGw7XG4gIH1cbn1cbiIsImltcG9ydCB7Q29udGFpbmVyQ29uZmlnLCBDb250YWluZXJ9IGZyb20gJy4vY29udGFpbmVyJztcbmltcG9ydCB7Q29tcG9uZW50LCBDb21wb25lbnRDb25maWd9IGZyb20gJy4vY29tcG9uZW50JztcbmltcG9ydCB7RE9NfSBmcm9tICcuLi9kb20nO1xuaW1wb3J0IHtVSUluc3RhbmNlTWFuYWdlcn0gZnJvbSAnLi4vdWltYW5hZ2VyJztcbmltcG9ydCB7U3RyaW5nVXRpbHN9IGZyb20gJy4uL3N0cmluZ3V0aWxzJztcbmltcG9ydCB7SHVnZVJlcGxheUJ1dHRvbn0gZnJvbSAnLi9odWdlcmVwbGF5YnV0dG9uJztcbmltcG9ydCB7IFVJUmVjb21tZW5kYXRpb25Db25maWcgfSBmcm9tICcuLi91aWNvbmZpZyc7XG5pbXBvcnQgeyBQbGF5ZXJBUEkgfSBmcm9tICdiaXRtb3Zpbi1wbGF5ZXInO1xuXG4vKipcbiAqIE92ZXJsYXlzIHRoZSBwbGF5ZXIgYW5kIGRpc3BsYXlzIHJlY29tbWVuZGVkIHZpZGVvcy5cbiAqXG4gKiBAY2F0ZWdvcnkgQ29udGFpbmVyc1xuICovXG5leHBvcnQgY2xhc3MgUmVjb21tZW5kYXRpb25PdmVybGF5IGV4dGVuZHMgQ29udGFpbmVyPENvbnRhaW5lckNvbmZpZz4ge1xuXG4gIHByaXZhdGUgcmVwbGF5QnV0dG9uOiBIdWdlUmVwbGF5QnV0dG9uO1xuXG4gIGNvbnN0cnVjdG9yKGNvbmZpZzogQ29udGFpbmVyQ29uZmlnID0ge30pIHtcbiAgICBzdXBlcihjb25maWcpO1xuXG4gICAgdGhpcy5yZXBsYXlCdXR0b24gPSBuZXcgSHVnZVJlcGxheUJ1dHRvbigpO1xuXG4gICAgdGhpcy5jb25maWcgPSB0aGlzLm1lcmdlQ29uZmlnKGNvbmZpZywge1xuICAgICAgY3NzQ2xhc3M6ICd1aS1yZWNvbW1lbmRhdGlvbi1vdmVybGF5JyxcbiAgICAgIGhpZGRlbjogdHJ1ZSxcbiAgICAgIGNvbXBvbmVudHM6IFt0aGlzLnJlcGxheUJ1dHRvbl0sXG4gICAgfSwgdGhpcy5jb25maWcpO1xuICB9XG5cbiAgY29uZmlndXJlKHBsYXllcjogUGxheWVyQVBJLCB1aW1hbmFnZXI6IFVJSW5zdGFuY2VNYW5hZ2VyKTogdm9pZCB7XG4gICAgc3VwZXIuY29uZmlndXJlKHBsYXllciwgdWltYW5hZ2VyKTtcblxuICAgIGxldCBjbGVhclJlY29tbWVuZGF0aW9ucyA9ICgpID0+IHtcbiAgICAgIGZvciAobGV0IGNvbXBvbmVudCBvZiB0aGlzLmdldENvbXBvbmVudHMoKS5zbGljZSgpKSB7XG4gICAgICAgIGlmIChjb21wb25lbnQgaW5zdGFuY2VvZiBSZWNvbW1lbmRhdGlvbkl0ZW0pIHtcbiAgICAgICAgICB0aGlzLnJlbW92ZUNvbXBvbmVudChjb21wb25lbnQpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICB0aGlzLnVwZGF0ZUNvbXBvbmVudHMoKTtcbiAgICAgIHRoaXMuZ2V0RG9tRWxlbWVudCgpLnJlbW92ZUNsYXNzKHRoaXMucHJlZml4Q3NzKCdyZWNvbW1lbmRhdGlvbnMnKSk7XG4gICAgfTtcblxuICAgIGxldCBzZXR1cFJlY29tbWVuZGF0aW9ucyA9ICgpID0+IHtcbiAgICAgIGNsZWFyUmVjb21tZW5kYXRpb25zKCk7XG5cbiAgICAgIGNvbnN0IHJlY29tbWVuZGF0aW9ucyA9IHVpbWFuYWdlci5nZXRDb25maWcoKS5yZWNvbW1lbmRhdGlvbnM7XG5cbiAgICAgIGlmIChyZWNvbW1lbmRhdGlvbnMubGVuZ3RoID4gMCkge1xuICAgICAgICBsZXQgaW5kZXggPSAxO1xuICAgICAgICBmb3IgKGxldCBpdGVtIG9mIHJlY29tbWVuZGF0aW9ucykge1xuICAgICAgICAgIHRoaXMuYWRkQ29tcG9uZW50KG5ldyBSZWNvbW1lbmRhdGlvbkl0ZW0oe1xuICAgICAgICAgICAgaXRlbUNvbmZpZzogaXRlbSxcbiAgICAgICAgICAgIGNzc0NsYXNzZXM6IFsncmVjb21tZW5kYXRpb24taXRlbS0nICsgKGluZGV4KyspXSxcbiAgICAgICAgICB9KSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy51cGRhdGVDb21wb25lbnRzKCk7IC8vIGNyZWF0ZSBjb250YWluZXIgRE9NIGVsZW1lbnRzXG5cbiAgICAgICAgdGhpcy5nZXREb21FbGVtZW50KCkuYWRkQ2xhc3ModGhpcy5wcmVmaXhDc3MoJ3JlY29tbWVuZGF0aW9ucycpKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgdWltYW5hZ2VyLmdldENvbmZpZygpLmV2ZW50cy5vblVwZGF0ZWQuc3Vic2NyaWJlKHNldHVwUmVjb21tZW5kYXRpb25zKTtcbiAgICAvLyBSZW1vdmUgcmVjb21tZW5kYXRpb25zIGFuZCBoaWRlIG92ZXJsYXkgd2hlbiBzb3VyY2UgaXMgdW5sb2FkZWRcbiAgICBwbGF5ZXIub24ocGxheWVyLmV4cG9ydHMuUGxheWVyRXZlbnQuU291cmNlVW5sb2FkZWQsICgpID0+IHtcbiAgICAgIGNsZWFyUmVjb21tZW5kYXRpb25zKCk7XG4gICAgICB0aGlzLmhpZGUoKTtcbiAgICB9KTtcbiAgICAvLyBEaXNwbGF5IHJlY29tbWVuZGF0aW9ucyB3aGVuIHBsYXliYWNrIGhhcyBmaW5pc2hlZFxuICAgIHBsYXllci5vbihwbGF5ZXIuZXhwb3J0cy5QbGF5ZXJFdmVudC5QbGF5YmFja0ZpbmlzaGVkLCAoKSA9PiB7XG4gICAgICB0aGlzLnNob3coKTtcbiAgICB9KTtcbiAgICAvLyBIaWRlIHJlY29tbWVuZGF0aW9ucyB3aGVuIHBsYXliYWNrIHN0YXJ0cywgZS5nLiBhIHJlc3RhcnRcbiAgICBwbGF5ZXIub24ocGxheWVyLmV4cG9ydHMuUGxheWVyRXZlbnQuUGxheSwgKCkgPT4ge1xuICAgICAgdGhpcy5oaWRlKCk7XG4gICAgfSk7XG5cbiAgICAvLyBJbml0IG9uIHN0YXJ0dXBcbiAgICBzZXR1cFJlY29tbWVuZGF0aW9ucygpO1xuICB9XG59XG5cbi8qKlxuICogQ29uZmlndXJhdGlvbiBpbnRlcmZhY2UgZm9yIHRoZSB7QGxpbmsgUmVjb21tZW5kYXRpb25JdGVtfVxuICovXG5pbnRlcmZhY2UgUmVjb21tZW5kYXRpb25JdGVtQ29uZmlnIGV4dGVuZHMgQ29tcG9uZW50Q29uZmlnIHtcbiAgaXRlbUNvbmZpZzogVUlSZWNvbW1lbmRhdGlvbkNvbmZpZztcbn1cblxuLyoqXG4gKiBBbiBpdGVtIG9mIHRoZSB7QGxpbmsgUmVjb21tZW5kYXRpb25PdmVybGF5fS4gVXNlZCBvbmx5IGludGVybmFsbHkgaW4ge0BsaW5rIFJlY29tbWVuZGF0aW9uT3ZlcmxheX0uXG4gKi9cbmNsYXNzIFJlY29tbWVuZGF0aW9uSXRlbSBleHRlbmRzIENvbXBvbmVudDxSZWNvbW1lbmRhdGlvbkl0ZW1Db25maWc+IHtcblxuICBjb25zdHJ1Y3Rvcihjb25maWc6IFJlY29tbWVuZGF0aW9uSXRlbUNvbmZpZykge1xuICAgIHN1cGVyKGNvbmZpZyk7XG5cbiAgICB0aGlzLmNvbmZpZyA9IHRoaXMubWVyZ2VDb25maWcoY29uZmlnLCB7XG4gICAgICBjc3NDbGFzczogJ3VpLXJlY29tbWVuZGF0aW9uLWl0ZW0nLFxuICAgICAgaXRlbUNvbmZpZzogbnVsbCwgLy8gdGhpcyBtdXN0IGJlIHBhc3NlZCBpbiBmcm9tIG91dHNpZGVcbiAgICB9LCB0aGlzLmNvbmZpZyk7XG4gIH1cblxuICBwcm90ZWN0ZWQgdG9Eb21FbGVtZW50KCk6IERPTSB7XG4gICAgbGV0IGNvbmZpZyA9IHRoaXMuY29uZmlnLml0ZW1Db25maWc7XG5cbiAgICBsZXQgaXRlbUVsZW1lbnQgPSBuZXcgRE9NKCdhJywge1xuICAgICAgJ2lkJzogdGhpcy5jb25maWcuaWQsXG4gICAgICAnY2xhc3MnOiB0aGlzLmdldENzc0NsYXNzZXMoKSxcbiAgICAgICdocmVmJzogY29uZmlnLnVybCxcbiAgICB9LCB0aGlzKS5jc3MoeyAnYmFja2dyb3VuZC1pbWFnZSc6IGB1cmwoJHtjb25maWcudGh1bWJuYWlsfSlgIH0pO1xuXG4gICAgbGV0IGJnRWxlbWVudCA9IG5ldyBET00oJ2RpdicsIHtcbiAgICAgICdjbGFzcyc6IHRoaXMucHJlZml4Q3NzKCdiYWNrZ3JvdW5kJyksXG4gICAgfSk7XG4gICAgaXRlbUVsZW1lbnQuYXBwZW5kKGJnRWxlbWVudCk7XG5cbiAgICBsZXQgdGl0bGVFbGVtZW50ID0gbmV3IERPTSgnc3BhbicsIHtcbiAgICAgICdjbGFzcyc6IHRoaXMucHJlZml4Q3NzKCd0aXRsZScpLFxuICAgIH0pLmFwcGVuZChuZXcgRE9NKCdzcGFuJywge1xuICAgICAgJ2NsYXNzJzogdGhpcy5wcmVmaXhDc3MoJ2lubmVydGl0bGUnKSxcbiAgICB9KS5odG1sKGNvbmZpZy50aXRsZSkpO1xuICAgIGl0ZW1FbGVtZW50LmFwcGVuZCh0aXRsZUVsZW1lbnQpO1xuXG4gICAgbGV0IHRpbWVFbGVtZW50ID0gbmV3IERPTSgnc3BhbicsIHtcbiAgICAgICdjbGFzcyc6IHRoaXMucHJlZml4Q3NzKCdkdXJhdGlvbicpLFxuICAgIH0pLmFwcGVuZChuZXcgRE9NKCdzcGFuJywge1xuICAgICAgJ2NsYXNzJzogdGhpcy5wcmVmaXhDc3MoJ2lubmVyZHVyYXRpb24nKSxcbiAgICB9KS5odG1sKGNvbmZpZy5kdXJhdGlvbiA/IFN0cmluZ1V0aWxzLnNlY29uZHNUb1RpbWUoY29uZmlnLmR1cmF0aW9uKSA6ICcnKSk7XG4gICAgaXRlbUVsZW1lbnQuYXBwZW5kKHRpbWVFbGVtZW50KTtcblxuICAgIHJldHVybiBpdGVtRWxlbWVudDtcbiAgfVxufSIsImltcG9ydCB7IEJ1dHRvbkNvbmZpZywgQnV0dG9uIH0gZnJvbSAnLi9idXR0b24nO1xuaW1wb3J0IHsgVUlJbnN0YW5jZU1hbmFnZXIgfSBmcm9tICcuLi91aW1hbmFnZXInO1xuaW1wb3J0IHsgUGxheWVyQVBJIH0gZnJvbSAnYml0bW92aW4tcGxheWVyJztcbmltcG9ydCB7IGkxOG4gfSBmcm9tICcuLi9sb2NhbGl6YXRpb24vaTE4bic7XG5pbXBvcnQgeyBQbGF5ZXJVdGlscyB9IGZyb20gJy4uL3BsYXllcnV0aWxzJztcbmltcG9ydCBMaXZlU3RyZWFtRGV0ZWN0b3JFdmVudEFyZ3MgPSBQbGF5ZXJVdGlscy5MaXZlU3RyZWFtRGV0ZWN0b3JFdmVudEFyZ3M7XG5cbi8qKlxuICogQSBidXR0b24gdG8gcGxheS9yZXBsYXkgYSB2aWRlby5cbiAqXG4gKiBAY2F0ZWdvcnkgQnV0dG9uc1xuICovXG5leHBvcnQgY2xhc3MgUmVwbGF5QnV0dG9uIGV4dGVuZHMgQnV0dG9uPEJ1dHRvbkNvbmZpZz4ge1xuXG4gIGNvbnN0cnVjdG9yKGNvbmZpZzogQnV0dG9uQ29uZmlnID0ge30pIHtcbiAgICBzdXBlcihjb25maWcpO1xuXG4gICAgdGhpcy5jb25maWcgPSB0aGlzLm1lcmdlQ29uZmlnKGNvbmZpZywge1xuICAgICAgY3NzQ2xhc3M6ICd1aS1yZXBsYXlidXR0b24nLFxuICAgICAgdGV4dDogaTE4bi5nZXRMb2NhbGl6ZXIoJ3JlcGxheScpLFxuICAgICAgYXJpYUxhYmVsOiBpMThuLmdldExvY2FsaXplcigncmVwbGF5JyksXG4gICAgfSwgdGhpcy5jb25maWcpO1xuICB9XG5cbiAgY29uZmlndXJlKHBsYXllcjogUGxheWVyQVBJLCB1aW1hbmFnZXI6IFVJSW5zdGFuY2VNYW5hZ2VyKTogdm9pZCB7XG4gICAgc3VwZXIuY29uZmlndXJlKHBsYXllciwgdWltYW5hZ2VyKTtcblxuICAgIGlmIChwbGF5ZXIuaXNMaXZlKCkpIHtcbiAgICAgIHRoaXMuaGlkZSgpO1xuICAgIH1cblxuICAgIGNvbnN0IGxpdmVTdHJlYW1EZXRlY3RvciA9IG5ldyBQbGF5ZXJVdGlscy5MaXZlU3RyZWFtRGV0ZWN0b3IocGxheWVyLCB1aW1hbmFnZXIpO1xuICAgIGxpdmVTdHJlYW1EZXRlY3Rvci5vbkxpdmVDaGFuZ2VkLnN1YnNjcmliZSgoc2VuZGVyLCBhcmdzOiBMaXZlU3RyZWFtRGV0ZWN0b3JFdmVudEFyZ3MpID0+IHtcbiAgICAgIGlmIChhcmdzLmxpdmUpIHtcbiAgICAgICAgdGhpcy5oaWRlKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnNob3coKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHRoaXMub25DbGljay5zdWJzY3JpYmUoKCkgPT4ge1xuICAgICAgaWYgKCFwbGF5ZXIuaGFzRW5kZWQoKSkge1xuICAgICAgICBwbGF5ZXIuc2VlaygwKTtcbiAgICAgICAgLy8gTm90IGNhbGxpbmcgYHBsYXlgIHdpbGwga2VlcCB0aGUgcGxheS9wYXVzZSBzdGF0ZSBhcyBpc1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gSWYgcGxheWJhY2sgaGFzIGFscmVhZHkgZW5kZWQsIGNhbGxpbmcgYHBsYXlgIHdpbGwgYXV0b21hdGljYWxseSByZXN0YXJ0IGZyb20gdGhlIGJlZ2lubmluZ1xuICAgICAgICBwbGF5ZXIucGxheSgndWknKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxufVxuIiwiaW1wb3J0IHsgRXh0ZW5kZWRQbGF5ZXJBUEksIEdyb3VwUGxheWJhY2tTdXNwZW5zaW9uLCBHcm91cFBsYXliYWNrU3VzcGVuc2lvblJlYXNvbiB9IGZyb20gJy4vLi4vZ3JvdXBwbGF5YmFja2FwaSc7XG5pbXBvcnQgeyBDb21wb25lbnQsIENvbXBvbmVudENvbmZpZyB9IGZyb20gJy4vY29tcG9uZW50JztcbmltcG9ydCB7IERPTSB9IGZyb20gJy4uL2RvbSc7XG5pbXBvcnQgeyBFdmVudCwgRXZlbnREaXNwYXRjaGVyLCBOb0FyZ3MgfSBmcm9tICcuLi9ldmVudGRpc3BhdGNoZXInO1xuaW1wb3J0IHsgU2Vla0JhckxhYmVsIH0gZnJvbSAnLi9zZWVrYmFybGFiZWwnO1xuaW1wb3J0IHsgVUlJbnN0YW5jZU1hbmFnZXIsIFNlZWtQcmV2aWV3QXJncyB9IGZyb20gJy4uL3VpbWFuYWdlcic7XG5pbXBvcnQgeyBUaW1lb3V0IH0gZnJvbSAnLi4vdGltZW91dCc7XG5pbXBvcnQgeyBQbGF5ZXJVdGlscyB9IGZyb20gJy4uL3BsYXllcnV0aWxzJztcbmltcG9ydCBUaW1lU2hpZnRBdmFpbGFiaWxpdHlDaGFuZ2VkQXJncyA9IFBsYXllclV0aWxzLlRpbWVTaGlmdEF2YWlsYWJpbGl0eUNoYW5nZWRBcmdzO1xuaW1wb3J0IExpdmVTdHJlYW1EZXRlY3RvckV2ZW50QXJncyA9IFBsYXllclV0aWxzLkxpdmVTdHJlYW1EZXRlY3RvckV2ZW50QXJncztcbmltcG9ydCB7IFRpbWVsaW5lTWFya2VyIH0gZnJvbSAnLi4vdWljb25maWcnO1xuaW1wb3J0IHsgUGxheWVyQVBJLCBQbGF5ZXJFdmVudEJhc2UgfSBmcm9tICdiaXRtb3Zpbi1wbGF5ZXInO1xuaW1wb3J0IHsgU3RyaW5nVXRpbHMgfSBmcm9tICcuLi9zdHJpbmd1dGlscyc7XG5pbXBvcnQgeyBTZWVrQmFyVHlwZSwgU2Vla0JhckNvbnRyb2xsZXIgfSBmcm9tICcuL3NlZWtiYXJjb250cm9sbGVyJztcbmltcG9ydCB7IGkxOG4gfSBmcm9tICcuLi9sb2NhbGl6YXRpb24vaTE4bic7XG5pbXBvcnQgeyBCcm93c2VyVXRpbHMgfSBmcm9tICcuLi9icm93c2VydXRpbHMnO1xuaW1wb3J0IHsgVGltZWxpbmVNYXJrZXJzSGFuZGxlciB9IGZyb20gJy4vdGltZWxpbmVtYXJrZXJzaGFuZGxlcic7XG5pbXBvcnQgeyBnZXRNaW5CdWZmZXJMZXZlbCB9IGZyb20gJy4vc2Vla2JhcmJ1ZmZlcmxldmVsJztcblxuLyoqXG4gKiBDb25maWd1cmF0aW9uIGludGVyZmFjZSBmb3IgdGhlIHtAbGluayBTZWVrQmFyfSBjb21wb25lbnQuXG4gKlxuICogQGNhdGVnb3J5IENvbmZpZ3NcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBTZWVrQmFyQ29uZmlnIGV4dGVuZHMgQ29tcG9uZW50Q29uZmlnIHtcbiAgLyoqXG4gICAqIFRoZSBsYWJlbCBhYm92ZSB0aGUgc2VlayBwb3NpdGlvbi5cbiAgICovXG4gIGxhYmVsPzogU2Vla0JhckxhYmVsO1xuICAvKipcbiAgICogQmFyIHdpbGwgYmUgdmVydGljYWwgaW5zdGVhZCBvZiBob3Jpem9udGFsIGlmIHNldCB0byB0cnVlLlxuICAgKi9cbiAgdmVydGljYWw/OiBib29sZWFuO1xuICAvKipcbiAgICogVGhlIGludGVydmFsIGluIG1pbGxpc2Vjb25kcyBpbiB3aGljaCB0aGUgcGxheWJhY2sgcG9zaXRpb24gb24gdGhlIHNlZWsgYmFyIHdpbGwgYmUgdXBkYXRlZC4gVGhlIHNob3J0ZXIgdGhlXG4gICAqIGludGVydmFsLCB0aGUgc21vb3RoZXIgaXQgbG9va3MgYW5kIHRoZSBtb3JlIHJlc291cmNlIGludGVuc2UgaXQgaXMuIFRoZSB1cGRhdGUgaW50ZXJ2YWwgd2lsbCBiZSBrZXB0IGFzIHN0ZWFkeVxuICAgKiBhcyBwb3NzaWJsZSB0byBhdm9pZCBqaXR0ZXIuXG4gICAqIFNldCB0byAtMSB0byBkaXNhYmxlIHNtb290aCB1cGRhdGluZyBhbmQgdXBkYXRlIGl0IG9uIHBsYXllciBUaW1lQ2hhbmdlZCBldmVudHMgaW5zdGVhZC5cbiAgICogRGVmYXVsdDogNTAgKDUwbXMgPSAyMGZwcykuXG4gICAqL1xuICBzbW9vdGhQbGF5YmFja1Bvc2l0aW9uVXBkYXRlSW50ZXJ2YWxNcz86IG51bWJlcjtcblxuICAvKipcbiAgICogVXNlZCBmb3Igc2Vla0JhciBjb250cm9sIGluY3JlbWVudHMgYW5kIGRlY3JlbWVudHNcbiAgICovXG4gIGtleVN0ZXBJbmNyZW1lbnRzPzogeyBsZWZ0UmlnaHQ6IG51bWJlciwgdXBEb3duOiBudW1iZXIgfTtcblxuICAvKipcbiAgICogVXNlZCB0byBlbmFibGUvZGlzYWJsZSBzbmFwcGluZyB0byBtYXJrZXJzIG9uIHRoZSBzZWVrIGJhciB3aGVuIHNlZWtpbmcgbmVhciB0aGVtLlxuICAgKiBEZWZhdWx0OiB0cnVlXG4gICAqL1xuICBzbmFwcGluZ0VuYWJsZWQ/OiBib29sZWFuO1xuXG4gIC8qKlxuICAgKiBEZWZpbmVzIHRvbGVyYW5jZSBmb3Igc25hcHBpbmcgdG8gbWFya2VycywgaWYgc25hcHBpbmcgdG8gc2VlayBiYXIgbWFya2VycyBpcyBlbmFibGVkLlxuICAgKi9cbiAgc25hcHBpbmdSYW5nZT86IG51bWJlcjtcblxuICAvKipcbiAgICogVXNlZCB0byBlbmFibGUvZGlzYWJsZSBzZWVrIHByZXZpZXdcbiAgICovXG4gIGVuYWJsZVNlZWtQcmV2aWV3PzogYm9vbGVhbjtcbn1cblxuLyoqXG4gKiBFdmVudCBhcmd1bWVudCBpbnRlcmZhY2UgZm9yIGEgc2VlayBwcmV2aWV3IGV2ZW50LlxuICovXG5leHBvcnQgaW50ZXJmYWNlIFNlZWtQcmV2aWV3RXZlbnRBcmdzIGV4dGVuZHMgU2Vla1ByZXZpZXdBcmdzIHtcbiAgLyoqXG4gICAqIFRlbGxzIGlmIHRoZSBzZWVrIHByZXZpZXcgZXZlbnQgY29tZXMgZnJvbSBhIHNjcnViYmluZy5cbiAgICovXG4gIHNjcnViYmluZzogYm9vbGVhbjtcbn1cblxuLyoqXG4gKiBAY2F0ZWdvcnkgQ29tcG9uZW50c1xuICovXG5leHBvcnQgaW50ZXJmYWNlIFNlZWtCYXJNYXJrZXIge1xuICBtYXJrZXI6IFRpbWVsaW5lTWFya2VyO1xuICBwb3NpdGlvbjogbnVtYmVyO1xuICBkdXJhdGlvbj86IG51bWJlcjtcbiAgZWxlbWVudD86IERPTTtcbn1cblxuLyoqXG4gKiBBIHNlZWsgYmFyIHRvIHNlZWsgd2l0aGluIHRoZSBwbGF5ZXIncyBtZWRpYS4gSXQgZGlzcGxheXMgdGhlIGN1cnJlbnQgcGxheWJhY2sgcG9zaXRpb24sIGFtb3VudCBvZiBidWZmZWQgZGF0YSwgc2Vla1xuICogdGFyZ2V0LCBhbmQga2VlcHMgc3RhdHVzIGFib3V0IGFuIG9uZ29pbmcgc2Vlay5cbiAqXG4gKiBUaGUgc2VlayBiYXIgZGlzcGxheXMgZGlmZmVyZW50ICdiYXJzJzpcbiAqICAtIHRoZSBwbGF5YmFjayBwb3NpdGlvbiwgaS5lLiB0aGUgcG9zaXRpb24gaW4gdGhlIG1lZGlhIGF0IHdoaWNoIHRoZSBwbGF5ZXIgY3VycmVudCBwbGF5YmFjayBwb2ludGVyIGlzIHBvc2l0aW9uZWRcbiAqICAtIHRoZSBidWZmZXIgcG9zaXRpb24sIHdoaWNoIHVzdWFsbHkgaXMgdGhlIHBsYXliYWNrIHBvc2l0aW9uIHBsdXMgdGhlIHRpbWUgc3BhbiB0aGF0IGlzIGFscmVhZHkgYnVmZmVyZWQgYWhlYWRcbiAqICAtIHRoZSBzZWVrIHBvc2l0aW9uLCB1c2VkIHRvIHByZXZpZXcgdG8gd2hlcmUgaW4gdGhlIHRpbWVsaW5lIGEgc2VlayB3aWxsIGp1bXAgdG9cbiAqXG4gKiAgQGNhdGVnb3J5IENvbXBvbmVudHNcbiAqL1xuZXhwb3J0IGNsYXNzIFNlZWtCYXIgZXh0ZW5kcyBDb21wb25lbnQ8U2Vla0JhckNvbmZpZz4ge1xuXG4gIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgU01PT1RIX1BMQVlCQUNLX1BPU0lUSU9OX1VQREFURV9ESVNBQkxFRCA9IC0xO1xuXG4gIC8qKlxuICAgKiBUaGUgQ1NTIGNsYXNzIHRoYXQgaXMgYWRkZWQgdG8gdGhlIERPTSBlbGVtZW50IHdoaWxlIHRoZSBzZWVrIGJhciBpcyBpbiAnc2Vla2luZycgc3RhdGUuXG4gICAqL1xuICBwcml2YXRlIHN0YXRpYyByZWFkb25seSBDTEFTU19TRUVLSU5HID0gJ3NlZWtpbmcnO1xuXG4gIHByaXZhdGUgc2Vla0JhcjogRE9NO1xuICBwcml2YXRlIHNlZWtCYXJQbGF5YmFja1Bvc2l0aW9uOiBET007XG4gIHByaXZhdGUgc2Vla0JhclBsYXliYWNrUG9zaXRpb25NYXJrZXI6IERPTTtcbiAgcHJpdmF0ZSBzZWVrQmFyQnVmZmVyUG9zaXRpb246IERPTTtcbiAgcHJpdmF0ZSBzZWVrQmFyU2Vla1Bvc2l0aW9uOiBET007XG4gIHByaXZhdGUgc2Vla0JhckJhY2tkcm9wOiBET007XG5cbiAgcHJpdmF0ZSBsYWJlbDogU2Vla0JhckxhYmVsO1xuXG4gIHByaXZhdGUgc2Vla0Jhck1hcmtlcnNDb250YWluZXI6IERPTTtcbiAgcHJpdmF0ZSB0aW1lbGluZU1hcmtlcnNIYW5kbGVyOiBUaW1lbGluZU1hcmtlcnNIYW5kbGVyO1xuXG4gIHByaXZhdGUgdWlCb3VuZGluZ1JlY3Q6IERPTVJlY3Q7XG5cbiAgcHJpdmF0ZSBwbGF5ZXI6IFBsYXllckFQSTtcbiAgcHJpdmF0ZSB1aU1hbmFnZXI6IFVJSW5zdGFuY2VNYW5hZ2VyO1xuXG4gIHByb3RlY3RlZCBzZWVrQmFyVHlwZTogU2Vla0JhclR5cGU7XG5cbiAgcHJvdGVjdGVkIGlzVWlTaG93bjogYm9vbGVhbjtcblxuICAvKipcbiAgICogQnVmZmVyIG9mIHRoZSB0aGUgY3VycmVudCBwbGF5YmFjayBwb3NpdGlvbi4gVGhlIHBvc2l0aW9uIG11c3QgYmUgYnVmZmVyZWQgaW4gY2FzZSB0aGUgZWxlbWVudFxuICAgKiBuZWVkcyB0byBiZSByZWZyZXNoZWQgd2l0aCB7QGxpbmsgI3JlZnJlc2hQbGF5YmFja1Bvc2l0aW9ufS5cbiAgICogQHR5cGUge251bWJlcn1cbiAgICovXG4gIHByaXZhdGUgcGxheWJhY2tQb3NpdGlvblBlcmNlbnRhZ2UgPSAwO1xuXG4gIHByaXZhdGUgc21vb3RoUGxheWJhY2tQb3NpdGlvblVwZGF0ZXI6IFRpbWVvdXQ7XG4gIHByaXZhdGUgcGF1c2VkVGltZXNoaWZ0VXBkYXRlcjogVGltZW91dDtcblxuICBwcml2YXRlIGlzVXNlclNlZWtpbmcgPSBmYWxzZTtcblxuICBwcml2YXRlIHNlZWtCYXJFdmVudHMgPSB7XG4gICAgLyoqXG4gICAgICogRmlyZWQgd2hlbiBhIHNjcnViYmluZyBzZWVrIG9wZXJhdGlvbiBpcyBzdGFydGVkLlxuICAgICAqL1xuICAgIG9uU2VlazogbmV3IEV2ZW50RGlzcGF0Y2hlcjxTZWVrQmFyLCBOb0FyZ3M+KCksXG4gICAgLyoqXG4gICAgICogRmlyZWQgZHVyaW5nIGEgc2NydWJiaW5nIHNlZWsgdG8gaW5kaWNhdGUgdGhhdCB0aGUgc2VlayBwcmV2aWV3IChpLmUuIHRoZSB2aWRlbyBmcmFtZSkgc2hvdWxkIGJlIHVwZGF0ZWQuXG4gICAgICovXG4gICAgb25TZWVrUHJldmlldzogbmV3IEV2ZW50RGlzcGF0Y2hlcjxTZWVrQmFyLCBTZWVrUHJldmlld0V2ZW50QXJncz4oKSxcbiAgICAvKipcbiAgICAgKiBGaXJlZCB3aGVuIGEgc2NydWJiaW5nIHNlZWsgaGFzIGZpbmlzaGVkIG9yIHdoZW4gYSBkaXJlY3Qgc2VlayBpcyBpc3N1ZWQuXG4gICAgICovXG4gICAgb25TZWVrZWQ6IG5ldyBFdmVudERpc3BhdGNoZXI8U2Vla0JhciwgbnVtYmVyPigpLFxuICB9O1xuXG4gIGNvbnN0cnVjdG9yKGNvbmZpZzogU2Vla0JhckNvbmZpZyA9IHt9KSB7XG4gICAgc3VwZXIoY29uZmlnKTtcblxuICAgIGNvbnN0IGtleVN0ZXBJbmNyZW1lbnRzID0gdGhpcy5jb25maWcua2V5U3RlcEluY3JlbWVudHMgfHwge1xuICAgICAgbGVmdFJpZ2h0OiAxLFxuICAgICAgdXBEb3duOiA1LFxuICAgIH07XG5cbiAgICB0aGlzLmNvbmZpZyA9IHRoaXMubWVyZ2VDb25maWcoY29uZmlnLCB7XG4gICAgICBjc3NDbGFzczogJ3VpLXNlZWtiYXInLFxuICAgICAgdmVydGljYWw6IGZhbHNlLFxuICAgICAgc21vb3RoUGxheWJhY2tQb3NpdGlvblVwZGF0ZUludGVydmFsTXM6IDUwLFxuICAgICAga2V5U3RlcEluY3JlbWVudHMsXG4gICAgICBhcmlhTGFiZWw6IGkxOG4uZ2V0TG9jYWxpemVyKCdzZWVrQmFyJyksXG4gICAgICB0YWJJbmRleDogMCxcbiAgICAgIHNuYXBwaW5nUmFuZ2U6IDEsXG4gICAgICBlbmFibGVTZWVrUHJldmlldzogdHJ1ZSxcbiAgICAgIHNuYXBwaW5nRW5hYmxlZDogdHJ1ZSxcbiAgICB9LCB0aGlzLmNvbmZpZyk7XG5cbiAgICB0aGlzLmxhYmVsID0gdGhpcy5jb25maWcubGFiZWw7XG4gIH1cblxuICBpbml0aWFsaXplKCk6IHZvaWQge1xuICAgIHN1cGVyLmluaXRpYWxpemUoKTtcblxuICAgIGlmICh0aGlzLmhhc0xhYmVsKCkpIHtcbiAgICAgIHRoaXMuZ2V0TGFiZWwoKS5pbml0aWFsaXplKCk7XG4gICAgfVxuICB9XG5cbiAgcHJvdGVjdGVkIHNldEFyaWFTbGlkZXJNaW5NYXgobWluOiBzdHJpbmcsIG1heDogc3RyaW5nKSB7XG4gICAgdGhpcy5nZXREb21FbGVtZW50KCkuYXR0cignYXJpYS12YWx1ZW1pbicsIG1pbik7XG4gICAgdGhpcy5nZXREb21FbGVtZW50KCkuYXR0cignYXJpYS12YWx1ZW1heCcsIG1heCk7XG4gIH1cblxuICBwcml2YXRlIHNldEFyaWFTbGlkZXJWYWx1ZXMoKSB7XG4gICAgaWYgKHRoaXMuc2Vla0JhclR5cGUgPT09IFNlZWtCYXJUeXBlLkxpdmUpIHtcbiAgICAgIGNvbnN0IHRpbWVzaGlmdFZhbHVlID0gTWF0aC5jZWlsKHRoaXMucGxheWVyLmdldFRpbWVTaGlmdCgpKS50b1N0cmluZygpO1xuICAgICAgdGhpcy5nZXREb21FbGVtZW50KCkuYXR0cignYXJpYS12YWx1ZW5vdycsIHRpbWVzaGlmdFZhbHVlKTtcbiAgICAgIHRoaXMuZ2V0RG9tRWxlbWVudCgpLmF0dHIoJ2FyaWEtdmFsdWV0ZXh0JywgYCR7aTE4bi5wZXJmb3JtTG9jYWxpemF0aW9uKGkxOG4uZ2V0TG9jYWxpemVyKCdzZWVrQmFyLnRpbWVzaGlmdCcpKX0gJHtpMThuLnBlcmZvcm1Mb2NhbGl6YXRpb24oaTE4bi5nZXRMb2NhbGl6ZXIoJ3NlZWtCYXIudmFsdWUnKSl9OiAke3RpbWVzaGlmdFZhbHVlfWApO1xuICAgIH0gZWxzZSBpZiAodGhpcy5zZWVrQmFyVHlwZSA9PT0gU2Vla0JhclR5cGUuVm9kKSB7XG4gICAgICBjb25zdCBhcmlhVmFsdWVUZXh0ID0gYCR7U3RyaW5nVXRpbHMuc2Vjb25kc1RvVGV4dCh0aGlzLnBsYXllci5nZXRDdXJyZW50VGltZSgpKX0gJHtpMThuLnBlcmZvcm1Mb2NhbGl6YXRpb24oaTE4bi5nZXRMb2NhbGl6ZXIoJ3NlZWtCYXIuZHVyYXRpb25UZXh0JykpfSAke1N0cmluZ1V0aWxzLnNlY29uZHNUb1RleHQodGhpcy5wbGF5ZXIuZ2V0RHVyYXRpb24oKSl9YDtcbiAgICAgIHRoaXMuZ2V0RG9tRWxlbWVudCgpLmF0dHIoJ2FyaWEtdmFsdWVub3cnLCBNYXRoLmZsb29yKHRoaXMucGxheWVyLmdldEN1cnJlbnRUaW1lKCkpLnRvU3RyaW5nKCkpO1xuICAgICAgdGhpcy5nZXREb21FbGVtZW50KCkuYXR0cignYXJpYS12YWx1ZXRleHQnLCBhcmlhVmFsdWVUZXh0KTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGdldFBsYXliYWNrUG9zaXRpb25QZXJjZW50YWdlKCk6IG51bWJlciB7XG4gICAgaWYgKHRoaXMucGxheWVyLmlzTGl2ZSgpKSB7XG4gICAgICByZXR1cm4gMTAwIC0gKDEwMCAvIHRoaXMucGxheWVyLmdldE1heFRpbWVTaGlmdCgpICogdGhpcy5wbGF5ZXIuZ2V0VGltZVNoaWZ0KCkpO1xuICAgIH1cblxuICAgIHJldHVybiAxMDAgLyB0aGlzLnBsYXllci5nZXREdXJhdGlvbigpICogdGhpcy5nZXRSZWxhdGl2ZUN1cnJlbnRUaW1lKCk7XG4gIH1cblxuICBwcml2YXRlIHVwZGF0ZUJ1ZmZlckxldmVsKHBsYXliYWNrUG9zaXRpb25QZXJjZW50YWdlOiBudW1iZXIpOiB2b2lkIHtcblxuICAgIGxldCBidWZmZXJMb2FkZWRQZXJjZW50YWdlTGV2ZWw6IG51bWJlcjtcbiAgICBpZiAodGhpcy5wbGF5ZXIuaXNMaXZlKCkpIHtcbiAgICAgIC8vIEFsd2F5cyBzaG93IGZ1bGwgYnVmZmVyIGZvciBsaXZlIHN0cmVhbXNcbiAgICAgIGJ1ZmZlckxvYWRlZFBlcmNlbnRhZ2VMZXZlbCA9IDEwMDtcbiAgICB9IGVsc2Uge1xuICAgICAgYnVmZmVyTG9hZGVkUGVyY2VudGFnZUxldmVsID0gcGxheWJhY2tQb3NpdGlvblBlcmNlbnRhZ2UgKyBnZXRNaW5CdWZmZXJMZXZlbCh0aGlzLnBsYXllcik7XG4gICAgfVxuXG4gICAgdGhpcy5zZXRCdWZmZXJQb3NpdGlvbihidWZmZXJMb2FkZWRQZXJjZW50YWdlTGV2ZWwpO1xuICB9XG5cbiAgY29uZmlndXJlKHBsYXllcjogUGxheWVyQVBJLCB1aW1hbmFnZXI6IFVJSW5zdGFuY2VNYW5hZ2VyLCBjb25maWd1cmVTZWVrOiBib29sZWFuID0gdHJ1ZSk6IHZvaWQge1xuICAgIHN1cGVyLmNvbmZpZ3VyZShwbGF5ZXIsIHVpbWFuYWdlcik7XG5cbiAgICB0aGlzLnBsYXllciA9IHBsYXllcjtcbiAgICB0aGlzLnVpTWFuYWdlciA9IHVpbWFuYWdlcjtcblxuICAgIC8vIEFwcGx5IHNjYWxpbmcgdHJhbnNmb3JtIHRvIHRoZSBiYWNrZHJvcCBiYXIgdG8gaGF2ZSBhbGwgYmFycyByZW5kZXJlZCBzaW1pbGFybHlcbiAgICAvLyAodGhlIGNhbGwgbXVzdCBiZSB1cCBoZXJlIHRvIGJlIGV4ZWN1dGVkIGZvciB0aGUgdm9sdW1lIHNsaWRlciBhcyB3ZWxsKVxuICAgIHRoaXMuc2V0UG9zaXRpb24odGhpcy5zZWVrQmFyQmFja2Ryb3AsIDEwMCk7XG5cbiAgICAvLyBBZGQgc2Vla2JhciBjb250cm9scyB0byB0aGUgc2Vla2JhclxuICAgIGNvbnN0IHNlZWtCYXJDb250cm9sbGVyID0gbmV3IFNlZWtCYXJDb250cm9sbGVyKHRoaXMuY29uZmlnLmtleVN0ZXBJbmNyZW1lbnRzLCBwbGF5ZXIsIHVpbWFuYWdlci5nZXRDb25maWcoKS52b2x1bWVDb250cm9sbGVyKTtcblxuICAgIHNlZWtCYXJDb250cm9sbGVyLnNldFNlZWtCYXJDb250cm9scyh0aGlzLmdldERvbUVsZW1lbnQoKSwgKCkgPT4gdGhpcy5zZWVrQmFyVHlwZSk7XG5cbiAgICAvLyBUaGUgY29uZmlndXJlU2VlayBmbGFnIGNhbiBiZSB1c2VkIGJ5IHN1YmNsYXNzZXMgdG8gZGlzYWJsZSBjb25maWd1cmF0aW9uIGFzIHNlZWsgYmFyLiBFLmcuIHRoZSB2b2x1bWVcbiAgICAvLyBzbGlkZXIgaXMgcmV1c2luZyB0aGlzIGNvbXBvbmVudCBidXQgYWRkcyBpdHMgb3duIGZ1bmN0aW9uYWxpdHksIGFuZCBkb2VzIG5vdCBuZWVkIHRoZSBzZWVrIGZ1bmN0aW9uYWxpdHkuXG4gICAgLy8gVGhpcyBpcyBhY3R1YWxseSBhIGhhY2ssIHRoZSBwcm9wZXIgc29sdXRpb24gd291bGQgYmUgZm9yIGJvdGggc2VlayBiYXIgYW5kIHZvbHVtZSBzbGlkZXJzIHRvIGV4dGVuZFxuICAgIC8vIGEgY29tbW9uIGJhc2Ugc2xpZGVyIGNvbXBvbmVudCBhbmQgaW1wbGVtZW50IHRoZWlyIGZ1bmN0aW9uYWxpdHkgdGhlcmUuXG4gICAgaWYgKCFjb25maWd1cmVTZWVrKSB7XG4gICAgICB0aGlzLnNlZWtCYXJUeXBlID0gU2Vla0JhclR5cGUuVm9sdW1lO1xuXG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdWltYW5hZ2VyLm9uQ29udHJvbHNTaG93LnN1YnNjcmliZSgoKSA9PiB7XG4gICAgICB0aGlzLmlzVWlTaG93biA9IHRydWU7XG4gICAgICBpZiAoIXBsYXllci5pc0xpdmUoKSAmJiAhdGhpcy5zbW9vdGhQbGF5YmFja1Bvc2l0aW9uVXBkYXRlci5pc0FjdGl2ZSgpKSB7XG4gICAgICAgIHBsYXliYWNrUG9zaXRpb25IYW5kbGVyKG51bGwsIHRydWUpO1xuICAgICAgICB0aGlzLnNtb290aFBsYXliYWNrUG9zaXRpb25VcGRhdGVyLnN0YXJ0KCk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICB1aW1hbmFnZXIub25Db250cm9sc0hpZGUuc3Vic2NyaWJlKCgpID0+IHtcbiAgICAgIHRoaXMuaXNVaVNob3duID0gZmFsc2U7XG4gICAgICBpZiAodGhpcy5zbW9vdGhQbGF5YmFja1Bvc2l0aW9uVXBkYXRlci5pc0FjdGl2ZSgpKSB7XG4gICAgICAgIHRoaXMuc21vb3RoUGxheWJhY2tQb3NpdGlvblVwZGF0ZXIuY2xlYXIoKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGxldCBpc1BsYXlpbmcgPSBmYWxzZTtcbiAgICBsZXQgc2NydWJiaW5nID0gZmFsc2U7XG4gICAgbGV0IGlzUGxheWVyU2Vla2luZyA9IGZhbHNlO1xuICAgIGxldCBzdXNwZW5zaW9uOiBHcm91cFBsYXliYWNrU3VzcGVuc2lvbiB8IHVuZGVmaW5lZDtcblxuICAgIC8vIFVwZGF0ZSBwbGF5YmFjayBhbmQgYnVmZmVyIHBvc2l0aW9uc1xuICAgIGxldCBwbGF5YmFja1Bvc2l0aW9uSGFuZGxlciA9IChldmVudDogUGxheWVyRXZlbnRCYXNlID0gbnVsbCwgZm9yY2VVcGRhdGU6IGJvb2xlYW4gPSBmYWxzZSkgPT4ge1xuICAgICAgaWYgKHRoaXMuaXNVc2VyU2Vla2luZykge1xuICAgICAgICAvLyBXZSBjYXVnaHQgYSBzZWVrIHByZXZpZXcgc2VlaywgZG8gbm90IHVwZGF0ZSB0aGUgc2Vla2JhclxuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGxldCBwbGF5YmFja1Bvc2l0aW9uUGVyY2VudGFnZSA9IHRoaXMuZ2V0UGxheWJhY2tQb3NpdGlvblBlcmNlbnRhZ2UoKTtcblxuICAgICAgdGhpcy51cGRhdGVCdWZmZXJMZXZlbChwbGF5YmFja1Bvc2l0aW9uUGVyY2VudGFnZSk7XG5cbiAgICAgIC8vIFRoZSBzZWdtZW50IHJlcXVlc3QgZmluaXNoZWQgaXMgdXNlZCB0byBoZWxwIHRoZSBwbGF5YmFjayBwb3NpdGlvbiBtb3ZlLCB3aGVuIHRoZSBzbW9vdGggcGxheWJhY2sgcG9zaXRpb24gaXMgbm90IGVuYWJsZWQuXG4gICAgICAvLyBBdCB0aGUgc2FtZSB0aW1lIHdoZW4gdGhlIHVzZXIgaXMgc2NydWJiaW5nLCB3ZSBhbHNvIG1vdmUgdGhlIHBvc2l0aW9uIG9mIHRoZSBzZWVrYmFyIHRvIGRpc3BsYXkgYSBwcmV2aWV3IGR1cmluZyBzY3J1YmJpbmcuXG4gICAgICAvLyBXaGVuIHRoZSB1c2VyIGlzIHNjcnViYmluZyB3ZSBkbyBub3QgcmVjb3JkIHRoaXMgYXMgYSB1c2VyIHNlZWsgb3BlcmF0aW9uLCBhcyB0aGUgdXNlciBoYXMgeWV0IHRvIGZpbmlzaCB0aGVpciBzZWVrLFxuICAgICAgLy8gYnV0IHdlIHNob3VsZCBub3QgbW92ZSB0aGUgcGxheWJhY2sgcG9zaXRpb24gdG8gbm90IGNyZWF0ZSBhIGp1bXBpbmcgYmVoYXZpb3VyLlxuICAgICAgaWYgKHNjcnViYmluZyAmJiBldmVudCAmJiBldmVudC50eXBlID09PSBwbGF5ZXIuZXhwb3J0cy5QbGF5ZXJFdmVudC5TZWdtZW50UmVxdWVzdEZpbmlzaGVkICYmIHBsYXliYWNrUG9zaXRpb25QZXJjZW50YWdlICE9PSB0aGlzLnBsYXliYWNrUG9zaXRpb25QZXJjZW50YWdlKSB7XG4gICAgICAgIHBsYXliYWNrUG9zaXRpb25QZXJjZW50YWdlID0gdGhpcy5wbGF5YmFja1Bvc2l0aW9uUGVyY2VudGFnZTtcbiAgICAgIH1cblxuICAgICAgaWYgKHBsYXllci5pc0xpdmUoKSkge1xuICAgICAgICBpZiAocGxheWVyLmdldE1heFRpbWVTaGlmdCgpID09PSAwKSB7XG4gICAgICAgICAgLy8gVGhpcyBjYXNlIG11c3QgYmUgZXhwbGljaXRseSBoYW5kbGVkIHRvIGF2b2lkIGRpdmlzaW9uIGJ5IHplcm9cbiAgICAgICAgICB0aGlzLnNldFBsYXliYWNrUG9zaXRpb24oMTAwKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpZiAoIXRoaXMuaXNTZWVraW5nKCkpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0UGxheWJhY2tQb3NpdGlvbihwbGF5YmFja1Bvc2l0aW9uUGVyY2VudGFnZSk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgdGhpcy5zZXRBcmlhU2xpZGVyTWluTWF4KHBsYXllci5nZXRNYXhUaW1lU2hpZnQoKS50b1N0cmluZygpLCAnMCcpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBVcGRhdGUgcGxheWJhY2sgcG9zaXRpb24gb25seSBpbiBwYXVzZWQgc3RhdGUgb3IgaW4gdGhlIGluaXRpYWwgc3RhcnR1cCBzdGF0ZSB3aGVyZSBwbGF5ZXIgaXMgbmVpdGhlclxuICAgICAgICAvLyBwYXVzZWQgbm9yIHBsYXlpbmcuIFBsYXliYWNrIHVwZGF0ZXMgYXJlIGhhbmRsZWQgaW4gdGhlIFRpbWVvdXQgYmVsb3cuXG4gICAgICAgIGNvbnN0IGlzSW5Jbml0aWFsU3RhcnR1cFN0YXRlID0gdGhpcy5jb25maWcuc21vb3RoUGxheWJhY2tQb3NpdGlvblVwZGF0ZUludGVydmFsTXMgPT09IFNlZWtCYXIuU01PT1RIX1BMQVlCQUNLX1BPU0lUSU9OX1VQREFURV9ESVNBQkxFRFxuICAgICAgICAgICAgfHwgZm9yY2VVcGRhdGUgfHwgcGxheWVyLmlzUGF1c2VkKCk7XG4gICAgICAgIGNvbnN0IGlzTmVpdGhlclBhdXNlZE5vclBsYXlpbmcgPSBwbGF5ZXIuaXNQYXVzZWQoKSA9PT0gcGxheWVyLmlzUGxheWluZygpO1xuXG4gICAgICAgIGlmICgoaXNJbkluaXRpYWxTdGFydHVwU3RhdGUgfHwgaXNOZWl0aGVyUGF1c2VkTm9yUGxheWluZykgJiYgIXRoaXMuaXNTZWVraW5nKCkpIHtcbiAgICAgICAgICB0aGlzLnNldFBsYXliYWNrUG9zaXRpb24ocGxheWJhY2tQb3NpdGlvblBlcmNlbnRhZ2UpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5zZXRBcmlhU2xpZGVyTWluTWF4KCcwJywgcGxheWVyLmdldER1cmF0aW9uKCkudG9TdHJpbmcoKSk7XG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLmlzVWlTaG93bikge1xuICAgICAgICB0aGlzLnNldEFyaWFTbGlkZXJWYWx1ZXMoKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgLy8gVXBkYXRlIHNlZWtiYXIgdXBvbiB0aGVzZSBldmVudHNcbiAgICAvLyBpbml0IHBsYXliYWNrIHBvc2l0aW9uIHdoZW4gdGhlIHBsYXllciBpcyByZWFkeVxuICAgIHBsYXllci5vbihwbGF5ZXIuZXhwb3J0cy5QbGF5ZXJFdmVudC5SZWFkeSwgcGxheWJhY2tQb3NpdGlvbkhhbmRsZXIpO1xuICAgIC8vIHVwZGF0ZSBwbGF5YmFjayBwb3NpdGlvbiB3aGVuIGl0IGNoYW5nZXNcbiAgICBwbGF5ZXIub24ocGxheWVyLmV4cG9ydHMuUGxheWVyRXZlbnQuVGltZUNoYW5nZWQsIHBsYXliYWNrUG9zaXRpb25IYW5kbGVyKTtcbiAgICAvLyB1cGRhdGUgYnVmZmVybGV2ZWwgd2hlbiBidWZmZXJpbmcgaXMgY29tcGxldGVcbiAgICBwbGF5ZXIub24ocGxheWVyLmV4cG9ydHMuUGxheWVyRXZlbnQuU3RhbGxFbmRlZCwgcGxheWJhY2tQb3NpdGlvbkhhbmRsZXIpO1xuICAgIC8vIHVwZGF0ZSBwbGF5YmFjayBwb3NpdGlvbiB3aGVuIGEgdGltZXNoaWZ0IGhhcyBmaW5pc2hlZFxuICAgIHBsYXllci5vbihwbGF5ZXIuZXhwb3J0cy5QbGF5ZXJFdmVudC5UaW1lU2hpZnRlZCwgcGxheWJhY2tQb3NpdGlvbkhhbmRsZXIpO1xuICAgIC8vIHVwZGF0ZSBidWZmZXJsZXZlbCB3aGVuIGEgc2VnbWVudCBoYXMgYmVlbiBkb3dubG9hZGVkXG4gICAgcGxheWVyLm9uKHBsYXllci5leHBvcnRzLlBsYXllckV2ZW50LlNlZ21lbnRSZXF1ZXN0RmluaXNoZWQsIHBsYXliYWNrUG9zaXRpb25IYW5kbGVyKTtcblxuICAgIHRoaXMuY29uZmlndXJlTGl2ZVBhdXNlZFRpbWVzaGlmdFVwZGF0ZXIocGxheWVyLCB1aW1hbmFnZXIsIHBsYXliYWNrUG9zaXRpb25IYW5kbGVyKTtcblxuICAgIC8vIFNlZWsgaGFuZGxpbmdcbiAgICBsZXQgb25QbGF5ZXJTZWVrID0gKCkgPT4ge1xuICAgICAgaXNQbGF5ZXJTZWVraW5nID0gdHJ1ZTtcbiAgICAgIHRoaXMuc2V0U2Vla2luZyh0cnVlKTtcbiAgICAgIHNjcnViYmluZyA9IGZhbHNlO1xuICAgIH07XG5cbiAgICBsZXQgb25QbGF5ZXJTZWVrZWQgPSAoZXZlbnQ6IFBsYXllckV2ZW50QmFzZSA9IG51bGwpID0+IHtcbiAgICAgIGlzUGxheWVyU2Vla2luZyA9IGZhbHNlO1xuICAgICAgdGhpcy5zZXRTZWVraW5nKGZhbHNlKTtcblxuICAgICAgLy8gdXBkYXRlIHBsYXliYWNrIHBvc2l0aW9uIHdoZW4gYSBzZWVrIGhhcyBmaW5pc2hlZFxuICAgICAgcGxheWJhY2tQb3NpdGlvbkhhbmRsZXIoZXZlbnQsIHRydWUpO1xuICAgIH07XG5cbiAgICBsZXQgcmVzdG9yZVBsYXlpbmdTdGF0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIC8vIENvbnRpbnVlIHBsYXliYWNrIGFmdGVyIHNlZWsgaWYgcGxheWVyIHdhcyBwbGF5aW5nIHdoZW4gc2VlayBzdGFydGVkXG4gICAgICBpZiAoaXNQbGF5aW5nKSB7XG4gICAgICAgIC8vIHVzZSB0aGUgc2FtZSBpc3N1ZXIgaGVyZSBhcyBpbiB0aGUgcGF1c2Ugb24gc2Vla1xuICAgICAgICBwbGF5ZXIucGxheSgndWktc2VlaycpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBwbGF5ZXIub24ocGxheWVyLmV4cG9ydHMuUGxheWVyRXZlbnQuU2Vlaywgb25QbGF5ZXJTZWVrKTtcbiAgICBwbGF5ZXIub24ocGxheWVyLmV4cG9ydHMuUGxheWVyRXZlbnQuU2Vla2VkLCBvblBsYXllclNlZWtlZCk7XG4gICAgcGxheWVyLm9uKHBsYXllci5leHBvcnRzLlBsYXllckV2ZW50LlRpbWVTaGlmdCwgb25QbGF5ZXJTZWVrKTtcbiAgICBwbGF5ZXIub24ocGxheWVyLmV4cG9ydHMuUGxheWVyRXZlbnQuVGltZVNoaWZ0ZWQsIG9uUGxheWVyU2Vla2VkKTtcblxuICAgIGxldCBpc0dyb3VwUGxheWJhY2tBUElBdmFpbGFibGUgPSAocGxheWVyOiBQbGF5ZXJBUEkpOiBwbGF5ZXIgaXMgRXh0ZW5kZWRQbGF5ZXJBUEkgPT4ge1xuICAgICAgcmV0dXJuICEhKHBsYXllciBhcyBFeHRlbmRlZFBsYXllckFQSSkuZ3JvdXBQbGF5YmFjaztcbiAgICB9O1xuXG4gICAgdGhpcy5vblNlZWsuc3Vic2NyaWJlKChzZW5kZXIpID0+IHtcbiAgICAgIC8vIHRyYWNrIHNlZWtpbmcgc3RhdHVzIHNvIHdlIGNhbiBjYXRjaCBldmVudHMgZnJvbSBzZWVrIHByZXZpZXcgc2Vla3NcbiAgICAgIHRoaXMuaXNVc2VyU2Vla2luZyA9IHRydWU7XG4gICAgICAvLyBOb3RpZnkgVUkgbWFuYWdlciBvZiBzdGFydGVkIHNlZWtcbiAgICAgIHVpbWFuYWdlci5vblNlZWsuZGlzcGF0Y2goc2VuZGVyKTtcblxuICAgICAgaWYgKGlzR3JvdXBQbGF5YmFja0FQSUF2YWlsYWJsZShwbGF5ZXIpICYmIHBsYXllci5ncm91cFBsYXliYWNrLmhhc0pvaW5lZCgpICYmICFzdXNwZW5zaW9uKSB7XG4gICAgICAgIHN1c3BlbnNpb24gPSBwbGF5ZXIuZ3JvdXBQbGF5YmFjay5iZWdpblN1c3BlbnNpb24oR3JvdXBQbGF5YmFja1N1c3BlbnNpb25SZWFzb24uVXNlcklzU2NydWJiaW5nKTtcbiAgICAgIH1cblxuICAgICAgLy8gU2F2ZSBjdXJyZW50IHBsYXliYWNrIHN0YXRlIGJlZm9yZSBwZXJmb3JtaW5nIHRoZSBzZWVrXG4gICAgICBpZiAoIWlzUGxheWVyU2Vla2luZykge1xuICAgICAgICBpc1BsYXlpbmcgPSBwbGF5ZXIuaXNQbGF5aW5nKCk7XG5cbiAgICAgICAgLy8gUGF1c2UgcGxheWJhY2sgd2hpbGUgc2Vla2luZ1xuICAgICAgICBpZiAoaXNQbGF5aW5nKSB7XG4gICAgICAgICAgLy8gdXNlIGEgZGlmZmVyZW50IGlzc3VlciBoZXJlLCBhcyBwbGF5L3BhdXNlIG9uIHNlZWsgaXMgbm90IFwicmVhbGx5XCIgdHJpZ2dlcmQgYnkgdGhlIHVzZXJcbiAgICAgICAgICBwbGF5ZXIucGF1c2UoJ3VpLXNlZWsnKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuXG4gICAgdGhpcy5vblNlZWtQcmV2aWV3LnN1YnNjcmliZSgoc2VuZGVyOiBTZWVrQmFyLCBhcmdzOiBTZWVrUHJldmlld0V2ZW50QXJncykgPT4ge1xuICAgICAgLy8gTm90aWZ5IFVJIG1hbmFnZXIgb2Ygc2VlayBwcmV2aWV3XG4gICAgICB1aW1hbmFnZXIub25TZWVrUHJldmlldy5kaXNwYXRjaChzZW5kZXIsIGFyZ3MpO1xuICAgICAgc2NydWJiaW5nID0gYXJncy5zY3J1YmJpbmc7XG4gICAgfSk7XG5cbiAgICAvLyBTZXQgZW5hYmxlU2Vla1ByZXZpZXcgaWYgc2V0IGluIHRoZSB1aW1hbmFnZXIgY29uZmlnXG4gICAgaWYgKHR5cGVvZiB1aW1hbmFnZXIuZ2V0Q29uZmlnKCkuZW5hYmxlU2Vla1ByZXZpZXcgPT09ICdib29sZWFuJykge1xuICAgICAgdGhpcy5jb25maWcuZW5hYmxlU2Vla1ByZXZpZXcgPSB1aW1hbmFnZXIuZ2V0Q29uZmlnKCkuZW5hYmxlU2Vla1ByZXZpZXc7XG4gICAgfVxuXG4gICAgLy8gUmF0ZS1saW1pdGVkIHNjcnViYmluZyBzZWVrXG4gICAgaWYgKHRoaXMuY29uZmlnLmVuYWJsZVNlZWtQcmV2aWV3KSB7XG4gICAgICB0aGlzLm9uU2Vla1ByZXZpZXcuc3Vic2NyaWJlUmF0ZUxpbWl0ZWQodGhpcy5zZWVrV2hpbGVTY3J1YmJpbmcsIDIwMCk7XG4gICAgfVxuXG4gICAgdGhpcy5vblNlZWtlZC5zdWJzY3JpYmUoKHNlbmRlciwgcGVyY2VudGFnZSkgPT4ge1xuICAgICAgdGhpcy5pc1VzZXJTZWVraW5nID0gZmFsc2U7XG5cbiAgICAgIC8vIERvIHRoZSBzZWVrXG4gICAgICB0aGlzLnNlZWsocGVyY2VudGFnZSk7XG5cbiAgICAgIC8vIE5vdGlmeSBVSSBtYW5hZ2VyIG9mIGZpbmlzaGVkIHNlZWtcbiAgICAgIHVpbWFuYWdlci5vblNlZWtlZC5kaXNwYXRjaChzZW5kZXIpO1xuXG4gICAgICAvLyBDb250aW51ZSBwbGF5YmFjayBhZnRlciBzZWVrIGlmIHBsYXllciB3YXMgcGxheWluZyB3aGVuIHNlZWsgc3RhcnRlZFxuICAgICAgcmVzdG9yZVBsYXlpbmdTdGF0ZSgpO1xuXG4gICAgICBpZiAoaXNHcm91cFBsYXliYWNrQVBJQXZhaWxhYmxlKHBsYXllcikgJiYgcGxheWVyLmdyb3VwUGxheWJhY2suaGFzSm9pbmVkKCkgJiYgc3VzcGVuc2lvbikge1xuICAgICAgICBjb25zdCBwcm9wb3NlZFBsYXliYWNrVGltZSA9IHRoaXMuZ2V0VGFyZ2V0U2Vla1Bvc2l0aW9uKHBlcmNlbnRhZ2UpO1xuICAgICAgICBwbGF5ZXIuZ3JvdXBQbGF5YmFjay5lbmRTdXNwZW5zaW9uKHN1c3BlbnNpb24sIHsgcHJvcG9zZWRQbGF5YmFja1RpbWUgfSk7XG4gICAgICAgIHN1c3BlbnNpb24gPSB1bmRlZmluZWQ7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBpZiAodGhpcy5oYXNMYWJlbCgpKSB7XG4gICAgICAvLyBDb25maWd1cmUgYSBzZWVrYmFyIGxhYmVsIHRoYXQgaXMgaW50ZXJuYWwgdG8gdGhlIHNlZWtiYXIpXG4gICAgICB0aGlzLmdldExhYmVsKCkuY29uZmlndXJlKHBsYXllciwgdWltYW5hZ2VyKTtcbiAgICB9XG5cbiAgICAvLyBIaWRlIHNlZWtiYXIgZm9yIGxpdmUgc291cmNlcyB3aXRob3V0IHRpbWVzaGlmdFxuICAgIGxldCBpc0xpdmUgPSBmYWxzZTtcbiAgICBsZXQgaGFzVGltZVNoaWZ0ID0gZmFsc2U7XG4gICAgbGV0IHN3aXRjaFZpc2liaWxpdHkgPSAoaXNMaXZlOiBib29sZWFuLCBoYXNUaW1lU2hpZnQ6IGJvb2xlYW4pID0+IHtcbiAgICAgIGlmIChpc0xpdmUgJiYgIWhhc1RpbWVTaGlmdCkge1xuICAgICAgICB0aGlzLmhpZGUoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuc2hvdygpO1xuICAgICAgfVxuICAgICAgcGxheWJhY2tQb3NpdGlvbkhhbmRsZXIobnVsbCwgdHJ1ZSk7XG4gICAgICB0aGlzLnJlZnJlc2hQbGF5YmFja1Bvc2l0aW9uKCk7XG4gICAgfTtcbiAgICBsZXQgbGl2ZVN0cmVhbURldGVjdG9yID0gbmV3IFBsYXllclV0aWxzLkxpdmVTdHJlYW1EZXRlY3RvcihwbGF5ZXIsIHVpbWFuYWdlcik7XG4gICAgbGl2ZVN0cmVhbURldGVjdG9yLm9uTGl2ZUNoYW5nZWQuc3Vic2NyaWJlKChzZW5kZXIsIGFyZ3M6IExpdmVTdHJlYW1EZXRlY3RvckV2ZW50QXJncykgPT4ge1xuICAgICAgaXNMaXZlID0gYXJncy5saXZlO1xuICAgICAgaWYgKGlzTGl2ZSAmJiB0aGlzLnNtb290aFBsYXliYWNrUG9zaXRpb25VcGRhdGVyICE9IG51bGwpIHtcbiAgICAgICAgdGhpcy5zbW9vdGhQbGF5YmFja1Bvc2l0aW9uVXBkYXRlci5jbGVhcigpO1xuICAgICAgICB0aGlzLnNlZWtCYXJUeXBlID0gU2Vla0JhclR5cGUuTGl2ZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuc2Vla0JhclR5cGUgPSBTZWVrQmFyVHlwZS5Wb2Q7XG4gICAgICB9XG4gICAgICBzd2l0Y2hWaXNpYmlsaXR5KGlzTGl2ZSwgaGFzVGltZVNoaWZ0KTtcbiAgICB9KTtcbiAgICBsZXQgdGltZVNoaWZ0RGV0ZWN0b3IgPSBuZXcgUGxheWVyVXRpbHMuVGltZVNoaWZ0QXZhaWxhYmlsaXR5RGV0ZWN0b3IocGxheWVyKTtcbiAgICB0aW1lU2hpZnREZXRlY3Rvci5vblRpbWVTaGlmdEF2YWlsYWJpbGl0eUNoYW5nZWQuc3Vic2NyaWJlKChzZW5kZXIsIGFyZ3M6IFRpbWVTaGlmdEF2YWlsYWJpbGl0eUNoYW5nZWRBcmdzKSA9PiB7XG4gICAgICBoYXNUaW1lU2hpZnQgPSBhcmdzLnRpbWVTaGlmdEF2YWlsYWJsZTtcbiAgICAgIHN3aXRjaFZpc2liaWxpdHkoaXNMaXZlLCBoYXNUaW1lU2hpZnQpO1xuICAgIH0pO1xuICAgIC8vIEluaXRpYWwgZGV0ZWN0aW9uXG4gICAgbGl2ZVN0cmVhbURldGVjdG9yLmRldGVjdCgpO1xuICAgIHRpbWVTaGlmdERldGVjdG9yLmRldGVjdCgpO1xuXG4gICAgLy8gUmVmcmVzaCB0aGUgcGxheWJhY2sgcG9zaXRpb24gd2hlbiB0aGUgcGxheWVyIHJlc2l6ZWQgb3IgdGhlIFVJIGlzIGNvbmZpZ3VyZWQuIFRoZSBwbGF5YmFjayBwb3NpdGlvbiBtYXJrZXJcbiAgICAvLyBpcyBwb3NpdGlvbmVkIGFic29sdXRlbHkgYW5kIG11c3QgdGhlcmVmb3JlIGJlIHVwZGF0ZWQgd2hlbiB0aGUgc2l6ZSBvZiB0aGUgc2Vla2JhciBjaGFuZ2VzLlxuICAgIHBsYXllci5vbihwbGF5ZXIuZXhwb3J0cy5QbGF5ZXJFdmVudC5QbGF5ZXJSZXNpemVkLCAoKSA9PiB7XG4gICAgICB0aGlzLnJlZnJlc2hQbGF5YmFja1Bvc2l0aW9uKCk7XG4gICAgICB0aGlzLnVpQm91bmRpbmdSZWN0ID0gdGhpcy51aU1hbmFnZXIuZ2V0VUkoKS5nZXREb21FbGVtZW50KCkuZ2V0KDApLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgIH0pO1xuICAgIC8vIEFkZGl0aW9uYWxseSwgd2hlbiB0aGlzIGNvZGUgaXMgY2FsbGVkLCB0aGUgc2Vla2JhciBpcyBub3QgcGFydCBvZiB0aGUgVUkgeWV0IGFuZCB0aGVyZWZvcmUgZG9lcyBub3QgaGF2ZSBhIHNpemUsXG4gICAgLy8gcmVzdWx0aW5nIGluIGEgd3JvbmcgaW5pdGlhbCBwb3NpdGlvbiBvZiB0aGUgbWFya2VyLiBSZWZyZXNoaW5nIGl0IG9uY2UgdGhlIFVJIGlzIGNvbmZpZ3VyZWQgc29sdmVkIHRoaXMgaXNzdWUuXG4gICAgdWltYW5hZ2VyLm9uQ29uZmlndXJlZC5zdWJzY3JpYmUoKCkgPT4ge1xuICAgICAgdGhpcy5yZWZyZXNoUGxheWJhY2tQb3NpdGlvbigpO1xuICAgIH0pO1xuICAgIC8vIEl0IGNhbiBhbHNvIGhhcHBlbiB3aGVuIGEgbmV3IHNvdXJjZSBpcyBsb2FkZWRcbiAgICBwbGF5ZXIub24ocGxheWVyLmV4cG9ydHMuUGxheWVyRXZlbnQuU291cmNlTG9hZGVkLCAoKSA9PiB7XG4gICAgICB0aGlzLnJlZnJlc2hQbGF5YmFja1Bvc2l0aW9uKCk7XG4gICAgfSk7XG4gICAgLy8gQWRkIG1hcmtlcnMgd2hlbiBhIHNvdXJjZSBpcyBsb2FkZWQgb3IgdXBkYXRlIHdoZW4gYSBtYXJrZXIgaXMgYWRkZWQgb3IgcmVtb3ZlZFxuICAgIHVpbWFuYWdlci5nZXRDb25maWcoKS5ldmVudHMub25VcGRhdGVkLnN1YnNjcmliZSgoKSA9PiB7XG4gICAgICBwbGF5YmFja1Bvc2l0aW9uSGFuZGxlcigpO1xuICAgIH0pO1xuXG4gICAgLy8gU2V0IHRoZSBzbmFwcGluZ1JhbmdlIGlmIHNldCBpbiB0aGUgdWltYW5hZ2VyIGNvbmZpZ1xuICAgIGlmICh0eXBlb2YgdWltYW5hZ2VyLmdldENvbmZpZygpLnNlZWtiYXJTbmFwcGluZ1JhbmdlID09PSAnbnVtYmVyJykge1xuICAgICAgdGhpcy5jb25maWcuc25hcHBpbmdSYW5nZSA9IHVpbWFuYWdlci5nZXRDb25maWcoKS5zZWVrYmFyU25hcHBpbmdSYW5nZTtcbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIHVpbWFuYWdlci5nZXRDb25maWcoKS5zZWVrYmFyU25hcHBpbmdFbmFibGVkID09PSAnYm9vbGVhbicpIHtcbiAgICAgIHRoaXMuY29uZmlnLnNuYXBwaW5nRW5hYmxlZCA9IHVpbWFuYWdlci5nZXRDb25maWcoKS5zZWVrYmFyU25hcHBpbmdFbmFibGVkO1xuICAgIH1cblxuICAgIC8vIEluaXRpYWxpemUgc2Vla2JhclxuICAgIHBsYXliYWNrUG9zaXRpb25IYW5kbGVyKCk7IC8vIFNldCB0aGUgcGxheWJhY2sgcG9zaXRpb25cbiAgICB0aGlzLnNldEJ1ZmZlclBvc2l0aW9uKDApO1xuICAgIHRoaXMuc2V0U2Vla1Bvc2l0aW9uKDApO1xuICAgIGlmICh0aGlzLmNvbmZpZy5zbW9vdGhQbGF5YmFja1Bvc2l0aW9uVXBkYXRlSW50ZXJ2YWxNcyAhPT0gU2Vla0Jhci5TTU9PVEhfUExBWUJBQ0tfUE9TSVRJT05fVVBEQVRFX0RJU0FCTEVEKSB7XG4gICAgICB0aGlzLmNvbmZpZ3VyZVNtb290aFBsYXliYWNrUG9zaXRpb25VcGRhdGVyKHBsYXllciwgdWltYW5hZ2VyKTtcbiAgICB9XG5cbiAgICAvLyBJbml0aWFsaXplIG1hcmtlcnNcbiAgICB0aGlzLmluaXRpYWxpemVUaW1lbGluZU1hcmtlcnMocGxheWVyLCB1aW1hbmFnZXIpO1xuICB9XG5cbiAgcHJpdmF0ZSBpbml0aWFsaXplVGltZWxpbmVNYXJrZXJzKHBsYXllcjogUGxheWVyQVBJLCB1aW1hbmFnZXI6IFVJSW5zdGFuY2VNYW5hZ2VyKTogdm9pZCB7XG4gICAgY29uc3QgdGltZWxpbmVNYXJrZXJDb25maWcgPSB7XG4gICAgICBjc3NQcmVmaXg6IHRoaXMuY29uZmlnLmNzc1ByZWZpeCxcbiAgICAgIHNuYXBwaW5nUmFuZ2U6IHRoaXMuY29uZmlnLnNuYXBwaW5nUmFuZ2UsXG4gICAgfTtcbiAgICB0aGlzLnRpbWVsaW5lTWFya2Vyc0hhbmRsZXIgPSBuZXcgVGltZWxpbmVNYXJrZXJzSGFuZGxlcih0aW1lbGluZU1hcmtlckNvbmZpZywgKCkgPT4gdGhpcy5zZWVrQmFyLndpZHRoKCksIHRoaXMuc2Vla0Jhck1hcmtlcnNDb250YWluZXIpO1xuICAgIHRoaXMudGltZWxpbmVNYXJrZXJzSGFuZGxlci5pbml0aWFsaXplKHBsYXllciwgdWltYW5hZ2VyKTtcbiAgfVxuXG4gIHByaXZhdGUgc2Vla1doaWxlU2NydWJiaW5nID0gKHNlbmRlcjogU2Vla0JhciwgYXJnczogU2Vla1ByZXZpZXdFdmVudEFyZ3MpID0+IHtcbiAgICBpZiAoYXJncy5zY3J1YmJpbmcpIHtcbiAgICAgIHRoaXMuc2VlayhhcmdzLnBvc2l0aW9uKTtcbiAgICB9XG4gIH07XG5cbiAgcHJpdmF0ZSBnZXRUYXJnZXRTZWVrUG9zaXRpb24gPSAocGVyY2VudGFnZTogbnVtYmVyKSA9PiB7XG4gICAgbGV0IHRhcmdldDogbnVtYmVyO1xuICAgIGlmICh0aGlzLnBsYXllci5pc0xpdmUoKSkge1xuICAgICAgY29uc3QgbWF4VGltZVNoaWZ0ID0gdGhpcy5wbGF5ZXIuZ2V0TWF4VGltZVNoaWZ0KCk7XG4gICAgICB0YXJnZXQgPSBtYXhUaW1lU2hpZnQgLSAobWF4VGltZVNoaWZ0ICogKHBlcmNlbnRhZ2UgLyAxMDApKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3Qgc2Vla2FibGVSYW5nZVN0YXJ0ID0gUGxheWVyVXRpbHMuZ2V0U2Vla2FibGVSYW5nZVN0YXJ0KHRoaXMucGxheWVyLCAwKTtcbiAgICAgIGNvbnN0IHJlbGF0aXZlU2Vla1RhcmdldCA9IHRoaXMucGxheWVyLmdldER1cmF0aW9uKCkgKiAocGVyY2VudGFnZSAvIDEwMCk7XG4gICAgICB0YXJnZXQgPSByZWxhdGl2ZVNlZWtUYXJnZXQgKyBzZWVrYWJsZVJhbmdlU3RhcnQ7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRhcmdldDtcbiAgfVxuXG4gIHByaXZhdGUgc2VlayA9IChwZXJjZW50YWdlOiBudW1iZXIpID0+IHtcbiAgICBjb25zdCB0YXJnZXRQbGF5YmFja1Bvc2l0aW9uID0gdGhpcy5nZXRUYXJnZXRTZWVrUG9zaXRpb24ocGVyY2VudGFnZSk7XG4gICAgaWYgKHRoaXMucGxheWVyLmlzTGl2ZSgpKSB7XG4gICAgICB0aGlzLnBsYXllci50aW1lU2hpZnQodGFyZ2V0UGxheWJhY2tQb3NpdGlvbiwgJ3VpJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMucGxheWVyLnNlZWsodGFyZ2V0UGxheWJhY2tQb3NpdGlvbiwgJ3VpJyk7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBVcGRhdGUgc2Vla2JhciB3aGlsZSBhIGxpdmUgc3RyZWFtIHdpdGggRFZSIHdpbmRvdyBpcyBwYXVzZWQuXG4gICAqIFRoZSBwbGF5YmFjayBwb3NpdGlvbiBzdGF5cyBzdGlsbCBhbmQgdGhlIHBvc2l0aW9uIGluZGljYXRvciB2aXN1YWxseSBtb3ZlcyB0b3dhcmRzIHRoZSBiYWNrLlxuICAgKi9cbiAgcHJpdmF0ZSBjb25maWd1cmVMaXZlUGF1c2VkVGltZXNoaWZ0VXBkYXRlcihcbiAgICBwbGF5ZXI6IFBsYXllckFQSSxcbiAgICB1aW1hbmFnZXI6IFVJSW5zdGFuY2VNYW5hZ2VyLFxuICAgIHBsYXliYWNrUG9zaXRpb25IYW5kbGVyOiAoKSA9PiB2b2lkLFxuICApOiB2b2lkIHtcbiAgICAvLyBSZWd1bGFybHkgdXBkYXRlIHRoZSBwbGF5YmFjayBwb3NpdGlvbiB3aGlsZSB0aGUgdGltZW91dCBpcyBhY3RpdmVcbiAgICB0aGlzLnBhdXNlZFRpbWVzaGlmdFVwZGF0ZXIgPSBuZXcgVGltZW91dCgxMDAwLCBwbGF5YmFja1Bvc2l0aW9uSGFuZGxlciwgdHJ1ZSk7XG5cbiAgICAvLyBTdGFydCB1cGRhdGVyIHdoZW4gYSBsaXZlIHN0cmVhbSB3aXRoIHRpbWVzaGlmdCB3aW5kb3cgaXMgcGF1c2VkXG4gICAgcGxheWVyLm9uKHBsYXllci5leHBvcnRzLlBsYXllckV2ZW50LlBhdXNlZCwgKCkgPT4ge1xuICAgICAgaWYgKHBsYXllci5pc0xpdmUoKSAmJiBwbGF5ZXIuZ2V0TWF4VGltZVNoaWZ0KCkgPCAwKSB7XG4gICAgICAgIHRoaXMucGF1c2VkVGltZXNoaWZ0VXBkYXRlci5zdGFydCgpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8gU3RvcCB1cGRhdGVyIHdoZW4gcGxheWJhY2sgY29udGludWVzIChubyBtYXR0ZXIgaWYgdGhlIHVwZGF0ZXIgd2FzIHN0YXJ0ZWQgYmVmb3JlKVxuICAgIHBsYXllci5vbihwbGF5ZXIuZXhwb3J0cy5QbGF5ZXJFdmVudC5QbGF5LCAoKSA9PiB0aGlzLnBhdXNlZFRpbWVzaGlmdFVwZGF0ZXIuY2xlYXIoKSk7XG4gIH1cblxuICBwcml2YXRlIGNvbmZpZ3VyZVNtb290aFBsYXliYWNrUG9zaXRpb25VcGRhdGVyKHBsYXllcjogUGxheWVyQVBJLCB1aW1hbmFnZXI6IFVJSW5zdGFuY2VNYW5hZ2VyKTogdm9pZCB7XG4gICAgLypcbiAgICAgKiBQbGF5YmFjayBwb3NpdGlvbiB1cGRhdGVcbiAgICAgKlxuICAgICAqIFdlIGRvIG5vdCB1cGRhdGUgdGhlIHBvc2l0aW9uIGRpcmVjdGx5IGZyb20gdGhlIFRpbWVDaGFuZ2VkIGV2ZW50LCBiZWNhdXNlIGl0IGFycml2ZXMgdmVyeSBqaXR0ZXJ5IGFuZFxuICAgICAqIHJlc3VsdHMgaW4gYSBqaXR0ZXJ5IHBvc2l0aW9uIGluZGljYXRvciBzaW5jZSB0aGUgQ1NTIHRyYW5zaXRpb24gdGltZSBpcyBzdGF0aWNhbGx5IHNldC5cbiAgICAgKiBUbyB3b3JrIGFyb3VuZCB0aGlzIGlzc3VlLCB3ZSBtYWludGFpbiBhIGxvY2FsIHBsYXliYWNrIHBvc2l0aW9uIHRoYXQgaXMgdXBkYXRlZCBpbiBhIHN0YWJsZSByZWd1bGFyIGludGVydmFsXG4gICAgICogYW5kIGtlcHQgaW4gc3luYyB3aXRoIHRoZSBwbGF5ZXIuXG4gICAgICovXG4gICAgbGV0IGN1cnJlbnRUaW1lU2Vla0JhciA9IDA7XG4gICAgbGV0IGN1cnJlbnRUaW1lUGxheWVyID0gMDtcbiAgICBsZXQgdXBkYXRlSW50ZXJ2YWxNcyA9IDUwO1xuICAgIGxldCBjdXJyZW50VGltZVVwZGF0ZURlbHRhU2VjcyA9IHVwZGF0ZUludGVydmFsTXMgLyAxMDAwO1xuXG4gICAgdGhpcy5zbW9vdGhQbGF5YmFja1Bvc2l0aW9uVXBkYXRlciA9IG5ldyBUaW1lb3V0KHVwZGF0ZUludGVydmFsTXMsICgpID0+IHtcbiAgICAgIGlmICh0aGlzLmlzU2Vla2luZygpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgY3VycmVudFRpbWVTZWVrQmFyICs9IGN1cnJlbnRUaW1lVXBkYXRlRGVsdGFTZWNzO1xuXG4gICAgICB0cnkge1xuICAgICAgICBjdXJyZW50VGltZVBsYXllciA9IHRoaXMuZ2V0UmVsYXRpdmVDdXJyZW50VGltZSgpO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgLy8gRGV0ZWN0IGlmIHRoZSBwbGF5ZXIgaGFzIGJlZW4gZGVzdHJveWVkIGFuZCBzdG9wIHVwZGF0aW5nIGlmIHNvXG4gICAgICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIHBsYXllci5leHBvcnRzLlBsYXllckFQSU5vdEF2YWlsYWJsZUVycm9yKSB7XG4gICAgICAgICAgdGhpcy5zbW9vdGhQbGF5YmFja1Bvc2l0aW9uVXBkYXRlci5jbGVhcigpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gSWYgdGhlIGN1cnJlbnQgdGltZSBjYW5ub3QgYmUgcmVhZCBpdCBtYWtlcyBubyBzZW5zZSB0byBjb250aW51ZVxuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIC8vIFN5bmMgY3VycmVudFRpbWUgb2Ygc2Vla2JhciB0byBwbGF5ZXJcbiAgICAgIGxldCBjdXJyZW50VGltZURlbHRhID0gY3VycmVudFRpbWVTZWVrQmFyIC0gY3VycmVudFRpbWVQbGF5ZXI7XG4gICAgICAvLyBJZiB0aGUgZGVsdGEgaXMgbGFyZ2VyIHRoYXQgMiBzZWNzLCBkaXJlY3RseSBqdW1wIHRoZSBzZWVrYmFyIHRvIHRoZVxuICAgICAgLy8gcGxheWVyIHRpbWUgaW5zdGVhZCBvZiBzbW9vdGhseSBmYXN0IGZvcndhcmRpbmcvcmV3aW5kaW5nLlxuICAgICAgaWYgKE1hdGguYWJzKGN1cnJlbnRUaW1lRGVsdGEpID4gMikge1xuICAgICAgICBjdXJyZW50VGltZVNlZWtCYXIgPSBjdXJyZW50VGltZVBsYXllcjtcbiAgICAgIH1cbiAgICAgIC8vIElmIGN1cnJlbnRUaW1lRGVsdGEgaXMgbmVnYXRpdmUgYW5kIGJlbG93IHRoZSBhZGp1c3RtZW50IHRocmVzaG9sZCxcbiAgICAgIC8vIHRoZSBwbGF5ZXIgaXMgYWhlYWQgb2YgdGhlIHNlZWtiYXIgYW5kIHdlICdmYXN0IGZvcndhcmQnIHRoZSBzZWVrYmFyXG4gICAgICBlbHNlIGlmIChjdXJyZW50VGltZURlbHRhIDw9IC1jdXJyZW50VGltZVVwZGF0ZURlbHRhU2Vjcykge1xuICAgICAgICBjdXJyZW50VGltZVNlZWtCYXIgKz0gY3VycmVudFRpbWVVcGRhdGVEZWx0YVNlY3M7XG4gICAgICB9XG4gICAgICAvLyBJZiBjdXJyZW50VGltZURlbHRhIGlzIHBvc2l0aXZlIGFuZCBhYm92ZSB0aGUgYWRqdXN0bWVudCB0aHJlc2hvbGQsXG4gICAgICAvLyB0aGUgcGxheWVyIGlzIGJlaGluZCB0aGUgc2Vla2JhciBhbmQgd2UgJ3Jld2luZCcgdGhlIHNlZWtiYXJcbiAgICAgIGVsc2UgaWYgKGN1cnJlbnRUaW1lRGVsdGEgPj0gY3VycmVudFRpbWVVcGRhdGVEZWx0YVNlY3MpIHtcbiAgICAgICAgY3VycmVudFRpbWVTZWVrQmFyIC09IGN1cnJlbnRUaW1lVXBkYXRlRGVsdGFTZWNzO1xuICAgICAgfVxuXG4gICAgICBsZXQgcGxheWJhY2tQb3NpdGlvblBlcmNlbnRhZ2UgPSAxMDAgLyBwbGF5ZXIuZ2V0RHVyYXRpb24oKSAqIGN1cnJlbnRUaW1lU2Vla0JhcjtcbiAgICAgIHRoaXMuc2V0UGxheWJhY2tQb3NpdGlvbihwbGF5YmFja1Bvc2l0aW9uUGVyY2VudGFnZSk7XG4gICAgfSwgdHJ1ZSk7XG5cbiAgICBsZXQgc3RhcnRTbW9vdGhQbGF5YmFja1Bvc2l0aW9uVXBkYXRlciA9ICgpID0+IHtcbiAgICAgIGlmICghcGxheWVyLmlzTGl2ZSgpKSB7XG4gICAgICAgIGN1cnJlbnRUaW1lU2Vla0JhciA9IHRoaXMuZ2V0UmVsYXRpdmVDdXJyZW50VGltZSgpO1xuICAgICAgICB0aGlzLnNtb290aFBsYXliYWNrUG9zaXRpb25VcGRhdGVyLnN0YXJ0KCk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIGxldCBzdG9wU21vb3RoUGxheWJhY2tQb3NpdGlvblVwZGF0ZXIgPSAoKSA9PiB7XG4gICAgICB0aGlzLnNtb290aFBsYXliYWNrUG9zaXRpb25VcGRhdGVyLmNsZWFyKCk7XG4gICAgfTtcblxuICAgIHBsYXllci5vbihwbGF5ZXIuZXhwb3J0cy5QbGF5ZXJFdmVudC5QbGF5LCBzdGFydFNtb290aFBsYXliYWNrUG9zaXRpb25VcGRhdGVyKTtcbiAgICBwbGF5ZXIub24ocGxheWVyLmV4cG9ydHMuUGxheWVyRXZlbnQuUGxheWluZywgc3RhcnRTbW9vdGhQbGF5YmFja1Bvc2l0aW9uVXBkYXRlcik7XG4gICAgcGxheWVyLm9uKHBsYXllci5leHBvcnRzLlBsYXllckV2ZW50LlBhdXNlZCwgc3RvcFNtb290aFBsYXliYWNrUG9zaXRpb25VcGRhdGVyKTtcbiAgICBwbGF5ZXIub24ocGxheWVyLmV4cG9ydHMuUGxheWVyRXZlbnQuUGxheWJhY2tGaW5pc2hlZCwgc3RvcFNtb290aFBsYXliYWNrUG9zaXRpb25VcGRhdGVyKTtcbiAgICBwbGF5ZXIub24ocGxheWVyLmV4cG9ydHMuUGxheWVyRXZlbnQuU2Vla2VkLCAoKSA9PiB7XG4gICAgICBjdXJyZW50VGltZVNlZWtCYXIgPSB0aGlzLmdldFJlbGF0aXZlQ3VycmVudFRpbWUoKTtcbiAgICB9KTtcbiAgICBwbGF5ZXIub24ocGxheWVyLmV4cG9ydHMuUGxheWVyRXZlbnQuU291cmNlVW5sb2FkZWQsIHN0b3BTbW9vdGhQbGF5YmFja1Bvc2l0aW9uVXBkYXRlcik7XG5cbiAgICBpZiAocGxheWVyLmlzUGxheWluZygpKSB7XG4gICAgICBzdGFydFNtb290aFBsYXliYWNrUG9zaXRpb25VcGRhdGVyKCk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBnZXRSZWxhdGl2ZUN1cnJlbnRUaW1lKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIFBsYXllclV0aWxzLmdldEN1cnJlbnRUaW1lUmVsYXRpdmVUb1NlZWthYmxlUmFuZ2UodGhpcy5wbGF5ZXIpO1xuICB9XG5cbiAgcmVsZWFzZSgpOiB2b2lkIHtcbiAgICBzdXBlci5yZWxlYXNlKCk7XG5cbiAgICBpZiAodGhpcy5zbW9vdGhQbGF5YmFja1Bvc2l0aW9uVXBkYXRlcikgeyAvLyBvYmplY3QgbXVzdCBub3QgbmVjZXNzYXJpbHkgZXhpc3QsIGUuZy4gaW4gdm9sdW1lIHNsaWRlciBzdWJjbGFzc1xuICAgICAgdGhpcy5zbW9vdGhQbGF5YmFja1Bvc2l0aW9uVXBkYXRlci5jbGVhcigpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnBhdXNlZFRpbWVzaGlmdFVwZGF0ZXIpIHtcbiAgICAgIHRoaXMucGF1c2VkVGltZXNoaWZ0VXBkYXRlci5jbGVhcigpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLmNvbmZpZy5lbmFibGVTZWVrUHJldmlldykge1xuICAgICAgdGhpcy5vblNlZWtQcmV2aWV3LnVuc3Vic2NyaWJlKHRoaXMuc2Vla1doaWxlU2NydWJiaW5nKTtcbiAgICB9XG4gIH1cblxuICBwcm90ZWN0ZWQgdG9Eb21FbGVtZW50KCk6IERPTSB7XG4gICAgaWYgKHRoaXMuY29uZmlnLnZlcnRpY2FsKSB7XG4gICAgICB0aGlzLmNvbmZpZy5jc3NDbGFzc2VzLnB1c2goJ3ZlcnRpY2FsJyk7XG4gICAgfVxuXG4gICAgbGV0IHNlZWtCYXJDb250YWluZXIgPSBuZXcgRE9NKCdkaXYnLCB7XG4gICAgICAnaWQnOiB0aGlzLmNvbmZpZy5pZCxcbiAgICAgICdjbGFzcyc6IHRoaXMuZ2V0Q3NzQ2xhc3NlcygpLFxuICAgICAgJ3JvbGUnOiAnc2xpZGVyJyxcbiAgICAgICdhcmlhLWxhYmVsJzogaTE4bi5wZXJmb3JtTG9jYWxpemF0aW9uKHRoaXMuY29uZmlnLmFyaWFMYWJlbCksXG4gICAgICAndGFiaW5kZXgnOiB0aGlzLmNvbmZpZy50YWJJbmRleC50b1N0cmluZygpLFxuICAgIH0sIHRoaXMpO1xuXG4gICAgbGV0IHNlZWtCYXIgPSBuZXcgRE9NKCdkaXYnLCB7XG4gICAgICAnY2xhc3MnOiB0aGlzLnByZWZpeENzcygnc2Vla2JhcicpLFxuICAgIH0pO1xuICAgIHRoaXMuc2Vla0JhciA9IHNlZWtCYXI7XG5cbiAgICAvLyBJbmRpY2F0b3IgdGhhdCBzaG93cyB0aGUgYnVmZmVyIGZpbGwgbGV2ZWxcbiAgICBsZXQgc2Vla0JhckJ1ZmZlckxldmVsID0gbmV3IERPTSgnZGl2Jywge1xuICAgICAgJ2NsYXNzJzogdGhpcy5wcmVmaXhDc3MoJ3NlZWtiYXItYnVmZmVybGV2ZWwnKSxcbiAgICB9KTtcbiAgICB0aGlzLnNlZWtCYXJCdWZmZXJQb3NpdGlvbiA9IHNlZWtCYXJCdWZmZXJMZXZlbDtcblxuICAgIC8vIEluZGljYXRvciB0aGF0IHNob3dzIHRoZSBjdXJyZW50IHBsYXliYWNrIHBvc2l0aW9uXG4gICAgbGV0IHNlZWtCYXJQbGF5YmFja1Bvc2l0aW9uID0gbmV3IERPTSgnZGl2Jywge1xuICAgICAgJ2NsYXNzJzogdGhpcy5wcmVmaXhDc3MoJ3NlZWtiYXItcGxheWJhY2twb3NpdGlvbicpLFxuICAgIH0pO1xuICAgIHRoaXMuc2Vla0JhclBsYXliYWNrUG9zaXRpb24gPSBzZWVrQmFyUGxheWJhY2tQb3NpdGlvbjtcblxuICAgIC8vIEEgbWFya2VyIG9mIHRoZSBjdXJyZW50IHBsYXliYWNrIHBvc2l0aW9uLCBlLmcuIGEgZG90IG9yIGxpbmVcbiAgICBsZXQgc2Vla0JhclBsYXliYWNrUG9zaXRpb25NYXJrZXIgPSBuZXcgRE9NKCdkaXYnLCB7XG4gICAgICAnY2xhc3MnOiB0aGlzLnByZWZpeENzcygnc2Vla2Jhci1wbGF5YmFja3Bvc2l0aW9uLW1hcmtlcicpLFxuICAgIH0pO1xuICAgIHRoaXMuc2Vla0JhclBsYXliYWNrUG9zaXRpb25NYXJrZXIgPSBzZWVrQmFyUGxheWJhY2tQb3NpdGlvbk1hcmtlcjtcblxuICAgIC8vIEluZGljYXRvciB0aGF0IHNob3cgd2hlcmUgYSBzZWVrIHdpbGwgZ28gdG9cbiAgICBsZXQgc2Vla0JhclNlZWtQb3NpdGlvbiA9IG5ldyBET00oJ2RpdicsIHtcbiAgICAgICdjbGFzcyc6IHRoaXMucHJlZml4Q3NzKCdzZWVrYmFyLXNlZWtwb3NpdGlvbicpLFxuICAgIH0pO1xuICAgIHRoaXMuc2Vla0JhclNlZWtQb3NpdGlvbiA9IHNlZWtCYXJTZWVrUG9zaXRpb247XG5cbiAgICAvLyBJbmRpY2F0b3IgdGhhdCBzaG93cyB0aGUgZnVsbCBzZWVrYmFyXG4gICAgbGV0IHNlZWtCYXJCYWNrZHJvcCA9IG5ldyBET00oJ2RpdicsIHtcbiAgICAgICdjbGFzcyc6IHRoaXMucHJlZml4Q3NzKCdzZWVrYmFyLWJhY2tkcm9wJyksXG4gICAgfSk7XG4gICAgdGhpcy5zZWVrQmFyQmFja2Ryb3AgPSBzZWVrQmFyQmFja2Ryb3A7XG5cbiAgICBsZXQgc2Vla0JhckNoYXB0ZXJNYXJrZXJzQ29udGFpbmVyID0gbmV3IERPTSgnZGl2Jywge1xuICAgICAgJ2NsYXNzJzogdGhpcy5wcmVmaXhDc3MoJ3NlZWtiYXItbWFya2VycycpLFxuICAgIH0pO1xuICAgIHRoaXMuc2Vla0Jhck1hcmtlcnNDb250YWluZXIgPSBzZWVrQmFyQ2hhcHRlck1hcmtlcnNDb250YWluZXI7XG5cbiAgICBzZWVrQmFyLmFwcGVuZCh0aGlzLnNlZWtCYXJCYWNrZHJvcCwgdGhpcy5zZWVrQmFyQnVmZmVyUG9zaXRpb24sIHRoaXMuc2Vla0JhclNlZWtQb3NpdGlvbixcbiAgICAgIHRoaXMuc2Vla0JhclBsYXliYWNrUG9zaXRpb24sIHRoaXMuc2Vla0Jhck1hcmtlcnNDb250YWluZXIsIHRoaXMuc2Vla0JhclBsYXliYWNrUG9zaXRpb25NYXJrZXIpO1xuXG4gICAgbGV0IHNlZWtpbmcgPSBmYWxzZTtcblxuICAgIC8vIERlZmluZSBoYW5kbGVyIGZ1bmN0aW9ucyBzbyB3ZSBjYW4gYXR0YWNoL3JlbW92ZSB0aGVtIGxhdGVyXG4gICAgbGV0IG1vdXNlVG91Y2hNb3ZlSGFuZGxlciA9IChlOiBNb3VzZUV2ZW50IHwgVG91Y2hFdmVudCkgPT4ge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgLy8gQXZvaWQgcHJvcGFnYXRpb24gdG8gVlIgaGFuZGxlclxuICAgICAgaWYgKHRoaXMucGxheWVyLnZyICE9IG51bGwpIHtcbiAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgIH1cblxuICAgICAgY29uc3Qgb2Zmc2V0ID0gdGhpcy5nZXRPZmZzZXQoZSk7XG4gICAgICBjb25zdCB0YXJnZXRQZXJjZW50YWdlID0gMTAwICogb2Zmc2V0O1xuICAgICAgY29uc3Qgc2Vla1Bvc2l0aW9uUHggPSBvZmZzZXQgKiB0aGlzLnNlZWtCYXIud2lkdGgoKTtcblxuICAgICAgdGhpcy5zZXRTZWVrUG9zaXRpb24odGFyZ2V0UGVyY2VudGFnZSk7XG4gICAgICB0aGlzLnNldFBsYXliYWNrUG9zaXRpb24odGFyZ2V0UGVyY2VudGFnZSk7XG4gICAgICB0aGlzLm9uU2Vla1ByZXZpZXdFdmVudCh0YXJnZXRQZXJjZW50YWdlLCBzZWVrUG9zaXRpb25QeCwgdHJ1ZSk7XG4gICAgfTtcblxuICAgIGxldCBtb3VzZVRvdWNoVXBIYW5kbGVyID0gKGU6IE1vdXNlRXZlbnQgfCBUb3VjaEV2ZW50KSA9PiB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgIC8vIFJlbW92ZSBoYW5kbGVycywgc2VlayBvcGVyYXRpb24gaXMgZmluaXNoZWRcbiAgICAgIG5ldyBET00oZG9jdW1lbnQpLm9mZigndG91Y2htb3ZlIG1vdXNlbW92ZScsIG1vdXNlVG91Y2hNb3ZlSGFuZGxlcik7XG4gICAgICBuZXcgRE9NKGRvY3VtZW50KS5vZmYoJ3RvdWNoZW5kIG1vdXNldXAnLCBtb3VzZVRvdWNoVXBIYW5kbGVyKTtcblxuICAgICAgbGV0IHRhcmdldFBlcmNlbnRhZ2UgPSAxMDAgKiB0aGlzLmdldE9mZnNldChlKTtcblxuICAgICAgaWYgKHRoaXMuY29uZmlnLnNuYXBwaW5nRW5hYmxlZCkge1xuICAgICAgICBjb25zdCBtYXRjaGluZ01hcmtlciA9IHRoaXMudGltZWxpbmVNYXJrZXJzSGFuZGxlcj8uZ2V0TWFya2VyQXRQb3NpdGlvbih0YXJnZXRQZXJjZW50YWdlKTtcbiAgICAgICAgdGFyZ2V0UGVyY2VudGFnZSA9IG1hdGNoaW5nTWFya2VyID8gbWF0Y2hpbmdNYXJrZXIucG9zaXRpb24gOiB0YXJnZXRQZXJjZW50YWdlO1xuICAgICAgfVxuXG4gICAgICB0aGlzLnNldFNlZWtpbmcoZmFsc2UpO1xuICAgICAgc2Vla2luZyA9IGZhbHNlO1xuXG4gICAgICAvLyBGaXJlIHNlZWtlZCBldmVudFxuICAgICAgdGhpcy5vblNlZWtlZEV2ZW50KHRhcmdldFBlcmNlbnRhZ2UpO1xuICAgIH07XG5cbiAgICAvLyBBIHNlZWsgYWx3YXlzIHN0YXJ0IHdpdGggYSB0b3VjaHN0YXJ0IG9yIG1vdXNlZG93biBkaXJlY3RseSBvbiB0aGUgc2Vla2Jhci5cbiAgICAvLyBUbyB0cmFjayBhIG1vdXNlIHNlZWsgYWxzbyBvdXRzaWRlIHRoZSBzZWVrYmFyIChmb3IgdG91Y2ggZXZlbnRzIHRoaXMgd29ya3MgYXV0b21hdGljYWxseSksXG4gICAgLy8gc28gdGhlIHVzZXIgZG9lcyBub3QgbmVlZCB0byB0YWtlIGNhcmUgdGhhdCB0aGUgbW91c2UgYWx3YXlzIHN0YXlzIG9uIHRoZSBzZWVrYmFyLCB3ZSBhdHRhY2ggdGhlIG1vdXNlbW92ZVxuICAgIC8vIGFuZCBtb3VzZXVwIGhhbmRsZXJzIHRvIHRoZSB3aG9sZSBkb2N1bWVudC4gQSBzZWVrIGlzIHRyaWdnZXJlZCB3aGVuIHRoZSB1c2VyIGxpZnRzIHRoZSBtb3VzZSBrZXkuXG4gICAgLy8gQSBzZWVrIG1vdXNlIGdlc3R1cmUgaXMgdGh1cyBiYXNpY2FsbHkgYSBjbGljayB3aXRoIGEgbG9uZyB0aW1lIGZyYW1lIGJldHdlZW4gZG93biBhbmQgdXAgZXZlbnRzLlxuICAgIHNlZWtCYXIub24oJ3RvdWNoc3RhcnQgbW91c2Vkb3duJywgKGU6IE1vdXNlRXZlbnQgfCBUb3VjaEV2ZW50KSA9PiB7XG4gICAgICBsZXQgaXNUb3VjaEV2ZW50ID0gQnJvd3NlclV0aWxzLmlzVG91Y2hTdXBwb3J0ZWQgJiYgdGhpcy5pc1RvdWNoRXZlbnQoZSk7XG5cbiAgICAgIC8vIFByZXZlbnQgc2VsZWN0aW9uIG9mIERPTSBlbGVtZW50cyAoYWxzbyBwcmV2ZW50cyBtb3VzZWRvd24gaWYgY3VycmVudCBldmVudCBpcyB0b3VjaHN0YXJ0KVxuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgLy8gQXZvaWQgcHJvcGFnYXRpb24gdG8gVlIgaGFuZGxlclxuICAgICAgaWYgKHRoaXMucGxheWVyLnZyICE9IG51bGwpIHtcbiAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5zZXRTZWVraW5nKHRydWUpOyAvLyBTZXQgc2Vla2luZyBjbGFzcyBvbiBET00gZWxlbWVudFxuICAgICAgc2Vla2luZyA9IHRydWU7IC8vIFNldCBzZWVrIHRyYWNraW5nIGZsYWdcblxuICAgICAgLy8gRmlyZSBzZWVrZWQgZXZlbnRcbiAgICAgIHRoaXMub25TZWVrRXZlbnQoKTtcblxuICAgICAgLy8gQWRkIGhhbmRsZXIgdG8gdHJhY2sgdGhlIHNlZWsgb3BlcmF0aW9uIG92ZXIgdGhlIHdob2xlIGRvY3VtZW50XG4gICAgICBuZXcgRE9NKGRvY3VtZW50KS5vbihpc1RvdWNoRXZlbnQgPyAndG91Y2htb3ZlJyA6ICdtb3VzZW1vdmUnLCBtb3VzZVRvdWNoTW92ZUhhbmRsZXIpO1xuICAgICAgbmV3IERPTShkb2N1bWVudCkub24oaXNUb3VjaEV2ZW50ID8gJ3RvdWNoZW5kJyA6ICdtb3VzZXVwJywgbW91c2VUb3VjaFVwSGFuZGxlcik7XG4gICAgfSk7XG5cbiAgICAvLyBEaXNwbGF5IHNlZWsgdGFyZ2V0IGluZGljYXRvciB3aGVuIG1vdXNlIGhvdmVycyBvciBmaW5nZXIgc2xpZGVzIG92ZXIgc2Vla2JhclxuICAgIHNlZWtCYXIub24oJ3RvdWNobW92ZSBtb3VzZW1vdmUnLCAoZTogTW91c2VFdmVudCB8IFRvdWNoRXZlbnQpID0+IHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgaWYgKHNlZWtpbmcpIHtcbiAgICAgICAgbW91c2VUb3VjaE1vdmVIYW5kbGVyKGUpO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBvZmZzZXQgPSB0aGlzLmdldE9mZnNldChlKTtcbiAgICAgIGNvbnN0IHNlZWtQb3NpdGlvblBlcmNlbnRhZ2UgPSAxMDAgKiBvZmZzZXQ7XG4gICAgICBjb25zdCBzZWVrUG9zaXRpb25QeCA9IG9mZnNldCAqIHRoaXMuc2Vla0Jhci53aWR0aCgpO1xuXG4gICAgICB0aGlzLnNldFNlZWtQb3NpdGlvbihzZWVrUG9zaXRpb25QZXJjZW50YWdlKTtcbiAgICAgIHRoaXMub25TZWVrUHJldmlld0V2ZW50KHNlZWtQb3NpdGlvblBlcmNlbnRhZ2UsIHNlZWtQb3NpdGlvblB4LCBmYWxzZSk7XG5cbiAgICAgIGlmICh0aGlzLmhhc0xhYmVsKCkgJiYgdGhpcy5nZXRMYWJlbCgpLmlzSGlkZGVuKCkpIHtcbiAgICAgICAgdGhpcy5nZXRMYWJlbCgpLnNob3coKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIEhpZGUgc2VlayB0YXJnZXQgaW5kaWNhdG9yIHdoZW4gbW91c2Ugb3IgZmluZ2VyIGxlYXZlcyBzZWVrYmFyXG4gICAgc2Vla0Jhci5vbigndG91Y2hlbmQgbW91c2VsZWF2ZScsIChlOiBNb3VzZUV2ZW50IHwgVG91Y2hFdmVudCkgPT4ge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICB0aGlzLnNldFNlZWtQb3NpdGlvbigwKTtcblxuICAgICAgaWYgKHRoaXMuaGFzTGFiZWwoKSkge1xuICAgICAgICB0aGlzLmdldExhYmVsKCkuaGlkZSgpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgc2Vla0JhckNvbnRhaW5lci5hcHBlbmQoc2Vla0Jhcik7XG5cbiAgICBpZiAodGhpcy5sYWJlbCkge1xuICAgICAgc2Vla0JhckNvbnRhaW5lci5hcHBlbmQodGhpcy5sYWJlbC5nZXREb21FbGVtZW50KCkpO1xuICAgIH1cblxuICAgIHJldHVybiBzZWVrQmFyQ29udGFpbmVyO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIGhvcml6b250YWwgb2Zmc2V0IG9mIGEgbW91c2UvdG91Y2ggZXZlbnQgcG9pbnQgZnJvbSB0aGUgbGVmdCBlZGdlIG9mIHRoZSBzZWVrIGJhci5cbiAgICogQHBhcmFtIGV2ZW50UGFnZVggdGhlIHBhZ2VYIGNvb3JkaW5hdGUgb2YgYW4gZXZlbnQgdG8gY2FsY3VsYXRlIHRoZSBvZmZzZXQgZnJvbVxuICAgKiBAcmV0dXJucyB7bnVtYmVyfSBhIG51bWJlciBpbiB0aGUgcmFuZ2Ugb2YgWzAsIDFdLCB3aGVyZSAwIGlzIHRoZSBsZWZ0IGVkZ2UgYW5kIDEgaXMgdGhlIHJpZ2h0IGVkZ2VcbiAgICovXG4gIHByaXZhdGUgZ2V0SG9yaXpvbnRhbE9mZnNldChldmVudFBhZ2VYOiBudW1iZXIpOiBudW1iZXIge1xuICAgIGxldCBlbGVtZW50T2Zmc2V0UHggPSB0aGlzLnNlZWtCYXIub2Zmc2V0KCkubGVmdDtcbiAgICBsZXQgd2lkdGhQeCA9IHRoaXMuc2Vla0Jhci53aWR0aCgpO1xuICAgIGxldCBvZmZzZXRQeCA9IGV2ZW50UGFnZVggLSBlbGVtZW50T2Zmc2V0UHg7XG4gICAgbGV0IG9mZnNldCA9IDEgLyB3aWR0aFB4ICogb2Zmc2V0UHg7XG5cbiAgICByZXR1cm4gdGhpcy5zYW5pdGl6ZU9mZnNldChvZmZzZXQpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIHZlcnRpY2FsIG9mZnNldCBvZiBhIG1vdXNlL3RvdWNoIGV2ZW50IHBvaW50IGZyb20gdGhlIGJvdHRvbSBlZGdlIG9mIHRoZSBzZWVrIGJhci5cbiAgICogQHBhcmFtIGV2ZW50UGFnZVkgdGhlIHBhZ2VYIGNvb3JkaW5hdGUgb2YgYW4gZXZlbnQgdG8gY2FsY3VsYXRlIHRoZSBvZmZzZXQgZnJvbVxuICAgKiBAcmV0dXJucyB7bnVtYmVyfSBhIG51bWJlciBpbiB0aGUgcmFuZ2Ugb2YgWzAsIDFdLCB3aGVyZSAwIGlzIHRoZSBib3R0b20gZWRnZSBhbmQgMSBpcyB0aGUgdG9wIGVkZ2VcbiAgICovXG4gIHByaXZhdGUgZ2V0VmVydGljYWxPZmZzZXQoZXZlbnRQYWdlWTogbnVtYmVyKTogbnVtYmVyIHtcbiAgICBsZXQgZWxlbWVudE9mZnNldFB4ID0gdGhpcy5zZWVrQmFyLm9mZnNldCgpLnRvcDtcbiAgICBsZXQgd2lkdGhQeCA9IHRoaXMuc2Vla0Jhci5oZWlnaHQoKTtcbiAgICBsZXQgb2Zmc2V0UHggPSBldmVudFBhZ2VZIC0gZWxlbWVudE9mZnNldFB4O1xuICAgIGxldCBvZmZzZXQgPSAxIC8gd2lkdGhQeCAqIG9mZnNldFB4O1xuXG4gICAgcmV0dXJuIDEgLSB0aGlzLnNhbml0aXplT2Zmc2V0KG9mZnNldCk7XG4gIH1cblxuICAvKipcbiAgICogR2V0cyB0aGUgbW91c2Ugb3IgdG91Y2ggZXZlbnQgb2Zmc2V0IGZvciB0aGUgY3VycmVudCBjb25maWd1cmF0aW9uIChob3Jpem9udGFsIG9yIHZlcnRpY2FsKS5cbiAgICogQHBhcmFtIGUgdGhlIGV2ZW50IHRvIGNhbGN1bGF0ZSB0aGUgb2Zmc2V0IGZyb21cbiAgICogQHJldHVybnMge251bWJlcn0gYSBudW1iZXIgaW4gdGhlIHJhbmdlIG9mIFswLCAxXVxuICAgKiBAc2VlICNnZXRIb3Jpem9udGFsT2Zmc2V0XG4gICAqIEBzZWUgI2dldFZlcnRpY2FsT2Zmc2V0XG4gICAqL1xuICBwcml2YXRlIGdldE9mZnNldChlOiBNb3VzZUV2ZW50IHwgVG91Y2hFdmVudCk6IG51bWJlciB7XG4gICAgaWYgKEJyb3dzZXJVdGlscy5pc1RvdWNoU3VwcG9ydGVkICYmIHRoaXMuaXNUb3VjaEV2ZW50KGUpKSB7XG4gICAgICBpZiAodGhpcy5jb25maWcudmVydGljYWwpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0VmVydGljYWxPZmZzZXQoZS50eXBlID09PSAndG91Y2hlbmQnID8gZS5jaGFuZ2VkVG91Y2hlc1swXS5wYWdlWSA6IGUudG91Y2hlc1swXS5wYWdlWSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRIb3Jpem9udGFsT2Zmc2V0KGUudHlwZSA9PT0gJ3RvdWNoZW5kJyA/IGUuY2hhbmdlZFRvdWNoZXNbMF0ucGFnZVggOiBlLnRvdWNoZXNbMF0ucGFnZVgpO1xuICAgICAgfVxuICAgIH1cbiAgICBlbHNlIGlmIChlIGluc3RhbmNlb2YgTW91c2VFdmVudCkge1xuICAgICAgaWYgKHRoaXMuY29uZmlnLnZlcnRpY2FsKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldFZlcnRpY2FsT2Zmc2V0KGUucGFnZVkpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0SG9yaXpvbnRhbE9mZnNldChlLnBhZ2VYKTtcbiAgICAgIH1cbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICBpZiAoY29uc29sZSkge1xuICAgICAgICBjb25zb2xlLndhcm4oJ2ludmFsaWQgZXZlbnQnKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiAwO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTYW5pdGl6ZXMgdGhlIG1vdXNlIG9mZnNldCB0byB0aGUgcmFuZ2Ugb2YgWzAsIDFdLlxuICAgKlxuICAgKiBXaGVuIHRyYWNraW5nIHRoZSBtb3VzZSBvdXRzaWRlIHRoZSBzZWVrIGJhciwgdGhlIG9mZnNldCBjYW4gYmUgb3V0c2lkZSB0aGUgZGVzaXJlZCByYW5nZSBhbmQgdGhpcyBtZXRob2RcbiAgICogbGltaXRzIGl0IHRvIHRoZSBkZXNpcmVkIHJhbmdlLiBFLmcuIGEgbW91c2UgZXZlbnQgbGVmdCBvZiB0aGUgbGVmdCBlZGdlIG9mIGEgc2VlayBiYXIgeWllbGRzIGFuIG9mZnNldCBiZWxvd1xuICAgKiB6ZXJvLCBidXQgdG8gZGlzcGxheSB0aGUgc2VlayB0YXJnZXQgb24gdGhlIHNlZWsgYmFyLCB3ZSBuZWVkIHRvIGxpbWl0IGl0IHRvIHplcm8uXG4gICAqXG4gICAqIEBwYXJhbSBvZmZzZXQgdGhlIG9mZnNldCB0byBzYW5pdGl6ZVxuICAgKiBAcmV0dXJucyB7bnVtYmVyfSB0aGUgc2FuaXRpemVkIG9mZnNldC5cbiAgICovXG4gIHByaXZhdGUgc2FuaXRpemVPZmZzZXQob2Zmc2V0OiBudW1iZXIpIHtcbiAgICAvLyBTaW5jZSB3ZSB0cmFjayBtb3VzZSBtb3ZlcyBvdmVyIHRoZSB3aG9sZSBkb2N1bWVudCwgdGhlIHRhcmdldCBjYW4gYmUgb3V0c2lkZSB0aGUgc2VlayByYW5nZSxcbiAgICAvLyBhbmQgd2UgbmVlZCB0byBsaW1pdCBpdCB0byB0aGUgWzAsIDFdIHJhbmdlLlxuICAgIGlmIChvZmZzZXQgPCAwKSB7XG4gICAgICBvZmZzZXQgPSAwO1xuICAgIH0gZWxzZSBpZiAob2Zmc2V0ID4gMSkge1xuICAgICAgb2Zmc2V0ID0gMTtcbiAgICB9XG5cbiAgICByZXR1cm4gb2Zmc2V0O1xuICB9XG5cbiAgLyoqXG4gICAqIFNldHMgdGhlIHBvc2l0aW9uIG9mIHRoZSBwbGF5YmFjayBwb3NpdGlvbiBpbmRpY2F0b3IuXG4gICAqIEBwYXJhbSBwZXJjZW50IGEgbnVtYmVyIGJldHdlZW4gMCBhbmQgMTAwIGFzIHJldHVybmVkIGJ5IHRoZSBwbGF5ZXJcbiAgICovXG4gIHNldFBsYXliYWNrUG9zaXRpb24ocGVyY2VudDogbnVtYmVyKSB7XG4gICAgdGhpcy5wbGF5YmFja1Bvc2l0aW9uUGVyY2VudGFnZSA9IHBlcmNlbnQ7XG5cbiAgICAvLyBTZXQgcG9zaXRpb24gb2YgdGhlIGJhclxuICAgIHRoaXMuc2V0UG9zaXRpb24odGhpcy5zZWVrQmFyUGxheWJhY2tQb3NpdGlvbiwgcGVyY2VudCk7XG5cbiAgICAvLyBTZXQgcG9zaXRpb24gb2YgdGhlIG1hcmtlclxuICAgIGxldCB0b3RhbFNpemUgPSAodGhpcy5jb25maWcudmVydGljYWwgPyAodGhpcy5zZWVrQmFyLmhlaWdodCgpIC0gdGhpcy5zZWVrQmFyUGxheWJhY2tQb3NpdGlvbk1hcmtlci5oZWlnaHQoKSkgOiB0aGlzLnNlZWtCYXIud2lkdGgoKSk7XG4gICAgbGV0IHB4ID0gKHRvdGFsU2l6ZSkgLyAxMDAgKiBwZXJjZW50O1xuICAgIGlmICh0aGlzLmNvbmZpZy52ZXJ0aWNhbCkge1xuICAgICAgcHggPSB0aGlzLnNlZWtCYXIuaGVpZ2h0KCkgLSBweCAtIHRoaXMuc2Vla0JhclBsYXliYWNrUG9zaXRpb25NYXJrZXIuaGVpZ2h0KCk7XG4gICAgfVxuXG4gICAgbGV0IHN0eWxlID0gdGhpcy5jb25maWcudmVydGljYWwgP1xuICAgICAgLy8gLW1zLXRyYW5zZm9ybSByZXF1aXJlZCBmb3IgSUU5XG4gICAgICAvLyAtd2Via2l0LXRyYW5zZm9ybSByZXF1aXJlZCBmb3IgQW5kcm9pZCA0LjQgV2ViVmlld1xuICAgICAge1xuICAgICAgICAndHJhbnNmb3JtJzogJ3RyYW5zbGF0ZVkoJyArIHB4ICsgJ3B4KScsXG4gICAgICAgICctbXMtdHJhbnNmb3JtJzogJ3RyYW5zbGF0ZVkoJyArIHB4ICsgJ3B4KScsXG4gICAgICAgICctd2Via2l0LXRyYW5zZm9ybSc6ICd0cmFuc2xhdGVZKCcgKyBweCArICdweCknLFxuICAgICAgfSA6XG4gICAgICB7XG4gICAgICAgICd0cmFuc2Zvcm0nOiAndHJhbnNsYXRlWCgnICsgcHggKyAncHgpJyxcbiAgICAgICAgJy1tcy10cmFuc2Zvcm0nOiAndHJhbnNsYXRlWCgnICsgcHggKyAncHgpJyxcbiAgICAgICAgJy13ZWJraXQtdHJhbnNmb3JtJzogJ3RyYW5zbGF0ZVgoJyArIHB4ICsgJ3B4KScsXG4gICAgICB9O1xuICAgIHRoaXMuc2Vla0JhclBsYXliYWNrUG9zaXRpb25NYXJrZXIuY3NzKHN0eWxlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZWZyZXNoZXMgdGhlIHBsYXliYWNrIHBvc2l0aW9uLiBDYW4gYmUgdXNlZCBieSBzdWJjbGFzc2VzIHRvIHJlZnJlc2ggdGhlIHBvc2l0aW9uIHdoZW5cbiAgICogdGhlIHNpemUgb2YgdGhlIGNvbXBvbmVudCBjaGFuZ2VzLlxuICAgKi9cbiAgcHJvdGVjdGVkIHJlZnJlc2hQbGF5YmFja1Bvc2l0aW9uKCkge1xuICAgIHRoaXMuc2V0UGxheWJhY2tQb3NpdGlvbih0aGlzLnBsYXliYWNrUG9zaXRpb25QZXJjZW50YWdlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIHRoZSBwb3NpdGlvbiB1bnRpbCB3aGljaCBtZWRpYSBpcyBidWZmZXJlZC5cbiAgICogQHBhcmFtIHBlcmNlbnQgYSBudW1iZXIgYmV0d2VlbiAwIGFuZCAxMDBcbiAgICovXG4gIHNldEJ1ZmZlclBvc2l0aW9uKHBlcmNlbnQ6IG51bWJlcikge1xuICAgIHRoaXMuc2V0UG9zaXRpb24odGhpcy5zZWVrQmFyQnVmZmVyUG9zaXRpb24sIHBlcmNlbnQpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldHMgdGhlIHBvc2l0aW9uIHdoZXJlIGEgc2VlaywgaWYgZXhlY3V0ZWQsIHdvdWxkIGp1bXAgdG8uXG4gICAqIEBwYXJhbSBwZXJjZW50IGEgbnVtYmVyIGJldHdlZW4gMCBhbmQgMTAwXG4gICAqL1xuICBzZXRTZWVrUG9zaXRpb24ocGVyY2VudDogbnVtYmVyKSB7XG4gICAgdGhpcy5zZXRQb3NpdGlvbih0aGlzLnNlZWtCYXJTZWVrUG9zaXRpb24sIHBlcmNlbnQpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldCB0aGUgYWN0dWFsIHBvc2l0aW9uICh3aWR0aCBvciBoZWlnaHQpIG9mIGEgRE9NIGVsZW1lbnQgdGhhdCByZXByZXNlbnQgYSBiYXIgaW4gdGhlIHNlZWsgYmFyLlxuICAgKiBAcGFyYW0gZWxlbWVudCB0aGUgZWxlbWVudCB0byBzZXQgdGhlIHBvc2l0aW9uIGZvclxuICAgKiBAcGFyYW0gcGVyY2VudCBhIG51bWJlciBiZXR3ZWVuIDAgYW5kIDEwMFxuICAgKi9cbiAgcHJpdmF0ZSBzZXRQb3NpdGlvbihlbGVtZW50OiBET00sIHBlcmNlbnQ6IG51bWJlcikge1xuICAgIGxldCBzY2FsZSA9IHBlcmNlbnQgLyAxMDA7XG5cbiAgICAvLyBXaGVuIHRoZSBzY2FsZSBpcyBleGFjdGx5IDEgb3IgdmVyeSBuZWFyIDEgKGFuZCB0aGUgYnJvd3NlciBpbnRlcm5hbGx5IHJvdW5kcyBpdCB0byAxKSwgYnJvd3NlcnMgc2VlbSB0byByZW5kZXJcbiAgICAvLyB0aGUgZWxlbWVudHMgZGlmZmVyZW50bHkgYW5kIHRoZSBoZWlnaHQgZ2V0cyBzbGlnaHRseSBvZmYsIGxlYWRpbmcgdG8gbWlzbWF0Y2hpbmcgaGVpZ2h0cyB3aGVuIGUuZy4gdGhlIGJ1ZmZlclxuICAgIC8vIGxldmVsIGJhciBoYXMgYSB3aWR0aCBvZiAxIGFuZCB0aGUgcGxheWJhY2sgcG9zaXRpb24gYmFyIGhhcyBhIHdpZHRoIDwgMS4gQSBqaXR0ZXJpbmcgYnVmZmVyIGxldmVsIGFyb3VuZCAxXG4gICAgLy8gbGVhZHMgdG8gYW4gZXZlbiB3b3JzZSBmbGlja2VyaW5nIGVmZmVjdC5cbiAgICAvLyBWYXJpb3VzIGNoYW5nZXMgaW4gQ1NTIHN0eWxpbmcgYW5kIERPTSBoaWVyYXJjaHkgZGlkIG5vdCBzb2x2ZSB0aGUgaXNzdWUgc28gdGhlIHdvcmthcm91bmQgaXMgdG8gYXZvaWQgYSBzY2FsZVxuICAgIC8vIG9mIGV4YWN0bHkgMS5cbiAgICBpZiAoc2NhbGUgPj0gMC45OTk5OSAmJiBzY2FsZSA8PSAxLjAwMDAxKSB7XG4gICAgICBzY2FsZSA9IDAuOTk5OTk7XG4gICAgfVxuXG4gICAgbGV0IHN0eWxlID0gdGhpcy5jb25maWcudmVydGljYWwgP1xuICAgICAgLy8gLW1zLXRyYW5zZm9ybSByZXF1aXJlZCBmb3IgSUU5XG4gICAgICAvLyAtd2Via2l0LXRyYW5zZm9ybSByZXF1aXJlZCBmb3IgQW5kcm9pZCA0LjQgV2ViVmlld1xuICAgICAge1xuICAgICAgICAndHJhbnNmb3JtJzogJ3NjYWxlWSgnICsgc2NhbGUgKyAnKScsXG4gICAgICAgICctbXMtdHJhbnNmb3JtJzogJ3NjYWxlWSgnICsgc2NhbGUgKyAnKScsXG4gICAgICAgICctd2Via2l0LXRyYW5zZm9ybSc6ICdzY2FsZVkoJyArIHNjYWxlICsgJyknLFxuICAgICAgfSA6XG4gICAgICB7XG4gICAgICAgICd0cmFuc2Zvcm0nOiAnc2NhbGVYKCcgKyBzY2FsZSArICcpJyxcbiAgICAgICAgJy1tcy10cmFuc2Zvcm0nOiAnc2NhbGVYKCcgKyBzY2FsZSArICcpJyxcbiAgICAgICAgJy13ZWJraXQtdHJhbnNmb3JtJzogJ3NjYWxlWCgnICsgc2NhbGUgKyAnKScsXG4gICAgICB9O1xuICAgIGVsZW1lbnQuY3NzKHN0eWxlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBQdXRzIHRoZSBzZWVrIGJhciBpbnRvIG9yIG91dCBvZiBzZWVraW5nIHN0YXRlIGJ5IGFkZGluZy9yZW1vdmluZyBhIGNsYXNzIHRvIHRoZSBET00gZWxlbWVudC4gVGhpcyBjYW4gYmUgdXNlZFxuICAgKiB0byBhZGp1c3QgdGhlIHN0eWxpbmcgd2hpbGUgc2Vla2luZy5cbiAgICpcbiAgICogQHBhcmFtIHNlZWtpbmcgc2hvdWxkIGJlIHRydWUgd2hlbiBlbnRlcmluZyBzZWVrIHN0YXRlLCBmYWxzZSB3aGVuIGV4aXRpbmcgdGhlIHNlZWsgc3RhdGVcbiAgICovXG4gIHNldFNlZWtpbmcoc2Vla2luZzogYm9vbGVhbikge1xuICAgIGlmIChzZWVraW5nKSB7XG4gICAgICB0aGlzLmdldERvbUVsZW1lbnQoKS5hZGRDbGFzcyh0aGlzLnByZWZpeENzcyhTZWVrQmFyLkNMQVNTX1NFRUtJTkcpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5nZXREb21FbGVtZW50KCkucmVtb3ZlQ2xhc3ModGhpcy5wcmVmaXhDc3MoU2Vla0Jhci5DTEFTU19TRUVLSU5HKSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrcyBpZiB0aGUgc2VlayBiYXIgaXMgY3VycmVudGx5IGluIHRoZSBzZWVrIHN0YXRlLlxuICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gdHJ1ZSBpZiBpbiBzZWVrIHN0YXRlLCBlbHNlIGZhbHNlXG4gICAqL1xuICBpc1NlZWtpbmcoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0RG9tRWxlbWVudCgpLmhhc0NsYXNzKHRoaXMucHJlZml4Q3NzKFNlZWtCYXIuQ0xBU1NfU0VFS0lORykpO1xuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrcyBpZiB0aGUgc2VlayBiYXIgaGFzIGEge0BsaW5rIFNlZWtCYXJMYWJlbH0uXG4gICAqIEByZXR1cm5zIHtib29sZWFufSB0cnVlIGlmIHRoZSBzZWVrIGJhciBoYXMgYSBsYWJlbCwgZWxzZSBmYWxzZVxuICAgKi9cbiAgaGFzTGFiZWwoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMubGFiZWwgIT0gbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBsYWJlbCBvZiB0aGlzIHNlZWsgYmFyLlxuICAgKiBAcmV0dXJucyB7U2Vla0JhckxhYmVsfSB0aGUgbGFiZWwgaWYgdGhpcyBzZWVrIGJhciBoYXMgYSBsYWJlbCwgZWxzZSBudWxsXG4gICAqL1xuICBnZXRMYWJlbCgpOiBTZWVrQmFyTGFiZWwgfCBudWxsIHtcbiAgICByZXR1cm4gdGhpcy5sYWJlbDtcbiAgfVxuXG4gIHByb3RlY3RlZCBvblNlZWtFdmVudCgpIHtcbiAgICB0aGlzLnNlZWtCYXJFdmVudHMub25TZWVrLmRpc3BhdGNoKHRoaXMpO1xuICB9XG5cbiAgcHJpdmF0ZSB1cGRhdGVMYWJlbFBvc2l0aW9uID0gKHBpeGVsUG9zaXRpb246IG51bWJlcikgPT4ge1xuICAgIGlmICghdGhpcy51aUJvdW5kaW5nUmVjdCkge1xuICAgICAgdGhpcy51aUJvdW5kaW5nUmVjdCA9IHRoaXMudWlNYW5hZ2VyLmdldFVJKCkuZ2V0RG9tRWxlbWVudCgpLmdldCgwKS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICB9XG5cbiAgICB0aGlzLmxhYmVsLnNldFBvc2l0aW9uSW5Cb3VuZHMocGl4ZWxQb3NpdGlvbiwgdGhpcy51aUJvdW5kaW5nUmVjdCk7XG4gIH07XG5cbiAgcHJvdGVjdGVkIG9uU2Vla1ByZXZpZXdFdmVudChwZXJjZW50YWdlOiBudW1iZXIsIHRhcmdldE9mZnNldFB4OiBudW1iZXIsIHNjcnViYmluZzogYm9vbGVhbikge1xuICAgIGxldCBzbmFwcGVkTWFya2VyID0gdGhpcy50aW1lbGluZU1hcmtlcnNIYW5kbGVyICYmIHRoaXMudGltZWxpbmVNYXJrZXJzSGFuZGxlci5nZXRNYXJrZXJBdFBvc2l0aW9uKHBlcmNlbnRhZ2UpO1xuXG4gICAgbGV0IHNlZWtQb3NpdGlvblBlcmNlbnRhZ2UgPSBwZXJjZW50YWdlO1xuXG4gICAgaWYgKHNuYXBwZWRNYXJrZXIpIHtcbiAgICAgIGlmIChzbmFwcGVkTWFya2VyLmR1cmF0aW9uID4gMCkge1xuICAgICAgICBpZiAocGVyY2VudGFnZSA8IHNuYXBwZWRNYXJrZXIucG9zaXRpb24pIHtcbiAgICAgICAgICAvLyBTbmFwIHRoZSBwb3NpdGlvbiB0byB0aGUgc3RhcnQgb2YgdGhlIGludGVydmFsIGlmIHRoZSBzZWVrIGlzIHdpdGhpbiB0aGUgbGVmdCBzbmFwIG1hcmdpblxuICAgICAgICAgIC8vIFdlIGtub3cgdGhhdCB3ZSBhcmUgd2l0aGluIGEgc25hcCBtYXJnaW4gd2hlbiB3ZSBhcmUgb3V0c2lkZSB0aGUgbWFya2VyIGludGVydmFsIGJ1dCBzdGlsbFxuICAgICAgICAgIC8vIGhhdmUgYSBzbmFwcGVkTWFya2VyXG4gICAgICAgICAgc2Vla1Bvc2l0aW9uUGVyY2VudGFnZSA9IHNuYXBwZWRNYXJrZXIucG9zaXRpb247XG4gICAgICAgIH0gZWxzZSBpZiAocGVyY2VudGFnZSA+IHNuYXBwZWRNYXJrZXIucG9zaXRpb24gKyBzbmFwcGVkTWFya2VyLmR1cmF0aW9uKSB7XG4gICAgICAgICAgLy8gU25hcCB0aGUgcG9zaXRpb24gdG8gdGhlIGVuZCBvZiB0aGUgaW50ZXJ2YWwgaWYgdGhlIHNlZWsgaXMgd2l0aGluIHRoZSByaWdodCBzbmFwIG1hcmdpblxuICAgICAgICAgIHNlZWtQb3NpdGlvblBlcmNlbnRhZ2UgPSBzbmFwcGVkTWFya2VyLnBvc2l0aW9uICsgc25hcHBlZE1hcmtlci5kdXJhdGlvbjtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gUG9zaXRpb24gbWFya2VycyBhbHdheXMgc25hcCB0byB0aGVpciBtYXJrZXIgcG9zaXRpb25cbiAgICAgICAgc2Vla1Bvc2l0aW9uUGVyY2VudGFnZSA9IHNuYXBwZWRNYXJrZXIucG9zaXRpb247XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHRoaXMubGFiZWwpIHtcbiAgICAgIHRoaXMudXBkYXRlTGFiZWxQb3NpdGlvbih0YXJnZXRPZmZzZXRQeCk7XG4gICAgfVxuXG4gICAgdGhpcy5zZWVrQmFyRXZlbnRzLm9uU2Vla1ByZXZpZXcuZGlzcGF0Y2godGhpcywge1xuICAgICAgc2NydWJiaW5nOiBzY3J1YmJpbmcsXG4gICAgICBwb3NpdGlvbjogc2Vla1Bvc2l0aW9uUGVyY2VudGFnZSxcbiAgICAgIG1hcmtlcjogc25hcHBlZE1hcmtlcixcbiAgICB9KTtcbiAgfVxuXG4gIHByb3RlY3RlZCBvblNlZWtlZEV2ZW50KHBlcmNlbnRhZ2U6IG51bWJlcikge1xuICAgIHRoaXMuc2Vla0JhckV2ZW50cy5vblNlZWtlZC5kaXNwYXRjaCh0aGlzLCBwZXJjZW50YWdlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBldmVudCB0aGF0IGlzIGZpcmVkIHdoZW4gYSBzY3J1YmJpbmcgc2VlayBvcGVyYXRpb24gaXMgc3RhcnRlZC5cbiAgICogQHJldHVybnMge0V2ZW50PFNlZWtCYXIsIE5vQXJncz59XG4gICAqL1xuICBnZXQgb25TZWVrKCk6IEV2ZW50PFNlZWtCYXIsIE5vQXJncz4ge1xuICAgIHJldHVybiB0aGlzLnNlZWtCYXJFdmVudHMub25TZWVrLmdldEV2ZW50KCk7XG4gIH1cblxuICAvKipcbiAgICogR2V0cyB0aGUgZXZlbnQgdGhhdCBpcyBmaXJlZCBkdXJpbmcgYSBzY3J1YmJpbmcgc2VlayAodG8gaW5kaWNhdGUgdGhhdCB0aGUgc2VlayBwcmV2aWV3LCBpLmUuIHRoZSB2aWRlbyBmcmFtZSxcbiAgICogc2hvdWxkIGJlIHVwZGF0ZWQpLCBvciBkdXJpbmcgYSBub3JtYWwgc2VlayBwcmV2aWV3IHdoZW4gdGhlIHNlZWsgYmFyIGlzIGhvdmVyZWQgKGFuZCB0aGUgc2VlayB0YXJnZXQsXG4gICAqIGkuZS4gdGhlIHNlZWsgYmFyIGxhYmVsLCBzaG91bGQgYmUgdXBkYXRlZCkuXG4gICAqIEByZXR1cm5zIHtFdmVudDxTZWVrQmFyLCBTZWVrUHJldmlld0V2ZW50QXJncz59XG4gICAqL1xuICBnZXQgb25TZWVrUHJldmlldygpOiBFdmVudDxTZWVrQmFyLCBTZWVrUHJldmlld0V2ZW50QXJncz4ge1xuICAgIHJldHVybiB0aGlzLnNlZWtCYXJFdmVudHMub25TZWVrUHJldmlldy5nZXRFdmVudCgpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIGV2ZW50IHRoYXQgaXMgZmlyZWQgd2hlbiBhIHNjcnViYmluZyBzZWVrIGhhcyBmaW5pc2hlZCBvciB3aGVuIGEgZGlyZWN0IHNlZWsgaXMgaXNzdWVkLlxuICAgKiBAcmV0dXJucyB7RXZlbnQ8U2Vla0JhciwgbnVtYmVyPn1cbiAgICovXG4gIGdldCBvblNlZWtlZCgpOiBFdmVudDxTZWVrQmFyLCBudW1iZXI+IHtcbiAgICByZXR1cm4gdGhpcy5zZWVrQmFyRXZlbnRzLm9uU2Vla2VkLmdldEV2ZW50KCk7XG4gIH1cblxuXG4gIHByb3RlY3RlZCBvblNob3dFdmVudCgpOiB2b2lkIHtcbiAgICBzdXBlci5vblNob3dFdmVudCgpO1xuXG4gICAgLy8gUmVmcmVzaCB0aGUgcG9zaXRpb24gb2YgdGhlIHBsYXliYWNrIHBvc2l0aW9uIHdoZW4gdGhlIHNlZWsgYmFyIGJlY29tZXMgdmlzaWJsZS4gVG8gY29ycmVjdGx5IHNldCB0aGUgcG9zaXRpb24sXG4gICAgLy8gdGhlIERPTSBlbGVtZW50IG11c3QgYmUgZnVsbHkgaW5pdGlhbGl6ZWQgYW4gaGF2ZSBpdHMgc2l6ZSBjYWxjdWxhdGVkLCBiZWNhdXNlIHRoZSBwb3NpdGlvbiBpcyBzZXQgYXMgYW4gYWJzb2x1dGVcbiAgICAvLyB2YWx1ZSBjYWxjdWxhdGVkIGZyb20gdGhlIHNpemUuIFRoaXMgcmVxdWlyZWQgc2l6ZSBpcyBub3Qga25vd24gd2hlbiBpdCBpcyBoaWRkZW4uXG4gICAgLy8gRm9yIHN1Y2ggY2FzZXMsIHdlIHJlZnJlc2ggdGhlIHBvc2l0aW9uIGhlcmUgaW4gb25TaG93IGJlY2F1c2UgaGVyZSBpdCBpcyBndWFyYW50ZWVkIHRoYXQgdGhlIGNvbXBvbmVudCBrbm93c1xuICAgIC8vIGl0cyBzaXplIGFuZCBjYW4gc2V0IHRoZSBwb3NpdGlvbiBjb3JyZWN0bHkuXG4gICAgdGhpcy5yZWZyZXNoUGxheWJhY2tQb3NpdGlvbigpO1xuICB9XG5cbiAvKipcbiAgICogQ2hlY2tzIGlmIFRvdWNoRXZlbnQgaXMgc3VwcG9ydGVkLlxuICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gdHJ1ZSBpZiBUb3VjaEV2ZW50IG5vdCB1bmRlZmluZWQsIGVsc2UgZmFsc2VcbiAgICovXG4gIGlzVG91Y2hFdmVudChlOiBVSUV2ZW50KTogZSBpcyBUb3VjaEV2ZW50IHtcbiAgICByZXR1cm4gd2luZG93LlRvdWNoRXZlbnQgJiYgZSBpbnN0YW5jZW9mIFRvdWNoRXZlbnQ7XG4gIH1cbn1cbiIsImltcG9ydCB7UGxheWVyQVBJfSBmcm9tICdiaXRtb3Zpbi1wbGF5ZXInO1xuXG5leHBvcnQgZnVuY3Rpb24gZ2V0TWluQnVmZmVyTGV2ZWwocGxheWVyOiBQbGF5ZXJBUEkpOiBudW1iZXIge1xuXG4gICAgY29uc3QgcGxheWVyRHVyYXRpb24gPSBwbGF5ZXIuZ2V0RHVyYXRpb24oKTtcblxuICAgIGNvbnN0IHZpZGVvQnVmZmVyTGVuZ3RoID0gcGxheWVyLmdldFZpZGVvQnVmZmVyTGVuZ3RoKCk7XG4gICAgY29uc3QgYXVkaW9CdWZmZXJMZW5ndGggPSBwbGF5ZXIuZ2V0QXVkaW9CdWZmZXJMZW5ndGgoKTtcbiAgICAvLyBDYWxjdWxhdGUgdGhlIGJ1ZmZlciBsZW5ndGggd2hpY2ggaXMgdGhlIHNtYWxsZXIgbGVuZ3RoIG9mIHRoZSBhdWRpbyBhbmQgdmlkZW8gYnVmZmVycy4gSWYgb25lIG9mIHRoZXNlXG4gICAgLy8gYnVmZmVycyBpcyBub3QgYXZhaWxhYmxlLCB3ZSBzZXQgaXQncyB2YWx1ZSB0byBNQVhfVkFMVUUgdG8gbWFrZSBzdXJlIHRoYXQgdGhlIG90aGVyIHJlYWwgdmFsdWUgaXMgdGFrZW5cbiAgICAvLyBhcyB0aGUgYnVmZmVyIGxlbmd0aC5cbiAgICBsZXQgYnVmZmVyTGVuZ3RoID0gTWF0aC5taW4oXG4gICAgICAgIHZpZGVvQnVmZmVyTGVuZ3RoICE9IG51bGwgPyB2aWRlb0J1ZmZlckxlbmd0aCA6IE51bWJlci5NQVhfVkFMVUUsXG4gICAgICAgIGF1ZGlvQnVmZmVyTGVuZ3RoICE9IG51bGwgPyBhdWRpb0J1ZmZlckxlbmd0aCA6IE51bWJlci5NQVhfVkFMVUUpO1xuICAgIC8vIElmIGJvdGggYnVmZmVyIGxlbmd0aHMgYXJlIG1pc3NpbmcsIHdlIHNldCB0aGUgYnVmZmVyIGxlbmd0aCB0byB6ZXJvXG4gICAgaWYgKGJ1ZmZlckxlbmd0aCA9PT0gTnVtYmVyLk1BWF9WQUxVRSkge1xuICAgICAgICBidWZmZXJMZW5ndGggPSAwO1xuICAgIH1cblxuICAgIHJldHVybiAxMDAgLyBwbGF5ZXJEdXJhdGlvbiAqIGJ1ZmZlckxlbmd0aDtcbn1cbiIsImltcG9ydCB7IFVJVXRpbHMgfSBmcm9tICcuLi91aXV0aWxzJztcbmltcG9ydCB7IERPTSB9IGZyb20gJy4uL2RvbSc7XG5pbXBvcnQgeyBQbGF5ZXJBUEkgfSBmcm9tICdiaXRtb3Zpbi1wbGF5ZXInO1xuaW1wb3J0IHsgVm9sdW1lQ29udHJvbGxlciB9IGZyb20gJy4uL3ZvbHVtZWNvbnRyb2xsZXInO1xuXG5leHBvcnQgZW51bSBTZWVrQmFyVHlwZSB7XG4gIFZvZCxcbiAgTGl2ZSxcbiAgVm9sdW1lLFxufVxuXG5pbnRlcmZhY2UgUmFuZ2Uge1xuICBtaW46IG51bWJlcjtcbiAgbWF4OiBudW1iZXI7XG59XG5cbmludGVyZmFjZSBLZXlTdGVwSW5jcmVtZW50c0NvbmZpZyB7XG4gIGxlZnRSaWdodDogbnVtYmVyO1xuICB1cERvd246IG51bWJlcjtcbn1cblxuY29uc3QgY29lcmNlVmFsdWVJbnRvUmFuZ2UgPSAoXG4gIHZhbHVlOiBudW1iZXIsXG4gIHJhbmdlOiBSYW5nZSxcbiAgY2I6ICh2YWx1ZTogbnVtYmVyKSA9PiB2b2lkLFxuKSA9PiB7XG4gIGlmICh2YWx1ZSA8IHJhbmdlLm1pbikge1xuICAgIGNiKHJhbmdlLm1pbik7XG4gIH0gZWxzZSBpZiAodmFsdWUgPiByYW5nZS5tYXgpIHtcbiAgICBjYihyYW5nZS5tYXgpO1xuICB9IGVsc2Uge1xuICAgIGNiKHZhbHVlKTtcbiAgfVxufTtcblxuLyoqXG4gKiBAY2F0ZWdvcnkgVXRpbHNcbiAqL1xuZXhwb3J0IGNsYXNzIFNlZWtCYXJDb250cm9sbGVyIHtcbiAgcHJvdGVjdGVkIGtleVN0ZXBJbmNyZW1lbnRzOiBLZXlTdGVwSW5jcmVtZW50c0NvbmZpZztcbiAgcHJvdGVjdGVkIHBsYXllcjogUGxheWVyQVBJO1xuICBwcm90ZWN0ZWQgdm9sdW1lQ29udHJvbGxlcjogVm9sdW1lQ29udHJvbGxlcjtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBrZXlTdGVwSW5jcmVtZW50czogS2V5U3RlcEluY3JlbWVudHNDb25maWcsXG4gICAgcGxheWVyOiBQbGF5ZXJBUEksXG4gICAgdm9sdW1lQ29udHJvbGxlcjogVm9sdW1lQ29udHJvbGxlcixcbiAgKSB7XG4gICAgdGhpcy5rZXlTdGVwSW5jcmVtZW50cyA9IGtleVN0ZXBJbmNyZW1lbnRzO1xuICAgIHRoaXMucGxheWVyID0gcGxheWVyO1xuICAgIHRoaXMudm9sdW1lQ29udHJvbGxlciA9IHZvbHVtZUNvbnRyb2xsZXI7XG4gIH1cblxuICBwcm90ZWN0ZWQgYXJyb3dLZXlDb250cm9scyhcbiAgICBjdXJyZW50VmFsdWU6IG51bWJlcixcbiAgICByYW5nZTogUmFuZ2UsXG4gICAgdmFsdWVVcGRhdGU6ICh2YWx1ZTogbnVtYmVyKSA9PiB2b2lkLFxuICApIHtcbiAgICBjb25zdCBjb250cm9sVmFsdWUgPSBNYXRoLmZsb29yKGN1cnJlbnRWYWx1ZSk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgbGVmdDogKCkgPT4gY29lcmNlVmFsdWVJbnRvUmFuZ2UoY29udHJvbFZhbHVlIC0gdGhpcy5rZXlTdGVwSW5jcmVtZW50cy5sZWZ0UmlnaHQsIHJhbmdlLCB2YWx1ZVVwZGF0ZSksXG4gICAgICByaWdodDogKCkgPT4gY29lcmNlVmFsdWVJbnRvUmFuZ2UoY29udHJvbFZhbHVlICsgdGhpcy5rZXlTdGVwSW5jcmVtZW50cy5sZWZ0UmlnaHQsIHJhbmdlLCB2YWx1ZVVwZGF0ZSksXG4gICAgICB1cDogKCkgPT4gY29lcmNlVmFsdWVJbnRvUmFuZ2UoY29udHJvbFZhbHVlICsgdGhpcy5rZXlTdGVwSW5jcmVtZW50cy51cERvd24sIHJhbmdlLCB2YWx1ZVVwZGF0ZSksXG4gICAgICBkb3duOiAoKSA9PiBjb2VyY2VWYWx1ZUludG9SYW5nZShjb250cm9sVmFsdWUgLSB0aGlzLmtleVN0ZXBJbmNyZW1lbnRzLnVwRG93biwgcmFuZ2UsIHZhbHVlVXBkYXRlKSxcbiAgICAgIGhvbWU6ICgpID0+IGNvZXJjZVZhbHVlSW50b1JhbmdlKHJhbmdlLm1pbiwgcmFuZ2UsIHZhbHVlVXBkYXRlKSxcbiAgICAgIGVuZDogKCkgPT4gY29lcmNlVmFsdWVJbnRvUmFuZ2UocmFuZ2UubWF4LCByYW5nZSwgdmFsdWVVcGRhdGUpLFxuICAgIH07XG4gIH1cblxuICBwcm90ZWN0ZWQgc2Vla0JhckNvbnRyb2xzKHR5cGU6IFNlZWtCYXJUeXBlKSB7XG4gICAgaWYgKHR5cGUgPT09IFNlZWtCYXJUeXBlLkxpdmUpIHtcbiAgICAgIHJldHVybiB0aGlzLmFycm93S2V5Q29udHJvbHModGhpcy5wbGF5ZXIuZ2V0VGltZVNoaWZ0KCksIHsgbWluOiB0aGlzLnBsYXllci5nZXRNYXhUaW1lU2hpZnQoKSwgbWF4OiAwIH0sIHRoaXMucGxheWVyLnRpbWVTaGlmdCk7XG4gICAgfSBlbHNlIGlmICh0eXBlID09PSBTZWVrQmFyVHlwZS5Wb2QpIHtcbiAgICAgIHJldHVybiB0aGlzLmFycm93S2V5Q29udHJvbHModGhpcy5wbGF5ZXIuZ2V0Q3VycmVudFRpbWUoKSwgeyBtaW46IDAsIG1heDogdGhpcy5wbGF5ZXIuZ2V0RHVyYXRpb24oKSB9LCB0aGlzLnBsYXllci5zZWVrKTtcbiAgICB9IGVsc2UgaWYgKHR5cGUgPT09IFNlZWtCYXJUeXBlLlZvbHVtZSAmJiB0aGlzLnZvbHVtZUNvbnRyb2xsZXIgIT0gbnVsbCkge1xuICAgICAgY29uc3Qgdm9sdW1lVHJhbnNpdGlvbiA9IHRoaXMudm9sdW1lQ29udHJvbGxlci5zdGFydFRyYW5zaXRpb24oKTtcbiAgICAgIHJldHVybiB0aGlzLmFycm93S2V5Q29udHJvbHModGhpcy5wbGF5ZXIuZ2V0Vm9sdW1lKCksIHsgbWluOiAwLCBtYXg6IDEwMCB9LCB2b2x1bWVUcmFuc2l0aW9uLmZpbmlzaC5iaW5kKHZvbHVtZVRyYW5zaXRpb24pKTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgc2V0U2Vla0JhckNvbnRyb2xzKGRvbUVsZW1lbnQ6IERPTSwgdHlwZTogKCkgPT4gU2Vla0JhclR5cGUpIHtcbiAgICBkb21FbGVtZW50Lm9uKCdrZXlkb3duJywgKGU6IEtleWJvYXJkRXZlbnQpID0+IHtcbiAgICAgIGNvbnN0IGNvbnRyb2xzID0gdGhpcy5zZWVrQmFyQ29udHJvbHModHlwZSgpKTtcbiAgICAgIHN3aXRjaCAoZS5rZXlDb2RlKSB7XG4gICAgICAgIGNhc2UgVUlVdGlscy5LZXlDb2RlLkxlZnRBcnJvdzoge1xuICAgICAgICAgIGNvbnRyb2xzLmxlZnQoKTtcbiAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSBVSVV0aWxzLktleUNvZGUuUmlnaHRBcnJvdzoge1xuICAgICAgICAgIGNvbnRyb2xzLnJpZ2h0KCk7XG4gICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgVUlVdGlscy5LZXlDb2RlLlVwQXJyb3c6IHtcbiAgICAgICAgICBjb250cm9scy51cCgpO1xuICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBjYXNlIFVJVXRpbHMuS2V5Q29kZS5Eb3duQXJyb3c6IHtcbiAgICAgICAgICBjb250cm9scy5kb3duKCk7XG4gICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgVUlVdGlscy5LZXlDb2RlLkhvbWU6IHtcbiAgICAgICAgICBjb250cm9scy5ob21lKCk7XG4gICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgVUlVdGlscy5LZXlDb2RlLkVuZDoge1xuICAgICAgICAgIGNvbnRyb2xzLmVuZCgpO1xuICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBjYXNlIFVJVXRpbHMuS2V5Q29kZS5TcGFjZToge1xuICAgICAgICAgIHRoaXMucGxheWVyLmlzUGxheWluZygpID8gdGhpcy5wbGF5ZXIucGF1c2UoKSA6IHRoaXMucGxheWVyLnBsYXkoKTtcbiAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgfVxufSIsImltcG9ydCB7Q29udGFpbmVyLCBDb250YWluZXJDb25maWd9IGZyb20gJy4vY29udGFpbmVyJztcbmltcG9ydCB7TGFiZWwsIExhYmVsQ29uZmlnfSBmcm9tICcuL2xhYmVsJztcbmltcG9ydCB7Q29tcG9uZW50LCBDb21wb25lbnRDb25maWd9IGZyb20gJy4vY29tcG9uZW50JztcbmltcG9ydCB7IFVJSW5zdGFuY2VNYW5hZ2VyIH0gZnJvbSAnLi4vdWltYW5hZ2VyJztcbmltcG9ydCB7U3RyaW5nVXRpbHN9IGZyb20gJy4uL3N0cmluZ3V0aWxzJztcbmltcG9ydCB7SW1hZ2VMb2FkZXJ9IGZyb20gJy4uL2ltYWdlbG9hZGVyJztcbmltcG9ydCB7Q3NzUHJvcGVydGllc30gZnJvbSAnLi4vZG9tJztcbmltcG9ydCB7IFBsYXllckFQSSwgVGh1bWJuYWlsIH0gZnJvbSAnYml0bW92aW4tcGxheWVyJztcbmltcG9ydCB7IFNlZWtCYXIsIFNlZWtQcmV2aWV3RXZlbnRBcmdzIH0gZnJvbSAnLi9zZWVrYmFyJztcbmltcG9ydCB7IFBsYXllclV0aWxzIH0gZnJvbSAnLi4vcGxheWVydXRpbHMnO1xuXG4vKipcbiAqIENvbmZpZ3VyYXRpb24gaW50ZXJmYWNlIGZvciBhIHtAbGluayBTZWVrQmFyTGFiZWx9LlxuICpcbiAqIEBjYXRlZ29yeSBDb25maWdzXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgU2Vla0JhckxhYmVsQ29uZmlnIGV4dGVuZHMgQ29udGFpbmVyQ29uZmlnIHtcbiAgLy8gbm90aGluZyB5ZXRcbn1cblxuLyoqXG4gKiBBIGxhYmVsIGZvciBhIHtAbGluayBTZWVrQmFyfSB0aGF0IGNhbiBkaXNwbGF5IHRoZSBzZWVrIHRhcmdldCB0aW1lLCBhIHRodW1ibmFpbCwgYW5kIHRpdGxlIChlLmcuIGNoYXB0ZXIgdGl0bGUpLlxuICpcbiAqIEBjYXRlZ29yeSBDb21wb25lbnRzXG4gKi9cbmV4cG9ydCBjbGFzcyBTZWVrQmFyTGFiZWwgZXh0ZW5kcyBDb250YWluZXI8U2Vla0JhckxhYmVsQ29uZmlnPiB7XG5cbiAgcHJpdmF0ZSB0aW1lTGFiZWw6IExhYmVsPExhYmVsQ29uZmlnPjtcbiAgcHJpdmF0ZSB0aXRsZUxhYmVsOiBMYWJlbDxMYWJlbENvbmZpZz47XG4gIHByaXZhdGUgdGh1bWJuYWlsOiBDb21wb25lbnQ8Q29tcG9uZW50Q29uZmlnPjtcblxuICBwcml2YXRlIHRodW1ibmFpbEltYWdlTG9hZGVyOiBJbWFnZUxvYWRlcjtcblxuICBwcml2YXRlIHRpbWVGb3JtYXQ6IHN0cmluZztcblxuICBwcml2YXRlIGFwcGxpZWRNYXJrZXJDc3NDbGFzc2VzOiBzdHJpbmdbXSA9IFtdO1xuICBwcml2YXRlIHBsYXllcjogUGxheWVyQVBJO1xuICBwcml2YXRlIHVpTWFuYWdlcjogVUlJbnN0YW5jZU1hbmFnZXI7XG4gIHByaXZhdGUgcmVhZG9ubHkgY29udGFpbmVyOiBDb250YWluZXI8Q29udGFpbmVyQ29uZmlnPjtcbiAgcHJpdmF0ZSByZWFkb25seSBjYXJldDogTGFiZWw8TGFiZWxDb25maWc+O1xuXG4gIGNvbnN0cnVjdG9yKGNvbmZpZzogU2Vla0JhckxhYmVsQ29uZmlnID0ge30pIHtcbiAgICBzdXBlcihjb25maWcpO1xuXG4gICAgdGhpcy50aW1lTGFiZWwgPSBuZXcgTGFiZWwoeyBjc3NDbGFzc2VzOiBbJ3NlZWtiYXItbGFiZWwtdGltZSddIH0pO1xuICAgIHRoaXMudGl0bGVMYWJlbCA9IG5ldyBMYWJlbCh7IGNzc0NsYXNzZXM6IFsnc2Vla2Jhci1sYWJlbC10aXRsZSddIH0pO1xuICAgIHRoaXMudGh1bWJuYWlsID0gbmV3IENvbXBvbmVudCh7IGNzc0NsYXNzZXM6IFsnc2Vla2Jhci10aHVtYm5haWwnXSwgcm9sZTogJ2ltZycgfSk7XG4gICAgdGhpcy50aHVtYm5haWxJbWFnZUxvYWRlciA9IG5ldyBJbWFnZUxvYWRlcigpO1xuXG4gICAgdGhpcy5jb250YWluZXIgPSBuZXcgQ29udGFpbmVyKHtcbiAgICAgIGNvbXBvbmVudHM6IFtcbiAgICAgICAgdGhpcy50aHVtYm5haWwsXG4gICAgICAgIG5ldyBDb250YWluZXIoe1xuICAgICAgICAgIGNvbXBvbmVudHM6IFt0aGlzLnRpdGxlTGFiZWwsIHRoaXMudGltZUxhYmVsXSxcbiAgICAgICAgICBjc3NDbGFzczogJ3NlZWtiYXItbGFiZWwtbWV0YWRhdGEnLFxuICAgICAgICB9KSxcbiAgICAgIF0sXG4gICAgICBjc3NDbGFzczogJ3NlZWtiYXItbGFiZWwtaW5uZXInLFxuICAgIH0pO1xuXG4gICAgdGhpcy5jYXJldCA9IG5ldyBMYWJlbCh7IGNzc0NsYXNzZXM6IFsnc2Vla2Jhci1sYWJlbC1jYXJldCddIH0pO1xuXG4gICAgdGhpcy5jb25maWcgPSB0aGlzLm1lcmdlQ29uZmlnKGNvbmZpZywge1xuICAgICAgY3NzQ2xhc3M6ICd1aS1zZWVrYmFyLWxhYmVsJyxcbiAgICAgIGNvbXBvbmVudHM6IFt0aGlzLmNvbnRhaW5lciwgdGhpcy5jYXJldF0sXG4gICAgICBoaWRkZW46IHRydWUsXG4gICAgfSwgdGhpcy5jb25maWcpO1xuICB9XG5cbiAgY29uZmlndXJlKHBsYXllcjogUGxheWVyQVBJLCB1aW1hbmFnZXI6IFVJSW5zdGFuY2VNYW5hZ2VyKTogdm9pZCB7XG4gICAgc3VwZXIuY29uZmlndXJlKHBsYXllciwgdWltYW5hZ2VyKTtcblxuICAgIHRoaXMucGxheWVyID0gcGxheWVyO1xuICAgIHRoaXMudWlNYW5hZ2VyID0gdWltYW5hZ2VyO1xuICAgIHVpbWFuYWdlci5vblNlZWtQcmV2aWV3LnN1YnNjcmliZVJhdGVMaW1pdGVkKHRoaXMuaGFuZGxlU2Vla1ByZXZpZXcsIDEwMCk7XG5cbiAgICBsZXQgaW5pdCA9ICgpID0+IHtcbiAgICAgIC8vIFNldCB0aW1lIGZvcm1hdCBkZXBlbmRpbmcgb24gc291cmNlIGR1cmF0aW9uXG4gICAgICB0aGlzLnRpbWVGb3JtYXQgPSBNYXRoLmFicyhwbGF5ZXIuaXNMaXZlKCkgPyBwbGF5ZXIuZ2V0TWF4VGltZVNoaWZ0KCkgOiBwbGF5ZXIuZ2V0RHVyYXRpb24oKSkgPj0gMzYwMCA/XG4gICAgICAgIFN0cmluZ1V0aWxzLkZPUk1BVF9ISE1NU1MgOiBTdHJpbmdVdGlscy5GT1JNQVRfTU1TUztcbiAgICAgIC8vIFNldCBpbml0aWFsIHN0YXRlIG9mIHRpdGxlIGFuZCB0aHVtYm5haWwgdG8gaGFuZGxlIHNvdXJjZUxvYWRlZCB3aGVuIHN3aXRjaGluZyB0byBhIGxpdmUtc3RyZWFtXG4gICAgICB0aGlzLnNldFRpdGxlVGV4dChudWxsKTtcbiAgICAgIHRoaXMuc2V0VGh1bWJuYWlsKG51bGwpO1xuICAgIH07XG5cbiAgICB1aW1hbmFnZXIuZ2V0Q29uZmlnKCkuZXZlbnRzLm9uVXBkYXRlZC5zdWJzY3JpYmUoaW5pdCk7XG4gICAgaW5pdCgpO1xuICB9XG5cbiAgcHJpdmF0ZSBoYW5kbGVTZWVrUHJldmlldyA9IChzZW5kZXI6IFNlZWtCYXIsIGFyZ3M6IFNlZWtQcmV2aWV3RXZlbnRBcmdzKSA9PiB7XG4gICAgaWYgKHRoaXMucGxheWVyLmlzTGl2ZSgpKSB7XG4gICAgICBsZXQgbWF4VGltZVNoaWZ0ID0gdGhpcy5wbGF5ZXIuZ2V0TWF4VGltZVNoaWZ0KCk7XG4gICAgICBsZXQgdGltZVNoaWZ0UHJldmlldyA9IG1heFRpbWVTaGlmdCAtIG1heFRpbWVTaGlmdCAqIChhcmdzLnBvc2l0aW9uIC8gMTAwKTtcblxuICAgICAgdGhpcy5zZXRUaW1lKHRpbWVTaGlmdFByZXZpZXcpO1xuXG4gICAgICAvLyBJbiBjYXNlIG9mIGEgbGl2ZSBzdHJlYW0gdGhlIHBsYXllciBleHBlY3RzIHRoZSB0aW1lIHBhc3NlZCBpbnRvIHRoZSBnZXRUaHVtYm5haWwgYXMgYSB3YWxsQ2xvY2tUaW1lIGFuZCBub3RcbiAgICAgIC8vIGFzIGEgcmVsYXRpdmUgdGltZVNoaWZ0IHZhbHVlLlxuICAgICAgY29uc3QgY29udmVydFRpbWVTaGlmdFByZXZpZXdUb1dhbGxDbG9ja1RpbWUgPSAodGFyZ2V0VGltZVNoaWZ0OiBudW1iZXIpOiBudW1iZXIgPT4ge1xuICAgICAgICBjb25zdCBjdXJyZW50VGltZVNoaWZ0ID0gdGhpcy5wbGF5ZXIuZ2V0VGltZVNoaWZ0KCk7XG4gICAgICAgIGNvbnN0IGN1cnJlbnRUaW1lID0gdGhpcy5wbGF5ZXIuZ2V0Q3VycmVudFRpbWUoKTtcblxuICAgICAgICBjb25zdCB3YWxsQ2xvY2tUaW1lT2ZMaXZlRWRnZSA9IGN1cnJlbnRUaW1lIC0gY3VycmVudFRpbWVTaGlmdDtcbiAgICAgICAgcmV0dXJuIHdhbGxDbG9ja1RpbWVPZkxpdmVFZGdlICsgdGFyZ2V0VGltZVNoaWZ0O1xuICAgICAgfTtcblxuICAgICAgY29uc3Qgd2FsbENsb2NrVGltZSA9IGNvbnZlcnRUaW1lU2hpZnRQcmV2aWV3VG9XYWxsQ2xvY2tUaW1lKHRpbWVTaGlmdFByZXZpZXcpO1xuICAgICAgdGhpcy5zZXRUaHVtYm5haWwodGhpcy5wbGF5ZXIuZ2V0VGh1bWJuYWlsKHdhbGxDbG9ja1RpbWUpKTtcblxuICAgIH0gZWxzZSB7XG4gICAgICBsZXQgdGltZSA9IHRoaXMucGxheWVyLmdldER1cmF0aW9uKCkgKiAoYXJncy5wb3NpdGlvbiAvIDEwMCk7XG4gICAgICB0aGlzLnNldFRpbWUodGltZSk7XG5cbiAgICAgIGNvbnN0IHNlZWthYmxlUmFuZ2VTdGFydCA9IFBsYXllclV0aWxzLmdldFNlZWthYmxlUmFuZ2VTdGFydCh0aGlzLnBsYXllciwgMCk7XG4gICAgICBjb25zdCBhYnNvbHV0ZVNlZWtUYXJnZXQgPSB0aW1lICsgc2Vla2FibGVSYW5nZVN0YXJ0O1xuICAgICAgdGhpcy5zZXRUaHVtYm5haWwodGhpcy5wbGF5ZXIuZ2V0VGh1bWJuYWlsKGFic29sdXRlU2Vla1RhcmdldCkpO1xuICAgIH1cblxuICAgIGlmIChhcmdzLm1hcmtlcikge1xuICAgICAgdGhpcy5zZXRUaXRsZVRleHQoYXJncy5tYXJrZXIubWFya2VyLnRpdGxlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5zZXRUaXRsZVRleHQobnVsbCk7XG4gICAgfVxuXG4gICAgLy8gUmVtb3ZlIENTUyBjbGFzc2VzIGZyb20gcHJldmlvdXMgbWFya2VyXG4gICAgaWYgKHRoaXMuYXBwbGllZE1hcmtlckNzc0NsYXNzZXMubGVuZ3RoID4gMCkge1xuICAgICAgdGhpcy5nZXREb21FbGVtZW50KCkucmVtb3ZlQ2xhc3ModGhpcy5hcHBsaWVkTWFya2VyQ3NzQ2xhc3Nlcy5qb2luKCcgJykpO1xuICAgICAgdGhpcy5hcHBsaWVkTWFya2VyQ3NzQ2xhc3NlcyA9IFtdO1xuICAgIH1cblxuICAgIC8vIEFkZCBDU1MgY2xhc3NlcyBvZiBjdXJyZW50IG1hcmtlclxuICAgIGlmIChhcmdzLm1hcmtlcikge1xuICAgICAgY29uc3QgY3NzQ2xhc3NlcyA9IChhcmdzLm1hcmtlci5tYXJrZXIuY3NzQ2xhc3NlcyB8fCBbXSkubWFwKGNzc0NsYXNzID0+IHRoaXMucHJlZml4Q3NzKGNzc0NsYXNzKSk7XG4gICAgICB0aGlzLmdldERvbUVsZW1lbnQoKS5hZGRDbGFzcyhjc3NDbGFzc2VzLmpvaW4oJyAnKSk7XG4gICAgICB0aGlzLmFwcGxpZWRNYXJrZXJDc3NDbGFzc2VzID0gY3NzQ2xhc3NlcztcbiAgICB9XG4gIH07XG5cbiAgcHVibGljIHNldFBvc2l0aW9uSW5Cb3VuZHMoc2Vla1Bvc2l0aW9uUHg6IG51bWJlciwgYm91bmRzOiBET01SZWN0KSB7XG4gICAgdGhpcy5nZXREb21FbGVtZW50KCkuY3NzKCdsZWZ0Jywgc2Vla1Bvc2l0aW9uUHggKyAncHgnKTtcblxuICAgIC8vIENoZWNrIHBhcmVudCBjb250YWluZXIgYXMgaXQgaGFzIGEgcGFkZGluZyB0aGF0IG5lZWRzIHRvIGJlIGNvbnNpZGVyZWRcbiAgICBjb25zdCBsYWJlbEJvdW5kaW5nID0gdGhpcy5jb250YWluZXIuZ2V0RG9tRWxlbWVudCgpLmdldCgwKS5wYXJlbnRFbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuXG4gICAgbGV0IHByZXZlbnRPdmVyZmxvd09mZnNldCA9IDA7XG4gICAgaWYgKGxhYmVsQm91bmRpbmcucmlnaHQgPiBib3VuZHMucmlnaHQpIHtcbiAgICAgIHByZXZlbnRPdmVyZmxvd09mZnNldCA9IGxhYmVsQm91bmRpbmcucmlnaHQgLSBib3VuZHMucmlnaHQ7XG4gICAgfSBlbHNlIGlmIChsYWJlbEJvdW5kaW5nLmxlZnQgPCBib3VuZHMubGVmdCkge1xuICAgICAgcHJldmVudE92ZXJmbG93T2Zmc2V0ID0gbGFiZWxCb3VuZGluZy5sZWZ0IC0gYm91bmRzLmxlZnQ7XG4gICAgfVxuXG4gICAgaWYgKHByZXZlbnRPdmVyZmxvd09mZnNldCAhPT0gMCkge1xuICAgICAgdGhpcy5nZXREb21FbGVtZW50KCkuY3NzKCdsZWZ0Jywgc2Vla1Bvc2l0aW9uUHggLSBwcmV2ZW50T3ZlcmZsb3dPZmZzZXQgKyAncHgnKTtcblxuICAgICAgdGhpcy5jYXJldC5nZXREb21FbGVtZW50KCkuY3NzKCd0cmFuc2Zvcm0nLCBgdHJhbnNsYXRlWCgke3ByZXZlbnRPdmVyZmxvd09mZnNldH1weClgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5jYXJldC5nZXREb21FbGVtZW50KCkuY3NzKCd0cmFuc2Zvcm0nLCBudWxsKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogU2V0cyBhcmJpdHJhcnkgdGV4dCBvbiB0aGUgbGFiZWwuXG4gICAqIEBwYXJhbSB0ZXh0IHRoZSB0ZXh0IHRvIHNob3cgb24gdGhlIGxhYmVsXG4gICAqL1xuICBzZXRUZXh0KHRleHQ6IHN0cmluZykge1xuICAgIHRoaXMudGltZUxhYmVsLnNldFRleHQodGV4dCk7XG4gIH1cblxuICAvKipcbiAgICogU2V0cyBhIHRpbWUgdG8gYmUgZGlzcGxheWVkIG9uIHRoZSBsYWJlbC5cbiAgICogQHBhcmFtIHNlY29uZHMgdGhlIHRpbWUgaW4gc2Vjb25kcyB0byBkaXNwbGF5IG9uIHRoZSBsYWJlbFxuICAgKi9cbiAgc2V0VGltZShzZWNvbmRzOiBudW1iZXIpIHtcbiAgICB0aGlzLnNldFRleHQoU3RyaW5nVXRpbHMuc2Vjb25kc1RvVGltZShzZWNvbmRzLCB0aGlzLnRpbWVGb3JtYXQpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIHRoZSB0ZXh0IG9uIHRoZSB0aXRsZSBsYWJlbC5cbiAgICogQHBhcmFtIHRleHQgdGhlIHRleHQgdG8gc2hvdyBvbiB0aGUgbGFiZWxcbiAgICovXG4gIHNldFRpdGxlVGV4dCh0ZXh0ID0gJycpIHtcbiAgICB0aGlzLnRpdGxlTGFiZWwuc2V0VGV4dCh0ZXh0KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIG9yIHJlbW92ZXMgYSB0aHVtYm5haWwgb24gdGhlIGxhYmVsLlxuICAgKiBAcGFyYW0gdGh1bWJuYWlsIHRoZSB0aHVtYm5haWwgdG8gZGlzcGxheSBvbiB0aGUgbGFiZWwgb3IgbnVsbCB0byByZW1vdmUgYSBkaXNwbGF5ZWQgdGh1bWJuYWlsXG4gICAqL1xuICBzZXRUaHVtYm5haWwodGh1bWJuYWlsOiBUaHVtYm5haWwgPSBudWxsKSB7XG4gICAgbGV0IHRodW1ibmFpbEVsZW1lbnQgPSB0aGlzLnRodW1ibmFpbC5nZXREb21FbGVtZW50KCk7XG5cbiAgICBpZiAodGh1bWJuYWlsID09IG51bGwpIHtcbiAgICAgIHRodW1ibmFpbEVsZW1lbnQuY3NzKHtcbiAgICAgICAgJ2JhY2tncm91bmQtaW1hZ2UnOiBudWxsLFxuICAgICAgICAnZGlzcGxheSc6IG51bGwsXG4gICAgICAgICd3aWR0aCc6IG51bGwsXG4gICAgICAgICdoZWlnaHQnOiBudWxsLFxuICAgICAgfSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgLy8gV2UgdXNlIHRoZSB0aHVtYm5haWwgaW1hZ2UgbG9hZGVyIHRvIG1ha2Ugc3VyZSB0aGUgdGh1bWJuYWlsIGlzIGxvYWRlZCBhbmQgaXQncyBzaXplIGlzIGtub3duIGJlZm9yZSBiZSBjYW5cbiAgICAgIC8vIGNhbGN1bGF0ZSB0aGUgQ1NTIHByb3BlcnRpZXMgYW5kIHNldCB0aGVtIG9uIHRoZSBlbGVtZW50LlxuICAgICAgdGhpcy50aHVtYm5haWxJbWFnZUxvYWRlci5sb2FkKHRodW1ibmFpbC51cmwsICh1cmwsIHdpZHRoLCBoZWlnaHQpID0+IHtcbiAgICAgICAgLy8gY2FuIGJlIGNoZWNrZWQgbGlrZSB0aGF0IGJlY2F1c2UgeC95L3cvaCBhcmUgZWl0aGVyIGFsbCBwcmVzZW50IG9yIG5vbmVcbiAgICAgICAgLy8gaHR0cHM6Ly93d3cudzMub3JnL1RSL21lZGlhLWZyYWdzLyNuYW1pbmctc3BhY2VcbiAgICAgICAgaWYgKHRodW1ibmFpbC54ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICB0aHVtYm5haWxFbGVtZW50LmNzcyh0aGlzLnRodW1ibmFpbENzc1Nwcml0ZSh0aHVtYm5haWwsIHdpZHRoLCBoZWlnaHQpKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aHVtYm5haWxFbGVtZW50LmNzcyh0aGlzLnRodW1ibmFpbENzc1NpbmdsZUltYWdlKHRodW1ibmFpbCwgd2lkdGgsIGhlaWdodCkpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHRodW1ibmFpbENzc1Nwcml0ZSh0aHVtYm5haWw6IFRodW1ibmFpbCwgd2lkdGg6IG51bWJlciwgaGVpZ2h0OiBudW1iZXIpOiBDc3NQcm9wZXJ0aWVzIHtcbiAgICBsZXQgdGh1bWJuYWlsQ291bnRYID0gd2lkdGggLyB0aHVtYm5haWwud2lkdGg7XG4gICAgbGV0IHRodW1ibmFpbENvdW50WSA9IGhlaWdodCAvIHRodW1ibmFpbC5oZWlnaHQ7XG5cbiAgICBsZXQgdGh1bWJuYWlsSW5kZXhYID0gdGh1bWJuYWlsLnggLyB0aHVtYm5haWwud2lkdGg7XG4gICAgbGV0IHRodW1ibmFpbEluZGV4WSA9IHRodW1ibmFpbC55IC8gdGh1bWJuYWlsLmhlaWdodDtcblxuICAgIGxldCBzaXplWCA9IDEwMCAqIHRodW1ibmFpbENvdW50WDtcbiAgICBsZXQgc2l6ZVkgPSAxMDAgKiB0aHVtYm5haWxDb3VudFk7XG5cbiAgICBsZXQgb2Zmc2V0WCA9IDEwMCAqIHRodW1ibmFpbEluZGV4WDtcbiAgICBsZXQgb2Zmc2V0WSA9IDEwMCAqIHRodW1ibmFpbEluZGV4WTtcblxuICAgIGxldCBhc3BlY3RSYXRpbyA9IDEgLyB0aHVtYm5haWwud2lkdGggKiB0aHVtYm5haWwuaGVpZ2h0O1xuXG4gICAgLy8gVGhlIHRodW1ibmFpbCBzaXplIGlzIHNldCBieSBzZXR0aW5nIHRoZSBDU1MgJ3dpZHRoJyBhbmQgJ3BhZGRpbmctYm90dG9tJyBwcm9wZXJ0aWVzLiAncGFkZGluZy1ib3R0b20nIGlzXG4gICAgLy8gdXNlZCBiZWNhdXNlIGl0IGlzIHJlbGF0aXZlIHRvIHRoZSB3aWR0aCBhbmQgY2FuIGJlIHVzZWQgdG8gc2V0IHRoZSBhc3BlY3QgcmF0aW8gb2YgdGhlIHRodW1ibmFpbC5cbiAgICAvLyBBIGRlZmF1bHQgdmFsdWUgZm9yIHdpZHRoIGlzIHNldCBpbiB0aGUgc3R5bGVzaGVldCBhbmQgY2FuIGJlIG92ZXJ3cml0dGVuIGZyb20gdGhlcmUgb3IgYW55d2hlcmUgZWxzZS5cbiAgICByZXR1cm4ge1xuICAgICAgJ2Rpc3BsYXknOiAnaW5oZXJpdCcsXG4gICAgICAnYmFja2dyb3VuZC1pbWFnZSc6IGB1cmwoJHt0aHVtYm5haWwudXJsfSlgLFxuICAgICAgJ3BhZGRpbmctYm90dG9tJzogYCR7MTAwICogYXNwZWN0UmF0aW99JWAsXG4gICAgICAnYmFja2dyb3VuZC1zaXplJzogYCR7c2l6ZVh9JSAke3NpemVZfSVgLFxuICAgICAgJ2JhY2tncm91bmQtcG9zaXRpb24nOiBgLSR7b2Zmc2V0WH0lIC0ke29mZnNldFl9JWAsXG4gICAgfTtcbiAgfVxuXG4gIHByaXZhdGUgdGh1bWJuYWlsQ3NzU2luZ2xlSW1hZ2UodGh1bWJuYWlsOiBUaHVtYm5haWwsIHdpZHRoOiBudW1iZXIsIGhlaWdodDogbnVtYmVyKTogQ3NzUHJvcGVydGllcyB7XG4gICAgbGV0IGFzcGVjdFJhdGlvID0gMSAvIHdpZHRoICogaGVpZ2h0O1xuXG4gICAgcmV0dXJuIHtcbiAgICAgICdkaXNwbGF5JzogJ2luaGVyaXQnLFxuICAgICAgJ2JhY2tncm91bmQtaW1hZ2UnOiBgdXJsKCR7dGh1bWJuYWlsLnVybH0pYCxcbiAgICAgICdwYWRkaW5nLWJvdHRvbSc6IGAkezEwMCAqIGFzcGVjdFJhdGlvfSVgLFxuICAgICAgJ2JhY2tncm91bmQtc2l6ZSc6IGAxMDAlIDEwMCVgLFxuICAgICAgJ2JhY2tncm91bmQtcG9zaXRpb24nOiBgMCAwYCxcbiAgICB9O1xuICB9XG5cbiAgcmVsZWFzZSgpOiB2b2lkIHtcbiAgICBzdXBlci5yZWxlYXNlKCk7XG5cbiAgICB0aGlzLnVpTWFuYWdlci5vblNlZWtQcmV2aWV3LnVuc3Vic2NyaWJlKHRoaXMuaGFuZGxlU2Vla1ByZXZpZXcpO1xuICB9XG59XG4iLCJpbXBvcnQgeyBMaXN0U2VsZWN0b3IsIExpc3RTZWxlY3RvckNvbmZpZyB9IGZyb20gJy4vbGlzdHNlbGVjdG9yJztcbmltcG9ydCB7IERPTSB9IGZyb20gJy4uL2RvbSc7XG5pbXBvcnQgeyBpMThuIH0gZnJvbSAnLi4vbG9jYWxpemF0aW9uL2kxOG4nO1xuaW1wb3J0IHsgUGxheWVyQVBJIH0gZnJvbSAnYml0bW92aW4tcGxheWVyJztcbmltcG9ydCB7IFVJSW5zdGFuY2VNYW5hZ2VyIH0gZnJvbSAnLi4vdWltYW5hZ2VyJztcbmltcG9ydCB7IFVJQ29udGFpbmVyIH0gZnJvbSAnLi91aWNvbnRhaW5lcic7XG5pbXBvcnQgeyBQbGF5ZXJVdGlscyB9IGZyb20gJy4uL3BsYXllcnV0aWxzJztcbmltcG9ydCB7IFZpZXdNb2RlIH0gZnJvbSAnLi9jb21wb25lbnQnO1xuXG5jb25zdCBEb2N1bWVudERyb3Bkb3duQ2xvc2VkRXZlbnRzID0gW1xuICAnbW91c2Vtb3ZlJyxcbiAgJ21vdXNlZW50ZXInLFxuICAnbW91c2VsZWF2ZScsXG4gICd0b3VjaHN0YXJ0JyxcbiAgJ3RvdWNobW92ZScsXG4gICd0b3VjaGVuZCcsXG4gICdwb2ludGVybW92ZScsXG4gICdjbGljaycsXG4gICdrZXlkb3duJyxcbiAgJ2tleXByZXNzJyxcbiAgJ2tleXVwJyxcbiAgJ2JsdXInLFxuXTtcblxuY29uc3QgU2VsZWN0RHJvcGRvd25DbG9zZWRFdmVudHMgPSBbXG4gICdjaGFuZ2UnLFxuICAna2V5dXAnLFxuICAnbW91c2V1cCcsXG5dO1xuXG5jb25zdCBEcm9wZG93bk9wZW5lZEV2ZW50czogW3N0cmluZywgKGV2ZW50OiBFdmVudCkgPT4gYm9vbGVhbl1bXSA9IFtcbiAgWydjbGljaycsICgpID0+IHRydWVdLFxuICBbJ2tleWRvd24nLCAoZXZlbnQ6IEtleWJvYXJkRXZlbnQpID0+IFsnICcsICdBcnJvd1VwJywgJ0Fycm93RG93biddLmluY2x1ZGVzKGV2ZW50LmtleSldLFxuICBbJ21vdXNlZG93bicsICgpID0+IHRydWVdLFxuXTtcblxuY29uc3QgVGltZW91dCA9IDEwMDtcblxuLyoqXG4gKiBBIHNpbXBsZSBzZWxlY3QgYm94IHByb3ZpZGluZyB0aGUgcG9zc2liaWxpdHkgdG8gc2VsZWN0IGEgc2luZ2xlIGl0ZW0gb3V0IG9mIGEgbGlzdCBvZiBhdmFpbGFibGUgaXRlbXMuXG4gKlxuICogRE9NIGV4YW1wbGU6XG4gKiA8Y29kZT5cbiAqICAgICA8c2VsZWN0IGNsYXNzPSd1aS1zZWxlY3Rib3gnPlxuICogICAgICAgICA8b3B0aW9uIHZhbHVlPSdrZXknPmxhYmVsPC9vcHRpb24+XG4gKiAgICAgICAgIC4uLlxuICogICAgIDwvc2VsZWN0PlxuICogPC9jb2RlPlxuICpcbiAqIEBjYXRlZ29yeSBDb21wb25lbnRzXG4gKi9cblxuZXhwb3J0IGNsYXNzIFNlbGVjdEJveCBleHRlbmRzIExpc3RTZWxlY3RvcjxMaXN0U2VsZWN0b3JDb25maWc+IHtcbiAgcHJpdmF0ZSBzZWxlY3RFbGVtZW50OiBET00gfCB1bmRlZmluZWQ7XG4gIHByaXZhdGUgZHJvcGRvd25DbG9zZUxpc3RlbmVyVGltZW91dElkID0gMDtcbiAgcHJpdmF0ZSByZW1vdmVEcm9wZG93bkNsb3NlTGlzdGVuZXJzID0gKCkgPT4ge307XG4gIHByaXZhdGUgdWlDb250YWluZXI6IFVJQ29udGFpbmVyIHwgdW5kZWZpbmVkO1xuICBwcml2YXRlIHJlbW92ZURyb3Bkb3duT3BlbmVkTGlzdGVuZXJzID0gKCkgPT4ge307XG5cbiAgY29uc3RydWN0b3IoY29uZmlnOiBMaXN0U2VsZWN0b3JDb25maWcgPSB7fSkge1xuICAgIHN1cGVyKGNvbmZpZyk7XG5cbiAgICB0aGlzLmNvbmZpZyA9IHRoaXMubWVyZ2VDb25maWcoY29uZmlnLCB7XG4gICAgICBjc3NDbGFzczogJ3VpLXNlbGVjdGJveCcsXG4gICAgfSwgdGhpcy5jb25maWcpO1xuICB9XG5cbiAgcHJvdGVjdGVkIHRvRG9tRWxlbWVudCgpOiBET00ge1xuICAgIHRoaXMuc2VsZWN0RWxlbWVudCA9IG5ldyBET00oJ3NlbGVjdCcsIHtcbiAgICAgICdpZCc6IHRoaXMuY29uZmlnLmlkLFxuICAgICAgJ2NsYXNzJzogdGhpcy5nZXRDc3NDbGFzc2VzKCksXG4gICAgICAnYXJpYS1sYWJlbCc6IGkxOG4ucGVyZm9ybUxvY2FsaXphdGlvbih0aGlzLmNvbmZpZy5hcmlhTGFiZWwpLFxuICAgIH0sIHRoaXMpO1xuXG4gICAgdGhpcy5vbkRpc2FibGVkLnN1YnNjcmliZSh0aGlzLmNsb3NlRHJvcGRvd24pO1xuICAgIHRoaXMub25IaWRlLnN1YnNjcmliZSh0aGlzLmNsb3NlRHJvcGRvd24pO1xuICAgIHRoaXMuYWRkRHJvcGRvd25PcGVuZWRMaXN0ZW5lcnMoKTtcbiAgICB0aGlzLnVwZGF0ZURvbUl0ZW1zKCk7XG5cbiAgICB0aGlzLnNlbGVjdEVsZW1lbnQub24oJ2NoYW5nZScsIHRoaXMub25DaGFuZ2UpO1xuXG4gICAgcmV0dXJuIHRoaXMuc2VsZWN0RWxlbWVudDtcbiAgfVxuXG4gIGNvbmZpZ3VyZShwbGF5ZXI6IFBsYXllckFQSSwgdWltYW5hZ2VyOiBVSUluc3RhbmNlTWFuYWdlcikge1xuICAgIHN1cGVyLmNvbmZpZ3VyZShwbGF5ZXIsIHVpbWFuYWdlcik7XG4gICAgdGhpcy51aUNvbnRhaW5lciA9IHVpbWFuYWdlci5nZXRVSSgpO1xuICAgIHRoaXMudWlDb250YWluZXI/Lm9uUGxheWVyU3RhdGVDaGFuZ2UoKS5zdWJzY3JpYmUodGhpcy5vblBsYXllclN0YXRlQ2hhbmdlKTtcbiAgfVxuXG4gIHByaXZhdGUgcmVhZG9ubHkgb25DaGFuZ2UgPSAoKSA9PiB7XG4gICAgbGV0IHZhbHVlID0gdGhpcy5zZWxlY3RFbGVtZW50LnZhbCgpO1xuICAgIHRoaXMub25JdGVtU2VsZWN0ZWRFdmVudCh2YWx1ZSwgZmFsc2UpO1xuICB9O1xuXG4gIHByaXZhdGUgZ2V0U2VsZWN0RWxlbWVudCgpIHtcbiAgICByZXR1cm4gdGhpcy5zZWxlY3RFbGVtZW50Py5nZXQoKT8uWzBdO1xuICB9XG5cbiAgcHJvdGVjdGVkIHVwZGF0ZURvbUl0ZW1zKHNlbGVjdGVkVmFsdWU6IHN0cmluZyA9IG51bGwpIHtcbiAgICBpZiAodGhpcy5zZWxlY3RFbGVtZW50ID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBEZWxldGUgYWxsIGNoaWxkcmVuXG4gICAgdGhpcy5zZWxlY3RFbGVtZW50LmVtcHR5KCk7XG5cbiAgICAvLyBBZGQgdXBkYXRlZCBjaGlsZHJlblxuICAgIGZvciAobGV0IGl0ZW0gb2YgdGhpcy5pdGVtcykge1xuICAgICAgbGV0IG9wdGlvbkVsZW1lbnQgPSBuZXcgRE9NKCdvcHRpb24nLCB7XG4gICAgICAgICd2YWx1ZSc6IFN0cmluZyhpdGVtLmtleSksXG4gICAgICB9KS5odG1sKGkxOG4ucGVyZm9ybUxvY2FsaXphdGlvbihpdGVtLmxhYmVsKSk7XG5cbiAgICAgIGlmIChpdGVtLmtleSA9PT0gU3RyaW5nKHNlbGVjdGVkVmFsdWUpKSB7IC8vIGNvbnZlcnQgc2VsZWN0ZWRWYWx1ZSB0byBzdHJpbmcgdG8gY2F0Y2ggJ251bGwnL251bGwgY2FzZVxuICAgICAgICBvcHRpb25FbGVtZW50LmF0dHIoJ3NlbGVjdGVkJywgJ3NlbGVjdGVkJyk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuc2VsZWN0RWxlbWVudC5hcHBlbmQob3B0aW9uRWxlbWVudCk7XG4gICAgfVxuICB9XG5cbiAgcHJvdGVjdGVkIG9uSXRlbUFkZGVkRXZlbnQodmFsdWU6IHN0cmluZykge1xuICAgIHN1cGVyLm9uSXRlbUFkZGVkRXZlbnQodmFsdWUpO1xuICAgIHRoaXMudXBkYXRlRG9tSXRlbXModGhpcy5zZWxlY3RlZEl0ZW0pO1xuICB9XG5cbiAgcHJvdGVjdGVkIG9uSXRlbVJlbW92ZWRFdmVudCh2YWx1ZTogc3RyaW5nKSB7XG4gICAgc3VwZXIub25JdGVtUmVtb3ZlZEV2ZW50KHZhbHVlKTtcbiAgICB0aGlzLnVwZGF0ZURvbUl0ZW1zKHRoaXMuc2VsZWN0ZWRJdGVtKTtcbiAgfVxuXG4gIHByb3RlY3RlZCBvbkl0ZW1TZWxlY3RlZEV2ZW50KHZhbHVlOiBzdHJpbmcsIHVwZGF0ZURvbUl0ZW1zOiBib29sZWFuID0gdHJ1ZSkge1xuICAgIHN1cGVyLm9uSXRlbVNlbGVjdGVkRXZlbnQodmFsdWUpO1xuICAgIGlmICh1cGRhdGVEb21JdGVtcykge1xuICAgICAgdGhpcy51cGRhdGVEb21JdGVtcyh2YWx1ZSk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIHJlYWRvbmx5IGNsb3NlRHJvcGRvd24gPSAoKSA9PiB7XG4gICAgY29uc3Qgc2VsZWN0ID0gdGhpcy5nZXRTZWxlY3RFbGVtZW50KCk7XG5cbiAgICBpZiAoc2VsZWN0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBzZWxlY3QuYmx1cigpO1xuICB9O1xuXG4gIHByaXZhdGUgcmVhZG9ubHkgb25QbGF5ZXJTdGF0ZUNoYW5nZSA9IChfOiBVSUNvbnRhaW5lciwgc3RhdGU6IFBsYXllclV0aWxzLlBsYXllclN0YXRlKSA9PiB7XG4gICAgaWYgKFtQbGF5ZXJVdGlscy5QbGF5ZXJTdGF0ZS5JZGxlLCBQbGF5ZXJVdGlscy5QbGF5ZXJTdGF0ZS5GaW5pc2hlZF0uaW5jbHVkZXMoc3RhdGUpKSB7XG4gICAgICB0aGlzLmNsb3NlRHJvcGRvd24oKTtcbiAgICB9XG4gIH07XG5cbiAgcHJpdmF0ZSBvbkRyb3Bkb3duT3BlbmVkID0gKCkgPT4ge1xuICAgIGNsZWFyVGltZW91dCh0aGlzLmRyb3Bkb3duQ2xvc2VMaXN0ZW5lclRpbWVvdXRJZCk7XG5cbiAgICB0aGlzLmRyb3Bkb3duQ2xvc2VMaXN0ZW5lclRpbWVvdXRJZCA9IHdpbmRvdy5zZXRUaW1lb3V0KCgpID0+IHRoaXMuYWRkRHJvcGRvd25DbG9zZUxpc3RlbmVycygpLCBUaW1lb3V0KTtcbiAgICB0aGlzLm9uVmlld01vZGVDaGFuZ2VkRXZlbnQoVmlld01vZGUuUGVyc2lzdGVudCk7XG4gIH07XG5cbiAgcHJpdmF0ZSBvbkRyb3Bkb3duQ2xvc2VkID0gKCkgPT4ge1xuICAgIGNsZWFyVGltZW91dCh0aGlzLmRyb3Bkb3duQ2xvc2VMaXN0ZW5lclRpbWVvdXRJZCk7XG5cbiAgICB0aGlzLnJlbW92ZURyb3Bkb3duQ2xvc2VMaXN0ZW5lcnMoKTtcbiAgICB0aGlzLm9uVmlld01vZGVDaGFuZ2VkRXZlbnQoVmlld01vZGUuVGVtcG9yYXJ5KTtcbiAgfTtcblxuICBwcml2YXRlIGFkZERyb3Bkb3duQ2xvc2VMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5yZW1vdmVEcm9wZG93bkNsb3NlTGlzdGVuZXJzKCk7XG5cbiAgICBjbGVhclRpbWVvdXQodGhpcy5kcm9wZG93bkNsb3NlTGlzdGVuZXJUaW1lb3V0SWQpO1xuXG4gICAgRG9jdW1lbnREcm9wZG93bkNsb3NlZEV2ZW50cy5mb3JFYWNoKGV2ZW50ID0+IGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoZXZlbnQsIHRoaXMub25Ecm9wZG93bkNsb3NlZCwgdHJ1ZSkpO1xuICAgIFNlbGVjdERyb3Bkb3duQ2xvc2VkRXZlbnRzLmZvckVhY2goZXZlbnQgPT4gdGhpcy5zZWxlY3RFbGVtZW50Lm9uKGV2ZW50LCB0aGlzLm9uRHJvcGRvd25DbG9zZWQsIHRydWUpKTtcblxuICAgIHRoaXMucmVtb3ZlRHJvcGRvd25DbG9zZUxpc3RlbmVycyA9ICgpID0+IHtcbiAgICAgIERvY3VtZW50RHJvcGRvd25DbG9zZWRFdmVudHMuZm9yRWFjaChldmVudCA9PiBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKGV2ZW50LCB0aGlzLm9uRHJvcGRvd25DbG9zZWQsIHRydWUpKTtcbiAgICAgIFNlbGVjdERyb3Bkb3duQ2xvc2VkRXZlbnRzLmZvckVhY2goZXZlbnQgPT4gdGhpcy5zZWxlY3RFbGVtZW50Lm9mZihldmVudCwgdGhpcy5vbkRyb3Bkb3duQ2xvc2VkLCB0cnVlKSk7XG4gICAgfTtcbiAgfVxuXG4gIHByaXZhdGUgYWRkRHJvcGRvd25PcGVuZWRMaXN0ZW5lcnMoKSB7XG4gICAgY29uc3QgcmVtb3ZlTGlzdGVuZXJGdW5jdGlvbnM6ICgoKSA9PiB2b2lkKVtdID0gW107XG5cbiAgICB0aGlzLnJlbW92ZURyb3Bkb3duT3BlbmVkTGlzdGVuZXJzKCk7XG5cbiAgICBmb3IgKGNvbnN0IFtldmVudCwgZmlsdGVyXSBvZiBEcm9wZG93bk9wZW5lZEV2ZW50cykge1xuICAgICAgY29uc3QgbGlzdGVuZXIgPSAoZXZlbnQ6IEV2ZW50KSA9PiB7XG4gICAgICAgIGlmIChmaWx0ZXIoZXZlbnQpKSB7XG4gICAgICAgICAgdGhpcy5vbkRyb3Bkb3duT3BlbmVkKCk7XG4gICAgICAgIH1cbiAgICAgIH07XG5cbiAgICAgIHJlbW92ZUxpc3RlbmVyRnVuY3Rpb25zLnB1c2goKCkgPT4gdGhpcy5zZWxlY3RFbGVtZW50Lm9mZihldmVudCwgbGlzdGVuZXIsIHRydWUpKTtcbiAgICAgIHRoaXMuc2VsZWN0RWxlbWVudC5vbihldmVudCwgbGlzdGVuZXIsIHRydWUpO1xuICAgIH1cblxuICAgIHRoaXMucmVtb3ZlRHJvcGRvd25PcGVuZWRMaXN0ZW5lcnMgPSAoKSA9PiB7XG4gICAgICBmb3IgKGNvbnN0IHJlbW92ZSBvZiByZW1vdmVMaXN0ZW5lckZ1bmN0aW9ucykge1xuICAgICAgICByZW1vdmUoKTtcbiAgICAgIH1cbiAgICB9O1xuICB9XG5cbiAgcmVsZWFzZSgpIHtcbiAgICBzdXBlci5yZWxlYXNlKCk7XG5cbiAgICB0aGlzLnJlbW92ZURyb3Bkb3duQ2xvc2VMaXN0ZW5lcnMoKTtcbiAgICB0aGlzLnJlbW92ZURyb3Bkb3duT3BlbmVkTGlzdGVuZXJzKCk7XG4gICAgY2xlYXJUaW1lb3V0KHRoaXMuZHJvcGRvd25DbG9zZUxpc3RlbmVyVGltZW91dElkKTtcbiAgfVxufVxuIiwiaW1wb3J0IHsgQ29udGFpbmVyLCBDb250YWluZXJDb25maWcgfSBmcm9tICcuL2NvbnRhaW5lcic7XG5pbXBvcnQgeyBTZWxlY3RCb3ggfSBmcm9tICcuL3NlbGVjdGJveCc7XG5pbXBvcnQgeyBVSUluc3RhbmNlTWFuYWdlciB9IGZyb20gJy4uL3VpbWFuYWdlcic7XG5pbXBvcnQgeyBUaW1lb3V0IH0gZnJvbSAnLi4vdGltZW91dCc7XG5pbXBvcnQgeyBFdmVudCwgRXZlbnREaXNwYXRjaGVyLCBOb0FyZ3MgfSBmcm9tICcuLi9ldmVudGRpc3BhdGNoZXInO1xuaW1wb3J0IHsgU2V0dGluZ3NQYW5lbFBhZ2UgfSBmcm9tICcuL3NldHRpbmdzcGFuZWxwYWdlJztcbmltcG9ydCB7IFNldHRpbmdzUGFuZWxJdGVtIH0gZnJvbSAnLi9zZXR0aW5nc3BhbmVsaXRlbSc7XG5pbXBvcnQgeyBQbGF5ZXJBUEkgfSBmcm9tICdiaXRtb3Zpbi1wbGF5ZXInO1xuaW1wb3J0IHsgQ29tcG9uZW50LCBDb21wb25lbnRDb25maWcgfSBmcm9tICcuL2NvbXBvbmVudCc7XG5cbi8qKlxuICogQ29uZmlndXJhdGlvbiBpbnRlcmZhY2UgZm9yIGEge0BsaW5rIFNldHRpbmdzUGFuZWx9LlxuICpcbiAqIEBjYXRlZ29yeSBDb25maWdzXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgU2V0dGluZ3NQYW5lbENvbmZpZyBleHRlbmRzIENvbnRhaW5lckNvbmZpZyB7XG4gIC8qKlxuICAgKiBUaGUgZGVsYXkgaW4gbWlsbGlzZWNvbmRzIGFmdGVyIHdoaWNoIHRoZSBzZXR0aW5ncyBwYW5lbCB3aWxsIGJlIGhpZGRlbiB3aGVuIHRoZXJlIGlzIG5vIHVzZXIgaW50ZXJhY3Rpb24uXG4gICAqIFNldCB0byAtMSB0byBkaXNhYmxlIGF1dG9tYXRpYyBoaWRpbmcuXG4gICAqIERlZmF1bHQ6IDMgc2Vjb25kcyAoMzAwMClcbiAgICovXG4gIGhpZGVEZWxheT86IG51bWJlcjtcblxuICAvKipcbiAgICogRmxhZyB0byBzcGVjaWZ5IGlmIHRoZXJlIHNob3VsZCBiZSBhbiBhbmltYXRpb24gd2hlbiBzd2l0Y2hpbmcgU2V0dGluZ3NQYW5lbFBhZ2VzLlxuICAgKiBEZWZhdWx0OiB0cnVlXG4gICAqL1xuICBwYWdlVHJhbnNpdGlvbkFuaW1hdGlvbj86IGJvb2xlYW47XG59XG5cbmVudW0gTmF2aWdhdGlvbkRpcmVjdGlvbiB7XG4gIEZvcndhcmRzLFxuICBCYWNrd2FyZHMsXG59XG5cbi8qKlxuICogQSBwYW5lbCBjb250YWluaW5nIGEgbGlzdCBvZiB7QGxpbmsgU2V0dGluZ3NQYW5lbFBhZ2UgaXRlbXN9LlxuICpcbiAqIFRvIGNvbmZpZ3VyZSBwYWdlcyBqdXN0IHBhc3MgdGhlbSBpbiB0aGUgY29tcG9uZW50cyBhcnJheS5cbiAqXG4gKiBFeGFtcGxlOlxuICogIGxldCBzZXR0aW5nc1BhbmVsID0gbmV3IFNldHRpbmdzUGFuZWwoe1xuICogICAgaGlkZGVuOiB0cnVlLFxuICogIH0pO1xuICpcbiAqICBsZXQgc2V0dGluZ3NQYW5lbFBhZ2UgPSBuZXcgU2V0dGluZ3NQYW5lbFBhZ2Uoe1xuICogICAgY29tcG9uZW50czogW+KApl1cbiAqICB9KTtcbiAqXG4gKiAgbGV0IHNlY29uZFNldHRpbmdzUGFuZWxQYWdlID0gbmV3IFNldHRpbmdzUGFuZWxQYWdlKHtcbiAqICAgIGNvbXBvbmVudHM6IFvigKZdXG4gKiAgfSk7XG4gKlxuICogIHNldHRpbmdzUGFuZWwuYWRkQ29tcG9uZW50KHNldHRpbmdzUGFuZWxQYWdlKTtcbiAqICBzZXR0aW5nc1BhbmVsLmFkZENvbXBvbmVudChzZWNvbmRTZXR0aW5nc1BhbmVsUGFnZSk7XG4gKlxuICogRm9yIGFuIGV4YW1wbGUgaG93IHRvIG5hdmlnYXRlIGJldHdlZW4gcGFnZXMgQHNlZSBTZXR0aW5nc1BhbmVsUGFnZU5hdmlnYXRvckJ1dHRvblxuICpcbiAqIEBjYXRlZ29yeSBDb21wb25lbnRzXG4gKi9cbmV4cG9ydCBjbGFzcyBTZXR0aW5nc1BhbmVsIGV4dGVuZHMgQ29udGFpbmVyPFNldHRpbmdzUGFuZWxDb25maWc+IHtcblxuICBwcml2YXRlIHN0YXRpYyByZWFkb25seSBDTEFTU19BQ1RJVkVfUEFHRSA9ICdhY3RpdmUnO1xuXG4gIC8vIG5hdmlnYXRpb24gaGFuZGxpbmdcbiAgcHJpdmF0ZSBhY3RpdmVQYWdlOiBTZXR0aW5nc1BhbmVsUGFnZTtcbiAgcHJpdmF0ZSBuYXZpZ2F0aW9uU3RhY2s6IFNldHRpbmdzUGFuZWxQYWdlW10gPSBbXTtcblxuICBwcml2YXRlIHNldHRpbmdzUGFuZWxFdmVudHMgPSB7XG4gICAgb25TZXR0aW5nc1N0YXRlQ2hhbmdlZDogbmV3IEV2ZW50RGlzcGF0Y2hlcjxTZXR0aW5nc1BhbmVsLCBOb0FyZ3M+KCksXG4gIH07XG5cbiAgcHJpdmF0ZSBoaWRlVGltZW91dDogVGltZW91dDtcblxuICBjb25zdHJ1Y3Rvcihjb25maWc6IFNldHRpbmdzUGFuZWxDb25maWcpIHtcbiAgICBzdXBlcihjb25maWcpO1xuXG4gICAgdGhpcy5jb25maWcgPSB0aGlzLm1lcmdlQ29uZmlnKGNvbmZpZywge1xuICAgICAgY3NzQ2xhc3M6ICd1aS1zZXR0aW5ncy1wYW5lbCcsXG4gICAgICBoaWRlRGVsYXk6IDMwMDAsXG4gICAgICBwYWdlVHJhbnNpdGlvbkFuaW1hdGlvbjogdHJ1ZSxcbiAgICB9IGFzIFNldHRpbmdzUGFuZWxDb25maWcsIHRoaXMuY29uZmlnKTtcblxuICAgIHRoaXMuYWN0aXZlUGFnZSA9IHRoaXMuZ2V0Um9vdFBhZ2UoKTtcbiAgfVxuXG4gIGNvbmZpZ3VyZShwbGF5ZXI6IFBsYXllckFQSSwgdWltYW5hZ2VyOiBVSUluc3RhbmNlTWFuYWdlcik6IHZvaWQge1xuICAgIHN1cGVyLmNvbmZpZ3VyZShwbGF5ZXIsIHVpbWFuYWdlcik7XG5cbiAgICBsZXQgY29uZmlnID0gdGhpcy5nZXRDb25maWcoKTtcblxuICAgIHVpbWFuYWdlci5vbkNvbnRyb2xzSGlkZS5zdWJzY3JpYmUoKCkgPT4gdGhpcy5oaWRlSG92ZXJlZFNlbGVjdEJveGVzKCkpO1xuICAgIHVpbWFuYWdlci5vbkNvbXBvbmVudFZpZXdNb2RlQ2hhbmdlZC5zdWJzY3JpYmUoKF8sIHsgbW9kZSB9KSA9PiB0aGlzLnRyYWNrQ29tcG9uZW50Vmlld01vZGUobW9kZSkpO1xuXG4gICAgaWYgKGNvbmZpZy5oaWRlRGVsYXkgPiAtMSkge1xuICAgICAgdGhpcy5oaWRlVGltZW91dCA9IG5ldyBUaW1lb3V0KGNvbmZpZy5oaWRlRGVsYXksICgpID0+IHtcbiAgICAgICAgdGhpcy5oaWRlKCk7XG4gICAgICAgIHRoaXMuaGlkZUhvdmVyZWRTZWxlY3RCb3hlcygpO1xuICAgICAgfSk7XG4gICAgICB0aGlzLmdldERvbUVsZW1lbnQoKS5vbignbW91c2VlbnRlcicsICgpID0+IHtcbiAgICAgICAgLy8gT24gbW91c2UgZW50ZXIgY2xlYXIgdGhlIHRpbWVvdXRcbiAgICAgICAgdGhpcy5oaWRlVGltZW91dC5jbGVhcigpO1xuICAgICAgfSk7XG4gICAgICB0aGlzLmdldERvbUVsZW1lbnQoKS5vbignbW91c2VsZWF2ZScsICgpID0+IHtcbiAgICAgICAgLy8gT24gbW91c2UgbGVhdmUgYWN0aXZhdGUgdGhlIHRpbWVvdXRcbiAgICAgICAgdGhpcy5oaWRlVGltZW91dC5yZXNldCgpO1xuICAgICAgfSk7XG4gICAgICB0aGlzLmdldERvbUVsZW1lbnQoKS5vbignZm9jdXNpbicsICgpID0+IHtcbiAgICAgICAgdGhpcy5oaWRlVGltZW91dC5jbGVhcigpO1xuICAgICAgfSk7XG4gICAgICB0aGlzLmdldERvbUVsZW1lbnQoKS5vbignZm9jdXNvdXQnLCAoKSA9PiB7XG4gICAgICAgIHRoaXMuaGlkZVRpbWVvdXQucmVzZXQoKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHRoaXMub25IaWRlLnN1YnNjcmliZSgoKSA9PiB7XG4gICAgICBpZiAoY29uZmlnLmhpZGVEZWxheSA+IC0xKSB7XG4gICAgICAgIC8vIENsZWFyIHRpbWVvdXQgd2hlbiBoaWRkZW4gZnJvbSBvdXRzaWRlXG4gICAgICAgIHRoaXMuaGlkZVRpbWVvdXQuY2xlYXIoKTtcbiAgICAgIH1cblxuICAgICAgLy8gU2luY2Ugd2UgZG9uJ3QgcmVzZXQgdGhlIGFjdHVhbCBuYXZpZ2F0aW9uIGhlcmUgd2UgbmVlZCB0byBzaW11bGF0ZSBhIG9uSW5hY3RpdmUgZXZlbnQgaW4gY2FzZSBzb21lIHBhbmVsXG4gICAgICAvLyBuZWVkcyB0byBkbyBzb21ldGhpbmcgd2hlbiB0aGV5IGJlY29tZSBpbnZpc2libGUgLyBpbmFjdGl2ZS5cbiAgICAgIHRoaXMuYWN0aXZlUGFnZS5vbkluYWN0aXZlRXZlbnQoKTtcbiAgICB9KTtcblxuICAgIHRoaXMub25TaG93LnN1YnNjcmliZSgoKSA9PiB7XG4gICAgICAvLyBSZXNldCBuYXZpZ2F0aW9uIHdoZW4gdGUgcGFuZWwgZ2V0cyB2aXNpYmxlIHRvIGF2b2lkIGEgd2VpcmQgYW5pbWF0aW9uIHdoZW4gaGlkaW5nXG4gICAgICB0aGlzLnJlc2V0TmF2aWdhdGlvbih0cnVlKTtcbiAgICAgIC8vIFNpbmNlIHdlIGRvbid0IG5lZWQgdG8gbmF2aWdhdGUgdG8gdGhlIHJvb3QgcGFnZSBhZ2FpbiB3ZSBuZWVkIHRvIGZpcmUgdGhlIG9uQWN0aXZlIGV2ZW50IHdoZW4gdGhlIHNldHRpbmdzXG4gICAgICAvLyBwYW5lbCBnZXRzIHZpc2libGUuXG4gICAgICB0aGlzLmFjdGl2ZVBhZ2Uub25BY3RpdmVFdmVudCgpO1xuXG4gICAgICBpZiAoY29uZmlnLmhpZGVEZWxheSA+IC0xKSB7XG4gICAgICAgIC8vIEFjdGl2YXRlIHRpbWVvdXQgd2hlbiBzaG93blxuICAgICAgICB0aGlzLmhpZGVUaW1lb3V0LnN0YXJ0KCk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICAvLyBwYXNzIGV2ZW50IGZyb20gcm9vdCBwYWdlIHRocm91Z2hcbiAgICB0aGlzLmdldFJvb3RQYWdlKCkub25TZXR0aW5nc1N0YXRlQ2hhbmdlZC5zdWJzY3JpYmUoKCkgPT4ge1xuICAgICAgdGhpcy5vblNldHRpbmdzU3RhdGVDaGFuZ2VkRXZlbnQoKTtcbiAgICB9KTtcblxuICAgIHRoaXMudXBkYXRlQWN0aXZlUGFnZUNsYXNzKCk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgY3VycmVudCBhY3RpdmUgLyB2aXNpYmxlIHBhZ2VcbiAgICogQHJldHVybiB7U2V0dGluZ3NQYW5lbFBhZ2V9XG4gICAqL1xuICBnZXRBY3RpdmVQYWdlKCk6IFNldHRpbmdzUGFuZWxQYWdlIHtcbiAgICByZXR1cm4gdGhpcy5hY3RpdmVQYWdlO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldHMgdGhlXG4gICAqIEBkZXByZWNhdGVkIFVzZSB7QGxpbmsgc2V0QWN0aXZlUGFnZX0gaW5zdGVhZFxuICAgKiBAcGFyYW0gaW5kZXhcbiAgICovXG4gIHNldEFjdGl2ZVBhZ2VJbmRleChpbmRleDogbnVtYmVyKTogdm9pZCB7XG4gICAgdGhpcy5zZXRBY3RpdmVQYWdlKHRoaXMuZ2V0UGFnZXMoKVtpbmRleF0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEFkZHMgdGhlIHBhc3NlZCBwYWdlIHRvIHRoZSBuYXZpZ2F0aW9uIHN0YWNrIGFuZCBtYWtlcyBpdCB2aXNpYmxlLlxuICAgKiBVc2Uge0BsaW5rIHBvcFNldHRpbmdzUGFuZWxQYWdlfSB0byBuYXZpZ2F0ZSBiYWNrd2FyZHMuXG4gICAqXG4gICAqIFJlc3VsdHMgaW4gbm8tb3AgaWYgdGhlIHRhcmdldCBwYWdlIGlzIHRoZSBjdXJyZW50IHBhZ2UuXG4gICAqIEBwYXJhbSB0YXJnZXRQYWdlXG4gICAqL1xuICBzZXRBY3RpdmVQYWdlKHRhcmdldFBhZ2U6IFNldHRpbmdzUGFuZWxQYWdlKTogdm9pZCB7XG4gICAgaWYgKHRhcmdldFBhZ2UgPT09IHRoaXMuZ2V0QWN0aXZlUGFnZSgpKSB7XG4gICAgICBjb25zb2xlLndhcm4oJ1BhZ2UgaXMgYWxyZWFkeSB0aGUgY3VycmVudCBvbmUgLi4uIHNraXBwaW5nIG5hdmlnYXRpb24nKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLm5hdmlnYXRlVG9QYWdlKFxuICAgICAgdGFyZ2V0UGFnZSxcbiAgICAgIHRoaXMuZ2V0QWN0aXZlUGFnZSgpLFxuICAgICAgTmF2aWdhdGlvbkRpcmVjdGlvbi5Gb3J3YXJkcyxcbiAgICAgICEodGhpcy5jb25maWcgYXMgU2V0dGluZ3NQYW5lbENvbmZpZykucGFnZVRyYW5zaXRpb25BbmltYXRpb24sXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXNldHMgdGhlIG5hdmlnYXRpb24gc3RhY2sgYnkgbmF2aWdhdGluZyBiYWNrIHRvIHRoZSByb290IHBhZ2UgYW5kIGRpc3BsYXlpbmcgaXQuXG4gICAqL1xuICBwb3BUb1Jvb3RTZXR0aW5nc1BhbmVsUGFnZSgpOiB2b2lkIHtcbiAgICB0aGlzLnJlc2V0TmF2aWdhdGlvbigodGhpcy5jb25maWcgYXMgU2V0dGluZ3NQYW5lbENvbmZpZykucGFnZVRyYW5zaXRpb25BbmltYXRpb24pO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlbW92ZXMgdGhlIGN1cnJlbnQgcGFnZSBmcm9tIHRoZSBuYXZpZ2F0aW9uIHN0YWNrIGFuZCBtYWtlcyB0aGUgcHJldmlvdXMgb25lIHZpc2libGUuXG4gICAqIFJlc3VsdHMgaW4gYSBuby1vcCBpZiB3ZSBhcmUgYWxyZWFkeSBvbiB0aGUgcm9vdCBwYWdlLlxuICAgKi9cbiAgcG9wU2V0dGluZ3NQYW5lbFBhZ2UoKSB7XG4gICAgaWYgKHRoaXMubmF2aWdhdGlvblN0YWNrLmxlbmd0aCA9PT0gMCkge1xuICAgICAgY29uc29sZS53YXJuKCdBbHJlYWR5IG9uIHRoZSByb290IHBhZ2UgLi4uIHNraXBwaW5nIG5hdmlnYXRpb24nKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBsZXQgdGFyZ2V0UGFnZSA9IHRoaXMubmF2aWdhdGlvblN0YWNrW3RoaXMubmF2aWdhdGlvblN0YWNrLmxlbmd0aCAtIDJdO1xuICAgIC8vIFRoZSByb290IHBhcnQgaXNuJ3QgcGFydCBvZiB0aGUgbmF2aWdhdGlvbiBzdGFjayBzbyBoYW5kbGUgaXQgZXhwbGljaXRseSBoZXJlXG4gICAgaWYgKCF0YXJnZXRQYWdlKSB7XG4gICAgICB0YXJnZXRQYWdlID0gdGhpcy5nZXRSb290UGFnZSgpO1xuICAgIH1cblxuICAgIHRoaXMubmF2aWdhdGVUb1BhZ2UoXG4gICAgICB0YXJnZXRQYWdlLFxuICAgICAgdGhpcy5hY3RpdmVQYWdlLFxuICAgICAgTmF2aWdhdGlvbkRpcmVjdGlvbi5CYWNrd2FyZHMsXG4gICAgICAhKHRoaXMuY29uZmlnIGFzIFNldHRpbmdzUGFuZWxDb25maWcpLnBhZ2VUcmFuc2l0aW9uQW5pbWF0aW9uLFxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogQ2hlY2tzIGlmIHRoZXJlIGFyZSBhY3RpdmUgc2V0dGluZ3Mgd2l0aGluIHRoZSByb290IHBhZ2Ugb2YgdGhlIHNldHRpbmdzIHBhbmVsLlxuICAgKiBBbiBhY3RpdmUgc2V0dGluZyBpcyBhIHNldHRpbmcgdGhhdCBpcyB2aXNpYmxlIGFuZCBlbmFibGVkLCB3aGljaCB0aGUgdXNlciBjYW4gaW50ZXJhY3Qgd2l0aC5cbiAgICogQHJldHVybnMge2Jvb2xlYW59IHRydWUgaWYgdGhlcmUgYXJlIGFjdGl2ZSBzZXR0aW5ncywgZmFsc2UgaWYgdGhlIHBhbmVsIGlzIGZ1bmN0aW9uYWxseSBlbXB0eSB0byBhIHVzZXJcbiAgICovXG4gIHJvb3RQYWdlSGFzQWN0aXZlU2V0dGluZ3MoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0Um9vdFBhZ2UoKS5oYXNBY3RpdmVTZXR0aW5ncygpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybiBhbGwgY29uZmlndXJlZCBwYWdlc1xuICAgKiBAcmV0dXJucyB7U2V0dGluZ3NQYW5lbFBhZ2VbXX1cbiAgICovXG4gIGdldFBhZ2VzKCk6IFNldHRpbmdzUGFuZWxQYWdlW10ge1xuICAgIHJldHVybiA8U2V0dGluZ3NQYW5lbFBhZ2VbXT50aGlzLmNvbmZpZy5jb21wb25lbnRzLmZpbHRlcihjb21wb25lbnQgPT4gY29tcG9uZW50IGluc3RhbmNlb2YgU2V0dGluZ3NQYW5lbFBhZ2UpO1xuICB9XG5cbiAgZ2V0IG9uU2V0dGluZ3NTdGF0ZUNoYW5nZWQoKTogRXZlbnQ8U2V0dGluZ3NQYW5lbCwgTm9BcmdzPiB7XG4gICAgcmV0dXJuIHRoaXMuc2V0dGluZ3NQYW5lbEV2ZW50cy5vblNldHRpbmdzU3RhdGVDaGFuZ2VkLmdldEV2ZW50KCk7XG4gIH1cblxuICByZWxlYXNlKCk6IHZvaWQge1xuICAgIHN1cGVyLnJlbGVhc2UoKTtcbiAgICBpZiAodGhpcy5oaWRlVGltZW91dCkge1xuICAgICAgdGhpcy5oaWRlVGltZW91dC5jbGVhcigpO1xuICAgIH1cbiAgfVxuXG4gIC8vIFN1cHBvcnQgYWRkaW5nIHNldHRpbmdzUGFuZWxQYWdlcyBhZnRlciBpbml0aWFsaXphdGlvblxuICBhZGRDb21wb25lbnQoY29tcG9uZW50OiBDb21wb25lbnQ8Q29tcG9uZW50Q29uZmlnPikge1xuICAgIGlmICh0aGlzLmdldFBhZ2VzKCkubGVuZ3RoID09PSAwICYmIGNvbXBvbmVudCBpbnN0YW5jZW9mIFNldHRpbmdzUGFuZWxQYWdlKSB7XG4gICAgICB0aGlzLmFjdGl2ZVBhZ2UgPSBjb21wb25lbnQ7XG4gICAgfVxuICAgIHN1cGVyLmFkZENvbXBvbmVudChjb21wb25lbnQpO1xuICB9XG5cbiAgcHJvdGVjdGVkIHN1c3BlbmRIaWRlVGltZW91dCgpIHtcbiAgICB0aGlzLmhpZGVUaW1lb3V0LnN1c3BlbmQoKTtcbiAgfVxuXG4gIHByb3RlY3RlZCByZXN1bWVIaWRlVGltZW91dCgpIHtcbiAgICB0aGlzLmhpZGVUaW1lb3V0LnJlc3VtZSh0cnVlKTtcbiAgfVxuXG4gIHByaXZhdGUgdXBkYXRlQWN0aXZlUGFnZUNsYXNzKCk6IHZvaWQge1xuICAgIHRoaXMuZ2V0UGFnZXMoKS5mb3JFYWNoKChwYWdlOiBTZXR0aW5nc1BhbmVsUGFnZSkgPT4ge1xuICAgICAgaWYgKHBhZ2UgPT09IHRoaXMuYWN0aXZlUGFnZSkge1xuICAgICAgICBwYWdlLmdldERvbUVsZW1lbnQoKS5hZGRDbGFzcyh0aGlzLnByZWZpeENzcyhTZXR0aW5nc1BhbmVsLkNMQVNTX0FDVElWRV9QQUdFKSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBwYWdlLmdldERvbUVsZW1lbnQoKS5yZW1vdmVDbGFzcyh0aGlzLnByZWZpeENzcyhTZXR0aW5nc1BhbmVsLkNMQVNTX0FDVElWRV9QQUdFKSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIHJlc2V0TmF2aWdhdGlvbihyZXNldE5hdmlnYXRpb25PblNob3c6IGJvb2xlYW4pOiB2b2lkIHtcbiAgICBjb25zdCBzb3VyY2VQYWdlID0gdGhpcy5nZXRBY3RpdmVQYWdlKCk7XG4gICAgY29uc3Qgcm9vdFBhZ2UgPSB0aGlzLmdldFJvb3RQYWdlKCk7XG4gICAgaWYgKHNvdXJjZVBhZ2UpIHtcbiAgICAgIC8vIFNpbmNlIHRoZSBvbkluYWN0aXZlRXZlbnQgd2FzIGFscmVhZHkgZmlyZWQgaW4gdGhlIG9uSGlkZSB3ZSBuZWVkIHRvIHN1cHByZXNzIGl0IGhlcmVcbiAgICAgIGlmICghcmVzZXROYXZpZ2F0aW9uT25TaG93KSB7XG4gICAgICAgIHNvdXJjZVBhZ2Uub25JbmFjdGl2ZUV2ZW50KCk7XG4gICAgICB9XG4gICAgfVxuICAgIHRoaXMubmF2aWdhdGlvblN0YWNrID0gW107XG4gICAgdGhpcy5hbmltYXRlTmF2aWdhdGlvbihyb290UGFnZSwgc291cmNlUGFnZSwgcmVzZXROYXZpZ2F0aW9uT25TaG93KTtcbiAgICB0aGlzLmFjdGl2ZVBhZ2UgPSByb290UGFnZTtcbiAgICB0aGlzLnVwZGF0ZUFjdGl2ZVBhZ2VDbGFzcygpO1xuICB9XG5cbiAgcHJpdmF0ZSBuYXZpZ2F0ZVRvUGFnZShcbiAgICB0YXJnZXRQYWdlOiBTZXR0aW5nc1BhbmVsUGFnZSxcbiAgICBzb3VyY2VQYWdlOiBTZXR0aW5nc1BhbmVsUGFnZSxcbiAgICBkaXJlY3Rpb246IE5hdmlnYXRpb25EaXJlY3Rpb24sXG4gICAgc2tpcEFuaW1hdGlvbjogYm9vbGVhbixcbiAgKTogdm9pZCB7XG4gICAgdGhpcy5hY3RpdmVQYWdlID0gdGFyZ2V0UGFnZTtcblxuICAgIGlmIChkaXJlY3Rpb24gPT09IE5hdmlnYXRpb25EaXJlY3Rpb24uRm9yd2FyZHMpIHtcbiAgICAgIHRoaXMubmF2aWdhdGlvblN0YWNrLnB1c2godGFyZ2V0UGFnZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMubmF2aWdhdGlvblN0YWNrLnBvcCgpO1xuICAgIH1cblxuICAgIHRoaXMuYW5pbWF0ZU5hdmlnYXRpb24odGFyZ2V0UGFnZSwgc291cmNlUGFnZSwgc2tpcEFuaW1hdGlvbik7XG5cbiAgICB0aGlzLnVwZGF0ZUFjdGl2ZVBhZ2VDbGFzcygpO1xuICAgIHRhcmdldFBhZ2Uub25BY3RpdmVFdmVudCgpO1xuICAgIHNvdXJjZVBhZ2Uub25JbmFjdGl2ZUV2ZW50KCk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHRhcmdldFBhZ2VcbiAgICogQHBhcmFtIHNvdXJjZVBhZ2VcbiAgICogQHBhcmFtIHNraXBBbmltYXRpb24gVGhpcyBpcyBqdXN0IGFuIGludGVybmFsIGZsYWcgaWYgd2Ugd2FudCB0byBoYXZlIGFuIGFuaW1hdGlvbi4gSXQgaXMgc2V0IHRydWUgd2hlbiB3ZSByZXNldFxuICAgKiB0aGUgbmF2aWdhdGlvbiB3aXRoaW4gdGhlIG9uU2hvdyBjYWxsYmFjayBvZiB0aGUgc2V0dGluZ3NQYW5lbC4gSW4gdGhpcyBjYXNlIHdlIGRvbid0IHdhbnQgYW4gYWN0dWFsIGFuaW1hdGlvbiBidXRcbiAgICogdGhlIHJlY2FsY3VsYXRpb24gb2YgdGhlIGRpbWVuc2lvbiBvZiB0aGUgc2V0dGluZ3NQYW5lbC5cbiAgICogVGhpcyBpcyBpbmRlcGVuZGVudCBvZiB0aGUgcGFnZVRyYW5zaXRpb25BbmltYXRpb24gZmxhZy5cbiAgICovXG4gIHByaXZhdGUgYW5pbWF0ZU5hdmlnYXRpb24odGFyZ2V0UGFnZTogU2V0dGluZ3NQYW5lbFBhZ2UsIHNvdXJjZVBhZ2U6IFNldHRpbmdzUGFuZWxQYWdlLCBza2lwQW5pbWF0aW9uOiBib29sZWFuKSB7XG4gICAgaWYgKCEodGhpcy5jb25maWcgYXMgU2V0dGluZ3NQYW5lbENvbmZpZykucGFnZVRyYW5zaXRpb25BbmltYXRpb24pIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBzZXR0aW5nc1BhbmVsRG9tRWxlbWVudCA9IHRoaXMuZ2V0RG9tRWxlbWVudCgpO1xuICAgIGNvbnN0IHNldHRpbmdzUGFuZWxIVE1MRWxlbWVudCA9IHRoaXMuZ2V0RG9tRWxlbWVudCgpLmdldCgwKTtcblxuICAgIC8vIGdldCBjdXJyZW50IGRpbWVuc2lvblxuICAgIGNvbnN0IHNldHRpbmdzUGFuZWxXaWR0aCA9IHNldHRpbmdzUGFuZWxIVE1MRWxlbWVudC5zY3JvbGxXaWR0aDtcbiAgICBjb25zdCBzZXR0aW5nc1BhbmVsSGVpZ2h0ID0gc2V0dGluZ3NQYW5lbEhUTUxFbGVtZW50LnNjcm9sbEhlaWdodDtcblxuICAgIC8vIGNhbGN1bGF0ZSB0YXJnZXQgc2l6ZSBvZiB0aGUgc2V0dGluZ3MgcGFuZWxcbiAgICBzb3VyY2VQYWdlLmdldERvbUVsZW1lbnQoKS5jc3MoJ2Rpc3BsYXknLCAnbm9uZScpO1xuICAgIHRoaXMuZ2V0RG9tRWxlbWVudCgpLmNzcyh7IHdpZHRoOiAnJywgaGVpZ2h0OiAnJyB9KTsgLy8gbGV0IGNzcyBhdXRvIHNldHRpbmdzIGtpY2sgaW4gYWdhaW5cblxuICAgIGNvbnN0IHRhcmdldFBhZ2VIdG1sRWxlbWVudCA9IHRhcmdldFBhZ2UuZ2V0RG9tRWxlbWVudCgpLmdldCgwKTtcbiAgICAvLyBjbG9uZSB0aGUgdGFyZ2V0UGFnZSBET00gZWxlbWVudCBzbyB0aGF0IHdlIGNhbiBjYWxjdWxhdGUgdGhlIHdpZHRoIC8gaGVpZ2h0IGhvdyB0aGV5IHdpbGwgYmUgYWZ0ZXJcbiAgICAvLyBzd2l0Y2hpbmcgdGhlIHBhZ2UuIFdlIGFyZSB1c2luZyBhIGNsb25lIHRvIHByZXZlbnQgKG1vc3RseSBzdHlsaW5nKSBzaWRlLWVmZmVjdHMgb24gdGhlIHJlYWwgRE9NIGVsZW1lbnRcbiAgICBjb25zdCBjbG9uZSA9IHRhcmdldFBhZ2VIdG1sRWxlbWVudC5jbG9uZU5vZGUodHJ1ZSkgYXMgSFRNTEVsZW1lbnQ7XG4gICAgLy8gYXBwZW5kIHRvIHBhcmVudCBzbyB3ZSBnZXQgdGhlICdyZWFsJyBzaXplXG4gICAgY29uc3QgY29udGFpbmVyV3JhcHBlciA9IHRhcmdldFBhZ2VIdG1sRWxlbWVudC5wYXJlbnROb2RlO1xuICAgIGNvbnRhaW5lcldyYXBwZXIuYXBwZW5kQ2hpbGQoY2xvbmUpO1xuICAgIC8vIHNldCBjbG9uZSB2aXNpYmxlXG4gICAgY2xvbmUuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG5cbiAgICAvLyBjb2xsZWN0IHRhcmdldCBkaW1lbnNpb25cbiAgICBjb25zdCB0YXJnZXRTZXR0aW5nc1BhbmVsV2lkdGggPSBzZXR0aW5nc1BhbmVsSFRNTEVsZW1lbnQuc2Nyb2xsV2lkdGg7XG4gICAgY29uc3QgdGFyZ2V0U2V0dGluZ3NQYW5lbEhlaWdodCA9IHNldHRpbmdzUGFuZWxIVE1MRWxlbWVudC5zY3JvbGxIZWlnaHQ7XG5cbiAgICAvLyByZW1vdmUgY2xvbmUgZnJvbSB0aGUgRE9NXG4gICAgY2xvbmUucGFyZW50RWxlbWVudC5yZW1vdmVDaGlsZChjbG9uZSk7IC8vIC5yZW1vdmUoKSBpcyBub3Qgd29ya2luZyBpbiBJRVxuICAgIHNvdXJjZVBhZ2UuZ2V0RG9tRWxlbWVudCgpLmNzcygnZGlzcGxheScsICcnKTtcblxuICAgIC8vIHNldCB0aGUgdmFsdWVzIGJhY2sgdG8gdGhlIGN1cnJlbnQgb25lcyB0aGF0IHRoZSBicm93c2VyIGFuaW1hdGVzIGl0IChicm93c2VycyBkb24ndCBhbmltYXRlICdhdXRvJyB2YWx1ZXMpXG4gICAgc2V0dGluZ3NQYW5lbERvbUVsZW1lbnQuY3NzKHtcbiAgICAgIHdpZHRoOiBzZXR0aW5nc1BhbmVsV2lkdGggKyAncHgnLFxuICAgICAgaGVpZ2h0OiBzZXR0aW5nc1BhbmVsSGVpZ2h0ICsgJ3B4JyxcbiAgICB9KTtcblxuICAgIGlmICghc2tpcEFuaW1hdGlvbikge1xuICAgICAgLy8gV2UgbmVlZCB0byBmb3JjZSB0aGUgYnJvd3NlciB0byByZWZsb3cgYmV0d2VlbiBzZXR0aW5nIHRoZSB3aWR0aCBhbmQgaGVpZ2h0IHRoYXQgd2UgYWN0dWFsbHkgZ2V0IGEgYW5pbWF0aW9uXG4gICAgICB0aGlzLmZvcmNlQnJvd3NlclJlZmxvdygpO1xuICAgIH1cblxuICAgIC8vIHNldCB0aGUgdmFsdWVzIHRvIHRoZSB0YXJnZXQgZGltZW5zaW9uXG4gICAgc2V0dGluZ3NQYW5lbERvbUVsZW1lbnQuY3NzKHtcbiAgICAgIHdpZHRoOiB0YXJnZXRTZXR0aW5nc1BhbmVsV2lkdGggKyAncHgnLFxuICAgICAgaGVpZ2h0OiB0YXJnZXRTZXR0aW5nc1BhbmVsSGVpZ2h0ICsgJ3B4JyxcbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgZm9yY2VCcm93c2VyUmVmbG93KCk6IHZvaWQge1xuICAgIC8vIEZvcmNlIHRoZSBicm93c2VyIHRvIHJlZmxvdyB0aGUgbGF5b3V0XG4gICAgLy8gaHR0cHM6Ly9naXN0LmdpdGh1Yi5jb20vcGF1bGlyaXNoLzVkNTJmYjA4MWIzNTcwYzgxZTNhXG4gICAgdGhpcy5nZXREb21FbGVtZW50KCkuZ2V0KDApLm9mZnNldExlZnQ7XG4gIH1cblxuICAvKipcbiAgICogV29ya2Fyb3VuZCBmb3IgSUUsIEZpcmVmb3ggYW5kIFNhZmFyaVxuICAgKiB3aGVuIHRoZSBzZXR0aW5ncyBwYW5lbCBmYWRlcyBvdXQgd2hpbGUgYW4gaXRlbSBvZiBhIHNlbGVjdCBib3ggaXMgc3RpbGwgaG92ZXJlZCwgdGhlIHNlbGVjdCBib3ggd2lsbCBub3QgZmFkZSBvdXRcbiAgICogd2hpbGUgdGhlIHNldHRpbmdzIHBhbmVsIGRvZXMuIFRoaXMgd291bGQgbGVhdmUgYSBmbG9hdGluZyBzZWxlY3QgYm94LCB3aGljaCBpcyBqdXN0IHdlaXJkXG4gICAqL1xuICBwcml2YXRlIGhpZGVIb3ZlcmVkU2VsZWN0Qm94ZXMoKTogdm9pZCB7XG4gICAgdGhpcy5nZXRDb21wdXRlZEl0ZW1zKClcbiAgICAgIC5tYXAoaXRlbSA9PiBpdGVtWydzZXR0aW5nJ10pXG4gICAgICAuZmlsdGVyKGNvbXBvbmVudCA9PiBjb21wb25lbnQgaW5zdGFuY2VvZiBTZWxlY3RCb3gpXG4gICAgICAuZm9yRWFjaCgoc2VsZWN0Qm94OiBTZWxlY3RCb3gpID0+IHNlbGVjdEJveC5jbG9zZURyb3Bkb3duKCkpO1xuICB9XG5cbiAgLy8gY29sbGVjdCBhbGwgaXRlbXMgZnJvbSBhbGwgcGFnZXMgKHNlZSBoaWRlSG92ZXJlZFNlbGVjdEJveGVzKVxuICBwcml2YXRlIGdldENvbXB1dGVkSXRlbXMoKTogU2V0dGluZ3NQYW5lbEl0ZW1bXSB7XG4gICAgY29uc3QgYWxsSXRlbXM6IFNldHRpbmdzUGFuZWxJdGVtW10gPSBbXTtcbiAgICBmb3IgKGxldCBwYWdlIG9mIHRoaXMuZ2V0UGFnZXMoKSkge1xuICAgICAgYWxsSXRlbXMucHVzaCguLi5wYWdlLmdldEl0ZW1zKCkpO1xuICAgIH1cbiAgICByZXR1cm4gYWxsSXRlbXM7XG4gIH1cblxuICBwcml2YXRlIGdldFJvb3RQYWdlKCk6IFNldHRpbmdzUGFuZWxQYWdlIHtcbiAgICByZXR1cm4gdGhpcy5nZXRQYWdlcygpWzBdO1xuICB9XG5cbiAgcHJvdGVjdGVkIG9uU2V0dGluZ3NTdGF0ZUNoYW5nZWRFdmVudCgpIHtcbiAgICB0aGlzLnNldHRpbmdzUGFuZWxFdmVudHMub25TZXR0aW5nc1N0YXRlQ2hhbmdlZC5kaXNwYXRjaCh0aGlzKTtcbiAgfVxufVxuIiwiaW1wb3J0IHtDb250YWluZXIsIENvbnRhaW5lckNvbmZpZ30gZnJvbSAnLi9jb250YWluZXInO1xuaW1wb3J0IHtDb21wb25lbnQsIENvbXBvbmVudENvbmZpZ30gZnJvbSAnLi9jb21wb25lbnQnO1xuaW1wb3J0IHtFdmVudCwgRXZlbnREaXNwYXRjaGVyLCBOb0FyZ3N9IGZyb20gJy4uL2V2ZW50ZGlzcGF0Y2hlcic7XG5pbXBvcnQgeyBMYWJlbCwgTGFiZWxDb25maWcgfSBmcm9tICcuL2xhYmVsJztcbmltcG9ydCB7VUlJbnN0YW5jZU1hbmFnZXJ9IGZyb20gJy4uL3VpbWFuYWdlcic7XG5pbXBvcnQge1NlbGVjdEJveH0gZnJvbSAnLi9zZWxlY3Rib3gnO1xuaW1wb3J0IHtMaXN0Qm94fSBmcm9tICcuL2xpc3Rib3gnO1xuaW1wb3J0IHtWaWRlb1F1YWxpdHlTZWxlY3RCb3h9IGZyb20gJy4vdmlkZW9xdWFsaXR5c2VsZWN0Ym94JztcbmltcG9ydCB7QXVkaW9RdWFsaXR5U2VsZWN0Qm94fSBmcm9tICcuL2F1ZGlvcXVhbGl0eXNlbGVjdGJveCc7XG5pbXBvcnQge1BsYXliYWNrU3BlZWRTZWxlY3RCb3h9IGZyb20gJy4vcGxheWJhY2tzcGVlZHNlbGVjdGJveCc7XG5pbXBvcnQgeyBQbGF5ZXJBUEkgfSBmcm9tICdiaXRtb3Zpbi1wbGF5ZXInO1xuaW1wb3J0IHsgTG9jYWxpemFibGVUZXh0IH0gZnJvbSAnLi4vbG9jYWxpemF0aW9uL2kxOG4nO1xuXG4vKipcbiAqIEFuIGl0ZW0gZm9yIGEge0BsaW5rIFNldHRpbmdzUGFuZWxQYWdlfSxcbiAqIENvbnRhaW5pbmcgYW4gb3B0aW9uYWwge0BsaW5rIExhYmVsfSBhbmQgYSBjb21wb25lbnQgdGhhdCBjb25maWd1cmVzIGEgc2V0dGluZy5cbiAqIElmIHRoZSBjb21wb25lbnRzIGlzIGEge0BsaW5rIFNlbGVjdEJveH0gaXQgd2lsbCBoYW5kbGUgdGhlIGxvZ2ljIG9mIGRpc3BsYXlpbmcgaXQgb3Igbm90XG4gKlxuICogQGNhdGVnb3J5IENvbXBvbmVudHNcbiAqL1xuZXhwb3J0IGNsYXNzIFNldHRpbmdzUGFuZWxJdGVtIGV4dGVuZHMgQ29udGFpbmVyPENvbnRhaW5lckNvbmZpZz4ge1xuXG4gIHByaXZhdGUgbGFiZWw6IENvbXBvbmVudDxDb21wb25lbnRDb25maWc+O1xuICBwcml2YXRlIHNldHRpbmc6IENvbXBvbmVudDxDb21wb25lbnRDb25maWc+O1xuXG4gIHByaXZhdGUgc2V0dGluZ3NQYW5lbEl0ZW1FdmVudHMgPSB7XG4gICAgb25BY3RpdmVDaGFuZ2VkOiBuZXcgRXZlbnREaXNwYXRjaGVyPFNldHRpbmdzUGFuZWxJdGVtLCBOb0FyZ3M+KCksXG4gIH07XG5cbiAgY29uc3RydWN0b3IobGFiZWw6IExvY2FsaXphYmxlVGV4dCB8IENvbXBvbmVudDxDb21wb25lbnRDb25maWc+LCBzZXR0aW5nOiBDb21wb25lbnQ8Q29tcG9uZW50Q29uZmlnPiwgY29uZmlnOiBDb250YWluZXJDb25maWcgPSB7fSkge1xuICAgIHN1cGVyKGNvbmZpZyk7XG5cbiAgICB0aGlzLnNldHRpbmcgPSBzZXR0aW5nO1xuXG4gICAgdGhpcy5jb25maWcgPSB0aGlzLm1lcmdlQ29uZmlnKGNvbmZpZywge1xuICAgICAgY3NzQ2xhc3M6ICd1aS1zZXR0aW5ncy1wYW5lbC1pdGVtJyxcbiAgICAgIHJvbGU6ICdtZW51aXRlbScsXG4gICAgfSwgdGhpcy5jb25maWcpO1xuXG4gICAgaWYgKGxhYmVsICE9PSBudWxsKSB7XG4gICAgICBpZiAobGFiZWwgaW5zdGFuY2VvZiBDb21wb25lbnQpIHtcbiAgICAgICAgdGhpcy5sYWJlbCA9IGxhYmVsO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5sYWJlbCA9IG5ldyBMYWJlbCh7IHRleHQ6IGxhYmVsLCBmb3I6IHRoaXMuc2V0dGluZy5nZXRDb25maWcoKS5pZCB9IGFzIExhYmVsQ29uZmlnKTtcbiAgICAgIH1cbiAgICAgIHRoaXMuYWRkQ29tcG9uZW50KHRoaXMubGFiZWwpO1xuICAgIH1cblxuICAgIHRoaXMuYWRkQ29tcG9uZW50KHRoaXMuc2V0dGluZyk7XG4gIH1cblxuICBjb25maWd1cmUocGxheWVyOiBQbGF5ZXJBUEksIHVpbWFuYWdlcjogVUlJbnN0YW5jZU1hbmFnZXIpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5zZXR0aW5nIGluc3RhbmNlb2YgU2VsZWN0Qm94IHx8IHRoaXMuc2V0dGluZyBpbnN0YW5jZW9mIExpc3RCb3gpIHtcbiAgICAgIGxldCBoYW5kbGVDb25maWdJdGVtQ2hhbmdlZCA9ICgpID0+IHtcbiAgICAgICAgaWYgKCEodGhpcy5zZXR0aW5nIGluc3RhbmNlb2YgU2VsZWN0Qm94KSAmJiAhKHRoaXMuc2V0dGluZyBpbnN0YW5jZW9mIExpc3RCb3gpKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIC8vIFRoZSBtaW5pbXVtIG51bWJlciBvZiBpdGVtcyB0aGF0IG11c3QgYmUgYXZhaWxhYmxlIGZvciB0aGUgc2V0dGluZyB0byBiZSBkaXNwbGF5ZWRcbiAgICAgICAgLy8gQnkgZGVmYXVsdCwgYXQgbGVhc3QgdHdvIGl0ZW1zIG11c3QgYmUgYXZhaWxhYmxlLCBlbHNlIGEgc2VsZWN0aW9uIGlzIG5vdCBwb3NzaWJsZVxuICAgICAgICBsZXQgbWluSXRlbXNUb0Rpc3BsYXkgPSAyO1xuICAgICAgICAvLyBBdWRpby92aWRlbyBxdWFsaXR5IHNlbGVjdCBib3hlcyBjb250YWluIGFuIGFkZGl0aW9uYWwgJ2F1dG8nIG1vZGUsIHdoaWNoIGluIGNvbWJpbmF0aW9uIHdpdGggYSBzaW5nbGVcbiAgICAgICAgLy8gYXZhaWxhYmxlIHF1YWxpdHkgYWxzbyBkb2VzIG5vdCBtYWtlIHNlbnNlXG4gICAgICAgIGlmICgodGhpcy5zZXR0aW5nIGluc3RhbmNlb2YgVmlkZW9RdWFsaXR5U2VsZWN0Qm94ICYmIHRoaXMuc2V0dGluZy5oYXNBdXRvSXRlbSgpKVxuICAgICAgICAgIHx8IHRoaXMuc2V0dGluZyBpbnN0YW5jZW9mIEF1ZGlvUXVhbGl0eVNlbGVjdEJveCkge1xuICAgICAgICAgIG1pbkl0ZW1zVG9EaXNwbGF5ID0gMztcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLnNldHRpbmcuaXRlbUNvdW50KCkgPCBtaW5JdGVtc1RvRGlzcGxheSkge1xuICAgICAgICAgIC8vIEhpZGUgdGhlIHNldHRpbmcgaWYgbm8gbWVhbmluZ2Z1bCBjaG9pY2UgaXMgYXZhaWxhYmxlXG4gICAgICAgICAgdGhpcy5oaWRlKCk7XG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5zZXR0aW5nIGluc3RhbmNlb2YgUGxheWJhY2tTcGVlZFNlbGVjdEJveFxuICAgICAgICAgICYmICF1aW1hbmFnZXIuZ2V0Q29uZmlnKCkucGxheWJhY2tTcGVlZFNlbGVjdGlvbkVuYWJsZWQpIHtcbiAgICAgICAgICAvLyBIaWRlIHRoZSBQbGF5YmFja1NwZWVkU2VsZWN0Qm94IGlmIGRpc2FibGVkIGluIGNvbmZpZ1xuICAgICAgICAgIHRoaXMuaGlkZSgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMuc2hvdygpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gVmlzaWJpbGl0eSBtaWdodCBoYXZlIGNoYW5nZWQgYW5kIHRoZXJlZm9yZSB0aGUgYWN0aXZlIHN0YXRlIG1pZ2h0IGhhdmUgY2hhbmdlZCBzbyB3ZSBmaXJlIHRoZSBldmVudFxuICAgICAgICAvLyBUT0RPIGZpcmUgb25seSB3aGVuIHN0YXRlIGhhcyByZWFsbHkgY2hhbmdlZCAoZS5nLiBjaGVjayBpZiB2aXNpYmlsaXR5IGhhcyByZWFsbHkgY2hhbmdlZClcbiAgICAgICAgdGhpcy5vbkFjdGl2ZUNoYW5nZWRFdmVudCgpO1xuXG4gICAgICAgIHRoaXMuZ2V0RG9tRWxlbWVudCgpLmF0dHIoJ2FyaWEtaGFzcG9wdXAnLCAndHJ1ZScpO1xuICAgICAgfTtcblxuICAgICAgdGhpcy5zZXR0aW5nLm9uSXRlbUFkZGVkLnN1YnNjcmliZShoYW5kbGVDb25maWdJdGVtQ2hhbmdlZCk7XG4gICAgICB0aGlzLnNldHRpbmcub25JdGVtUmVtb3ZlZC5zdWJzY3JpYmUoaGFuZGxlQ29uZmlnSXRlbUNoYW5nZWQpO1xuXG4gICAgICAvLyBJbml0aWFsaXplIGhpZGRlbiBzdGF0ZVxuICAgICAgaGFuZGxlQ29uZmlnSXRlbUNoYW5nZWQoKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ2hlY2tzIGlmIHRoaXMgc2V0dGluZ3MgcGFuZWwgaXRlbSBpcyBhY3RpdmUsIGkuZS4gdmlzaWJsZSBhbmQgZW5hYmxlZCBhbmQgYSB1c2VyIGNhbiBpbnRlcmFjdCB3aXRoIGl0LlxuICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gdHJ1ZSBpZiB0aGUgcGFuZWwgaXMgYWN0aXZlLCBlbHNlIGZhbHNlXG4gICAqL1xuICBpc0FjdGl2ZSgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5pc1Nob3duKCk7XG4gIH1cblxuICBwcm90ZWN0ZWQgb25BY3RpdmVDaGFuZ2VkRXZlbnQoKSB7XG4gICAgdGhpcy5zZXR0aW5nc1BhbmVsSXRlbUV2ZW50cy5vbkFjdGl2ZUNoYW5nZWQuZGlzcGF0Y2godGhpcyk7XG4gIH1cblxuICAvKipcbiAgICogR2V0cyB0aGUgZXZlbnQgdGhhdCBpcyBmaXJlZCB3aGVuIHRoZSAnYWN0aXZlJyBzdGF0ZSBvZiB0aGlzIGl0ZW0gY2hhbmdlcy5cbiAgICogQHNlZSAjaXNBY3RpdmVcbiAgICogQHJldHVybnMge0V2ZW50PFNldHRpbmdzUGFuZWxJdGVtLCBOb0FyZ3M+fVxuICAgKi9cbiAgZ2V0IG9uQWN0aXZlQ2hhbmdlZCgpOiBFdmVudDxTZXR0aW5nc1BhbmVsSXRlbSwgTm9BcmdzPiB7XG4gICAgcmV0dXJuIHRoaXMuc2V0dGluZ3NQYW5lbEl0ZW1FdmVudHMub25BY3RpdmVDaGFuZ2VkLmdldEV2ZW50KCk7XG4gIH1cbn1cbiIsImltcG9ydCB7Q29udGFpbmVyLCBDb250YWluZXJDb25maWd9IGZyb20gJy4vY29udGFpbmVyJztcbmltcG9ydCB7U2V0dGluZ3NQYW5lbEl0ZW19IGZyb20gJy4vc2V0dGluZ3NwYW5lbGl0ZW0nO1xuaW1wb3J0IHtVSUluc3RhbmNlTWFuYWdlcn0gZnJvbSAnLi4vdWltYW5hZ2VyJztcbmltcG9ydCB7RXZlbnQsIEV2ZW50RGlzcGF0Y2hlciwgTm9BcmdzfSBmcm9tICcuLi9ldmVudGRpc3BhdGNoZXInO1xuaW1wb3J0IHsgUGxheWVyQVBJIH0gZnJvbSAnYml0bW92aW4tcGxheWVyJztcbmltcG9ydCB7IEJyb3dzZXJVdGlscyB9IGZyb20gJy4uL2Jyb3dzZXJ1dGlscyc7XG5cbi8qKlxuICogQSBwYW5lbCBjb250YWluaW5nIGEgbGlzdCBvZiB7QGxpbmsgU2V0dGluZ3NQYW5lbEl0ZW0gaXRlbXN9IHRoYXQgcmVwcmVzZW50IGxhYmVsbGVkIHNldHRpbmdzLlxuICpcbiAqIEBjYXRlZ29yeSBDb21wb25lbnRzXG4gKi9cbmV4cG9ydCBjbGFzcyBTZXR0aW5nc1BhbmVsUGFnZSBleHRlbmRzIENvbnRhaW5lcjxDb250YWluZXJDb25maWc+IHtcblxuICBwcml2YXRlIHN0YXRpYyByZWFkb25seSBDTEFTU19MQVNUID0gJ2xhc3QnO1xuXG4gIHByaXZhdGUgc2V0dGluZ3NQYW5lbFBhZ2VFdmVudHMgPSB7XG4gICAgb25TZXR0aW5nc1N0YXRlQ2hhbmdlZDogbmV3IEV2ZW50RGlzcGF0Y2hlcjxTZXR0aW5nc1BhbmVsUGFnZSwgTm9BcmdzPigpLFxuICAgIG9uQWN0aXZlOiBuZXcgRXZlbnREaXNwYXRjaGVyPFNldHRpbmdzUGFuZWxQYWdlLCBOb0FyZ3M+KCksXG4gICAgb25JbmFjdGl2ZTogbmV3IEV2ZW50RGlzcGF0Y2hlcjxTZXR0aW5nc1BhbmVsUGFnZSwgTm9BcmdzPigpLFxuICB9O1xuXG4gIGNvbnN0cnVjdG9yKGNvbmZpZzogQ29udGFpbmVyQ29uZmlnKSB7XG4gICAgc3VwZXIoY29uZmlnKTtcblxuICAgIHRoaXMuY29uZmlnID0gdGhpcy5tZXJnZUNvbmZpZzxDb250YWluZXJDb25maWc+KGNvbmZpZywge1xuICAgICAgY3NzQ2xhc3M6ICd1aS1zZXR0aW5ncy1wYW5lbC1wYWdlJyxcbiAgICAgIHJvbGU6ICdtZW51JyxcbiAgICB9LCB0aGlzLmNvbmZpZyk7XG4gIH1cblxuICBjb25maWd1cmUocGxheWVyOiBQbGF5ZXJBUEksIHVpbWFuYWdlcjogVUlJbnN0YW5jZU1hbmFnZXIpOiB2b2lkIHtcbiAgICBzdXBlci5jb25maWd1cmUocGxheWVyLCB1aW1hbmFnZXIpO1xuXG4gICAgLy8gRmlyZSBldmVudCB3aGVuIHRoZSBzdGF0ZSBvZiBhIHNldHRpbmdzLWl0ZW0gaGFzIGNoYW5nZWRcbiAgICBsZXQgc2V0dGluZ3NTdGF0ZUNoYW5nZWRIYW5kbGVyID0gKCkgPT4ge1xuICAgICAgdGhpcy5vblNldHRpbmdzU3RhdGVDaGFuZ2VkRXZlbnQoKTtcblxuICAgICAgLy8gQXR0YWNoIG1hcmtlciBjbGFzcyB0byBsYXN0IHZpc2libGUgaXRlbVxuICAgICAgbGV0IGxhc3RTaG93bkl0ZW0gPSBudWxsO1xuICAgICAgZm9yIChsZXQgY29tcG9uZW50IG9mIHRoaXMuZ2V0SXRlbXMoKSkge1xuICAgICAgICBjb21wb25lbnQuZ2V0RG9tRWxlbWVudCgpLnJlbW92ZUNsYXNzKHRoaXMucHJlZml4Q3NzKFNldHRpbmdzUGFuZWxQYWdlLkNMQVNTX0xBU1QpKTtcbiAgICAgICAgaWYgKGNvbXBvbmVudC5pc1Nob3duKCkpIHtcbiAgICAgICAgICBsYXN0U2hvd25JdGVtID0gY29tcG9uZW50O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAobGFzdFNob3duSXRlbSkge1xuICAgICAgICBsYXN0U2hvd25JdGVtLmdldERvbUVsZW1lbnQoKS5hZGRDbGFzcyh0aGlzLnByZWZpeENzcyhTZXR0aW5nc1BhbmVsUGFnZS5DTEFTU19MQVNUKSk7XG4gICAgICB9XG4gICAgfTtcbiAgICBmb3IgKGxldCBjb21wb25lbnQgb2YgdGhpcy5nZXRJdGVtcygpKSB7XG4gICAgICBjb21wb25lbnQub25BY3RpdmVDaGFuZ2VkLnN1YnNjcmliZShzZXR0aW5nc1N0YXRlQ2hhbmdlZEhhbmRsZXIpO1xuICAgIH1cbiAgfVxuXG4gIGhhc0FjdGl2ZVNldHRpbmdzKCk6IGJvb2xlYW4ge1xuICAgIGZvciAobGV0IGNvbXBvbmVudCBvZiB0aGlzLmdldEl0ZW1zKCkpIHtcbiAgICAgIGlmIChjb21wb25lbnQuaXNBY3RpdmUoKSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBnZXRJdGVtcygpOiBTZXR0aW5nc1BhbmVsSXRlbVtdIHtcbiAgICByZXR1cm4gPFNldHRpbmdzUGFuZWxJdGVtW10+dGhpcy5jb25maWcuY29tcG9uZW50cy5maWx0ZXIoY29tcG9uZW50ID0+IGNvbXBvbmVudCBpbnN0YW5jZW9mIFNldHRpbmdzUGFuZWxJdGVtKTtcbiAgfVxuXG4gIG9uU2V0dGluZ3NTdGF0ZUNoYW5nZWRFdmVudCgpIHtcbiAgICB0aGlzLnNldHRpbmdzUGFuZWxQYWdlRXZlbnRzLm9uU2V0dGluZ3NTdGF0ZUNoYW5nZWQuZGlzcGF0Y2godGhpcyk7XG4gIH1cblxuICBnZXQgb25TZXR0aW5nc1N0YXRlQ2hhbmdlZCgpOiBFdmVudDxTZXR0aW5nc1BhbmVsUGFnZSwgTm9BcmdzPiB7XG4gICAgcmV0dXJuIHRoaXMuc2V0dGluZ3NQYW5lbFBhZ2VFdmVudHMub25TZXR0aW5nc1N0YXRlQ2hhbmdlZC5nZXRFdmVudCgpO1xuICB9XG5cbiAgb25BY3RpdmVFdmVudCgpIHtcbiAgICBjb25zdCBhY3RpdmVJdGVtcyA9IHRoaXMuZ2V0SXRlbXMoKS5maWx0ZXIoKGl0ZW0pID0+IGl0ZW0uaXNBY3RpdmUoKSk7XG5cbiAgICB0aGlzLnNldHRpbmdzUGFuZWxQYWdlRXZlbnRzLm9uQWN0aXZlLmRpc3BhdGNoKHRoaXMpO1xuICAgIC8vIERpc2FibGUgZm9jdXMgZm9yIGlPUyBhbmQgaVBhZE9TIDEzLiBUaGV5IG9wZW4gc2VsZWN0IGJveGVzIGF1dG9tYXRpY2FsbHkgb24gZm9jdXMgYW5kIHdlIHdhbnQgdG8gYXZvaWQgdGhhdC5cbiAgICBpZiAoYWN0aXZlSXRlbXMubGVuZ3RoID4gMCAmJiAhQnJvd3NlclV0aWxzLmlzSU9TICYmICEoQnJvd3NlclV0aWxzLmlzTWFjSW50ZWwgJiYgQnJvd3NlclV0aWxzLmlzVG91Y2hTdXBwb3J0ZWQpKSB7XG4gICAgICBhY3RpdmVJdGVtc1swXS5nZXREb21FbGVtZW50KCkuZm9jdXNUb0ZpcnN0SW5wdXQoKTtcbiAgICB9XG4gIH1cblxuICBnZXQgb25BY3RpdmUoKTogRXZlbnQ8U2V0dGluZ3NQYW5lbFBhZ2UsIE5vQXJncz4ge1xuICAgIHJldHVybiB0aGlzLnNldHRpbmdzUGFuZWxQYWdlRXZlbnRzLm9uQWN0aXZlLmdldEV2ZW50KCk7XG4gIH1cblxuICBvbkluYWN0aXZlRXZlbnQoKSB7XG4gICAgdGhpcy5zZXR0aW5nc1BhbmVsUGFnZUV2ZW50cy5vbkluYWN0aXZlLmRpc3BhdGNoKHRoaXMpO1xuICB9XG5cbiAgZ2V0IG9uSW5hY3RpdmUoKTogRXZlbnQ8U2V0dGluZ3NQYW5lbFBhZ2UsIE5vQXJncz4ge1xuICAgIHJldHVybiB0aGlzLnNldHRpbmdzUGFuZWxQYWdlRXZlbnRzLm9uSW5hY3RpdmUuZ2V0RXZlbnQoKTtcbiAgfVxufVxuIiwiaW1wb3J0IHtVSUluc3RhbmNlTWFuYWdlcn0gZnJvbSAnLi4vdWltYW5hZ2VyJztcbmltcG9ydCB7U2V0dGluZ3NQYW5lbFBhZ2VOYXZpZ2F0b3JCdXR0b24sIFNldHRpbmdzUGFuZWxQYWdlTmF2aWdhdG9yQ29uZmlnfSBmcm9tICcuL3NldHRpbmdzcGFuZWxwYWdlbmF2aWdhdG9yYnV0dG9uJztcbmltcG9ydCB7IFBsYXllckFQSSB9IGZyb20gJ2JpdG1vdmluLXBsYXllcic7XG5cbi8qKlxuICogQGNhdGVnb3J5IEJ1dHRvbnNcbiAqL1xuZXhwb3J0IGNsYXNzIFNldHRpbmdzUGFuZWxQYWdlQmFja0J1dHRvbiBleHRlbmRzIFNldHRpbmdzUGFuZWxQYWdlTmF2aWdhdG9yQnV0dG9uIHtcblxuICBjb25zdHJ1Y3Rvcihjb25maWc6IFNldHRpbmdzUGFuZWxQYWdlTmF2aWdhdG9yQ29uZmlnKSB7XG4gICAgc3VwZXIoY29uZmlnKTtcblxuICAgIHRoaXMuY29uZmlnID0gdGhpcy5tZXJnZUNvbmZpZyhjb25maWcsIHtcbiAgICAgIGNzc0NsYXNzOiAndWktc2V0dGluZ3NwYW5lbHBhZ2ViYWNrYnV0dG9uJyxcbiAgICAgIHRleHQ6ICdiYWNrJyxcbiAgICB9IGFzIFNldHRpbmdzUGFuZWxQYWdlTmF2aWdhdG9yQ29uZmlnLCB0aGlzLmNvbmZpZyk7XG4gIH1cblxuICBjb25maWd1cmUocGxheWVyOiBQbGF5ZXJBUEksIHVpbWFuYWdlcjogVUlJbnN0YW5jZU1hbmFnZXIpOiB2b2lkIHtcbiAgICBzdXBlci5jb25maWd1cmUocGxheWVyLCB1aW1hbmFnZXIpO1xuXG4gICAgdGhpcy5vbkNsaWNrLnN1YnNjcmliZSgoKSA9PiB7XG4gICAgICB0aGlzLnBvcFBhZ2UoKTtcbiAgICB9KTtcbiAgfVxufVxuIiwiaW1wb3J0IHtCdXR0b24sIEJ1dHRvbkNvbmZpZ30gZnJvbSAnLi9idXR0b24nO1xuaW1wb3J0IHtTZXR0aW5nc1BhbmVsfSBmcm9tICcuL3NldHRpbmdzcGFuZWwnO1xuaW1wb3J0IHtTZXR0aW5nc1BhbmVsUGFnZX0gZnJvbSAnLi9zZXR0aW5nc3BhbmVscGFnZSc7XG5pbXBvcnQgeyBQbGF5ZXJBUEkgfSBmcm9tICdiaXRtb3Zpbi1wbGF5ZXInO1xuaW1wb3J0IHsgVUlJbnN0YW5jZU1hbmFnZXIgfSBmcm9tICcuLi91aW1hbmFnZXInO1xuXG4vKipcbiAqIENvbmZpZ3VyYXRpb24gaW50ZXJmYWNlIGZvciBhIHtAbGluayBTZXR0aW5nc1BhbmVsUGFnZU5hdmlnYXRvckJ1dHRvbn1cbiAqXG4gKiBAY2F0ZWdvcnkgQ29uZmlnc1xuICovXG5leHBvcnQgaW50ZXJmYWNlIFNldHRpbmdzUGFuZWxQYWdlTmF2aWdhdG9yQ29uZmlnIGV4dGVuZHMgQnV0dG9uQ29uZmlnIHtcbiAgLyoqXG4gICAqIENvbnRhaW5lciBgU2V0dGluZ3NQYW5lbGAgd2hlcmUgdGhlIG5hdmlnYXRpb24gdGFrZXMgcGxhY2VcbiAgICovXG4gIGNvbnRhaW5lcjogU2V0dGluZ3NQYW5lbDtcbiAgLyoqXG4gICAqIFBhZ2Ugd2hlcmUgdGhlIGJ1dHRvbiBzaG91bGQgbmF2aWdhdGUgdG9cbiAgICogSWYgZW1wdHkgaXQgd2lsbCBuYXZpZ2F0ZSB0byB0aGUgcm9vdCBwYWdlIChub3QgaW50ZW5kZWQgdG8gdXNlIGFzIG5hdmlnYXRlIGJhY2sgYmVoYXZpb3IpXG4gICAqL1xuICB0YXJnZXRQYWdlPzogU2V0dGluZ3NQYW5lbFBhZ2U7XG5cbiAgLyoqXG4gICAqIFdDQUcyMCBzdGFuZGFyZDogRXN0YWJsaXNoZXMgcmVsYXRpb25zaGlwcyBiZXR3ZWVuIG9iamVjdHMgYW5kIHRoZWlyIGxhYmVsKHMpXG4gICAqL1xuICBhcmlhTGFiZWxsZWRCeT86IHN0cmluZztcbn1cblxuLyoqXG4gKiBDYW4gYmUgdXNlZCB0byBuYXZpZ2F0ZSBiZXR3ZWVuIFNldHRpbmdzUGFuZWxQYWdlc1xuICpcbiAqIEV4YW1wbGU6XG4gKiAgbGV0IHNldHRpbmdQYW5lbE5hdmlnYXRpb25CdXR0b24gPSBuZXcgU2V0dGluZ3NQYW5lbFBhZ2VOYXZpZ2F0b3JCdXR0b24oe1xuICogICAgY29udGFpbmVyOiBzZXR0aW5nc1BhbmVsLFxuICogICAgdGFyZ2V0UGFnZTogc2V0dGluZ3NQYW5lbFBhZ2UsXG4gKiAgfSk7XG4gKlxuICogIHNldHRpbmdzUGFuZWxQYWdlLmFkZENvbXBvbmVudChzZXR0aW5nUGFuZWxOYXZpZ2F0aW9uQnV0dG9uKTtcbiAqXG4gKiBEb24ndCBmb3JnZXQgdG8gYWRkIHRoZSBzZXR0aW5nUGFuZWxOYXZpZ2F0aW9uQnV0dG9uIHRvIHRoZSBzZXR0aW5nc1BhbmVsUGFnZS5cbiAqXG4gKiBAY2F0ZWdvcnkgQnV0dG9uc1xuICovXG5leHBvcnQgY2xhc3MgU2V0dGluZ3NQYW5lbFBhZ2VOYXZpZ2F0b3JCdXR0b24gZXh0ZW5kcyBCdXR0b248U2V0dGluZ3NQYW5lbFBhZ2VOYXZpZ2F0b3JDb25maWc+IHtcbiAgcHJpdmF0ZSByZWFkb25seSBjb250YWluZXI6IFNldHRpbmdzUGFuZWw7XG4gIHByaXZhdGUgcmVhZG9ubHkgdGFyZ2V0UGFnZT86IFNldHRpbmdzUGFuZWxQYWdlO1xuXG4gIGNvbnN0cnVjdG9yKGNvbmZpZzogU2V0dGluZ3NQYW5lbFBhZ2VOYXZpZ2F0b3JDb25maWcpIHtcbiAgICBzdXBlcihjb25maWcpO1xuICAgIHRoaXMuY29uZmlnID0gdGhpcy5tZXJnZUNvbmZpZyhjb25maWcsIHt9IGFzIFNldHRpbmdzUGFuZWxQYWdlTmF2aWdhdG9yQ29uZmlnLCB0aGlzLmNvbmZpZyk7XG5cbiAgICB0aGlzLmNvbnRhaW5lciA9ICh0aGlzLmNvbmZpZyBhcyBTZXR0aW5nc1BhbmVsUGFnZU5hdmlnYXRvckNvbmZpZykuY29udGFpbmVyO1xuICAgIHRoaXMudGFyZ2V0UGFnZSA9ICh0aGlzLmNvbmZpZyBhcyBTZXR0aW5nc1BhbmVsUGFnZU5hdmlnYXRvckNvbmZpZykudGFyZ2V0UGFnZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBuYXZpZ2F0ZSBvbmUgbGV2ZWwgYmFja1xuICAgKi9cbiAgcG9wUGFnZSgpIHtcbiAgICB0aGlzLmNvbnRhaW5lci5wb3BTZXR0aW5nc1BhbmVsUGFnZSgpO1xuICB9XG5cbiAgLyoqXG4gICAqIG5hdmlnYXRlIHRvIHRoZSB0YXJnZXQgcGFnZVxuICAgKi9cbiAgcHVzaFRhcmdldFBhZ2UoKSB7XG4gICAgdGhpcy5jb250YWluZXIuc2V0QWN0aXZlUGFnZSh0aGlzLnRhcmdldFBhZ2UpO1xuICB9XG59XG4iLCJpbXBvcnQge1VJSW5zdGFuY2VNYW5hZ2VyfSBmcm9tICcuLi91aW1hbmFnZXInO1xuaW1wb3J0IHtTZXR0aW5nc1BhbmVsUGFnZU5hdmlnYXRvckJ1dHRvbiwgU2V0dGluZ3NQYW5lbFBhZ2VOYXZpZ2F0b3JDb25maWd9IGZyb20gJy4vc2V0dGluZ3NwYW5lbHBhZ2VuYXZpZ2F0b3JidXR0b24nO1xuaW1wb3J0IHsgUGxheWVyQVBJIH0gZnJvbSAnYml0bW92aW4tcGxheWVyJztcbmltcG9ydCB7IGkxOG4gfSBmcm9tICcuLi9sb2NhbGl6YXRpb24vaTE4bic7XG5cbi8qKlxuICogQGNhdGVnb3J5IEJ1dHRvbnNcbiAqL1xuZXhwb3J0IGNsYXNzIFNldHRpbmdzUGFuZWxQYWdlT3BlbkJ1dHRvbiBleHRlbmRzIFNldHRpbmdzUGFuZWxQYWdlTmF2aWdhdG9yQnV0dG9uIHtcbiAgY29uc3RydWN0b3IoY29uZmlnOiBTZXR0aW5nc1BhbmVsUGFnZU5hdmlnYXRvckNvbmZpZykge1xuICAgIHN1cGVyKGNvbmZpZyk7XG5cbiAgICB0aGlzLmNvbmZpZyA9IHRoaXMubWVyZ2VDb25maWcoY29uZmlnLCB7XG4gICAgICBjc3NDbGFzczogJ3VpLXNldHRpbmdzcGFuZWxwYWdlb3BlbmJ1dHRvbicsXG4gICAgICB0ZXh0OiBpMThuLmdldExvY2FsaXplcignb3BlbicpLFxuICAgICAgcm9sZTogJ21lbnVpdGVtJyxcbiAgICB9IGFzIFNldHRpbmdzUGFuZWxQYWdlTmF2aWdhdG9yQ29uZmlnLCB0aGlzLmNvbmZpZyk7XG4gIH1cblxuICBjb25maWd1cmUocGxheWVyOiBQbGF5ZXJBUEksIHVpbWFuYWdlcjogVUlJbnN0YW5jZU1hbmFnZXIpOiB2b2lkIHtcbiAgICBzdXBlci5jb25maWd1cmUocGxheWVyLCB1aW1hbmFnZXIpO1xuXG4gICAgdGhpcy5nZXREb21FbGVtZW50KCkuYXR0cignYXJpYS1oYXNwb3B1cCcsICd0cnVlJyk7XG4gICAgdGhpcy5nZXREb21FbGVtZW50KCkuYXR0cignYXJpYS1vd25zJywgdGhpcy5jb25maWcudGFyZ2V0UGFnZS5nZXRDb25maWcoKS5pZCk7XG5cbiAgICB0aGlzLm9uQ2xpY2suc3Vic2NyaWJlKCgpID0+IHtcbiAgICAgIHRoaXMucHVzaFRhcmdldFBhZ2UoKTtcbiAgICB9KTtcbiAgfVxufVxuIiwiaW1wb3J0IHtUb2dnbGVCdXR0b24sIFRvZ2dsZUJ1dHRvbkNvbmZpZ30gZnJvbSAnLi90b2dnbGVidXR0b24nO1xuaW1wb3J0IHtTZXR0aW5nc1BhbmVsfSBmcm9tICcuL3NldHRpbmdzcGFuZWwnO1xuaW1wb3J0IHtVSUluc3RhbmNlTWFuYWdlcn0gZnJvbSAnLi4vdWltYW5hZ2VyJztcbmltcG9ydCB7Q29tcG9uZW50LCBDb21wb25lbnRDb25maWd9IGZyb20gJy4vY29tcG9uZW50JztcbmltcG9ydCB7QXJyYXlVdGlsc30gZnJvbSAnLi4vYXJyYXl1dGlscyc7XG5pbXBvcnQgeyBQbGF5ZXJBUEkgfSBmcm9tICdiaXRtb3Zpbi1wbGF5ZXInO1xuaW1wb3J0IHsgaTE4biB9IGZyb20gJy4uL2xvY2FsaXphdGlvbi9pMThuJztcblxuLyoqXG4gKiBDb25maWd1cmF0aW9uIGludGVyZmFjZSBmb3IgdGhlIHtAbGluayBTZXR0aW5nc1RvZ2dsZUJ1dHRvbn0uXG4gKlxuICogQGNhdGVnb3J5IENvbmZpZ3NcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBTZXR0aW5nc1RvZ2dsZUJ1dHRvbkNvbmZpZyBleHRlbmRzIFRvZ2dsZUJ1dHRvbkNvbmZpZyB7XG4gIC8qKlxuICAgKiBUaGUgc2V0dGluZ3MgcGFuZWwgd2hvc2UgdmlzaWJpbGl0eSB0aGUgYnV0dG9uIHNob3VsZCB0b2dnbGUuXG4gICAqL1xuICBzZXR0aW5nc1BhbmVsOiBTZXR0aW5nc1BhbmVsO1xuXG4gIC8qKlxuICAgKiBEZWNpZGVzIGlmIHRoZSBidXR0b24gc2hvdWxkIGJlIGF1dG9tYXRpY2FsbHkgaGlkZGVuIHdoZW4gdGhlIHNldHRpbmdzIHBhbmVsIGRvZXMgbm90IGNvbnRhaW4gYW55IGFjdGl2ZSBzZXR0aW5ncy5cbiAgICogRGVmYXVsdDogdHJ1ZVxuICAgKi9cbiAgYXV0b0hpZGVXaGVuTm9BY3RpdmVTZXR0aW5ncz86IGJvb2xlYW47XG59XG5cbi8qKlxuICogQSBidXR0b24gdGhhdCB0b2dnbGVzIHZpc2liaWxpdHkgb2YgYSBzZXR0aW5ncyBwYW5lbC5cbiAqXG4gKiBAY2F0ZWdvcnkgQnV0dG9uc1xuICovXG5leHBvcnQgY2xhc3MgU2V0dGluZ3NUb2dnbGVCdXR0b24gZXh0ZW5kcyBUb2dnbGVCdXR0b248U2V0dGluZ3NUb2dnbGVCdXR0b25Db25maWc+IHtcblxuICBwcml2YXRlIHZpc2libGVTZXR0aW5nc1BhbmVsczogU2V0dGluZ3NQYW5lbFtdID0gW107XG5cbiAgY29uc3RydWN0b3IoY29uZmlnOiBTZXR0aW5nc1RvZ2dsZUJ1dHRvbkNvbmZpZykge1xuICAgIHN1cGVyKGNvbmZpZyk7XG5cbiAgICBpZiAoIWNvbmZpZy5zZXR0aW5nc1BhbmVsKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIFNldHRpbmdzUGFuZWwgaXMgbWlzc2luZycpO1xuICAgIH1cblxuICAgIHRoaXMuY29uZmlnID0gdGhpcy5tZXJnZUNvbmZpZyhjb25maWcsIHtcbiAgICAgIGNzc0NsYXNzOiAndWktc2V0dGluZ3N0b2dnbGVidXR0b24nLFxuICAgICAgdGV4dDogaTE4bi5nZXRMb2NhbGl6ZXIoJ3NldHRpbmdzJyksXG4gICAgICBzZXR0aW5nc1BhbmVsOiBudWxsLFxuICAgICAgYXV0b0hpZGVXaGVuTm9BY3RpdmVTZXR0aW5nczogdHJ1ZSxcbiAgICAgIHJvbGU6ICdwb3AtdXAgYnV0dG9uJyxcbiAgICB9LCA8U2V0dGluZ3NUb2dnbGVCdXR0b25Db25maWc+dGhpcy5jb25maWcpO1xuXG4gICAgLyoqXG4gICAgICogV0NBRzIwIHN0YW5kYXJkIGRlZmluZXMgd2hpY2ggcG9wdXAgbWVudSAoZWxlbWVudCBpZCkgaXMgb3duZWQgYnkgdGhlIGJ1dHRvblxuICAgICAqL1xuICAgIHRoaXMuZ2V0RG9tRWxlbWVudCgpLmF0dHIoJ2FyaWEtb3ducycsIGNvbmZpZy5zZXR0aW5nc1BhbmVsLmdldEFjdGl2ZVBhZ2UoKS5nZXRDb25maWcoKS5pZCk7XG5cbiAgICAvKipcbiAgICAgKiBXQ0FHMjAgc3RhbmRhcmQgZGVmaW5lcyB0aGF0IGEgYnV0dG9uIGhhcyBhIHBvcHVwIG1lbnUgYm91bmQgdG8gaXRcbiAgICAgKi9cbiAgICB0aGlzLmdldERvbUVsZW1lbnQoKS5hdHRyKCdhcmlhLWhhc3BvcHVwJywgJ3RydWUnKTtcblxuICB9XG5cbiAgY29uZmlndXJlKHBsYXllcjogUGxheWVyQVBJLCB1aW1hbmFnZXI6IFVJSW5zdGFuY2VNYW5hZ2VyKTogdm9pZCB7XG4gICAgc3VwZXIuY29uZmlndXJlKHBsYXllciwgdWltYW5hZ2VyKTtcblxuICAgIGxldCBjb25maWcgPSB0aGlzLmdldENvbmZpZygpO1xuICAgIGxldCBzZXR0aW5nc1BhbmVsID0gY29uZmlnLnNldHRpbmdzUGFuZWw7XG5cbiAgICB0aGlzLm9uQ2xpY2suc3Vic2NyaWJlKCgpID0+IHtcbiAgICAgIC8vIG9ubHkgaGlkZSBvdGhlciBgU2V0dGluZ3NQYW5lbGBzIGlmIGEgbmV3IG9uZSB3aWxsIGJlIG9wZW5lZFxuICAgICAgaWYgKCFzZXR0aW5nc1BhbmVsLmlzU2hvd24oKSkge1xuICAgICAgICAvLyBIaWRlIGFsbCBvcGVuIFNldHRpbmdzUGFuZWxzIGJlZm9yZSBvcGVuaW5nIHRoaXMgYnV0dG9uJ3MgcGFuZWxcbiAgICAgICAgLy8gKFdlIG5lZWQgdG8gaXRlcmF0ZSBhIGNvcHkgYmVjYXVzZSBoaWRpbmcgdGhlbSB3aWxsIGF1dG9tYXRpY2FsbHkgcmVtb3ZlIHRoZW1zZWx2ZXMgZnJvbSB0aGUgYXJyYXlcbiAgICAgICAgLy8gZHVlIHRvIHRoZSBzdWJzY3JpYmVPbmNlIGFib3ZlKVxuICAgICAgICB0aGlzLnZpc2libGVTZXR0aW5nc1BhbmVscy5zbGljZSgpLmZvckVhY2goc2V0dGluZ3NQYW5lbCA9PiBzZXR0aW5nc1BhbmVsLmhpZGUoKSk7XG4gICAgICB9XG4gICAgICBzZXR0aW5nc1BhbmVsLnRvZ2dsZUhpZGRlbigpO1xuICAgIH0pO1xuICAgIHNldHRpbmdzUGFuZWwub25TaG93LnN1YnNjcmliZSgoKSA9PiB7XG4gICAgICAvLyBTZXQgdG9nZ2xlIHN0YXR1cyB0byBvbiB3aGVuIHRoZSBzZXR0aW5ncyBwYW5lbCBzaG93c1xuICAgICAgdGhpcy5vbigpO1xuICAgIH0pO1xuICAgIHNldHRpbmdzUGFuZWwub25IaWRlLnN1YnNjcmliZSgoKSA9PiB7XG4gICAgICAvLyBTZXQgdG9nZ2xlIHN0YXR1cyB0byBvZmYgd2hlbiB0aGUgc2V0dGluZ3MgcGFuZWwgaGlkZXNcbiAgICAgIHRoaXMub2ZmKCk7XG4gICAgfSk7XG5cbiAgICAvLyBFbnN1cmUgdGhhdCBvbmx5IG9uZSBgU2V0dGluZ1BhbmVsYCBpcyB2aXNpYmxlIGF0IG9uY2VcbiAgICAvLyBLZWVwIHRyYWNrIG9mIHNob3duIFNldHRpbmdzUGFuZWxzXG4gICAgdWltYW5hZ2VyLm9uQ29tcG9uZW50U2hvdy5zdWJzY3JpYmUoKHNlbmRlcjogQ29tcG9uZW50PENvbXBvbmVudENvbmZpZz4pID0+IHtcbiAgICAgIGlmIChzZW5kZXIgaW5zdGFuY2VvZiBTZXR0aW5nc1BhbmVsKSB7XG4gICAgICAgIHRoaXMudmlzaWJsZVNldHRpbmdzUGFuZWxzLnB1c2goc2VuZGVyKTtcbiAgICAgICAgc2VuZGVyLm9uSGlkZS5zdWJzY3JpYmVPbmNlKCgpID0+IEFycmF5VXRpbHMucmVtb3ZlKHRoaXMudmlzaWJsZVNldHRpbmdzUGFuZWxzLCBzZW5kZXIpKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIEhhbmRsZSBhdXRvbWF0aWMgaGlkaW5nIG9mIHRoZSBidXR0b24gaWYgdGhlcmUgYXJlIG5vIHNldHRpbmdzIGZvciB0aGUgdXNlciB0byBpbnRlcmFjdCB3aXRoXG4gICAgaWYgKGNvbmZpZy5hdXRvSGlkZVdoZW5Ob0FjdGl2ZVNldHRpbmdzKSB7XG4gICAgICAvLyBTZXR1cCBoYW5kbGVyIHRvIHNob3cvaGlkZSBidXR0b24gd2hlbiB0aGUgc2V0dGluZ3MgY2hhbmdlXG4gICAgICBsZXQgc2V0dGluZ3NQYW5lbEl0ZW1zQ2hhbmdlZEhhbmRsZXIgPSAoKSA9PiB7XG4gICAgICAgIGlmIChzZXR0aW5nc1BhbmVsLnJvb3RQYWdlSGFzQWN0aXZlU2V0dGluZ3MoKSkge1xuICAgICAgICAgIGlmICh0aGlzLmlzSGlkZGVuKCkpIHtcbiAgICAgICAgICAgIHRoaXMuc2hvdygpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpZiAodGhpcy5pc1Nob3duKCkpIHtcbiAgICAgICAgICAgIHRoaXMuaGlkZSgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfTtcbiAgICAgIC8vIFdpcmUgdGhlIGhhbmRsZXIgdG8gdGhlIGV2ZW50XG4gICAgICBzZXR0aW5nc1BhbmVsLm9uU2V0dGluZ3NTdGF0ZUNoYW5nZWQuc3Vic2NyaWJlKHNldHRpbmdzUGFuZWxJdGVtc0NoYW5nZWRIYW5kbGVyKTtcbiAgICAgIC8vIENhbGwgaGFuZGxlciBmb3IgZmlyc3QgaW5pdCBhdCBzdGFydHVwXG4gICAgICBzZXR0aW5nc1BhbmVsSXRlbXNDaGFuZ2VkSGFuZGxlcigpO1xuICAgIH1cbiAgfVxufVxuIiwiaW1wb3J0IHtDb21wb25lbnQsIENvbXBvbmVudENvbmZpZ30gZnJvbSAnLi9jb21wb25lbnQnO1xuXG4vKipcbiAqIEEgZHVtbXkgY29tcG9uZW50IHRoYXQganVzdCByZXNlcnZlcyBzb21lIHNwYWNlIGFuZCBkb2VzIG5vdGhpbmcgZWxzZS5cbiAqXG4gKiBAY2F0ZWdvcnkgQ29tcG9uZW50c1xuICovXG5leHBvcnQgY2xhc3MgU3BhY2VyIGV4dGVuZHMgQ29tcG9uZW50PENvbXBvbmVudENvbmZpZz4ge1xuXG4gIGNvbnN0cnVjdG9yKGNvbmZpZzogQ29tcG9uZW50Q29uZmlnID0ge30pIHtcbiAgICBzdXBlcihjb25maWcpO1xuXG4gICAgdGhpcy5jb25maWcgPSB0aGlzLm1lcmdlQ29uZmlnKGNvbmZpZywge1xuICAgICAgY3NzQ2xhc3M6ICd1aS1zcGFjZXInLFxuICAgIH0sIHRoaXMuY29uZmlnKTtcbiAgfVxuXG5cbiAgcHJvdGVjdGVkIG9uU2hvd0V2ZW50KCk6IHZvaWQge1xuICAgIC8vIGRpc2FibGUgZXZlbnQgZmlyaW5nIGJ5IG92ZXJ3cml0aW5nIGFuZCBub3QgY2FsbGluZyBzdXBlclxuICB9XG5cbiAgcHJvdGVjdGVkIG9uSGlkZUV2ZW50KCk6IHZvaWQge1xuICAgIC8vIGRpc2FibGUgZXZlbnQgZmlyaW5nIGJ5IG92ZXJ3cml0aW5nIGFuZCBub3QgY2FsbGluZyBzdXBlclxuICB9XG5cbiAgcHJvdGVjdGVkIG9uSG92ZXJDaGFuZ2VkRXZlbnQoaG92ZXJlZDogYm9vbGVhbik6IHZvaWQge1xuICAgIC8vIGRpc2FibGUgZXZlbnQgZmlyaW5nIGJ5IG92ZXJ3cml0aW5nIGFuZCBub3QgY2FsbGluZyBzdXBlclxuICB9XG59IiwiaW1wb3J0IHtMaXN0Qm94fSBmcm9tICcuL2xpc3Rib3gnO1xuaW1wb3J0IHtVSUluc3RhbmNlTWFuYWdlcn0gZnJvbSAnLi4vdWltYW5hZ2VyJztcbmltcG9ydCB7U3VidGl0bGVTd2l0Y2hIYW5kbGVyfSBmcm9tICcuLi9zdWJ0aXRsZXV0aWxzJztcbmltcG9ydCB7IFBsYXllckFQSSB9IGZyb20gJ2JpdG1vdmluLXBsYXllcic7XG5cbi8qKlxuICogQSBlbGVtZW50IHRoYXQgaXMgc2ltaWxhciB0byBhIHNlbGVjdCBib3ggd2hlcmUgdGhlIHVzZXIgY2FuIHNlbGVjdCBhIHN1YnRpdGxlXG4gKlxuICogQGNhdGVnb3J5IENvbXBvbmVudHNcbiAqL1xuZXhwb3J0IGNsYXNzIFN1YnRpdGxlTGlzdEJveCBleHRlbmRzIExpc3RCb3gge1xuXG4gIGNvbmZpZ3VyZShwbGF5ZXI6IFBsYXllckFQSSwgdWltYW5hZ2VyOiBVSUluc3RhbmNlTWFuYWdlcik6IHZvaWQge1xuICAgIHN1cGVyLmNvbmZpZ3VyZShwbGF5ZXIsIHVpbWFuYWdlcik7XG5cbiAgICBuZXcgU3VidGl0bGVTd2l0Y2hIYW5kbGVyKHBsYXllciwgdGhpcywgdWltYW5hZ2VyKTtcbiAgfVxufVxuIiwiaW1wb3J0IHsgQ29udGFpbmVyLCBDb250YWluZXJDb25maWcgfSBmcm9tICcuL2NvbnRhaW5lcic7XG5pbXBvcnQgeyBVSUluc3RhbmNlTWFuYWdlciB9IGZyb20gJy4uL3VpbWFuYWdlcic7XG5pbXBvcnQgeyBMYWJlbCwgTGFiZWxDb25maWcgfSBmcm9tICcuL2xhYmVsJztcbmltcG9ydCB7IENvbXBvbmVudENvbmZpZywgQ29tcG9uZW50IH0gZnJvbSAnLi9jb21wb25lbnQnO1xuaW1wb3J0IHsgQ29udHJvbEJhciB9IGZyb20gJy4vY29udHJvbGJhcic7XG5pbXBvcnQgeyBFdmVudERpc3BhdGNoZXIgfSBmcm9tICcuLi9ldmVudGRpc3BhdGNoZXInO1xuaW1wb3J0IHsgRE9NLCBTaXplIH0gZnJvbSAnLi4vZG9tJztcbmltcG9ydCB7IFBsYXllckFQSSwgU3VidGl0bGVDdWVFdmVudCB9IGZyb20gJ2JpdG1vdmluLXBsYXllcic7XG5pbXBvcnQgeyBpMThuIH0gZnJvbSAnLi4vbG9jYWxpemF0aW9uL2kxOG4nO1xuaW1wb3J0IHsgVnR0VXRpbHMgfSBmcm9tICcuLi92dHR1dGlscyc7XG5pbXBvcnQgeyBWVFRQcm9wZXJ0aWVzIH0gZnJvbSAnYml0bW92aW4tcGxheWVyL3R5cGVzL3N1YnRpdGxlcy92dHQvQVBJJztcblxuaW50ZXJmYWNlIFN1YnRpdGxlQ3JvcERldGVjdGlvblJlc3VsdCB7XG4gIHRvcDogYm9vbGVhbjtcbiAgcmlnaHQ6IGJvb2xlYW47XG4gIGJvdHRvbTogYm9vbGVhbjtcbiAgbGVmdDogYm9vbGVhbjtcbn1cblxuLyoqXG4gKiBPdmVybGF5cyB0aGUgcGxheWVyIHRvIGRpc3BsYXkgc3VidGl0bGVzLlxuICpcbiAqIEBjYXRlZ29yeSBDb21wb25lbnRzXG4gKi9cbmV4cG9ydCBjbGFzcyBTdWJ0aXRsZU92ZXJsYXkgZXh0ZW5kcyBDb250YWluZXI8Q29udGFpbmVyQ29uZmlnPiB7XG5cbiAgcHJpdmF0ZSBzdWJ0aXRsZU1hbmFnZXI6IEFjdGl2ZVN1YnRpdGxlTWFuYWdlcjtcbiAgcHJpdmF0ZSBwcmV2aWV3U3VidGl0bGVBY3RpdmU6IGJvb2xlYW47XG4gIHByaXZhdGUgcHJldmlld1N1YnRpdGxlOiBTdWJ0aXRsZUxhYmVsO1xuXG4gIHByaXZhdGUgcHJlcHJvY2Vzc0xhYmVsRXZlbnRDYWxsYmFjayA9IG5ldyBFdmVudERpc3BhdGNoZXI8U3VidGl0bGVDdWVFdmVudCwgU3VidGl0bGVMYWJlbD4oKTtcbiAgcHJpdmF0ZSBzdWJ0aXRsZUNvbnRhaW5lck1hbmFnZXI6IFN1YnRpdGxlUmVnaW9uQ29udGFpbmVyTWFuYWdlcjtcblxuICBwcml2YXRlIHN0YXRpYyByZWFkb25seSBDTEFTU19DT05UUk9MQkFSX1ZJU0lCTEUgPSAnY29udHJvbGJhci12aXNpYmxlJztcbiAgcHJpdmF0ZSBzdGF0aWMgcmVhZG9ubHkgQ0xBU1NfQ0VBXzYwOCA9ICdjZWE2MDgnO1xuXG4gIC8vIFRoZSBudW1iZXIgb2Ygcm93cyBpbiBhIGNlYTYwOCBncmlkXG4gIHByaXZhdGUgc3RhdGljIHJlYWRvbmx5IENFQTYwOF9OVU1fUk9XUyA9IDE1O1xuICAvLyBUaGUgbnVtYmVyIG9mIGNvbHVtbnMgaW4gYSBjZWE2MDggZ3JpZFxuICBwcml2YXRlIHN0YXRpYyByZWFkb25seSBDRUE2MDhfTlVNX0NPTFVNTlMgPSAzMjtcbiAgLy8gVGhlIG9mZnNldCBpbiBwZXJjZW50IGZvciBvbmUgcm93ICh3aGljaCBpcyBhbHNvIHRoZSBoZWlnaHQgb2YgYSByb3cpXG4gIHByaXZhdGUgc3RhdGljIHJlYWRvbmx5IENFQTYwOF9ST1dfT0ZGU0VUID0gMTAwIC8gU3VidGl0bGVPdmVybGF5LkNFQTYwOF9OVU1fUk9XUztcbiAgLy8gVGhlIG9mZnNldCBpbiBwZXJjZW50IGZvciBvbmUgY29sdW1uICh3aGljaCBpcyBhbHNvIHRoZSB3aWR0aCBvZiBhIGNvbHVtbilcbiAgcHJpdmF0ZSBzdGF0aWMgcmVhZG9ubHkgQ0VBNjA4X0NPTFVNTl9PRkZTRVQgPSAxMDAgLyBTdWJ0aXRsZU92ZXJsYXkuQ0VBNjA4X05VTV9DT0xVTU5TO1xuXG4gIGNvbnN0cnVjdG9yKGNvbmZpZzogQ29udGFpbmVyQ29uZmlnID0ge30pIHtcbiAgICBzdXBlcihjb25maWcpO1xuXG4gICAgdGhpcy5wcmV2aWV3U3VidGl0bGVBY3RpdmUgPSBmYWxzZTtcbiAgICB0aGlzLnByZXZpZXdTdWJ0aXRsZSA9IG5ldyBTdWJ0aXRsZUxhYmVsKHsgdGV4dDogaTE4bi5nZXRMb2NhbGl6ZXIoJ3N1YnRpdGxlLmV4YW1wbGUnKSB9KTtcblxuICAgIHRoaXMuY29uZmlnID0gdGhpcy5tZXJnZUNvbmZpZyhjb25maWcsIHtcbiAgICAgIGNzc0NsYXNzOiAndWktc3VidGl0bGUtb3ZlcmxheScsXG4gICAgfSwgdGhpcy5jb25maWcpO1xuICB9XG5cbiAgY29uZmlndXJlKHBsYXllcjogUGxheWVyQVBJLCB1aW1hbmFnZXI6IFVJSW5zdGFuY2VNYW5hZ2VyKTogdm9pZCB7XG4gICAgc3VwZXIuY29uZmlndXJlKHBsYXllciwgdWltYW5hZ2VyKTtcblxuICAgIGxldCBzdWJ0aXRsZU1hbmFnZXIgPSBuZXcgQWN0aXZlU3VidGl0bGVNYW5hZ2VyKCk7XG4gICAgdGhpcy5zdWJ0aXRsZU1hbmFnZXIgPSBzdWJ0aXRsZU1hbmFnZXI7XG5cbiAgICB0aGlzLnN1YnRpdGxlQ29udGFpbmVyTWFuYWdlciA9IG5ldyBTdWJ0aXRsZVJlZ2lvbkNvbnRhaW5lck1hbmFnZXIodGhpcyk7XG5cbiAgICBwbGF5ZXIub24ocGxheWVyLmV4cG9ydHMuUGxheWVyRXZlbnQuQ3VlRW50ZXIsIChldmVudDogU3VidGl0bGVDdWVFdmVudCkgPT4ge1xuICAgICAgY29uc3QgbGFiZWwgPSB0aGlzLmdlbmVyYXRlTGFiZWwoZXZlbnQpO1xuICAgICAgc3VidGl0bGVNYW5hZ2VyLmN1ZUVudGVyKGV2ZW50LCBsYWJlbCk7XG5cbiAgICAgIHRoaXMucHJlcHJvY2Vzc0xhYmVsRXZlbnRDYWxsYmFjay5kaXNwYXRjaChldmVudCwgbGFiZWwpO1xuXG4gICAgICBpZiAodGhpcy5wcmV2aWV3U3VidGl0bGVBY3RpdmUpIHtcbiAgICAgICAgdGhpcy5zdWJ0aXRsZUNvbnRhaW5lck1hbmFnZXIucmVtb3ZlTGFiZWwodGhpcy5wcmV2aWV3U3VidGl0bGUpO1xuICAgICAgfVxuXG4gICAgICB0aGlzLnNob3coKTtcblxuICAgICAgdGhpcy5zdWJ0aXRsZUNvbnRhaW5lck1hbmFnZXIuYWRkTGFiZWwobGFiZWwsIHRoaXMuZ2V0RG9tRWxlbWVudCgpLnNpemUoKSk7XG4gICAgICB0aGlzLnVwZGF0ZUNvbXBvbmVudHMoKTtcblxuICAgICAgaWYgKHVpbWFuYWdlci5nZXRDb25maWcoKS5mb3JjZVN1YnRpdGxlc0ludG9WaWV3Q29udGFpbmVyKSB7XG4gICAgICAgIHRoaXMuaGFuZGxlU3VidGl0bGVDcm9wcGluZyhsYWJlbCk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBwbGF5ZXIub24ocGxheWVyLmV4cG9ydHMuUGxheWVyRXZlbnQuQ3VlVXBkYXRlLCAoZXZlbnQ6IFN1YnRpdGxlQ3VlRXZlbnQpID0+IHtcbiAgICAgIGNvbnN0IGxhYmVsID0gdGhpcy5nZW5lcmF0ZUxhYmVsKGV2ZW50KTtcbiAgICAgIGNvbnN0IGxhYmVsVG9SZXBsYWNlID0gc3VidGl0bGVNYW5hZ2VyLmN1ZVVwZGF0ZShldmVudCwgbGFiZWwpO1xuXG4gICAgICB0aGlzLnByZXByb2Nlc3NMYWJlbEV2ZW50Q2FsbGJhY2suZGlzcGF0Y2goZXZlbnQsIGxhYmVsKTtcblxuICAgICAgaWYgKGxhYmVsVG9SZXBsYWNlKSB7XG4gICAgICAgIHRoaXMuc3VidGl0bGVDb250YWluZXJNYW5hZ2VyLnJlcGxhY2VMYWJlbChsYWJlbFRvUmVwbGFjZSwgbGFiZWwpO1xuICAgICAgfVxuXG4gICAgICBpZiAodWltYW5hZ2VyLmdldENvbmZpZygpLmZvcmNlU3VidGl0bGVzSW50b1ZpZXdDb250YWluZXIpIHtcbiAgICAgICAgdGhpcy5oYW5kbGVTdWJ0aXRsZUNyb3BwaW5nKGxhYmVsKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHBsYXllci5vbihwbGF5ZXIuZXhwb3J0cy5QbGF5ZXJFdmVudC5DdWVFeGl0LCAoZXZlbnQ6IFN1YnRpdGxlQ3VlRXZlbnQpID0+IHtcbiAgICAgIGxldCBsYWJlbFRvUmVtb3ZlID0gc3VidGl0bGVNYW5hZ2VyLmN1ZUV4aXQoZXZlbnQpO1xuXG4gICAgICBpZiAobGFiZWxUb1JlbW92ZSkge1xuICAgICAgICB0aGlzLnN1YnRpdGxlQ29udGFpbmVyTWFuYWdlci5yZW1vdmVMYWJlbChsYWJlbFRvUmVtb3ZlKTtcbiAgICAgICAgdGhpcy51cGRhdGVDb21wb25lbnRzKCk7XG4gICAgICB9XG5cbiAgICAgIGlmICghc3VidGl0bGVNYW5hZ2VyLmhhc0N1ZXMpIHtcbiAgICAgICAgaWYgKCF0aGlzLnByZXZpZXdTdWJ0aXRsZUFjdGl2ZSkge1xuICAgICAgICAgIHRoaXMuaGlkZSgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMuc3VidGl0bGVDb250YWluZXJNYW5hZ2VyLmFkZExhYmVsKHRoaXMucHJldmlld1N1YnRpdGxlKTtcbiAgICAgICAgICB0aGlzLnVwZGF0ZUNvbXBvbmVudHMoKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuXG4gICAgbGV0IHN1YnRpdGxlQ2xlYXJIYW5kbGVyID0gKCkgPT4ge1xuICAgICAgdGhpcy5oaWRlKCk7XG4gICAgICB0aGlzLnN1YnRpdGxlQ29udGFpbmVyTWFuYWdlci5jbGVhcigpO1xuICAgICAgc3VidGl0bGVNYW5hZ2VyLmNsZWFyKCk7XG4gICAgICB0aGlzLnJlbW92ZUNvbXBvbmVudHMoKTtcbiAgICAgIHRoaXMudXBkYXRlQ29tcG9uZW50cygpO1xuICAgIH07XG5cbiAgICBjb25zdCBjbGVhckluYWN0aXZlQ3VlcyA9ICgpID0+IHtcbiAgICAgIGNvbnN0IHJlbW92ZWRBY3RpdmVDdWVzID0gc3VidGl0bGVNYW5hZ2VyLmNsZWFySW5hY3RpdmVDdWVzKHBsYXllci5nZXRDdXJyZW50VGltZSgpKTtcbiAgICAgIHJlbW92ZWRBY3RpdmVDdWVzLmZvckVhY2godG9SZW1vdmUgPT4ge1xuICAgICAgICB0aGlzLnN1YnRpdGxlQ29udGFpbmVyTWFuYWdlci5yZW1vdmVMYWJlbCh0b1JlbW92ZS5sYWJlbCk7XG4gICAgICB9KTtcbiAgICB9O1xuXG4gICAgcGxheWVyLm9uKHBsYXllci5leHBvcnRzLlBsYXllckV2ZW50LkF1ZGlvQ2hhbmdlZCwgc3VidGl0bGVDbGVhckhhbmRsZXIpO1xuICAgIHBsYXllci5vbihwbGF5ZXIuZXhwb3J0cy5QbGF5ZXJFdmVudC5TdWJ0aXRsZURpc2FibGVkLCBzdWJ0aXRsZUNsZWFySGFuZGxlcik7XG4gICAgcGxheWVyLm9uKHBsYXllci5leHBvcnRzLlBsYXllckV2ZW50LlNlZWtlZCwgY2xlYXJJbmFjdGl2ZUN1ZXMpO1xuICAgIHBsYXllci5vbihwbGF5ZXIuZXhwb3J0cy5QbGF5ZXJFdmVudC5UaW1lU2hpZnRlZCwgY2xlYXJJbmFjdGl2ZUN1ZXMpO1xuICAgIHBsYXllci5vbihwbGF5ZXIuZXhwb3J0cy5QbGF5ZXJFdmVudC5QbGF5YmFja0ZpbmlzaGVkLCBzdWJ0aXRsZUNsZWFySGFuZGxlcik7XG4gICAgcGxheWVyLm9uKHBsYXllci5leHBvcnRzLlBsYXllckV2ZW50LlNvdXJjZVVubG9hZGVkLCBzdWJ0aXRsZUNsZWFySGFuZGxlcik7XG5cbiAgICB1aW1hbmFnZXIub25Db21wb25lbnRTaG93LnN1YnNjcmliZSgoY29tcG9uZW50OiBDb21wb25lbnQ8Q29tcG9uZW50Q29uZmlnPikgPT4ge1xuICAgICAgaWYgKGNvbXBvbmVudCBpbnN0YW5jZW9mIENvbnRyb2xCYXIpIHtcbiAgICAgICAgdGhpcy5nZXREb21FbGVtZW50KCkuYWRkQ2xhc3ModGhpcy5wcmVmaXhDc3MoU3VidGl0bGVPdmVybGF5LkNMQVNTX0NPTlRST0xCQVJfVklTSUJMRSkpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHVpbWFuYWdlci5vbkNvbXBvbmVudEhpZGUuc3Vic2NyaWJlKChjb21wb25lbnQ6IENvbXBvbmVudDxDb21wb25lbnRDb25maWc+KSA9PiB7XG4gICAgICBpZiAoY29tcG9uZW50IGluc3RhbmNlb2YgQ29udHJvbEJhcikge1xuICAgICAgICB0aGlzLmdldERvbUVsZW1lbnQoKS5yZW1vdmVDbGFzcyh0aGlzLnByZWZpeENzcyhTdWJ0aXRsZU92ZXJsYXkuQ0xBU1NfQ09OVFJPTEJBUl9WSVNJQkxFKSk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICB0aGlzLmNvbmZpZ3VyZUNlYTYwOENhcHRpb25zKHBsYXllciwgdWltYW5hZ2VyKTtcbiAgICAvLyBJbml0XG4gICAgc3VidGl0bGVDbGVhckhhbmRsZXIoKTtcbiAgfVxuXG4gIGRldGVjdENyb3BwZWRTdWJ0aXRsZUxhYmVsKFxuICAgIGxhYmVsRWxlbWVudDogSFRNTEVsZW1lbnQsXG4gICk6IFN1YnRpdGxlQ3JvcERldGVjdGlvblJlc3VsdCB7XG4gICAgY29uc3QgcGFyZW50ID0gdGhpcy5nZXREb21FbGVtZW50KCkuZ2V0KDApO1xuXG4gICAgY29uc3QgY2hpbGRSZWN0ID0gbGFiZWxFbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgIGNvbnN0IHBhcmVudFJlY3QgPSBwYXJlbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgdG9wOiBjaGlsZFJlY3QudG9wIDwgcGFyZW50UmVjdC50b3AsXG4gICAgICByaWdodDogY2hpbGRSZWN0LnJpZ2h0ID4gcGFyZW50UmVjdC5yaWdodCxcbiAgICAgIGJvdHRvbTogY2hpbGRSZWN0LmJvdHRvbSA+IHBhcmVudFJlY3QuYm90dG9tLFxuICAgICAgbGVmdDogY2hpbGRSZWN0LmxlZnQgPCBwYXJlbnRSZWN0LmxlZnQsXG4gICAgfTtcbiAgfVxuXG4gIGhhbmRsZVN1YnRpdGxlQ3JvcHBpbmcobGFiZWw6IFN1YnRpdGxlTGFiZWwpIHtcbiAgICBjb25zdCBsYWJlbERvbUVsZW1lbnQgPSBsYWJlbC5nZXREb21FbGVtZW50KCk7XG4gICAgY29uc3QgY3JvcERldGVjdGlvbiA9IHRoaXMuZGV0ZWN0Q3JvcHBlZFN1YnRpdGxlTGFiZWwoXG4gICAgICBsYWJlbERvbUVsZW1lbnQuZ2V0KDApLFxuICAgICk7XG5cbiAgICBpZiAoY3JvcERldGVjdGlvbi50b3ApIHtcbiAgICAgIGxhYmVsRG9tRWxlbWVudC5jc3MoJ3RvcCcsICcwJyk7XG4gICAgICBsYWJlbERvbUVsZW1lbnQucmVtb3ZlQ3NzKCdib3R0b20nKTtcbiAgICB9XG5cbiAgICBpZiAoY3JvcERldGVjdGlvbi5yaWdodCkge1xuICAgICAgbGFiZWxEb21FbGVtZW50LmNzcygncmlnaHQnLCAnMCcpO1xuICAgICAgbGFiZWxEb21FbGVtZW50LnJlbW92ZUNzcygnbGVmdCcpO1xuICAgIH1cblxuICAgIGlmIChjcm9wRGV0ZWN0aW9uLmJvdHRvbSkge1xuICAgICAgbGFiZWxEb21FbGVtZW50LmNzcygnYm90dG9tJywgJzAnKTtcbiAgICAgIGxhYmVsRG9tRWxlbWVudC5yZW1vdmVDc3MoJ3RvcCcpO1xuICAgIH1cblxuICAgIGlmIChjcm9wRGV0ZWN0aW9uLmxlZnQpIHtcbiAgICAgIGxhYmVsRG9tRWxlbWVudC5jc3MoJ2xlZnQnLCAnMCcpO1xuICAgICAgbGFiZWxEb21FbGVtZW50LnJlbW92ZUNzcygncmlnaHQnKTtcbiAgICB9XG4gIH1cblxuICBnZW5lcmF0ZUxhYmVsKGV2ZW50OiBTdWJ0aXRsZUN1ZUV2ZW50KTogU3VidGl0bGVMYWJlbCB7XG4gICAgLy8gU2FuaXRpemUgY3VlIGRhdGEgKG11c3QgYmUgZG9uZSBiZWZvcmUgdGhlIGN1ZSBJRCBpcyBnZW5lcmF0ZWQgaW4gc3VidGl0bGVNYW5hZ2VyLmN1ZUVudGVyIC8gdXBkYXRlKVxuICAgIGlmIChldmVudC5wb3NpdGlvbikge1xuICAgICAgLy8gU29tZXRpbWVzIHRoZSBwb3NpdGlvbnMgYXJlIHVuZGVmaW5lZCwgd2UgYXNzdW1lIHRoZW0gdG8gYmUgemVyb1xuICAgICAgZXZlbnQucG9zaXRpb24ucm93ID0gZXZlbnQucG9zaXRpb24ucm93IHx8IDA7XG4gICAgICBldmVudC5wb3NpdGlvbi5jb2x1bW4gPSBldmVudC5wb3NpdGlvbi5jb2x1bW4gfHwgMDtcbiAgICB9XG5cbiAgICBjb25zdCBsYWJlbCA9IG5ldyBTdWJ0aXRsZUxhYmVsKHtcbiAgICAgIC8vIFByZWZlciB0aGUgSFRNTCBzdWJ0aXRsZSB0ZXh0IGlmIHNldCwgZWxzZSB0cnkgZ2VuZXJhdGluZyBhIGltYWdlIHRhZyBhcyBzdHJpbmcgZnJvbSB0aGUgaW1hZ2UgYXR0cmlidXRlLFxuICAgICAgLy8gZWxzZSB1c2UgdGhlIHBsYWluIHRleHRcbiAgICAgIHRleHQ6IGV2ZW50Lmh0bWwgfHwgQWN0aXZlU3VidGl0bGVNYW5hZ2VyLmdlbmVyYXRlSW1hZ2VUYWdUZXh0KGV2ZW50LmltYWdlKSB8fCBldmVudC50ZXh0LFxuICAgICAgdnR0OiBldmVudC52dHQsXG4gICAgICByZWdpb246IGV2ZW50LnJlZ2lvbixcbiAgICAgIHJlZ2lvblN0eWxlOiBldmVudC5yZWdpb25TdHlsZSxcbiAgICB9KTtcblxuICAgIHJldHVybiBsYWJlbDtcbiAgfVxuXG4gIGNvbmZpZ3VyZUNlYTYwOENhcHRpb25zKHBsYXllcjogUGxheWVyQVBJLCB1aW1hbmFnZXI6IFVJSW5zdGFuY2VNYW5hZ2VyKTogdm9pZCB7XG4gICAgLy8gVGhlIGNhbGN1bGF0ZWQgZm9udCBzaXplXG4gICAgbGV0IGZvbnRTaXplID0gMDtcbiAgICAvLyBUaGUgcmVxdWlyZWQgbGV0dGVyIHNwYWNpbmcgc3ByZWFkIHRoZSB0ZXh0IGNoYXJhY3RlcnMgZXZlbmx5IGFjcm9zcyB0aGUgZ3JpZFxuICAgIGxldCBmb250TGV0dGVyU3BhY2luZyA9IDA7XG4gICAgLy8gRmxhZyB0ZWxsaW5nIGlmIGEgZm9udCBzaXplIGNhbGN1bGF0aW9uIGlzIHJlcXVpcmVkIG9mIGlmIHRoZSBjdXJyZW50IHZhbHVlcyBhcmUgdmFsaWRcbiAgICBsZXQgZm9udFNpemVDYWxjdWxhdGlvblJlcXVpcmVkID0gdHJ1ZTtcbiAgICAvLyBGbGFnIHRlbGxpbmcgaWYgdGhlIENFQS02MDggbW9kZSBpcyBlbmFibGVkXG4gICAgbGV0IGVuYWJsZWQgPSBmYWxzZTtcblxuICAgIGNvbnN0IHVwZGF0ZUNFQTYwOEZvbnRTaXplID0gKCkgPT4ge1xuICAgICAgY29uc3QgZHVtbXlMYWJlbCA9IG5ldyBTdWJ0aXRsZUxhYmVsKHsgdGV4dDogJ1gnIH0pO1xuICAgICAgZHVtbXlMYWJlbC5nZXREb21FbGVtZW50KCkuY3NzKHtcbiAgICAgICAgLy8gQnkgdXNpbmcgYSBsYXJnZSBmb250IHNpemUgd2UgZG8gbm90IG5lZWQgdG8gdXNlIG11bHRpcGxlIGxldHRlcnMgYW5kIGNhbiBnZXQgc3RpbGwgYW5cbiAgICAgICAgLy8gYWNjdXJhdGUgbWVhc3VyZW1lbnQgZXZlbiB0aG91Z2ggdGhlIHJldHVybmVkIHNpemUgaXMgYW4gaW50ZWdlciB2YWx1ZVxuICAgICAgICAnZm9udC1zaXplJzogJzIwMHB4JyxcbiAgICAgICAgJ2xpbmUtaGVpZ2h0JzogJzIwMHB4JyxcbiAgICAgICAgJ3Zpc2liaWxpdHknOiAnaGlkZGVuJyxcbiAgICAgIH0pO1xuICAgICAgdGhpcy5hZGRDb21wb25lbnQoZHVtbXlMYWJlbCk7XG4gICAgICB0aGlzLnVwZGF0ZUNvbXBvbmVudHMoKTtcbiAgICAgIHRoaXMuc2hvdygpO1xuXG4gICAgICBjb25zdCBkdW1teUxhYmVsQ2hhcldpZHRoID0gZHVtbXlMYWJlbC5nZXREb21FbGVtZW50KCkud2lkdGgoKTtcbiAgICAgIGNvbnN0IGR1bW15TGFiZWxDaGFySGVpZ2h0ID0gZHVtbXlMYWJlbC5nZXREb21FbGVtZW50KCkuaGVpZ2h0KCk7XG4gICAgICBjb25zdCBmb250U2l6ZVJhdGlvID0gZHVtbXlMYWJlbENoYXJXaWR0aCAvIGR1bW15TGFiZWxDaGFySGVpZ2h0O1xuXG4gICAgICB0aGlzLnJlbW92ZUNvbXBvbmVudChkdW1teUxhYmVsKTtcbiAgICAgIHRoaXMudXBkYXRlQ29tcG9uZW50cygpO1xuICAgICAgaWYgKCF0aGlzLnN1YnRpdGxlTWFuYWdlci5oYXNDdWVzKSB7XG4gICAgICAgIHRoaXMuaGlkZSgpO1xuICAgICAgfVxuXG4gICAgICAvLyBXZSBzdWJ0cmFjdCAxcHggaGVyZSB0byBhdm9pZCBsaW5lIGJyZWFrcyBhdCB0aGUgcmlnaHQgYm9yZGVyIG9mIHRoZSBzdWJ0aXRsZSBvdmVybGF5IHRoYXQgY2FuIGhhcHBlblxuICAgICAgLy8gd2hlbiB0ZXh0cyBjb250YWluIHdoaXRlc3BhY2VzLiBJdCdzIHByb2JhYmx5IHNvbWUga2luZCBvZiBwaXhlbCByb3VuZGluZyBpc3N1ZSBpbiB0aGUgYnJvd3NlcidzXG4gICAgICAvLyBsYXlvdXRpbmcsIGJ1dCB0aGUgYWN0dWFsIHJlYXNvbiBjb3VsZCBub3QgYmUgZGV0ZXJtaW5lZC4gQWltaW5nIGZvciBhIHRhcmdldCB3aWR0aCAtIDFweCB3b3VsZCB3b3JrIGluXG4gICAgICAvLyBtb3N0IGJyb3dzZXJzLCBidXQgU2FmYXJpIGhhcyBhIFwicXVhbnRpemVkXCIgZm9udCBzaXplIHJlbmRlcmluZyB3aXRoIGh1Z2Ugc3RlcHMgaW4gYmV0d2VlbiBzbyB3ZSBuZWVkXG4gICAgICAvLyB0byBzdWJ0cmFjdCBzb21lIG1vcmUgcGl4ZWxzIHRvIGF2b2lkIGxpbmUgYnJlYWtzIHRoZXJlIGFzIHdlbGwuXG4gICAgICBjb25zdCBzdWJ0aXRsZU92ZXJsYXlXaWR0aCA9IHRoaXMuZ2V0RG9tRWxlbWVudCgpLndpZHRoKCkgLSAxMDtcbiAgICAgIGNvbnN0IHN1YnRpdGxlT3ZlcmxheUhlaWdodCA9IHRoaXMuZ2V0RG9tRWxlbWVudCgpLmhlaWdodCgpO1xuXG4gICAgICAvLyBUaGUgc2l6ZSByYXRpbyBvZiB0aGUgbGV0dGVyIGdyaWRcbiAgICAgIGNvbnN0IGZvbnRHcmlkU2l6ZVJhdGlvID0gKGR1bW15TGFiZWxDaGFyV2lkdGggKiBTdWJ0aXRsZU92ZXJsYXkuQ0VBNjA4X05VTV9DT0xVTU5TKSAvXG4gICAgICAgIChkdW1teUxhYmVsQ2hhckhlaWdodCAqIFN1YnRpdGxlT3ZlcmxheS5DRUE2MDhfTlVNX1JPV1MpO1xuICAgICAgLy8gVGhlIHNpemUgcmF0aW8gb2YgdGhlIGF2YWlsYWJsZSBzcGFjZSBmb3IgdGhlIGdyaWRcbiAgICAgIGNvbnN0IHN1YnRpdGxlT3ZlcmxheVNpemVSYXRpbyA9IHN1YnRpdGxlT3ZlcmxheVdpZHRoIC8gc3VidGl0bGVPdmVybGF5SGVpZ2h0O1xuXG4gICAgICBpZiAoc3VidGl0bGVPdmVybGF5U2l6ZVJhdGlvID4gZm9udEdyaWRTaXplUmF0aW8pIHtcbiAgICAgICAgLy8gV2hlbiB0aGUgYXZhaWxhYmxlIHNwYWNlIGlzIHdpZGVyIHRoYW4gdGhlIHRleHQgZ3JpZCwgdGhlIGZvbnQgc2l6ZSBpcyBzaW1wbHlcbiAgICAgICAgLy8gZGV0ZXJtaW5lZCBieSB0aGUgaGVpZ2h0IG9mIHRoZSBhdmFpbGFibGUgc3BhY2UuXG4gICAgICAgIGZvbnRTaXplID0gc3VidGl0bGVPdmVybGF5SGVpZ2h0IC8gU3VidGl0bGVPdmVybGF5LkNFQTYwOF9OVU1fUk9XUztcblxuICAgICAgICAvLyBDYWxjdWxhdGUgdGhlIGFkZGl0aW9uYWwgbGV0dGVyIHNwYWNpbmcgcmVxdWlyZWQgdG8gZXZlbmx5IHNwcmVhZCB0aGUgdGV4dCBhY3Jvc3MgdGhlIGdyaWQncyB3aWR0aFxuICAgICAgICBjb25zdCBncmlkU2xvdFdpZHRoID0gc3VidGl0bGVPdmVybGF5V2lkdGggLyBTdWJ0aXRsZU92ZXJsYXkuQ0VBNjA4X05VTV9DT0xVTU5TO1xuICAgICAgICBjb25zdCBmb250Q2hhcldpZHRoID0gZm9udFNpemUgKiBmb250U2l6ZVJhdGlvO1xuICAgICAgICBmb250TGV0dGVyU3BhY2luZyA9IGdyaWRTbG90V2lkdGggLSBmb250Q2hhcldpZHRoO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gV2hlbiB0aGUgYXZhaWxhYmxlIHNwYWNlIGlzIG5vdCB3aWRlIGVub3VnaCwgdGV4dHMgd291bGQgdmVydGljYWxseSBvdmVybGFwIGlmIHdlIHRha2VcbiAgICAgICAgLy8gdGhlIGhlaWdodCBhcyBhIGJhc2UgZm9yIHRoZSBmb250IHNpemUsIHNvIHdlIG5lZWQgdG8gbGltaXQgdGhlIGhlaWdodC4gV2UgZG8gdGhhdFxuICAgICAgICAvLyBieSBkZXRlcm1pbmluZyB0aGUgZm9udCBzaXplIGJ5IHRoZSB3aWR0aCBvZiB0aGUgYXZhaWxhYmxlIHNwYWNlLlxuICAgICAgICBmb250U2l6ZSA9IHN1YnRpdGxlT3ZlcmxheVdpZHRoIC8gU3VidGl0bGVPdmVybGF5LkNFQTYwOF9OVU1fQ09MVU1OUyAvIGZvbnRTaXplUmF0aW87XG4gICAgICAgIGZvbnRMZXR0ZXJTcGFjaW5nID0gMDtcbiAgICAgIH1cblxuICAgICAgLy8gVXBkYXRlIGZvbnQtc2l6ZSBvZiBhbGwgYWN0aXZlIHN1YnRpdGxlIGxhYmVsc1xuICAgICAgZm9yIChsZXQgbGFiZWwgb2YgdGhpcy5nZXRDb21wb25lbnRzKCkpIHtcbiAgICAgICAgaWYgKGxhYmVsIGluc3RhbmNlb2YgU3VidGl0bGVMYWJlbCkge1xuICAgICAgICAgIGxhYmVsLmdldERvbUVsZW1lbnQoKS5jc3Moe1xuICAgICAgICAgICAgJ2ZvbnQtc2l6ZSc6IGAke2ZvbnRTaXplfXB4YCxcbiAgICAgICAgICAgICdsZXR0ZXItc3BhY2luZyc6IGAke2ZvbnRMZXR0ZXJTcGFjaW5nfXB4YCxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG5cbiAgICBwbGF5ZXIub24ocGxheWVyLmV4cG9ydHMuUGxheWVyRXZlbnQuUGxheWVyUmVzaXplZCwgKCkgPT4ge1xuICAgICAgaWYgKGVuYWJsZWQpIHtcbiAgICAgICAgdXBkYXRlQ0VBNjA4Rm9udFNpemUoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGZvbnRTaXplQ2FsY3VsYXRpb25SZXF1aXJlZCA9IHRydWU7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICB0aGlzLnByZXByb2Nlc3NMYWJlbEV2ZW50Q2FsbGJhY2suc3Vic2NyaWJlKChldmVudDogU3VidGl0bGVDdWVFdmVudCwgbGFiZWw6IFN1YnRpdGxlTGFiZWwpID0+IHtcbiAgICAgIGNvbnN0IGlzQ0VBNjA4ID0gZXZlbnQucG9zaXRpb24gIT0gbnVsbDtcbiAgICAgIGlmICghaXNDRUE2MDgpIHtcbiAgICAgICAgLy8gU2tpcCBhbGwgbm9uLUNFQTYwOCBjdWVzXG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgaWYgKCFlbmFibGVkKSB7XG4gICAgICAgIGVuYWJsZWQgPSB0cnVlO1xuICAgICAgICB0aGlzLmdldERvbUVsZW1lbnQoKS5hZGRDbGFzcyh0aGlzLnByZWZpeENzcyhTdWJ0aXRsZU92ZXJsYXkuQ0xBU1NfQ0VBXzYwOCkpO1xuXG4gICAgICAgIC8vIFdlIGNvbmRpdGlvbmFsbHkgdXBkYXRlIHRoZSBmb250IHNpemUgYnkgdGhpcyBmbGFnIGhlcmUgdG8gYXZvaWQgdXBkYXRpbmcgZXZlcnkgdGltZSBhIHN1YnRpdGxlXG4gICAgICAgIC8vIGlzIGFkZGVkIGludG8gYW4gZW1wdHkgb3ZlcmxheS4gQmVjYXVzZSB3ZSByZXNldCB0aGUgb3ZlcmxheSB3aGVuIGFsbCBzdWJ0aXRsZXMgYXJlIGdvbmUsIHRoaXNcbiAgICAgICAgLy8gd291bGQgdHJpZ2dlciBhbiB1bm5lY2Vzc2FyeSB1cGRhdGUgZXZlcnkgdGltZSwgYnV0IGl0J3Mgb25seSByZXF1aXJlZCB1bmRlciBjZXJ0YWluIGNvbmRpdGlvbnMsXG4gICAgICAgIC8vIGUuZy4gYWZ0ZXIgdGhlIHBsYXllciBzaXplIGhhcyBjaGFuZ2VkLlxuICAgICAgICBpZiAoZm9udFNpemVDYWxjdWxhdGlvblJlcXVpcmVkKSB7XG4gICAgICAgICAgdXBkYXRlQ0VBNjA4Rm9udFNpemUoKTtcbiAgICAgICAgICBmb250U2l6ZUNhbGN1bGF0aW9uUmVxdWlyZWQgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBsYWJlbC5nZXREb21FbGVtZW50KCkuY3NzKHtcbiAgICAgICAgJ2xlZnQnOiBgJHtldmVudC5wb3NpdGlvbi5jb2x1bW4gKiBTdWJ0aXRsZU92ZXJsYXkuQ0VBNjA4X0NPTFVNTl9PRkZTRVR9JWAsXG4gICAgICAgICd0b3AnOiBgJHtldmVudC5wb3NpdGlvbi5yb3cgKiBTdWJ0aXRsZU92ZXJsYXkuQ0VBNjA4X1JPV19PRkZTRVR9JWAsXG4gICAgICAgICdmb250LXNpemUnOiBgJHtmb250U2l6ZX1weGAsXG4gICAgICAgICdsZXR0ZXItc3BhY2luZyc6IGAke2ZvbnRMZXR0ZXJTcGFjaW5nfXB4YCxcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgY29uc3QgcmVzZXQgPSAoKSA9PiB7XG4gICAgICB0aGlzLmdldERvbUVsZW1lbnQoKS5yZW1vdmVDbGFzcyh0aGlzLnByZWZpeENzcyhTdWJ0aXRsZU92ZXJsYXkuQ0xBU1NfQ0VBXzYwOCkpO1xuICAgICAgZW5hYmxlZCA9IGZhbHNlO1xuICAgIH07XG5cbiAgICBwbGF5ZXIub24ocGxheWVyLmV4cG9ydHMuUGxheWVyRXZlbnQuQ3VlRXhpdCwgKCkgPT4ge1xuICAgICAgaWYgKCF0aGlzLnN1YnRpdGxlTWFuYWdlci5oYXNDdWVzKSB7XG4gICAgICAgIC8vIERpc2FibGUgQ0VBLTYwOCBtb2RlIHdoZW4gYWxsIHN1YnRpdGxlcyBhcmUgZ29uZSAodG8gYWxsb3cgY29ycmVjdCBmb3JtYXR0aW5nIGFuZFxuICAgICAgICAvLyBkaXNwbGF5IG9mIG90aGVyIHR5cGVzIG9mIHN1YnRpdGxlcywgZS5nLiB0aGUgZm9ybWF0dGluZyBwcmV2aWV3IHN1YnRpdGxlKVxuICAgICAgICByZXNldCgpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgcGxheWVyLm9uKHBsYXllci5leHBvcnRzLlBsYXllckV2ZW50LlNvdXJjZVVubG9hZGVkLCByZXNldCk7XG4gICAgcGxheWVyLm9uKHBsYXllci5leHBvcnRzLlBsYXllckV2ZW50LlN1YnRpdGxlRW5hYmxlZCwgcmVzZXQpO1xuICAgIHBsYXllci5vbihwbGF5ZXIuZXhwb3J0cy5QbGF5ZXJFdmVudC5TdWJ0aXRsZURpc2FibGVkLCByZXNldCk7XG4gIH1cblxuICBlbmFibGVQcmV2aWV3U3VidGl0bGVMYWJlbCgpOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMuc3VidGl0bGVNYW5hZ2VyLmhhc0N1ZXMpIHtcbiAgICAgIHRoaXMucHJldmlld1N1YnRpdGxlQWN0aXZlID0gdHJ1ZTtcbiAgICAgIHRoaXMuc3VidGl0bGVDb250YWluZXJNYW5hZ2VyLmFkZExhYmVsKHRoaXMucHJldmlld1N1YnRpdGxlKTtcbiAgICAgIHRoaXMudXBkYXRlQ29tcG9uZW50cygpO1xuICAgICAgdGhpcy5zaG93KCk7XG4gICAgfVxuICB9XG5cbiAgcmVtb3ZlUHJldmlld1N1YnRpdGxlTGFiZWwoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMucHJldmlld1N1YnRpdGxlQWN0aXZlKSB7XG4gICAgICB0aGlzLnByZXZpZXdTdWJ0aXRsZUFjdGl2ZSA9IGZhbHNlO1xuICAgICAgdGhpcy5zdWJ0aXRsZUNvbnRhaW5lck1hbmFnZXIucmVtb3ZlTGFiZWwodGhpcy5wcmV2aWV3U3VidGl0bGUpO1xuICAgICAgdGhpcy51cGRhdGVDb21wb25lbnRzKCk7XG4gICAgfVxuICB9XG59XG5cbmludGVyZmFjZSBBY3RpdmVTdWJ0aXRsZUN1ZSB7XG4gIGV2ZW50OiBTdWJ0aXRsZUN1ZUV2ZW50O1xuICBsYWJlbDogU3VidGl0bGVMYWJlbDtcbn1cblxuaW50ZXJmYWNlIEFjdGl2ZVN1YnRpdGxlQ3VlTWFwIHtcbiAgW2lkOiBzdHJpbmddOiBBY3RpdmVTdWJ0aXRsZUN1ZVtdO1xufVxuXG5pbnRlcmZhY2UgU3VidGl0bGVMYWJlbENvbmZpZyBleHRlbmRzIExhYmVsQ29uZmlnIHtcbiAgdnR0PzogVlRUUHJvcGVydGllcztcbiAgcmVnaW9uPzogc3RyaW5nO1xuICByZWdpb25TdHlsZT86IHN0cmluZztcbn1cblxuZXhwb3J0IGNsYXNzIFN1YnRpdGxlTGFiZWwgZXh0ZW5kcyBMYWJlbDxTdWJ0aXRsZUxhYmVsQ29uZmlnPiB7XG5cbiAgY29uc3RydWN0b3IoY29uZmlnOiBTdWJ0aXRsZUxhYmVsQ29uZmlnID0ge30pIHtcbiAgICBzdXBlcihjb25maWcpO1xuXG4gICAgdGhpcy5jb25maWcgPSB0aGlzLm1lcmdlQ29uZmlnKGNvbmZpZywge1xuICAgICAgY3NzQ2xhc3M6ICd1aS1zdWJ0aXRsZS1sYWJlbCcsXG4gICAgfSwgdGhpcy5jb25maWcpO1xuICB9XG5cbiAgZ2V0IHZ0dCgpOiBWVFRQcm9wZXJ0aWVzIHtcbiAgICByZXR1cm4gdGhpcy5jb25maWcudnR0O1xuICB9XG5cbiAgZ2V0IHJlZ2lvbigpOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLmNvbmZpZy5yZWdpb247XG4gIH1cblxuICBnZXQgcmVnaW9uU3R5bGUoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gdGhpcy5jb25maWcucmVnaW9uU3R5bGU7XG4gIH1cbn1cblxuY2xhc3MgQWN0aXZlU3VidGl0bGVNYW5hZ2VyIHtcblxuICBwcml2YXRlIGFjdGl2ZVN1YnRpdGxlQ3VlTWFwOiBBY3RpdmVTdWJ0aXRsZUN1ZU1hcDtcbiAgcHJpdmF0ZSBhY3RpdmVTdWJ0aXRsZUN1ZUNvdW50OiBudW1iZXI7XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5hY3RpdmVTdWJ0aXRsZUN1ZU1hcCA9IHt9O1xuICAgIHRoaXMuYWN0aXZlU3VidGl0bGVDdWVDb3VudCA9IDA7XG4gIH1cblxuICAvKipcbiAgICogQ2FsY3VsYXRlcyBhIHVuaXF1ZSBJRCBmb3IgYSBzdWJ0aXRsZSBjdWUsIHdoaWNoIGlzIG5lZWRlZCB0byBhc3NvY2lhdGUgYW4gQ3VlRW50ZXIgd2l0aCBpdHMgQ3VlRXhpdFxuICAgKiBldmVudCBzbyB3ZSBjYW4gcmVtb3ZlIHRoZSBjb3JyZWN0IHN1YnRpdGxlIGluIEN1ZUV4aXQgd2hlbiBtdWx0aXBsZSBzdWJ0aXRsZXMgYXJlIGFjdGl2ZSBhdCB0aGUgc2FtZSB0aW1lLlxuICAgKiBUaGUgc3RhcnQgdGltZSBwbHVzIHRoZSB0ZXh0IHNob3VsZCBtYWtlIGEgdW5pcXVlIGlkZW50aWZpZXIsIGFuZCBpbiB0aGUgb25seSBjYXNlIHdoZXJlIGEgY29sbGlzaW9uXG4gICAqIGNhbiBoYXBwZW4sIHR3byBzaW1pbGFyIHRleHRzIHdpbGwgYmUgZGlzcGxheWVkIGF0IGEgc2ltaWxhciB0aW1lIGFuZCBhIHNpbWlsYXIgcG9zaXRpb24gKG9yIHdpdGhvdXQgcG9zaXRpb24pLlxuICAgKiBUaGUgc3RhcnQgdGltZSBzaG91bGQgYWx3YXlzIGJlIGtub3duLCBiZWNhdXNlIGl0IGlzIHJlcXVpcmVkIHRvIHNjaGVkdWxlIHRoZSBDdWVFbnRlciBldmVudC4gVGhlIGVuZCB0aW1lXG4gICAqIG11c3Qgbm90IG5lY2Vzc2FyaWx5IGJlIGtub3duIGFuZCB0aGVyZWZvcmUgY2Fubm90IGJlIHVzZWQgZm9yIHRoZSBJRC5cbiAgICogQHBhcmFtIGV2ZW50XG4gICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICovXG4gIHByaXZhdGUgc3RhdGljIGNhbGN1bGF0ZUlkKGV2ZW50OiBTdWJ0aXRsZUN1ZUV2ZW50KTogc3RyaW5nIHtcbiAgICBsZXQgaWQgPSBldmVudC5zdGFydCArICctJyArIGV2ZW50LnRleHQ7XG5cbiAgICBpZiAoZXZlbnQucG9zaXRpb24pIHtcbiAgICAgIGlkICs9ICctJyArIGV2ZW50LnBvc2l0aW9uLnJvdyArICctJyArIGV2ZW50LnBvc2l0aW9uLmNvbHVtbjtcbiAgICB9XG5cbiAgICByZXR1cm4gaWQ7XG4gIH1cblxuICBjdWVFbnRlcihldmVudDogU3VidGl0bGVDdWVFdmVudCwgbGFiZWw6IFN1YnRpdGxlTGFiZWwpOiB2b2lkIHtcbiAgICB0aGlzLmFkZEN1ZVRvTWFwKGV2ZW50LCBsYWJlbCk7XG4gIH1cblxuICBjdWVVcGRhdGUoZXZlbnQ6IFN1YnRpdGxlQ3VlRXZlbnQsIGxhYmVsOiBTdWJ0aXRsZUxhYmVsKTogU3VidGl0bGVMYWJlbCB8IHVuZGVmaW5lZCB7XG4gICAgY29uc3QgbGFiZWxUb1JlcGxhY2UgPSB0aGlzLnBvcEN1ZUZyb21NYXAoZXZlbnQpO1xuXG4gICAgaWYgKGxhYmVsVG9SZXBsYWNlKSB7XG4gICAgICB0aGlzLmFkZEN1ZVRvTWFwKGV2ZW50LCBsYWJlbCk7XG4gICAgICByZXR1cm4gbGFiZWxUb1JlcGxhY2U7XG4gICAgfVxuXG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfVxuXG4gIHByaXZhdGUgYWRkQ3VlVG9NYXAoZXZlbnQ6IFN1YnRpdGxlQ3VlRXZlbnQsIGxhYmVsOiBTdWJ0aXRsZUxhYmVsKTogdm9pZCB7XG4gICAgbGV0IGlkID0gQWN0aXZlU3VidGl0bGVNYW5hZ2VyLmNhbGN1bGF0ZUlkKGV2ZW50KTtcblxuICAgIC8vIENyZWF0ZSBhcnJheSBmb3IgaWQgaWYgaXQgZG9lcyBub3QgZXhpc3RcbiAgICB0aGlzLmFjdGl2ZVN1YnRpdGxlQ3VlTWFwW2lkXSA9IHRoaXMuYWN0aXZlU3VidGl0bGVDdWVNYXBbaWRdIHx8IFtdO1xuXG4gICAgLy8gQWRkIGN1ZVxuICAgIHRoaXMuYWN0aXZlU3VidGl0bGVDdWVNYXBbaWRdLnB1c2goeyBldmVudCwgbGFiZWwgfSk7XG4gICAgdGhpcy5hY3RpdmVTdWJ0aXRsZUN1ZUNvdW50Kys7XG4gIH1cblxuICBwcml2YXRlIHBvcEN1ZUZyb21NYXAoZXZlbnQ6IFN1YnRpdGxlQ3VlRXZlbnQpOiBTdWJ0aXRsZUxhYmVsIHwgdW5kZWZpbmVkIHtcbiAgICBsZXQgaWQgPSBBY3RpdmVTdWJ0aXRsZU1hbmFnZXIuY2FsY3VsYXRlSWQoZXZlbnQpO1xuICAgIGxldCBhY3RpdmVTdWJ0aXRsZUN1ZXMgPSB0aGlzLmFjdGl2ZVN1YnRpdGxlQ3VlTWFwW2lkXTtcblxuICAgIGlmIChhY3RpdmVTdWJ0aXRsZUN1ZXMgJiYgYWN0aXZlU3VidGl0bGVDdWVzLmxlbmd0aCA+IDApIHtcbiAgICAgIC8vIFJlbW92ZSBjdWVcbiAgICAgIC8qIFdlIGFwcGx5IHRoZSBGSUZPIGFwcHJvYWNoIGhlcmUgYW5kIHJlbW92ZSB0aGUgb2xkZXN0IGN1ZSBmcm9tIHRoZSBhc3NvY2lhdGVkIGlkLiBXaGVuIHRoZXJlIGFyZSBtdWx0aXBsZSBjdWVzXG4gICAgICAgKiB3aXRoIHRoZSBzYW1lIGlkLCB0aGVyZSBpcyBubyB3YXkgdG8ga25vdyB3aGljaCBvbmUgb2YgdGhlIGN1ZXMgaXMgdG8gYmUgZGVsZXRlZCwgc28gd2UganVzdCBob3BlIHRoYXQgRklGT1xuICAgICAgICogd29ya3MgZmluZS4gVGhlb3JldGljYWxseSBpdCBjYW4gaGFwcGVuIHRoYXQgdHdvIGN1ZXMgd2l0aCBjb2xsaWRpbmcgaWRzIGFyZSByZW1vdmVkIGF0IGRpZmZlcmVudCB0aW1lcywgaW5cbiAgICAgICAqIHRoZSB3cm9uZyBvcmRlci4gVGhpcyByYXJlIGNhc2UgaGFzIHlldCB0byBiZSBvYnNlcnZlZC4gSWYgaXQgZXZlciBnZXRzIGFuIGlzc3VlLCB3ZSBjYW4gdGFrZSB0aGUgdW5zdGFibGVcbiAgICAgICAqIGN1ZSBlbmQgdGltZSAod2hpY2ggY2FuIGNoYW5nZSBiZXR3ZWVuIEN1ZUVudGVyIGFuZCBDdWVFeGl0IElOIEN1ZVVwZGF0ZSkgYW5kIHVzZSBpdCBhcyBhblxuICAgICAgICogYWRkaXRpb25hbCBoaW50IHRvIHRyeSBhbmQgcmVtb3ZlIHRoZSBjb3JyZWN0IG9uZSBvZiB0aGUgY29sbGlkaW5nIGN1ZXMuXG4gICAgICAgKi9cbiAgICAgIGxldCBhY3RpdmVTdWJ0aXRsZUN1ZSA9IGFjdGl2ZVN1YnRpdGxlQ3Vlcy5zaGlmdCgpO1xuICAgICAgdGhpcy5hY3RpdmVTdWJ0aXRsZUN1ZUNvdW50LS07XG5cbiAgICAgIHJldHVybiBhY3RpdmVTdWJ0aXRsZUN1ZS5sYWJlbDtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUmVtb3ZlcyBhbGwgYWN0aXZlIGN1ZXMgd2hpY2ggZG9uJ3QgZW5jbG9zZSB0aGUgZ2l2ZW4gdGltZVxuICAgKiBAcGFyYW0gdGltZSB0aGUgdGltZSBmb3Igd2hpY2ggc3VidGl0bGVzIHNob3VsZCByZW1haW5cbiAgICovXG4gIHB1YmxpYyBjbGVhckluYWN0aXZlQ3Vlcyh0aW1lOiBudW1iZXIpOiBBY3RpdmVTdWJ0aXRsZUN1ZVtdIHtcbiAgICBjb25zdCByZW1vdmVkQ3VlczogQWN0aXZlU3VidGl0bGVDdWVbXSA9IFtdO1xuICAgIE9iamVjdC5rZXlzKHRoaXMuYWN0aXZlU3VidGl0bGVDdWVNYXApLmZvckVhY2goa2V5ID0+IHtcbiAgICAgIGNvbnN0IGFjdGl2ZUN1ZXMgPSB0aGlzLmFjdGl2ZVN1YnRpdGxlQ3VlTWFwW2tleV07XG4gICAgICBhY3RpdmVDdWVzLmZvckVhY2goY3VlID0+IHtcbiAgICAgICAgaWYgKHRpbWUgPCBjdWUuZXZlbnQuc3RhcnQgfHwgdGltZSA+IGN1ZS5ldmVudC5lbmQpIHtcbiAgICAgICAgICB0aGlzLnBvcEN1ZUZyb21NYXAoY3VlLmV2ZW50KTtcbiAgICAgICAgICByZW1vdmVkQ3Vlcy5wdXNoKGN1ZSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0pO1xuICAgIHJldHVybiByZW1vdmVkQ3VlcztcbiAgfVxuXG4gIHN0YXRpYyBnZW5lcmF0ZUltYWdlVGFnVGV4dChpbWFnZURhdGE6IHN0cmluZyk6IHN0cmluZyB8IHVuZGVmaW5lZCB7XG4gICAgaWYgKCFpbWFnZURhdGEpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBpbWdUYWcgPSBuZXcgRE9NKCdpbWcnLCB7XG4gICAgICBzcmM6IGltYWdlRGF0YSxcbiAgICB9KTtcbiAgICBpbWdUYWcuY3NzKCd3aWR0aCcsICcxMDAlJyk7XG4gICAgcmV0dXJuIGltZ1RhZy5nZXQoMCkub3V0ZXJIVE1MOyAvLyByZXR1cm4gdGhlIGh0bWwgYXMgc3RyaW5nXG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgbGFiZWwgYXNzb2NpYXRlZCB3aXRoIGFuIGFscmVhZHkgYWRkZWQgY3VlLlxuICAgKiBAcGFyYW0gZXZlbnRcbiAgICogQHJldHVybiB7U3VidGl0bGVMYWJlbH1cbiAgICovXG4gIGdldEN1ZXMoZXZlbnQ6IFN1YnRpdGxlQ3VlRXZlbnQpOiBTdWJ0aXRsZUxhYmVsW10gfCB1bmRlZmluZWQge1xuICAgIGxldCBpZCA9IEFjdGl2ZVN1YnRpdGxlTWFuYWdlci5jYWxjdWxhdGVJZChldmVudCk7XG4gICAgbGV0IGFjdGl2ZVN1YnRpdGxlQ3VlcyA9IHRoaXMuYWN0aXZlU3VidGl0bGVDdWVNYXBbaWRdO1xuICAgIGlmIChhY3RpdmVTdWJ0aXRsZUN1ZXMgJiYgYWN0aXZlU3VidGl0bGVDdWVzLmxlbmd0aCA+IDApIHtcbiAgICAgIHJldHVybiBhY3RpdmVTdWJ0aXRsZUN1ZXMubWFwKChjdWUpID0+IGN1ZS5sYWJlbCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJlbW92ZXMgdGhlIHN1YnRpdGxlIGN1ZSBmcm9tIHRoZSBtYW5hZ2VyIGFuZCByZXR1cm5zIHRoZSBsYWJlbCB0aGF0IHNob3VsZCBiZSByZW1vdmVkIGZyb20gdGhlIHN1YnRpdGxlIG92ZXJsYXksXG4gICAqIG9yIG51bGwgaWYgdGhlcmUgaXMgbm8gYXNzb2NpYXRlZCBsYWJlbCBleGlzdGluZyAoZS5nLiBiZWNhdXNlIGFsbCBsYWJlbHMgaGF2ZSBiZWVuIHtAbGluayAjY2xlYXIgY2xlYXJlZH0uXG4gICAqIEBwYXJhbSBldmVudFxuICAgKiBAcmV0dXJuIHtTdWJ0aXRsZUxhYmVsfG51bGx9XG4gICAqL1xuICBjdWVFeGl0KGV2ZW50OiBTdWJ0aXRsZUN1ZUV2ZW50KTogU3VidGl0bGVMYWJlbCB7XG4gICAgcmV0dXJuIHRoaXMucG9wQ3VlRnJvbU1hcChldmVudCk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgbnVtYmVyIG9mIGFjdGl2ZSBzdWJ0aXRsZSBjdWVzLlxuICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAqL1xuICBnZXQgY3VlQ291bnQoKTogbnVtYmVyIHtcbiAgICAvLyBXZSBleHBsaWNpdGx5IGNvdW50IHRoZSBjdWVzIHRvIHNhdmUgYW4gQXJyYXkucmVkdWNlIG9uIGV2ZXJ5IGN1ZUNvdW50IGNhbGwgKHdoaWNoIGNhbiBoYXBwZW4gZnJlcXVlbnRseSlcbiAgICByZXR1cm4gdGhpcy5hY3RpdmVTdWJ0aXRsZUN1ZUNvdW50O1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdHJ1ZSBpZiB0aGVyZSBhcmUgYWN0aXZlIHN1YnRpdGxlIGN1ZXMsIGVsc2UgZmFsc2UuXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAqL1xuICBnZXQgaGFzQ3VlcygpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5jdWVDb3VudCA+IDA7XG4gIH1cblxuICAvKipcbiAgICogUmVtb3ZlcyBhbGwgc3VidGl0bGUgY3VlcyBmcm9tIHRoZSBtYW5hZ2VyLlxuICAgKi9cbiAgY2xlYXIoKTogdm9pZCB7XG4gICAgdGhpcy5hY3RpdmVTdWJ0aXRsZUN1ZU1hcCA9IHt9O1xuICAgIHRoaXMuYWN0aXZlU3VidGl0bGVDdWVDb3VudCA9IDA7XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIFN1YnRpdGxlUmVnaW9uQ29udGFpbmVyTWFuYWdlciB7XG4gIHByaXZhdGUgc3VidGl0bGVSZWdpb25Db250YWluZXJzOiB7IFtyZWdpb25OYW1lOiBzdHJpbmddOiBTdWJ0aXRsZVJlZ2lvbkNvbnRhaW5lciB9ID0ge307XG5cbiAgLyoqXG4gICAqIEBwYXJhbSBzdWJ0aXRsZU92ZXJsYXkgUmVmZXJlbmNlIHRvIHRoZSBzdWJ0aXRsZSBvdmVybGF5IGZvciBhZGRpbmcgYW5kIHJlbW92aW5nIHRoZSBjb250YWluZXJzLlxuICAgKi9cbiAgY29uc3RydWN0b3IocHJpdmF0ZSBzdWJ0aXRsZU92ZXJsYXk6IFN1YnRpdGxlT3ZlcmxheSkge1xuICAgIHRoaXMuc3VidGl0bGVPdmVybGF5ID0gc3VidGl0bGVPdmVybGF5O1xuICB9XG5cbiAgcHJpdmF0ZSBnZXRSZWdpb24obGFiZWw6IFN1YnRpdGxlTGFiZWwpOiB7IHJlZ2lvbkNvbnRhaW5lcklkOiBzdHJpbmcsIHJlZ2lvbk5hbWU6IHN0cmluZyB9IHtcbiAgICBpZiAobGFiZWwudnR0KSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICByZWdpb25Db250YWluZXJJZDogbGFiZWwudnR0LnJlZ2lvbiAmJiBsYWJlbC52dHQucmVnaW9uLmlkID8gbGFiZWwudnR0LnJlZ2lvbi5pZCA6ICd2dHQnLFxuICAgICAgICByZWdpb25OYW1lOiAndnR0JyxcbiAgICAgIH07XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIHJlZ2lvbkNvbnRhaW5lcklkOiBsYWJlbC5yZWdpb24gfHwgJ2RlZmF1bHQnLFxuICAgICAgcmVnaW9uTmFtZTogbGFiZWwucmVnaW9uIHx8ICdkZWZhdWx0JyxcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgYW5kIHdyYXBzIGEgc3VidGl0bGUgbGFiZWwgaW50byBhIGNvbnRhaW5lciBkaXYgYmFzZWQgb24gdGhlIHN1YnRpdGxlIHJlZ2lvbi5cbiAgICogSWYgdGhlIHN1YnRpdGxlIGhhcyBwb3NpdGlvbmluZyBpbmZvcm1hdGlvbiBpdCBpcyBhZGRlZCB0byB0aGUgY29udGFpbmVyLlxuICAgKiBAcGFyYW0gbGFiZWwgVGhlIHN1YnRpdGxlIGxhYmVsIHRvIHdyYXBcbiAgICovXG4gIGFkZExhYmVsKGxhYmVsOiBTdWJ0aXRsZUxhYmVsLCBvdmVybGF5U2l6ZT86IFNpemUpOiB2b2lkIHtcbiAgICBjb25zdCB7IHJlZ2lvbkNvbnRhaW5lcklkLCByZWdpb25OYW1lIH0gPSB0aGlzLmdldFJlZ2lvbihsYWJlbCk7XG4gICAgY29uc3QgY3NzQ2xhc3NlcyA9IFtgc3VidGl0bGUtcG9zaXRpb24tJHtyZWdpb25OYW1lfWBdO1xuXG4gICAgaWYgKGxhYmVsLnZ0dCAmJiBsYWJlbC52dHQucmVnaW9uKSB7XG4gICAgICBjc3NDbGFzc2VzLnB1c2goYHZ0dC1yZWdpb24tJHtsYWJlbC52dHQucmVnaW9uLmlkfWApO1xuICAgIH1cblxuICAgIGlmICghdGhpcy5zdWJ0aXRsZVJlZ2lvbkNvbnRhaW5lcnNbcmVnaW9uQ29udGFpbmVySWRdKSB7XG4gICAgICBjb25zdCByZWdpb25Db250YWluZXIgPSBuZXcgU3VidGl0bGVSZWdpb25Db250YWluZXIoe1xuICAgICAgICBjc3NDbGFzc2VzLFxuICAgICAgfSk7XG5cbiAgICAgIHRoaXMuc3VidGl0bGVSZWdpb25Db250YWluZXJzW3JlZ2lvbkNvbnRhaW5lcklkXSA9IHJlZ2lvbkNvbnRhaW5lcjtcblxuICAgICAgaWYgKGxhYmVsLnJlZ2lvblN0eWxlKSB7XG4gICAgICAgIHJlZ2lvbkNvbnRhaW5lci5nZXREb21FbGVtZW50KCkuYXR0cignc3R5bGUnLCBsYWJlbC5yZWdpb25TdHlsZSk7XG4gICAgICB9IGVsc2UgaWYgKGxhYmVsLnZ0dCAmJiAhbGFiZWwudnR0LnJlZ2lvbikge1xuICAgICAgICAvKipcbiAgICAgICAgICogSWYgdGhlcmUgaXMgbm8gcmVnaW9uIHByZXNlbnQgdG8gd3JhcCB0aGUgQ3VlIEJveCwgdGhlIEN1ZSBib3ggYmVjb21lcyB0aGVcbiAgICAgICAgICogcmVnaW9uIGl0c2VsZi4gVGhlcmVmb3JlIHRoZSBwb3NpdGlvbmluZyB2YWx1ZXMgaGF2ZSB0byBjb21lIGZyb20gdGhlIGJveC5cbiAgICAgICAgICovXG4gICAgICAgIHJlZ2lvbkNvbnRhaW5lci5nZXREb21FbGVtZW50KCkuY3NzKCdwb3NpdGlvbicsICdzdGF0aWMnKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIGdldERvbUVsZW1lbnQgbmVlZHMgdG8gYmUgY2FsbGVkIGF0IGxlYXN0IG9uY2UgdG8gZW5zdXJlIHRoZSBjb21wb25lbnQgZXhpc3RzXG4gICAgICAgIHJlZ2lvbkNvbnRhaW5lci5nZXREb21FbGVtZW50KCk7XG4gICAgICB9XG5cbiAgICAgIGZvciAoY29uc3QgcmVnaW9uQ29udGFpbmVySWQgaW4gdGhpcy5zdWJ0aXRsZVJlZ2lvbkNvbnRhaW5lcnMpIHtcbiAgICAgICAgdGhpcy5zdWJ0aXRsZU92ZXJsYXkuYWRkQ29tcG9uZW50KHRoaXMuc3VidGl0bGVSZWdpb25Db250YWluZXJzW3JlZ2lvbkNvbnRhaW5lcklkXSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5zdWJ0aXRsZVJlZ2lvbkNvbnRhaW5lcnNbcmVnaW9uQ29udGFpbmVySWRdLmFkZExhYmVsKGxhYmVsLCBvdmVybGF5U2l6ZSk7XG4gIH1cblxuICByZXBsYWNlTGFiZWwocHJldmlvdXNMYWJlbDogU3VidGl0bGVMYWJlbCwgbmV3TGFiZWw6IFN1YnRpdGxlTGFiZWwpOiB2b2lkIHtcbiAgICBjb25zdCB7IHJlZ2lvbkNvbnRhaW5lcklkIH0gPSB0aGlzLmdldFJlZ2lvbihwcmV2aW91c0xhYmVsKTtcblxuICAgIHRoaXMuc3VidGl0bGVSZWdpb25Db250YWluZXJzW3JlZ2lvbkNvbnRhaW5lcklkXS5yZW1vdmVMYWJlbChwcmV2aW91c0xhYmVsKTtcbiAgICB0aGlzLnN1YnRpdGxlUmVnaW9uQ29udGFpbmVyc1tyZWdpb25Db250YWluZXJJZF0uYWRkTGFiZWwobmV3TGFiZWwpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlbW92ZXMgYSBzdWJ0aXRsZSBsYWJlbCBmcm9tIGEgY29udGFpbmVyLlxuICAgKi9cbiAgcmVtb3ZlTGFiZWwobGFiZWw6IFN1YnRpdGxlTGFiZWwpOiB2b2lkIHtcbiAgICBsZXQgcmVnaW9uQ29udGFpbmVySWQ7XG5cbiAgICBpZiAobGFiZWwudnR0KSB7XG4gICAgICByZWdpb25Db250YWluZXJJZCA9IGxhYmVsLnZ0dC5yZWdpb24gJiYgbGFiZWwudnR0LnJlZ2lvbi5pZCA/IGxhYmVsLnZ0dC5yZWdpb24uaWQgOiAndnR0JztcbiAgICB9IGVsc2Uge1xuICAgICAgcmVnaW9uQ29udGFpbmVySWQgPSBsYWJlbC5yZWdpb24gfHwgJ2RlZmF1bHQnO1xuICAgIH1cblxuICAgIHRoaXMuc3VidGl0bGVSZWdpb25Db250YWluZXJzW3JlZ2lvbkNvbnRhaW5lcklkXS5yZW1vdmVMYWJlbChsYWJlbCk7XG5cbiAgICAvLyBSZW1vdmUgY29udGFpbmVyIGlmIG5vIG1vcmUgbGFiZWxzIGFyZSBkaXNwbGF5ZWRcbiAgICBpZiAodGhpcy5zdWJ0aXRsZVJlZ2lvbkNvbnRhaW5lcnNbcmVnaW9uQ29udGFpbmVySWRdLmlzRW1wdHkoKSkge1xuICAgICAgdGhpcy5zdWJ0aXRsZU92ZXJsYXkucmVtb3ZlQ29tcG9uZW50KHRoaXMuc3VidGl0bGVSZWdpb25Db250YWluZXJzW3JlZ2lvbkNvbnRhaW5lcklkXSk7XG4gICAgICBkZWxldGUgdGhpcy5zdWJ0aXRsZVJlZ2lvbkNvbnRhaW5lcnNbcmVnaW9uQ29udGFpbmVySWRdO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZW1vdmVzIGFsbCBzdWJ0aXRsZSBjb250YWluZXJzLlxuICAgKi9cbiAgY2xlYXIoKTogdm9pZCB7XG4gICAgZm9yIChjb25zdCByZWdpb25OYW1lIGluIHRoaXMuc3VidGl0bGVSZWdpb25Db250YWluZXJzKSB7XG4gICAgICB0aGlzLnN1YnRpdGxlT3ZlcmxheS5yZW1vdmVDb21wb25lbnQodGhpcy5zdWJ0aXRsZVJlZ2lvbkNvbnRhaW5lcnNbcmVnaW9uTmFtZV0pO1xuICAgIH1cblxuICAgIHRoaXMuc3VidGl0bGVSZWdpb25Db250YWluZXJzID0ge307XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIFN1YnRpdGxlUmVnaW9uQ29udGFpbmVyIGV4dGVuZHMgQ29udGFpbmVyPENvbnRhaW5lckNvbmZpZz4ge1xuICBwcml2YXRlIGxhYmVsQ291bnQgPSAwO1xuXG4gIGNvbnN0cnVjdG9yKGNvbmZpZzogQ29udGFpbmVyQ29uZmlnID0ge30pIHtcbiAgICBzdXBlcihjb25maWcpO1xuXG4gICAgdGhpcy5jb25maWcgPSB0aGlzLm1lcmdlQ29uZmlnKGNvbmZpZywge1xuICAgICAgY3NzQ2xhc3M6ICdzdWJ0aXRsZS1yZWdpb24tY29udGFpbmVyJyxcbiAgICB9LCB0aGlzLmNvbmZpZyk7XG4gIH1cblxuICBhZGRMYWJlbChsYWJlbFRvQWRkOiBTdWJ0aXRsZUxhYmVsLCBvdmVybGF5U2l6ZT86IFNpemUpIHtcbiAgICB0aGlzLmxhYmVsQ291bnQrKztcblxuICAgIGlmIChsYWJlbFRvQWRkLnZ0dCkge1xuICAgICAgaWYgKGxhYmVsVG9BZGQudnR0LnJlZ2lvbiAmJiBvdmVybGF5U2l6ZSkge1xuICAgICAgICBWdHRVdGlscy5zZXRWdHRSZWdpb25TdHlsZXModGhpcywgbGFiZWxUb0FkZC52dHQucmVnaW9uLCBvdmVybGF5U2l6ZSk7XG4gICAgICB9XG5cbiAgICAgIFZ0dFV0aWxzLnNldFZ0dEN1ZUJveFN0eWxlcyhsYWJlbFRvQWRkLCBvdmVybGF5U2l6ZSk7XG4gICAgfVxuXG4gICAgdGhpcy5hZGRDb21wb25lbnQobGFiZWxUb0FkZCk7XG4gICAgdGhpcy51cGRhdGVDb21wb25lbnRzKCk7XG4gIH1cblxuICByZW1vdmVMYWJlbChsYWJlbFRvUmVtb3ZlOiBTdWJ0aXRsZUxhYmVsKTogdm9pZCB7XG4gICAgdGhpcy5sYWJlbENvdW50LS07XG4gICAgdGhpcy5yZW1vdmVDb21wb25lbnQobGFiZWxUb1JlbW92ZSk7XG4gICAgdGhpcy51cGRhdGVDb21wb25lbnRzKCk7XG4gIH1cblxuICBwdWJsaWMgaXNFbXB0eSgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5sYWJlbENvdW50ID09PSAwO1xuICB9XG59XG4iLCJpbXBvcnQge1NlbGVjdEJveH0gZnJvbSAnLi9zZWxlY3Rib3gnO1xuaW1wb3J0IHtMaXN0U2VsZWN0b3JDb25maWd9IGZyb20gJy4vbGlzdHNlbGVjdG9yJztcbmltcG9ydCB7VUlJbnN0YW5jZU1hbmFnZXJ9IGZyb20gJy4uL3VpbWFuYWdlcic7XG5pbXBvcnQge1N1YnRpdGxlU3dpdGNoSGFuZGxlcn0gZnJvbSAnLi4vc3VidGl0bGV1dGlscyc7XG5pbXBvcnQgeyBQbGF5ZXJBUEkgfSBmcm9tICdiaXRtb3Zpbi1wbGF5ZXInO1xuaW1wb3J0IHsgaTE4biB9IGZyb20gJy4uL2xvY2FsaXphdGlvbi9pMThuJztcblxuLyoqXG4gKiBBIHNlbGVjdCBib3ggcHJvdmlkaW5nIGEgc2VsZWN0aW9uIGJldHdlZW4gYXZhaWxhYmxlIHN1YnRpdGxlIGFuZCBjYXB0aW9uIHRyYWNrcy5cbiAqXG4gKiBAY2F0ZWdvcnkgQ29tcG9uZW50c1xuICovXG5leHBvcnQgY2xhc3MgU3VidGl0bGVTZWxlY3RCb3ggZXh0ZW5kcyBTZWxlY3RCb3gge1xuXG4gIGNvbnN0cnVjdG9yKGNvbmZpZzogTGlzdFNlbGVjdG9yQ29uZmlnID0ge30pIHtcbiAgICBzdXBlcihjb25maWcpO1xuXG4gICAgdGhpcy5jb25maWcgPSB0aGlzLm1lcmdlQ29uZmlnKGNvbmZpZywge1xuICAgICAgY3NzQ2xhc3NlczogWyd1aS1zdWJ0aXRsZXNlbGVjdGJveCddLFxuICAgICAgYXJpYUxhYmVsOiBpMThuLmdldExvY2FsaXplcignc3VidGl0bGUuc2VsZWN0JyksXG4gICAgfSwgdGhpcy5jb25maWcpO1xuICB9XG5cbiAgY29uZmlndXJlKHBsYXllcjogUGxheWVyQVBJLCB1aW1hbmFnZXI6IFVJSW5zdGFuY2VNYW5hZ2VyKTogdm9pZCB7XG4gICAgc3VwZXIuY29uZmlndXJlKHBsYXllciwgdWltYW5hZ2VyKTtcblxuICAgIG5ldyBTdWJ0aXRsZVN3aXRjaEhhbmRsZXIocGxheWVyLCB0aGlzLCB1aW1hbmFnZXIpO1xuICB9XG59XG4iLCJpbXBvcnQgeyBTdWJ0aXRsZVNldHRpbmdTZWxlY3RCb3gsIFN1YnRpdGxlU2V0dGluZ1NlbGVjdEJveENvbmZpZyB9IGZyb20gJy4vc3VidGl0bGVzZXR0aW5nc2VsZWN0Ym94JztcbmltcG9ydCB7VUlJbnN0YW5jZU1hbmFnZXJ9IGZyb20gJy4uLy4uL3VpbWFuYWdlcic7XG5pbXBvcnQgeyBQbGF5ZXJBUEkgfSBmcm9tICdiaXRtb3Zpbi1wbGF5ZXInO1xuaW1wb3J0IHsgaTE4biB9IGZyb20gJy4uLy4uL2xvY2FsaXphdGlvbi9pMThuJztcblxuLyoqXG4gKiBBIHNlbGVjdCBib3ggcHJvdmlkaW5nIGEgc2VsZWN0aW9uIG9mIGRpZmZlcmVudCBiYWNrZ3JvdW5kIGNvbG9ycy5cbiAqXG4gKiBAY2F0ZWdvcnkgQ29tcG9uZW50c1xuICovXG5leHBvcnQgY2xhc3MgQmFja2dyb3VuZENvbG9yU2VsZWN0Qm94IGV4dGVuZHMgU3VidGl0bGVTZXR0aW5nU2VsZWN0Qm94IHtcblxuICBjb25zdHJ1Y3Rvcihjb25maWc6IFN1YnRpdGxlU2V0dGluZ1NlbGVjdEJveENvbmZpZykge1xuICAgIHN1cGVyKGNvbmZpZyk7XG5cbiAgICB0aGlzLmNvbmZpZyA9IHRoaXMubWVyZ2VDb25maWcoY29uZmlnLCB7XG4gICAgICBjc3NDbGFzc2VzOiBbJ3VpLXN1YnRpdGxlc2V0dGluZ3NiYWNrZ3JvdW5kY29sb3JzZWxlY3Rib3gnXSxcbiAgICB9LCB0aGlzLmNvbmZpZyk7XG4gIH1cblxuICBjb25maWd1cmUocGxheWVyOiBQbGF5ZXJBUEksIHVpbWFuYWdlcjogVUlJbnN0YW5jZU1hbmFnZXIpOiB2b2lkIHtcbiAgICBzdXBlci5jb25maWd1cmUocGxheWVyLCB1aW1hbmFnZXIpO1xuXG4gICAgdGhpcy5hZGRJdGVtKG51bGwsIGkxOG4uZ2V0TG9jYWxpemVyKCdkZWZhdWx0JykpO1xuICAgIHRoaXMuYWRkSXRlbSgnd2hpdGUnLCBpMThuLmdldExvY2FsaXplcignY29sb3JzLndoaXRlJykpO1xuICAgIHRoaXMuYWRkSXRlbSgnYmxhY2snLCBpMThuLmdldExvY2FsaXplcignY29sb3JzLmJsYWNrJykpO1xuICAgIHRoaXMuYWRkSXRlbSgncmVkJywgaTE4bi5nZXRMb2NhbGl6ZXIoJ2NvbG9ycy5yZWQnKSk7XG4gICAgdGhpcy5hZGRJdGVtKCdncmVlbicsIGkxOG4uZ2V0TG9jYWxpemVyKCdjb2xvcnMuZ3JlZW4nKSk7XG4gICAgdGhpcy5hZGRJdGVtKCdibHVlJywgaTE4bi5nZXRMb2NhbGl6ZXIoJ2NvbG9ycy5ibHVlJykpO1xuICAgIHRoaXMuYWRkSXRlbSgnY3lhbicsIGkxOG4uZ2V0TG9jYWxpemVyKCdjb2xvcnMuY3lhbicpKTtcbiAgICB0aGlzLmFkZEl0ZW0oJ3llbGxvdycsIGkxOG4uZ2V0TG9jYWxpemVyKCdjb2xvcnMueWVsbG93JykpO1xuICAgIHRoaXMuYWRkSXRlbSgnbWFnZW50YScsIGkxOG4uZ2V0TG9jYWxpemVyKCdjb2xvcnMubWFnZW50YScpKTtcblxuICAgIGxldCBzZXRDb2xvckFuZE9wYWNpdHkgPSAoKSA9PiB7XG4gICAgICBpZiAodGhpcy5zZXR0aW5nc01hbmFnZXIuYmFja2dyb3VuZENvbG9yLmlzU2V0KCkgJiYgdGhpcy5zZXR0aW5nc01hbmFnZXIuYmFja2dyb3VuZE9wYWNpdHkuaXNTZXQoKSkge1xuICAgICAgICB0aGlzLnRvZ2dsZU92ZXJsYXlDbGFzcyhcbiAgICAgICAgICAnYmdjb2xvci0nICsgdGhpcy5zZXR0aW5nc01hbmFnZXIuYmFja2dyb3VuZENvbG9yLnZhbHVlICsgdGhpcy5zZXR0aW5nc01hbmFnZXIuYmFja2dyb3VuZE9wYWNpdHkudmFsdWUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy50b2dnbGVPdmVybGF5Q2xhc3MobnVsbCk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHRoaXMub25JdGVtU2VsZWN0ZWQuc3Vic2NyaWJlKChzZW5kZXIsIGtleTogc3RyaW5nKSA9PiB7XG4gICAgICB0aGlzLnNldHRpbmdzTWFuYWdlci5iYWNrZ3JvdW5kQ29sb3IudmFsdWUgPSBrZXk7XG4gICAgfSk7XG5cbiAgICB0aGlzLnNldHRpbmdzTWFuYWdlci5iYWNrZ3JvdW5kQ29sb3Iub25DaGFuZ2VkLnN1YnNjcmliZSgoc2VuZGVyLCBwcm9wZXJ0eSkgPT4ge1xuICAgICAgLy8gQ29sb3IgYW5kIG9wYWNpdHkgZ28gdG9nZXRoZXIsIHNvIHdlIG5lZWQgdG8uLi5cbiAgICAgIGlmICghdGhpcy5zZXR0aW5nc01hbmFnZXIuYmFja2dyb3VuZENvbG9yLmlzU2V0KCkpIHtcbiAgICAgICAgLy8gLi4uIGNsZWFyIHRoZSBvcGFjaXR5IHdoZW4gdGhlIGNvbG9yIGlzIG5vdCBzZXRcbiAgICAgICAgdGhpcy5zZXR0aW5nc01hbmFnZXIuYmFja2dyb3VuZE9wYWNpdHkuY2xlYXIoKTtcbiAgICAgIH0gZWxzZSBpZiAoIXRoaXMuc2V0dGluZ3NNYW5hZ2VyLmJhY2tncm91bmRPcGFjaXR5LmlzU2V0KCkpIHtcbiAgICAgICAgLy8gLi4uIHNldCBhbiBvcGFjaXR5IHdoZW4gdGhlIGNvbG9yIGlzIHNldFxuICAgICAgICB0aGlzLnNldHRpbmdzTWFuYWdlci5iYWNrZ3JvdW5kT3BhY2l0eS52YWx1ZSA9ICcxMDAnO1xuICAgICAgfVxuICAgICAgdGhpcy5zZWxlY3RJdGVtKHByb3BlcnR5LnZhbHVlKTtcbiAgICAgIHNldENvbG9yQW5kT3BhY2l0eSgpO1xuICAgIH0pO1xuXG4gICAgdGhpcy5zZXR0aW5nc01hbmFnZXIuYmFja2dyb3VuZE9wYWNpdHkub25DaGFuZ2VkLnN1YnNjcmliZSgoKSA9PiB7XG4gICAgICBzZXRDb2xvckFuZE9wYWNpdHkoKTtcbiAgICB9KTtcblxuICAgIC8vIExvYWQgaW5pdGlhbCB2YWx1ZVxuICAgIGlmICh0aGlzLnNldHRpbmdzTWFuYWdlci5iYWNrZ3JvdW5kQ29sb3IuaXNTZXQoKSkge1xuICAgICAgdGhpcy5zZWxlY3RJdGVtKHRoaXMuc2V0dGluZ3NNYW5hZ2VyLmJhY2tncm91bmRDb2xvci52YWx1ZSk7XG4gICAgfVxuICB9XG59XG4iLCJpbXBvcnQgeyBTdWJ0aXRsZVNldHRpbmdTZWxlY3RCb3gsIFN1YnRpdGxlU2V0dGluZ1NlbGVjdEJveENvbmZpZyB9IGZyb20gJy4vc3VidGl0bGVzZXR0aW5nc2VsZWN0Ym94JztcbmltcG9ydCB7VUlJbnN0YW5jZU1hbmFnZXJ9IGZyb20gJy4uLy4uL3VpbWFuYWdlcic7XG5pbXBvcnQgeyBQbGF5ZXJBUEkgfSBmcm9tICdiaXRtb3Zpbi1wbGF5ZXInO1xuaW1wb3J0IHsgaTE4biB9IGZyb20gJy4uLy4uL2xvY2FsaXphdGlvbi9pMThuJztcblxuLyoqXG4gKiBBIHNlbGVjdCBib3ggcHJvdmlkaW5nIGEgc2VsZWN0aW9uIG9mIGRpZmZlcmVudCBiYWNrZ3JvdW5kIG9wYWNpdHkuXG4gKlxuICogQGNhdGVnb3J5IENvbXBvbmVudHNcbiAqL1xuZXhwb3J0IGNsYXNzIEJhY2tncm91bmRPcGFjaXR5U2VsZWN0Qm94IGV4dGVuZHMgU3VidGl0bGVTZXR0aW5nU2VsZWN0Qm94IHtcblxuICBjb25zdHJ1Y3Rvcihjb25maWc6IFN1YnRpdGxlU2V0dGluZ1NlbGVjdEJveENvbmZpZykge1xuICAgIHN1cGVyKGNvbmZpZyk7XG5cbiAgICB0aGlzLmNvbmZpZyA9IHRoaXMubWVyZ2VDb25maWcoY29uZmlnLCB7XG4gICAgICBjc3NDbGFzc2VzOiBbJ3VpLXN1YnRpdGxlc2V0dGluZ3NiYWNrZ3JvdW5kb3BhY2l0eXNlbGVjdGJveCddLFxuICAgIH0sIHRoaXMuY29uZmlnKTtcbiAgfVxuXG4gIGNvbmZpZ3VyZShwbGF5ZXI6IFBsYXllckFQSSwgdWltYW5hZ2VyOiBVSUluc3RhbmNlTWFuYWdlcik6IHZvaWQge1xuICAgIHN1cGVyLmNvbmZpZ3VyZShwbGF5ZXIsIHVpbWFuYWdlcik7XG5cbiAgICB0aGlzLmFkZEl0ZW0obnVsbCwgaTE4bi5nZXRMb2NhbGl6ZXIoJ2RlZmF1bHQnKSk7XG4gICAgdGhpcy5hZGRJdGVtKCcxMDAnLCBpMThuLmdldExvY2FsaXplcigncGVyY2VudCcsIHsgdmFsdWU6IDEwMCB9KSk7XG4gICAgdGhpcy5hZGRJdGVtKCc3NScsIGkxOG4uZ2V0TG9jYWxpemVyKCdwZXJjZW50JywgeyB2YWx1ZTogNzUgfSkpO1xuICAgIHRoaXMuYWRkSXRlbSgnNTAnLCBpMThuLmdldExvY2FsaXplcigncGVyY2VudCcsIHsgdmFsdWU6IDUwIH0pKTtcbiAgICB0aGlzLmFkZEl0ZW0oJzI1JywgaTE4bi5nZXRMb2NhbGl6ZXIoJ3BlcmNlbnQnLCB7IHZhbHVlOiAyNSB9KSk7XG4gICAgdGhpcy5hZGRJdGVtKCcwJywgaTE4bi5nZXRMb2NhbGl6ZXIoJ3BlcmNlbnQnLCB7IHZhbHVlOiAwIH0pKTtcblxuICAgIHRoaXMub25JdGVtU2VsZWN0ZWQuc3Vic2NyaWJlKChzZW5kZXIsIGtleTogc3RyaW5nKSA9PiB7XG4gICAgICB0aGlzLnNldHRpbmdzTWFuYWdlci5iYWNrZ3JvdW5kT3BhY2l0eS52YWx1ZSA9IGtleTtcblxuICAgICAgLy8gQ29sb3IgYW5kIG9wYWNpdHkgZ28gdG9nZXRoZXIsIHNvIHdlIG5lZWQgdG8uLi5cbiAgICAgIGlmICghdGhpcy5zZXR0aW5nc01hbmFnZXIuYmFja2dyb3VuZE9wYWNpdHkuaXNTZXQoKSkge1xuICAgICAgICAvLyAuLi4gY2xlYXIgdGhlIGNvbG9yIHdoZW4gdGhlIG9wYWNpdHkgaXMgbm90IHNldFxuICAgICAgICB0aGlzLnNldHRpbmdzTWFuYWdlci5iYWNrZ3JvdW5kQ29sb3IuY2xlYXIoKTtcbiAgICAgIH0gZWxzZSBpZiAoIXRoaXMuc2V0dGluZ3NNYW5hZ2VyLmJhY2tncm91bmRDb2xvci5pc1NldCgpKSB7XG4gICAgICAgIC8vIC4uLiBzZXQgYSBjb2xvciB3aGVuIHRoZSBvcGFjaXR5IGlzIHNldFxuICAgICAgICB0aGlzLnNldHRpbmdzTWFuYWdlci5iYWNrZ3JvdW5kQ29sb3IudmFsdWUgPSAnYmxhY2snO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8gVXBkYXRlIHNlbGVjdGVkIGl0ZW0gd2hlbiB2YWx1ZSBpcyBzZXQgZnJvbSBzb21ld2hlcmUgZWxzZVxuICAgIHRoaXMuc2V0dGluZ3NNYW5hZ2VyLmJhY2tncm91bmRPcGFjaXR5Lm9uQ2hhbmdlZC5zdWJzY3JpYmUoKHNlbmRlciwgcHJvcGVydHkpID0+IHtcbiAgICAgIHRoaXMuc2VsZWN0SXRlbShwcm9wZXJ0eS52YWx1ZSk7XG4gICAgfSk7XG5cbiAgICAvLyBMb2FkIGluaXRpYWwgdmFsdWVcbiAgICBpZiAodGhpcy5zZXR0aW5nc01hbmFnZXIuYmFja2dyb3VuZE9wYWNpdHkuaXNTZXQoKSkge1xuICAgICAgdGhpcy5zZWxlY3RJdGVtKHRoaXMuc2V0dGluZ3NNYW5hZ2VyLmJhY2tncm91bmRPcGFjaXR5LnZhbHVlKTtcbiAgICB9XG4gIH1cbn1cbiIsImltcG9ydCB7IFN1YnRpdGxlU2V0dGluZ1NlbGVjdEJveCwgU3VidGl0bGVTZXR0aW5nU2VsZWN0Qm94Q29uZmlnIH0gZnJvbSAnLi9zdWJ0aXRsZXNldHRpbmdzZWxlY3Rib3gnO1xuaW1wb3J0IHtVSUluc3RhbmNlTWFuYWdlcn0gZnJvbSAnLi4vLi4vdWltYW5hZ2VyJztcbmltcG9ydCB7IFBsYXllckFQSSB9IGZyb20gJ2JpdG1vdmluLXBsYXllcic7XG5pbXBvcnQgeyBpMThuIH0gZnJvbSAnLi4vLi4vbG9jYWxpemF0aW9uL2kxOG4nO1xuXG4vKipcbiAqIEEgc2VsZWN0IGJveCBwcm92aWRpbmcgYSBzZWxlY3Rpb24gb2YgZGlmZmVyZW50IGNoYXJhY3RlciBlZGdlLlxuICpcbiAqIEBjYXRlZ29yeSBDb21wb25lbnRzXG4gKi9cbmV4cG9ydCBjbGFzcyBDaGFyYWN0ZXJFZGdlU2VsZWN0Qm94IGV4dGVuZHMgU3VidGl0bGVTZXR0aW5nU2VsZWN0Qm94IHtcblxuICBjb25zdHJ1Y3Rvcihjb25maWc6IFN1YnRpdGxlU2V0dGluZ1NlbGVjdEJveENvbmZpZykge1xuICAgIHN1cGVyKGNvbmZpZyk7XG5cbiAgICB0aGlzLmNvbmZpZyA9IHRoaXMubWVyZ2VDb25maWcoY29uZmlnLCB7XG4gICAgICBjc3NDbGFzc2VzOiBbJ3VpLXN1YnRpdGxlc2V0dGluZ3NjaGFyYWN0ZXJlZGdlc2VsZWN0Ym94J10sXG4gICAgfSwgdGhpcy5jb25maWcpO1xuICB9XG5cbiAgY29uZmlndXJlKHBsYXllcjogUGxheWVyQVBJLCB1aW1hbmFnZXI6IFVJSW5zdGFuY2VNYW5hZ2VyKTogdm9pZCB7XG4gICAgc3VwZXIuY29uZmlndXJlKHBsYXllciwgdWltYW5hZ2VyKTtcblxuICAgIHRoaXMuYWRkSXRlbShudWxsLCBpMThuLmdldExvY2FsaXplcignZGVmYXVsdCcpKTtcbiAgICB0aGlzLmFkZEl0ZW0oJ3JhaXNlZCcsIGkxOG4uZ2V0TG9jYWxpemVyKCdzZXR0aW5ncy5zdWJ0aXRsZXMuY2hhcmFjdGVyRWRnZS5yYWlzZWQnKSk7XG4gICAgdGhpcy5hZGRJdGVtKCdkZXByZXNzZWQnLCBpMThuLmdldExvY2FsaXplcignc2V0dGluZ3Muc3VidGl0bGVzLmNoYXJhY3RlckVkZ2UuZGVwcmVzc2VkJykpO1xuICAgIHRoaXMuYWRkSXRlbSgndW5pZm9ybScsIGkxOG4uZ2V0TG9jYWxpemVyKCdzZXR0aW5ncy5zdWJ0aXRsZXMuY2hhcmFjdGVyRWRnZS51bmlmb3JtJykpO1xuICAgIHRoaXMuYWRkSXRlbSgnZHJvcHNoYWRvd2VkJywgaTE4bi5nZXRMb2NhbGl6ZXIoJ3NldHRpbmdzLnN1YnRpdGxlcy5jaGFyYWN0ZXJFZGdlLmRyb3BzaGFkb3dlZCcpKTtcblxuICAgIHRoaXMuc2V0dGluZ3NNYW5hZ2VyLmNoYXJhY3RlckVkZ2Uub25DaGFuZ2VkLnN1YnNjcmliZSgoc2VuZGVyLCBwcm9wZXJ0eSkgPT4ge1xuICAgICAgaWYgKHByb3BlcnR5LmlzU2V0KCkpIHtcbiAgICAgICAgdGhpcy50b2dnbGVPdmVybGF5Q2xhc3MoJ2NoYXJhY3RlcmVkZ2UtJyArIHByb3BlcnR5LnZhbHVlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMudG9nZ2xlT3ZlcmxheUNsYXNzKG51bGwpO1xuICAgICAgfVxuXG4gICAgICAvLyBTZWxlY3QgdGhlIGl0ZW0gaW4gY2FzZSB0aGUgcHJvcGVydHkgd2FzIHNldCBmcm9tIG91dHNpZGVcbiAgICAgIHRoaXMuc2VsZWN0SXRlbShwcm9wZXJ0eS52YWx1ZSk7XG4gICAgfSk7XG5cbiAgICB0aGlzLm9uSXRlbVNlbGVjdGVkLnN1YnNjcmliZSgoc2VuZGVyLCBrZXk6IHN0cmluZykgPT4ge1xuICAgICAgdGhpcy5zZXR0aW5nc01hbmFnZXIuY2hhcmFjdGVyRWRnZS52YWx1ZSA9IGtleTtcbiAgICB9KTtcblxuICAgIC8vIExvYWQgaW5pdGlhbCB2YWx1ZVxuICAgIGlmICh0aGlzLnNldHRpbmdzTWFuYWdlci5jaGFyYWN0ZXJFZGdlLmlzU2V0KCkpIHtcbiAgICAgIHRoaXMuc2VsZWN0SXRlbSh0aGlzLnNldHRpbmdzTWFuYWdlci5jaGFyYWN0ZXJFZGdlLnZhbHVlKTtcbiAgICB9XG4gIH1cbn1cbiIsImltcG9ydCB7IFN1YnRpdGxlU2V0dGluZ1NlbGVjdEJveCwgU3VidGl0bGVTZXR0aW5nU2VsZWN0Qm94Q29uZmlnIH0gZnJvbSAnLi9zdWJ0aXRsZXNldHRpbmdzZWxlY3Rib3gnO1xuaW1wb3J0IHtVSUluc3RhbmNlTWFuYWdlcn0gZnJvbSAnLi4vLi4vdWltYW5hZ2VyJztcbmltcG9ydCB7IFBsYXllckFQSSB9IGZyb20gJ2JpdG1vdmluLXBsYXllcic7XG5pbXBvcnQgeyBpMThuIH0gZnJvbSAnLi4vLi4vbG9jYWxpemF0aW9uL2kxOG4nO1xuXG4vKipcbiAqIEEgc2VsZWN0IGJveCBwcm92aWRpbmcgYSBzZWxlY3Rpb24gb2YgZGlmZmVyZW50IGZvbnQgY29sb3JzLlxuICpcbiAqIEBjYXRlZ29yeSBDb21wb25lbnRzXG4gKi9cbmV4cG9ydCBjbGFzcyBGb250Q29sb3JTZWxlY3RCb3ggZXh0ZW5kcyBTdWJ0aXRsZVNldHRpbmdTZWxlY3RCb3gge1xuXG4gIGNvbnN0cnVjdG9yKGNvbmZpZzogU3VidGl0bGVTZXR0aW5nU2VsZWN0Qm94Q29uZmlnKSB7XG4gICAgc3VwZXIoY29uZmlnKTtcblxuICAgIHRoaXMuY29uZmlnID0gdGhpcy5tZXJnZUNvbmZpZyhjb25maWcsIHtcbiAgICAgIGNzc0NsYXNzZXM6IFsndWktc3VidGl0bGVzZXR0aW5nc2ZvbnRjb2xvcnNlbGVjdGJveCddLFxuICAgIH0sIHRoaXMuY29uZmlnKTtcbiAgfVxuXG4gIGNvbmZpZ3VyZShwbGF5ZXI6IFBsYXllckFQSSwgdWltYW5hZ2VyOiBVSUluc3RhbmNlTWFuYWdlcik6IHZvaWQge1xuICAgIHN1cGVyLmNvbmZpZ3VyZShwbGF5ZXIsIHVpbWFuYWdlcik7XG5cbiAgICB0aGlzLmFkZEl0ZW0obnVsbCwgaTE4bi5nZXRMb2NhbGl6ZXIoJ2RlZmF1bHQnKSk7XG4gICAgdGhpcy5hZGRJdGVtKCd3aGl0ZScsIGkxOG4uZ2V0TG9jYWxpemVyKCdjb2xvcnMud2hpdGUnKSk7XG4gICAgdGhpcy5hZGRJdGVtKCdibGFjaycsIGkxOG4uZ2V0TG9jYWxpemVyKCdjb2xvcnMuYmxhY2snKSk7XG4gICAgdGhpcy5hZGRJdGVtKCdyZWQnLCBpMThuLmdldExvY2FsaXplcignY29sb3JzLnJlZCcpKTtcbiAgICB0aGlzLmFkZEl0ZW0oJ2dyZWVuJywgaTE4bi5nZXRMb2NhbGl6ZXIoJ2NvbG9ycy5ncmVlbicpKTtcbiAgICB0aGlzLmFkZEl0ZW0oJ2JsdWUnLCBpMThuLmdldExvY2FsaXplcignY29sb3JzLmJsdWUnKSk7XG4gICAgdGhpcy5hZGRJdGVtKCdjeWFuJywgaTE4bi5nZXRMb2NhbGl6ZXIoJ2NvbG9ycy5jeWFuJykpO1xuICAgIHRoaXMuYWRkSXRlbSgneWVsbG93JywgaTE4bi5nZXRMb2NhbGl6ZXIoJ2NvbG9ycy55ZWxsb3cnKSk7XG4gICAgdGhpcy5hZGRJdGVtKCdtYWdlbnRhJywgaTE4bi5nZXRMb2NhbGl6ZXIoJ2NvbG9ycy5tYWdlbnRhJykpO1xuXG4gICAgbGV0IHNldENvbG9yQW5kT3BhY2l0eSA9ICgpID0+IHtcbiAgICAgIGlmICh0aGlzLnNldHRpbmdzTWFuYWdlci5mb250Q29sb3IuaXNTZXQoKSAmJiB0aGlzLnNldHRpbmdzTWFuYWdlci5mb250T3BhY2l0eS5pc1NldCgpKSB7XG4gICAgICAgIHRoaXMudG9nZ2xlT3ZlcmxheUNsYXNzKFxuICAgICAgICAgICdmb250Y29sb3ItJyArIHRoaXMuc2V0dGluZ3NNYW5hZ2VyLmZvbnRDb2xvci52YWx1ZSArIHRoaXMuc2V0dGluZ3NNYW5hZ2VyLmZvbnRPcGFjaXR5LnZhbHVlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMudG9nZ2xlT3ZlcmxheUNsYXNzKG51bGwpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICB0aGlzLm9uSXRlbVNlbGVjdGVkLnN1YnNjcmliZSgoc2VuZGVyLCBrZXk6IHN0cmluZykgPT4ge1xuICAgICAgdGhpcy5zZXR0aW5nc01hbmFnZXIuZm9udENvbG9yLnZhbHVlID0ga2V5O1xuICAgIH0pO1xuXG4gICAgdGhpcy5zZXR0aW5nc01hbmFnZXIuZm9udENvbG9yLm9uQ2hhbmdlZC5zdWJzY3JpYmUoKHNlbmRlciwgcHJvcGVydHkpID0+IHtcbiAgICAgIC8vIENvbG9yIGFuZCBvcGFjaXR5IGdvIHRvZ2V0aGVyLCBzbyB3ZSBuZWVkIHRvLi4uXG4gICAgICBpZiAoIXRoaXMuc2V0dGluZ3NNYW5hZ2VyLmZvbnRDb2xvci5pc1NldCgpKSB7XG4gICAgICAgIC8vIC4uLiBjbGVhciB0aGUgb3BhY2l0eSB3aGVuIHRoZSBjb2xvciBpcyBub3Qgc2V0XG4gICAgICAgIHRoaXMuc2V0dGluZ3NNYW5hZ2VyLmZvbnRPcGFjaXR5LmNsZWFyKCk7XG4gICAgICB9IGVsc2UgaWYgKCF0aGlzLnNldHRpbmdzTWFuYWdlci5mb250T3BhY2l0eS5pc1NldCgpKSB7XG4gICAgICAgIC8vIC4uLiBzZXQgYW4gb3BhY2l0eSB3aGVuIHRoZSBjb2xvciBpcyBzZXRcbiAgICAgICAgdGhpcy5zZXR0aW5nc01hbmFnZXIuZm9udE9wYWNpdHkudmFsdWUgPSAnMTAwJztcbiAgICAgIH1cbiAgICAgIHRoaXMuc2VsZWN0SXRlbShwcm9wZXJ0eS52YWx1ZSk7XG4gICAgICBzZXRDb2xvckFuZE9wYWNpdHkoKTtcbiAgICB9KTtcblxuICAgIHRoaXMuc2V0dGluZ3NNYW5hZ2VyLmZvbnRPcGFjaXR5Lm9uQ2hhbmdlZC5zdWJzY3JpYmUoKCkgPT4ge1xuICAgICAgc2V0Q29sb3JBbmRPcGFjaXR5KCk7XG4gICAgfSk7XG5cbiAgICAvLyBMb2FkIGluaXRpYWwgdmFsdWVcbiAgICBpZiAodGhpcy5zZXR0aW5nc01hbmFnZXIuZm9udENvbG9yLmlzU2V0KCkpIHtcbiAgICAgIHRoaXMuc2VsZWN0SXRlbSh0aGlzLnNldHRpbmdzTWFuYWdlci5mb250Q29sb3IudmFsdWUpO1xuICAgIH1cbiAgfVxufVxuIiwiaW1wb3J0IHsgU3VidGl0bGVTZXR0aW5nU2VsZWN0Qm94LCBTdWJ0aXRsZVNldHRpbmdTZWxlY3RCb3hDb25maWcgfSBmcm9tICcuL3N1YnRpdGxlc2V0dGluZ3NlbGVjdGJveCc7XG5pbXBvcnQge1VJSW5zdGFuY2VNYW5hZ2VyfSBmcm9tICcuLi8uLi91aW1hbmFnZXInO1xuaW1wb3J0IHsgUGxheWVyQVBJIH0gZnJvbSAnYml0bW92aW4tcGxheWVyJztcbmltcG9ydCB7IGkxOG4gfSBmcm9tICcuLi8uLi9sb2NhbGl6YXRpb24vaTE4bic7XG5cbi8qKlxuICogQSBzZWxlY3QgYm94IHByb3ZpZGluZyBhIHNlbGVjdGlvbiBvZiBkaWZmZXJlbnQgZm9udCBmYW1pbHkuXG4gKlxuICogQGNhdGVnb3J5IENvbXBvbmVudHNcbiAqL1xuZXhwb3J0IGNsYXNzIEZvbnRGYW1pbHlTZWxlY3RCb3ggZXh0ZW5kcyBTdWJ0aXRsZVNldHRpbmdTZWxlY3RCb3gge1xuXG4gIGNvbnN0cnVjdG9yKGNvbmZpZzogU3VidGl0bGVTZXR0aW5nU2VsZWN0Qm94Q29uZmlnKSB7XG4gICAgc3VwZXIoY29uZmlnKTtcblxuICAgIHRoaXMuY29uZmlnID0gdGhpcy5tZXJnZUNvbmZpZyhjb25maWcsIHtcbiAgICAgIGNzc0NsYXNzZXM6IFsndWktc3VidGl0bGVzZXR0aW5nc2ZvbnRmYW1pbHlzZWxlY3Rib3gnXSxcbiAgICB9LCB0aGlzLmNvbmZpZyk7XG4gIH1cblxuICBjb25maWd1cmUocGxheWVyOiBQbGF5ZXJBUEksIHVpbWFuYWdlcjogVUlJbnN0YW5jZU1hbmFnZXIpOiB2b2lkIHtcbiAgICBzdXBlci5jb25maWd1cmUocGxheWVyLCB1aW1hbmFnZXIpO1xuXG4gICAgdGhpcy5hZGRJdGVtKG51bGwsIGkxOG4uZ2V0TG9jYWxpemVyKCdkZWZhdWx0JykpO1xuICAgIHRoaXMuYWRkSXRlbSgnbW9ub3NwYWNlZHNlcmlmJywgaTE4bi5nZXRMb2NhbGl6ZXIoJ3NldHRpbmdzLnN1YnRpdGxlcy5mb250LmZhbWlseS5tb25vc3BhY2Vkc2VyaWYnKSk7XG4gICAgdGhpcy5hZGRJdGVtKCdwcm9wb3J0aW9uYWxzZXJpZicsIGkxOG4uZ2V0TG9jYWxpemVyKCdzZXR0aW5ncy5zdWJ0aXRsZXMuZm9udC5mYW1pbHkucHJvcG9ydGlvbmFsc2VyaWYnKSk7XG4gICAgdGhpcy5hZGRJdGVtKCdtb25vc3BhY2Vkc2Fuc3NlcmlmJywgaTE4bi5nZXRMb2NhbGl6ZXIoJ3NldHRpbmdzLnN1YnRpdGxlcy5mb250LmZhbWlseS5tb25vc3BhY2Vkc2Fuc3NlcmlmJykpO1xuICAgIHRoaXMuYWRkSXRlbSgncHJvcG9ydGlvbmFsc2Fuc3NlcmlmJywgaTE4bi5nZXRMb2NhbGl6ZXIoJ3NldHRpbmdzLnN1YnRpdGxlcy5mb250LmZhbWlseS5wcm9wb3J0aW9uYWxzYW5zc2VyaWYnKSk7XG4gICAgdGhpcy5hZGRJdGVtKCdjYXN1YWwnLCBpMThuLmdldExvY2FsaXplcignc2V0dGluZ3Muc3VidGl0bGVzLmZvbnQuZmFtaWx5LmNhc3VhbCcpKTtcbiAgICB0aGlzLmFkZEl0ZW0oJ2N1cnNpdmUnLCBpMThuLmdldExvY2FsaXplcignc2V0dGluZ3Muc3VidGl0bGVzLmZvbnQuZmFtaWx5LmN1cnNpdmUnKSk7XG4gICAgdGhpcy5hZGRJdGVtKCdzbWFsbGNhcGl0YWwnLCBpMThuLmdldExvY2FsaXplcignc2V0dGluZ3Muc3VidGl0bGVzLmZvbnQuZmFtaWx5LnNtYWxsY2FwaXRhbCcpKTtcblxuICAgIHRoaXMuc2V0dGluZ3NNYW5hZ2VyLmZvbnRGYW1pbHkub25DaGFuZ2VkLnN1YnNjcmliZSgoc2VuZGVyLCBwcm9wZXJ0eSkgPT4ge1xuICAgICAgaWYgKHByb3BlcnR5LmlzU2V0KCkpIHtcbiAgICAgICAgdGhpcy50b2dnbGVPdmVybGF5Q2xhc3MoJ2ZvbnRmYW1pbHktJyArIHByb3BlcnR5LnZhbHVlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMudG9nZ2xlT3ZlcmxheUNsYXNzKG51bGwpO1xuICAgICAgfVxuXG4gICAgICAvLyBTZWxlY3QgdGhlIGl0ZW0gaW4gY2FzZSB0aGUgcHJvcGVydHkgd2FzIHNldCBmcm9tIG91dHNpZGVcbiAgICAgIHRoaXMuc2VsZWN0SXRlbShwcm9wZXJ0eS52YWx1ZSk7XG4gICAgfSk7XG5cbiAgICB0aGlzLm9uSXRlbVNlbGVjdGVkLnN1YnNjcmliZSgoc2VuZGVyLCBrZXk6IHN0cmluZykgPT4ge1xuICAgICAgdGhpcy5zZXR0aW5nc01hbmFnZXIuZm9udEZhbWlseS52YWx1ZSA9IGtleTtcbiAgICB9KTtcblxuICAgIC8vIExvYWQgaW5pdGlhbCB2YWx1ZVxuICAgIGlmICh0aGlzLnNldHRpbmdzTWFuYWdlci5mb250RmFtaWx5LmlzU2V0KCkpIHtcbiAgICAgIHRoaXMuc2VsZWN0SXRlbSh0aGlzLnNldHRpbmdzTWFuYWdlci5mb250RmFtaWx5LnZhbHVlKTtcbiAgICB9XG4gIH1cbn1cbiIsImltcG9ydCB7IFN1YnRpdGxlU2V0dGluZ1NlbGVjdEJveCwgU3VidGl0bGVTZXR0aW5nU2VsZWN0Qm94Q29uZmlnIH0gZnJvbSAnLi9zdWJ0aXRsZXNldHRpbmdzZWxlY3Rib3gnO1xuaW1wb3J0IHtVSUluc3RhbmNlTWFuYWdlcn0gZnJvbSAnLi4vLi4vdWltYW5hZ2VyJztcbmltcG9ydCB7IFBsYXllckFQSSB9IGZyb20gJ2JpdG1vdmluLXBsYXllcic7XG5pbXBvcnQgeyBpMThuIH0gZnJvbSAnLi4vLi4vbG9jYWxpemF0aW9uL2kxOG4nO1xuXG4vKipcbiAqIEEgc2VsZWN0IGJveCBwcm92aWRpbmcgYSBzZWxlY3Rpb24gb2YgZGlmZmVyZW50IGZvbnQgY29sb3JzLlxuICpcbiAqIEBjYXRlZ29yeSBDb21wb25lbnRzXG4gKi9cbmV4cG9ydCBjbGFzcyBGb250T3BhY2l0eVNlbGVjdEJveCBleHRlbmRzIFN1YnRpdGxlU2V0dGluZ1NlbGVjdEJveCB7XG5cbiAgY29uc3RydWN0b3IoY29uZmlnOiBTdWJ0aXRsZVNldHRpbmdTZWxlY3RCb3hDb25maWcpIHtcbiAgICBzdXBlcihjb25maWcpO1xuXG4gICAgdGhpcy5jb25maWcgPSB0aGlzLm1lcmdlQ29uZmlnKGNvbmZpZywge1xuICAgICAgY3NzQ2xhc3NlczogWyd1aS1zdWJ0aXRsZXNldHRpbmdzZm9udG9wYWNpdHlzZWxlY3Rib3gnXSxcbiAgICB9LCB0aGlzLmNvbmZpZyk7XG4gIH1cblxuICBjb25maWd1cmUocGxheWVyOiBQbGF5ZXJBUEksIHVpbWFuYWdlcjogVUlJbnN0YW5jZU1hbmFnZXIpOiB2b2lkIHtcbiAgICBzdXBlci5jb25maWd1cmUocGxheWVyLCB1aW1hbmFnZXIpO1xuXG4gICAgdGhpcy5hZGRJdGVtKG51bGwsIGkxOG4uZ2V0TG9jYWxpemVyKCdkZWZhdWx0JykpO1xuICAgIHRoaXMuYWRkSXRlbSgnMTAwJywgaTE4bi5nZXRMb2NhbGl6ZXIoJ3BlcmNlbnQnLCB7IHZhbHVlOiAxMDAgfSkpO1xuICAgIHRoaXMuYWRkSXRlbSgnNzUnLCBpMThuLmdldExvY2FsaXplcigncGVyY2VudCcsIHsgdmFsdWU6IDc1IH0pKTtcbiAgICB0aGlzLmFkZEl0ZW0oJzUwJywgaTE4bi5nZXRMb2NhbGl6ZXIoJ3BlcmNlbnQnLCB7IHZhbHVlOiA1MCB9KSk7XG4gICAgdGhpcy5hZGRJdGVtKCcyNScsIGkxOG4uZ2V0TG9jYWxpemVyKCdwZXJjZW50JywgeyB2YWx1ZTogMjUgfSkpO1xuXG4gICAgdGhpcy5vbkl0ZW1TZWxlY3RlZC5zdWJzY3JpYmUoKHNlbmRlciwga2V5OiBzdHJpbmcpID0+IHtcbiAgICAgIHRoaXMuc2V0dGluZ3NNYW5hZ2VyLmZvbnRPcGFjaXR5LnZhbHVlID0ga2V5O1xuXG4gICAgICAvLyBDb2xvciBhbmQgb3BhY2l0eSBnbyB0b2dldGhlciwgc28gd2UgbmVlZCB0by4uLlxuICAgICAgaWYgKCF0aGlzLnNldHRpbmdzTWFuYWdlci5mb250T3BhY2l0eS5pc1NldCgpKSB7XG4gICAgICAgIC8vIC4uLiBjbGVhciB0aGUgY29sb3Igd2hlbiB0aGUgb3BhY2l0eSBpcyBub3Qgc2V0XG4gICAgICAgIHRoaXMuc2V0dGluZ3NNYW5hZ2VyLmZvbnRDb2xvci5jbGVhcigpO1xuICAgICAgfSBlbHNlIGlmICghdGhpcy5zZXR0aW5nc01hbmFnZXIuZm9udENvbG9yLmlzU2V0KCkpIHtcbiAgICAgICAgLy8gLi4uIHNldCBhIGNvbG9yIHdoZW4gdGhlIG9wYWNpdHkgaXMgc2V0XG4gICAgICAgIHRoaXMuc2V0dGluZ3NNYW5hZ2VyLmZvbnRDb2xvci52YWx1ZSA9ICd3aGl0ZSc7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICAvLyBVcGRhdGUgc2VsZWN0ZWQgaXRlbSB3aGVuIHZhbHVlIGlzIHNldCBmcm9tIHNvbWV3aGVyZSBlbHNlXG4gICAgdGhpcy5zZXR0aW5nc01hbmFnZXIuZm9udE9wYWNpdHkub25DaGFuZ2VkLnN1YnNjcmliZSgoc2VuZGVyLCBwcm9wZXJ0eSkgPT4ge1xuICAgICAgdGhpcy5zZWxlY3RJdGVtKHByb3BlcnR5LnZhbHVlKTtcbiAgICB9KTtcblxuICAgIC8vIExvYWQgaW5pdGlhbCB2YWx1ZVxuICAgIGlmICh0aGlzLnNldHRpbmdzTWFuYWdlci5mb250T3BhY2l0eS5pc1NldCgpKSB7XG4gICAgICB0aGlzLnNlbGVjdEl0ZW0odGhpcy5zZXR0aW5nc01hbmFnZXIuZm9udE9wYWNpdHkudmFsdWUpO1xuICAgIH1cbiAgfVxufVxuIiwiaW1wb3J0IHsgU3VidGl0bGVTZXR0aW5nU2VsZWN0Qm94LCBTdWJ0aXRsZVNldHRpbmdTZWxlY3RCb3hDb25maWcgfSBmcm9tICcuL3N1YnRpdGxlc2V0dGluZ3NlbGVjdGJveCc7XG5pbXBvcnQge1VJSW5zdGFuY2VNYW5hZ2VyfSBmcm9tICcuLi8uLi91aW1hbmFnZXInO1xuaW1wb3J0IHsgUGxheWVyQVBJIH0gZnJvbSAnYml0bW92aW4tcGxheWVyJztcbmltcG9ydCB7IGkxOG4gfSBmcm9tICcuLi8uLi9sb2NhbGl6YXRpb24vaTE4bic7XG5cbi8qKlxuICogQSBzZWxlY3QgYm94IHByb3ZpZGluZyBhIHNlbGVjdGlvbiBvZiBkaWZmZXJlbnQgZm9udCBjb2xvcnMuXG4gKlxuICogQGNhdGVnb3J5IENvbXBvbmVudHNcbiAqL1xuZXhwb3J0IGNsYXNzIEZvbnRTaXplU2VsZWN0Qm94IGV4dGVuZHMgU3VidGl0bGVTZXR0aW5nU2VsZWN0Qm94IHtcblxuICBjb25zdHJ1Y3Rvcihjb25maWc6IFN1YnRpdGxlU2V0dGluZ1NlbGVjdEJveENvbmZpZykge1xuICAgIHN1cGVyKGNvbmZpZyk7XG5cbiAgICB0aGlzLmNvbmZpZyA9IHRoaXMubWVyZ2VDb25maWcoY29uZmlnLCB7XG4gICAgICBjc3NDbGFzc2VzOiBbJ3VpLXN1YnRpdGxlc2V0dGluZ3Nmb250c2l6ZXNlbGVjdGJveCddLFxuICAgIH0sIHRoaXMuY29uZmlnKTtcbiAgfVxuXG4gIGNvbmZpZ3VyZShwbGF5ZXI6IFBsYXllckFQSSwgdWltYW5hZ2VyOiBVSUluc3RhbmNlTWFuYWdlcik6IHZvaWQge1xuICAgIHN1cGVyLmNvbmZpZ3VyZShwbGF5ZXIsIHVpbWFuYWdlcik7XG5cbiAgICB0aGlzLmFkZEl0ZW0obnVsbCwgaTE4bi5nZXRMb2NhbGl6ZXIoJ2RlZmF1bHQnKSk7XG4gICAgdGhpcy5hZGRJdGVtKCc1MCcsIGkxOG4uZ2V0TG9jYWxpemVyKCdwZXJjZW50JywgeyB2YWx1ZTogNTAgfSkpO1xuICAgIHRoaXMuYWRkSXRlbSgnNzUnLCBpMThuLmdldExvY2FsaXplcigncGVyY2VudCcsIHsgdmFsdWU6IDc1IH0pKTtcbiAgICB0aGlzLmFkZEl0ZW0oJzEwMCcsIGkxOG4uZ2V0TG9jYWxpemVyKCdwZXJjZW50JywgeyB2YWx1ZTogMTAwIH0pKTtcbiAgICB0aGlzLmFkZEl0ZW0oJzE1MCcsIGkxOG4uZ2V0TG9jYWxpemVyKCdwZXJjZW50JywgeyB2YWx1ZTogMTUwIH0pKTtcbiAgICB0aGlzLmFkZEl0ZW0oJzIwMCcsIGkxOG4uZ2V0TG9jYWxpemVyKCdwZXJjZW50JywgeyB2YWx1ZTogMjAwIH0pKTtcbiAgICB0aGlzLmFkZEl0ZW0oJzMwMCcsIGkxOG4uZ2V0TG9jYWxpemVyKCdwZXJjZW50JywgeyB2YWx1ZTogMzAwIH0pKTtcbiAgICB0aGlzLmFkZEl0ZW0oJzQwMCcsIGkxOG4uZ2V0TG9jYWxpemVyKCdwZXJjZW50JywgeyB2YWx1ZTogNDAwIH0pKTtcblxuICAgIHRoaXMuc2V0dGluZ3NNYW5hZ2VyLmZvbnRTaXplLm9uQ2hhbmdlZC5zdWJzY3JpYmUoKHNlbmRlciwgcHJvcGVydHkpID0+IHtcbiAgICAgIGlmIChwcm9wZXJ0eS5pc1NldCgpKSB7XG4gICAgICAgIHRoaXMudG9nZ2xlT3ZlcmxheUNsYXNzKCdmb250c2l6ZS0nICsgcHJvcGVydHkudmFsdWUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy50b2dnbGVPdmVybGF5Q2xhc3MobnVsbCk7XG4gICAgICB9XG5cbiAgICAgIC8vIFNlbGVjdCB0aGUgaXRlbSBpbiBjYXNlIHRoZSBwcm9wZXJ0eSB3YXMgc2V0IGZyb20gb3V0c2lkZVxuICAgICAgdGhpcy5zZWxlY3RJdGVtKHByb3BlcnR5LnZhbHVlKTtcbiAgICB9KTtcblxuICAgIHRoaXMub25JdGVtU2VsZWN0ZWQuc3Vic2NyaWJlKChzZW5kZXIsIGtleTogc3RyaW5nKSA9PiB7XG4gICAgICB0aGlzLnNldHRpbmdzTWFuYWdlci5mb250U2l6ZS52YWx1ZSA9IGtleTtcbiAgICB9KTtcblxuICAgIC8vIExvYWQgaW5pdGlhbCB2YWx1ZVxuICAgIGlmICh0aGlzLnNldHRpbmdzTWFuYWdlci5mb250U2l6ZS5pc1NldCgpKSB7XG4gICAgICB0aGlzLnNlbGVjdEl0ZW0odGhpcy5zZXR0aW5nc01hbmFnZXIuZm9udFNpemUudmFsdWUpO1xuICAgIH1cbiAgfVxufVxuIiwiaW1wb3J0IHtTdWJ0aXRsZU92ZXJsYXl9IGZyb20gJy4uL3N1YnRpdGxlb3ZlcmxheSc7XG5pbXBvcnQge0xpc3RTZWxlY3RvckNvbmZpZ30gZnJvbSAnLi4vbGlzdHNlbGVjdG9yJztcbmltcG9ydCB7U2VsZWN0Qm94fSBmcm9tICcuLi9zZWxlY3Rib3gnO1xuaW1wb3J0IHtTdWJ0aXRsZVNldHRpbmdzTWFuYWdlcn0gZnJvbSAnLi9zdWJ0aXRsZXNldHRpbmdzbWFuYWdlcic7XG5pbXBvcnQgeyBQbGF5ZXJBUEkgfSBmcm9tICdiaXRtb3Zpbi1wbGF5ZXInO1xuaW1wb3J0IHsgVUlJbnN0YW5jZU1hbmFnZXIgfSBmcm9tICcuLi8uLi91aW1hbmFnZXInO1xuXG4vKipcbiAqIEBjYXRlZ29yeSBDb25maWdzXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgU3VidGl0bGVTZXR0aW5nU2VsZWN0Qm94Q29uZmlnIGV4dGVuZHMgTGlzdFNlbGVjdG9yQ29uZmlnIHtcbiAgb3ZlcmxheTogU3VidGl0bGVPdmVybGF5O1xufVxuXG4vKipcbiAqIEJhc2UgY2xhc3MgZm9yIGFsbCBzdWJ0aXRsZXMgc2V0dGluZ3Mgc2VsZWN0IGJveFxuICpcbiAqIEBjYXRlZ29yeSBDb21wb25lbnRzXG4gKiovXG5leHBvcnQgY2xhc3MgU3VidGl0bGVTZXR0aW5nU2VsZWN0Qm94IGV4dGVuZHMgU2VsZWN0Qm94IHtcblxuICBwcm90ZWN0ZWQgc2V0dGluZ3NNYW5hZ2VyPzogU3VidGl0bGVTZXR0aW5nc01hbmFnZXI7XG4gIHByb3RlY3RlZCBvdmVybGF5OiBTdWJ0aXRsZU92ZXJsYXk7XG4gIHByaXZhdGUgY3VycmVudENzc0NsYXNzOiBzdHJpbmc7XG5cbiAgY29uc3RydWN0b3IoY29uZmlnOiBTdWJ0aXRsZVNldHRpbmdTZWxlY3RCb3hDb25maWcpIHtcbiAgICBzdXBlcihjb25maWcpO1xuXG4gICAgdGhpcy5vdmVybGF5ID0gY29uZmlnLm92ZXJsYXk7XG4gIH1cblxuICAvKipcbiAgICogUmVtb3ZlcyBhIHByZXZpb3VzbHkgc2V0IGNsYXNzIGFuZCBhZGRzIHRoZSBwYXNzZWQgaW4gY2xhc3MuXG4gICAqIEBwYXJhbSBjc3NDbGFzcyBUaGUgbmV3IGNsYXNzIHRvIHJlcGxhY2UgdGhlIHByZXZpb3VzIGNsYXNzIHdpdGggb3IgbnVsbCB0byBqdXN0IHJlbW92ZSB0aGUgcHJldmlvdXMgY2xhc3NcbiAgICovXG4gIHByb3RlY3RlZCB0b2dnbGVPdmVybGF5Q2xhc3MoY3NzQ2xhc3M6IHN0cmluZyk6IHZvaWQge1xuICAgIC8vIFJlbW92ZSBwcmV2aW91cyBjbGFzcyBpZiBleGlzdGluZ1xuICAgIGlmICh0aGlzLmN1cnJlbnRDc3NDbGFzcykge1xuICAgICAgdGhpcy5vdmVybGF5LmdldERvbUVsZW1lbnQoKS5yZW1vdmVDbGFzcyh0aGlzLmN1cnJlbnRDc3NDbGFzcyk7XG4gICAgICB0aGlzLmN1cnJlbnRDc3NDbGFzcyA9IG51bGw7XG4gICAgfVxuXG4gICAgLy8gQWRkIG5ldyBjbGFzcyBpZiBzcGVjaWZpZWQuIElmIHRoZSBuZXcgY2xhc3MgaXMgbnVsbCwgd2UgZG9uJ3QgYWRkIGFueXRoaW5nLlxuICAgIGlmIChjc3NDbGFzcykge1xuICAgICAgdGhpcy5jdXJyZW50Q3NzQ2xhc3MgPSB0aGlzLnByZWZpeENzcyhjc3NDbGFzcyk7XG4gICAgICB0aGlzLm92ZXJsYXkuZ2V0RG9tRWxlbWVudCgpLmFkZENsYXNzKHRoaXMuY3VycmVudENzc0NsYXNzKTtcbiAgICB9XG4gIH1cblxuICBjb25maWd1cmUocGxheWVyOiBQbGF5ZXJBUEksIHVpbWFuYWdlcjogVUlJbnN0YW5jZU1hbmFnZXIpOiB2b2lkIHtcbiAgICAgIHRoaXMuc2V0dGluZ3NNYW5hZ2VyID0gdWltYW5hZ2VyLmdldFN1YnRpdGxlU2V0dGluZ3NNYW5hZ2VyKCk7XG4gIH1cbn1cbiIsImltcG9ydCB7TGFiZWxDb25maWd9IGZyb20gJy4uL2xhYmVsJztcbmltcG9ydCB7Q29udGFpbmVyLCBDb250YWluZXJDb25maWd9IGZyb20gJy4uL2NvbnRhaW5lcic7XG5pbXBvcnQge0RPTX0gZnJvbSAnLi4vLi4vZG9tJztcbmltcG9ydCB7U2V0dGluZ3NQYW5lbFBhZ2VPcGVuQnV0dG9ufSBmcm9tICcuLi9zZXR0aW5nc3BhbmVscGFnZW9wZW5idXR0b24nO1xuaW1wb3J0IHsgTG9jYWxpemFibGVUZXh0LCBpMThuIH0gZnJvbSAnLi4vLi4vbG9jYWxpemF0aW9uL2kxOG4nO1xuXG4vKipcbiAqIEBjYXRlZ29yeSBDb25maWdzXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgU3VidGl0bGVTZXR0aW5nc0xhYmVsQ29uZmlnIGV4dGVuZHMgTGFiZWxDb25maWcge1xuICBvcGVuZXI6IFNldHRpbmdzUGFuZWxQYWdlT3BlbkJ1dHRvbjtcbn1cblxuLyoqXG4gKiBAY2F0ZWdvcnkgQ29tcG9uZW50c1xuICovXG5leHBvcnQgY2xhc3MgU3VidGl0bGVTZXR0aW5nc0xhYmVsIGV4dGVuZHMgQ29udGFpbmVyPENvbnRhaW5lckNvbmZpZz4ge1xuXG4gIHByaXZhdGUgb3BlbmVyOiBTZXR0aW5nc1BhbmVsUGFnZU9wZW5CdXR0b247XG5cbiAgcHJpdmF0ZSB0ZXh0OiBMb2NhbGl6YWJsZVRleHQ7XG5cbiAgcHJpdmF0ZSBmb3I6IHN0cmluZztcblxuICBjb25zdHJ1Y3Rvcihjb25maWc6IFN1YnRpdGxlU2V0dGluZ3NMYWJlbENvbmZpZykge1xuICAgIHN1cGVyKGNvbmZpZyk7XG5cbiAgICB0aGlzLm9wZW5lciA9IGNvbmZpZy5vcGVuZXI7XG4gICAgdGhpcy50ZXh0ID0gY29uZmlnLnRleHQ7XG4gICAgdGhpcy5mb3IgPSBjb25maWcuZm9yO1xuXG4gICAgdGhpcy5jb25maWcgPSB0aGlzLm1lcmdlQ29uZmlnKDxDb250YWluZXJDb25maWc+Y29uZmlnLCB7XG4gICAgICBjc3NDbGFzczogJ3VpLWxhYmVsJyxcbiAgICAgIGNvbXBvbmVudHM6IFtcbiAgICAgICAgdGhpcy5vcGVuZXIsXG4gICAgICBdLFxuICAgIH0sIHRoaXMuY29uZmlnKTtcbiAgfVxuXG4gIHByb3RlY3RlZCB0b0RvbUVsZW1lbnQoKTogRE9NIHtcbiAgICBsZXQgbGFiZWxFbGVtZW50ID0gbmV3IERPTSgnbGFiZWwnLCB7XG4gICAgICAnaWQnOiB0aGlzLmNvbmZpZy5pZCxcbiAgICAgICdjbGFzcyc6IHRoaXMuZ2V0Q3NzQ2xhc3NlcygpLFxuICAgICAgJ2Zvcic6IHRoaXMuZm9yLFxuICAgIH0sIHRoaXMpLmFwcGVuZChcbiAgICAgIG5ldyBET00oJ3NwYW4nLCB7fSkuaHRtbChpMThuLnBlcmZvcm1Mb2NhbGl6YXRpb24odGhpcy50ZXh0KSksXG4gICAgICB0aGlzLm9wZW5lci5nZXREb21FbGVtZW50KCksXG4gICAgKTtcblxuICAgIHJldHVybiBsYWJlbEVsZW1lbnQ7XG4gIH1cbn1cbiIsImltcG9ydCB7IFN0b3JhZ2VVdGlscyB9IGZyb20gJy4uLy4uL3N0b3JhZ2V1dGlscyc7XG5pbXBvcnQgeyBDb21wb25lbnQsIENvbXBvbmVudENvbmZpZyB9IGZyb20gJy4uL2NvbXBvbmVudCc7XG5pbXBvcnQgeyBFdmVudERpc3BhdGNoZXIsIEV2ZW50IH0gZnJvbSAnLi4vLi4vZXZlbnRkaXNwYXRjaGVyJztcblxuaW50ZXJmYWNlIFN1YnRpdGxlU2V0dGluZ3Mge1xuICBmb250Q29sb3I/OiBzdHJpbmc7XG4gIGZvbnRPcGFjaXR5Pzogc3RyaW5nO1xuICBmb250RmFtaWx5Pzogc3RyaW5nO1xuICBmb250U2l6ZT86IHN0cmluZztcbiAgY2hhcmFjdGVyRWRnZT86IHN0cmluZztcbiAgYmFja2dyb3VuZENvbG9yPzogc3RyaW5nO1xuICBiYWNrZ3JvdW5kT3BhY2l0eT86IHN0cmluZztcbiAgd2luZG93Q29sb3I/OiBzdHJpbmc7XG4gIHdpbmRvd09wYWNpdHk/OiBzdHJpbmc7XG59XG5cbmludGVyZmFjZSBQcm9wZXJ0aWVzIHtcbiAgW25hbWU6IHN0cmluZ106IFN1YnRpdGxlU2V0dGluZ3NQcm9wZXJ0eTxzdHJpbmc+O1xufVxuXG4vKipcbiAqIEBjYXRlZ29yeSBVdGlsc1xuICovXG5leHBvcnQgY2xhc3MgU3VidGl0bGVTZXR0aW5nc01hbmFnZXIge1xuICBwcml2YXRlIHVzZXJTZXR0aW5nczogU3VidGl0bGVTZXR0aW5ncztcbiAgcHJpdmF0ZSBsb2NhbFN0b3JhZ2VLZXk6IHN0cmluZztcblxuICBwcml2YXRlIF9wcm9wZXJ0aWVzOiBQcm9wZXJ0aWVzID0ge1xuICAgIGZvbnRDb2xvcjogbmV3IFN1YnRpdGxlU2V0dGluZ3NQcm9wZXJ0eTxzdHJpbmc+KHRoaXMpLFxuICAgIGZvbnRPcGFjaXR5OiBuZXcgU3VidGl0bGVTZXR0aW5nc1Byb3BlcnR5PHN0cmluZz4odGhpcyksXG4gICAgZm9udEZhbWlseTogbmV3IFN1YnRpdGxlU2V0dGluZ3NQcm9wZXJ0eTxzdHJpbmc+KHRoaXMpLFxuICAgIGZvbnRTaXplOiBuZXcgU3VidGl0bGVTZXR0aW5nc1Byb3BlcnR5PHN0cmluZz4odGhpcyksXG4gICAgY2hhcmFjdGVyRWRnZTogbmV3IFN1YnRpdGxlU2V0dGluZ3NQcm9wZXJ0eTxzdHJpbmc+KHRoaXMpLFxuICAgIGJhY2tncm91bmRDb2xvcjogbmV3IFN1YnRpdGxlU2V0dGluZ3NQcm9wZXJ0eTxzdHJpbmc+KHRoaXMpLFxuICAgIGJhY2tncm91bmRPcGFjaXR5OiBuZXcgU3VidGl0bGVTZXR0aW5nc1Byb3BlcnR5PHN0cmluZz4odGhpcyksXG4gICAgd2luZG93Q29sb3I6IG5ldyBTdWJ0aXRsZVNldHRpbmdzUHJvcGVydHk8c3RyaW5nPih0aGlzKSxcbiAgICB3aW5kb3dPcGFjaXR5OiBuZXcgU3VidGl0bGVTZXR0aW5nc1Byb3BlcnR5PHN0cmluZz4odGhpcyksXG4gIH07XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy51c2VyU2V0dGluZ3MgPSB7fTtcbiAgICB0aGlzLmxvY2FsU3RvcmFnZUtleSA9XG4gICAgICBEdW1teUNvbXBvbmVudC5pbnN0YW5jZSgpLnByZWZpeENzcygnc3VidGl0bGVzZXR0aW5ncycpO1xuICB9XG5cbiAgcHVibGljIHJlc2V0KCk6IHZvaWQge1xuICAgIGZvciAobGV0IHByb3BlcnR5TmFtZSBpbiB0aGlzLl9wcm9wZXJ0aWVzKSB7XG4gICAgICB0aGlzLl9wcm9wZXJ0aWVzW3Byb3BlcnR5TmFtZV0uY2xlYXIoKTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgZ2V0IGZvbnRDb2xvcigpOiBTdWJ0aXRsZVNldHRpbmdzUHJvcGVydHk8c3RyaW5nPiB7XG4gICAgcmV0dXJuIHRoaXMuX3Byb3BlcnRpZXMuZm9udENvbG9yO1xuICB9XG5cbiAgcHVibGljIGdldCBmb250T3BhY2l0eSgpOiBTdWJ0aXRsZVNldHRpbmdzUHJvcGVydHk8c3RyaW5nPiB7XG4gICAgcmV0dXJuIHRoaXMuX3Byb3BlcnRpZXMuZm9udE9wYWNpdHk7XG4gIH1cblxuICBwdWJsaWMgZ2V0IGZvbnRGYW1pbHkoKTogU3VidGl0bGVTZXR0aW5nc1Byb3BlcnR5PHN0cmluZz4ge1xuICAgIHJldHVybiB0aGlzLl9wcm9wZXJ0aWVzLmZvbnRGYW1pbHk7XG4gIH1cblxuICBwdWJsaWMgZ2V0IGZvbnRTaXplKCk6IFN1YnRpdGxlU2V0dGluZ3NQcm9wZXJ0eTxzdHJpbmc+IHtcbiAgICByZXR1cm4gdGhpcy5fcHJvcGVydGllcy5mb250U2l6ZTtcbiAgfVxuXG4gIHB1YmxpYyBnZXQgY2hhcmFjdGVyRWRnZSgpOiBTdWJ0aXRsZVNldHRpbmdzUHJvcGVydHk8c3RyaW5nPiB7XG4gICAgcmV0dXJuIHRoaXMuX3Byb3BlcnRpZXMuY2hhcmFjdGVyRWRnZTtcbiAgfVxuXG4gIHB1YmxpYyBnZXQgYmFja2dyb3VuZENvbG9yKCk6IFN1YnRpdGxlU2V0dGluZ3NQcm9wZXJ0eTxzdHJpbmc+IHtcbiAgICByZXR1cm4gdGhpcy5fcHJvcGVydGllcy5iYWNrZ3JvdW5kQ29sb3I7XG4gIH1cblxuICBwdWJsaWMgZ2V0IGJhY2tncm91bmRPcGFjaXR5KCk6IFN1YnRpdGxlU2V0dGluZ3NQcm9wZXJ0eTxzdHJpbmc+IHtcbiAgICByZXR1cm4gdGhpcy5fcHJvcGVydGllcy5iYWNrZ3JvdW5kT3BhY2l0eTtcbiAgfVxuXG4gIHB1YmxpYyBnZXQgd2luZG93Q29sb3IoKTogU3VidGl0bGVTZXR0aW5nc1Byb3BlcnR5PHN0cmluZz4ge1xuICAgIHJldHVybiB0aGlzLl9wcm9wZXJ0aWVzLndpbmRvd0NvbG9yO1xuICB9XG5cbiAgcHVibGljIGdldCB3aW5kb3dPcGFjaXR5KCk6IFN1YnRpdGxlU2V0dGluZ3NQcm9wZXJ0eTxzdHJpbmc+IHtcbiAgICByZXR1cm4gdGhpcy5fcHJvcGVydGllcy53aW5kb3dPcGFjaXR5O1xuICB9XG5cbiAgcHVibGljIGluaXRpYWxpemUoKSB7XG4gICAgZm9yIChsZXQgcHJvcGVydHlOYW1lIGluIHRoaXMuX3Byb3BlcnRpZXMpIHtcbiAgICAgIHRoaXMuX3Byb3BlcnRpZXNbcHJvcGVydHlOYW1lXS5vbkNoYW5nZWQuc3Vic2NyaWJlKChzZW5kZXIsIHByb3BlcnR5KSA9PiB7XG4gICAgICAgIGlmIChwcm9wZXJ0eS5pc1NldCgpKSB7XG4gICAgICAgICAgKDxhbnk+dGhpcy51c2VyU2V0dGluZ3MpW3Byb3BlcnR5TmFtZV0gPSBwcm9wZXJ0eS52YWx1ZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBEZWxldGUgdGhlIHByb3BlcnR5IGZyb20gdGhlIHNldHRpbmdzIG9iamVjdCBpZiB1bnNldCB0byBhdm9pZCBzZXJpYWxpemF0aW9uIG9mIG51bGwgdmFsdWVzXG4gICAgICAgICAgZGVsZXRlICg8YW55PnRoaXMudXNlclNldHRpbmdzKVtwcm9wZXJ0eU5hbWVdO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gU2F2ZSB0aGUgc2V0dGluZ3Mgb2JqZWN0IHdoZW4gYSBwcm9wZXJ0eSBoYXMgY2hhbmdlZFxuICAgICAgICB0aGlzLnNhdmUoKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHRoaXMubG9hZCgpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNhdmVzIHRoZSBzZXR0aW5ncyB0byBsb2NhbCBzdG9yYWdlLlxuICAgKi9cbiAgcHVibGljIHNhdmUoKTogdm9pZCB7XG4gICAgU3RvcmFnZVV0aWxzLnNldE9iamVjdCh0aGlzLmxvY2FsU3RvcmFnZUtleSwgdGhpcy51c2VyU2V0dGluZ3MpO1xuICB9XG5cbiAgLyoqXG4gICAqIExvYWRzIHRoZSBzZXR0aW5ncyBmcm9tIGxvY2FsIHN0b3JhZ2VcbiAgICovXG4gIHB1YmxpYyBsb2FkKCk6IHZvaWQge1xuICAgIHRoaXMudXNlclNldHRpbmdzID1cbiAgICAgIFN0b3JhZ2VVdGlscy5nZXRPYmplY3Q8U3VidGl0bGVTZXR0aW5ncz4odGhpcy5sb2NhbFN0b3JhZ2VLZXkpIHx8IHt9O1xuXG4gICAgLy8gQXBwbHkgdGhlIGxvYWRlZCBzZXR0aW5nc1xuICAgIGZvciAobGV0IHByb3BlcnR5IGluIHRoaXMudXNlclNldHRpbmdzKSB7XG4gICAgICB0aGlzLl9wcm9wZXJ0aWVzW3Byb3BlcnR5XS52YWx1ZSA9ICg8YW55PnRoaXMudXNlclNldHRpbmdzKVtwcm9wZXJ0eV07XG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogQSBkdW1teSBjb21wb25lbnQgd2hvc2Ugc29sZSBwdXJwb3NlIGlzIHRvIGV4cG9zZSB0aGUge0BsaW5rICNwcmVmaXhDc3N9IG1ldGhvZCB0byB0aGVcbiAqIHtAbGluayBTdWJ0aXRsZVNldHRpbmdzTWFuYWdlcn0uXG4gKi9cbmNsYXNzIER1bW15Q29tcG9uZW50IGV4dGVuZHMgQ29tcG9uZW50PENvbXBvbmVudENvbmZpZz4ge1xuICBwcml2YXRlIHN0YXRpYyBfaW5zdGFuY2U6IER1bW15Q29tcG9uZW50O1xuXG4gIHB1YmxpYyBzdGF0aWMgaW5zdGFuY2UoKTogRHVtbXlDb21wb25lbnQge1xuICAgIGlmICghRHVtbXlDb21wb25lbnQuX2luc3RhbmNlKSB7XG4gICAgICBEdW1teUNvbXBvbmVudC5faW5zdGFuY2UgPSBuZXcgRHVtbXlDb21wb25lbnQoKTtcbiAgICB9XG5cbiAgICByZXR1cm4gRHVtbXlDb21wb25lbnQuX2luc3RhbmNlO1xuICB9XG5cbiAgcHVibGljIHByZWZpeENzcyhjc3NDbGFzc09ySWQ6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHN1cGVyLnByZWZpeENzcyhjc3NDbGFzc09ySWQpO1xuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBTdWJ0aXRsZVNldHRpbmdzUHJvcGVydHk8VD4ge1xuICBwcml2YXRlIF9tYW5hZ2VyOiBTdWJ0aXRsZVNldHRpbmdzTWFuYWdlcjtcbiAgcHJpdmF0ZSBfb25DaGFuZ2VkOiBFdmVudERpc3BhdGNoZXI8XG4gICAgU3VidGl0bGVTZXR0aW5nc01hbmFnZXIsXG4gICAgU3VidGl0bGVTZXR0aW5nc1Byb3BlcnR5PFQ+XG4gID47XG4gIHByaXZhdGUgX3ZhbHVlOiBUO1xuXG4gIGNvbnN0cnVjdG9yKG1hbmFnZXI6IFN1YnRpdGxlU2V0dGluZ3NNYW5hZ2VyKSB7XG4gICAgdGhpcy5fbWFuYWdlciA9IG1hbmFnZXI7XG4gICAgdGhpcy5fb25DaGFuZ2VkID0gbmV3IEV2ZW50RGlzcGF0Y2hlcjxcbiAgICAgIFN1YnRpdGxlU2V0dGluZ3NNYW5hZ2VyLFxuICAgICAgU3VidGl0bGVTZXR0aW5nc1Byb3BlcnR5PFQ+XG4gICAgPigpO1xuICB9XG5cbiAgcHVibGljIGlzU2V0KCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLl92YWx1ZSAhPSBudWxsO1xuICB9XG5cbiAgcHVibGljIGNsZWFyKCk6IHZvaWQge1xuICAgIHRoaXMuX3ZhbHVlID0gbnVsbDtcbiAgICB0aGlzLm9uQ2hhbmdlZEV2ZW50KG51bGwpO1xuICB9XG5cbiAgcHVibGljIGdldCB2YWx1ZSgpOiBUIHtcbiAgICByZXR1cm4gdGhpcy5fdmFsdWU7XG4gIH1cblxuICBwdWJsaWMgc2V0IHZhbHVlKHZhbHVlOiBUKSB7XG4gICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycgJiYgdmFsdWUgPT09ICdudWxsJykge1xuICAgICAgdmFsdWUgPSBudWxsO1xuICAgIH1cblxuICAgIHRoaXMuX3ZhbHVlID0gdmFsdWU7XG4gICAgdGhpcy5vbkNoYW5nZWRFdmVudCh2YWx1ZSk7XG4gIH1cblxuICBwcm90ZWN0ZWQgb25DaGFuZ2VkRXZlbnQodmFsdWU6IFQpIHtcbiAgICB0aGlzLl9vbkNoYW5nZWQuZGlzcGF0Y2godGhpcy5fbWFuYWdlciwgdGhpcyk7XG4gIH1cblxuICBwdWJsaWMgZ2V0IG9uQ2hhbmdlZCgpOiBFdmVudDxcbiAgICBTdWJ0aXRsZVNldHRpbmdzTWFuYWdlcixcbiAgICBTdWJ0aXRsZVNldHRpbmdzUHJvcGVydHk8VD5cbiAgPiB7XG4gICAgcmV0dXJuIHRoaXMuX29uQ2hhbmdlZC5nZXRFdmVudCgpO1xuICB9XG59XG4iLCJpbXBvcnQge1NldHRpbmdzUGFuZWxQYWdlfSBmcm9tICcuLi9zZXR0aW5nc3BhbmVscGFnZSc7XG5pbXBvcnQge1NldHRpbmdzUGFuZWx9IGZyb20gJy4uL3NldHRpbmdzcGFuZWwnO1xuaW1wb3J0IHtTdWJ0aXRsZU92ZXJsYXl9IGZyb20gJy4uL3N1YnRpdGxlb3ZlcmxheSc7XG5pbXBvcnQge0NvbnRhaW5lckNvbmZpZ30gZnJvbSAnLi4vY29udGFpbmVyJztcbmltcG9ydCB7U3VidGl0bGVTZXR0aW5nc01hbmFnZXJ9IGZyb20gJy4vc3VidGl0bGVzZXR0aW5nc21hbmFnZXInO1xuaW1wb3J0IHtDb21wb25lbnQsIENvbXBvbmVudENvbmZpZ30gZnJvbSAnLi4vY29tcG9uZW50JztcbmltcG9ydCB7Rm9udFNpemVTZWxlY3RCb3h9IGZyb20gJy4vZm9udHNpemVzZWxlY3Rib3gnO1xuaW1wb3J0IHtGb250RmFtaWx5U2VsZWN0Qm94fSBmcm9tICcuL2ZvbnRmYW1pbHlzZWxlY3Rib3gnO1xuaW1wb3J0IHtGb250Q29sb3JTZWxlY3RCb3h9IGZyb20gJy4vZm9udGNvbG9yc2VsZWN0Ym94JztcbmltcG9ydCB7Rm9udE9wYWNpdHlTZWxlY3RCb3h9IGZyb20gJy4vZm9udG9wYWNpdHlzZWxlY3Rib3gnO1xuaW1wb3J0IHtDaGFyYWN0ZXJFZGdlU2VsZWN0Qm94fSBmcm9tICcuL2NoYXJhY3RlcmVkZ2VzZWxlY3Rib3gnO1xuaW1wb3J0IHtCYWNrZ3JvdW5kQ29sb3JTZWxlY3RCb3h9IGZyb20gJy4vYmFja2dyb3VuZGNvbG9yc2VsZWN0Ym94JztcbmltcG9ydCB7QmFja2dyb3VuZE9wYWNpdHlTZWxlY3RCb3h9IGZyb20gJy4vYmFja2dyb3VuZG9wYWNpdHlzZWxlY3Rib3gnO1xuaW1wb3J0IHtXaW5kb3dDb2xvclNlbGVjdEJveH0gZnJvbSAnLi93aW5kb3djb2xvcnNlbGVjdGJveCc7XG5pbXBvcnQge1dpbmRvd09wYWNpdHlTZWxlY3RCb3h9IGZyb20gJy4vd2luZG93b3BhY2l0eXNlbGVjdGJveCc7XG5pbXBvcnQge1N1YnRpdGxlU2V0dGluZ3NSZXNldEJ1dHRvbn0gZnJvbSAnLi9zdWJ0aXRsZXNldHRpbmdzcmVzZXRidXR0b24nO1xuaW1wb3J0IHtVSUluc3RhbmNlTWFuYWdlcn0gZnJvbSAnLi4vLi4vdWltYW5hZ2VyJztcbmltcG9ydCB7U2V0dGluZ3NQYW5lbFBhZ2VCYWNrQnV0dG9ufSBmcm9tICcuLi9zZXR0aW5nc3BhbmVscGFnZWJhY2tidXR0b24nO1xuaW1wb3J0IHtTZXR0aW5nc1BhbmVsSXRlbX0gZnJvbSAnLi4vc2V0dGluZ3NwYW5lbGl0ZW0nO1xuaW1wb3J0IHsgUGxheWVyQVBJIH0gZnJvbSAnYml0bW92aW4tcGxheWVyJztcbmltcG9ydCB7IGkxOG4gfSBmcm9tICcuLi8uLi9sb2NhbGl6YXRpb24vaTE4bic7XG5cbi8qKlxuICogQGNhdGVnb3J5IENvbmZpZ3NcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBTdWJ0aXRsZVNldHRpbmdzUGFuZWxQYWdlQ29uZmlnIGV4dGVuZHMgQ29udGFpbmVyQ29uZmlnIHtcbiAgc2V0dGluZ3NQYW5lbDogU2V0dGluZ3NQYW5lbDtcbiAgb3ZlcmxheTogU3VidGl0bGVPdmVybGF5O1xufVxuXG4vKipcbiAqIEBjYXRlZ29yeSBDb21wb25lbnRzXG4gKi9cbmV4cG9ydCBjbGFzcyBTdWJ0aXRsZVNldHRpbmdzUGFuZWxQYWdlIGV4dGVuZHMgU2V0dGluZ3NQYW5lbFBhZ2Uge1xuXG4gIHByaXZhdGUgcmVhZG9ubHkgb3ZlcmxheTogU3VidGl0bGVPdmVybGF5O1xuICBwcml2YXRlIHJlYWRvbmx5IHNldHRpbmdzUGFuZWw6IFNldHRpbmdzUGFuZWw7XG5cbiAgY29uc3RydWN0b3IoY29uZmlnOiBTdWJ0aXRsZVNldHRpbmdzUGFuZWxQYWdlQ29uZmlnKSB7XG4gICAgc3VwZXIoY29uZmlnKTtcblxuICAgIHRoaXMub3ZlcmxheSA9IGNvbmZpZy5vdmVybGF5O1xuICAgIHRoaXMuc2V0dGluZ3NQYW5lbCA9IGNvbmZpZy5zZXR0aW5nc1BhbmVsO1xuXG5cbiAgICB0aGlzLmNvbmZpZyA9IHRoaXMubWVyZ2VDb25maWcoY29uZmlnLCB7XG4gICAgICBjb21wb25lbnRzOiA8Q29tcG9uZW50PENvbXBvbmVudENvbmZpZz5bXT5bXG4gICAgICAgIG5ldyBTZXR0aW5nc1BhbmVsSXRlbShpMThuLmdldExvY2FsaXplcignc2V0dGluZ3Muc3VidGl0bGVzLmZvbnQuc2l6ZScpLCBuZXcgRm9udFNpemVTZWxlY3RCb3goe1xuICAgICAgICAgIG92ZXJsYXk6IHRoaXMub3ZlcmxheSxcbiAgICAgICAgfSkpLFxuICAgICAgICBuZXcgU2V0dGluZ3NQYW5lbEl0ZW0oaTE4bi5nZXRMb2NhbGl6ZXIoJ3NldHRpbmdzLnN1YnRpdGxlcy5mb250LmZhbWlseScpLCBuZXcgRm9udEZhbWlseVNlbGVjdEJveCh7XG4gICAgICAgICAgb3ZlcmxheTogdGhpcy5vdmVybGF5LFxuICAgICAgICB9KSksXG4gICAgICAgIG5ldyBTZXR0aW5nc1BhbmVsSXRlbShpMThuLmdldExvY2FsaXplcignc2V0dGluZ3Muc3VidGl0bGVzLmZvbnQuY29sb3InKSwgbmV3IEZvbnRDb2xvclNlbGVjdEJveCh7XG4gICAgICAgICAgb3ZlcmxheTogdGhpcy5vdmVybGF5LFxuICAgICAgICB9KSksXG4gICAgICAgIG5ldyBTZXR0aW5nc1BhbmVsSXRlbShpMThuLmdldExvY2FsaXplcignc2V0dGluZ3Muc3VidGl0bGVzLmZvbnQub3BhY2l0eScpLCBuZXcgRm9udE9wYWNpdHlTZWxlY3RCb3goe1xuICAgICAgICAgIG92ZXJsYXk6IHRoaXMub3ZlcmxheSxcbiAgICAgICAgfSkpLFxuICAgICAgICBuZXcgU2V0dGluZ3NQYW5lbEl0ZW0oaTE4bi5nZXRMb2NhbGl6ZXIoJ3NldHRpbmdzLnN1YnRpdGxlcy5jaGFyYWN0ZXJFZGdlJyksIG5ldyBDaGFyYWN0ZXJFZGdlU2VsZWN0Qm94KHtcbiAgICAgICAgICBvdmVybGF5OiB0aGlzLm92ZXJsYXksXG4gICAgICAgIH0pKSxcbiAgICAgICAgbmV3IFNldHRpbmdzUGFuZWxJdGVtKGkxOG4uZ2V0TG9jYWxpemVyKCdzZXR0aW5ncy5zdWJ0aXRsZXMuYmFja2dyb3VuZC5jb2xvcicpLCBuZXcgQmFja2dyb3VuZENvbG9yU2VsZWN0Qm94KHtcbiAgICAgICAgICBvdmVybGF5OiB0aGlzLm92ZXJsYXksXG4gICAgICAgIH0pKSxcbiAgICAgICAgbmV3IFNldHRpbmdzUGFuZWxJdGVtKGkxOG4uZ2V0TG9jYWxpemVyKCdzZXR0aW5ncy5zdWJ0aXRsZXMuYmFja2dyb3VuZC5vcGFjaXR5JyksIG5ldyBCYWNrZ3JvdW5kT3BhY2l0eVNlbGVjdEJveCh7XG4gICAgICAgICAgb3ZlcmxheTogdGhpcy5vdmVybGF5LFxuICAgICAgICB9KSksXG4gICAgICAgIG5ldyBTZXR0aW5nc1BhbmVsSXRlbShpMThuLmdldExvY2FsaXplcignc2V0dGluZ3Muc3VidGl0bGVzLndpbmRvdy5jb2xvcicpLCBuZXcgV2luZG93Q29sb3JTZWxlY3RCb3goe1xuICAgICAgICAgIG92ZXJsYXk6IHRoaXMub3ZlcmxheSxcbiAgICAgICAgfSkpLFxuICAgICAgICBuZXcgU2V0dGluZ3NQYW5lbEl0ZW0oaTE4bi5nZXRMb2NhbGl6ZXIoJ3NldHRpbmdzLnN1YnRpdGxlcy53aW5kb3cub3BhY2l0eScpLCBuZXcgV2luZG93T3BhY2l0eVNlbGVjdEJveCh7XG4gICAgICAgICAgb3ZlcmxheTogdGhpcy5vdmVybGF5LFxuICAgICAgICB9KSksXG4gICAgICAgIG5ldyBTZXR0aW5nc1BhbmVsSXRlbShuZXcgU2V0dGluZ3NQYW5lbFBhZ2VCYWNrQnV0dG9uKHtcbiAgICAgICAgICBjb250YWluZXI6IHRoaXMuc2V0dGluZ3NQYW5lbCxcbiAgICAgICAgICB0ZXh0OiBpMThuLmdldExvY2FsaXplcignYmFjaycpLFxuICAgICAgICB9KSwgbmV3IFN1YnRpdGxlU2V0dGluZ3NSZXNldEJ1dHRvbih7fSksIHtcbiAgICAgICAgICByb2xlOiAnbWVudWJhcicsXG4gICAgICAgIH0pLFxuICAgICAgXSxcbiAgICB9LCB0aGlzLmNvbmZpZyk7XG4gIH1cblxuICBjb25maWd1cmUocGxheWVyOiBQbGF5ZXJBUEksIHVpbWFuYWdlcjogVUlJbnN0YW5jZU1hbmFnZXIpOiB2b2lkIHtcbiAgICBzdXBlci5jb25maWd1cmUocGxheWVyLCB1aW1hbmFnZXIpO1xuXG4gICAgdGhpcy5vbkFjdGl2ZS5zdWJzY3JpYmUoKCkgPT4ge1xuICAgICAgdGhpcy5vdmVybGF5LmVuYWJsZVByZXZpZXdTdWJ0aXRsZUxhYmVsKCk7XG4gICAgfSk7XG5cbiAgICB0aGlzLm9uSW5hY3RpdmUuc3Vic2NyaWJlKCgpID0+IHtcbiAgICAgIHRoaXMub3ZlcmxheS5yZW1vdmVQcmV2aWV3U3VidGl0bGVMYWJlbCgpO1xuICAgIH0pO1xuICB9XG59IiwiaW1wb3J0IHtVSUluc3RhbmNlTWFuYWdlcn0gZnJvbSAnLi4vLi4vdWltYW5hZ2VyJztcbmltcG9ydCB7U3VidGl0bGVTZXR0aW5nc01hbmFnZXJ9IGZyb20gJy4vc3VidGl0bGVzZXR0aW5nc21hbmFnZXInO1xuaW1wb3J0IHtCdXR0b24sIEJ1dHRvbkNvbmZpZ30gZnJvbSAnLi4vYnV0dG9uJztcbmltcG9ydCB7IFBsYXllckFQSSB9IGZyb20gJ2JpdG1vdmluLXBsYXllcic7XG5pbXBvcnQgeyBpMThuIH0gZnJvbSAnLi4vLi4vbG9jYWxpemF0aW9uL2kxOG4nO1xuXG4vKipcbiAqIEEgYnV0dG9uIHRoYXQgcmVzZXRzIGFsbCBzdWJ0aXRsZSBzZXR0aW5ncyB0byB0aGVpciBkZWZhdWx0cy5cbiAqXG4gKiBAY2F0ZWdvcnkgQnV0dG9uc1xuICovXG5leHBvcnQgY2xhc3MgU3VidGl0bGVTZXR0aW5nc1Jlc2V0QnV0dG9uIGV4dGVuZHMgQnV0dG9uPEJ1dHRvbkNvbmZpZz4ge1xuXG4gIHByaXZhdGUgc2V0dGluZ3NNYW5hZ2VyOiBTdWJ0aXRsZVNldHRpbmdzTWFuYWdlcjtcblxuICBjb25zdHJ1Y3Rvcihjb25maWc6IEJ1dHRvbkNvbmZpZykge1xuICAgIHN1cGVyKGNvbmZpZyk7XG5cbiAgICB0aGlzLmNvbmZpZyA9IHRoaXMubWVyZ2VDb25maWcoY29uZmlnLCB7XG4gICAgICBjc3NDbGFzczogJ3VpLXN1YnRpdGxlc2V0dGluZ3NyZXNldGJ1dHRvbicsXG4gICAgICB0ZXh0OiBpMThuLmdldExvY2FsaXplcigncmVzZXQnKSxcbiAgICB9LCB0aGlzLmNvbmZpZyk7XG4gIH1cblxuICBjb25maWd1cmUocGxheWVyOiBQbGF5ZXJBUEksIHVpbWFuYWdlcjogVUlJbnN0YW5jZU1hbmFnZXIpOiB2b2lkIHtcbiAgICBzdXBlci5jb25maWd1cmUocGxheWVyLCB1aW1hbmFnZXIpO1xuICAgIHRoaXMuc2V0dGluZ3NNYW5hZ2VyID0gdWltYW5hZ2VyLmdldFN1YnRpdGxlU2V0dGluZ3NNYW5hZ2VyKCk7XG5cbiAgICB0aGlzLm9uQ2xpY2suc3Vic2NyaWJlKCgpID0+IHtcbiAgICAgIHRoaXMuc2V0dGluZ3NNYW5hZ2VyLnJlc2V0KCk7XG4gICAgfSk7XG4gIH1cbn1cbiIsImltcG9ydCB7IFN1YnRpdGxlU2V0dGluZ1NlbGVjdEJveCwgU3VidGl0bGVTZXR0aW5nU2VsZWN0Qm94Q29uZmlnIH0gZnJvbSAnLi9zdWJ0aXRsZXNldHRpbmdzZWxlY3Rib3gnO1xuaW1wb3J0IHtVSUluc3RhbmNlTWFuYWdlcn0gZnJvbSAnLi4vLi4vdWltYW5hZ2VyJztcbmltcG9ydCB7IFBsYXllckFQSSB9IGZyb20gJ2JpdG1vdmluLXBsYXllcic7XG5pbXBvcnQgeyBpMThuIH0gZnJvbSAnLi4vLi4vbG9jYWxpemF0aW9uL2kxOG4nO1xuXG4vKipcbiAqIEEgc2VsZWN0IGJveCBwcm92aWRpbmcgYSBzZWxlY3Rpb24gb2YgZGlmZmVyZW50IGJhY2tncm91bmQgY29sb3JzLlxuICpcbiAqIEBjYXRlZ29yeSBDb21wb25lbnRzXG4gKi9cbmV4cG9ydCBjbGFzcyBXaW5kb3dDb2xvclNlbGVjdEJveCBleHRlbmRzIFN1YnRpdGxlU2V0dGluZ1NlbGVjdEJveCB7XG5cbiAgY29uc3RydWN0b3IoY29uZmlnOiBTdWJ0aXRsZVNldHRpbmdTZWxlY3RCb3hDb25maWcpIHtcbiAgICBzdXBlcihjb25maWcpO1xuXG4gICAgdGhpcy5jb25maWcgPSB0aGlzLm1lcmdlQ29uZmlnKGNvbmZpZywge1xuICAgICAgY3NzQ2xhc3NlczogWyd1aS1zdWJ0aXRsZXNldHRpbmdzd2luZG93Y29sb3JzZWxlY3Rib3gnXSxcbiAgICB9LCB0aGlzLmNvbmZpZyk7XG4gIH1cblxuICBjb25maWd1cmUocGxheWVyOiBQbGF5ZXJBUEksIHVpbWFuYWdlcjogVUlJbnN0YW5jZU1hbmFnZXIpOiB2b2lkIHtcbiAgICBzdXBlci5jb25maWd1cmUocGxheWVyLCB1aW1hbmFnZXIpO1xuXG4gICAgdGhpcy5hZGRJdGVtKG51bGwsIGkxOG4uZ2V0TG9jYWxpemVyKCdkZWZhdWx0JykpO1xuICAgIHRoaXMuYWRkSXRlbSgnd2hpdGUnLCBpMThuLmdldExvY2FsaXplcignY29sb3JzLndoaXRlJykpO1xuICAgIHRoaXMuYWRkSXRlbSgnYmxhY2snLCBpMThuLmdldExvY2FsaXplcignY29sb3JzLmJsYWNrJykpO1xuICAgIHRoaXMuYWRkSXRlbSgncmVkJywgaTE4bi5nZXRMb2NhbGl6ZXIoJ2NvbG9ycy5yZWQnKSk7XG4gICAgdGhpcy5hZGRJdGVtKCdncmVlbicsIGkxOG4uZ2V0TG9jYWxpemVyKCdjb2xvcnMuZ3JlZW4nKSk7XG4gICAgdGhpcy5hZGRJdGVtKCdibHVlJywgaTE4bi5nZXRMb2NhbGl6ZXIoJ2NvbG9ycy5ibHVlJykpO1xuICAgIHRoaXMuYWRkSXRlbSgnY3lhbicsIGkxOG4uZ2V0TG9jYWxpemVyKCdjb2xvcnMuY3lhbicpKTtcbiAgICB0aGlzLmFkZEl0ZW0oJ3llbGxvdycsIGkxOG4uZ2V0TG9jYWxpemVyKCdjb2xvcnMueWVsbG93JykpO1xuICAgIHRoaXMuYWRkSXRlbSgnbWFnZW50YScsIGkxOG4uZ2V0TG9jYWxpemVyKCdjb2xvcnMubWFnZW50YScpKTtcblxuXG5cbiAgICBsZXQgc2V0Q29sb3JBbmRPcGFjaXR5ID0gKCkgPT4ge1xuICAgICAgaWYgKHRoaXMuc2V0dGluZ3NNYW5hZ2VyLndpbmRvd0NvbG9yLmlzU2V0KCkgJiYgdGhpcy5zZXR0aW5nc01hbmFnZXIud2luZG93T3BhY2l0eS5pc1NldCgpKSB7XG4gICAgICAgIHRoaXMudG9nZ2xlT3ZlcmxheUNsYXNzKFxuICAgICAgICAgICd3aW5kb3djb2xvci0nICsgdGhpcy5zZXR0aW5nc01hbmFnZXIud2luZG93Q29sb3IudmFsdWUgKyB0aGlzLnNldHRpbmdzTWFuYWdlci53aW5kb3dPcGFjaXR5LnZhbHVlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMudG9nZ2xlT3ZlcmxheUNsYXNzKG51bGwpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICB0aGlzLm9uSXRlbVNlbGVjdGVkLnN1YnNjcmliZSgoc2VuZGVyLCBrZXk6IHN0cmluZykgPT4ge1xuICAgICAgdGhpcy5zZXR0aW5nc01hbmFnZXIud2luZG93Q29sb3IudmFsdWUgPSBrZXk7XG4gICAgfSk7XG5cbiAgICB0aGlzLnNldHRpbmdzTWFuYWdlci53aW5kb3dDb2xvci5vbkNoYW5nZWQuc3Vic2NyaWJlKChzZW5kZXIsIHByb3BlcnR5KSA9PiB7XG4gICAgICAvLyBDb2xvciBhbmQgb3BhY2l0eSBnbyB0b2dldGhlciwgc28gd2UgbmVlZCB0by4uLlxuICAgICAgaWYgKCF0aGlzLnNldHRpbmdzTWFuYWdlci53aW5kb3dDb2xvci5pc1NldCgpKSB7XG4gICAgICAgIC8vIC4uLiBjbGVhciB0aGUgb3BhY2l0eSB3aGVuIHRoZSBjb2xvciBpcyBub3Qgc2V0XG4gICAgICAgIHRoaXMuc2V0dGluZ3NNYW5hZ2VyLndpbmRvd09wYWNpdHkuY2xlYXIoKTtcbiAgICAgIH0gZWxzZSBpZiAoIXRoaXMuc2V0dGluZ3NNYW5hZ2VyLndpbmRvd09wYWNpdHkuaXNTZXQoKSkge1xuICAgICAgICAvLyAuLi4gc2V0IGFuIG9wYWNpdHkgd2hlbiB0aGUgY29sb3IgaXMgc2V0XG4gICAgICAgIHRoaXMuc2V0dGluZ3NNYW5hZ2VyLndpbmRvd09wYWNpdHkudmFsdWUgPSAnMTAwJztcbiAgICAgIH1cbiAgICAgIHRoaXMuc2VsZWN0SXRlbShwcm9wZXJ0eS52YWx1ZSk7XG4gICAgICBzZXRDb2xvckFuZE9wYWNpdHkoKTtcbiAgICB9KTtcblxuICAgIHRoaXMuc2V0dGluZ3NNYW5hZ2VyLndpbmRvd09wYWNpdHkub25DaGFuZ2VkLnN1YnNjcmliZSgoKSA9PiB7XG4gICAgICBzZXRDb2xvckFuZE9wYWNpdHkoKTtcbiAgICB9KTtcblxuICAgIC8vIExvYWQgaW5pdGlhbCB2YWx1ZVxuICAgIGlmICh0aGlzLnNldHRpbmdzTWFuYWdlci53aW5kb3dDb2xvci5pc1NldCgpKSB7XG4gICAgICB0aGlzLnNlbGVjdEl0ZW0odGhpcy5zZXR0aW5nc01hbmFnZXIud2luZG93Q29sb3IudmFsdWUpO1xuICAgIH1cbiAgfVxufVxuIiwiaW1wb3J0IHsgU3VidGl0bGVTZXR0aW5nU2VsZWN0Qm94LCBTdWJ0aXRsZVNldHRpbmdTZWxlY3RCb3hDb25maWcgfSBmcm9tICcuL3N1YnRpdGxlc2V0dGluZ3NlbGVjdGJveCc7XG5pbXBvcnQge1VJSW5zdGFuY2VNYW5hZ2VyfSBmcm9tICcuLi8uLi91aW1hbmFnZXInO1xuaW1wb3J0IHsgUGxheWVyQVBJIH0gZnJvbSAnYml0bW92aW4tcGxheWVyJztcbmltcG9ydCB7IGkxOG4gfSBmcm9tICcuLi8uLi9sb2NhbGl6YXRpb24vaTE4bic7XG5cbi8qKlxuICogQSBzZWxlY3QgYm94IHByb3ZpZGluZyBhIHNlbGVjdGlvbiBvZiBkaWZmZXJlbnQgYmFja2dyb3VuZCBvcGFjaXR5LlxuICpcbiAqIEBjYXRlZ29yeSBDb21wb25lbnRzXG4gKi9cbmV4cG9ydCBjbGFzcyBXaW5kb3dPcGFjaXR5U2VsZWN0Qm94IGV4dGVuZHMgU3VidGl0bGVTZXR0aW5nU2VsZWN0Qm94IHtcblxuICBjb25zdHJ1Y3Rvcihjb25maWc6IFN1YnRpdGxlU2V0dGluZ1NlbGVjdEJveENvbmZpZykge1xuICAgIHN1cGVyKGNvbmZpZyk7XG5cbiAgICB0aGlzLmNvbmZpZyA9IHRoaXMubWVyZ2VDb25maWcoY29uZmlnLCB7XG4gICAgICBjc3NDbGFzc2VzOiBbJ3VpLXN1YnRpdGxlc2V0dGluZ3N3aW5kb3dvcGFjaXR5c2VsZWN0Ym94J10sXG4gICAgfSwgdGhpcy5jb25maWcpO1xuICB9XG5cbiAgY29uZmlndXJlKHBsYXllcjogUGxheWVyQVBJLCB1aW1hbmFnZXI6IFVJSW5zdGFuY2VNYW5hZ2VyKTogdm9pZCB7XG4gICAgc3VwZXIuY29uZmlndXJlKHBsYXllciwgdWltYW5hZ2VyKTtcblxuICAgIHRoaXMuYWRkSXRlbShudWxsLCBpMThuLmdldExvY2FsaXplcignZGVmYXVsdCcpKTtcbiAgICB0aGlzLmFkZEl0ZW0oJzEwMCcsIGkxOG4uZ2V0TG9jYWxpemVyKCdwZXJjZW50JywgeyB2YWx1ZTogMTAwIH0pKTtcbiAgICB0aGlzLmFkZEl0ZW0oJzc1JywgaTE4bi5nZXRMb2NhbGl6ZXIoJ3BlcmNlbnQnLCB7IHZhbHVlOiA3NSB9KSk7XG4gICAgdGhpcy5hZGRJdGVtKCc1MCcsIGkxOG4uZ2V0TG9jYWxpemVyKCdwZXJjZW50JywgeyB2YWx1ZTogNTAgfSkpO1xuICAgIHRoaXMuYWRkSXRlbSgnMjUnLCBpMThuLmdldExvY2FsaXplcigncGVyY2VudCcsIHsgdmFsdWU6IDI1IH0pKTtcbiAgICB0aGlzLmFkZEl0ZW0oJzAnLCBpMThuLmdldExvY2FsaXplcigncGVyY2VudCcsIHsgdmFsdWU6IDAgfSkpO1xuXG4gICAgdGhpcy5vbkl0ZW1TZWxlY3RlZC5zdWJzY3JpYmUoKHNlbmRlciwga2V5OiBzdHJpbmcpID0+IHtcbiAgICAgIHRoaXMuc2V0dGluZ3NNYW5hZ2VyLndpbmRvd09wYWNpdHkudmFsdWUgPSBrZXk7XG5cbiAgICAgIC8vIENvbG9yIGFuZCBvcGFjaXR5IGdvIHRvZ2V0aGVyLCBzbyB3ZSBuZWVkIHRvLi4uXG4gICAgICBpZiAoIXRoaXMuc2V0dGluZ3NNYW5hZ2VyLndpbmRvd09wYWNpdHkuaXNTZXQoKSkge1xuICAgICAgICAvLyAuLi4gY2xlYXIgdGhlIGNvbG9yIHdoZW4gdGhlIG9wYWNpdHkgaXMgbm90IHNldFxuICAgICAgICB0aGlzLnNldHRpbmdzTWFuYWdlci53aW5kb3dDb2xvci5jbGVhcigpO1xuICAgICAgfSBlbHNlIGlmICghdGhpcy5zZXR0aW5nc01hbmFnZXIud2luZG93Q29sb3IuaXNTZXQoKSkge1xuICAgICAgICAvLyAuLi4gc2V0IGEgY29sb3Igd2hlbiB0aGUgb3BhY2l0eSBpcyBzZXRcbiAgICAgICAgdGhpcy5zZXR0aW5nc01hbmFnZXIud2luZG93Q29sb3IudmFsdWUgPSAnYmxhY2snO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8gVXBkYXRlIHNlbGVjdGVkIGl0ZW0gd2hlbiB2YWx1ZSBpcyBzZXQgZnJvbSBzb21ld2hlcmUgZWxzZVxuICAgIHRoaXMuc2V0dGluZ3NNYW5hZ2VyLndpbmRvd09wYWNpdHkub25DaGFuZ2VkLnN1YnNjcmliZSgoc2VuZGVyLCBwcm9wZXJ0eSkgPT4ge1xuICAgICAgdGhpcy5zZWxlY3RJdGVtKHByb3BlcnR5LnZhbHVlKTtcbiAgICB9KTtcblxuICAgIC8vIExvYWQgaW5pdGlhbCB2YWx1ZVxuICAgIGlmICh0aGlzLnNldHRpbmdzTWFuYWdlci53aW5kb3dPcGFjaXR5LmlzU2V0KCkpIHtcbiAgICAgIHRoaXMuc2VsZWN0SXRlbSh0aGlzLnNldHRpbmdzTWFuYWdlci53aW5kb3dPcGFjaXR5LnZhbHVlKTtcbiAgICB9XG4gIH1cbn1cbiIsImltcG9ydCB7IFBsYXllckFQSSB9IGZyb20gJ2JpdG1vdmluLXBsYXllcic7XG5pbXBvcnQgeyBVSUluc3RhbmNlTWFuYWdlciB9IGZyb20gJy4uL3VpbWFuYWdlcic7XG5pbXBvcnQgeyBET00gfSBmcm9tICcuLi9kb20nO1xuaW1wb3J0IHsgQ29tcG9uZW50Q29uZmlnIH0gZnJvbSAnLi9jb21wb25lbnQnO1xuaW1wb3J0IHsgVGltZWxpbmVNYXJrZXIgfSBmcm9tICcuLi91aWNvbmZpZyc7XG5pbXBvcnQgeyBTZWVrQmFyTWFya2VyIH0gZnJvbSAnLi9zZWVrYmFyJztcbmltcG9ydCB7IFBsYXllclV0aWxzIH0gZnJvbSAnLi4vcGxheWVydXRpbHMnO1xuaW1wb3J0IHsgVGltZW91dCB9IGZyb20gJy4uL3RpbWVvdXQnO1xuXG4vKipcbiAqIEBjYXRlZ29yeSBDb25maWdzXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgTWFya2Vyc0NvbmZpZyBleHRlbmRzIENvbXBvbmVudENvbmZpZyB7XG4gIC8qKlxuICAgKiBVc2VkIGZvciBzZWVrQmFyIG1hcmtlciBzbmFwcGluZyByYW5nZSBwZXJjZW50YWdlXG4gICAqL1xuICBzbmFwcGluZ1JhbmdlPzogbnVtYmVyO1xufVxuXG5leHBvcnQgY2xhc3MgVGltZWxpbmVNYXJrZXJzSGFuZGxlciB7XG4gIHByaXZhdGUgbWFya2Vyc0NvbnRhaW5lcjogRE9NO1xuICBwcml2YXRlIHRpbWVsaW5lTWFya2VyczogU2Vla0Jhck1hcmtlcltdO1xuICBwcml2YXRlIHBsYXllcjogUGxheWVyQVBJO1xuICBwcml2YXRlIHVpbWFuYWdlcjogVUlJbnN0YW5jZU1hbmFnZXI7XG4gIHByaXZhdGUgcGF1c2VkVGltZXNoaWZ0VXBkYXRlcjogVGltZW91dDtcbiAgcHJpdmF0ZSBnZXRTZWVrQmFyV2lkdGg6ICgpID0+IG51bWJlcjtcbiAgcHJvdGVjdGVkIGNvbmZpZzogTWFya2Vyc0NvbmZpZztcblxuICBjb25zdHJ1Y3Rvcihjb25maWc6IE1hcmtlcnNDb25maWcsIGdldFNlZWtCYXJXaWR0aDogKCkgPT4gbnVtYmVyLCBtYXJrZXJzQ29udGFpbmVyOiBET00pIHtcbiAgICB0aGlzLmNvbmZpZyA9IGNvbmZpZztcbiAgICB0aGlzLmdldFNlZWtCYXJXaWR0aCA9IGdldFNlZWtCYXJXaWR0aDtcbiAgICB0aGlzLm1hcmtlcnNDb250YWluZXIgPSBtYXJrZXJzQ29udGFpbmVyO1xuICAgIHRoaXMudGltZWxpbmVNYXJrZXJzID0gW107XG4gIH1cblxuICBwdWJsaWMgaW5pdGlhbGl6ZShwbGF5ZXI6IFBsYXllckFQSSwgdWltYW5hZ2VyOiBVSUluc3RhbmNlTWFuYWdlcikge1xuICAgIHRoaXMucGxheWVyID0gcGxheWVyO1xuICAgIHRoaXMudWltYW5hZ2VyID0gdWltYW5hZ2VyO1xuICAgIHRoaXMuY29uZmlndXJlTWFya2VycygpO1xuICB9XG5cbiAgcHJpdmF0ZSBjb25maWd1cmVNYXJrZXJzKCk6IHZvaWQge1xuICAgIC8vIFJlbW92ZSBtYXJrZXJzIHdoZW4gdW5sb2FkZWRcbiAgICB0aGlzLnBsYXllci5vbih0aGlzLnBsYXllci5leHBvcnRzLlBsYXllckV2ZW50LlNvdXJjZVVubG9hZGVkLCAoKSA9PiB0aGlzLmNsZWFyTWFya2VycygpKTtcbiAgICB0aGlzLnBsYXllci5vbih0aGlzLnBsYXllci5leHBvcnRzLlBsYXllckV2ZW50LkFkQnJlYWtTdGFydGVkLCAoKSA9PiB0aGlzLmNsZWFyTWFya2VycygpKTtcbiAgICB0aGlzLnBsYXllci5vbih0aGlzLnBsYXllci5leHBvcnRzLlBsYXllckV2ZW50LkFkQnJlYWtGaW5pc2hlZCwgKCkgPT4gdGhpcy51cGRhdGVNYXJrZXJzKCkpO1xuICAgIC8vIFVwZGF0ZSBtYXJrZXJzIHdoZW4gdGhlIHNpemUgb2YgdGhlIHNlZWtiYXIgY2hhbmdlc1xuICAgIHRoaXMucGxheWVyLm9uKHRoaXMucGxheWVyLmV4cG9ydHMuUGxheWVyRXZlbnQuUGxheWVyUmVzaXplZCwgKCkgPT4gdGhpcy51cGRhdGVNYXJrZXJzRE9NKCkpO1xuXG4gICAgdGhpcy5wbGF5ZXIub24odGhpcy5wbGF5ZXIuZXhwb3J0cy5QbGF5ZXJFdmVudC5Tb3VyY2VMb2FkZWQsICgpID0+IHtcbiAgICAgIGlmICh0aGlzLnBsYXllci5pc0xpdmUoKSkge1xuICAgICAgICAvLyBVcGRhdGUgbWFya2VyIHBvc2l0aW9uIGFzIHRpbWVzaGlmdCByYW5nZSBjaGFuZ2VzXG4gICAgICAgIHRoaXMucGxheWVyLm9uKHRoaXMucGxheWVyLmV4cG9ydHMuUGxheWVyRXZlbnQuVGltZUNoYW5nZWQsICgpID0+IHRoaXMudXBkYXRlTWFya2VycygpKTtcbiAgICAgICAgLy8gVXBkYXRlIG1hcmtlciBwb3N0aW9uIHdoZW4gcGF1c2VkIGFzIHRpbWVzaGlmdCByYW5nZSBjaGFuZ2VzXG4gICAgICAgIHRoaXMuY29uZmlndXJlTGl2ZVBhdXNlZFRpbWVzaGlmdFVwZGF0ZXIoKCkgPT4gdGhpcy51cGRhdGVNYXJrZXJzKCkpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHRoaXMudWltYW5hZ2VyLmdldENvbmZpZygpLmV2ZW50cy5vblVwZGF0ZWQuc3Vic2NyaWJlKCgpID0+IHRoaXMudXBkYXRlTWFya2VycygpKTtcbiAgICB0aGlzLnVpbWFuYWdlci5vblJlbGVhc2Uuc3Vic2NyaWJlKCgpID0+IHRoaXMudWltYW5hZ2VyLmdldENvbmZpZygpLmV2ZW50cy5vblVwZGF0ZWQudW5zdWJzY3JpYmUoKCkgPT4gdGhpcy51cGRhdGVNYXJrZXJzKCkpKTtcblxuICAgIC8vIEluaXQgbWFya2VycyBhdCBzdGFydHVwXG4gICAgdGhpcy51cGRhdGVNYXJrZXJzKCk7XG4gIH1cblxuICBwdWJsaWMgZ2V0TWFya2VyQXRQb3NpdGlvbihwZXJjZW50YWdlOiBudW1iZXIpOiBTZWVrQmFyTWFya2VyIHwgbnVsbCB7XG4gICAgY29uc3Qgc25hcHBpbmdSYW5nZSA9IHRoaXMuY29uZmlnLnNuYXBwaW5nUmFuZ2U7XG5cbiAgICBjb25zdCBtYXRjaGluZ01hcmtlciA9IHRoaXMudGltZWxpbmVNYXJrZXJzLmZpbmQobWFya2VyID0+IHtcbiAgICAgIGNvbnN0IGhhc0R1cmF0aW9uID0gbWFya2VyLmR1cmF0aW9uID4gMDtcbiAgICAgIC8vIEhhbmRsZSBpbnRlcnZhbCBtYXJrZXJzXG4gICAgICBjb25zdCBpbnRlcnZhbE1hcmtlck1hdGNoID1cbiAgICAgICAgaGFzRHVyYXRpb24gJiZcbiAgICAgICAgcGVyY2VudGFnZSA+PSBtYXJrZXIucG9zaXRpb24gLSBzbmFwcGluZ1JhbmdlICYmXG4gICAgICAgIHBlcmNlbnRhZ2UgPD0gbWFya2VyLnBvc2l0aW9uICsgbWFya2VyLmR1cmF0aW9uICsgc25hcHBpbmdSYW5nZTtcblxuICAgICAgLy8gSGFuZGxlIHBvc2l0aW9uIG1hcmtlcnNcbiAgICAgIGNvbnN0IHBvc2l0aW9uTWFya2VyTWF0Y2ggPVxuICAgICAgICBwZXJjZW50YWdlID49IG1hcmtlci5wb3NpdGlvbiAtIHNuYXBwaW5nUmFuZ2UgJiZcbiAgICAgICAgcGVyY2VudGFnZSA8PSBtYXJrZXIucG9zaXRpb24gKyBzbmFwcGluZ1JhbmdlO1xuXG4gICAgICByZXR1cm4gaW50ZXJ2YWxNYXJrZXJNYXRjaCB8fCBwb3NpdGlvbk1hcmtlck1hdGNoO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIG1hdGNoaW5nTWFya2VyIHx8IG51bGw7XG4gIH1cblxuICBwcml2YXRlIGNsZWFyTWFya2VycygpOiB2b2lkIHtcbiAgICB0aGlzLnRpbWVsaW5lTWFya2VycyA9IFtdO1xuICAgIHRoaXMubWFya2Vyc0NvbnRhaW5lci5lbXB0eSgpO1xuICB9XG5cbiAgcHJpdmF0ZSByZW1vdmVNYXJrZXJGcm9tQ29uZmlnKG1hcmtlcjogVGltZWxpbmVNYXJrZXIpOiB2b2lkIHtcbiAgICB0aGlzLnVpbWFuYWdlci5nZXRDb25maWcoKS5tZXRhZGF0YS5tYXJrZXJzID0gdGhpcy51aW1hbmFnZXIuZ2V0Q29uZmlnKCkubWV0YWRhdGEubWFya2Vycy5maWx0ZXIoX21hcmtlciA9PiBtYXJrZXIgIT09IF9tYXJrZXIpO1xuICB9XG5cbiAgcHJpdmF0ZSBmaWx0ZXJSZW1vdmVkTWFya2VycygpOiB2b2lkIHtcbiAgICB0aGlzLnRpbWVsaW5lTWFya2VycyA9IHRoaXMudGltZWxpbmVNYXJrZXJzLmZpbHRlcihzZWVrYmFyTWFya2VyID0+IHtcbiAgICAgIGNvbnN0IG1hdGNoaW5nTWFya2VyID0gdGhpcy51aW1hbmFnZXIuZ2V0Q29uZmlnKCkubWV0YWRhdGEubWFya2Vycy5maW5kKF9tYXJrZXIgPT4gc2Vla2Jhck1hcmtlci5tYXJrZXIgPT09IF9tYXJrZXIpO1xuICAgICAgaWYgKCFtYXRjaGluZ01hcmtlcikge1xuICAgICAgICB0aGlzLnJlbW92ZU1hcmtlckZyb21ET00oc2Vla2Jhck1hcmtlcik7XG4gICAgICB9XG4gICAgICByZXR1cm4gbWF0Y2hpbmdNYXJrZXI7XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIHJlbW92ZU1hcmtlckZyb21ET00obWFya2VyOiBTZWVrQmFyTWFya2VyKTogdm9pZCB7XG4gICAgaWYgKG1hcmtlci5lbGVtZW50KSB7XG4gICAgICBtYXJrZXIuZWxlbWVudC5yZW1vdmUoKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHVwZGF0ZU1hcmtlcnMoKTogdm9pZCB7XG4gICAgaWYgKCFzaG91bGRQcm9jZXNzTWFya2Vycyh0aGlzLnBsYXllciwgdGhpcy51aW1hbmFnZXIpKSB7XG4gICAgICB0aGlzLmNsZWFyTWFya2VycygpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMuZmlsdGVyUmVtb3ZlZE1hcmtlcnMoKTtcblxuICAgIHRoaXMudWltYW5hZ2VyLmdldENvbmZpZygpLm1ldGFkYXRhLm1hcmtlcnMuZm9yRWFjaChtYXJrZXIgPT4ge1xuICAgICAgY29uc3QgeyBtYXJrZXJQb3NpdGlvbiwgbWFya2VyRHVyYXRpb24gfSA9IGdldE1hcmtlclBvc2l0aW9ucyh0aGlzLnBsYXllciwgbWFya2VyKTtcblxuICAgICAgaWYgKHNob3VsZFJlbW92ZU1hcmtlcihtYXJrZXJQb3NpdGlvbiwgbWFya2VyRHVyYXRpb24pKSB7XG4gICAgICAgIHRoaXMucmVtb3ZlTWFya2VyRnJvbUNvbmZpZyhtYXJrZXIpO1xuICAgICAgfSBlbHNlIGlmIChtYXJrZXJQb3NpdGlvbiA8PSAxMDApIHtcbiAgICAgICAgY29uc3QgbWF0Y2hpbmdNYXJrZXIgPSB0aGlzLnRpbWVsaW5lTWFya2Vycy5maW5kKHNlZWtiYXJNYXJrZXIgPT4gc2Vla2Jhck1hcmtlci5tYXJrZXIgPT09IG1hcmtlcik7XG5cbiAgICAgICAgaWYgKG1hdGNoaW5nTWFya2VyKSB7XG4gICAgICAgICAgbWF0Y2hpbmdNYXJrZXIucG9zaXRpb24gPSBtYXJrZXJQb3NpdGlvbjtcbiAgICAgICAgICBtYXRjaGluZ01hcmtlci5kdXJhdGlvbiA9IG1hcmtlckR1cmF0aW9uO1xuXG4gICAgICAgICAgdGhpcy51cGRhdGVNYXJrZXJET00obWF0Y2hpbmdNYXJrZXIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnN0IG5ld01hcmtlcjogU2Vla0Jhck1hcmtlciA9IHsgbWFya2VyLCBwb3NpdGlvbjogbWFya2VyUG9zaXRpb24sIGR1cmF0aW9uOiBtYXJrZXJEdXJhdGlvbiB9O1xuICAgICAgICAgIHRoaXMudGltZWxpbmVNYXJrZXJzLnB1c2gobmV3TWFya2VyKTtcblxuICAgICAgICAgIHRoaXMuY3JlYXRlTWFya2VyRE9NKG5ld01hcmtlcik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgZ2V0TWFya2VyQ3NzUHJvcGVydGllcyhtYXJrZXI6IFNlZWtCYXJNYXJrZXIpOiB7IFtwcm9wZXJ0eU5hbWU6IHN0cmluZ106IHN0cmluZyB9IHtcbiAgICBjb25zdCBzZWVrQmFyV2lkdGhQeCA9IHRoaXMuZ2V0U2Vla0JhcldpZHRoKCk7XG5cbiAgICBjb25zdCBwb3NpdGlvbkluUHggPSAoc2Vla0JhcldpZHRoUHggLyAxMDApICogKG1hcmtlci5wb3NpdGlvbiA8IDAgPyAwIDogbWFya2VyLnBvc2l0aW9uKTtcbiAgICBjb25zdCBjc3NQcm9wZXJ0aWVzOiB7IFtwcm9wZXJ0eU5hbWU6IHN0cmluZ106IHN0cmluZyB9ID0ge1xuICAgICAgJ3RyYW5zZm9ybSc6IGB0cmFuc2xhdGVYKCR7cG9zaXRpb25JblB4fXB4KWAsXG4gICAgfTtcblxuICAgIGlmIChtYXJrZXIuZHVyYXRpb24gPiAwKSB7XG4gICAgICBjb25zdCBtYXJrZXJXaWR0aFB4ID0gTWF0aC5yb3VuZChzZWVrQmFyV2lkdGhQeCAvIDEwMCAqIG1hcmtlci5kdXJhdGlvbik7XG4gICAgICBjc3NQcm9wZXJ0aWVzWyd3aWR0aCddID0gYCR7bWFya2VyV2lkdGhQeH1weGA7XG4gICAgfVxuXG4gICAgcmV0dXJuIGNzc1Byb3BlcnRpZXM7XG4gIH1cblxuICBwcml2YXRlIHVwZGF0ZU1hcmtlckRPTShtYXJrZXI6IFNlZWtCYXJNYXJrZXIpOiB2b2lkIHtcbiAgICBtYXJrZXIuZWxlbWVudC5jc3ModGhpcy5nZXRNYXJrZXJDc3NQcm9wZXJ0aWVzKG1hcmtlcikpO1xuICB9XG5cbiAgcHJpdmF0ZSBjcmVhdGVNYXJrZXJET00obWFya2VyOiBTZWVrQmFyTWFya2VyKTogdm9pZCB7XG4gICAgY29uc3QgbWFya2VyQ2xhc3NlcyA9IFsnc2Vla2Jhci1tYXJrZXInXS5jb25jYXQobWFya2VyLm1hcmtlci5jc3NDbGFzc2VzIHx8IFtdKVxuICAgICAgLm1hcChjc3NDbGFzcyA9PiB0aGlzLnByZWZpeENzcyhjc3NDbGFzcykpO1xuXG4gICAgY29uc3QgbWFya2VyRWxlbWVudCA9IG5ldyBET00oJ2RpdicsIHtcbiAgICAgICdjbGFzcyc6IG1hcmtlckNsYXNzZXMuam9pbignICcpLFxuICAgICAgJ2RhdGEtbWFya2VyLXRpbWUnOiBTdHJpbmcobWFya2VyLm1hcmtlci50aW1lKSxcbiAgICAgICdkYXRhLW1hcmtlci10aXRsZSc6IFN0cmluZyhtYXJrZXIubWFya2VyLnRpdGxlKSxcbiAgICB9KS5jc3ModGhpcy5nZXRNYXJrZXJDc3NQcm9wZXJ0aWVzKG1hcmtlcikpO1xuXG4gICAgaWYgKG1hcmtlci5tYXJrZXIuaW1hZ2VVcmwpIHtcbiAgICAgIGNvbnN0IHJlbW92ZUltYWdlID0gKCkgPT4ge1xuICAgICAgICBpbWFnZUVsZW1lbnQucmVtb3ZlKCk7XG4gICAgICB9O1xuXG4gICAgICBjb25zdCBpbWFnZUVsZW1lbnQgPSBuZXcgRE9NKCdpbWcnLCB7XG4gICAgICAgICdjbGFzcyc6IHRoaXMucHJlZml4Q3NzKCdzZWVrYmFyLW1hcmtlci1pbWFnZScpLFxuICAgICAgICAnc3JjJzogbWFya2VyLm1hcmtlci5pbWFnZVVybCxcbiAgICAgIH0pLm9uKCdlcnJvcicsIHJlbW92ZUltYWdlKTtcblxuICAgICAgbWFya2VyRWxlbWVudC5hcHBlbmQoaW1hZ2VFbGVtZW50KTtcbiAgICB9XG5cbiAgICBtYXJrZXIuZWxlbWVudCA9IG1hcmtlckVsZW1lbnQ7XG4gICAgdGhpcy5tYXJrZXJzQ29udGFpbmVyLmFwcGVuZChtYXJrZXJFbGVtZW50KTtcbiAgfVxuXG4gIHByaXZhdGUgdXBkYXRlTWFya2Vyc0RPTSgpOiB2b2lkIHtcbiAgICB0aGlzLnRpbWVsaW5lTWFya2Vycy5mb3JFYWNoKG1hcmtlciA9PiB7XG4gICAgICBpZiAobWFya2VyLmVsZW1lbnQpIHtcbiAgICAgICAgdGhpcy51cGRhdGVNYXJrZXJET00obWFya2VyKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuY3JlYXRlTWFya2VyRE9NKG1hcmtlcik7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIGNvbmZpZ3VyZUxpdmVQYXVzZWRUaW1lc2hpZnRVcGRhdGVyKFxuICAgIGhhbmRsZXI6ICgpID0+IHZvaWQsXG4gICk6IHZvaWQge1xuICAgIC8vIFJlZ3VsYXJseSB1cGRhdGUgdGhlIG1hcmtlciBwb3NpdGlvbiB3aGlsZSB0aGUgdGltZW91dCBpcyBhY3RpdmVcbiAgICB0aGlzLnBhdXNlZFRpbWVzaGlmdFVwZGF0ZXIgPSBuZXcgVGltZW91dCgxMDAwLCBoYW5kbGVyLCB0cnVlKTtcblxuICAgIHRoaXMucGxheWVyLm9uKHRoaXMucGxheWVyLmV4cG9ydHMuUGxheWVyRXZlbnQuUGF1c2VkLCAoKSA9PiB7XG4gICAgICBpZiAodGhpcy5wbGF5ZXIuaXNMaXZlKCkgJiYgdGhpcy5wbGF5ZXIuZ2V0TWF4VGltZVNoaWZ0KCkgPCAwKSB7XG4gICAgICAgIHRoaXMucGF1c2VkVGltZXNoaWZ0VXBkYXRlci5zdGFydCgpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8gU3RvcCB1cGRhdGVyIHdoZW4gcGxheWJhY2sgY29udGludWVzIChubyBtYXR0ZXIgaWYgdGhlIHVwZGF0ZXIgd2FzIHN0YXJ0ZWQgYmVmb3JlKVxuICAgIHRoaXMucGxheWVyLm9uKHRoaXMucGxheWVyLmV4cG9ydHMuUGxheWVyRXZlbnQuUGxheSwgKCkgPT4gdGhpcy5wYXVzZWRUaW1lc2hpZnRVcGRhdGVyLmNsZWFyKCkpO1xuICAgIHRoaXMucGxheWVyLm9uKHRoaXMucGxheWVyLmV4cG9ydHMuUGxheWVyRXZlbnQuRGVzdHJveSwgKCkgPT4gdGhpcy5wYXVzZWRUaW1lc2hpZnRVcGRhdGVyLmNsZWFyKCkpO1xuICB9XG5cbiAgcHJvdGVjdGVkIHByZWZpeENzcyhjc3NDbGFzc09ySWQ6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHRoaXMuY29uZmlnLmNzc1ByZWZpeCArICctJyArIGNzc0NsYXNzT3JJZDtcbiAgfVxufVxuXG5mdW5jdGlvbiBnZXRNYXJrZXJQb3NpdGlvbnMocGxheWVyOiBQbGF5ZXJBUEksIG1hcmtlcjogVGltZWxpbmVNYXJrZXIpIHtcbiAgY29uc3QgZHVyYXRpb24gPSBnZXREdXJhdGlvbihwbGF5ZXIpO1xuXG4gIGNvbnN0IG1hcmtlclBvc2l0aW9uID0gMTAwIC8gZHVyYXRpb24gKiBnZXRNYXJrZXJUaW1lKG1hcmtlciwgcGxheWVyLCBkdXJhdGlvbik7IC8vIGNvbnZlcnQgYWJzb2x1dGUgdGltZSB0byBwZXJjZW50YWdlXG4gIGxldCBtYXJrZXJEdXJhdGlvbiA9IDEwMCAvIGR1cmF0aW9uICogbWFya2VyLmR1cmF0aW9uO1xuXG4gIGlmIChtYXJrZXJQb3NpdGlvbiA8IDAgJiYgIWlzTmFOKG1hcmtlckR1cmF0aW9uKSkge1xuICAgIC8vIFNocmluayBtYXJrZXIgZHVyYXRpb24gZm9yIG9uIGxpdmUgc3RyZWFtcyBhcyB0aGV5IHJlYWNoIGVuZFxuICAgIG1hcmtlckR1cmF0aW9uID0gbWFya2VyRHVyYXRpb24gKyBtYXJrZXJQb3NpdGlvbjtcbiAgfVxuXG4gIGlmICgxMDAgLSBtYXJrZXJQb3NpdGlvbiA8IG1hcmtlckR1cmF0aW9uKSB7XG4gICAgLy8gU2hyaW5rIG1hcmtlciBpZiBpdCBvdmVyZmxvd3MgdGltZWxpbmVcbiAgICBtYXJrZXJEdXJhdGlvbiA9IDEwMCAtIG1hcmtlclBvc2l0aW9uO1xuICB9XG5cbiAgcmV0dXJuIHsgbWFya2VyRHVyYXRpb24sIG1hcmtlclBvc2l0aW9uIH07XG59XG5cbmZ1bmN0aW9uIGdldE1hcmtlclRpbWUobWFya2VyOiBUaW1lbGluZU1hcmtlciwgcGxheWVyOiBQbGF5ZXJBUEksIGR1cmF0aW9uOiBudW1iZXIpOiBudW1iZXIge1xuICBpZiAoIXBsYXllci5pc0xpdmUoKSkge1xuICAgIHJldHVybiBtYXJrZXIudGltZTtcbiAgfVxuXG4gIHJldHVybiBkdXJhdGlvbiAtIChQbGF5ZXJVdGlscy5nZXRTZWVrYWJsZVJhbmdlUmVzcGVjdGluZ0xpdmUocGxheWVyKS5lbmQgLSBtYXJrZXIudGltZSk7XG59XG5cbmZ1bmN0aW9uIGdldER1cmF0aW9uKHBsYXllcjogUGxheWVyQVBJKTogbnVtYmVyIHtcbiAgaWYgKCFwbGF5ZXIuaXNMaXZlKCkpIHtcbiAgICByZXR1cm4gcGxheWVyLmdldER1cmF0aW9uKCk7XG4gIH1cbiAgY29uc3QgeyBzdGFydCwgZW5kIH0gPSBQbGF5ZXJVdGlscy5nZXRTZWVrYWJsZVJhbmdlUmVzcGVjdGluZ0xpdmUocGxheWVyKTtcblxuICByZXR1cm4gZW5kIC0gc3RhcnQ7XG59XG5cbmZ1bmN0aW9uIHNob3VsZFJlbW92ZU1hcmtlcihtYXJrZXJQb3NpdGlvbjogbnVtYmVyLCBtYXJrZXJEdXJhdGlvbjogbnVtYmVyKTogYm9vbGVhbiB7XG4gIHJldHVybiAobWFya2VyRHVyYXRpb24gPCAwIHx8IGlzTmFOKG1hcmtlckR1cmF0aW9uKSkgJiYgbWFya2VyUG9zaXRpb24gPCAwO1xufVxuXG5mdW5jdGlvbiBzaG91bGRQcm9jZXNzTWFya2VycyhwbGF5ZXI6IFBsYXllckFQSSwgdWltYW5hZ2VyOiBVSUluc3RhbmNlTWFuYWdlcik6IGJvb2xlYW4ge1xuICAvLyBEb24ndCBnZW5lcmF0ZSB0aW1lbGluZSBtYXJrZXJzIGlmIHdlIGRvbid0IHlldCBoYXZlIGEgZHVyYXRpb25cbiAgLy8gVGhlIGR1cmF0aW9uIGNoZWNrIGlzIGZvciBidWdneSBwbGF0Zm9ybXMgd2hlcmUgdGhlIGR1cmF0aW9uIGlzIG5vdCBhdmFpbGFibGUgaW5zdGFudGx5IChDaHJvbWUgb24gQW5kcm9pZCA0LjMpXG4gIGNvbnN0IHZhbGlkVG9Qcm9jZXNzID0gcGxheWVyLmdldER1cmF0aW9uKCkgIT09IEluZmluaXR5IHx8IHBsYXllci5pc0xpdmUoKTtcbiAgY29uc3QgaGFzTWFya2VycyA9IHVpbWFuYWdlci5nZXRDb25maWcoKS5tZXRhZGF0YS5tYXJrZXJzLmxlbmd0aCA+IDA7XG5cbiAgcmV0dXJuIHZhbGlkVG9Qcm9jZXNzICYmIGhhc01hcmtlcnM7XG59XG4iLCJpbXBvcnQge0NvbnRhaW5lciwgQ29udGFpbmVyQ29uZmlnfSBmcm9tICcuL2NvbnRhaW5lcic7XG5pbXBvcnQge1VJSW5zdGFuY2VNYW5hZ2VyfSBmcm9tICcuLi91aW1hbmFnZXInO1xuaW1wb3J0IHtNZXRhZGF0YUxhYmVsLCBNZXRhZGF0YUxhYmVsQ29udGVudH0gZnJvbSAnLi9tZXRhZGF0YWxhYmVsJztcbmltcG9ydCB7IFBsYXllckFQSSB9IGZyb20gJ2JpdG1vdmluLXBsYXllcic7XG5cbi8qKlxuICogQ29uZmlndXJhdGlvbiBpbnRlcmZhY2UgZm9yIGEge0BsaW5rIFRpdGxlQmFyfS5cbiAqXG4gKiBAY2F0ZWdvcnkgQ29uZmlnc1xuICovXG5leHBvcnQgaW50ZXJmYWNlIFRpdGxlQmFyQ29uZmlnIGV4dGVuZHMgQ29udGFpbmVyQ29uZmlnIHtcbiAgLyoqXG4gICAqIFNwZWNpZmllcyBpZiB0aGUgdGl0bGUgYmFyIHNob3VsZCBzdGF5IGhpZGRlbiB3aGVuIG5vIG1ldGFkYXRhIGxhYmVsIGNvbnRhaW5zIGFueSB0ZXh0LiBEb2VzIG5vdCBtYWtlIGEgbG90XG4gICAqIG9mIHNlbnNlIGlmIHRoZSB0aXRsZSBiYXIgY29udGFpbnMgb3RoZXIgY29tcG9uZW50cyB0aGFuIGp1c3QgTWV0YWRhdGFMYWJlbHMgKGxpa2UgaW4gdGhlIGRlZmF1bHQgY29uZmlndXJhdGlvbikuXG4gICAqIERlZmF1bHQ6IGZhbHNlXG4gICAqL1xuICBrZWVwSGlkZGVuV2l0aG91dE1ldGFkYXRhPzogYm9vbGVhbjtcbn1cblxuLyoqXG4gKiBEaXNwbGF5cyBhIHRpdGxlIGJhciBjb250YWluaW5nIGEgbGFiZWwgd2l0aCB0aGUgdGl0bGUgb2YgdGhlIHZpZGVvLlxuICpcbiAqIEBjYXRlZ29yeSBDb21wb25lbnRzXG4gKi9cbmV4cG9ydCBjbGFzcyBUaXRsZUJhciBleHRlbmRzIENvbnRhaW5lcjxUaXRsZUJhckNvbmZpZz4ge1xuXG4gIGNvbnN0cnVjdG9yKGNvbmZpZzogVGl0bGVCYXJDb25maWcgPSB7fSkge1xuICAgIHN1cGVyKGNvbmZpZyk7XG5cbiAgICB0aGlzLmNvbmZpZyA9IHRoaXMubWVyZ2VDb25maWcoY29uZmlnLCB7XG4gICAgICBjc3NDbGFzczogJ3VpLXRpdGxlYmFyJyxcbiAgICAgIGhpZGRlbjogdHJ1ZSxcbiAgICAgIGNvbXBvbmVudHM6IFtcbiAgICAgICAgbmV3IE1ldGFkYXRhTGFiZWwoeyBjb250ZW50OiBNZXRhZGF0YUxhYmVsQ29udGVudC5UaXRsZSB9KSxcbiAgICAgICAgbmV3IE1ldGFkYXRhTGFiZWwoeyBjb250ZW50OiBNZXRhZGF0YUxhYmVsQ29udGVudC5EZXNjcmlwdGlvbiB9KSxcbiAgICAgIF0sXG4gICAgICBrZWVwSGlkZGVuV2l0aG91dE1ldGFkYXRhOiBmYWxzZSxcbiAgICB9LCA8VGl0bGVCYXJDb25maWc+dGhpcy5jb25maWcpO1xuICB9XG5cbiAgY29uZmlndXJlKHBsYXllcjogUGxheWVyQVBJLCB1aW1hbmFnZXI6IFVJSW5zdGFuY2VNYW5hZ2VyKTogdm9pZCB7XG4gICAgc3VwZXIuY29uZmlndXJlKHBsYXllciwgdWltYW5hZ2VyKTtcblxuICAgIGxldCBjb25maWcgPSB0aGlzLmdldENvbmZpZygpO1xuICAgIGxldCBzaG91bGRCZVNob3duID0gIXRoaXMuaXNIaWRkZW4oKTtcbiAgICBsZXQgaGFzTWV0YWRhdGFUZXh0ID0gdHJ1ZTsgLy8gRmxhZyB0byB0cmFjayBpZiBhbnkgbWV0YWRhdGEgbGFiZWwgY29udGFpbnMgdGV4dFxuXG4gICAgbGV0IGNoZWNrTWV0YWRhdGFUZXh0QW5kVXBkYXRlVmlzaWJpbGl0eSA9ICgpID0+IHtcbiAgICAgIGhhc01ldGFkYXRhVGV4dCA9IGZhbHNlO1xuXG4gICAgICAvLyBJdGVyYXRlIHRocm91Z2ggbWV0YWRhdGEgbGFiZWxzIGFuZCBjaGVjayBpZiBhdCBsZWFzdCBvbmUgb2YgdGhlbSBjb250YWlucyB0ZXh0XG4gICAgICBmb3IgKGxldCBjb21wb25lbnQgb2YgdGhpcy5nZXRDb21wb25lbnRzKCkpIHtcbiAgICAgICAgaWYgKGNvbXBvbmVudCBpbnN0YW5jZW9mIE1ldGFkYXRhTGFiZWwpIHtcbiAgICAgICAgICBpZiAoIWNvbXBvbmVudC5pc0VtcHR5KCkpIHtcbiAgICAgICAgICAgIGhhc01ldGFkYXRhVGV4dCA9IHRydWU7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKHRoaXMuaXNTaG93bigpKSB7XG4gICAgICAgIC8vIEhpZGUgYSB2aXNpYmxlIHRpdGxlYmFyIGlmIGl0IGRvZXMgbm90IGNvbnRhaW4gYW55IHRleHQgYW5kIHRoZSBoaWRkZW4gZmxhZyBpcyBzZXRcbiAgICAgICAgaWYgKGNvbmZpZy5rZWVwSGlkZGVuV2l0aG91dE1ldGFkYXRhICYmICFoYXNNZXRhZGF0YVRleHQpIHtcbiAgICAgICAgICB0aGlzLmhpZGUoKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChzaG91bGRCZVNob3duKSB7XG4gICAgICAgIC8vIFNob3cgYSBoaWRkZW4gdGl0bGViYXIgaWYgaXQgc2hvdWxkIGFjdHVhbGx5IGJlIHNob3duXG4gICAgICAgIHRoaXMuc2hvdygpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICAvLyBMaXN0ZW4gdG8gdGV4dCBjaGFuZ2UgZXZlbnRzIHRvIHVwZGF0ZSB0aGUgaGFzTWV0YWRhdGFUZXh0IGZsYWcgd2hlbiB0aGUgbWV0YWRhdGEgZHluYW1pY2FsbHkgY2hhbmdlc1xuICAgIGZvciAobGV0IGNvbXBvbmVudCBvZiB0aGlzLmdldENvbXBvbmVudHMoKSkge1xuICAgICAgaWYgKGNvbXBvbmVudCBpbnN0YW5jZW9mIE1ldGFkYXRhTGFiZWwpIHtcbiAgICAgICAgY29tcG9uZW50Lm9uVGV4dENoYW5nZWQuc3Vic2NyaWJlKGNoZWNrTWV0YWRhdGFUZXh0QW5kVXBkYXRlVmlzaWJpbGl0eSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdWltYW5hZ2VyLm9uQ29udHJvbHNTaG93LnN1YnNjcmliZSgoKSA9PiB7XG4gICAgICBzaG91bGRCZVNob3duID0gdHJ1ZTtcbiAgICAgIGlmICghKGNvbmZpZy5rZWVwSGlkZGVuV2l0aG91dE1ldGFkYXRhICYmICFoYXNNZXRhZGF0YVRleHQpKSB7XG4gICAgICAgIHRoaXMuc2hvdygpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHVpbWFuYWdlci5vbkNvbnRyb2xzSGlkZS5zdWJzY3JpYmUoKCkgPT4ge1xuICAgICAgc2hvdWxkQmVTaG93biA9IGZhbHNlO1xuICAgICAgdGhpcy5oaWRlKCk7XG4gICAgfSk7XG5cbiAgICAvLyBpbml0XG4gICAgY2hlY2tNZXRhZGF0YVRleHRBbmRVcGRhdGVWaXNpYmlsaXR5KCk7XG4gIH1cbn0iLCJpbXBvcnQge0J1dHRvbiwgQnV0dG9uQ29uZmlnfSBmcm9tICcuL2J1dHRvbic7XG5pbXBvcnQge05vQXJncywgRXZlbnREaXNwYXRjaGVyLCBFdmVudH0gZnJvbSAnLi4vZXZlbnRkaXNwYXRjaGVyJztcbmltcG9ydCB7IFVJSW5zdGFuY2VNYW5hZ2VyIH0gZnJvbSAnLi4vdWltYW5hZ2VyJztcbmltcG9ydCB7IFBsYXllckFQSSB9IGZyb20gJ2JpdG1vdmluLXBsYXllcic7XG5pbXBvcnQgeyBMb2NhbGl6YWJsZVRleHQgfSBmcm9tICcuLi9sb2NhbGl6YXRpb24vaTE4bic7XG5cbi8qKlxuICogQ29uZmlndXJhdGlvbiBpbnRlcmZhY2UgZm9yIGEgdG9nZ2xlIGJ1dHRvbiBjb21wb25lbnQuXG4gKlxuICogQGNhdGVnb3J5IENvbmZpZ3NcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBUb2dnbGVCdXR0b25Db25maWcgZXh0ZW5kcyBCdXR0b25Db25maWcge1xuICAvKipcbiAgICogVGhlIENTUyBjbGFzcyB0aGF0IG1hcmtzIHRoZSBvbi1zdGF0ZSBvZiB0aGUgYnV0dG9uLlxuICAgKi9cbiAgb25DbGFzcz86IHN0cmluZztcbiAgLyoqXG4gICAqIFRoZSBDU1MgY2xhc3MgdGhhdCBtYXJrcyB0aGUgb2ZmLXN0YXRlIG9mIHRoZSBidXR0b24uXG4gICAqL1xuICBvZmZDbGFzcz86IHN0cmluZztcbiAgLyoqXG4gICAqIFdDQUcyMCBzdGFuZGFyZCBmb3IgZGVmaW5pbmcgaW5mbyBhYm91dCB0aGUgY29tcG9uZW50ICh1c3VhbGx5IHRoZSBuYW1lKVxuICAgKlxuICAgKiBJdCBpcyByZWNvbW1lbmRlZCB0byB1c2UgYG9uQXJpYUxhYmVsYCBhbmQgYG9mZkFyaWFMYWJlbGAgZm9yIHRvZ2dsZSBidXR0b25zXG4gICAqIGFzIHRoZSBjb21wb25lbnQgY2FuIHRoZW4gdXBkYXRlIHRoZW0gYXMgdGhlIGJ1dHRvbiBpcyB1c2VkLlxuICAgKlxuICAgKiBJZiBib3RoIGBhcmlhTGFiZWxgIGFuZCBgb25BcmlhTGFiZWxgIGFyZSBzZXQsIGBvbkFyaWFMYWJlbGAgaXMgdXNlZC5cbiAgICovXG4gIGFyaWFMYWJlbD86IExvY2FsaXphYmxlVGV4dDtcbiAgLyoqXG4gICAqIFRoZSBhcmlhIGxhYmVsIHRoYXQgbWFya3MgdGhlIG9uLXN0YXRlIG9mIHRoZSBidXR0b24uXG4gICAqL1xuICBvbkFyaWFMYWJlbD86IExvY2FsaXphYmxlVGV4dDtcbiAgLyoqXG4gICAqIFRoZSBhcmlhIGxhYmVsIHRoYXQgbWFya3MgdGhlIG9mZi1zdGF0ZSBvZiB0aGUgYnV0dG9uLlxuICAgKi9cbiAgb2ZmQXJpYUxhYmVsPzogTG9jYWxpemFibGVUZXh0O1xuICAvKipcbiAgICogVGhlIHRleHQgYXMgc3RyaW5nIG9yIGFzIGxvY2FsaXplIGNhbGxiYWNrIG9uIHRoZSBidXR0b24uXG4gICAqL1xuICB0ZXh0PzogTG9jYWxpemFibGVUZXh0O1xufVxuXG4vKipcbiAqIEEgYnV0dG9uIHRoYXQgY2FuIGJlIHRvZ2dsZWQgYmV0d2VlbiAnb24nIGFuZCAnb2ZmJyBzdGF0ZXMuXG4gKlxuICogQGNhdGVnb3J5IENvbXBvbmVudHNcbiAqL1xuZXhwb3J0IGNsYXNzIFRvZ2dsZUJ1dHRvbjxDb25maWcgZXh0ZW5kcyBUb2dnbGVCdXR0b25Db25maWc+IGV4dGVuZHMgQnV0dG9uPENvbmZpZz4ge1xuXG4gIHByaXZhdGUgb25TdGF0ZTogYm9vbGVhbjtcblxuICBwcml2YXRlIHRvZ2dsZUJ1dHRvbkV2ZW50cyA9IHtcbiAgICBvblRvZ2dsZTogbmV3IEV2ZW50RGlzcGF0Y2hlcjxUb2dnbGVCdXR0b248Q29uZmlnPiwgTm9BcmdzPigpLFxuICAgIG9uVG9nZ2xlT246IG5ldyBFdmVudERpc3BhdGNoZXI8VG9nZ2xlQnV0dG9uPENvbmZpZz4sIE5vQXJncz4oKSxcbiAgICBvblRvZ2dsZU9mZjogbmV3IEV2ZW50RGlzcGF0Y2hlcjxUb2dnbGVCdXR0b248Q29uZmlnPiwgTm9BcmdzPigpLFxuICB9O1xuXG4gIGNvbnN0cnVjdG9yKGNvbmZpZzogQ29uZmlnKSB7XG4gICAgc3VwZXIoY29uZmlnKTtcblxuICAgIGNvbnN0IGRlZmF1bHRDb25maWc6IFRvZ2dsZUJ1dHRvbkNvbmZpZyA9IHtcbiAgICAgIGNzc0NsYXNzOiAndWktdG9nZ2xlYnV0dG9uJyxcbiAgICAgIG9uQ2xhc3M6ICdvbicsXG4gICAgICBvZmZDbGFzczogJ29mZicsXG4gICAgfTtcblxuICAgIGlmIChjb25maWcub25BcmlhTGFiZWwpIHtcbiAgICAgIGNvbmZpZy5hcmlhTGFiZWwgPSBjb25maWcub25BcmlhTGFiZWw7XG4gICAgfVxuXG4gICAgdGhpcy5jb25maWcgPSB0aGlzLm1lcmdlQ29uZmlnKGNvbmZpZywgZGVmYXVsdENvbmZpZyBhcyBDb25maWcsIHRoaXMuY29uZmlnKTtcbiAgfVxuXG4gIGNvbmZpZ3VyZShwbGF5ZXI6IFBsYXllckFQSSwgdWltYW5hZ2VyOiBVSUluc3RhbmNlTWFuYWdlcik6IHZvaWQge1xuICAgIHN1cGVyLmNvbmZpZ3VyZShwbGF5ZXIsIHVpbWFuYWdlcik7XG4gICAgY29uc3QgY29uZmlnID0gdGhpcy5nZXRDb25maWcoKTtcbiAgICB0aGlzLmdldERvbUVsZW1lbnQoKS5hZGRDbGFzcyh0aGlzLnByZWZpeENzcyhjb25maWcub2ZmQ2xhc3MpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUb2dnbGVzIHRoZSBidXR0b24gdG8gdGhlICdvbicgc3RhdGUuXG4gICAqL1xuICBvbigpIHtcbiAgICBpZiAodGhpcy5pc09mZigpKSB7XG4gICAgICBjb25zdCBjb25maWcgPSB0aGlzLmdldENvbmZpZygpO1xuXG4gICAgICB0aGlzLm9uU3RhdGUgPSB0cnVlO1xuICAgICAgdGhpcy5nZXREb21FbGVtZW50KCkucmVtb3ZlQ2xhc3ModGhpcy5wcmVmaXhDc3MoY29uZmlnLm9mZkNsYXNzKSk7XG4gICAgICB0aGlzLmdldERvbUVsZW1lbnQoKS5hZGRDbGFzcyh0aGlzLnByZWZpeENzcyhjb25maWcub25DbGFzcykpO1xuXG4gICAgICB0aGlzLm9uVG9nZ2xlRXZlbnQoKTtcbiAgICAgIHRoaXMub25Ub2dnbGVPbkV2ZW50KCk7XG5cbiAgICAgIHRoaXMuc2V0QXJpYUF0dHIoJ3ByZXNzZWQnLCAndHJ1ZScpO1xuXG4gICAgICBpZiAodGhpcy5jb25maWcub25BcmlhTGFiZWwpIHtcbiAgICAgICAgdGhpcy5zZXRBcmlhTGFiZWwodGhpcy5jb25maWcub25BcmlhTGFiZWwpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBUb2dnbGVzIHRoZSBidXR0b24gdG8gdGhlICdvZmYnIHN0YXRlLlxuICAgKi9cbiAgb2ZmKCkge1xuICAgIGlmICh0aGlzLmlzT24oKSkge1xuICAgICAgY29uc3QgY29uZmlnID0gdGhpcy5nZXRDb25maWcoKTtcblxuICAgICAgdGhpcy5vblN0YXRlID0gZmFsc2U7XG4gICAgICB0aGlzLmdldERvbUVsZW1lbnQoKS5yZW1vdmVDbGFzcyh0aGlzLnByZWZpeENzcyhjb25maWcub25DbGFzcykpO1xuICAgICAgdGhpcy5nZXREb21FbGVtZW50KCkuYWRkQ2xhc3ModGhpcy5wcmVmaXhDc3MoY29uZmlnLm9mZkNsYXNzKSk7XG5cbiAgICAgIHRoaXMub25Ub2dnbGVFdmVudCgpO1xuICAgICAgdGhpcy5vblRvZ2dsZU9mZkV2ZW50KCk7XG5cbiAgICAgIHRoaXMuc2V0QXJpYUF0dHIoJ3ByZXNzZWQnLCAnZmFsc2UnKTtcblxuICAgICAgaWYgKHRoaXMuY29uZmlnLm9mZkFyaWFMYWJlbCkge1xuICAgICAgICB0aGlzLnNldEFyaWFMYWJlbCh0aGlzLmNvbmZpZy5vZmZBcmlhTGFiZWwpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBUb2dnbGUgdGhlIGJ1dHRvbiAnb24nIGlmIGl0IGlzICdvZmYnLCBvciAnb2ZmJyBpZiBpdCBpcyAnb24nLlxuICAgKi9cbiAgdG9nZ2xlKCkge1xuICAgIGlmICh0aGlzLmlzT24oKSkge1xuICAgICAgdGhpcy5vZmYoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5vbigpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVja3MgaWYgdGhlIHRvZ2dsZSBidXR0b24gaXMgaW4gdGhlICdvbicgc3RhdGUuXG4gICAqIEByZXR1cm5zIHtib29sZWFufSB0cnVlIGlmIGJ1dHRvbiBpcyAnb24nLCBmYWxzZSBpZiAnb2ZmJ1xuICAgKi9cbiAgaXNPbigpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5vblN0YXRlO1xuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrcyBpZiB0aGUgdG9nZ2xlIGJ1dHRvbiBpcyBpbiB0aGUgJ29mZicgc3RhdGUuXG4gICAqIEByZXR1cm5zIHtib29sZWFufSB0cnVlIGlmIGJ1dHRvbiBpcyAnb2ZmJywgZmFsc2UgaWYgJ29uJ1xuICAgKi9cbiAgaXNPZmYoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuICF0aGlzLmlzT24oKTtcbiAgfVxuXG4gIHByb3RlY3RlZCBvbkNsaWNrRXZlbnQoKSB7XG4gICAgc3VwZXIub25DbGlja0V2ZW50KCk7XG5cbiAgICAvLyBGaXJlIHRoZSB0b2dnbGUgZXZlbnQgdG9nZXRoZXIgd2l0aCB0aGUgY2xpY2sgZXZlbnRcbiAgICAvLyAodGhleSBhcmUgdGVjaG5pY2FsbHkgdGhlIHNhbWUsIG9ubHkgdGhlIHNlbWFudGljcyBhcmUgZGlmZmVyZW50KVxuICAgIHRoaXMub25Ub2dnbGVFdmVudCgpO1xuICB9XG5cbiAgcHJvdGVjdGVkIG9uVG9nZ2xlRXZlbnQoKSB7XG4gICAgdGhpcy50b2dnbGVCdXR0b25FdmVudHMub25Ub2dnbGUuZGlzcGF0Y2godGhpcyk7XG4gIH1cblxuICBwcm90ZWN0ZWQgb25Ub2dnbGVPbkV2ZW50KCkge1xuICAgIHRoaXMudG9nZ2xlQnV0dG9uRXZlbnRzLm9uVG9nZ2xlT24uZGlzcGF0Y2godGhpcyk7XG4gIH1cblxuICBwcm90ZWN0ZWQgb25Ub2dnbGVPZmZFdmVudCgpIHtcbiAgICB0aGlzLnRvZ2dsZUJ1dHRvbkV2ZW50cy5vblRvZ2dsZU9mZi5kaXNwYXRjaCh0aGlzKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBldmVudCB0aGF0IGlzIGZpcmVkIHdoZW4gdGhlIGJ1dHRvbiBpcyB0b2dnbGVkLlxuICAgKiBAcmV0dXJucyB7RXZlbnQ8VG9nZ2xlQnV0dG9uPENvbmZpZz4sIE5vQXJncz59XG4gICAqL1xuICBnZXQgb25Ub2dnbGUoKTogRXZlbnQ8VG9nZ2xlQnV0dG9uPENvbmZpZz4sIE5vQXJncz4ge1xuICAgIHJldHVybiB0aGlzLnRvZ2dsZUJ1dHRvbkV2ZW50cy5vblRvZ2dsZS5nZXRFdmVudCgpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIGV2ZW50IHRoYXQgaXMgZmlyZWQgd2hlbiB0aGUgYnV0dG9uIGlzIHRvZ2dsZWQgJ29uJy5cbiAgICogQHJldHVybnMge0V2ZW50PFRvZ2dsZUJ1dHRvbjxDb25maWc+LCBOb0FyZ3M+fVxuICAgKi9cbiAgZ2V0IG9uVG9nZ2xlT24oKTogRXZlbnQ8VG9nZ2xlQnV0dG9uPENvbmZpZz4sIE5vQXJncz4ge1xuICAgIHJldHVybiB0aGlzLnRvZ2dsZUJ1dHRvbkV2ZW50cy5vblRvZ2dsZU9uLmdldEV2ZW50KCk7XG4gIH1cblxuICAvKipcbiAgICogR2V0cyB0aGUgZXZlbnQgdGhhdCBpcyBmaXJlZCB3aGVuIHRoZSBidXR0b24gaXMgdG9nZ2xlZCAnb2ZmJy5cbiAgICogQHJldHVybnMge0V2ZW50PFRvZ2dsZUJ1dHRvbjxDb25maWc+LCBOb0FyZ3M+fVxuICAgKi9cbiAgZ2V0IG9uVG9nZ2xlT2ZmKCk6IEV2ZW50PFRvZ2dsZUJ1dHRvbjxDb25maWc+LCBOb0FyZ3M+IHtcbiAgICByZXR1cm4gdGhpcy50b2dnbGVCdXR0b25FdmVudHMub25Ub2dnbGVPZmYuZ2V0RXZlbnQoKTtcbiAgfVxufSIsImltcG9ydCB7Q29tcG9uZW50LCBDb21wb25lbnRDb25maWd9IGZyb20gJy4vY29tcG9uZW50JztcbmltcG9ydCB7RE9NfSBmcm9tICcuLi9kb20nO1xuXG4vKipcbiAqIEFuaW1hdGVkIGFuYWxvZyBUViBzdGF0aWMgbm9pc2UuXG4gKlxuICogQGNhdGVnb3J5IENvbXBvbmVudHNcbiAqL1xuZXhwb3J0IGNsYXNzIFR2Tm9pc2VDYW52YXMgZXh0ZW5kcyBDb21wb25lbnQ8Q29tcG9uZW50Q29uZmlnPiB7XG5cbiAgcHJpdmF0ZSBjYW52YXM6IERPTTtcblxuICBwcml2YXRlIGNhbnZhc0VsZW1lbnQ6IEhUTUxDYW52YXNFbGVtZW50O1xuICBwcml2YXRlIGNhbnZhc0NvbnRleHQ6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRDtcbiAgcHJpdmF0ZSBjYW52YXNXaWR0aCA9IDE2MDtcbiAgcHJpdmF0ZSBjYW52YXNIZWlnaHQgPSA5MDtcbiAgcHJpdmF0ZSBpbnRlcmZlcmVuY2VIZWlnaHQgPSA1MDtcbiAgcHJpdmF0ZSBsYXN0RnJhbWVVcGRhdGU6IG51bWJlciA9IDA7XG4gIHByaXZhdGUgZnJhbWVJbnRlcnZhbDogbnVtYmVyID0gNjA7XG4gIHByaXZhdGUgdXNlQW5pbWF0aW9uRnJhbWU6IGJvb2xlYW4gPSAhIXdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWU7XG4gIHByaXZhdGUgbm9pc2VBbmltYXRpb25XaW5kb3dQb3M6IG51bWJlcjtcbiAgcHJpdmF0ZSBmcmFtZVVwZGF0ZUhhbmRsZXJJZDogbnVtYmVyO1xuXG4gIGNvbnN0cnVjdG9yKGNvbmZpZzogQ29tcG9uZW50Q29uZmlnID0ge30pIHtcbiAgICBzdXBlcihjb25maWcpO1xuXG4gICAgdGhpcy5jb25maWcgPSB0aGlzLm1lcmdlQ29uZmlnKGNvbmZpZywge1xuICAgICAgY3NzQ2xhc3M6ICd1aS10dm5vaXNlY2FudmFzJyxcbiAgICB9LCB0aGlzLmNvbmZpZyk7XG4gIH1cblxuICBwcm90ZWN0ZWQgdG9Eb21FbGVtZW50KCk6IERPTSB7XG4gICAgcmV0dXJuIHRoaXMuY2FudmFzID0gbmV3IERPTSgnY2FudmFzJywgeyAnY2xhc3MnOiB0aGlzLmdldENzc0NsYXNzZXMoKSB9LCB0aGlzKTtcbiAgfVxuXG4gIHN0YXJ0KCk6IHZvaWQge1xuICAgIHRoaXMuY2FudmFzRWxlbWVudCA9IDxIVE1MQ2FudmFzRWxlbWVudD50aGlzLmNhbnZhcy5nZXQoMCk7XG4gICAgdGhpcy5jYW52YXNDb250ZXh0ID0gdGhpcy5jYW52YXNFbGVtZW50LmdldENvbnRleHQoJzJkJyk7XG4gICAgdGhpcy5ub2lzZUFuaW1hdGlvbldpbmRvd1BvcyA9IC10aGlzLmNhbnZhc0hlaWdodDtcbiAgICB0aGlzLmxhc3RGcmFtZVVwZGF0ZSA9IDA7XG5cbiAgICB0aGlzLmNhbnZhc0VsZW1lbnQud2lkdGggPSB0aGlzLmNhbnZhc1dpZHRoO1xuICAgIHRoaXMuY2FudmFzRWxlbWVudC5oZWlnaHQgPSB0aGlzLmNhbnZhc0hlaWdodDtcblxuICAgIHRoaXMucmVuZGVyRnJhbWUoKTtcbiAgfVxuXG4gIHN0b3AoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMudXNlQW5pbWF0aW9uRnJhbWUpIHtcbiAgICAgIGNhbmNlbEFuaW1hdGlvbkZyYW1lKHRoaXMuZnJhbWVVcGRhdGVIYW5kbGVySWQpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjbGVhclRpbWVvdXQodGhpcy5mcmFtZVVwZGF0ZUhhbmRsZXJJZCk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSByZW5kZXJGcmFtZSgpOiB2b2lkIHtcbiAgICAvLyBUaGlzIGNvZGUgaGFzIGJlZW4gY29waWVkIGZyb20gdGhlIHBsYXllciBjb250cm9scy5qcyBhbmQgc2ltcGxpZmllZFxuXG4gICAgaWYgKHRoaXMubGFzdEZyYW1lVXBkYXRlICsgdGhpcy5mcmFtZUludGVydmFsID4gbmV3IERhdGUoKS5nZXRUaW1lKCkpIHtcbiAgICAgIC8vIEl0J3MgdG9vIGVhcmx5IHRvIHJlbmRlciB0aGUgbmV4dCBmcmFtZVxuICAgICAgdGhpcy5zY2hlZHVsZU5leHRSZW5kZXIoKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBsZXQgY3VycmVudFBpeGVsT2Zmc2V0O1xuICAgIGxldCBjYW52YXNXaWR0aCA9IHRoaXMuY2FudmFzV2lkdGg7XG4gICAgbGV0IGNhbnZhc0hlaWdodCA9IHRoaXMuY2FudmFzSGVpZ2h0O1xuXG4gICAgLy8gQ3JlYXRlIHRleHR1cmVcbiAgICBsZXQgbm9pc2VJbWFnZSA9IHRoaXMuY2FudmFzQ29udGV4dC5jcmVhdGVJbWFnZURhdGEoY2FudmFzV2lkdGgsIGNhbnZhc0hlaWdodCk7XG5cbiAgICAvLyBGaWxsIHRleHR1cmUgd2l0aCBub2lzZVxuICAgIGZvciAobGV0IHkgPSAwOyB5IDwgY2FudmFzSGVpZ2h0OyB5KyspIHtcbiAgICAgIGZvciAobGV0IHggPSAwOyB4IDwgY2FudmFzV2lkdGg7IHgrKykge1xuICAgICAgICBjdXJyZW50UGl4ZWxPZmZzZXQgPSAoY2FudmFzV2lkdGggKiB5ICogNCkgKyB4ICogNDtcbiAgICAgICAgbm9pc2VJbWFnZS5kYXRhW2N1cnJlbnRQaXhlbE9mZnNldF0gPSBNYXRoLnJhbmRvbSgpICogMjU1O1xuICAgICAgICBpZiAoeSA8IHRoaXMubm9pc2VBbmltYXRpb25XaW5kb3dQb3MgfHwgeSA+IHRoaXMubm9pc2VBbmltYXRpb25XaW5kb3dQb3MgKyB0aGlzLmludGVyZmVyZW5jZUhlaWdodCkge1xuICAgICAgICAgIG5vaXNlSW1hZ2UuZGF0YVtjdXJyZW50UGl4ZWxPZmZzZXRdICo9IDAuODU7XG4gICAgICAgIH1cbiAgICAgICAgbm9pc2VJbWFnZS5kYXRhW2N1cnJlbnRQaXhlbE9mZnNldCArIDFdID0gbm9pc2VJbWFnZS5kYXRhW2N1cnJlbnRQaXhlbE9mZnNldF07XG4gICAgICAgIG5vaXNlSW1hZ2UuZGF0YVtjdXJyZW50UGl4ZWxPZmZzZXQgKyAyXSA9IG5vaXNlSW1hZ2UuZGF0YVtjdXJyZW50UGl4ZWxPZmZzZXRdO1xuICAgICAgICBub2lzZUltYWdlLmRhdGFbY3VycmVudFBpeGVsT2Zmc2V0ICsgM10gPSA1MDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBQdXQgdGV4dHVyZSBvbnRvIGNhbnZhc1xuICAgIHRoaXMuY2FudmFzQ29udGV4dC5wdXRJbWFnZURhdGEobm9pc2VJbWFnZSwgMCwgMCk7XG5cbiAgICB0aGlzLmxhc3RGcmFtZVVwZGF0ZSA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xuICAgIHRoaXMubm9pc2VBbmltYXRpb25XaW5kb3dQb3MgKz0gNztcbiAgICBpZiAodGhpcy5ub2lzZUFuaW1hdGlvbldpbmRvd1BvcyA+IGNhbnZhc0hlaWdodCkge1xuICAgICAgdGhpcy5ub2lzZUFuaW1hdGlvbldpbmRvd1BvcyA9IC1jYW52YXNIZWlnaHQ7XG4gICAgfVxuXG4gICAgdGhpcy5zY2hlZHVsZU5leHRSZW5kZXIoKTtcbiAgfVxuXG4gIHByaXZhdGUgc2NoZWR1bGVOZXh0UmVuZGVyKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLnVzZUFuaW1hdGlvbkZyYW1lKSB7XG4gICAgICB0aGlzLmZyYW1lVXBkYXRlSGFuZGxlcklkID0gd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSh0aGlzLnJlbmRlckZyYW1lLmJpbmQodGhpcykpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmZyYW1lVXBkYXRlSGFuZGxlcklkID0gd2luZG93LnNldFRpbWVvdXQodGhpcy5yZW5kZXJGcmFtZS5iaW5kKHRoaXMpLCB0aGlzLmZyYW1lSW50ZXJ2YWwpO1xuICAgIH1cbiAgfVxufSIsImltcG9ydCB7IENvbnRhaW5lciwgQ29udGFpbmVyQ29uZmlnIH0gZnJvbSAnLi9jb250YWluZXInO1xuaW1wb3J0IHsgVUlJbnN0YW5jZU1hbmFnZXIgfSBmcm9tICcuLi91aW1hbmFnZXInO1xuaW1wb3J0IHsgRE9NLCBIVE1MRWxlbWVudFdpdGhDb21wb25lbnQgfSBmcm9tICcuLi9kb20nO1xuaW1wb3J0IHsgVGltZW91dCB9IGZyb20gJy4uL3RpbWVvdXQnO1xuaW1wb3J0IHsgUGxheWVyVXRpbHMgfSBmcm9tICcuLi9wbGF5ZXJ1dGlscyc7XG5pbXBvcnQgeyBDYW5jZWxFdmVudEFyZ3MsIEV2ZW50IGFzIFVpRXZlbnQsIEV2ZW50RGlzcGF0Y2hlciB9IGZyb20gJy4uL2V2ZW50ZGlzcGF0Y2hlcic7XG5pbXBvcnQgeyBQbGF5ZXJBUEksIFBsYXllclJlc2l6ZWRFdmVudCB9IGZyb20gJ2JpdG1vdmluLXBsYXllcic7XG5pbXBvcnQgeyBpMThuIH0gZnJvbSAnLi4vbG9jYWxpemF0aW9uL2kxOG4nO1xuaW1wb3J0IHsgQnV0dG9uLCBCdXR0b25Db25maWcgfSBmcm9tICcuL2J1dHRvbic7XG5cbi8qKlxuICogQ29uZmlndXJhdGlvbiBpbnRlcmZhY2UgZm9yIGEge0BsaW5rIFVJQ29udGFpbmVyfS5cbiAqXG4gKiBAY2F0ZWdvcnkgQ29uZmlnc1xuICovXG5leHBvcnQgaW50ZXJmYWNlIFVJQ29udGFpbmVyQ29uZmlnIGV4dGVuZHMgQ29udGFpbmVyQ29uZmlnIHtcbiAgLyoqXG4gICAqIFRoZSBkZWxheSBpbiBtaWxsaXNlY29uZHMgYWZ0ZXIgd2hpY2ggdGhlIGNvbnRyb2wgYmFyIHdpbGwgYmUgaGlkZGVuIHdoZW4gdGhlcmUgaXMgbm8gdXNlciBpbnRlcmFjdGlvbi5cbiAgICogU2V0IHRvIC0xIGZvciB0aGUgVUkgdG8gYmUgYWx3YXlzIHNob3duLlxuICAgKiBEZWZhdWx0OiA1IHNlY29uZHMgKDUwMDApXG4gICAqL1xuICBoaWRlRGVsYXk/OiBudW1iZXI7XG4gIC8qKlxuICAgKiBBbiBhcnJheSBvZiBwbGF5ZXIgc3RhdGVzIGluIHdoaWNoIHRoZSBVSSB3aWxsIG5vdCBiZSBoaWRkZW4sIG5vIG1hdHRlciB3aGF0IHRoZSB7QGxpbmsgaGlkZURlbGF5fSBpcy5cbiAgICovXG4gIGhpZGVQbGF5ZXJTdGF0ZUV4Y2VwdGlvbnM/OiBQbGF5ZXJVdGlscy5QbGF5ZXJTdGF0ZVtdO1xuICAvKipcbiAgICogVGhlIEhUTUwgZWxlbWVudCBvbiB3aGljaCB1c2VyIGludGVyYWN0aW9uIGV2ZW50cyAoZS5nLiBtb3VzZSBhbmQgdG91Y2ggZXZlbnRzKSB3aWxsIGJlIHRyYWNrZWQgdG8gZGV0ZWN0XG4gICAqIGludGVyYWN0aW9uIHdpdGggdGhlIFVJLiBUaGVzZSBiYXNpY2FsbHkgdHJpZ2dlciBzaG93aW5nIGFuZCBoaWRpbmcgb2YgdGhlIFVJLlxuICAgKiBEZWZhdWx0OiB0aGUgVUkgY29udGFpbmVyIGl0c2VsZlxuICAgKi9cbiAgdXNlckludGVyYWN0aW9uRXZlbnRTb3VyY2U/OiBIVE1MRWxlbWVudDtcblxuICAvKipcbiAgICogU3BlY2lmeSB3aGV0aGVyIHRoZSBVSSBzaG91bGQgYmUgaGlkZGVuIGltbWVkaWF0bHkgaWYgdGhlIG1vdXNlIGxlYXZlcyB0aGUgdXNlckludGVyYWN0aW9uRXZlbnRTb3VyY2UuXG4gICAqIElmIGZhbHNlIG9yIG5vdCBzZXQgaXQgd2lsbCB3YWl0IGZvciB0aGUgaGlkZURlbGF5LlxuICAgKiBEZWZhdWx0OiBmYWxzZVxuICAgKi9cbiAgaGlkZUltbWVkaWF0ZWx5T25Nb3VzZUxlYXZlPzogYm9vbGVhbjtcbn1cblxuLyoqXG4gKiBUaGUgYmFzZSBjb250YWluZXIgdGhhdCBjb250YWlucyBhbGwgb2YgdGhlIFVJLiBUaGUgVUlDb250YWluZXIgaXMgcGFzc2VkIHRvIHRoZSB7QGxpbmsgVUlNYW5hZ2VyfSB0byBidWlsZCBhbmRcbiAqIHNldHVwIHRoZSBVSS5cbiAqXG4gKiBAY2F0ZWdvcnkgQ29udGFpbmVyc1xuICovXG5leHBvcnQgY2xhc3MgVUlDb250YWluZXIgZXh0ZW5kcyBDb250YWluZXI8VUlDb250YWluZXJDb25maWc+IHtcblxuICBwcml2YXRlIHN0YXRpYyByZWFkb25seSBTVEFURV9QUkVGSVggPSAncGxheWVyLXN0YXRlLSc7XG5cbiAgcHJpdmF0ZSBzdGF0aWMgcmVhZG9ubHkgRlVMTFNDUkVFTiA9ICdmdWxsc2NyZWVuJztcbiAgcHJpdmF0ZSBzdGF0aWMgcmVhZG9ubHkgQlVGRkVSSU5HID0gJ2J1ZmZlcmluZyc7XG4gIHByaXZhdGUgc3RhdGljIHJlYWRvbmx5IFJFTU9URV9DT05UUk9MID0gJ3JlbW90ZS1jb250cm9sJztcbiAgcHJpdmF0ZSBzdGF0aWMgcmVhZG9ubHkgQ09OVFJPTFNfU0hPV04gPSAnY29udHJvbHMtc2hvd24nO1xuICBwcml2YXRlIHN0YXRpYyByZWFkb25seSBDT05UUk9MU19ISURERU4gPSAnY29udHJvbHMtaGlkZGVuJztcblxuICBwcml2YXRlIHVpSGlkZVRpbWVvdXQ6IFRpbWVvdXQ7XG4gIHByaXZhdGUgcGxheWVyU3RhdGVDaGFuZ2U6IEV2ZW50RGlzcGF0Y2hlcjxVSUNvbnRhaW5lciwgUGxheWVyVXRpbHMuUGxheWVyU3RhdGU+O1xuXG4gIHByaXZhdGUgdXNlckludGVyYWN0aW9uRXZlbnRTb3VyY2U6IERPTTtcbiAgcHJpdmF0ZSB1c2VySW50ZXJhY3Rpb25FdmVudHM6IHsgbmFtZTogc3RyaW5nLCBoYW5kbGVyOiBFdmVudExpc3RlbmVyT3JFdmVudExpc3RlbmVyT2JqZWN0IH1bXTtcbiAgcHJpdmF0ZSBoaWRpbmdQcmV2ZW50ZWQ6ICgpID0+IGJvb2xlYW47XG5cbiAgcHVibGljIGhpZGVVaTogKCkgPT4gdm9pZCA9ICgpID0+IHt9O1xuICBwdWJsaWMgc2hvd1VpOiAoKSA9PiB2b2lkID0gKCkgPT4ge307XG5cbiAgY29uc3RydWN0b3IoY29uZmlnOiBVSUNvbnRhaW5lckNvbmZpZykge1xuICAgIHN1cGVyKGNvbmZpZyk7XG5cbiAgICB0aGlzLmNvbmZpZyA9IHRoaXMubWVyZ2VDb25maWcoY29uZmlnLCA8VUlDb250YWluZXJDb25maWc+e1xuICAgICAgY3NzQ2xhc3M6ICd1aS11aWNvbnRhaW5lcicsXG4gICAgICByb2xlOiAncmVnaW9uJyxcbiAgICAgIGFyaWFMYWJlbDogaTE4bi5nZXRMb2NhbGl6ZXIoJ3BsYXllcicpLFxuICAgICAgaGlkZURlbGF5OiA1MDAwLFxuICAgICAgaGlkZUltbWVkaWF0ZWx5T25Nb3VzZUxlYXZlOiBmYWxzZSxcbiAgICB9LCB0aGlzLmNvbmZpZyk7XG5cbiAgICB0aGlzLnBsYXllclN0YXRlQ2hhbmdlID0gbmV3IEV2ZW50RGlzcGF0Y2hlcjxVSUNvbnRhaW5lciwgUGxheWVyVXRpbHMuUGxheWVyU3RhdGU+KCk7XG4gICAgdGhpcy5oaWRpbmdQcmV2ZW50ZWQgPSAoKSA9PiBmYWxzZTtcbiAgfVxuXG4gIGNvbmZpZ3VyZShwbGF5ZXI6IFBsYXllckFQSSwgdWltYW5hZ2VyOiBVSUluc3RhbmNlTWFuYWdlcik6IHZvaWQge1xuICAgIGNvbnN0IGNvbmZpZyA9IHRoaXMuZ2V0Q29uZmlnKCk7XG5cbiAgICBpZiAoY29uZmlnLnVzZXJJbnRlcmFjdGlvbkV2ZW50U291cmNlKSB7XG4gICAgICB0aGlzLnVzZXJJbnRlcmFjdGlvbkV2ZW50U291cmNlID0gbmV3IERPTShjb25maWcudXNlckludGVyYWN0aW9uRXZlbnRTb3VyY2UpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnVzZXJJbnRlcmFjdGlvbkV2ZW50U291cmNlID0gdGhpcy5nZXREb21FbGVtZW50KCk7XG4gICAgfVxuXG4gICAgc3VwZXIuY29uZmlndXJlKHBsYXllciwgdWltYW5hZ2VyKTtcblxuICAgIHRoaXMuY29uZmlndXJlVUlTaG93SGlkZShwbGF5ZXIsIHVpbWFuYWdlcik7XG4gICAgdGhpcy5jb25maWd1cmVQbGF5ZXJTdGF0ZXMocGxheWVyLCB1aW1hbmFnZXIpO1xuICB9XG5cbiAgcHJpdmF0ZSBjb25maWd1cmVVSVNob3dIaWRlKHBsYXllcjogUGxheWVyQVBJLCB1aW1hbmFnZXI6IFVJSW5zdGFuY2VNYW5hZ2VyKTogdm9pZCB7XG4gICAgbGV0IGNvbmZpZyA9IHRoaXMuZ2V0Q29uZmlnKCk7XG5cbiAgICBpZiAoY29uZmlnLmhpZGVEZWxheSA9PT0gLTEpIHtcbiAgICAgIHVpbWFuYWdlci5vbkNvbmZpZ3VyZWQuc3Vic2NyaWJlKCgpID0+IHVpbWFuYWdlci5vbkNvbnRyb2xzU2hvdy5kaXNwYXRjaCh0aGlzKSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgbGV0IGlzVWlTaG93biA9IGZhbHNlO1xuICAgIGxldCBpc1NlZWtpbmcgPSBmYWxzZTtcbiAgICBsZXQgaXNGaXJzdFRvdWNoID0gdHJ1ZTtcbiAgICBsZXQgcGxheWVyU3RhdGU6IFBsYXllclV0aWxzLlBsYXllclN0YXRlO1xuXG4gICAgdGhpcy5oaWRpbmdQcmV2ZW50ZWQgPSAoKTogYm9vbGVhbiA9PiB7XG4gICAgICByZXR1cm4gY29uZmlnLmhpZGVQbGF5ZXJTdGF0ZUV4Y2VwdGlvbnMgJiYgY29uZmlnLmhpZGVQbGF5ZXJTdGF0ZUV4Y2VwdGlvbnMuaW5kZXhPZihwbGF5ZXJTdGF0ZSkgPiAtMTtcbiAgICB9O1xuXG4gICAgdGhpcy5zaG93VWkgPSAoKSA9PiB7XG4gICAgICBpZiAoIWlzVWlTaG93bikge1xuICAgICAgICAvLyBMZXQgc3Vic2NyaWJlcnMga25vdyB0aGF0IHRoZXkgc2hvdWxkIHJldmVhbCB0aGVtc2VsdmVzXG4gICAgICAgIHVpbWFuYWdlci5vbkNvbnRyb2xzU2hvdy5kaXNwYXRjaCh0aGlzKTtcbiAgICAgICAgaXNVaVNob3duID0gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIC8vIERvbid0IHRyaWdnZXIgdGltZW91dCB3aGlsZSBzZWVraW5nIChpdCB3aWxsIGJlIHRyaWdnZXJlZCBvbmNlIHRoZSBzZWVrIGlzIGZpbmlzaGVkKSBvciBjYXN0aW5nXG4gICAgICBpZiAoIWlzU2Vla2luZyAmJiAhcGxheWVyLmlzQ2FzdGluZygpICYmICF0aGlzLmhpZGluZ1ByZXZlbnRlZCgpKSB7XG4gICAgICAgIHRoaXMudWlIaWRlVGltZW91dC5zdGFydCgpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICB0aGlzLmhpZGVVaSA9ICgpID0+IHtcbiAgICAgIC8vIEhpZGUgdGhlIFVJIG9ubHkgaWYgaXQgaXMgc2hvd24sIGFuZCBpZiBub3QgY2FzdGluZ1xuICAgICAgaWYgKGlzVWlTaG93biAmJiAhcGxheWVyLmlzQ2FzdGluZygpKSB7XG4gICAgICAgIC8vIElzc3VlIGEgcHJldmlldyBldmVudCB0byBjaGVjayBpZiB3ZSBhcmUgZ29vZCB0byBoaWRlIHRoZSBjb250cm9sc1xuICAgICAgICBsZXQgcHJldmlld0hpZGVFdmVudEFyZ3MgPSA8Q2FuY2VsRXZlbnRBcmdzPnt9O1xuICAgICAgICB1aW1hbmFnZXIub25QcmV2aWV3Q29udHJvbHNIaWRlLmRpc3BhdGNoKHRoaXMsIHByZXZpZXdIaWRlRXZlbnRBcmdzKTtcblxuICAgICAgICBpZiAoIXByZXZpZXdIaWRlRXZlbnRBcmdzLmNhbmNlbCkge1xuICAgICAgICAgIC8vIElmIHRoZSBwcmV2aWV3IHdhc24ndCBjYW5jZWxlZCwgbGV0IHN1YnNjcmliZXJzIGtub3cgdGhhdCB0aGV5IHNob3VsZCBub3cgaGlkZSB0aGVtc2VsdmVzXG4gICAgICAgICAgdWltYW5hZ2VyLm9uQ29udHJvbHNIaWRlLmRpc3BhdGNoKHRoaXMpO1xuICAgICAgICAgIGlzVWlTaG93biA9IGZhbHNlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIElmIHRoZSBoaWRlIHByZXZpZXcgd2FzIGNhbmNlbGVkLCBjb250aW51ZSB0byBzaG93IFVJXG4gICAgICAgICAgdGhpcy5zaG93VWkoKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG5cbiAgICAvLyBUaW1lb3V0IHRvIGRlZmVyIFVJIGhpZGluZyBieSB0aGUgY29uZmlndXJlZCBkZWxheSB0aW1lXG4gICAgdGhpcy51aUhpZGVUaW1lb3V0ID0gbmV3IFRpbWVvdXQoY29uZmlnLmhpZGVEZWxheSwgdGhpcy5oaWRlVWkpO1xuXG4gICAgdGhpcy51c2VySW50ZXJhY3Rpb25FdmVudHMgPSBbe1xuICAgICAgLy8gT24gdG91Y2ggZGlzcGxheXMsIHRoZSBmaXJzdCB0b3VjaCByZXZlYWxzIHRoZSBVSVxuICAgICAgbmFtZTogJ3RvdWNoZW5kJyxcbiAgICAgIGhhbmRsZXI6IChlKSA9PiB7XG4gICAgICAgIGNvbnN0IHNob3VsZFByZXZlbnREZWZhdWx0ID0gKChlOiBFdmVudCk6IEJvb2xlYW4gPT4ge1xuICAgICAgICAgIGNvbnN0IGZpbmRCdXR0b25Db21wb25lbnQgPSAoKGVsZW1lbnQ6IEhUTUxFbGVtZW50V2l0aENvbXBvbmVudCk6IEJ1dHRvbjxCdXR0b25Db25maWc+IHwgbnVsbCA9PiB7XG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgIWVsZW1lbnRcbiAgICAgICAgICAgICAgICAgIHx8IGVsZW1lbnQgPT09IHRoaXMudXNlckludGVyYWN0aW9uRXZlbnRTb3VyY2UuZ2V0KDApXG4gICAgICAgICAgICAgICAgICB8fCBlbGVtZW50LmNvbXBvbmVudCBpbnN0YW5jZW9mIFVJQ29udGFpbmVyXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChlbGVtZW50LmNvbXBvbmVudCAmJiBlbGVtZW50LmNvbXBvbmVudCBpbnN0YW5jZW9mIEJ1dHRvbikge1xuICAgICAgICAgICAgICByZXR1cm4gZWxlbWVudC5jb21wb25lbnQ7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICByZXR1cm4gZmluZEJ1dHRvbkNvbXBvbmVudChlbGVtZW50LnBhcmVudEVsZW1lbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgY29uc3QgYnV0dG9uQ29tcG9uZW50ID0gZmluZEJ1dHRvbkNvbXBvbmVudChlLnRhcmdldCBhcyBIVE1MRWxlbWVudFdpdGhDb21wb25lbnQpO1xuICAgICAgICAgIHJldHVybiAhKGJ1dHRvbkNvbXBvbmVudCAmJiBidXR0b25Db21wb25lbnQuZ2V0Q29uZmlnKCkuYWNjZXB0c1RvdWNoV2l0aFVpSGlkZGVuKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKCFpc1VpU2hvd24pIHtcbiAgICAgICAgICAvLyBPbmx5IGlmIHRoZSBVSSBpcyBoaWRkZW4sIHdlIHByZXZlbnQgb3RoZXIgYWN0aW9ucyAoZXhjZXB0IGZvciB0aGUgZmlyc3QgdG91Y2gpIGFuZCByZXZlYWwgdGhlIFVJXG4gICAgICAgICAgLy8gaW5zdGVhZC4gVGhlIGZpcnN0IHRvdWNoIGlzIG5vdCBwcmV2ZW50ZWQgdG8gbGV0IG90aGVyIGxpc3RlbmVycyByZWNlaXZlIHRoZSBldmVudCBhbmQgdHJpZ2dlciBhblxuICAgICAgICAgIC8vIGluaXRpYWwgYWN0aW9uLCBlLmcuIHRoZSBodWdlIHBsYXliYWNrIGJ1dHRvbiBjYW4gZGlyZWN0bHkgc3RhcnQgcGxheWJhY2sgaW5zdGVhZCBvZiByZXF1aXJpbmcgYSBkb3VibGVcbiAgICAgICAgICAvLyB0YXAgd2hpY2ggMS4gcmV2ZWFscyB0aGUgVUkgYW5kIDIuIHN0YXJ0cyBwbGF5YmFjay5cbiAgICAgICAgICBpZiAoaXNGaXJzdFRvdWNoICYmICFwbGF5ZXIuaXNQbGF5aW5nKCkpIHtcbiAgICAgICAgICAgIGlzRmlyc3RUb3VjaCA9IGZhbHNlO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBPbiB0b3VjaCBpbnB1dCBkZXZpY2VzLCB0aGUgZmlyc3QgdG91Y2ggaXMgZXhwZWN0ZWQgdG8gZGlzcGxheSB0aGUgVUkgY29udHJvbHMgYW5kIG5vdCBiZSBwcm9wYWdhdGVkIHRvXG4gICAgICAgICAgICAvLyBvdGhlciBjb21wb25lbnRzLlxuICAgICAgICAgICAgLy8gV2hlbiBidXR0b25zIGFyZSBhbHdheXMgdmlzaWJsZSB0aGlzIGNhdXNlcyBVWCBwcm9ibGVtcywgYXMgdGhlIGZpcnN0IHRvdWNoIGlzIG5vdCByZWNvZ25pemVkLlxuICAgICAgICAgICAgLy8gVGhpcyBpcyB0aGUgY2FzZSBmb3IgdGhlIHtAbGluayBBZFNraXBCdXR0b259IGFuZCB7QGxpbmsgQWRDbGlja092ZXJsYXl9LlxuICAgICAgICAgICAgLy8gVG8gcHJldmVudCBVWCBpc3N1ZXMgd2hlcmUgdGhlIGJ1dHRvbnMgbmVlZCB0byBiZSB0b3VjaGVkIHR3aWNlLCB3ZSBkbyBub3QgcHJldmVudCB0aGUgZmlyc3QgdG91Y2ggZXZlbnQuXG4gICAgICAgICAgICBpZiAoc2hvdWxkUHJldmVudERlZmF1bHQoZSkpIHtcbiAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICB0aGlzLnNob3dVaSgpO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgIH0sIHtcbiAgICAgIC8vIFdoZW4gdGhlIG1vdXNlIGVudGVycywgd2Ugc2hvdyB0aGUgVUlcbiAgICAgIG5hbWU6ICdtb3VzZWVudGVyJyxcbiAgICAgIGhhbmRsZXI6ICgpID0+IHtcbiAgICAgICAgdGhpcy5zaG93VWkoKTtcbiAgICAgIH0sXG4gICAgfSwge1xuICAgICAgLy8gV2hlbiB0aGUgbW91c2UgbW92ZXMgd2l0aGluLCB3ZSBzaG93IHRoZSBVSVxuICAgICAgbmFtZTogJ21vdXNlbW92ZScsXG4gICAgICBoYW5kbGVyOiAoKSA9PiB7XG4gICAgICAgIHRoaXMuc2hvd1VpKCk7XG4gICAgICB9LFxuICAgIH0sIHtcbiAgICAgIG5hbWU6ICdmb2N1c2luJyxcbiAgICAgIGhhbmRsZXI6ICgpID0+IHtcbiAgICAgICAgdGhpcy5zaG93VWkoKTtcbiAgICAgIH0sXG4gICAgfSwge1xuICAgICAgbmFtZTogJ2tleWRvd24nLFxuICAgICAgaGFuZGxlcjogKCkgPT4ge1xuICAgICAgICB0aGlzLnNob3dVaSgpO1xuICAgICAgfSxcbiAgICB9LCB7XG4gICAgICAvLyBXaGVuIHRoZSBtb3VzZSBsZWF2ZXMsIHdlIGNhbiBwcmVwYXJlIHRvIGhpZGUgdGhlIFVJLCBleGNlcHQgYSBzZWVrIGlzIGdvaW5nIG9uXG4gICAgICBuYW1lOiAnbW91c2VsZWF2ZScsXG4gICAgICBoYW5kbGVyOiAoKSA9PiB7XG4gICAgICAgIC8vIFdoZW4gYSBzZWVrIGlzIGdvaW5nIG9uLCB0aGUgc2VlayBzY3J1YiBwb2ludGVyIG1heSBleGl0IHRoZSBVSSBhcmVhIHdoaWxlIHN0aWxsIHNlZWtpbmcsIGFuZCB3ZSBkbyBub3RcbiAgICAgICAgLy8gaGlkZSB0aGUgVUkgaW4gc3VjaCBjYXNlc1xuICAgICAgICBpZiAoIWlzU2Vla2luZyAmJiAhdGhpcy5oaWRpbmdQcmV2ZW50ZWQoKSkge1xuICAgICAgICAgIGlmICh0aGlzLmNvbmZpZy5oaWRlSW1tZWRpYXRlbHlPbk1vdXNlTGVhdmUpIHtcbiAgICAgICAgICAgIHRoaXMuaGlkZVVpKCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMudWlIaWRlVGltZW91dC5zdGFydCgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSxcbiAgICB9XTtcblxuICAgIHRoaXMudXNlckludGVyYWN0aW9uRXZlbnRzLmZvckVhY2goKGV2ZW50KSA9PiB0aGlzLnVzZXJJbnRlcmFjdGlvbkV2ZW50U291cmNlLm9uKGV2ZW50Lm5hbWUsIGV2ZW50LmhhbmRsZXIpKTtcblxuICAgIHVpbWFuYWdlci5vblNlZWsuc3Vic2NyaWJlKCgpID0+IHtcbiAgICAgIHRoaXMudWlIaWRlVGltZW91dC5jbGVhcigpOyAvLyBEb24ndCBoaWRlIFVJIHdoaWxlIGEgc2VlayBpcyBpbiBwcm9ncmVzc1xuICAgICAgaXNTZWVraW5nID0gdHJ1ZTtcbiAgICB9KTtcbiAgICB1aW1hbmFnZXIub25TZWVrZWQuc3Vic2NyaWJlKCgpID0+IHtcbiAgICAgIGlzU2Vla2luZyA9IGZhbHNlO1xuICAgICAgaWYgKCF0aGlzLmhpZGluZ1ByZXZlbnRlZCgpKSB7XG4gICAgICAgIHRoaXMudWlIaWRlVGltZW91dC5zdGFydCgpOyAvLyBSZS1lbmFibGUgVUkgaGlkZSB0aW1lb3V0IGFmdGVyIGEgc2Vla1xuICAgICAgfVxuICAgIH0pO1xuICAgIHVpbWFuYWdlci5vbkNvbXBvbmVudFZpZXdNb2RlQ2hhbmdlZC5zdWJzY3JpYmUoKF8sIHsgbW9kZSB9KSA9PiB0aGlzLnRyYWNrQ29tcG9uZW50Vmlld01vZGUobW9kZSkpO1xuICAgIHBsYXllci5vbihwbGF5ZXIuZXhwb3J0cy5QbGF5ZXJFdmVudC5DYXN0U3RhcnRlZCwgKCkgPT4ge1xuICAgICAgdGhpcy5zaG93VWkoKTsgLy8gU2hvdyBVSSB3aGVuIGEgQ2FzdCBzZXNzaW9uIGhhcyBzdGFydGVkIChVSSB3aWxsIHRoZW4gc3RheSBwZXJtYW5lbnRseSBvbiBkdXJpbmcgdGhlIHNlc3Npb24pXG4gICAgfSk7XG4gICAgdGhpcy5wbGF5ZXJTdGF0ZUNoYW5nZS5zdWJzY3JpYmUoKF8sIHN0YXRlKSA9PiB7XG4gICAgICBwbGF5ZXJTdGF0ZSA9IHN0YXRlO1xuICAgICAgaWYgKHRoaXMuaGlkaW5nUHJldmVudGVkKCkpIHtcbiAgICAgICAgLy8gRW50ZXJpbmcgYSBwbGF5ZXIgc3RhdGUgdGhhdCBwcmV2ZW50cyBoaWRpbmcgYW5kIGZvcmNlcyB0aGUgY29udHJvbHMgdG8gYmUgc2hvd25cbiAgICAgICAgdGhpcy51aUhpZGVUaW1lb3V0LmNsZWFyKCk7XG4gICAgICAgIHRoaXMuc2hvd1VpKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBFbnRlcmluZyBhIHBsYXllciBzdGF0ZSB0aGF0IGFsbG93cyBoaWRpbmdcbiAgICAgICAgdGhpcy51aUhpZGVUaW1lb3V0LnN0YXJ0KCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIGNvbmZpZ3VyZVBsYXllclN0YXRlcyhwbGF5ZXI6IFBsYXllckFQSSwgdWltYW5hZ2VyOiBVSUluc3RhbmNlTWFuYWdlcik6IHZvaWQge1xuICAgIGxldCBjb250YWluZXIgPSB0aGlzLmdldERvbUVsZW1lbnQoKTtcblxuICAgIC8vIENvbnZlcnQgcGxheWVyIHN0YXRlcyBpbnRvIENTUyBjbGFzcyBuYW1lc1xuICAgIGxldCBzdGF0ZUNsYXNzTmFtZXMgPSA8YW55PltdO1xuICAgIGZvciAobGV0IHN0YXRlIGluIFBsYXllclV0aWxzLlBsYXllclN0YXRlKSB7XG4gICAgICBpZiAoaXNOYU4oTnVtYmVyKHN0YXRlKSkpIHtcbiAgICAgICAgbGV0IGVudW1OYW1lID0gUGxheWVyVXRpbHMuUGxheWVyU3RhdGVbPGFueT5QbGF5ZXJVdGlscy5QbGF5ZXJTdGF0ZVtzdGF0ZV1dO1xuICAgICAgICBzdGF0ZUNsYXNzTmFtZXNbUGxheWVyVXRpbHMuUGxheWVyU3RhdGVbc3RhdGVdXSA9XG4gICAgICAgICAgdGhpcy5wcmVmaXhDc3MoVUlDb250YWluZXIuU1RBVEVfUFJFRklYICsgZW51bU5hbWUudG9Mb3dlckNhc2UoKSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgbGV0IHJlbW92ZVN0YXRlcyA9ICgpID0+IHtcbiAgICAgIGNvbnRhaW5lci5yZW1vdmVDbGFzcyhzdGF0ZUNsYXNzTmFtZXNbUGxheWVyVXRpbHMuUGxheWVyU3RhdGUuSWRsZV0pO1xuICAgICAgY29udGFpbmVyLnJlbW92ZUNsYXNzKHN0YXRlQ2xhc3NOYW1lc1tQbGF5ZXJVdGlscy5QbGF5ZXJTdGF0ZS5QcmVwYXJlZF0pO1xuICAgICAgY29udGFpbmVyLnJlbW92ZUNsYXNzKHN0YXRlQ2xhc3NOYW1lc1tQbGF5ZXJVdGlscy5QbGF5ZXJTdGF0ZS5QbGF5aW5nXSk7XG4gICAgICBjb250YWluZXIucmVtb3ZlQ2xhc3Moc3RhdGVDbGFzc05hbWVzW1BsYXllclV0aWxzLlBsYXllclN0YXRlLlBhdXNlZF0pO1xuICAgICAgY29udGFpbmVyLnJlbW92ZUNsYXNzKHN0YXRlQ2xhc3NOYW1lc1tQbGF5ZXJVdGlscy5QbGF5ZXJTdGF0ZS5GaW5pc2hlZF0pO1xuICAgIH07XG5cbiAgICBjb25zdCB1cGRhdGVTdGF0ZSA9IChzdGF0ZTogUGxheWVyVXRpbHMuUGxheWVyU3RhdGUpID0+IHtcbiAgICAgIHJlbW92ZVN0YXRlcygpO1xuICAgICAgY29udGFpbmVyLmFkZENsYXNzKHN0YXRlQ2xhc3NOYW1lc1tzdGF0ZV0pO1xuICAgICAgdGhpcy5wbGF5ZXJTdGF0ZUNoYW5nZS5kaXNwYXRjaCh0aGlzLCBzdGF0ZSk7XG4gICAgfTtcblxuICAgIHBsYXllci5vbihwbGF5ZXIuZXhwb3J0cy5QbGF5ZXJFdmVudC5Tb3VyY2VMb2FkZWQsICgpID0+IHtcbiAgICAgIHVwZGF0ZVN0YXRlKFBsYXllclV0aWxzLlBsYXllclN0YXRlLlByZXBhcmVkKTtcbiAgICB9KTtcbiAgICBwbGF5ZXIub24ocGxheWVyLmV4cG9ydHMuUGxheWVyRXZlbnQuUGxheSwgKCkgPT4ge1xuICAgICAgdXBkYXRlU3RhdGUoUGxheWVyVXRpbHMuUGxheWVyU3RhdGUuUGxheWluZyk7XG4gICAgfSk7XG4gICAgcGxheWVyLm9uKHBsYXllci5leHBvcnRzLlBsYXllckV2ZW50LlBsYXlpbmcsICgpID0+IHtcbiAgICAgIHVwZGF0ZVN0YXRlKFBsYXllclV0aWxzLlBsYXllclN0YXRlLlBsYXlpbmcpO1xuICAgIH0pO1xuICAgIHBsYXllci5vbihwbGF5ZXIuZXhwb3J0cy5QbGF5ZXJFdmVudC5QYXVzZWQsICgpID0+IHtcbiAgICAgIHVwZGF0ZVN0YXRlKFBsYXllclV0aWxzLlBsYXllclN0YXRlLlBhdXNlZCk7XG4gICAgfSk7XG4gICAgcGxheWVyLm9uKHBsYXllci5leHBvcnRzLlBsYXllckV2ZW50LlBsYXliYWNrRmluaXNoZWQsICgpID0+IHtcbiAgICAgIHVwZGF0ZVN0YXRlKFBsYXllclV0aWxzLlBsYXllclN0YXRlLkZpbmlzaGVkKTtcbiAgICB9KTtcbiAgICBwbGF5ZXIub24ocGxheWVyLmV4cG9ydHMuUGxheWVyRXZlbnQuU291cmNlVW5sb2FkZWQsICgpID0+IHtcbiAgICAgIHVwZGF0ZVN0YXRlKFBsYXllclV0aWxzLlBsYXllclN0YXRlLklkbGUpO1xuICAgIH0pO1xuICAgIHVpbWFuYWdlci5nZXRDb25maWcoKS5ldmVudHMub25VcGRhdGVkLnN1YnNjcmliZSgoKSA9PiB7XG4gICAgICB1cGRhdGVTdGF0ZShQbGF5ZXJVdGlscy5nZXRTdGF0ZShwbGF5ZXIpKTtcbiAgICB9KTtcblxuICAgIC8vIEZ1bGxzY3JlZW4gbWFya2VyIGNsYXNzXG4gICAgcGxheWVyLm9uKHBsYXllci5leHBvcnRzLlBsYXllckV2ZW50LlZpZXdNb2RlQ2hhbmdlZCwgKCkgPT4ge1xuICAgICAgaWYgKHBsYXllci5nZXRWaWV3TW9kZSgpID09PSBwbGF5ZXIuZXhwb3J0cy5WaWV3TW9kZS5GdWxsc2NyZWVuKSB7XG4gICAgICAgIGNvbnRhaW5lci5hZGRDbGFzcyh0aGlzLnByZWZpeENzcyhVSUNvbnRhaW5lci5GVUxMU0NSRUVOKSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb250YWluZXIucmVtb3ZlQ2xhc3ModGhpcy5wcmVmaXhDc3MoVUlDb250YWluZXIuRlVMTFNDUkVFTikpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIC8vIEluaXQgZnVsbHNjcmVlbiBzdGF0ZVxuICAgIGlmIChwbGF5ZXIuZ2V0Vmlld01vZGUoKSA9PT0gcGxheWVyLmV4cG9ydHMuVmlld01vZGUuRnVsbHNjcmVlbikge1xuICAgICAgY29udGFpbmVyLmFkZENsYXNzKHRoaXMucHJlZml4Q3NzKFVJQ29udGFpbmVyLkZVTExTQ1JFRU4pKTtcbiAgICB9XG5cbiAgICAvLyBCdWZmZXJpbmcgbWFya2VyIGNsYXNzXG4gICAgcGxheWVyLm9uKHBsYXllci5leHBvcnRzLlBsYXllckV2ZW50LlN0YWxsU3RhcnRlZCwgKCkgPT4ge1xuICAgICAgY29udGFpbmVyLmFkZENsYXNzKHRoaXMucHJlZml4Q3NzKFVJQ29udGFpbmVyLkJVRkZFUklORykpO1xuICAgIH0pO1xuICAgIHBsYXllci5vbihwbGF5ZXIuZXhwb3J0cy5QbGF5ZXJFdmVudC5TdGFsbEVuZGVkLCAoKSA9PiB7XG4gICAgICBjb250YWluZXIucmVtb3ZlQ2xhc3ModGhpcy5wcmVmaXhDc3MoVUlDb250YWluZXIuQlVGRkVSSU5HKSk7XG4gICAgfSk7XG4gICAgLy8gSW5pdCBidWZmZXJpbmcgc3RhdGVcbiAgICBpZiAocGxheWVyLmlzU3RhbGxlZCgpKSB7XG4gICAgICBjb250YWluZXIuYWRkQ2xhc3ModGhpcy5wcmVmaXhDc3MoVUlDb250YWluZXIuQlVGRkVSSU5HKSk7XG4gICAgfVxuXG4gICAgLy8gUmVtb3RlQ29udHJvbCBtYXJrZXIgY2xhc3NcbiAgICBwbGF5ZXIub24ocGxheWVyLmV4cG9ydHMuUGxheWVyRXZlbnQuQ2FzdFN0YXJ0ZWQsICgpID0+IHtcbiAgICAgIGNvbnRhaW5lci5hZGRDbGFzcyh0aGlzLnByZWZpeENzcyhVSUNvbnRhaW5lci5SRU1PVEVfQ09OVFJPTCkpO1xuICAgIH0pO1xuICAgIHBsYXllci5vbihwbGF5ZXIuZXhwb3J0cy5QbGF5ZXJFdmVudC5DYXN0U3RvcHBlZCwgKCkgPT4ge1xuICAgICAgY29udGFpbmVyLnJlbW92ZUNsYXNzKHRoaXMucHJlZml4Q3NzKFVJQ29udGFpbmVyLlJFTU9URV9DT05UUk9MKSk7XG4gICAgfSk7XG4gICAgLy8gSW5pdCBSZW1vdGVDb250cm9sIHN0YXRlXG4gICAgaWYgKHBsYXllci5pc0Nhc3RpbmcoKSkge1xuICAgICAgY29udGFpbmVyLmFkZENsYXNzKHRoaXMucHJlZml4Q3NzKFVJQ29udGFpbmVyLlJFTU9URV9DT05UUk9MKSk7XG4gICAgfVxuXG4gICAgLy8gQ29udHJvbHMgdmlzaWJpbGl0eSBtYXJrZXIgY2xhc3NcbiAgICB1aW1hbmFnZXIub25Db250cm9sc1Nob3cuc3Vic2NyaWJlKCgpID0+IHtcbiAgICAgIGNvbnRhaW5lci5yZW1vdmVDbGFzcyh0aGlzLnByZWZpeENzcyhVSUNvbnRhaW5lci5DT05UUk9MU19ISURERU4pKTtcbiAgICAgIGNvbnRhaW5lci5hZGRDbGFzcyh0aGlzLnByZWZpeENzcyhVSUNvbnRhaW5lci5DT05UUk9MU19TSE9XTikpO1xuICAgIH0pO1xuICAgIHVpbWFuYWdlci5vbkNvbnRyb2xzSGlkZS5zdWJzY3JpYmUoKCkgPT4ge1xuICAgICAgY29udGFpbmVyLnJlbW92ZUNsYXNzKHRoaXMucHJlZml4Q3NzKFVJQ29udGFpbmVyLkNPTlRST0xTX1NIT1dOKSk7XG4gICAgICBjb250YWluZXIuYWRkQ2xhc3ModGhpcy5wcmVmaXhDc3MoVUlDb250YWluZXIuQ09OVFJPTFNfSElEREVOKSk7XG4gICAgfSk7XG5cbiAgICAvLyBMYXlvdXQgc2l6ZSBjbGFzc2VzXG4gICAgbGV0IHVwZGF0ZUxheW91dFNpemVDbGFzc2VzID0gKHdpZHRoOiBudW1iZXIsIGhlaWdodDogbnVtYmVyKSA9PiB7XG4gICAgICBjb250YWluZXIucmVtb3ZlQ2xhc3ModGhpcy5wcmVmaXhDc3MoJ2xheW91dC1tYXgtd2lkdGgtNDAwJykpO1xuICAgICAgY29udGFpbmVyLnJlbW92ZUNsYXNzKHRoaXMucHJlZml4Q3NzKCdsYXlvdXQtbWF4LXdpZHRoLTYwMCcpKTtcbiAgICAgIGNvbnRhaW5lci5yZW1vdmVDbGFzcyh0aGlzLnByZWZpeENzcygnbGF5b3V0LW1heC13aWR0aC04MDAnKSk7XG4gICAgICBjb250YWluZXIucmVtb3ZlQ2xhc3ModGhpcy5wcmVmaXhDc3MoJ2xheW91dC1tYXgtd2lkdGgtMTIwMCcpKTtcblxuICAgICAgaWYgKHdpZHRoIDw9IDQwMCkge1xuICAgICAgICBjb250YWluZXIuYWRkQ2xhc3ModGhpcy5wcmVmaXhDc3MoJ2xheW91dC1tYXgtd2lkdGgtNDAwJykpO1xuICAgICAgfSBlbHNlIGlmICh3aWR0aCA8PSA2MDApIHtcbiAgICAgICAgY29udGFpbmVyLmFkZENsYXNzKHRoaXMucHJlZml4Q3NzKCdsYXlvdXQtbWF4LXdpZHRoLTYwMCcpKTtcbiAgICAgIH0gZWxzZSBpZiAod2lkdGggPD0gODAwKSB7XG4gICAgICAgIGNvbnRhaW5lci5hZGRDbGFzcyh0aGlzLnByZWZpeENzcygnbGF5b3V0LW1heC13aWR0aC04MDAnKSk7XG4gICAgICB9IGVsc2UgaWYgKHdpZHRoIDw9IDEyMDApIHtcbiAgICAgICAgY29udGFpbmVyLmFkZENsYXNzKHRoaXMucHJlZml4Q3NzKCdsYXlvdXQtbWF4LXdpZHRoLTEyMDAnKSk7XG4gICAgICB9XG4gICAgfTtcbiAgICBwbGF5ZXIub24ocGxheWVyLmV4cG9ydHMuUGxheWVyRXZlbnQuUGxheWVyUmVzaXplZCwgKGU6IFBsYXllclJlc2l6ZWRFdmVudCkgPT4ge1xuICAgICAgLy8gQ29udmVydCBzdHJpbmdzICh3aXRoIFwicHhcIiBzdWZmaXgpIHRvIGludHNcbiAgICAgIGxldCB3aWR0aCA9IE1hdGgucm91bmQoTnVtYmVyKGUud2lkdGguc3Vic3RyaW5nKDAsIGUud2lkdGgubGVuZ3RoIC0gMikpKTtcbiAgICAgIGxldCBoZWlnaHQgPSBNYXRoLnJvdW5kKE51bWJlcihlLmhlaWdodC5zdWJzdHJpbmcoMCwgZS5oZWlnaHQubGVuZ3RoIC0gMikpKTtcblxuICAgICAgdXBkYXRlTGF5b3V0U2l6ZUNsYXNzZXMod2lkdGgsIGhlaWdodCk7XG4gICAgfSk7XG4gICAgLy8gSW5pdCBsYXlvdXQgc3RhdGVcbiAgICB1cGRhdGVMYXlvdXRTaXplQ2xhc3NlcyhuZXcgRE9NKHBsYXllci5nZXRDb250YWluZXIoKSkud2lkdGgoKSwgbmV3IERPTShwbGF5ZXIuZ2V0Q29udGFpbmVyKCkpLmhlaWdodCgpKTtcbiAgfVxuXG4gIHJlbGVhc2UoKTogdm9pZCB7XG4gICAgLy8gRXhwbGljaXRseSB1bnN1YnNjcmliZSB1c2VyIGludGVyYWN0aW9uIGV2ZW50IGhhbmRsZXJzIGJlY2F1c2UgdGhleSBjb3VsZCBiZSBhdHRhY2hlZCB0byBhbiBleHRlcm5hbCBlbGVtZW50XG4gICAgLy8gdGhhdCBpc24ndCBvd25lZCBieSB0aGUgVUkgYW5kIHRoZXJlZm9yZSBub3QgcmVtb3ZlZCBvbiByZWxlYXNlLlxuICAgIGlmICh0aGlzLnVzZXJJbnRlcmFjdGlvbkV2ZW50cykge1xuICAgICAgdGhpcy51c2VySW50ZXJhY3Rpb25FdmVudHMuZm9yRWFjaCgoZXZlbnQpID0+IHRoaXMudXNlckludGVyYWN0aW9uRXZlbnRTb3VyY2Uub2ZmKGV2ZW50Lm5hbWUsIGV2ZW50LmhhbmRsZXIpKTtcbiAgICB9XG5cbiAgICBzdXBlci5yZWxlYXNlKCk7XG5cbiAgICBpZiAodGhpcy51aUhpZGVUaW1lb3V0KSB7XG4gICAgICB0aGlzLnVpSGlkZVRpbWVvdXQuY2xlYXIoKTtcbiAgICB9XG4gIH1cblxuICBvblBsYXllclN0YXRlQ2hhbmdlKCk6IFVpRXZlbnQ8VUlDb250YWluZXIsIFBsYXllclV0aWxzLlBsYXllclN0YXRlPiB7XG4gICAgcmV0dXJuIHRoaXMucGxheWVyU3RhdGVDaGFuZ2UuZ2V0RXZlbnQoKTtcbiAgfVxuXG4gIHByb3RlY3RlZCBzdXNwZW5kSGlkZVRpbWVvdXQoKSB7XG4gICAgdGhpcy51aUhpZGVUaW1lb3V0LnN1c3BlbmQoKTtcbiAgfVxuXG4gIHByb3RlY3RlZCByZXN1bWVIaWRlVGltZW91dCgpIHtcbiAgICB0aGlzLnVpSGlkZVRpbWVvdXQucmVzdW1lKCF0aGlzLmhpZGluZ1ByZXZlbnRlZCgpKTtcbiAgfVxuXG4gIHByb3RlY3RlZCB0b0RvbUVsZW1lbnQoKTogRE9NIHtcbiAgICBsZXQgY29udGFpbmVyID0gc3VwZXIudG9Eb21FbGVtZW50KCk7XG5cbiAgICAvLyBEZXRlY3QgZmxleGJveCBzdXBwb3J0IChub3Qgc3VwcG9ydGVkIGluIElFOSlcbiAgICBpZiAoZG9jdW1lbnQgJiYgdHlwZW9mIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKS5zdHlsZS5mbGV4ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgY29udGFpbmVyLmFkZENsYXNzKHRoaXMucHJlZml4Q3NzKCdmbGV4Ym94JykpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb250YWluZXIuYWRkQ2xhc3ModGhpcy5wcmVmaXhDc3MoJ25vLWZsZXhib3gnKSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGNvbnRhaW5lcjtcbiAgfVxufVxuIiwiaW1wb3J0IHtTZWxlY3RCb3h9IGZyb20gJy4vc2VsZWN0Ym94JztcbmltcG9ydCB7TGlzdFNlbGVjdG9yQ29uZmlnfSBmcm9tICcuL2xpc3RzZWxlY3Rvcic7XG5pbXBvcnQge1VJSW5zdGFuY2VNYW5hZ2VyfSBmcm9tICcuLi91aW1hbmFnZXInO1xuaW1wb3J0IHsgUGxheWVyQVBJIH0gZnJvbSAnYml0bW92aW4tcGxheWVyJztcbmltcG9ydCB7IGkxOG4gfSBmcm9tICcuLi9sb2NhbGl6YXRpb24vaTE4bic7XG5cbi8qKlxuICogQSBzZWxlY3QgYm94IHByb3ZpZGluZyBhIHNlbGVjdGlvbiBiZXR3ZWVuICdhdXRvJyBhbmQgdGhlIGF2YWlsYWJsZSB2aWRlbyBxdWFsaXRpZXMuXG4gKlxuICogQGNhdGVnb3J5IENvbXBvbmVudHNcbiAqL1xuZXhwb3J0IGNsYXNzIFZpZGVvUXVhbGl0eVNlbGVjdEJveCBleHRlbmRzIFNlbGVjdEJveCB7XG5cbiAgcHJpdmF0ZSBoYXNBdXRvOiBib29sZWFuO1xuXG4gIGNvbnN0cnVjdG9yKGNvbmZpZzogTGlzdFNlbGVjdG9yQ29uZmlnID0ge30pIHtcbiAgICBzdXBlcihjb25maWcpO1xuXG4gICAgdGhpcy5jb25maWcgPSB0aGlzLm1lcmdlQ29uZmlnKGNvbmZpZywge1xuICAgICAgY3NzQ2xhc3NlczogWyd1aS12aWRlb3F1YWxpdHlzZWxlY3Rib3gnXSxcbiAgICB9LCB0aGlzLmNvbmZpZyk7XG4gIH1cblxuICBjb25maWd1cmUocGxheWVyOiBQbGF5ZXJBUEksIHVpbWFuYWdlcjogVUlJbnN0YW5jZU1hbmFnZXIpOiB2b2lkIHtcbiAgICBzdXBlci5jb25maWd1cmUocGxheWVyLCB1aW1hbmFnZXIpO1xuXG4gICAgbGV0IHNlbGVjdEN1cnJlbnRWaWRlb1F1YWxpdHkgPSAoKSA9PiB7XG4gICAgICB0aGlzLnNlbGVjdEl0ZW0ocGxheWVyLmdldFZpZGVvUXVhbGl0eSgpLmlkKTtcbiAgICB9O1xuXG4gICAgbGV0IHVwZGF0ZVZpZGVvUXVhbGl0aWVzID0gKCkgPT4ge1xuICAgICAgbGV0IHZpZGVvUXVhbGl0aWVzID0gcGxheWVyLmdldEF2YWlsYWJsZVZpZGVvUXVhbGl0aWVzKCk7XG5cbiAgICAgIHRoaXMuY2xlYXJJdGVtcygpO1xuXG4gICAgICAvLyBQcm9ncmVzc2l2ZSBzdHJlYW1zIGRvIG5vdCBzdXBwb3J0IGF1dG9tYXRpYyBxdWFsaXR5IHNlbGVjdGlvblxuICAgICAgdGhpcy5oYXNBdXRvID0gcGxheWVyLmdldFN0cmVhbVR5cGUoKSAhPT0gJ3Byb2dyZXNzaXZlJztcblxuICAgICAgaWYgKHRoaXMuaGFzQXV0bykge1xuICAgICAgICAvLyBBZGQgZW50cnkgZm9yIGF1dG9tYXRpYyBxdWFsaXR5IHN3aXRjaGluZyAoZGVmYXVsdCBzZXR0aW5nKVxuICAgICAgICB0aGlzLmFkZEl0ZW0oJ2F1dG8nLCBpMThuLmdldExvY2FsaXplcignYXV0bycpKTtcbiAgICAgIH1cblxuICAgICAgLy8gQWRkIHZpZGVvIHF1YWxpdGllc1xuICAgICAgZm9yIChsZXQgdmlkZW9RdWFsaXR5IG9mIHZpZGVvUXVhbGl0aWVzKSB7XG4gICAgICAgIHRoaXMuYWRkSXRlbSh2aWRlb1F1YWxpdHkuaWQsIHZpZGVvUXVhbGl0eS5sYWJlbCk7XG4gICAgICB9XG5cbiAgICAgIC8vIFNlbGVjdCBpbml0aWFsIHF1YWxpdHlcbiAgICAgIHNlbGVjdEN1cnJlbnRWaWRlb1F1YWxpdHkoKTtcbiAgICB9O1xuXG4gICAgdGhpcy5vbkl0ZW1TZWxlY3RlZC5zdWJzY3JpYmUoKHNlbmRlcjogVmlkZW9RdWFsaXR5U2VsZWN0Qm94LCB2YWx1ZTogc3RyaW5nKSA9PiB7XG4gICAgICBwbGF5ZXIuc2V0VmlkZW9RdWFsaXR5KHZhbHVlKTtcbiAgICB9KTtcblxuICAgIC8vIFVwZGF0ZSBxdWFsaXRpZXMgd2hlbiBzb3VyY2UgZ29lcyBhd2F5XG4gICAgcGxheWVyLm9uKHBsYXllci5leHBvcnRzLlBsYXllckV2ZW50LlNvdXJjZVVubG9hZGVkLCB1cGRhdGVWaWRlb1F1YWxpdGllcyk7XG4gICAgLy8gVXBkYXRlIHF1YWxpdGllcyB3aGVuIHRoZSBwZXJpb2Qgd2l0aGluIGEgc291cmNlIGNoYW5nZXNcbiAgICBwbGF5ZXIub24ocGxheWVyLmV4cG9ydHMuUGxheWVyRXZlbnQuUGVyaW9kU3dpdGNoZWQsIHVwZGF0ZVZpZGVvUXVhbGl0aWVzKTtcbiAgICAvLyBVcGRhdGUgcXVhbGl0eSBzZWxlY3Rpb24gd2hlbiBxdWFsaXR5IGlzIGNoYW5nZWQgKGZyb20gb3V0c2lkZSlcbiAgICBwbGF5ZXIub24ocGxheWVyLmV4cG9ydHMuUGxheWVyRXZlbnQuVmlkZW9RdWFsaXR5Q2hhbmdlZCwgc2VsZWN0Q3VycmVudFZpZGVvUXVhbGl0eSk7XG5cbiAgICBpZiAoKHBsYXllci5leHBvcnRzLlBsYXllckV2ZW50IGFzIGFueSkuVmlkZW9RdWFsaXR5QWRkZWQpIHtcbiAgICAgIC8vIFVwZGF0ZSBxdWFsaXRpZXMgd2hlbiB0aGVpciBhdmFpbGFiaWxpdHkgY2hhbmdlZFxuICAgICAgLy8gVE9ETzogcmVtb3ZlIGFueSBjYXN0IGFmdGVyIG5leHQgcGxheWVyIHJlbGVhc2VcbiAgICAgIHBsYXllci5vbigocGxheWVyLmV4cG9ydHMuUGxheWVyRXZlbnQgYXMgYW55KS5WaWRlb1F1YWxpdHlBZGRlZCwgdXBkYXRlVmlkZW9RdWFsaXRpZXMpO1xuICAgICAgcGxheWVyLm9uKChwbGF5ZXIuZXhwb3J0cy5QbGF5ZXJFdmVudCBhcyBhbnkpLlZpZGVvUXVhbGl0eVJlbW92ZWQsIHVwZGF0ZVZpZGVvUXVhbGl0aWVzKTtcbiAgICB9XG5cbiAgICB1aW1hbmFnZXIuZ2V0Q29uZmlnKCkuZXZlbnRzLm9uVXBkYXRlZC5zdWJzY3JpYmUodXBkYXRlVmlkZW9RdWFsaXRpZXMpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgc2VsZWN0IGJveCBjb250YWlucyBhbiAnYXV0bycgaXRlbSBmb3IgYXV0b21hdGljIHF1YWxpdHkgc2VsZWN0aW9uIG1vZGUuXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAqL1xuICBoYXNBdXRvSXRlbSgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5oYXNBdXRvO1xuICB9XG59IiwiaW1wb3J0IHtDb250YWluZXIsIENvbnRhaW5lckNvbmZpZ30gZnJvbSAnLi9jb250YWluZXInO1xuaW1wb3J0IHtWb2x1bWVTbGlkZXJ9IGZyb20gJy4vdm9sdW1lc2xpZGVyJztcbmltcG9ydCB7Vm9sdW1lVG9nZ2xlQnV0dG9ufSBmcm9tICcuL3ZvbHVtZXRvZ2dsZWJ1dHRvbic7XG5pbXBvcnQge1VJSW5zdGFuY2VNYW5hZ2VyfSBmcm9tICcuLi91aW1hbmFnZXInO1xuaW1wb3J0IHtUaW1lb3V0fSBmcm9tICcuLi90aW1lb3V0JztcbmltcG9ydCB7IFBsYXllckFQSSB9IGZyb20gJ2JpdG1vdmluLXBsYXllcic7XG5cbi8qKlxuICogQ29uZmlndXJhdGlvbiBpbnRlcmZhY2UgZm9yIGEge0BsaW5rIFZvbHVtZUNvbnRyb2xCdXR0b259LlxuICpcbiAqIEBjYXRlZ29yeSBDb25maWdzXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgVm9sdW1lQ29udHJvbEJ1dHRvbkNvbmZpZyBleHRlbmRzIENvbnRhaW5lckNvbmZpZyB7XG4gIC8qKlxuICAgKiBUaGUgZGVsYXkgYWZ0ZXIgd2hpY2ggdGhlIHZvbHVtZSBzbGlkZXIgd2lsbCBiZSBoaWRkZW4gd2hlbiB0aGVyZSBpcyBubyB1c2VyIGludGVyYWN0aW9uLlxuICAgKiBDYXJlIG11c3QgYmUgdGFrZW4gdGhhdCB0aGUgZGVsYXkgaXMgbG9uZyBlbm91Z2ggc28gdXNlcnMgY2FuIHJlYWNoIHRoZSBzbGlkZXIgZnJvbSB0aGUgdG9nZ2xlIGJ1dHRvbiwgZS5nLiBieVxuICAgKiBtb3VzZSBtb3ZlbWVudC4gSWYgdGhlIGRlbGF5IGlzIHRvbyBzaG9ydCwgdGhlIHNsaWRlcnMgZGlzYXBwZWFycyBiZWZvcmUgdGhlIG1vdXNlIHBvaW50ZXIgaGFzIHJlYWNoZWQgaXQgYW5kXG4gICAqIHRoZSB1c2VyIGlzIG5vdCBhYmxlIHRvIHVzZSBpdC5cbiAgICogRGVmYXVsdDogNTAwbXNcbiAgICovXG4gIGhpZGVEZWxheT86IG51bWJlcjtcbiAgLyoqXG4gICAqIFNwZWNpZmllcyBpZiB0aGUgdm9sdW1lIHNsaWRlciBzaG91bGQgYmUgdmVydGljYWxseSBvciBob3Jpem9udGFsbHkgYWxpZ25lZC5cbiAgICogRGVmYXVsdDogdHJ1ZVxuICAgKi9cbiAgdmVydGljYWw/OiBib29sZWFuO1xufVxuXG4vKipcbiAqIEEgY29tcG9zaXRlIHZvbHVtZSBjb250cm9sIHRoYXQgY29uc2lzdHMgb2YgYW5kIGludGVybmFsbHkgbWFuYWdlcyBhIHZvbHVtZSBjb250cm9sIGJ1dHRvbiB0aGF0IGNhbiBiZSB1c2VkXG4gKiBmb3IgbXV0aW5nLCBhbmQgYSAoZGVwZW5kaW5nIG9uIHRoZSBDU1Mgc3R5bGUsIGUuZy4gc2xpZGUtb3V0KSB2b2x1bWUgY29udHJvbCBiYXIuXG4gKlxuICogQGNhdGVnb3J5IEJ1dHRvbnNcbiAqL1xuZXhwb3J0IGNsYXNzIFZvbHVtZUNvbnRyb2xCdXR0b24gZXh0ZW5kcyBDb250YWluZXI8Vm9sdW1lQ29udHJvbEJ1dHRvbkNvbmZpZz4ge1xuXG4gIHByaXZhdGUgdm9sdW1lVG9nZ2xlQnV0dG9uOiBWb2x1bWVUb2dnbGVCdXR0b247XG4gIHByaXZhdGUgdm9sdW1lU2xpZGVyOiBWb2x1bWVTbGlkZXI7XG5cbiAgcHJpdmF0ZSB2b2x1bWVTbGlkZXJIaWRlVGltZW91dDogVGltZW91dDtcblxuICBjb25zdHJ1Y3Rvcihjb25maWc6IFZvbHVtZUNvbnRyb2xCdXR0b25Db25maWcgPSB7fSkge1xuICAgIHN1cGVyKGNvbmZpZyk7XG5cbiAgICB0aGlzLnZvbHVtZVRvZ2dsZUJ1dHRvbiA9IG5ldyBWb2x1bWVUb2dnbGVCdXR0b24oKTtcbiAgICB0aGlzLnZvbHVtZVNsaWRlciA9IG5ldyBWb2x1bWVTbGlkZXIoe1xuICAgICAgdmVydGljYWw6IGNvbmZpZy52ZXJ0aWNhbCAhPSBudWxsID8gY29uZmlnLnZlcnRpY2FsIDogdHJ1ZSxcbiAgICAgIGhpZGRlbjogdHJ1ZSxcbiAgICB9KTtcblxuICAgIHRoaXMuY29uZmlnID0gdGhpcy5tZXJnZUNvbmZpZyhjb25maWcsIHtcbiAgICAgIGNzc0NsYXNzOiAndWktdm9sdW1lY29udHJvbGJ1dHRvbicsXG4gICAgICBjb21wb25lbnRzOiBbdGhpcy52b2x1bWVUb2dnbGVCdXR0b24sIHRoaXMudm9sdW1lU2xpZGVyXSxcbiAgICAgIGhpZGVEZWxheTogNTAwLFxuICAgIH0sIDxWb2x1bWVDb250cm9sQnV0dG9uQ29uZmlnPnRoaXMuY29uZmlnKTtcbiAgfVxuXG4gIGNvbmZpZ3VyZShwbGF5ZXI6IFBsYXllckFQSSwgdWltYW5hZ2VyOiBVSUluc3RhbmNlTWFuYWdlcik6IHZvaWQge1xuICAgIHN1cGVyLmNvbmZpZ3VyZShwbGF5ZXIsIHVpbWFuYWdlcik7XG5cbiAgICBsZXQgdm9sdW1lVG9nZ2xlQnV0dG9uID0gdGhpcy5nZXRWb2x1bWVUb2dnbGVCdXR0b24oKTtcbiAgICBsZXQgdm9sdW1lU2xpZGVyID0gdGhpcy5nZXRWb2x1bWVTbGlkZXIoKTtcblxuICAgIHRoaXMudm9sdW1lU2xpZGVySGlkZVRpbWVvdXQgPSBuZXcgVGltZW91dCh0aGlzLmdldENvbmZpZygpLmhpZGVEZWxheSwgKCkgPT4ge1xuICAgICAgdm9sdW1lU2xpZGVyLmhpZGUoKTtcbiAgICB9KTtcblxuICAgIC8qXG4gICAgICogVm9sdW1lIFNsaWRlciB2aXNpYmlsaXR5IGhhbmRsaW5nXG4gICAgICpcbiAgICAgKiBUaGUgdm9sdW1lIHNsaWRlciBzaGFsbCBiZSB2aXNpYmxlIHdoaWxlIHRoZSB1c2VyIGhvdmVycyB0aGUgbXV0ZSB0b2dnbGUgYnV0dG9uLCB3aGlsZSB0aGUgdXNlciBob3ZlcnMgdGhlXG4gICAgICogdm9sdW1lIHNsaWRlciwgYW5kIHdoaWxlIHRoZSB1c2VyIHNsaWRlcyB0aGUgdm9sdW1lIHNsaWRlci4gSWYgbm9uZSBvZiB0aGVzZSBzaXR1YXRpb25zIGFyZSB0cnVlLCB0aGUgc2xpZGVyXG4gICAgICogc2hhbGwgZGlzYXBwZWFyLlxuICAgICAqL1xuICAgIGxldCB2b2x1bWVTbGlkZXJIb3ZlcmVkID0gZmFsc2U7XG4gICAgdm9sdW1lVG9nZ2xlQnV0dG9uLmdldERvbUVsZW1lbnQoKS5vbignbW91c2VlbnRlcicsICgpID0+IHtcbiAgICAgIC8vIFNob3cgdm9sdW1lIHNsaWRlciB3aGVuIG1vdXNlIGVudGVycyB0aGUgYnV0dG9uIGFyZWFcbiAgICAgIGlmICh2b2x1bWVTbGlkZXIuaXNIaWRkZW4oKSkge1xuICAgICAgICB2b2x1bWVTbGlkZXIuc2hvdygpO1xuICAgICAgfVxuICAgICAgLy8gQXZvaWQgaGlkaW5nIG9mIHRoZSBzbGlkZXIgd2hlbiBidXR0b24gaXMgaG92ZXJlZFxuICAgICAgdGhpcy52b2x1bWVTbGlkZXJIaWRlVGltZW91dC5jbGVhcigpO1xuICAgIH0pO1xuICAgIHZvbHVtZVRvZ2dsZUJ1dHRvbi5nZXREb21FbGVtZW50KCkub24oJ21vdXNlbGVhdmUnLCAoKSA9PiB7XG4gICAgICAvLyBIaWRlIHNsaWRlciBkZWxheWVkIHdoZW4gYnV0dG9uIGlzIGxlZnRcbiAgICAgIHRoaXMudm9sdW1lU2xpZGVySGlkZVRpbWVvdXQucmVzZXQoKTtcbiAgICB9KTtcbiAgICB2b2x1bWVTbGlkZXIuZ2V0RG9tRWxlbWVudCgpLm9uKCdtb3VzZWVudGVyJywgKCkgPT4ge1xuICAgICAgLy8gV2hlbiB0aGUgc2xpZGVyIGlzIGVudGVyZWQsIGNhbmNlbCB0aGUgaGlkZSB0aW1lb3V0IGFjdGl2YXRlZCBieSBsZWF2aW5nIHRoZSBidXR0b25cbiAgICAgIHRoaXMudm9sdW1lU2xpZGVySGlkZVRpbWVvdXQuY2xlYXIoKTtcbiAgICAgIHZvbHVtZVNsaWRlckhvdmVyZWQgPSB0cnVlO1xuICAgIH0pO1xuICAgIHZvbHVtZVNsaWRlci5nZXREb21FbGVtZW50KCkub24oJ21vdXNlbGVhdmUnLCAoKSA9PiB7XG4gICAgICAvLyBXaGVuIG1vdXNlIGxlYXZlcyB0aGUgc2xpZGVyLCBvbmx5IGhpZGUgaXQgaWYgdGhlcmUgaXMgbm8gc2xpZGUgb3BlcmF0aW9uIGluIHByb2dyZXNzXG4gICAgICBpZiAodm9sdW1lU2xpZGVyLmlzU2Vla2luZygpKSB7XG4gICAgICAgIHRoaXMudm9sdW1lU2xpZGVySGlkZVRpbWVvdXQuY2xlYXIoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMudm9sdW1lU2xpZGVySGlkZVRpbWVvdXQucmVzZXQoKTtcbiAgICAgIH1cbiAgICAgIHZvbHVtZVNsaWRlckhvdmVyZWQgPSBmYWxzZTtcbiAgICB9KTtcbiAgICB2b2x1bWVTbGlkZXIub25TZWVrZWQuc3Vic2NyaWJlKCgpID0+IHtcbiAgICAgIC8vIFdoZW4gYSBzbGlkZSBvcGVyYXRpb24gaXMgZG9uZSBhbmQgdGhlIHNsaWRlciBub3QgaG92ZXJlZCAobW91c2Ugb3V0c2lkZSBzbGlkZXIpLCBoaWRlIHNsaWRlciBkZWxheWVkXG4gICAgICBpZiAoIXZvbHVtZVNsaWRlckhvdmVyZWQpIHtcbiAgICAgICAgdGhpcy52b2x1bWVTbGlkZXJIaWRlVGltZW91dC5yZXNldCgpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgcmVsZWFzZSgpOiB2b2lkIHtcbiAgICBzdXBlci5yZWxlYXNlKCk7XG4gICAgdGhpcy52b2x1bWVTbGlkZXJIaWRlVGltZW91dC5jbGVhcigpO1xuICB9XG5cbiAgLyoqXG4gICAqIFByb3ZpZGVzIGFjY2VzcyB0byB0aGUgaW50ZXJuYWxseSBtYW5hZ2VkIHZvbHVtZSB0b2dnbGUgYnV0dG9uLlxuICAgKiBAcmV0dXJucyB7Vm9sdW1lVG9nZ2xlQnV0dG9ufVxuICAgKi9cbiAgZ2V0Vm9sdW1lVG9nZ2xlQnV0dG9uKCk6IFZvbHVtZVRvZ2dsZUJ1dHRvbiB7XG4gICAgcmV0dXJuIHRoaXMudm9sdW1lVG9nZ2xlQnV0dG9uO1xuICB9XG5cbiAgLyoqXG4gICAqIFByb3ZpZGVzIGFjY2VzcyB0byB0aGUgaW50ZXJuYWxseSBtYW5hZ2VkIHZvbHVtZSBzaWxkZXIuXG4gICAqIEByZXR1cm5zIHtWb2x1bWVTbGlkZXJ9XG4gICAqL1xuICBnZXRWb2x1bWVTbGlkZXIoKTogVm9sdW1lU2xpZGVyIHtcbiAgICByZXR1cm4gdGhpcy52b2x1bWVTbGlkZXI7XG4gIH1cbn0iLCJpbXBvcnQgeyBTZWVrQmFyLCBTZWVrQmFyQ29uZmlnLCBTZWVrUHJldmlld0V2ZW50QXJncyB9IGZyb20gJy4vc2Vla2Jhcic7XG5pbXBvcnQgeyBVSUluc3RhbmNlTWFuYWdlciB9IGZyb20gJy4uL3VpbWFuYWdlcic7XG5pbXBvcnQgeyBQbGF5ZXJBUEkgfSBmcm9tICdiaXRtb3Zpbi1wbGF5ZXInO1xuaW1wb3J0IHsgVm9sdW1lVHJhbnNpdGlvbiB9IGZyb20gJy4uL3ZvbHVtZWNvbnRyb2xsZXInO1xuaW1wb3J0IHsgaTE4biB9IGZyb20gJy4uL2xvY2FsaXphdGlvbi9pMThuJztcblxuLyoqXG4gKiBDb25maWd1cmF0aW9uIGludGVyZmFjZSBmb3IgdGhlIHtAbGluayBWb2x1bWVTbGlkZXJ9IGNvbXBvbmVudC5cbiAqXG4gKiBAY2F0ZWdvcnkgQ29uZmlnc1xuICovXG5leHBvcnQgaW50ZXJmYWNlIFZvbHVtZVNsaWRlckNvbmZpZyBleHRlbmRzIFNlZWtCYXJDb25maWcge1xuICAvKipcbiAgICogU3BlY2lmaWVzIGlmIHRoZSB2b2x1bWUgc2xpZGVyIHNob3VsZCBiZSBhdXRvbWF0aWNhbGx5IGhpZGRlbiB3aGVuIHZvbHVtZSBjb250cm9sIGlzIHByb2hpYml0ZWQgYnkgdGhlXG4gICAqIGJyb3dzZXIgb3IgcGxhdGZvcm0uIFRoaXMgY3VycmVudGx5IG9ubHkgYXBwbGllcyB0byBpT1MuXG4gICAqIERlZmF1bHQ6IHRydWVcbiAgICovXG4gIGhpZGVJZlZvbHVtZUNvbnRyb2xQcm9oaWJpdGVkPzogYm9vbGVhbjtcbn1cblxuLyoqXG4gKiBBIHNpbXBsZSB2b2x1bWUgc2xpZGVyIGNvbXBvbmVudCB0byBhZGp1c3QgdGhlIHBsYXllcidzIHZvbHVtZSBzZXR0aW5nLlxuICpcbiAqIEBjYXRlZ29yeSBDb21wb25lbnRzXG4gKi9cbmV4cG9ydCBjbGFzcyBWb2x1bWVTbGlkZXIgZXh0ZW5kcyBTZWVrQmFyIHtcbiAgcHJpdmF0ZSB2b2x1bWVUcmFuc2l0aW9uOiBWb2x1bWVUcmFuc2l0aW9uO1xuXG4gIGNvbnN0cnVjdG9yKGNvbmZpZzogVm9sdW1lU2xpZGVyQ29uZmlnID0ge30pIHtcbiAgICBzdXBlcihjb25maWcpO1xuXG4gICAgdGhpcy5jb25maWcgPSB0aGlzLm1lcmdlQ29uZmlnKGNvbmZpZywgPFZvbHVtZVNsaWRlckNvbmZpZz57XG4gICAgICBjc3NDbGFzczogJ3VpLXZvbHVtZXNsaWRlcicsXG4gICAgICBoaWRlSWZWb2x1bWVDb250cm9sUHJvaGliaXRlZDogdHJ1ZSxcbiAgICAgIGFyaWFMYWJlbDogaTE4bi5nZXRMb2NhbGl6ZXIoJ3NldHRpbmdzLmF1ZGlvLnZvbHVtZScpLFxuICAgICAgdGFiSW5kZXg6IDAsXG4gICAgfSwgdGhpcy5jb25maWcpO1xuICB9XG5cbiAgcHJpdmF0ZSBzZXRWb2x1bWVBcmlhU2xpZGVyVmFsdWVzKHZhbHVlOiBudW1iZXIpIHtcbiAgICB0aGlzLmdldERvbUVsZW1lbnQoKS5hdHRyKCdhcmlhLXZhbHVlbm93JywgTWF0aC5jZWlsKHZhbHVlKS50b1N0cmluZygpKTtcbiAgICB0aGlzLmdldERvbUVsZW1lbnQoKS5hdHRyKCdhcmlhLXZhbHVldGV4dCcsIGAke2kxOG4ucGVyZm9ybUxvY2FsaXphdGlvbihpMThuLmdldExvY2FsaXplcignc2Vla0Jhci52YWx1ZScpKX06ICR7TWF0aC5jZWlsKHZhbHVlKX1gKTtcbiAgfVxuXG4gIGNvbmZpZ3VyZShwbGF5ZXI6IFBsYXllckFQSSwgdWltYW5hZ2VyOiBVSUluc3RhbmNlTWFuYWdlcik6IHZvaWQge1xuICAgIHN1cGVyLmNvbmZpZ3VyZShwbGF5ZXIsIHVpbWFuYWdlciwgZmFsc2UpO1xuXG4gICAgdGhpcy5zZXRBcmlhU2xpZGVyTWluTWF4KCcwJywgJzEwMCcpO1xuXG4gICAgbGV0IGNvbmZpZyA9IDxWb2x1bWVTbGlkZXJDb25maWc+dGhpcy5nZXRDb25maWcoKTtcblxuICAgIGNvbnN0IHZvbHVtZUNvbnRyb2xsZXIgPSB1aW1hbmFnZXIuZ2V0Q29uZmlnKCkudm9sdW1lQ29udHJvbGxlcjtcblxuICAgIGlmIChjb25maWcuaGlkZUlmVm9sdW1lQ29udHJvbFByb2hpYml0ZWQgJiYgIXRoaXMuZGV0ZWN0Vm9sdW1lQ29udHJvbEF2YWlsYWJpbGl0eSgpKSB7XG4gICAgICB0aGlzLmhpZGUoKTtcblxuICAgICAgLy8gV2UgY2FuIGp1c3QgcmV0dXJuIGZyb20gaGVyZSwgYmVjYXVzZSB0aGUgdXNlciB3aWxsIG5ldmVyIGludGVyYWN0IHdpdGggdGhlIGNvbnRyb2wgYW5kIGFueSBjb25maWd1cmVkXG4gICAgICAvLyBmdW5jdGlvbmFsaXR5IHdvdWxkIG9ubHkgZWF0IHJlc291cmNlcyBmb3Igbm8gcmVhc29uLlxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHZvbHVtZUNvbnRyb2xsZXIub25DaGFuZ2VkLnN1YnNjcmliZSgoXywgYXJncykgPT4ge1xuICAgICAgaWYgKGFyZ3MubXV0ZWQpIHtcbiAgICAgICAgdGhpcy5zZXRWb2x1bWVBcmlhU2xpZGVyVmFsdWVzKDApO1xuICAgICAgICB0aGlzLnNldFBsYXliYWNrUG9zaXRpb24oMCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnNldFBsYXliYWNrUG9zaXRpb24oYXJncy52b2x1bWUpO1xuICAgICAgICB0aGlzLnNldFZvbHVtZUFyaWFTbGlkZXJWYWx1ZXMoYXJncy52b2x1bWUpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgdGhpcy5vblNlZWsuc3Vic2NyaWJlKCgpID0+IHtcbiAgICAgIHRoaXMudm9sdW1lVHJhbnNpdGlvbiA9IHZvbHVtZUNvbnRyb2xsZXIuc3RhcnRUcmFuc2l0aW9uKCk7XG4gICAgfSk7XG5cbiAgICB0aGlzLm9uU2Vla1ByZXZpZXcuc3Vic2NyaWJlUmF0ZUxpbWl0ZWQodGhpcy51cGRhdGVWb2x1bWVXaGlsZVNjcnViYmluZywgNTApO1xuICAgIHRoaXMub25TZWVrZWQuc3Vic2NyaWJlKChzZW5kZXIsIHBlcmNlbnRhZ2UpID0+IHtcbiAgICAgIGlmICh0aGlzLnZvbHVtZVRyYW5zaXRpb24pIHtcbiAgICAgICAgdGhpcy52b2x1bWVUcmFuc2l0aW9uLmZpbmlzaChwZXJjZW50YWdlKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIFVwZGF0ZSB0aGUgdm9sdW1lIHNsaWRlciBtYXJrZXIgd2hlbiB0aGUgcGxheWVyIHJlc2l6ZWQsIGEgc291cmNlIGlzIGxvYWRlZCxcbiAgICAvLyBvciB0aGUgVUkgaXMgY29uZmlndXJlZC4gQ2hlY2sgdGhlIHNlZWtiYXIgZm9yIGEgZGV0YWlsZWQgZGVzY3JpcHRpb24uXG4gICAgcGxheWVyLm9uKHBsYXllci5leHBvcnRzLlBsYXllckV2ZW50LlBsYXllclJlc2l6ZWQsICgpID0+IHtcbiAgICAgIHRoaXMucmVmcmVzaFBsYXliYWNrUG9zaXRpb24oKTtcbiAgICB9KTtcbiAgICB1aW1hbmFnZXIub25Db25maWd1cmVkLnN1YnNjcmliZSgoKSA9PiB7XG4gICAgICB0aGlzLnJlZnJlc2hQbGF5YmFja1Bvc2l0aW9uKCk7XG4gICAgfSk7XG5cbiAgICB1aW1hbmFnZXIuZ2V0Q29uZmlnKCkuZXZlbnRzLm9uVXBkYXRlZC5zdWJzY3JpYmUoKCkgPT4ge1xuICAgICAgdGhpcy5yZWZyZXNoUGxheWJhY2tQb3NpdGlvbigpO1xuICAgIH0pO1xuXG4gICAgdWltYW5hZ2VyLm9uQ29tcG9uZW50U2hvdy5zdWJzY3JpYmUoKCkgPT4ge1xuICAgICAgdGhpcy5yZWZyZXNoUGxheWJhY2tQb3NpdGlvbigpO1xuICAgIH0pO1xuICAgIHVpbWFuYWdlci5vbkNvbXBvbmVudEhpZGUuc3Vic2NyaWJlKCgpID0+IHtcbiAgICAgIHRoaXMucmVmcmVzaFBsYXliYWNrUG9zaXRpb24oKTtcbiAgICB9KTtcblxuICAgIC8vIEluaXQgdm9sdW1lIGJhclxuICAgIHZvbHVtZUNvbnRyb2xsZXIub25DaGFuZ2VkRXZlbnQoKTtcbiAgfVxuXG4gIHByaXZhdGUgdXBkYXRlVm9sdW1lV2hpbGVTY3J1YmJpbmcgPSAoc2VuZGVyOiBWb2x1bWVTbGlkZXIsIGFyZ3M6IFNlZWtQcmV2aWV3RXZlbnRBcmdzKSA9PiB7XG4gICAgaWYgKGFyZ3Muc2NydWJiaW5nICYmIHRoaXMudm9sdW1lVHJhbnNpdGlvbikge1xuICAgICAgdGhpcy52b2x1bWVUcmFuc2l0aW9uLnVwZGF0ZShhcmdzLnBvc2l0aW9uKTtcbiAgICB9XG4gIH07XG5cbiAgcHJpdmF0ZSBkZXRlY3RWb2x1bWVDb250cm9sQXZhaWxhYmlsaXR5KCk6IGJvb2xlYW4ge1xuICAgIC8qXG4gICAgICogXCJPbiBpT1MgZGV2aWNlcywgdGhlIGF1ZGlvIGxldmVsIGlzIGFsd2F5cyB1bmRlciB0aGUgdXNlcuKAmXMgcGh5c2ljYWwgY29udHJvbC4gVGhlIHZvbHVtZSBwcm9wZXJ0eSBpcyBub3RcbiAgICAgKiBzZXR0YWJsZSBpbiBKYXZhU2NyaXB0LiBSZWFkaW5nIHRoZSB2b2x1bWUgcHJvcGVydHkgYWx3YXlzIHJldHVybnMgMS5cIlxuICAgICAqIGh0dHBzOi8vZGV2ZWxvcGVyLmFwcGxlLmNvbS9saWJyYXJ5L2NvbnRlbnQvZG9jdW1lbnRhdGlvbi9BdWRpb1ZpZGVvL0NvbmNlcHR1YWwvVXNpbmdfSFRNTDVfQXVkaW9fVmlkZW8vRGV2aWNlLVNwZWNpZmljQ29uc2lkZXJhdGlvbnMvRGV2aWNlLVNwZWNpZmljQ29uc2lkZXJhdGlvbnMuaHRtbFxuICAgICAqL1xuICAgIC8vIGFzIG11dGVkIGF1dG9wbGF5IGdldHMgcGF1c2VkIGFzIHNvb24gYXMgd2UgdW5tdXRlIGl0LCB3ZSBtYXkgbm90IHRvdWNoIHRoZSB2b2x1bWUgb2YgdGhlIGFjdHVhbCBwbGF5ZXIgc28gd2VcbiAgICAvLyBwcm9iZSBhIGR1bW15IGF1ZGlvIGVsZW1lbnRcbiAgICBjb25zdCBkdW1teVZpZGVvRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3ZpZGVvJyk7XG4gICAgLy8gdHJ5IHNldHRpbmcgdGhlIHZvbHVtZSB0byAwLjcgYW5kIGlmIGl0J3Mgc3RpbGwgMSB3ZSBhcmUgb24gYSB2b2x1bWUgY29udHJvbCByZXN0cmljdGVkIGRldmljZVxuICAgIGR1bW15VmlkZW9FbGVtZW50LnZvbHVtZSA9IDAuNztcbiAgICByZXR1cm4gZHVtbXlWaWRlb0VsZW1lbnQudm9sdW1lICE9PSAxO1xuICB9XG5cbiAgcmVsZWFzZSgpOiB2b2lkIHtcbiAgICBzdXBlci5yZWxlYXNlKCk7XG5cbiAgICB0aGlzLm9uU2Vla1ByZXZpZXcudW5zdWJzY3JpYmUodGhpcy51cGRhdGVWb2x1bWVXaGlsZVNjcnViYmluZyk7XG4gIH1cbn1cbiIsImltcG9ydCB7VG9nZ2xlQnV0dG9uLCBUb2dnbGVCdXR0b25Db25maWd9IGZyb20gJy4vdG9nZ2xlYnV0dG9uJztcbmltcG9ydCB7IFVJSW5zdGFuY2VNYW5hZ2VyIH0gZnJvbSAnLi4vdWltYW5hZ2VyJztcbmltcG9ydCB7IFBsYXllckFQSSB9IGZyb20gJ2JpdG1vdmluLXBsYXllcic7XG5pbXBvcnQgeyBpMThuIH0gZnJvbSAnLi4vbG9jYWxpemF0aW9uL2kxOG4nO1xuXG4vKipcbiAqIEEgYnV0dG9uIHRoYXQgdG9nZ2xlcyBhdWRpbyBtdXRpbmcuXG4gKlxuICogQGNhdGVnb3J5IEJ1dHRvbnNcbiAqL1xuZXhwb3J0IGNsYXNzIFZvbHVtZVRvZ2dsZUJ1dHRvbiBleHRlbmRzIFRvZ2dsZUJ1dHRvbjxUb2dnbGVCdXR0b25Db25maWc+IHtcblxuICBjb25zdHJ1Y3Rvcihjb25maWc6IFRvZ2dsZUJ1dHRvbkNvbmZpZyA9IHt9KSB7XG4gICAgc3VwZXIoY29uZmlnKTtcblxuICAgIGNvbnN0IGRlZmF1bHRDb25maWc6IFRvZ2dsZUJ1dHRvbkNvbmZpZyA9IHtcbiAgICAgIGNzc0NsYXNzOiAndWktdm9sdW1ldG9nZ2xlYnV0dG9uJyxcbiAgICAgIHRleHQ6IGkxOG4uZ2V0TG9jYWxpemVyKCdzZXR0aW5ncy5hdWRpby5tdXRlJyksXG4gICAgICBvbkNsYXNzOiAnbXV0ZWQnLFxuICAgICAgb2ZmQ2xhc3M6ICd1bm11dGVkJyxcbiAgICAgIGFyaWFMYWJlbDogaTE4bi5nZXRMb2NhbGl6ZXIoJ3NldHRpbmdzLmF1ZGlvLm11dGUnKSxcbiAgICB9O1xuXG4gICAgdGhpcy5jb25maWcgPSB0aGlzLm1lcmdlQ29uZmlnKGNvbmZpZywgZGVmYXVsdENvbmZpZywgdGhpcy5jb25maWcpO1xuICB9XG5cbiAgY29uZmlndXJlKHBsYXllcjogUGxheWVyQVBJLCB1aW1hbmFnZXI6IFVJSW5zdGFuY2VNYW5hZ2VyKTogdm9pZCB7XG4gICAgc3VwZXIuY29uZmlndXJlKHBsYXllciwgdWltYW5hZ2VyKTtcblxuICAgIGNvbnN0IHZvbHVtZUNvbnRyb2xsZXIgPSB1aW1hbmFnZXIuZ2V0Q29uZmlnKCkudm9sdW1lQ29udHJvbGxlcjtcblxuICAgIHZvbHVtZUNvbnRyb2xsZXIub25DaGFuZ2VkLnN1YnNjcmliZSgoXywgYXJncykgPT4ge1xuICAgICAgaWYgKGFyZ3MubXV0ZWQpIHtcbiAgICAgICAgdGhpcy5vbigpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5vZmYoKTtcbiAgICAgIH1cblxuICAgICAgY29uc3Qgdm9sdW1lTGV2ZWxUZW5zID0gTWF0aC5jZWlsKGFyZ3Mudm9sdW1lIC8gMTApO1xuICAgICAgdGhpcy5nZXREb21FbGVtZW50KCkuZGF0YSh0aGlzLnByZWZpeENzcygndm9sdW1lLWxldmVsLXRlbnMnKSwgU3RyaW5nKHZvbHVtZUxldmVsVGVucykpO1xuICAgIH0pO1xuXG4gICAgdGhpcy5vbkNsaWNrLnN1YnNjcmliZSgoKSA9PiB7XG4gICAgICB2b2x1bWVDb250cm9sbGVyLnRvZ2dsZU11dGVkKCk7XG4gICAgfSk7XG5cbiAgICAvLyBTdGFydHVwIGluaXRcbiAgICB2b2x1bWVDb250cm9sbGVyLm9uQ2hhbmdlZEV2ZW50KCk7XG4gIH1cbn0iLCJpbXBvcnQge1RvZ2dsZUJ1dHRvbiwgVG9nZ2xlQnV0dG9uQ29uZmlnfSBmcm9tICcuL3RvZ2dsZWJ1dHRvbic7XG5pbXBvcnQge1VJSW5zdGFuY2VNYW5hZ2VyfSBmcm9tICcuLi91aW1hbmFnZXInO1xuaW1wb3J0IHsgUGxheWVyQVBJLCBQbGF5ZXJFdmVudEJhc2UsIFdhcm5pbmdFdmVudCB9IGZyb20gJ2JpdG1vdmluLXBsYXllcic7XG5pbXBvcnQgeyBpMThuIH0gZnJvbSAnLi4vbG9jYWxpemF0aW9uL2kxOG4nO1xuXG4vKipcbiAqIEEgYnV0dG9uIHRoYXQgdG9nZ2xlcyB0aGUgdmlkZW8gdmlldyBiZXR3ZWVuIG5vcm1hbC9tb25vIGFuZCBWUi9zdGVyZW8uXG4gKlxuICogQGNhdGVnb3J5IEJ1dHRvbnNcbiAqL1xuZXhwb3J0IGNsYXNzIFZSVG9nZ2xlQnV0dG9uIGV4dGVuZHMgVG9nZ2xlQnV0dG9uPFRvZ2dsZUJ1dHRvbkNvbmZpZz4ge1xuXG4gIGNvbnN0cnVjdG9yKGNvbmZpZzogVG9nZ2xlQnV0dG9uQ29uZmlnID0ge30pIHtcbiAgICBzdXBlcihjb25maWcpO1xuXG4gICAgdGhpcy5jb25maWcgPSB0aGlzLm1lcmdlQ29uZmlnKGNvbmZpZywge1xuICAgICAgY3NzQ2xhc3M6ICd1aS12cnRvZ2dsZWJ1dHRvbicsXG4gICAgICB0ZXh0OiBpMThuLmdldExvY2FsaXplcigndnInKSxcbiAgICB9LCB0aGlzLmNvbmZpZyk7XG4gIH1cblxuICBjb25maWd1cmUocGxheWVyOiBQbGF5ZXJBUEksIHVpbWFuYWdlcjogVUlJbnN0YW5jZU1hbmFnZXIpOiB2b2lkIHtcbiAgICBzdXBlci5jb25maWd1cmUocGxheWVyLCB1aW1hbmFnZXIpO1xuXG4gICAgbGV0IGlzVlJDb25maWd1cmVkID0gKCkgPT4ge1xuICAgICAgLy8gVlIgYXZhaWxhYmlsaXR5IGNhbm5vdCBiZSBjaGVja2VkIHRocm91Z2ggZ2V0VlJTdGF0dXMoKSBiZWNhdXNlIGl0IGlzIGFzeW5jaHJvbm91c2x5IHBvcHVsYXRlZCBhbmQgbm90XG4gICAgICAvLyBhdmFpbGFibGUgYXQgVUkgaW5pdGlhbGl6YXRpb24uIEFzIGFuIGFsdGVybmF0aXZlLCB3ZSBjaGVjayB0aGUgVlIgc2V0dGluZ3MgaW4gdGhlIGNvbmZpZy5cbiAgICAgIC8vIFRPRE8gdXNlIGdldFZSU3RhdHVzKCkgdGhyb3VnaCBpc1ZSU3RlcmVvQXZhaWxhYmxlKCkgb25jZSB0aGUgcGxheWVyIGhhcyBiZWVuIHJld3JpdHRlbiBhbmQgdGhlIHN0YXR1cyBpc1xuICAgICAgLy8gYXZhaWxhYmxlIGluIFJlYWR5XG4gICAgICBjb25zdCBzb3VyY2UgPSBwbGF5ZXIuZ2V0U291cmNlKCk7XG4gICAgICByZXR1cm4gc291cmNlICYmIEJvb2xlYW4oc291cmNlLnZyKTtcbiAgICB9O1xuXG4gICAgbGV0IGlzVlJTdGVyZW9BdmFpbGFibGUgPSAoKSA9PiB7XG4gICAgICBjb25zdCBzb3VyY2UgPSBwbGF5ZXIuZ2V0U291cmNlKCk7XG4gICAgICByZXR1cm4gcGxheWVyLnZyICYmIEJvb2xlYW4oc291cmNlLnZyKTtcbiAgICB9O1xuXG4gICAgbGV0IHZyU3RhdGVIYW5kbGVyID0gKGV2OiBQbGF5ZXJFdmVudEJhc2UpID0+IHtcbiAgICAgIGlmIChldi50eXBlID09PSBwbGF5ZXIuZXhwb3J0cy5QbGF5ZXJFdmVudC5XYXJuaW5nXG4gICAgICAgICYmIChldiBhcyBXYXJuaW5nRXZlbnQpLmNvZGUgIT09IHBsYXllci5leHBvcnRzLldhcm5pbmdDb2RlLlZSX1JFTkRFUklOR19FUlJPUikge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGlmIChpc1ZSQ29uZmlndXJlZCgpICYmIGlzVlJTdGVyZW9BdmFpbGFibGUoKSkge1xuICAgICAgICB0aGlzLnNob3coKTsgLy8gc2hvdyBidXR0b24gaW4gY2FzZSBpdCBpcyBoaWRkZW5cblxuICAgICAgICBpZiAocGxheWVyLnZyICYmIHBsYXllci52ci5nZXRTdGVyZW8oKSkge1xuICAgICAgICAgIHRoaXMub24oKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLm9mZigpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmhpZGUoKTsgLy8gaGlkZSBidXR0b24gaWYgbm8gc3RlcmVvIG1vZGUgYXZhaWxhYmxlXG4gICAgICB9XG4gICAgfTtcblxuICAgIGxldCB2ckJ1dHRvblZpc2liaWxpdHlIYW5kbGVyID0gKCkgPT4ge1xuICAgICAgaWYgKGlzVlJDb25maWd1cmVkKCkpIHtcbiAgICAgICAgdGhpcy5zaG93KCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmhpZGUoKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgcGxheWVyLm9uKHBsYXllci5leHBvcnRzLlBsYXllckV2ZW50LlZSU3RlcmVvQ2hhbmdlZCwgdnJTdGF0ZUhhbmRsZXIpO1xuICAgIHBsYXllci5vbihwbGF5ZXIuZXhwb3J0cy5QbGF5ZXJFdmVudC5XYXJuaW5nLCB2clN0YXRlSGFuZGxlcik7XG4gICAgLy8gSGlkZSBidXR0b24gd2hlbiBWUiBzb3VyY2UgZ29lcyBhd2F5XG4gICAgcGxheWVyLm9uKHBsYXllci5leHBvcnRzLlBsYXllckV2ZW50LlNvdXJjZVVubG9hZGVkLCB2ckJ1dHRvblZpc2liaWxpdHlIYW5kbGVyKTtcbiAgICB1aW1hbmFnZXIuZ2V0Q29uZmlnKCkuZXZlbnRzLm9uVXBkYXRlZC5zdWJzY3JpYmUodnJCdXR0b25WaXNpYmlsaXR5SGFuZGxlcik7XG5cbiAgICB0aGlzLm9uQ2xpY2suc3Vic2NyaWJlKCgpID0+IHtcbiAgICAgIGlmICghaXNWUlN0ZXJlb0F2YWlsYWJsZSgpKSB7XG4gICAgICAgIGlmIChjb25zb2xlKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coJ05vIFZSIGNvbnRlbnQnKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKHBsYXllci52ciAmJiBwbGF5ZXIudnIuZ2V0U3RlcmVvKCkpIHtcbiAgICAgICAgICBwbGF5ZXIudnIuc2V0U3RlcmVvKGZhbHNlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBwbGF5ZXIudnIuc2V0U3RlcmVvKHRydWUpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICAvLyBTZXQgc3RhcnR1cCB2aXNpYmlsaXR5XG4gICAgdnJCdXR0b25WaXNpYmlsaXR5SGFuZGxlcigpO1xuICB9XG59IiwiaW1wb3J0IHtDbGlja092ZXJsYXksIENsaWNrT3ZlcmxheUNvbmZpZ30gZnJvbSAnLi9jbGlja292ZXJsYXknO1xuaW1wb3J0IHsgaTE4biB9IGZyb20gJy4uL2xvY2FsaXphdGlvbi9pMThuJztcblxuLyoqXG4gKiBDb25maWd1cmF0aW9uIGludGVyZmFjZSBmb3IgYSB7QGxpbmsgQ2xpY2tPdmVybGF5fS5cbiAqXG4gKiBAY2F0ZWdvcnkgQ29uZmlnc1xuICovXG5leHBvcnQgaW50ZXJmYWNlIFdhdGVybWFya0NvbmZpZyBleHRlbmRzIENsaWNrT3ZlcmxheUNvbmZpZyB7XG4gIC8vIG5vdGhpbmcgeWV0XG59XG5cbi8qKlxuICogQSB3YXRlcm1hcmsgb3ZlcmxheSB3aXRoIGEgY2xpY2thYmxlIGxvZ28uXG4gKlxuICogQGNhdGVnb3J5IENvbXBvbmVudHNcbiAqL1xuZXhwb3J0IGNsYXNzIFdhdGVybWFyayBleHRlbmRzIENsaWNrT3ZlcmxheSB7XG5cbiAgY29uc3RydWN0b3IoY29uZmlnOiBXYXRlcm1hcmtDb25maWcgPSB7fSkge1xuICAgIHN1cGVyKGNvbmZpZyk7XG5cbiAgICB0aGlzLmNvbmZpZyA9IHRoaXMubWVyZ2VDb25maWcoY29uZmlnLCB7XG4gICAgICBjc3NDbGFzczogJ3VpLXdhdGVybWFyaycsXG4gICAgICB1cmw6ICdodHRwOi8vYml0bW92aW4uY29tJyxcbiAgICAgIHJvbGU6ICdsaW5rJyxcbiAgICAgIHRleHQ6ICdsb2dvJyxcbiAgICAgIGFyaWFMYWJlbDogaTE4bi5nZXRMb2NhbGl6ZXIoJ3dhdGVybWFya0xpbmsnKSxcbiAgICB9LCA8V2F0ZXJtYXJrQ29uZmlnPnRoaXMuY29uZmlnKTtcbiAgfVxufSIsImltcG9ydCB7VlJUb2dnbGVCdXR0b259IGZyb20gJy4vY29tcG9uZW50cy92cnRvZ2dsZWJ1dHRvbic7XG5pbXBvcnQge1NldHRpbmdzVG9nZ2xlQnV0dG9ufSBmcm9tICcuL2NvbXBvbmVudHMvc2V0dGluZ3N0b2dnbGVidXR0b24nO1xuaW1wb3J0IHtWb2x1bWVTbGlkZXJ9IGZyb20gJy4vY29tcG9uZW50cy92b2x1bWVzbGlkZXInO1xuaW1wb3J0IHtQbGF5YmFja1RpbWVMYWJlbCwgUGxheWJhY2tUaW1lTGFiZWxNb2RlfSBmcm9tICcuL2NvbXBvbmVudHMvcGxheWJhY2t0aW1lbGFiZWwnO1xuaW1wb3J0IHtBaXJQbGF5VG9nZ2xlQnV0dG9ufSBmcm9tICcuL2NvbXBvbmVudHMvYWlycGxheXRvZ2dsZWJ1dHRvbic7XG5pbXBvcnQge0Vycm9yTWVzc2FnZU92ZXJsYXl9IGZyb20gJy4vY29tcG9uZW50cy9lcnJvcm1lc3NhZ2VvdmVybGF5JztcbmltcG9ydCB7Q29udHJvbEJhcn0gZnJvbSAnLi9jb21wb25lbnRzL2NvbnRyb2xiYXInO1xuaW1wb3J0IHtDYXN0VG9nZ2xlQnV0dG9ufSBmcm9tICcuL2NvbXBvbmVudHMvY2FzdHRvZ2dsZWJ1dHRvbic7XG5pbXBvcnQge0Z1bGxzY3JlZW5Ub2dnbGVCdXR0b259IGZyb20gJy4vY29tcG9uZW50cy9mdWxsc2NyZWVudG9nZ2xlYnV0dG9uJztcbmltcG9ydCB7UmVjb21tZW5kYXRpb25PdmVybGF5fSBmcm9tICcuL2NvbXBvbmVudHMvcmVjb21tZW5kYXRpb25vdmVybGF5JztcbmltcG9ydCB7UGxheWJhY2tTcGVlZFNlbGVjdEJveH0gZnJvbSAnLi9jb21wb25lbnRzL3BsYXliYWNrc3BlZWRzZWxlY3Rib3gnO1xuaW1wb3J0IHtBdWRpb1F1YWxpdHlTZWxlY3RCb3h9IGZyb20gJy4vY29tcG9uZW50cy9hdWRpb3F1YWxpdHlzZWxlY3Rib3gnO1xuaW1wb3J0IHtDYXN0U3RhdHVzT3ZlcmxheX0gZnJvbSAnLi9jb21wb25lbnRzL2Nhc3RzdGF0dXNvdmVybGF5JztcbmltcG9ydCB7VUlDb250YWluZXJ9IGZyb20gJy4vY29tcG9uZW50cy91aWNvbnRhaW5lcic7XG5pbXBvcnQge1dhdGVybWFya30gZnJvbSAnLi9jb21wb25lbnRzL3dhdGVybWFyayc7XG5pbXBvcnQge1N1YnRpdGxlT3ZlcmxheX0gZnJvbSAnLi9jb21wb25lbnRzL3N1YnRpdGxlb3ZlcmxheSc7XG5pbXBvcnQge1NldHRpbmdzUGFuZWx9IGZyb20gJy4vY29tcG9uZW50cy9zZXR0aW5nc3BhbmVsJztcbmltcG9ydCB7U2Vla0JhckxhYmVsfSBmcm9tICcuL2NvbXBvbmVudHMvc2Vla2JhcmxhYmVsJztcbmltcG9ydCB7UGxheWJhY2tUb2dnbGVPdmVybGF5fSBmcm9tICcuL2NvbXBvbmVudHMvcGxheWJhY2t0b2dnbGVvdmVybGF5JztcbmltcG9ydCB7UGljdHVyZUluUGljdHVyZVRvZ2dsZUJ1dHRvbn0gZnJvbSAnLi9jb21wb25lbnRzL3BpY3R1cmVpbnBpY3R1cmV0b2dnbGVidXR0b24nO1xuaW1wb3J0IHtTcGFjZXJ9IGZyb20gJy4vY29tcG9uZW50cy9zcGFjZXInO1xuaW1wb3J0IHtDb250YWluZXJ9IGZyb20gJy4vY29tcG9uZW50cy9jb250YWluZXInO1xuaW1wb3J0IHtWb2x1bWVUb2dnbGVCdXR0b259IGZyb20gJy4vY29tcG9uZW50cy92b2x1bWV0b2dnbGVidXR0b24nO1xuaW1wb3J0IHtQbGF5YmFja1RvZ2dsZUJ1dHRvbn0gZnJvbSAnLi9jb21wb25lbnRzL3BsYXliYWNrdG9nZ2xlYnV0dG9uJztcbmltcG9ydCB7U2Vla0Jhcn0gZnJvbSAnLi9jb21wb25lbnRzL3NlZWtiYXInO1xuaW1wb3J0IHtWaWRlb1F1YWxpdHlTZWxlY3RCb3h9IGZyb20gJy4vY29tcG9uZW50cy92aWRlb3F1YWxpdHlzZWxlY3Rib3gnO1xuaW1wb3J0IHtVSUNvbmRpdGlvbkNvbnRleHQsIFVJTWFuYWdlcn0gZnJvbSAnLi91aW1hbmFnZXInO1xuaW1wb3J0IHtUaXRsZUJhcn0gZnJvbSAnLi9jb21wb25lbnRzL3RpdGxlYmFyJztcbmltcG9ydCB7QnVmZmVyaW5nT3ZlcmxheX0gZnJvbSAnLi9jb21wb25lbnRzL2J1ZmZlcmluZ292ZXJsYXknO1xuaW1wb3J0IHtTdWJ0aXRsZUxpc3RCb3h9IGZyb20gJy4vY29tcG9uZW50cy9zdWJ0aXRsZWxpc3Rib3gnO1xuaW1wb3J0IHtBdWRpb1RyYWNrTGlzdEJveH0gZnJvbSAnLi9jb21wb25lbnRzL2F1ZGlvdHJhY2tsaXN0Ym94JztcbmltcG9ydCB7U2V0dGluZ3NQYW5lbEl0ZW19IGZyb20gJy4vY29tcG9uZW50cy9zZXR0aW5nc3BhbmVsaXRlbSc7XG5pbXBvcnQge1NldHRpbmdzUGFuZWxQYWdlfSBmcm9tICcuL2NvbXBvbmVudHMvc2V0dGluZ3NwYW5lbHBhZ2UnO1xuaW1wb3J0IHsgVUlGYWN0b3J5IH0gZnJvbSAnLi91aWZhY3RvcnknO1xuaW1wb3J0IHsgVUlDb25maWcgfSBmcm9tICcuL3VpY29uZmlnJztcbmltcG9ydCB7IFBsYXllckFQSSB9IGZyb20gJ2JpdG1vdmluLXBsYXllcic7XG5pbXBvcnQgeyBRdWlja1NlZWtCdXR0b24gfSBmcm9tICcuL21haW4nO1xuXG5leHBvcnQgbmFtZXNwYWNlIERlbW9GYWN0b3J5IHtcblxuICBleHBvcnQgZnVuY3Rpb24gYnVpbGREZW1vV2l0aFNlcGFyYXRlQXVkaW9TdWJ0aXRsZXNCdXR0b25zKHBsYXllcjogUGxheWVyQVBJLCBjb25maWc6IFVJQ29uZmlnID0ge30pOiBVSU1hbmFnZXIge1xuICAgIC8vIHNob3cgc21hbGxTY3JlZW4gVUkgb25seSBvbiBtb2JpbGUvaGFuZGhlbGQgZGV2aWNlc1xuICAgIGxldCBzbWFsbFNjcmVlblN3aXRjaFdpZHRoID0gNjAwO1xuXG4gICAgcmV0dXJuIG5ldyBVSU1hbmFnZXIocGxheWVyLCBbe1xuICAgICAgdWk6IFVJRmFjdG9yeS5tb2Rlcm5TbWFsbFNjcmVlbkFkc1VJKCksXG4gICAgICBjb25kaXRpb246IChjb250ZXh0OiBVSUNvbmRpdGlvbkNvbnRleHQpID0+IHtcbiAgICAgICAgcmV0dXJuIGNvbnRleHQuaXNNb2JpbGUgJiYgY29udGV4dC5kb2N1bWVudFdpZHRoIDwgc21hbGxTY3JlZW5Td2l0Y2hXaWR0aFxuICAgICAgICAgICYmIGNvbnRleHQuaXNBZCAmJiBjb250ZXh0LmFkUmVxdWlyZXNVaTtcbiAgICAgIH0sXG4gICAgfSwge1xuICAgICAgdWk6IFVJRmFjdG9yeS5tb2Rlcm5BZHNVSSgpLFxuICAgICAgY29uZGl0aW9uOiAoY29udGV4dDogVUlDb25kaXRpb25Db250ZXh0KSA9PiB7XG4gICAgICAgIHJldHVybiBjb250ZXh0LmlzQWQgJiYgY29udGV4dC5hZFJlcXVpcmVzVWk7XG4gICAgICB9LFxuICAgIH0sIHtcbiAgICAgIHVpOiBVSUZhY3RvcnkubW9kZXJuU21hbGxTY3JlZW5VSSgpLFxuICAgICAgY29uZGl0aW9uOiAoY29udGV4dDogVUlDb25kaXRpb25Db250ZXh0KSA9PiB7XG4gICAgICAgIHJldHVybiBjb250ZXh0LmlzTW9iaWxlICYmIGNvbnRleHQuZG9jdW1lbnRXaWR0aCA8IHNtYWxsU2NyZWVuU3dpdGNoV2lkdGg7XG4gICAgICB9LFxuICAgIH0sIHtcbiAgICAgIHVpOiBtb2Rlcm5VSVdpdGhTZXBhcmF0ZUF1ZGlvU3VidGl0bGVzQnV0dG9ucygpLFxuICAgIH1dLCBjb25maWcpO1xuICB9XG5cbiAgZnVuY3Rpb24gbW9kZXJuVUlXaXRoU2VwYXJhdGVBdWRpb1N1YnRpdGxlc0J1dHRvbnMoKSB7XG4gICAgbGV0IHN1YnRpdGxlT3ZlcmxheSA9IG5ldyBTdWJ0aXRsZU92ZXJsYXkoKTtcblxuICAgIGxldCBzZXR0aW5nc1BhbmVsID0gbmV3IFNldHRpbmdzUGFuZWwoe1xuICAgICAgY29tcG9uZW50czogW1xuICAgICAgICBuZXcgU2V0dGluZ3NQYW5lbFBhZ2Uoe1xuICAgICAgICAgIGNvbXBvbmVudHM6IFtcbiAgICAgICAgICAgIG5ldyBTZXR0aW5nc1BhbmVsSXRlbSgnVmlkZW8gUXVhbGl0eScsIG5ldyBWaWRlb1F1YWxpdHlTZWxlY3RCb3goKSksXG4gICAgICAgICAgICBuZXcgU2V0dGluZ3NQYW5lbEl0ZW0oJ1NwZWVkJywgbmV3IFBsYXliYWNrU3BlZWRTZWxlY3RCb3goKSksXG4gICAgICAgICAgICBuZXcgU2V0dGluZ3NQYW5lbEl0ZW0oJ0F1ZGlvIFF1YWxpdHknLCBuZXcgQXVkaW9RdWFsaXR5U2VsZWN0Qm94KCkpLFxuICAgICAgICAgIF0sXG4gICAgICAgIH0pLFxuICAgICAgXSxcbiAgICAgIGhpZGRlbjogdHJ1ZSxcbiAgICB9KTtcblxuICAgIGxldCBzdWJ0aXRsZUxpc3RCb3ggPSBuZXcgU3VidGl0bGVMaXN0Qm94KCk7XG4gICAgbGV0IHN1YnRpdGxlU2V0dGluZ3NQYW5lbCA9IG5ldyBTZXR0aW5nc1BhbmVsKHtcbiAgICAgIGNvbXBvbmVudHM6IFtcbiAgICAgICAgbmV3IFNldHRpbmdzUGFuZWxQYWdlKHtcbiAgICAgICAgICBjb21wb25lbnRzOiBbXG4gICAgICAgICAgICBuZXcgU2V0dGluZ3NQYW5lbEl0ZW0obnVsbCwgc3VidGl0bGVMaXN0Qm94KSxcbiAgICAgICAgICBdLFxuICAgICAgICB9KSxcbiAgICAgIF0sXG4gICAgICBoaWRkZW46IHRydWUsXG4gICAgfSk7XG5cbiAgICBsZXQgYXVkaW9UcmFja0xpc3RCb3ggPSBuZXcgQXVkaW9UcmFja0xpc3RCb3goKTtcbiAgICBsZXQgYXVkaW9UcmFja1NldHRpbmdzUGFuZWwgPSBuZXcgU2V0dGluZ3NQYW5lbCh7XG4gICAgICBjb21wb25lbnRzOiBbXG4gICAgICAgIG5ldyBTZXR0aW5nc1BhbmVsUGFnZSh7XG4gICAgICAgICAgY29tcG9uZW50czogW1xuICAgICAgICAgICAgbmV3IFNldHRpbmdzUGFuZWxJdGVtKG51bGwsIGF1ZGlvVHJhY2tMaXN0Qm94KSxcbiAgICAgICAgICBdLFxuICAgICAgICB9KSxcbiAgICAgIF0sXG4gICAgICBoaWRkZW46IHRydWUsXG4gICAgfSk7XG5cbiAgICBsZXQgY29udHJvbEJhciA9IG5ldyBDb250cm9sQmFyKHtcbiAgICAgIGNvbXBvbmVudHM6IFtcbiAgICAgICAgYXVkaW9UcmFja1NldHRpbmdzUGFuZWwsXG4gICAgICAgIHN1YnRpdGxlU2V0dGluZ3NQYW5lbCxcbiAgICAgICAgc2V0dGluZ3NQYW5lbCxcbiAgICAgICAgbmV3IENvbnRhaW5lcih7XG4gICAgICAgICAgY29tcG9uZW50czogW1xuICAgICAgICAgICAgbmV3IFBsYXliYWNrVGltZUxhYmVsKHsgdGltZUxhYmVsTW9kZTogUGxheWJhY2tUaW1lTGFiZWxNb2RlLkN1cnJlbnRUaW1lLCBoaWRlSW5MaXZlUGxheWJhY2s6IHRydWUgfSksXG4gICAgICAgICAgICBuZXcgU2Vla0Jhcih7IGxhYmVsOiBuZXcgU2Vla0JhckxhYmVsKCkgfSksXG4gICAgICAgICAgICBuZXcgUGxheWJhY2tUaW1lTGFiZWwoeyB0aW1lTGFiZWxNb2RlOiBQbGF5YmFja1RpbWVMYWJlbE1vZGUuVG90YWxUaW1lLCBjc3NDbGFzc2VzOiBbJ3RleHQtcmlnaHQnXSB9KSxcbiAgICAgICAgICBdLFxuICAgICAgICAgIGNzc0NsYXNzZXM6IFsnY29udHJvbGJhci10b3AnXSxcbiAgICAgICAgfSksXG4gICAgICAgIG5ldyBDb250YWluZXIoe1xuICAgICAgICAgIGNvbXBvbmVudHM6IFtcbiAgICAgICAgICAgIG5ldyBQbGF5YmFja1RvZ2dsZUJ1dHRvbigpLFxuICAgICAgICAgICAgbmV3IFF1aWNrU2Vla0J1dHRvbih7IHNlZWtTZWNvbmRzOiAtMTAgfSksXG4gICAgICAgICAgICBuZXcgUXVpY2tTZWVrQnV0dG9uKHsgc2Vla1NlY29uZHM6IDEwIH0pLFxuICAgICAgICAgICAgbmV3IFZvbHVtZVRvZ2dsZUJ1dHRvbigpLFxuICAgICAgICAgICAgbmV3IFZvbHVtZVNsaWRlcigpLFxuICAgICAgICAgICAgbmV3IFNwYWNlcigpLFxuICAgICAgICAgICAgbmV3IFBpY3R1cmVJblBpY3R1cmVUb2dnbGVCdXR0b24oKSxcbiAgICAgICAgICAgIG5ldyBBaXJQbGF5VG9nZ2xlQnV0dG9uKCksXG4gICAgICAgICAgICBuZXcgQ2FzdFRvZ2dsZUJ1dHRvbigpLFxuICAgICAgICAgICAgbmV3IFZSVG9nZ2xlQnV0dG9uKCksXG4gICAgICAgICAgICBuZXcgU2V0dGluZ3NUb2dnbGVCdXR0b24oe1xuICAgICAgICAgICAgICBzZXR0aW5nc1BhbmVsOiBhdWRpb1RyYWNrU2V0dGluZ3NQYW5lbCxcbiAgICAgICAgICAgICAgY3NzQ2xhc3M6ICd1aS1hdWRpb3RyYWNrc2V0dGluZ3N0b2dnbGVidXR0b24nLFxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgICBuZXcgU2V0dGluZ3NUb2dnbGVCdXR0b24oe1xuICAgICAgICAgICAgICBzZXR0aW5nc1BhbmVsOiBzdWJ0aXRsZVNldHRpbmdzUGFuZWwsXG4gICAgICAgICAgICAgIGNzc0NsYXNzOiAndWktc3VidGl0bGVzZXR0aW5nc3RvZ2dsZWJ1dHRvbicsXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIG5ldyBTZXR0aW5nc1RvZ2dsZUJ1dHRvbih7IHNldHRpbmdzUGFuZWw6IHNldHRpbmdzUGFuZWwgfSksXG4gICAgICAgICAgICBuZXcgRnVsbHNjcmVlblRvZ2dsZUJ1dHRvbigpLFxuICAgICAgICAgIF0sXG4gICAgICAgICAgY3NzQ2xhc3NlczogWydjb250cm9sYmFyLWJvdHRvbSddLFxuICAgICAgICB9KSxcbiAgICAgIF0sXG4gICAgfSk7XG5cbiAgICByZXR1cm4gbmV3IFVJQ29udGFpbmVyKHtcbiAgICAgIGNvbXBvbmVudHM6IFtcbiAgICAgICAgc3VidGl0bGVPdmVybGF5LFxuICAgICAgICBuZXcgQnVmZmVyaW5nT3ZlcmxheSgpLFxuICAgICAgICBuZXcgUGxheWJhY2tUb2dnbGVPdmVybGF5KCksXG4gICAgICAgIG5ldyBDYXN0U3RhdHVzT3ZlcmxheSgpLFxuICAgICAgICBjb250cm9sQmFyLFxuICAgICAgICBuZXcgVGl0bGVCYXIoKSxcbiAgICAgICAgbmV3IFJlY29tbWVuZGF0aW9uT3ZlcmxheSgpLFxuICAgICAgICBuZXcgV2F0ZXJtYXJrKCksXG4gICAgICAgIG5ldyBFcnJvck1lc3NhZ2VPdmVybGF5KCksXG4gICAgICBdLFxuICAgIH0pO1xuICB9XG59IiwiaW1wb3J0IHsgQ29tcG9uZW50LCBDb21wb25lbnRDb25maWcgfSBmcm9tICcuL2NvbXBvbmVudHMvY29tcG9uZW50JztcblxuZXhwb3J0IGludGVyZmFjZSBPZmZzZXQge1xuICBsZWZ0OiBudW1iZXI7XG4gIHRvcDogbnVtYmVyO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFNpemUge1xuICB3aWR0aDogbnVtYmVyO1xuICBoZWlnaHQ6IG51bWJlcjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBDc3NQcm9wZXJ0aWVzIHtcbiAgW3Byb3BlcnR5TmFtZTogc3RyaW5nXTogc3RyaW5nO1xufVxuXG4vKipcbiAqIEV4dGVuZHMgdGhlIHtAbGluayBIVE1MRWxlbWVudH0gaW50ZXJmYWNlIHdpdGggYSBjb21wb25lbnQgYXR0cmlidXRlIHRvIHN0b3JlIHRoZSBhc3NvY2lhdGVkIGNvbXBvbmVudC5cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBIVE1MRWxlbWVudFdpdGhDb21wb25lbnQgZXh0ZW5kcyBIVE1MRWxlbWVudCB7XG4gIGNvbXBvbmVudD86IENvbXBvbmVudDxDb21wb25lbnRDb25maWc+O1xufVxuXG4vKipcbiAqIFNpbXBsZSBET00gbWFuaXB1bGF0aW9uIGFuZCBET00gZWxlbWVudCBldmVudCBoYW5kbGluZyBtb2RlbGVkIGFmdGVyIGpRdWVyeSAoYXMgcmVwbGFjZW1lbnQgZm9yIGpRdWVyeSkuXG4gKlxuICogTGlrZSBqUXVlcnksIERPTSBvcGVyYXRlcyBvbiBzaW5nbGUgZWxlbWVudHMgYW5kIGxpc3RzIG9mIGVsZW1lbnRzLiBGb3IgZXhhbXBsZTogY3JlYXRpbmcgYW4gZWxlbWVudCByZXR1cm5zIGEgRE9NXG4gKiBpbnN0YW5jZSB3aXRoIGEgc2luZ2xlIGVsZW1lbnQsIHNlbGVjdGluZyBlbGVtZW50cyByZXR1cm5zIGEgRE9NIGluc3RhbmNlIHdpdGggemVybywgb25lLCBvciBtYW55IGVsZW1lbnRzLiBTaW1pbGFyXG4gKiB0byBqUXVlcnksIHNldHRlcnMgdXN1YWxseSBhZmZlY3QgYWxsIGVsZW1lbnRzLCB3aGlsZSBnZXR0ZXJzIG9wZXJhdGUgb24gb25seSB0aGUgZmlyc3QgZWxlbWVudC5cbiAqIEFsc28gc2ltaWxhciB0byBqUXVlcnksIG1vc3QgbWV0aG9kcyAoZXhjZXB0IGdldHRlcnMpIHJldHVybiB0aGUgRE9NIGluc3RhbmNlIGZhY2lsaXRhdGluZyBlYXN5IGNoYWluaW5nIG9mIG1ldGhvZFxuICogY2FsbHMuXG4gKlxuICogQnVpbHQgd2l0aCB0aGUgaGVscCBvZjogaHR0cDovL3lvdW1pZ2h0bm90bmVlZGpxdWVyeS5jb20vXG4gKi9cbmV4cG9ydCBjbGFzcyBET00ge1xuXG4gIHByaXZhdGUgZG9jdW1lbnQ6IERvY3VtZW50O1xuXG4gIC8qKlxuICAgKiBUaGUgbGlzdCBvZiBlbGVtZW50cyB0aGF0IHRoZSBpbnN0YW5jZSB3cmFwcy4gVGFrZSBjYXJlIHRoYXQgbm90IGFsbCBtZXRob2RzIGNhbiBvcGVyYXRlIG9uIHRoZSB3aG9sZSBsaXN0LFxuICAgKiBnZXR0ZXJzIHVzdWFsbHkganVzdCB3b3JrIG9uIHRoZSBmaXJzdCBlbGVtZW50LlxuICAgKi9cbiAgcHJpdmF0ZSBlbGVtZW50czogSFRNTEVsZW1lbnRXaXRoQ29tcG9uZW50W107XG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgYSBET00gZWxlbWVudC5cbiAgICogQHBhcmFtIHRhZ05hbWUgdGhlIHRhZyBuYW1lIG9mIHRoZSBET00gZWxlbWVudFxuICAgKiBAcGFyYW0gYXR0cmlidXRlcyBhIGxpc3Qgb2YgYXR0cmlidXRlcyBvZiB0aGUgZWxlbWVudFxuICAgKiBAcGFyYW0gY29tcG9uZW50IHRoZSB7QGxpbmsgQ29tcG9uZW50fSB0aGUgRE9NIGVsZW1lbnQgaXMgYXNzb2NpYXRlZCB3aXRoXG4gICAqL1xuICBjb25zdHJ1Y3Rvcih0YWdOYW1lOiBzdHJpbmcsIGF0dHJpYnV0ZXM6IHtbbmFtZTogc3RyaW5nXTogc3RyaW5nfSwgY29tcG9uZW50PzogQ29tcG9uZW50PENvbXBvbmVudENvbmZpZz4pO1xuICAvKipcbiAgICogU2VsZWN0cyBhbGwgZWxlbWVudHMgZnJvbSB0aGUgRE9NIHRoYXQgbWF0Y2ggdGhlIHNwZWNpZmllZCBzZWxlY3Rvci5cbiAgICogQHBhcmFtIHNlbGVjdG9yIHRoZSBzZWxlY3RvciB0byBtYXRjaCBET00gZWxlbWVudHMgd2l0aFxuICAgKi9cbiAgY29uc3RydWN0b3Ioc2VsZWN0b3I6IHN0cmluZyk7XG4gIC8qKlxuICAgKiBXcmFwcyBhIHBsYWluIEhUTUxFbGVtZW50IHdpdGggYSBET00gaW5zdGFuY2UuXG4gICAqIEBwYXJhbSBlbGVtZW50IHRoZSBIVE1MRWxlbWVudCB0byB3cmFwIHdpdGggRE9NXG4gICAqL1xuICBjb25zdHJ1Y3RvcihlbGVtZW50OiBIVE1MRWxlbWVudCk7XG4gIC8qKlxuICAgKiBXcmFwcyBhIGxpc3Qgb2YgcGxhaW4gSFRNTEVsZW1lbnRzIHdpdGggYSBET00gaW5zdGFuY2UuXG4gICAqIEBwYXJhbSBlbGVtZW50cyB0aGUgSFRNTEVsZW1lbnRzIHRvIHdyYXAgd2l0aCBET01cbiAgICovXG4gIGNvbnN0cnVjdG9yKGVsZW1lbnRzOiBIVE1MRWxlbWVudFtdKTtcbiAgLyoqXG4gICAqIFdyYXBzIHRoZSBkb2N1bWVudCB3aXRoIGEgRE9NIGluc3RhbmNlLiBVc2VmdWwgdG8gYXR0YWNoIGV2ZW50IGxpc3RlbmVycyB0byB0aGUgZG9jdW1lbnQuXG4gICAqIEBwYXJhbSBkb2N1bWVudCB0aGUgZG9jdW1lbnQgdG8gd3JhcFxuICAgKi9cbiAgY29uc3RydWN0b3IoZG9jdW1lbnQ6IERvY3VtZW50KTtcbiAgY29uc3RydWN0b3IoXG4gICAgICBzb21ldGhpbmc6IHN0cmluZyB8IEhUTUxFbGVtZW50IHwgSFRNTEVsZW1lbnRbXSB8IERvY3VtZW50LFxuICAgICAgYXR0cmlidXRlcz86IHtbbmFtZTogc3RyaW5nXTogc3RyaW5nfSxcbiAgICAgIGNvbXBvbmVudD86IENvbXBvbmVudDxDb21wb25lbnRDb25maWc+LFxuICApIHtcbiAgICB0aGlzLmRvY3VtZW50ID0gZG9jdW1lbnQ7IC8vIFNldCB0aGUgZ2xvYmFsIGRvY3VtZW50IHRvIHRoZSBsb2NhbCBkb2N1bWVudCBmaWVsZFxuXG4gICAgaWYgKHNvbWV0aGluZyBpbnN0YW5jZW9mIEFycmF5KSB7XG4gICAgICBpZiAoc29tZXRoaW5nLmxlbmd0aCA+IDAgJiYgc29tZXRoaW5nWzBdIGluc3RhbmNlb2YgSFRNTEVsZW1lbnQpIHtcbiAgICAgICAgbGV0IGVsZW1lbnRzID0gc29tZXRoaW5nIGFzIEhUTUxFbGVtZW50V2l0aENvbXBvbmVudFtdO1xuICAgICAgICB0aGlzLmVsZW1lbnRzID0gZWxlbWVudHM7XG4gICAgICB9XG4gICAgfVxuICAgIGVsc2UgaWYgKHNvbWV0aGluZyBpbnN0YW5jZW9mIEhUTUxFbGVtZW50KSB7XG4gICAgICBsZXQgZWxlbWVudCA9IHNvbWV0aGluZyBhcyBIVE1MRWxlbWVudFdpdGhDb21wb25lbnQ7XG4gICAgICB0aGlzLmVsZW1lbnRzID0gW2VsZW1lbnRdO1xuICAgIH1cbiAgICBlbHNlIGlmIChzb21ldGhpbmcgaW5zdGFuY2VvZiBEb2N1bWVudCkge1xuICAgICAgLy8gV2hlbiBhIGRvY3VtZW50IGlzIHBhc3NlZCBpbiwgd2UgZG8gbm90IGRvIGFueXRoaW5nIHdpdGggaXQsIGJ1dCBieSBzZXR0aW5nIHRoaXMuZWxlbWVudHMgdG8gbnVsbFxuICAgICAgLy8gd2UgZ2l2ZSB0aGUgZXZlbnQgaGFuZGxpbmcgbWV0aG9kIGEgbWVhbnMgdG8gZGV0ZWN0IGlmIHRoZSBldmVudHMgc2hvdWxkIGJlIHJlZ2lzdGVyZWQgb24gdGhlIGRvY3VtZW50XG4gICAgICAvLyBpbnN0ZWFkIG9mIGVsZW1lbnRzLlxuICAgICAgdGhpcy5lbGVtZW50cyA9IG51bGw7XG4gICAgfVxuICAgIGVsc2UgaWYgKGF0dHJpYnV0ZXMpIHtcbiAgICAgIGxldCB0YWdOYW1lID0gc29tZXRoaW5nO1xuICAgICAgbGV0IGVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KHRhZ05hbWUpIGFzIEhUTUxFbGVtZW50V2l0aENvbXBvbmVudDtcblxuICAgICAgZm9yIChsZXQgYXR0cmlidXRlTmFtZSBpbiBhdHRyaWJ1dGVzKSB7XG4gICAgICAgIGxldCBhdHRyaWJ1dGVWYWx1ZSA9IGF0dHJpYnV0ZXNbYXR0cmlidXRlTmFtZV07XG4gICAgICAgIGlmIChhdHRyaWJ1dGVWYWx1ZSAhPSBudWxsKSB7XG4gICAgICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoYXR0cmlidXRlTmFtZSwgYXR0cmlidXRlVmFsdWUpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChjb21wb25lbnQpIHtcbiAgICAgICAgZWxlbWVudC5jb21wb25lbnQgPSBjb21wb25lbnQ7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuZWxlbWVudHMgPSBbZWxlbWVudF07XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgbGV0IHNlbGVjdG9yID0gc29tZXRoaW5nO1xuICAgICAgdGhpcy5lbGVtZW50cyA9IHRoaXMuZmluZENoaWxkRWxlbWVudHMoc2VsZWN0b3IpIGFzIEhUTUxFbGVtZW50V2l0aENvbXBvbmVudFtdO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBudW1iZXIgb2YgZWxlbWVudHMgdGhhdCB0aGlzIERPTSBpbnN0YW5jZSBjdXJyZW50bHkgaG9sZHMuXG4gICAqIEByZXR1cm5zIHtudW1iZXJ9IHRoZSBudW1iZXIgb2YgZWxlbWVudHNcbiAgICovXG4gIGdldCBsZW5ndGgoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5lbGVtZW50cyA/IHRoaXMuZWxlbWVudHMubGVuZ3RoIDogMDtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBIVE1MIGVsZW1lbnRzIHRoYXQgdGhpcyBET00gaW5zdGFuY2UgY3VycmVudGx5IGhvbGRzLlxuICAgKiBAcmV0dXJucyB7SFRNTEVsZW1lbnRbXX0gdGhlIHJhdyBIVE1MIGVsZW1lbnRzXG4gICAqL1xuICBnZXQoKTogSFRNTEVsZW1lbnRXaXRoQ29tcG9uZW50W107XG4gIC8qKlxuICAgKiBHZXRzIGFuIEhUTUwgZWxlbWVudCBmcm9tIHRoZSBsaXN0IGVsZW1lbnRzIHRoYXQgdGhpcyBET00gaW5zdGFuY2UgY3VycmVudGx5IGhvbGRzLlxuICAgKiBAcGFyYW0gaW5kZXggVGhlIHplcm8tYmFzZWQgaW5kZXggaW50byB0aGUgZWxlbWVudCBsaXN0LiBDYW4gYmUgbmVnYXRpdmUgdG8gcmV0dXJuIGFuIGVsZW1lbnQgZnJvbSB0aGUgZW5kLFxuICAgKiAgICBlLmcuIC0xIHJldHVybnMgdGhlIGxhc3QgZWxlbWVudC5cbiAgICovXG4gIGdldChpbmRleDogbnVtYmVyKTogSFRNTEVsZW1lbnRXaXRoQ29tcG9uZW50O1xuICBnZXQoaW5kZXg/OiBudW1iZXIpOiBIVE1MRWxlbWVudFdpdGhDb21wb25lbnQgfCBIVE1MRWxlbWVudFdpdGhDb21wb25lbnRbXSB7XG4gICAgaWYgKGluZGV4ID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybiB0aGlzLmVsZW1lbnRzO1xuICAgIH0gZWxzZSBpZiAoIXRoaXMuZWxlbWVudHMgfHwgaW5kZXggPj0gdGhpcy5lbGVtZW50cy5sZW5ndGggfHwgaW5kZXggPCAtdGhpcy5lbGVtZW50cy5sZW5ndGgpIHtcbiAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfSBlbHNlIGlmIChpbmRleCA8IDApIHtcbiAgICAgIHJldHVybiB0aGlzLmVsZW1lbnRzW3RoaXMuZWxlbWVudHMubGVuZ3RoIC0gaW5kZXhdO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gdGhpcy5lbGVtZW50c1tpbmRleF07XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEEgc2hvcnRjdXQgbWV0aG9kIGZvciBpdGVyYXRpbmcgYWxsIGVsZW1lbnRzLiBTaG9ydHMgdGhpcy5lbGVtZW50cy5mb3JFYWNoKC4uLikgdG8gdGhpcy5mb3JFYWNoKC4uLikuXG4gICAqIEBwYXJhbSBoYW5kbGVyIHRoZSBoYW5kbGVyIHRvIGV4ZWN1dGUgYW4gb3BlcmF0aW9uIG9uIGFuIGVsZW1lbnRcbiAgICovXG4gIHByaXZhdGUgZm9yRWFjaChoYW5kbGVyOiAoZWxlbWVudDogSFRNTEVsZW1lbnQpID0+IHZvaWQpOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMuZWxlbWVudHMpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5lbGVtZW50cy5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgICBoYW5kbGVyKGVsZW1lbnQpO1xuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSBmaW5kQ2hpbGRFbGVtZW50c09mRWxlbWVudChlbGVtZW50OiBIVE1MRWxlbWVudCB8IERvY3VtZW50LCBzZWxlY3Rvcjogc3RyaW5nKTogSFRNTEVsZW1lbnRbXSB7XG4gICAgbGV0IGNoaWxkRWxlbWVudHMgPSBlbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoc2VsZWN0b3IpO1xuXG4gICAgLy8gQ29udmVydCBOb2RlTGlzdCB0byBBcnJheVxuICAgIC8vIGh0dHBzOi8vdG9kZG1vdHRvLmNvbS9hLWNvbXByZWhlbnNpdmUtZGl2ZS1pbnRvLW5vZGVsaXN0cy1hcnJheXMtY29udmVydGluZy1ub2RlbGlzdHMtYW5kLXVuZGVyc3RhbmRpbmctdGhlLWRvbS9cbiAgICByZXR1cm4gW10uc2xpY2UuY2FsbChjaGlsZEVsZW1lbnRzKTtcbiAgfVxuXG4gIHByaXZhdGUgZmluZENoaWxkRWxlbWVudHMoc2VsZWN0b3I6IHN0cmluZyk6IEhUTUxFbGVtZW50W10ge1xuICAgIGxldCBhbGxDaGlsZEVsZW1lbnRzID0gPEhUTUxFbGVtZW50W10+W107XG5cbiAgICBpZiAodGhpcy5lbGVtZW50cykge1xuICAgICAgdGhpcy5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgICAgIGFsbENoaWxkRWxlbWVudHMgPSBhbGxDaGlsZEVsZW1lbnRzLmNvbmNhdCh0aGlzLmZpbmRDaGlsZEVsZW1lbnRzT2ZFbGVtZW50KGVsZW1lbnQsIHNlbGVjdG9yKSk7XG4gICAgICB9KTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICByZXR1cm4gdGhpcy5maW5kQ2hpbGRFbGVtZW50c09mRWxlbWVudChkb2N1bWVudCwgc2VsZWN0b3IpO1xuICAgIH1cblxuICAgIHJldHVybiBhbGxDaGlsZEVsZW1lbnRzO1xuICB9XG5cbiAgLyoqXG4gICAqIEZpbmRzIGFsbCBjaGlsZCBlbGVtZW50cyBvZiBhbGwgZWxlbWVudHMgbWF0Y2hpbmcgdGhlIHN1cHBsaWVkIHNlbGVjdG9yLlxuICAgKiBAcGFyYW0gc2VsZWN0b3IgdGhlIHNlbGVjdG9yIHRvIG1hdGNoIHdpdGggY2hpbGQgZWxlbWVudHNcbiAgICogQHJldHVybnMge0RPTX0gYSBuZXcgRE9NIGluc3RhbmNlIHJlcHJlc2VudGluZyBhbGwgbWF0Y2hlZCBjaGlsZHJlblxuICAgKi9cbiAgZmluZChzZWxlY3Rvcjogc3RyaW5nKTogRE9NIHtcbiAgICBsZXQgYWxsQ2hpbGRFbGVtZW50cyA9IHRoaXMuZmluZENoaWxkRWxlbWVudHMoc2VsZWN0b3IpIGFzIEhUTUxFbGVtZW50V2l0aENvbXBvbmVudFtdO1xuICAgIHJldHVybiBuZXcgRE9NKGFsbENoaWxkRWxlbWVudHMpO1xuICB9XG5cbiAgLyoqXG4gICAqIEZvY3VzZXMgdG8gdGhlIGZpcnN0IGlucHV0IGVsZW1lbnRcbiAgICovXG4gIGZvY3VzVG9GaXJzdElucHV0KCkge1xuICAgIGNvbnN0IGlucHV0RWxlbWVudHMgPSB0aGlzLmZpbmRDaGlsZEVsZW1lbnRzKCdidXR0b24sIFtocmVmXSwgaW5wdXQsIHNlbGVjdCwgdGV4dGFyZWEsIFt0YWJpbmRleF06bm90KFt0YWJpbmRleD1cIi0xXCJdKScpO1xuXG4gICAgaWYgKGlucHV0RWxlbWVudHMubGVuZ3RoID4gMCkge1xuICAgICAgaW5wdXRFbGVtZW50c1swXS5mb2N1cygpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBGb2N1c2VzIHRvIHRoZSBmaXJzdCBpbnB1dCBlbGVtZW50XG4gICAqL1xuICBzY3JvbGxUbyh4OiBudW1iZXIsIHk6IG51bWJlcikge1xuICAgIHRoaXMuZWxlbWVudHNbMF0uc2Nyb2xsVG8oeCwgeSk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBhIHN0cmluZyBvZiB0aGUgaW5uZXIgSFRNTCBjb250ZW50IG9mIHRoZSBmaXJzdCBlbGVtZW50LlxuICAgKi9cbiAgaHRtbCgpOiBzdHJpbmc7XG4gIC8qKlxuICAgKiBTZXRzIHRoZSBpbm5lciBIVE1MIGNvbnRlbnQgb2YgYWxsIGVsZW1lbnRzLlxuICAgKiBAcGFyYW0gY29udGVudCBhIHN0cmluZyBvZiBwbGFpbiB0ZXh0IG9yIEhUTUwgbWFya3VwXG4gICAqL1xuICBodG1sKGNvbnRlbnQ6IHN0cmluZyk6IERPTTtcbiAgaHRtbChjb250ZW50Pzogc3RyaW5nKTogc3RyaW5nIHwgRE9NIHtcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDApIHtcbiAgICAgIHJldHVybiB0aGlzLnNldEh0bWwoY29udGVudCk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgcmV0dXJuIHRoaXMuZ2V0SHRtbCgpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgZ2V0SHRtbCgpOiBzdHJpbmcgfCBudWxsIHtcbiAgICByZXR1cm4gdGhpcy5lbGVtZW50c1swXS5pbm5lckhUTUw7XG4gIH1cblxuICBwcml2YXRlIHNldEh0bWwoY29udGVudDogc3RyaW5nKTogRE9NIHtcbiAgICBpZiAoY29udGVudCA9PT0gdW5kZWZpbmVkIHx8IGNvbnRlbnQgPT0gbnVsbCkge1xuICAgICAgLy8gU2V0IHRvIGVtcHR5IHN0cmluZyB0byBhdm9pZCBpbm5lckhUTUwgZ2V0dGluZyBzZXQgdG8gJ3VuZGVmaW5lZCcgKGFsbCBicm93c2Vycykgb3IgJ251bGwnIChJRTkpXG4gICAgICBjb250ZW50ID0gJyc7XG4gICAgfVxuXG4gICAgdGhpcy5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgICBlbGVtZW50LmlubmVySFRNTCA9IGNvbnRlbnQ7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8qKlxuICAgKiBDbGVhcnMgdGhlIGlubmVyIEhUTUwgb2YgYWxsIGVsZW1lbnRzIChkZWxldGVzIGFsbCBjaGlsZHJlbikuXG4gICAqIEByZXR1cm5zIHtET019XG4gICAqL1xuICBlbXB0eSgpOiBET00ge1xuICAgIHRoaXMuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuICAgICAgZWxlbWVudC5pbm5lckhUTUwgPSAnJztcbiAgICB9KTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBjdXJyZW50IHZhbHVlIG9mIHRoZSBmaXJzdCBmb3JtIGVsZW1lbnQsIGUuZy4gdGhlIHNlbGVjdGVkIHZhbHVlIG9mIGEgc2VsZWN0IGJveCBvciB0aGUgdGV4dCBpZiBhblxuICAgKiBpbnB1dCBmaWVsZC5cbiAgICogQHJldHVybnMge3N0cmluZ30gdGhlIHZhbHVlIG9mIGEgZm9ybSBlbGVtZW50XG4gICAqL1xuICB2YWwoKTogc3RyaW5nIHtcbiAgICBsZXQgZWxlbWVudCA9IHRoaXMuZWxlbWVudHNbMF07XG5cbiAgICBpZiAoZWxlbWVudCBpbnN0YW5jZW9mIEhUTUxTZWxlY3RFbGVtZW50IHx8IGVsZW1lbnQgaW5zdGFuY2VvZiBIVE1MSW5wdXRFbGVtZW50KSB7XG4gICAgICByZXR1cm4gZWxlbWVudC52YWx1ZTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAvLyBUT0RPIGFkZCBzdXBwb3J0IGZvciBtaXNzaW5nIGZvcm0gZWxlbWVudHNcbiAgICAgIHRocm93IG5ldyBFcnJvcihgdmFsKCkgbm90IHN1cHBvcnRlZCBmb3IgJHt0eXBlb2YgZWxlbWVudH1gKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgdmFsdWUgb2YgYW4gYXR0cmlidXRlIG9uIHRoZSBmaXJzdCBlbGVtZW50LlxuICAgKiBAcGFyYW0gYXR0cmlidXRlXG4gICAqL1xuICBhdHRyKGF0dHJpYnV0ZTogc3RyaW5nKTogc3RyaW5nIHwgbnVsbDtcbiAgLyoqXG4gICAqIFNldHMgYW4gYXR0cmlidXRlIG9uIGFsbCBlbGVtZW50cy5cbiAgICogQHBhcmFtIGF0dHJpYnV0ZSB0aGUgbmFtZSBvZiB0aGUgYXR0cmlidXRlXG4gICAqIEBwYXJhbSB2YWx1ZSB0aGUgdmFsdWUgb2YgdGhlIGF0dHJpYnV0ZVxuICAgKi9cbiAgYXR0cihhdHRyaWJ1dGU6IHN0cmluZywgdmFsdWU6IHN0cmluZyk6IERPTTtcbiAgYXR0cihhdHRyaWJ1dGU6IHN0cmluZywgdmFsdWU/OiBzdHJpbmcpOiBzdHJpbmcgfCBudWxsIHwgRE9NIHtcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDEpIHtcbiAgICAgIHJldHVybiB0aGlzLnNldEF0dHIoYXR0cmlidXRlLCB2YWx1ZSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgcmV0dXJuIHRoaXMuZ2V0QXR0cihhdHRyaWJ1dGUpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZW1vdmVzIHRoZSBhdHRyaWJ1dGUgb2YgdGhlIGVsZW1lbnQuXG4gICAqIEBwYXJhbSBhdHRyaWJ1dGVcbiAgICovXG4gIHJlbW92ZUF0dHIoYXR0cmlidXRlOiBzdHJpbmcpIHtcbiAgICB0aGlzLmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgIGVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKGF0dHJpYnV0ZSk7XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIGdldEF0dHIoYXR0cmlidXRlOiBzdHJpbmcpOiBzdHJpbmcgfCBudWxsIHtcbiAgICByZXR1cm4gdGhpcy5lbGVtZW50c1swXS5nZXRBdHRyaWJ1dGUoYXR0cmlidXRlKTtcbiAgfVxuXG4gIHByaXZhdGUgc2V0QXR0cihhdHRyaWJ1dGU6IHN0cmluZywgdmFsdWU6IHN0cmluZyk6IERPTSB7XG4gICAgdGhpcy5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgICBlbGVtZW50LnNldEF0dHJpYnV0ZShhdHRyaWJ1dGUsIHZhbHVlKTtcbiAgICB9KTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSB2YWx1ZSBvZiBhIGRhdGEgZWxlbWVudCBvbiB0aGUgZmlyc3QgZWxlbWVudC5cbiAgICogQHBhcmFtIGRhdGFBdHRyaWJ1dGUgdGhlIG5hbWUgb2YgdGhlIGRhdGEgYXR0cmlidXRlIHdpdGhvdXQgdGhlICdkYXRhLScgcHJlZml4XG4gICAqL1xuICBkYXRhKGRhdGFBdHRyaWJ1dGU6IHN0cmluZyk6IHN0cmluZyB8IG51bGw7XG4gIC8qKlxuICAgKiBTZXRzIGEgZGF0YSBhdHRyaWJ1dGUgb24gYWxsIGVsZW1lbnRzLlxuICAgKiBAcGFyYW0gZGF0YUF0dHJpYnV0ZSB0aGUgbmFtZSBvZiB0aGUgZGF0YSBhdHRyaWJ1dGUgd2l0aG91dCB0aGUgJ2RhdGEtJyBwcmVmaXhcbiAgICogQHBhcmFtIHZhbHVlIHRoZSB2YWx1ZSBvZiB0aGUgZGF0YSBhdHRyaWJ1dGVcbiAgICovXG4gIGRhdGEoZGF0YUF0dHJpYnV0ZTogc3RyaW5nLCB2YWx1ZTogc3RyaW5nKTogRE9NO1xuICBkYXRhKGRhdGFBdHRyaWJ1dGU6IHN0cmluZywgdmFsdWU/OiBzdHJpbmcpOiBzdHJpbmcgfCBudWxsIHwgRE9NIHtcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDEpIHtcbiAgICAgIHJldHVybiB0aGlzLnNldERhdGEoZGF0YUF0dHJpYnV0ZSwgdmFsdWUpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIHJldHVybiB0aGlzLmdldERhdGEoZGF0YUF0dHJpYnV0ZSk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBnZXREYXRhKGRhdGFBdHRyaWJ1dGU6IHN0cmluZyk6IHN0cmluZyB8IG51bGwge1xuICAgIHJldHVybiB0aGlzLmVsZW1lbnRzWzBdLmdldEF0dHJpYnV0ZSgnZGF0YS0nICsgZGF0YUF0dHJpYnV0ZSk7XG4gIH1cblxuICBwcml2YXRlIHNldERhdGEoZGF0YUF0dHJpYnV0ZTogc3RyaW5nLCB2YWx1ZTogc3RyaW5nKTogRE9NIHtcbiAgICB0aGlzLmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKCdkYXRhLScgKyBkYXRhQXR0cmlidXRlLCB2YWx1ZSk7XG4gICAgfSk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvKipcbiAgICogQXBwZW5kcyBvbmUgb3IgbW9yZSBET00gZWxlbWVudHMgYXMgY2hpbGRyZW4gdG8gYWxsIGVsZW1lbnRzLlxuICAgKiBAcGFyYW0gY2hpbGRFbGVtZW50cyB0aGUgY2hyaWxkIGVsZW1lbnRzIHRvIGFwcGVuZFxuICAgKiBAcmV0dXJucyB7RE9NfVxuICAgKi9cbiAgYXBwZW5kKC4uLmNoaWxkRWxlbWVudHM6IERPTVtdKTogRE9NIHtcbiAgICB0aGlzLmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgIGNoaWxkRWxlbWVudHMuZm9yRWFjaCgoY2hpbGRFbGVtZW50KSA9PiB7XG4gICAgICAgIGNoaWxkRWxlbWVudC5lbGVtZW50cy5mb3JFYWNoKChfLCBpbmRleCkgPT4ge1xuICAgICAgICAgIGVsZW1lbnQuYXBwZW5kQ2hpbGQoY2hpbGRFbGVtZW50LmVsZW1lbnRzW2luZGV4XSk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfSk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvKipcbiAgICogUmVtb3ZlcyBhbGwgZWxlbWVudHMgZnJvbSB0aGUgRE9NLlxuICAgKi9cbiAgcmVtb3ZlKCk6IHZvaWQge1xuICAgIHRoaXMuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuICAgICAgbGV0IHBhcmVudCA9IGVsZW1lbnQucGFyZW50Tm9kZTtcbiAgICAgIGlmIChwYXJlbnQpIHtcbiAgICAgICAgcGFyZW50LnJlbW92ZUNoaWxkKGVsZW1lbnQpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIG9mZnNldCBvZiB0aGUgZmlyc3QgZWxlbWVudCBmcm9tIHRoZSBkb2N1bWVudCdzIHRvcCBsZWZ0IGNvcm5lci5cbiAgICogQHJldHVybnMge09mZnNldH1cbiAgICovXG4gIG9mZnNldCgpOiBPZmZzZXQge1xuICAgIGxldCBlbGVtZW50ID0gdGhpcy5lbGVtZW50c1swXTtcbiAgICBsZXQgZWxlbWVudFJlY3QgPSBlbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgIGxldCBodG1sUmVjdCA9IGRvY3VtZW50LmJvZHkucGFyZW50RWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcblxuICAgIC8vIFZpcnR1YWwgdmlld3BvcnQgc2Nyb2xsIGhhbmRsaW5nIChlLmcuIHBpbmNoIHpvb21lZCB2aWV3cG9ydHMgaW4gbW9iaWxlIGJyb3dzZXJzIG9yIGRlc2t0b3AgQ2hyb21lL0VkZ2UpXG4gICAgLy8gJ25vcm1hbCcgem9vbXMgYW5kIHZpcnR1YWwgdmlld3BvcnQgem9vbXMgKGFrYSBsYXlvdXQgdmlld3BvcnQpIHJlc3VsdCBpbiBkaWZmZXJlbnRcbiAgICAvLyBlbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpIHJlc3VsdHM6XG4gICAgLy8gIC0gd2l0aCBub3JtYWwgc2Nyb2xscywgdGhlIGNsaWVudFJlY3QgZGVjcmVhc2VzIHdpdGggYW4gaW5jcmVhc2UgaW4gc2Nyb2xsKFRvcHxMZWZ0KS9wYWdlKFh8WSlPZmZzZXRcbiAgICAvLyAgLSB3aXRoIHBpbmNoIHpvb20gc2Nyb2xscywgdGhlIGNsaWVudFJlY3Qgc3RheXMgdGhlIHNhbWUgd2hpbGUgc2Nyb2xsL3BhZ2VPZmZzZXQgY2hhbmdlc1xuICAgIC8vIFRoaXMgbWVhbnMsIHRoYXQgdGhlIGNvbWJpbmF0aW9uIG9mIGNsaWVudFJlY3QgKyBzY3JvbGwvcGFnZU9mZnNldCBkb2VzIG5vdCB3b3JrIHRvIGNhbGN1bGF0ZSB0aGUgb2Zmc2V0XG4gICAgLy8gZnJvbSB0aGUgZG9jdW1lbnQncyB1cHBlciBsZWZ0IG9yaWdpbiB3aGVuIHBpbmNoIHpvb20gaXMgdXNlZC5cbiAgICAvLyBUbyB3b3JrIGFyb3VuZCB0aGlzIGlzc3VlLCB3ZSBkbyBub3QgdXNlIHNjcm9sbC9wYWdlT2Zmc2V0IGJ1dCBnZXQgdGhlIGNsaWVudFJlY3Qgb2YgdGhlIGh0bWwgZWxlbWVudCBhbmRcbiAgICAvLyBzdWJ0cmFjdCBpdCBmcm9tIHRoZSBlbGVtZW50J3MgcmVjdCwgd2hpY2ggYWx3YXlzIHJlc3VsdHMgaW4gdGhlIG9mZnNldCBmcm9tIHRoZSBkb2N1bWVudCBvcmlnaW4uXG4gICAgLy8gTk9URTogdGhlIGN1cnJlbnQgd2F5IG9mIG9mZnNldCBjYWxjdWxhdGlvbiB3YXMgaW1wbGVtZW50ZWQgc3BlY2lmaWNhbGx5IHRvIHRyYWNrIGV2ZW50IHBvc2l0aW9ucyBvbiB0aGVcbiAgICAvLyBzZWVrIGJhciwgYW5kIGl0IG1pZ2h0IGJyZWFrIGNvbXBhdGliaWxpdHkgd2l0aCBqUXVlcnkncyBvZmZzZXQoKSBtZXRob2QuIElmIHRoaXMgZXZlciB0dXJucyBvdXQgdG8gYmUgYVxuICAgIC8vIHByb2JsZW0sIHRoaXMgbWV0aG9kIHNob3VsZCBiZSByZXZlcnRlZCB0byB0aGUgb2xkIHZlcnNpb24gYW5kIHRoZSBvZmZzZXQgY2FsY3VsYXRpb24gbW92ZWQgdG8gdGhlIHNlZWsgYmFyLlxuXG4gICAgcmV0dXJuIHtcbiAgICAgIHRvcDogZWxlbWVudFJlY3QudG9wIC0gaHRtbFJlY3QudG9wLFxuICAgICAgbGVmdDogZWxlbWVudFJlY3QubGVmdCAtIGh0bWxSZWN0LmxlZnQsXG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSB3aWR0aCBvZiB0aGUgZmlyc3QgZWxlbWVudC5cbiAgICogQHJldHVybnMge251bWJlcn0gdGhlIHdpZHRoIG9mIHRoZSBmaXJzdCBlbGVtZW50XG4gICAqL1xuICB3aWR0aCgpOiBudW1iZXIge1xuICAgIC8vIFRPRE8gY2hlY2sgaWYgdGhpcyBpcyB0aGUgc2FtZSBhcyBqUXVlcnkncyB3aWR0aCgpIChwcm9iYWJseSBub3QpXG4gICAgcmV0dXJuIHRoaXMuZWxlbWVudHNbMF0ub2Zmc2V0V2lkdGg7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgaGVpZ2h0IG9mIHRoZSBmaXJzdCBlbGVtZW50LlxuICAgKiBAcmV0dXJucyB7bnVtYmVyfSB0aGUgaGVpZ2h0IG9mIHRoZSBmaXJzdCBlbGVtZW50XG4gICAqL1xuICBoZWlnaHQoKTogbnVtYmVyIHtcbiAgICAvLyBUT0RPIGNoZWNrIGlmIHRoaXMgaXMgdGhlIHNhbWUgYXMgalF1ZXJ5J3MgaGVpZ2h0KCkgKHByb2JhYmx5IG5vdClcbiAgICByZXR1cm4gdGhpcy5lbGVtZW50c1swXS5vZmZzZXRIZWlnaHQ7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgc2l6ZSBvZiB0aGUgZmlyc3QgZWxlbWVudC5cbiAgICogQHJldHVybiB7U2l6ZX0gdGhlIHNpemUgb2YgdGhlIGZpcnN0IGVsZW1lbnRcbiAgICovXG4gIHNpemUoKTogU2l6ZSB7XG4gICAgcmV0dXJuIHsgd2lkdGg6IHRoaXMud2lkdGgoKSwgaGVpZ2h0OiB0aGlzLmhlaWdodCgpIH07XG4gIH1cblxuICAvKipcbiAgICogQXR0YWNoZXMgYW4gZXZlbnQgaGFuZGxlciB0byBvbmUgb3IgbW9yZSBldmVudHMgb24gYWxsIGVsZW1lbnRzLlxuICAgKiBAcGFyYW0gZXZlbnROYW1lIHRoZSBldmVudCBuYW1lIChvciBtdWx0aXBsZSBuYW1lcyBzZXBhcmF0ZWQgYnkgc3BhY2UpIHRvIGxpc3RlbiB0b1xuICAgKiBAcGFyYW0gZXZlbnRIYW5kbGVyIHRoZSBldmVudCBoYW5kbGVyIHRvIGNhbGwgd2hlbiB0aGUgZXZlbnQgZmlyZXNcbiAgICogQHBhcmFtIG9wdGlvbnMgdGhlIG9wdGlvbnMgZm9yIHRoaXMgZXZlbnQgaGFuZGxlclxuICAgKiBAcmV0dXJucyB7RE9NfVxuICAgKi9cbiAgb24oZXZlbnROYW1lOiBzdHJpbmcsIGV2ZW50SGFuZGxlcjogRXZlbnRMaXN0ZW5lck9yRXZlbnRMaXN0ZW5lck9iamVjdCwgb3B0aW9ucz86IGJvb2xlYW4gfCBBZGRFdmVudExpc3RlbmVyT3B0aW9ucyk6IERPTSB7XG4gICAgbGV0IGV2ZW50cyA9IGV2ZW50TmFtZS5zcGxpdCgnICcpO1xuXG4gICAgZXZlbnRzLmZvckVhY2goKGV2ZW50KSA9PiB7XG4gICAgICBpZiAodGhpcy5lbGVtZW50cyA9PSBudWxsKSB7XG4gICAgICAgIHRoaXMuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihldmVudCwgZXZlbnRIYW5kbGVyLCBvcHRpb25zKTtcbiAgICAgIH1cbiAgICAgIGVsc2Uge1xuICAgICAgICB0aGlzLmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoZXZlbnQsIGV2ZW50SGFuZGxlciwgb3B0aW9ucyk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvKipcbiAgICogUmVtb3ZlcyBhbiBldmVudCBoYW5kbGVyIGZyb20gb25lIG9yIG1vcmUgZXZlbnRzIG9uIGFsbCBlbGVtZW50cy5cbiAgICogQHBhcmFtIGV2ZW50TmFtZSB0aGUgZXZlbnQgbmFtZSAob3IgbXVsdGlwbGUgbmFtZXMgc2VwYXJhdGVkIGJ5IHNwYWNlKSB0byByZW1vdmUgdGhlIGhhbmRsZXIgZnJvbVxuICAgKiBAcGFyYW0gZXZlbnRIYW5kbGVyIHRoZSBldmVudCBoYW5kbGVyIHRvIHJlbW92ZVxuICAgKiBAcGFyYW0gb3B0aW9ucyB0aGUgb3B0aW9ucyBmb3IgdGhpcyBldmVudCBoYW5kbGVyXG4gICAqIEByZXR1cm5zIHtET019XG4gICAqL1xuICBvZmYoZXZlbnROYW1lOiBzdHJpbmcsIGV2ZW50SGFuZGxlcjogRXZlbnRMaXN0ZW5lck9yRXZlbnRMaXN0ZW5lck9iamVjdCwgb3B0aW9ucz86IGJvb2xlYW4gfCBBZGRFdmVudExpc3RlbmVyT3B0aW9ucyk6IERPTSB7XG4gICAgbGV0IGV2ZW50cyA9IGV2ZW50TmFtZS5zcGxpdCgnICcpO1xuXG4gICAgZXZlbnRzLmZvckVhY2goKGV2ZW50KSA9PiB7XG4gICAgICBpZiAodGhpcy5lbGVtZW50cyA9PSBudWxsKSB7XG4gICAgICAgIHRoaXMuZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihldmVudCwgZXZlbnRIYW5kbGVyLCBvcHRpb25zKTtcbiAgICAgIH1cbiAgICAgIGVsc2Uge1xuICAgICAgICB0aGlzLmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICBlbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoZXZlbnQsIGV2ZW50SGFuZGxlciwgb3B0aW9ucyk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvKipcbiAgICogQWRkcyB0aGUgc3BlY2lmaWVkIGNsYXNzKGVzKSB0byBhbGwgZWxlbWVudHMuXG4gICAqIEBwYXJhbSBjbGFzc05hbWUgdGhlIGNsYXNzKGVzKSB0byBhZGQsIG11bHRpcGxlIGNsYXNzZXMgc2VwYXJhdGVkIGJ5IHNwYWNlXG4gICAqIEByZXR1cm5zIHtET019XG4gICAqL1xuICBhZGRDbGFzcyhjbGFzc05hbWU6IHN0cmluZyk6IERPTSB7XG4gICAgdGhpcy5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgICBpZiAoZWxlbWVudC5jbGFzc0xpc3QpIHtcbiAgICAgICAgY29uc3QgY2xhc3NOYW1lcyA9IGNsYXNzTmFtZS5zcGxpdCgnICcpXG4gICAgICAgICAgLmZpbHRlcihjbGFzc05hbWUgPT4gY2xhc3NOYW1lLmxlbmd0aCA+IDApO1xuXG4gICAgICAgIGlmIChjbGFzc05hbWVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICBlbGVtZW50LmNsYXNzTGlzdC5hZGQoLi4uY2xhc3NOYW1lcyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGVsc2Uge1xuICAgICAgICBlbGVtZW50LmNsYXNzTmFtZSArPSAnICcgKyBjbGFzc05hbWU7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8qKlxuICAgKiBSZW1vdmVkIHRoZSBzcGVjaWZpZWQgY2xhc3MoZXMpIGZyb20gYWxsIGVsZW1lbnRzLlxuICAgKiBAcGFyYW0gY2xhc3NOYW1lIHRoZSBjbGFzcyhlcykgdG8gcmVtb3ZlLCBtdWx0aXBsZSBjbGFzc2VzIHNlcGFyYXRlZCBieSBzcGFjZVxuICAgKiBAcmV0dXJucyB7RE9NfVxuICAgKi9cbiAgcmVtb3ZlQ2xhc3MoY2xhc3NOYW1lOiBzdHJpbmcpOiBET00ge1xuICAgIHRoaXMuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuICAgICAgaWYgKGVsZW1lbnQuY2xhc3NMaXN0KSB7XG4gICAgICAgIGNvbnN0IGNsYXNzTmFtZXMgPSBjbGFzc05hbWUuc3BsaXQoJyAnKVxuICAgICAgICAgIC5maWx0ZXIoY2xhc3NOYW1lID0+IGNsYXNzTmFtZS5sZW5ndGggPiAwKTtcblxuICAgICAgICBpZiAoY2xhc3NOYW1lcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKC4uLmNsYXNzTmFtZXMpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBlbHNlIHtcbiAgICAgICAgZWxlbWVudC5jbGFzc05hbWUgPSBlbGVtZW50LmNsYXNzTmFtZS5yZXBsYWNlKFxuICAgICAgICAgIG5ldyBSZWdFeHAoJyhefFxcXFxiKScgKyBjbGFzc05hbWUuc3BsaXQoJyAnKS5qb2luKCd8JykgKyAnKFxcXFxifCQpJywgJ2dpJyksICcgJyk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVja3MgaWYgYW55IG9mIHRoZSBlbGVtZW50cyBoYXMgdGhlIHNwZWNpZmllZCBjbGFzcy5cbiAgICogQHBhcmFtIGNsYXNzTmFtZSB0aGUgY2xhc3MgbmFtZSB0byBjaGVja1xuICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gdHJ1ZSBpZiBvbmUgb2YgdGhlIGVsZW1lbnRzIGhhcyB0aGUgY2xhc3MgYXR0YWNoZWQsIGVsc2UgaWYgbm8gZWxlbWVudCBoYXMgaXQgYXR0YWNoZWRcbiAgICovXG4gIGhhc0NsYXNzKGNsYXNzTmFtZTogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgbGV0IGhhc0NsYXNzID0gZmFsc2U7XG5cbiAgICB0aGlzLmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgIGlmIChlbGVtZW50LmNsYXNzTGlzdCkge1xuICAgICAgICBpZiAoZWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoY2xhc3NOYW1lKSkge1xuICAgICAgICAgIC8vIFNpbmNlIHdlIGFyZSBpbnNpZGUgYSBoYW5kbGVyLCB3ZSBjYW4ndCBqdXN0ICdyZXR1cm4gdHJ1ZScuIEluc3RlYWQsIHdlIHNhdmUgaXQgdG8gYSB2YXJpYWJsZVxuICAgICAgICAgIC8vIGFuZCByZXR1cm4gaXQgYXQgdGhlIGVuZCBvZiB0aGUgZnVuY3Rpb24gYm9keS5cbiAgICAgICAgICBoYXNDbGFzcyA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGVsc2Uge1xuICAgICAgICBpZiAobmV3IFJlZ0V4cCgnKF58ICknICsgY2xhc3NOYW1lICsgJyggfCQpJywgJ2dpJykudGVzdChlbGVtZW50LmNsYXNzTmFtZSkpIHtcbiAgICAgICAgICAvLyBTZWUgY29tbWVudCBhYm92ZVxuICAgICAgICAgIGhhc0NsYXNzID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuXG4gICAgcmV0dXJuIGhhc0NsYXNzO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIHZhbHVlIG9mIGEgQ1NTIHByb3BlcnR5IG9mIHRoZSBmaXJzdCBlbGVtZW50LlxuICAgKiBAcGFyYW0gcHJvcGVydHlOYW1lIHRoZSBuYW1lIG9mIHRoZSBDU1MgcHJvcGVydHkgdG8gcmV0cmlldmUgdGhlIHZhbHVlIG9mXG4gICAqL1xuICBjc3MocHJvcGVydHlOYW1lOiBzdHJpbmcpOiBzdHJpbmcgfCBudWxsO1xuICAvKipcbiAgICogU2V0cyB0aGUgdmFsdWUgb2YgYSBDU1MgcHJvcGVydHkgb24gYWxsIGVsZW1lbnRzLlxuICAgKiBAcGFyYW0gcHJvcGVydHlOYW1lIHRoZSBuYW1lIG9mIHRoZSBDU1MgcHJvcGVydHkgdG8gc2V0IHRoZSB2YWx1ZSBmb3JcbiAgICogQHBhcmFtIHZhbHVlIHRoZSB2YWx1ZSB0byBzZXQgZm9yIHRoZSBnaXZlbiBDU1MgcHJvcGVydHlcbiAgICovXG4gIGNzcyhwcm9wZXJ0eU5hbWU6IHN0cmluZywgdmFsdWU6IHN0cmluZyk6IERPTTtcbiAgLyoqXG4gICAqIFNldHMgYSBjb2xsZWN0aW9uIG9mIENTUyBwcm9wZXJ0aWVzIGFuZCB0aGVpciB2YWx1ZXMgb24gYWxsIGVsZW1lbnRzLlxuICAgKiBAcGFyYW0gcHJvcGVydHlWYWx1ZUNvbGxlY3Rpb24gYW4gb2JqZWN0IGNvbnRhaW5pbmcgcGFpcnMgb2YgcHJvcGVydHkgbmFtZXMgYW5kIHRoZWlyIHZhbHVlc1xuICAgKi9cbiAgY3NzKHByb3BlcnR5VmFsdWVDb2xsZWN0aW9uOiBDc3NQcm9wZXJ0aWVzKTogRE9NO1xuICBjc3MocHJvcGVydHlOYW1lT3JDb2xsZWN0aW9uOiBzdHJpbmcgfCBDc3NQcm9wZXJ0aWVzLCB2YWx1ZT86IHN0cmluZyk6IHN0cmluZyB8IG51bGwgfCBET00ge1xuICAgIGlmICh0eXBlb2YgcHJvcGVydHlOYW1lT3JDb2xsZWN0aW9uID09PSAnc3RyaW5nJykge1xuICAgICAgbGV0IHByb3BlcnR5TmFtZSA9IHByb3BlcnR5TmFtZU9yQ29sbGVjdGlvbjtcblxuICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDIpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2V0Q3NzKHByb3BlcnR5TmFtZSwgdmFsdWUpO1xuICAgICAgfVxuICAgICAgZWxzZSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldENzcyhwcm9wZXJ0eU5hbWUpO1xuICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIGxldCBwcm9wZXJ0eVZhbHVlQ29sbGVjdGlvbiA9IHByb3BlcnR5TmFtZU9yQ29sbGVjdGlvbjtcbiAgICAgIHJldHVybiB0aGlzLnNldENzc0NvbGxlY3Rpb24ocHJvcGVydHlWYWx1ZUNvbGxlY3Rpb24pO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZW1vdmVzIGFuIGlubGluZSBDU1MgcHJvcGVydHkgaWYgaXQgZXhpc3RzXG4gICAqIEBwYXJhbSBwcm9wZXJ0eU5hbWUgbmFtZSBvZiB0aGUgcHJvcGVydHkgdG8gcmVtb3ZlXG4gICAqIEBwYXJhbSBlbGVtZW50SW5kZXggaW5kZXggb2YgdGhlIGVsZW1lbnQgd2hvc2UgQ1NTIHByb3BlcnR5IHNob3VsZCBnZXQgcmVtb3ZlZFxuICAgKi9cbiAgcmVtb3ZlQ3NzKHByb3BlcnR5TmFtZTogc3RyaW5nLCBlbGVtZW50SW5kZXggPSAwKTogc3RyaW5nIHtcbiAgICByZXR1cm4gdGhpcy5lbGVtZW50c1tlbGVtZW50SW5kZXhdLnN0eWxlLnJlbW92ZVByb3BlcnR5KHByb3BlcnR5TmFtZSk7XG4gIH1cblxuICBwcml2YXRlIGdldENzcyhwcm9wZXJ0eU5hbWU6IHN0cmluZyk6IHN0cmluZyB8IG51bGwge1xuICAgIHJldHVybiBnZXRDb21wdXRlZFN0eWxlKHRoaXMuZWxlbWVudHNbMF0pWzxhbnk+cHJvcGVydHlOYW1lXTtcbiAgfVxuXG4gIHByaXZhdGUgc2V0Q3NzKHByb3BlcnR5TmFtZTogc3RyaW5nLCB2YWx1ZTogc3RyaW5nKTogRE9NIHtcbiAgICB0aGlzLmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgIC8vIDxhbnk+IGNhc3QgdG8gcmVzb2x2ZSBUUzcwMTU6IGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9hLzM2NjI3MTE0LzM3MDI1MlxuICAgICAgZWxlbWVudC5zdHlsZVs8YW55PnByb3BlcnR5TmFtZV0gPSB2YWx1ZTtcbiAgICB9KTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIHByaXZhdGUgc2V0Q3NzQ29sbGVjdGlvbihydWxlVmFsdWVDb2xsZWN0aW9uOiB7W3J1bGVOYW1lOiBzdHJpbmddOiBzdHJpbmd9KTogRE9NIHtcbiAgICB0aGlzLmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgIC8vIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9hLzM0NDkwNTczLzM3MDI1MlxuICAgICAgT2JqZWN0LmFzc2lnbihlbGVtZW50LnN0eWxlLCBydWxlVmFsdWVDb2xsZWN0aW9uKTtcbiAgICB9KTtcblxuICAgIHJldHVybiB0aGlzO1xuICB9XG59XG4iLCJpbXBvcnQge0Vycm9yTWVzc2FnZU1hcCwgRXJyb3JNZXNzYWdlVHJhbnNsYXRvcn0gZnJvbSAnLi9jb21wb25lbnRzL2Vycm9ybWVzc2FnZW92ZXJsYXknO1xuaW1wb3J0IHsgRXJyb3JFdmVudCB9IGZyb20gJ2JpdG1vdmluLXBsYXllcic7XG5pbXBvcnQgeyBNb2JpbGVWM1BsYXllckVycm9yRXZlbnQsIE1vYmlsZVYzU291cmNlRXJyb3JFdmVudCB9IGZyb20gJy4vbW9iaWxldjNwbGF5ZXJhcGknO1xuXG4vKipcbiAqIEBjYXRlZ29yeSBVdGlsc1xuICovXG5leHBvcnQgbmFtZXNwYWNlIEVycm9yVXRpbHMge1xuXG4gIGV4cG9ydCBjb25zdCBkZWZhdWx0RXJyb3JNZXNzYWdlczogRXJyb3JNZXNzYWdlTWFwID0ge1xuICAgIDEwMDA6ICdFcnJvciBpcyB1bmtub3duJyxcbiAgICAxMDAxOiAnVGhlIHBsYXllciBBUEkgaXMgbm90IGF2YWlsYWJsZSBhZnRlciBhIGNhbGwgdG8gUGxheWVyQVBJLmRlc3Ryb3kuJyxcbiAgICAxMTAwOiAnR2VuZXJhbCBzZXR1cCBlcnJvcicsXG4gICAgMTEwMTogJ1RoZXJlIHdhcyBhbiBlcnJvciB3aGVuIGluc2VydGluZyB0aGUgSFRNTCB2aWRlbyBlbGVtZW50JyxcbiAgICAxMTAyOiAnTm8gY29uZmlndXJhdGlvbiB3YXMgcHJvdmlkZWQnLFxuICAgIDExMDM6ICdUaGUgbGljZW5zZSBpcyBub3QgdmFsaWQnLFxuICAgIDExMDQ6ICdUaGUgdGhlIGRvbWFpbi1sb2NrZWQgcGxheWVyIGlzIG5vdCBhdXRob3JpemVkIHRvIHBsYXliYWNrIG9uIHRoaXMgZG9tYWluJyxcbiAgICAxMTA1OiAnVGhlIGRvbWFpbiBpcyBub3QgYWxsb3dsaXN0ZWQnLFxuICAgIDExMDY6ICdUaGUgbGljZW5zZSBzZXJ2ZXIgVVJMIGlzIGludmFsaWQnLFxuICAgIDExMDc6ICdUaGUgaW1wcmVzc2lvbiBzZXJ2ZXIgVVJMIGlzIGludmFsaWQnLFxuICAgIDExMDg6ICdDb3VsZCBub3QgaW5pdGlhbGl6ZSBhIHJlbmRlcmluZyBlbmdpbmUnLFxuICAgIDExMDk6ICdUaGUgdXNlZCBmbGFzaCB2ZXJzaW9uIGRvZXMgbm90IHN1cHBvcnQgcGxheWJhY2snLFxuICAgIDExMTA6ICdOYXRpdmUgRmxhc2ggaXMgbm90IGF1dGhvcml6ZWQgYnkgYSB2YWxpZCBBZG9iZSB0b2tlbicsXG4gICAgMTExMTogJ0ZsYXNoIGRvZXNuXFwndCBoYXZlIHN1ZmZpY2llbnQgcmVzb3VyY2VzJyxcbiAgICAxMTEyOiAnRmxhc2ggY29udGFpbmVyIEFQSSBub3QgYXZhaWxhYmxlJyxcbiAgICAxMTEzOiAnUHJvdG9jb2wgbm90IHN1cHBvcnRlZC4gVGhpcyBzaXRlIGhhcyBiZWVuIGxvYWRlZCB1c2luZyBcImZpbGVcIiBwcm90b2NvbCwgYnV0IHVuZm9ydHVuYXRlbHkgdGhpcyBpcyBub3Qgc3VwcG9ydGVkLiBQbGVhc2UgbG9hZCB0aGUgcGFnZSB1c2luZyBhIHdlYiBzZXJ2ZXIgKHVzaW5nIGh0dHAgb3IgaHR0cHMpJyxcbiAgICAxMjAwOiAnR2VuZXJhbCBzb3VyY2UgZXJyb3InLFxuICAgIDEyMDE6ICdObyB2YWxpZCBzb3VyY2Ugd2FzIHByb3ZpZGVkJyxcbiAgICAxMjAyOiAnVGhlIGRvd25sb2FkZWQgbWFuaWZlc3QgaXMgaW52YWxpZCcsXG4gICAgMTIwMzogJ1RoZXJlIHdhcyBubyB0ZWNobm9sb2d5IGRldGVjdGVkIHRvIHBsYXliYWNrIHRoZSBwcm92aWRlZCBzb3VyY2UnLFxuICAgIDEyMDQ6ICdUaGUgc3RyZWFtIHR5cGUgaXMgbm90IHN1cHBvcnRlZCcsXG4gICAgMTIwNTogJ1RoZSBmb3JjZWQgdGVjaG5vbG9neSBpcyBub3Qgc3VwcG9ydGVkJyxcbiAgICAxMjA2OiAnTm8gc3RyZWFtIGZvdW5kIGZvciBzdXBwb3J0ZWQgdGVjaG5vbG9naWVzLicsXG4gICAgMTIwNzogJ1RoZSBkb3dubG9hZGVkIHNlZ21lbnQgaXMgZW1wdHknLFxuICAgIDEyMDg6ICdUaGUgbWFuaWZlc3QgY291bGQgbm90IGJlIGxvYWRlZCcsXG4gICAgMTIwOTogJ1Byb2dyZXNzaXZlIHN0cmVhbSB0eXBlIG5vdCBzdXBwb3J0ZWQgb3IgdGhlIHN0cmVhbSBoYXMgYW4gZXJyb3InLFxuICAgIDEyMTA6ICdITFMgc3RyZWFtIGhhcyBhbiBlcnJvcicsXG4gICAgMTIxMTogJ1RoZSBlbmNyeXB0aW9uIG1ldGhvZCBpcyBub3Qgc3VwcG9ydGVkJyxcbiAgICAxMzAwOiAnR2VuZXJhbCBwbGF5YmFjayBlcnJvcicsXG4gICAgMTMwMTogJ1ZpZGVvIGRlY29kZXIgb3IgZGVtdXhlciBoYWQgYW4gZXJyb3Igd2l0aCB0aGUgY29udGVudCcsXG4gICAgMTMwMjogJ0dlbmVyYWwgZXJyb3IgaWYgRmxhc2ggcmVuZGVyZXIgaGFzIGFuIGVycm9yJyxcbiAgICAxMzAzOiAnRmxhc2ggZG9lc25cXCd0IGhhdmUgc3VmZmljaWVudCByZXNvdXJjZXMnLFxuICAgIDEzMDQ6ICdUaGUgdHJhbnNtdXhlciBjb3VsZCBub3QgYmUgaW5pdGlhbGl6ZWQnLFxuICAgIDE0MDA6ICdOZXR3b3JrIGVycm9yIHdoaWxlIGRvd25sb2FkaW5nJyxcbiAgICAxNDAxOiAnVGhlIG1hbmlmZXN0IGRvd25sb2FkIHRpbWVkIG91dCcsXG4gICAgMTQwMjogJ1RoZSBzZWdtZW50IGRvd25sb2FkIHRpbWVkIG91dCcsXG4gICAgMTQwMzogJ1RoZSBwcm9ncmVzc2l2ZSBzdHJlYW0gZG93bmxvYWQgdGltZWQgb3V0JyxcbiAgICAxNDA0OiAnVGhlIENlcnRpZmljYXRlIGNvdWxkIG5vdCBiZSBsb2FkZWQnLFxuICAgIDIwMDA6ICdHZW5lcmFsIERSTSBlcnJvcicsXG4gICAgMjAwMTogJ1JlcXVpcmVkIERSTSBjb25maWd1cmF0aW9uIGlzIG1pc3NpbmcnLFxuICAgIDIwMDI6ICdUaGUgbGljZW5zaW5nIHNlcnZlciBVUkwgaXMgbWlzc2luZycsXG4gICAgMjAwMzogJ0xpY2Vuc2UgcmVxdWVzdCBmYWlsZWQnLFxuICAgIDIwMDQ6ICdLZXkgb3IgS2V5SWQgaXMgbWlzc2luZycsXG4gICAgMjAwNTogJ0tleSBzaXplIGlzIG5vdCBzdXBwb3J0ZWQnLFxuICAgIDIwMDY6ICdVbmFibGUgdG8gaW5zdGFudGlhdGUgYSBrZXkgc3lzdGVtIHN1cHBvcnRpbmcgdGhlIHJlcXVpcmVkIGNvbWJpbmF0aW9ucycsXG4gICAgMjAwNzogJ1VuYWJsZSB0byBjcmVhdGUgb3IgaW5pdGlhbGl6ZSBrZXkgc2Vzc2lvbicsXG4gICAgMjAwODogJ1RoZSBNZWRpYUtleSBvYmplY3QgY291bGQgbm90IGJlIGNyZWF0ZWQvaW5pdGlhbGl6ZWQnLFxuICAgIDIwMDk6ICdLZXkgZXJyb3InLFxuICAgIDIwMTA6ICdUaGUga2V5IHN5c3RlbSBpcyBub3Qgc3VwcG9ydGVkJyxcbiAgICAyMDExOiAnVGhlIGNlcnRpZmljYXRlIGlzIG5vdCB2YWxpZCcsXG4gICAgMjAxMjogJ0ludmFsaWQgaGVhZGVyIGtleS92YWx1ZSBwYWlyIGZvciBQbGF5UmVhZHkgbGljZW5zZSByZXF1ZXN0JyxcbiAgICAyMDEzOiAnQ29udGVudCBjYW5ub3QgYmUgcGxheWVkIGJhY2sgYmVjYXVzZSB0aGUgb3V0cHV0IGlzIHJlc3RyaWN0ZWQgb24gdGhpcyBtYWNoaW5lJyxcbiAgICAyMDE0OiAnRFJNIGVycm9yIGZvciB0aGUgRmxhc2ggcmVuZGVyZXInLFxuICAgIDIxMDA6ICdHZW5lcmFsIFZSIGVycm9yJyxcbiAgICAyMTAxOiAnUGxheWVyIHRlY2hub2xvZ3kgbm90IGNvbXBhdGlibGUgd2l0aCBWUiBwbGF5YmFjaycsXG4gICAgMzAwMDogJ0dlbmVyYWwgbW9kdWxlIGVycm9yJyxcbiAgICAzMDAxOiAnVGhlIGRlZmluaXRpb24gb2YgdGhlIG1vZHVsZSBpcyBpbnZhbGlkIChlLmcuIGluY29tcGxldGUpLicsXG4gICAgMzAwMjogJ1RoZSBtb2R1bGUgZGVmaW5pdGlvbiBzcGVjaWZpZXMgZGVwZW5kZW5jaWVzIGJ1dCB0aGUgbW9kdWxlIGlzIG5vdCBwcm92aWRlZCB2aWEgYSBmdW5jdGlvbiBmb3IgZGVmZXJyZWQgbG9hZGluZy4nLFxuICAgIDMwMDM6ICdBIG1vZHVsZSBjYW5ub3QgYmUgbG9hZGVkIGJlY2F1c2UgaXQgaGFzIG5vdCBiZWVuIGFkZGVkIHRvIHRoZSBwbGF5ZXIgY29yZS4nLFxuICAgIDMwMDQ6ICdBIG1vZHVsZSBjYW5ub3QgYmUgbG9hZGVkIGJlY2F1c2Ugb25lIG9yIG1vcmUgZGVwZW5kZW5jaWVzIGFyZSBtaXNzaW5nLicsXG4gICAgMzEwMDogJ0FuIEFkdmVydGlzaW5nIG1vZHVsZSBlcnJvciBoYXMgb2NjdXJyZWQuIFJlZmVyIHRvIHRoZSBhdHRhY2hlZCBBZHZlcnRpc2luZ0Vycm9yLicsXG4gIH07XG5cbiAgZXhwb3J0IGNvbnN0IGRlZmF1bHRNb2JpbGVWM0Vycm9yTWVzc2FnZVRyYW5zbGF0b3IgPSAoZXJyb3I6IE1vYmlsZVYzUGxheWVyRXJyb3JFdmVudCB8IE1vYmlsZVYzU291cmNlRXJyb3JFdmVudCkgPT4ge1xuICAgIHJldHVybiBlcnJvci5tZXNzYWdlO1xuICB9O1xuXG4gIGV4cG9ydCBjb25zdCBkZWZhdWx0V2ViRXJyb3JNZXNzYWdlVHJhbnNsYXRvcjogRXJyb3JNZXNzYWdlVHJhbnNsYXRvciA9IChlcnJvcjogRXJyb3JFdmVudCkgPT4ge1xuICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IEVycm9yVXRpbHMuZGVmYXVsdEVycm9yTWVzc2FnZXNbZXJyb3IuY29kZV07XG5cbiAgICBpZiAoZXJyb3JNZXNzYWdlKSB7XG4gICAgICAvLyBVc2UgdGhlIGVycm9yIG1lc3NhZ2UgdGV4dCBpZiB0aGVyZSBpcyBvbmVcbiAgICAgIHJldHVybiBgJHtlcnJvck1lc3NhZ2V9XFxuKCR7ZXJyb3IubmFtZX0pYDsgLy8gZGVmYXVsdCBlcnJvciBtZXNzYWdlIHN0eWxlXG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIEZhbGxiYWNrIHRvIGVycm9yIGNvZGUvbmFtZSBpZiBubyBtZXNzYWdlIGlzIGRlZmluZWRcbiAgICAgIHJldHVybiBgJHtlcnJvci5jb2RlfSAke2Vycm9yLm5hbWV9YDtcbiAgICB9XG4gIH07XG59XG4iLCJpbXBvcnQge0FycmF5VXRpbHN9IGZyb20gJy4vYXJyYXl1dGlscyc7XG5pbXBvcnQgeyBUaW1lb3V0IH0gZnJvbSAnLi90aW1lb3V0Jztcbi8qKlxuICogRnVuY3Rpb24gaW50ZXJmYWNlIGZvciBldmVudCBsaXN0ZW5lcnMgb24gdGhlIHtAbGluayBFdmVudERpc3BhdGNoZXJ9LlxuICovXG5leHBvcnQgaW50ZXJmYWNlIEV2ZW50TGlzdGVuZXI8U2VuZGVyLCBBcmdzPiB7XG4gIChzZW5kZXI6IFNlbmRlciwgYXJnczogQXJncyk6IHZvaWQ7XG59XG5cbi8qKlxuICogRW1wdHkgdHlwZSBmb3IgY3JlYXRpbmcge0BsaW5rIEV2ZW50RGlzcGF0Y2hlciBldmVudCBkaXNwYXRjaGVyc30gdGhhdCBkbyBub3QgY2FycnkgYW55IGFyZ3VtZW50cy5cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBOb0FyZ3Mge1xufVxuXG4vKipcbiAqIEV2ZW50IGFyZ3MgZm9yIGFuIGV2ZW50IHRoYXQgY2FuIGJlIGNhbmNlbGVkLlxuICovXG5leHBvcnQgaW50ZXJmYWNlIENhbmNlbEV2ZW50QXJncyBleHRlbmRzIE5vQXJncyB7XG4gIC8qKlxuICAgKiBHZXRzIG9yIHNldHMgYSBmbGFnIHdoZXRoZXIgdGhlIGV2ZW50IHNob3VsZCBiZSBjYW5jZWxlZC5cbiAgICovXG4gIGNhbmNlbD86IGJvb2xlYW47XG59XG5cbi8qKlxuICogUHVibGljIGludGVyZmFjZSB0aGF0IHJlcHJlc2VudHMgYW4gZXZlbnQuIENhbiBiZSB1c2VkIHRvIHN1YnNjcmliZSB0byBhbmQgdW5zdWJzY3JpYmUgZnJvbSBldmVudHMuXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgRXZlbnQ8U2VuZGVyLCBBcmdzPiB7XG4gIC8qKlxuICAgKiBTdWJzY3JpYmVzIGFuIGV2ZW50IGxpc3RlbmVyIHRvIHRoaXMgZXZlbnQgZGlzcGF0Y2hlci5cbiAgICogQHBhcmFtIGxpc3RlbmVyIHRoZSBsaXN0ZW5lciB0byBhZGRcbiAgICovXG4gIHN1YnNjcmliZShsaXN0ZW5lcjogRXZlbnRMaXN0ZW5lcjxTZW5kZXIsIEFyZ3M+KTogdm9pZDtcblxuICAvKipcbiAgICogU3Vic2NyaWJlcyBhbiBldmVudCBsaXN0ZW5lciB0byB0aGlzIGV2ZW50IGRpc3BhdGNoZXIgdGhhdCBpcyBvbmx5IGNhbGxlZCBvbmNlLlxuICAgKiBAcGFyYW0gbGlzdGVuZXIgdGhlIGxpc3RlbmVyIHRvIGFkZFxuICAgKi9cbiAgc3Vic2NyaWJlT25jZShsaXN0ZW5lcjogRXZlbnRMaXN0ZW5lcjxTZW5kZXIsIEFyZ3M+KTogdm9pZDtcblxuICAvKipcbiAgICogU3Vic2NyaWJlcyBhbiBldmVudCBsaXN0ZW5lciB0byB0aGlzIGV2ZW50IGRpc3BhdGNoZXIgdGhhdCB3aWxsIGJlIGNhbGxlZCBhdCBhIGxpbWl0ZWQgcmF0ZSB3aXRoIGEgbWluaW11bVxuICAgKiBpbnRlcnZhbCBvZiB0aGUgc3BlY2lmaWVkIG1pbGxpc2Vjb25kcy5cbiAgICogQHBhcmFtIGxpc3RlbmVyIHRoZSBsaXN0ZW5lciB0byBhZGRcbiAgICogQHBhcmFtIHJhdGVNcyB0aGUgcmF0ZSBpbiBtaWxsaXNlY29uZHMgdG8gd2hpY2ggY2FsbGluZyBvZiB0aGUgbGlzdGVuZXJzIHNob3VsZCBiZSBsaW1pdGVkXG4gICAqL1xuICBzdWJzY3JpYmVSYXRlTGltaXRlZChsaXN0ZW5lcjogRXZlbnRMaXN0ZW5lcjxTZW5kZXIsIEFyZ3M+LCByYXRlTXM6IG51bWJlcik6IHZvaWQ7XG5cbiAgLyoqXG4gICAqIFVuc3Vic2NyaWJlcyBhIHN1YnNjcmliZWQgZXZlbnQgbGlzdGVuZXIgZnJvbSB0aGlzIGRpc3BhdGNoZXIuXG4gICAqIEBwYXJhbSBsaXN0ZW5lciB0aGUgbGlzdGVuZXIgdG8gcmVtb3ZlXG4gICAqIEByZXR1cm5zIHtib29sZWFufSB0cnVlIGlmIHRoZSBsaXN0ZW5lciB3YXMgc3VjY2Vzc2Z1bGx5IHVuc3Vic2NyaWJlZCwgZmFsc2UgaWYgaXQgaXNuJ3Qgc3Vic2NyaWJlZCBvbiB0aGlzXG4gICAqICAgZGlzcGF0Y2hlclxuICAgKi9cbiAgdW5zdWJzY3JpYmUobGlzdGVuZXI6IEV2ZW50TGlzdGVuZXI8U2VuZGVyLCBBcmdzPik6IGJvb2xlYW47XG59XG5cbi8qKlxuICogRXZlbnQgZGlzcGF0Y2hlciB0byBzdWJzY3JpYmUgYW5kIHRyaWdnZXIgZXZlbnRzLiBFYWNoIGV2ZW50IHNob3VsZCBoYXZlIGl0cyBvd24gZGlzcGF0Y2hlci5cbiAqL1xuZXhwb3J0IGNsYXNzIEV2ZW50RGlzcGF0Y2hlcjxTZW5kZXIsIEFyZ3M+IGltcGxlbWVudHMgRXZlbnQ8U2VuZGVyLCBBcmdzPiB7XG5cbiAgcHJpdmF0ZSBsaXN0ZW5lcnM6IEV2ZW50TGlzdGVuZXJXcmFwcGVyPFNlbmRlciwgQXJncz5bXSA9IFtdO1xuXG4gIGNvbnN0cnVjdG9yKCkge1xuICB9XG5cbiAgLyoqXG4gICAqIHtAaW5oZXJpdERvY31cbiAgICovXG4gIHN1YnNjcmliZShsaXN0ZW5lcjogRXZlbnRMaXN0ZW5lcjxTZW5kZXIsIEFyZ3M+KSB7XG4gICAgdGhpcy5saXN0ZW5lcnMucHVzaChuZXcgRXZlbnRMaXN0ZW5lcldyYXBwZXIobGlzdGVuZXIpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiB7QGluaGVyaXREb2N9XG4gICAqL1xuICBzdWJzY3JpYmVPbmNlKGxpc3RlbmVyOiBFdmVudExpc3RlbmVyPFNlbmRlciwgQXJncz4pIHtcbiAgICB0aGlzLmxpc3RlbmVycy5wdXNoKG5ldyBFdmVudExpc3RlbmVyV3JhcHBlcihsaXN0ZW5lciwgdHJ1ZSkpO1xuICB9XG5cbiAgLyoqXG4gICAqIHtAaW5oZXJpdERvY31cbiAgICovXG4gIHN1YnNjcmliZVJhdGVMaW1pdGVkKGxpc3RlbmVyOiBFdmVudExpc3RlbmVyPFNlbmRlciwgQXJncz4sIHJhdGVNczogbnVtYmVyKSB7XG4gICAgdGhpcy5saXN0ZW5lcnMucHVzaChuZXcgUmF0ZUxpbWl0ZWRFdmVudExpc3RlbmVyV3JhcHBlcihsaXN0ZW5lciwgcmF0ZU1zKSk7XG4gIH1cblxuICAvKipcbiAgICoge0Bpbmhlcml0RG9jfVxuICAgKi9cbiAgdW5zdWJzY3JpYmUobGlzdGVuZXI6IEV2ZW50TGlzdGVuZXI8U2VuZGVyLCBBcmdzPik6IGJvb2xlYW4ge1xuICAgIC8vIEl0ZXJhdGUgdGhyb3VnaCBsaXN0ZW5lcnMsIGNvbXBhcmUgd2l0aCBwYXJhbWV0ZXIsIGFuZCByZW1vdmUgaWYgZm91bmRcbiAgICAvLyBOT1RFOiBJbiBjYXNlIHdlIGV2ZXIgcmVtb3ZlIGFsbCBtYXRjaGluZyBsaXN0ZW5lcnMgaW5zdGVhZCBvZiBqdXN0IHRoZSBmaXJzdCwgd2UgbmVlZCB0byByZXZlcnNlLWl0ZXJhdGUgaGVyZVxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5saXN0ZW5lcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGxldCBzdWJzY3JpYmVkTGlzdGVuZXIgPSB0aGlzLmxpc3RlbmVyc1tpXTtcbiAgICAgIGlmIChzdWJzY3JpYmVkTGlzdGVuZXIubGlzdGVuZXIgPT09IGxpc3RlbmVyKSB7XG4gICAgICAgIHN1YnNjcmliZWRMaXN0ZW5lci5jbGVhcigpO1xuICAgICAgICBBcnJheVV0aWxzLnJlbW92ZSh0aGlzLmxpc3RlbmVycywgc3Vic2NyaWJlZExpc3RlbmVyKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlbW92ZXMgYWxsIGxpc3RlbmVycyBmcm9tIHRoaXMgZGlzcGF0Y2hlci5cbiAgICovXG4gIHVuc3Vic2NyaWJlQWxsKCk6IHZvaWQge1xuICAgIC8vIEluIGNhc2Ugb2YgUmF0ZUxpbWl0ZWRFdmVudExpc3RlbmVyV3JhcHBlciB3ZSBuZWVkIHRvIG1ha2Ugc3VyZSB0aGF0IHRoZSB0aW1lb3V0IGNhbGxiYWNrIHdvbid0IGJlIGNhbGxlZFxuICAgIGZvciAobGV0IGxpc3RlbmVyIG9mIHRoaXMubGlzdGVuZXJzKSB7XG4gICAgICBsaXN0ZW5lci5jbGVhcigpO1xuICAgIH1cblxuICAgIHRoaXMubGlzdGVuZXJzID0gW107XG4gIH1cblxuICAvKipcbiAgICogRGlzcGF0Y2hlcyBhbiBldmVudCB0byBhbGwgc3Vic2NyaWJlZCBsaXN0ZW5lcnMuXG4gICAqIEBwYXJhbSBzZW5kZXIgdGhlIHNvdXJjZSBvZiB0aGUgZXZlbnRcbiAgICogQHBhcmFtIGFyZ3MgdGhlIGFyZ3VtZW50cyBmb3IgdGhlIGV2ZW50XG4gICAqL1xuICBkaXNwYXRjaChzZW5kZXI6IFNlbmRlciwgYXJnczogQXJncyA9IG51bGwpIHtcbiAgICBsZXQgbGlzdGVuZXJzVG9SZW1vdmUgPSBbXTtcblxuICAgIC8vIENhbGwgZXZlcnkgbGlzdGVuZXJcbiAgICAvLyBXZSBpdGVyYXRlIG92ZXIgYSBjb3B5IG9mIHRoZSBhcnJheSBvZiBsaXN0ZW5lcnMgdG8gYXZvaWQgdGhlIGNhc2Ugd2hlcmUgZXZlbnRzIGFyZSBub3QgZmlyZWQgb24gbGlzdGVuZXJzIHdoZW5cbiAgICAvLyBsaXN0ZW5lcnMgYXJlIHVuc3Vic2NyaWJlZCBmcm9tIHdpdGhpbiB0aGUgZXZlbnQgaGFuZGxlcnMgZHVyaW5nIGEgZGlzcGF0Y2ggKGJlY2F1c2UgdGhlIGluZGljZXMgY2hhbmdlIGFuZFxuICAgIC8vIGxpc3RlbmVycyBhcmUgc2hpZnRlZCB3aXRoaW4gdGhlIGFycmF5KS5cbiAgICAvLyBUaGlzIG1lYW5zIHRoYXQgbGlzdGVuZXIgeCsxIHdpbGwgc3RpbGwgYmUgY2FsbGVkIGlmIHVuc3Vic2NyaWJlZCBmcm9tIHdpdGhpbiB0aGUgaGFuZGxlciBvZiBsaXN0ZW5lciB4LCBhcyB3ZWxsXG4gICAgLy8gYXMgbGlzdGVuZXIgeSsxIHdpbGwgbm90IGJlIGNhbGxlZCB3aGVuIHN1YnNjcmliZWQgZnJvbSB3aXRoaW4gdGhlIGhhbmRsZXIgb2YgbGlzdGVuZXIgeS5cbiAgICAvLyBBcnJheS5zbGljZSgwKSBpcyB0aGUgZmFzdGVzdCBhcnJheSBjb3B5IG1ldGhvZCBhY2NvcmRpbmcgdG86IGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8yMTUxNDI1NC8zNzAyNTJcbiAgICBjb25zdCBsaXN0ZW5lcnMgPSB0aGlzLmxpc3RlbmVycy5zbGljZSgwKTtcbiAgICBmb3IgKGxldCBsaXN0ZW5lciBvZiBsaXN0ZW5lcnMpIHtcbiAgICAgIGxpc3RlbmVyLmZpcmUoc2VuZGVyLCBhcmdzKTtcblxuICAgICAgaWYgKGxpc3RlbmVyLmlzT25jZSgpKSB7XG4gICAgICAgIGxpc3RlbmVyc1RvUmVtb3ZlLnB1c2gobGlzdGVuZXIpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFJlbW92ZSBvbmUtdGltZSBsaXN0ZW5lclxuICAgIGZvciAobGV0IGxpc3RlbmVyVG9SZW1vdmUgb2YgbGlzdGVuZXJzVG9SZW1vdmUpIHtcbiAgICAgIEFycmF5VXRpbHMucmVtb3ZlKHRoaXMubGlzdGVuZXJzLCBsaXN0ZW5lclRvUmVtb3ZlKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgZXZlbnQgdGhhdCB0aGlzIGRpc3BhdGNoZXIgbWFuYWdlcyBhbmQgb24gd2hpY2ggbGlzdGVuZXJzIGNhbiBzdWJzY3JpYmUgYW5kIHVuc3Vic2NyaWJlIGV2ZW50IGhhbmRsZXJzLlxuICAgKiBAcmV0dXJucyB7RXZlbnR9XG4gICAqL1xuICBnZXRFdmVudCgpOiBFdmVudDxTZW5kZXIsIEFyZ3M+IHtcbiAgICAvLyBGb3Igbm93LCBqdXN0IGNhc3QgdGhlIGV2ZW50IGRpc3BhdGNoZXIgdG8gdGhlIGV2ZW50IGludGVyZmFjZS4gQXQgc29tZSBwb2ludCBpbiB0aGUgZnV0dXJlIHdoZW4gdGhlXG4gICAgLy8gY29kZWJhc2UgZ3Jvd3MsIGl0IG1pZ2h0IG1ha2Ugc2Vuc2UgdG8gc3BsaXQgdGhlIGRpc3BhdGNoZXIgaW50byBzZXBhcmF0ZSBkaXNwYXRjaGVyIGFuZCBldmVudCBjbGFzc2VzLlxuICAgIHJldHVybiA8RXZlbnQ8U2VuZGVyLCBBcmdzPj50aGlzO1xuICB9XG59XG5cbi8qKlxuICogQSBiYXNpYyBldmVudCBsaXN0ZW5lciB3cmFwcGVyIHRvIG1hbmFnZSBsaXN0ZW5lcnMgd2l0aGluIHRoZSB7QGxpbmsgRXZlbnREaXNwYXRjaGVyfS4gVGhpcyBpcyBhICdwcml2YXRlJyBjbGFzc1xuICogZm9yIGludGVybmFsIGRpc3BhdGNoZXIgdXNlIGFuZCBpdCBpcyB0aGVyZWZvcmUgbm90IGV4cG9ydGVkLlxuICovXG5jbGFzcyBFdmVudExpc3RlbmVyV3JhcHBlcjxTZW5kZXIsIEFyZ3M+IHtcblxuICBwcml2YXRlIGV2ZW50TGlzdGVuZXI6IEV2ZW50TGlzdGVuZXI8U2VuZGVyLCBBcmdzPjtcbiAgcHJpdmF0ZSBvbmNlOiBib29sZWFuO1xuXG4gIGNvbnN0cnVjdG9yKGxpc3RlbmVyOiBFdmVudExpc3RlbmVyPFNlbmRlciwgQXJncz4sIG9uY2U6IGJvb2xlYW4gPSBmYWxzZSkge1xuICAgIHRoaXMuZXZlbnRMaXN0ZW5lciA9IGxpc3RlbmVyO1xuICAgIHRoaXMub25jZSA9IG9uY2U7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgd3JhcHBlZCBldmVudCBsaXN0ZW5lci5cbiAgICogQHJldHVybnMge0V2ZW50TGlzdGVuZXI8U2VuZGVyLCBBcmdzPn1cbiAgICovXG4gIGdldCBsaXN0ZW5lcigpOiBFdmVudExpc3RlbmVyPFNlbmRlciwgQXJncz4ge1xuICAgIHJldHVybiB0aGlzLmV2ZW50TGlzdGVuZXI7XG4gIH1cblxuICAvKipcbiAgICogRmlyZXMgdGhlIHdyYXBwZWQgZXZlbnQgbGlzdGVuZXIgd2l0aCB0aGUgZ2l2ZW4gYXJndW1lbnRzLlxuICAgKiBAcGFyYW0gc2VuZGVyXG4gICAqIEBwYXJhbSBhcmdzXG4gICAqL1xuICBmaXJlKHNlbmRlcjogU2VuZGVyLCBhcmdzOiBBcmdzKSB7XG4gICAgdGhpcy5ldmVudExpc3RlbmVyKHNlbmRlciwgYXJncyk7XG4gIH1cblxuICAvKipcbiAgICogQ2hlY2tzIGlmIHRoaXMgbGlzdGVuZXIgaXMgc2NoZWR1bGVkIHRvIGJlIGNhbGxlZCBvbmx5IG9uY2UuXG4gICAqIEByZXR1cm5zIHtib29sZWFufSBvbmNlIGlmIHRydWVcbiAgICovXG4gIGlzT25jZSgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5vbmNlO1xuICB9XG5cbiAgY2xlYXIoKTogdm9pZCB7XG4gIH1cbn1cblxuaW50ZXJmYWNlIEV2ZW50QXR0cmlidXRlczxTZW5kZXIsIEFyZ3M+IHtcbiAgc2VuZGVyOiBTZW5kZXI7XG4gIGFyZ3M6IEFyZ3M7XG59XG5cbi8qKlxuICogRXh0ZW5kcyB0aGUgYmFzaWMge0BsaW5rIEV2ZW50TGlzdGVuZXJXcmFwcGVyfSB3aXRoIHJhdGUtbGltaXRpbmcgZnVuY3Rpb25hbGl0eS5cbiAqL1xuY2xhc3MgUmF0ZUxpbWl0ZWRFdmVudExpc3RlbmVyV3JhcHBlcjxTZW5kZXIsIEFyZ3M+IGV4dGVuZHMgRXZlbnRMaXN0ZW5lcldyYXBwZXI8U2VuZGVyLCBBcmdzPiB7XG5cbiAgcHJpdmF0ZSByZWFkb25seSByYXRlTXM6IG51bWJlcjtcbiAgcHJpdmF0ZSByZWFkb25seSByYXRlTGltaXRpbmdFdmVudExpc3RlbmVyOiBFdmVudExpc3RlbmVyPFNlbmRlciwgQXJncz47XG5cbiAgLy8gc2F2ZSBsYXN0IHNlZW4gZXZlbnQgYXR0cmlidXRlc1xuICBwcml2YXRlIGxhc3RTZWVuRXZlbnQ6IEV2ZW50QXR0cmlidXRlczxTZW5kZXIsIEFyZ3M+O1xuXG4gIHByaXZhdGUgcmF0ZUxpbWl0VGltb3V0OiBUaW1lb3V0O1xuXG4gIGNvbnN0cnVjdG9yKGxpc3RlbmVyOiBFdmVudExpc3RlbmVyPFNlbmRlciwgQXJncz4sIHJhdGVNczogbnVtYmVyKSB7XG4gICAgc3VwZXIobGlzdGVuZXIpOyAvLyBzZXRzIHRoZSBldmVudCBsaXN0ZW5lciBzaW5rXG5cbiAgICB0aGlzLnJhdGVNcyA9IHJhdGVNcztcblxuICAgIC8vIHN0YXJ0aW5nIGxpbWl0aW5nIHRoZSBldmVudHMgdG8gdGhlIGdpdmVuIHZhbHVlXG4gICAgY29uc3Qgc3RhcnRSYXRlTGltaXRpbmcgPSAoKSA9PiB7XG4gICAgICB0aGlzLnJhdGVMaW1pdFRpbW91dC5zdGFydCgpO1xuICAgIH07XG5cbiAgICAvLyB0aW1vdXQgZm9yIGxpbWl0aW5nIHRoZSBldmVudHNcbiAgICB0aGlzLnJhdGVMaW1pdFRpbW91dCA9IG5ldyBUaW1lb3V0KHRoaXMucmF0ZU1zLCAoKSA9PiB7XG4gICAgICBpZiAodGhpcy5sYXN0U2VlbkV2ZW50KSB7XG4gICAgICAgIHRoaXMuZmlyZVN1cGVyKHRoaXMubGFzdFNlZW5FdmVudC5zZW5kZXIsIHRoaXMubGFzdFNlZW5FdmVudC5hcmdzKTtcbiAgICAgICAgc3RhcnRSYXRlTGltaXRpbmcoKTsgLy8gc3RhcnQgcmF0ZUxpbWl0aW5nIGFnYWluIHRvIGtlZXAgcmF0ZSBsaW1pdCBhY3RpdmUgZXZlbiBhZnRlciBmaXJpbmcgdGhlIGxhc3Qgc2VlbiBldmVudFxuICAgICAgICB0aGlzLmxhc3RTZWVuRXZlbnQgPSBudWxsO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8gSW4gY2FzZSB0aGUgZXZlbnRzIHN0b3BwaW5nIGR1cmluZyB0aGUgcmF0ZUxpbWl0aW5nIHdlIG5lZWQgdG8gdHJhY2sgdGhlIGxhc3Qgc2VlbiBvbmUgYW5kIGRlbGVnYXRlIGFmdGVyIHRoZVxuICAgIC8vIHJhdGUgbGltaXRpbmcgaXMgZmluaXNoZWQuIFRoaXMgcHJldmVudHMgbWlzc2luZyB0aGUgbGFzdCB1cGRhdGUgZHVlIHRvIHRoZSByYXRlIGxpbWl0LlxuICAgIHRoaXMucmF0ZUxpbWl0aW5nRXZlbnRMaXN0ZW5lciA9IChzZW5kZXI6IFNlbmRlciwgYXJnczogQXJncykgPT4ge1xuICAgICAgLy8gb25seSBmaXJlIGV2ZW50cyBpZiB0aGUgcmF0ZUxpbWl0aW5nIGlzIG5vdCBydW5uaW5nXG4gICAgICBpZiAodGhpcy5zaG91bGRGaXJlRXZlbnQoKSkge1xuICAgICAgICB0aGlzLmZpcmVTdXBlcihzZW5kZXIsIGFyZ3MpO1xuICAgICAgICBzdGFydFJhdGVMaW1pdGluZygpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHRoaXMubGFzdFNlZW5FdmVudCA9IHtcbiAgICAgICAgc2VuZGVyOiBzZW5kZXIsXG4gICAgICAgIGFyZ3M6IGFyZ3MsXG4gICAgICB9O1xuICAgIH07XG4gIH1cblxuICBwcml2YXRlIHNob3VsZEZpcmVFdmVudCgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gIXRoaXMucmF0ZUxpbWl0VGltb3V0LmlzQWN0aXZlKCk7XG4gIH1cblxuICBwcml2YXRlIGZpcmVTdXBlcihzZW5kZXI6IFNlbmRlciwgYXJnczogQXJncykge1xuICAgIC8vIEZpcmUgdGhlIGFjdHVhbCBleHRlcm5hbCBldmVudCBsaXN0ZW5lclxuICAgIHN1cGVyLmZpcmUoc2VuZGVyLCBhcmdzKTtcbiAgfVxuXG4gIGZpcmUoc2VuZGVyOiBTZW5kZXIsIGFyZ3M6IEFyZ3MpIHtcbiAgICAvLyBGaXJlIHRoZSBpbnRlcm5hbCByYXRlLWxpbWl0aW5nIGxpc3RlbmVyIGluc3RlYWQgb2YgdGhlIGV4dGVybmFsIGV2ZW50IGxpc3RlbmVyXG4gICAgdGhpcy5yYXRlTGltaXRpbmdFdmVudExpc3RlbmVyKHNlbmRlciwgYXJncyk7XG4gIH1cblxuICBjbGVhcigpOiB2b2lkIHtcbiAgICBzdXBlci5jbGVhcigpO1xuICAgIHRoaXMucmF0ZUxpbWl0VGltb3V0LmNsZWFyKCk7XG4gIH1cbn1cbiIsImNvbnN0IEZvY3VzVmlzaWJsZUNzc0NsYXNzTmFtZSA9ICd7e1BSRUZJWH19LWZvY3VzLXZpc2libGUnO1xuXG5leHBvcnQgY2xhc3MgRm9jdXNWaXNpYmlsaXR5VHJhY2tlciB7XG4gIHByaXZhdGUgcmVhZG9ubHkgZXZlbnRIYW5kbGVyTWFwOiB7IFtldmVudE5hbWU6IHN0cmluZ106IEV2ZW50TGlzdGVuZXJPckV2ZW50TGlzdGVuZXJPYmplY3QgfTtcbiAgcHJpdmF0ZSBsYXN0SW50ZXJhY3Rpb25XYXNLZXlib2FyZDogYm9vbGVhbiA9IHRydWU7XG5cbiAgY29uc3RydWN0b3IocHJpdmF0ZSBiaXRtb3ZpblVpUHJlZml4OiBzdHJpbmcpIHtcbiAgICB0aGlzLmV2ZW50SGFuZGxlck1hcCA9IHtcbiAgICAgIG1vdXNlZG93bjogdGhpcy5vbk1vdXNlT3JQb2ludGVyT3JUb3VjaCxcbiAgICAgIHBvaW50ZXJkb3duOiB0aGlzLm9uTW91c2VPclBvaW50ZXJPclRvdWNoLFxuICAgICAgdG91Y2hzdGFydDogdGhpcy5vbk1vdXNlT3JQb2ludGVyT3JUb3VjaCxcbiAgICAgIGtleWRvd246IHRoaXMub25LZXlEb3duLFxuICAgICAgZm9jdXM6IHRoaXMub25Gb2N1cyxcbiAgICAgIGJsdXI6IHRoaXMub25CbHVyLFxuICAgIH07XG4gICAgdGhpcy5yZWdpc3RlckV2ZW50TGlzdGVuZXJzKCk7XG4gIH1cblxuICBwcml2YXRlIG9uS2V5RG93biA9IChlOiBLZXlib2FyZEV2ZW50KSA9PiB7XG4gICAgaWYgKGUubWV0YUtleSB8fCBlLmFsdEtleSB8fCBlLmN0cmxLZXkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLmxhc3RJbnRlcmFjdGlvbldhc0tleWJvYXJkID0gdHJ1ZTtcbiAgfTtcblxuICBwcml2YXRlIG9uTW91c2VPclBvaW50ZXJPclRvdWNoID0gKCkgPT4gKHRoaXMubGFzdEludGVyYWN0aW9uV2FzS2V5Ym9hcmQgPSBmYWxzZSk7XG5cbiAgcHJpdmF0ZSBvbkZvY3VzID0gKHsgdGFyZ2V0OiBlbGVtZW50IH06IEZvY3VzRXZlbnQpID0+IHtcbiAgICBpZiAoXG4gICAgICB0aGlzLmxhc3RJbnRlcmFjdGlvbldhc0tleWJvYXJkICYmXG4gICAgICBpc0h0bWxFbGVtZW50KGVsZW1lbnQpICYmXG4gICAgICBpc0JpdG1vdmluVWkoZWxlbWVudCwgdGhpcy5iaXRtb3ZpblVpUHJlZml4KSAmJlxuICAgICAgIWVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKEZvY3VzVmlzaWJsZUNzc0NsYXNzTmFtZSlcbiAgICApIHtcbiAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LmFkZChGb2N1c1Zpc2libGVDc3NDbGFzc05hbWUpO1xuICAgIH1cbiAgfTtcblxuICBwcml2YXRlIG9uQmx1ciA9ICh7IHRhcmdldDogZWxlbWVudCB9OiBGb2N1c0V2ZW50KSA9PiB7XG4gICAgaWYgKGlzSHRtbEVsZW1lbnQoZWxlbWVudCkpIHtcbiAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShGb2N1c1Zpc2libGVDc3NDbGFzc05hbWUpO1xuICAgIH1cbiAgfTtcblxuICBwcml2YXRlIHJlZ2lzdGVyRXZlbnRMaXN0ZW5lcnMoKTogdm9pZCB7XG4gICAgZm9yIChjb25zdCBldmVudCBpbiB0aGlzLmV2ZW50SGFuZGxlck1hcCkge1xuICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihldmVudCwgdGhpcy5ldmVudEhhbmRsZXJNYXBbZXZlbnRdLCB0cnVlKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHVucmVnaXN0ZXJFdmVudExpc3RlbmVycygpOiB2b2lkIHtcbiAgICBmb3IgKGNvbnN0IGV2ZW50IGluIHRoaXMuZXZlbnRIYW5kbGVyTWFwKSB7XG4gICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKGV2ZW50LCB0aGlzLmV2ZW50SGFuZGxlck1hcFtldmVudF0sIHRydWUpO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyByZWxlYXNlKCk6IHZvaWQge1xuICAgIHRoaXMudW5yZWdpc3RlckV2ZW50TGlzdGVuZXJzKCk7XG4gIH1cbn1cblxuZnVuY3Rpb24gaXNCaXRtb3ZpblVpKGVsZW1lbnQ6IEVsZW1lbnQsIGJpdG1vdmluVWlQcmVmaXg6IHN0cmluZyk6IGJvb2xlYW4ge1xuICByZXR1cm4gZWxlbWVudC5pZC5pbmRleE9mKGJpdG1vdmluVWlQcmVmaXgpID09PSAwO1xufVxuXG5mdW5jdGlvbiBpc0h0bWxFbGVtZW50KGVsZW1lbnQ6IHVua25vd24pOiBlbGVtZW50IGlzIEhUTUxFbGVtZW50ICYgeyBjbGFzc0xpc3Q6IERPTVRva2VuTGlzdCB9IHtcbiAgcmV0dXJuIChcbiAgICBlbGVtZW50IGluc3RhbmNlb2YgSFRNTEVsZW1lbnQgJiYgZWxlbWVudC5jbGFzc0xpc3QgaW5zdGFuY2VvZiBET01Ub2tlbkxpc3RcbiAgKTtcbn1cbiIsImltcG9ydCB7IFBsYXllckFQSSB9IGZyb20gJ2JpdG1vdmluLXBsYXllcic7XG4vKipcbiAqIFRoZSBHcm91cCBQbGF5YmFjayBBUEkgb2ZmZXJzIGNvbnRyb2wgb3ZlciBzeW5jaHJvbml6ZWQgcGxheWJhY2sgb2YgYSBncm91cCBvZiBjbGllbnRzLCBlLmcuIGZvciBBcHBsZSBTaGFyZVBsYXlcbiAqIHNlc3Npb25zLlxuXG4gKiBOb3RlOiBUaGUgQVBJIGN1cnJlbnRseSBvbmx5IGNvdmVycyB0aGUgaW1tZWRpYXRlIG5lZWRzIG9mIHRoZSBpT1MgU0RLIGluIGNvbWJpbmF0aW9uIHdpdGggb3VyIFVJIHdoaWNoIGlzIHJlZ2FyZGluZ1xuICogdGVtcG9yYXJpbHkgc3VzcGVuZGluZyBzeW5jaHJvbml6YXRpb24gb2YgdGhlIHBsYXllciBmcm9tIHRoZSBncm91cC4gQnV0IGl0IGlzIG9wZW4gdG8gYmUgZXh0ZW5kZWQgYXMgbmVlZGVkIGluIHRoZVxuICogZnV0dXJlLlxuICovXG5cbi8qKlxuICogUmVhc29uIGZvciBzdXNwZW5kaW5nIHRoZSBzeW5jaHJvbml6YXRpb24gd2l0aCB0aGUgZ3JvdXAuXG4gKi9cbmV4cG9ydCBlbnVtIEdyb3VwUGxheWJhY2tTdXNwZW5zaW9uUmVhc29uIHtcbiAgVXNlcklzU2NydWJiaW5nID0gJ3VzZXJJc1NjcnViYmluZycsXG59XG5cbi8qKlxuICogQSByZXByZXNlbnRhdGlvbiBvZiBhIHRlbXBvcmFyeSBicmVhayBpbiBwYXJ0aWNpcGF0aW9uLlxuICovXG5leHBvcnQgaW50ZXJmYWNlIEdyb3VwUGxheWJhY2tTdXNwZW5zaW9uIHtcbiAgLyoqXG4gICAqIFRoZSByZWFzb24gZm9yIHRoZSBzdXNwZW5zaW9uLlxuICAgKi9cbiAgcmVhc29uOiBHcm91cFBsYXliYWNrU3VzcGVuc2lvblJlYXNvbjtcblxuICAvKipcbiAgICogQSB1bmlxdWUgaWRlbnRpZmllci5cbiAgICovXG4gIGlkOiBzdHJpbmc7XG59XG5cbi8qKlxuICogT3B0aW9ucyB0byBiZSBjb25zaWRlcmVkIHVwb24gZW5kaW5nIGEgc3VzcGVuc2lvbi5cbiAqL1xuaW50ZXJmYWNlIEVuZEdyb3VwUGxheWJhY2tTdXNwZW5zaW9uT3B0aW9ucyB7XG4gIC8qKlxuICAgKiBBIHByb3Bvc2VkIHRpbWUgZm9yIHRoZSBncm91cCB0byBzZWVrIHRvLlxuICAgKi9cbiAgcHJvcG9zZWRQbGF5YmFja1RpbWU/OiBudW1iZXI7XG59XG5cbi8qKlxuICogR3JvdXAgUGxheWJhY2sgQVBJIG9mZmVyaW5nIGNvbnRyb2wgb3ZlciB0aGUgcGxheWVyJ3MgcGFydGljaXBhdGlvbiBpbiBzeW5jaHJvbml6ZWQgcGxheWJhY2sgb2YgYSBncm91cCBvZiBjbGllbnRzLlxuICogRm9yIGV4YW1wbGUsIGFuIEFwcGxlIFNoYXJlUGxheSBzZXNzaW9uLlxuICovXG5pbnRlcmZhY2UgR3JvdXBQbGF5YmFja0FQSSB7XG4gIC8qKlxuICAgKiBCZWdpbnMgYSBuZXcgc3VzcGVuc2lvbi5cbiAgICpcbiAgICogVGVtcG9yYXJpbHkgc3VzcGVuZHMgdGhlIGxvY2FsIHBsYXllcidzIHN5bmNocm9uaXphdGlvbiB3aXRoIHRoZSBncm91cC4gV2hpbGUgc3VzcGVuZGVkLCBhbnkgbG9jYWwgcGxheWJhY2sgY29udHJvbFxuICAgKiBhY3Rpb24gKGUuZy4gcGxheSwgcGF1c2UsIHNlZWspIHdpbGwgbm90IGJlIGZvcndhcmRlZCB0byB0aGUgZ3JvdXAgYW5kIGFueSBhY3Rpb24gb3JpZ2luYXRpbmcgZnJvbSBhbm90aGVyIGdyb3VwXG4gICAqIHBhcnRpY2lwYW50IHdpbGwgbm90IGJlIHBlcmZvcm1lZCBvbiB0aGUgbG9jYWwgcGxheWVyLlxuICAgKlxuICAgKiBAcmVtYXJrc1xuICAgKiBJdCBpcyBwb3NzaWJsZSBmb3IgbXVsdGlwbGUgc3VzcGVuc2lvbnMgdG8gZXhpc3QgZXhpc3Qgc2ltdWx0YW5lb3VzbHkgd2l0aCBkaWZmZXJlbnQgc3VzcGVuc2lvbiByZWFzb25zLiBUaGUgcGxheWVyXG4gICAqIHdpbGwgcmUtc3luY2hyb25pemUgd2l0aCB0aGUgZ3JvdXAgb25jZSBhbGwgZXhpc3Rpbmcgc3VzcGVuc2lvbnMgaGF2ZSBlbmRlZC5cbiAgICpcbiAgICogQHBhcmFtIHJlYXNvbiAtIFRoZSByZWFzb24gZm9yIHRoZSBzdXNwZW5zaW9uLlxuICAgKiBAcmV0dXJucyBBIHN1c3BlbnNpb24gb2JqZWN0LlxuICAgKi9cbiAgYmVnaW5TdXNwZW5zaW9uKHJlYXNvbjogR3JvdXBQbGF5YmFja1N1c3BlbnNpb25SZWFzb24pOiBHcm91cFBsYXliYWNrU3VzcGVuc2lvbjtcblxuICAvKipcbiAgICogRW5kcyB0aGUgZ2l2ZW4gc3VzcGVuc2lvbi5cbiAgICpcbiAgICogQHBhcmFtIHN1c3BlbnNpb24gLSBUaGUgc3VzcGVuc2lvbiB0byBiZSBlbmRlZC5cbiAgICogQHBhcmFtIG9wdGlvbnMgLSBPcHRpb25hbC4gT3B0aW9ucyB0byBiZSBjb25zaWRlcmVkIHdoZW4gZW5kaW5nIHRoZSBzdXNwZW5zaW9uLCBlLmcuIGEgcHJvcG9zZWQgc2VlayB0aW1lIGZvciB0aGUgZ3JvdXAuXG4gICAqL1xuICBlbmRTdXNwZW5zaW9uKHN1c3BlbnNpb246IEdyb3VwUGxheWJhY2tTdXNwZW5zaW9uLCBvcHRpb25zPzogRW5kR3JvdXBQbGF5YmFja1N1c3BlbnNpb25PcHRpb25zKTogdm9pZDtcblxuICAvKipcbiAgICogV2hldGhlciB0aGUgcGxheWVyIGlzIGN1cnJlbnRseSBwYXJ0aWNpcGF0aW5nIGluIGEgZ3JvdXAgcGxheWJhY2sgc2Vzc2lvbi5cbiAgICovXG4gIGhhc0pvaW5lZCgpOiBib29sZWFuO1xuXG4gIC8qKlxuICAgKiBXaGV0aGVyIHRoZSBwbGF5ZXIgaXMgY3VycmVudGx5IHN1c3BlbmRpbmcgc3luY2hyb25pemF0aW9uIHdpdGggdGhlIGdyb3VwLlxuICAgKiBDYW4gb25seSByZXR1cm4gdHJ1ZSBpZiBgaGFzSm9pbmVkKClgIGFsc28gaXMgdHJ1ZS5cbiAgICovXG4gIGlzU3VzcGVuZGVkKCk6IGJvb2xlYW47XG59XG5cblxuZXhwb3J0IGludGVyZmFjZSBFeHRlbmRlZFBsYXllckFQSSBleHRlbmRzIFBsYXllckFQSSB7XG4gIC8qKlxuICAgKiBHcm91cCBQbGF5YmFjayBBUElcbiAgICpcbiAgICogQHJlbWFya3NcbiAgICogVGhpcyBBUEkgaXMgb3B0aW9uYWwgYXMgbm90IGV2ZXJ5IHBsYXRmb3JtIHN1cHBvcnRzIGdyb3VwIHBsYXliYWNrLlxuICAgKi9cbiAgZ3JvdXBQbGF5YmFjaz86IEdyb3VwUGxheWJhY2tBUEk7XG59XG4iLCJleHBvcnQgbmFtZXNwYWNlIEd1aWQge1xuXG4gIGxldCBndWlkID0gMTtcblxuICBleHBvcnQgZnVuY3Rpb24gbmV4dCgpIHtcbiAgICByZXR1cm4gZ3VpZCsrO1xuICB9XG59XG4iLCJpbXBvcnQge0RPTX0gZnJvbSAnLi9kb20nO1xuXG5leHBvcnQgaW50ZXJmYWNlIEltYWdlTG9hZGVkQ2FsbGJhY2sge1xuICAodXJsOiBzdHJpbmcsIHdpZHRoOiBudW1iZXIsIGhlaWdodDogbnVtYmVyKTogdm9pZDtcbn1cblxuaW50ZXJmYWNlIEltYWdlTG9hZGVyU3RhdGUge1xuICB1cmw6IHN0cmluZztcbiAgaW1hZ2U6IERPTTtcbiAgbG9hZGVkQ2FsbGJhY2s6IEltYWdlTG9hZGVkQ2FsbGJhY2s7XG4gIGxvYWRlZDogYm9vbGVhbjtcbiAgd2lkdGg6IG51bWJlcjtcbiAgaGVpZ2h0OiBudW1iZXI7XG59XG5cbi8qKlxuICogVHJhY2tzIHRoZSBsb2FkaW5nIHN0YXRlIG9mIGltYWdlcy5cbiAqL1xuZXhwb3J0IGNsYXNzIEltYWdlTG9hZGVyIHtcblxuICBwcml2YXRlIHN0YXRlOiB7IFt1cmw6IHN0cmluZ106IEltYWdlTG9hZGVyU3RhdGU7IH0gPSB7fTtcblxuICAvKipcbiAgICogTG9hZHMgYW4gaW1hZ2UgYW5kIGNhbGwgdGhlIGNhbGxiYWNrIG9uY2UgdGhlIGltYWdlIGlzIGxvYWRlZC4gSWYgdGhlIGltYWdlIGlzIGFscmVhZHkgbG9hZGVkLCB0aGUgY2FsbGJhY2tcbiAgICogaXMgY2FsbGVkIGltbWVkaWF0ZWx5LCBlbHNlIGl0IGlzIGNhbGxlZCBvbmNlIGxvYWRpbmcgaGFzIGZpbmlzaGVkLiBDYWxsaW5nIHRoaXMgbWV0aG9kIG11bHRpcGxlIHRpbWVzIGZvciB0aGVcbiAgICogc2FtZSBpbWFnZSB3aGlsZSBpdCBpcyBsb2FkaW5nIGNhbGxzIG9ubHkgbGV0IGNhbGxiYWNrIHBhc3NlZCBpbnRvIHRoZSBsYXN0IGNhbGwuXG4gICAqIEBwYXJhbSB1cmwgVGhlIHVybCB0byB0aGUgaW1hZ2UgdG8gbG9hZFxuICAgKiBAcGFyYW0gbG9hZGVkQ2FsbGJhY2sgVGhlIGNhbGxiYWNrIHRoYXQgaXMgY2FsbGVkIHdoZW4gdGhlIGltYWdlIGlzIGxvYWRlZFxuICAgKi9cbiAgbG9hZCh1cmw6IHN0cmluZywgbG9hZGVkQ2FsbGJhY2s6IEltYWdlTG9hZGVkQ2FsbGJhY2spOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMuc3RhdGVbdXJsXSkge1xuICAgICAgLy8gV2hlbiB0aGUgaW1hZ2Ugd2FzIG5ldmVyIGF0dGVtcHRlZCB0byBiZSBsb2FkZWQgYmVmb3JlLCB3ZSBjcmVhdGUgYSBzdGF0ZSBhbmQgc3RvcmUgaXQgaW4gdGhlIHN0YXRlIG1hcFxuICAgICAgLy8gZm9yIGxhdGVyIHVzZSB3aGVuIHRoZSBzYW1lIGltYWdlIGlzIHJlcXVlc3RlZCB0byBiZSBsb2FkZWQgYWdhaW4uXG4gICAgICBsZXQgc3RhdGU6IEltYWdlTG9hZGVyU3RhdGUgPSB7XG4gICAgICAgIHVybDogdXJsLFxuICAgICAgICBpbWFnZTogbmV3IERPTSgnaW1nJywge30pLFxuICAgICAgICBsb2FkZWRDYWxsYmFjazogbG9hZGVkQ2FsbGJhY2ssXG4gICAgICAgIGxvYWRlZDogZmFsc2UsXG4gICAgICAgIHdpZHRoOiAwLFxuICAgICAgICBoZWlnaHQ6IDAsXG4gICAgICB9O1xuICAgICAgdGhpcy5zdGF0ZVt1cmxdID0gc3RhdGU7XG5cbiAgICAgIC8vIExpc3RlbiB0byB0aGUgbG9hZCBldmVudCwgdXBkYXRlIHRoZSBzdGF0ZSBhbmQgY2FsbCB0aGUgY2FsbGJhY2sgb25jZSB0aGUgaW1hZ2UgaXMgbG9hZGVkXG4gICAgICBzdGF0ZS5pbWFnZS5vbignbG9hZCcsIChlKSA9PiB7XG4gICAgICAgIHN0YXRlLmxvYWRlZCA9IHRydWU7XG4gICAgICAgIHN0YXRlLndpZHRoID0gKDxIVE1MSW1hZ2VFbGVtZW50PnN0YXRlLmltYWdlLmdldCgwKSkud2lkdGg7XG4gICAgICAgIHN0YXRlLmhlaWdodCA9ICg8SFRNTEltYWdlRWxlbWVudD5zdGF0ZS5pbWFnZS5nZXQoMCkpLmhlaWdodDtcblxuICAgICAgICB0aGlzLmNhbGxMb2FkZWRDYWxsYmFjayhzdGF0ZSk7XG4gICAgICB9KTtcblxuICAgICAgLy8gU2V0IHRoZSBpbWFnZSBVUkwgdG8gc3RhcnQgdGhlIGxvYWRpbmdcbiAgICAgIHN0YXRlLmltYWdlLmF0dHIoJ3NyYycsIHN0YXRlLnVybCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIFdlIGhhdmUgYSBzdGF0ZSBmb3IgdGhlIHJlcXVlc3RlZCBpbWFnZSwgc28gaXQgaXMgZWl0aGVyIGFscmVhZHkgbG9hZGVkIG9yIGN1cnJlbnRseSBsb2FkaW5nXG4gICAgICBsZXQgc3RhdGUgPSB0aGlzLnN0YXRlW3VybF07XG5cbiAgICAgIC8vIFdlIG92ZXJ3cml0ZSB0aGUgY2FsbGJhY2sgdG8gbWFrZSBzdXJlIHRoYXQgb25seSB0aGUgY2FsbGJhY2sgb2YgdGhlIGxhdGVzdCBjYWxsIGdldHMgZXhlY3V0ZWQuXG4gICAgICAvLyBFYXJsaWVyIGNhbGxiYWNrcyBiZWNvbWUgaW52YWxpZCBvbmNlIGEgbmV3IGxvYWQgY2FsbCBhcnJpdmVzLCBhbmQgdGhleSBhcmUgbm90IGNhbGxlZCBhcyBsb25nIGFzIHRoZSBpbWFnZVxuICAgICAgLy8gaXMgbm90IGxvYWRlZC5cbiAgICAgIHN0YXRlLmxvYWRlZENhbGxiYWNrID0gbG9hZGVkQ2FsbGJhY2s7XG5cbiAgICAgIC8vIFdoZW4gdGhlIGltYWdlIGlzIGFscmVhZHkgbG9hZGVkLCB3ZSBkaXJlY3RseSBleGVjdXRlIHRoZSBjYWxsYmFjayBpbnN0ZWFkIG9mIHdhaXRpbmcgZm9yIHRoZSBsb2FkIGV2ZW50XG4gICAgICBpZiAoc3RhdGUubG9hZGVkKSB7XG4gICAgICAgIHRoaXMuY2FsbExvYWRlZENhbGxiYWNrKHN0YXRlKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGNhbGxMb2FkZWRDYWxsYmFjayhzdGF0ZTogSW1hZ2VMb2FkZXJTdGF0ZSk6IHZvaWQge1xuICAgIHN0YXRlLmxvYWRlZENhbGxiYWNrKHN0YXRlLnVybCwgc3RhdGUud2lkdGgsIHN0YXRlLmhlaWdodCk7XG4gIH1cbn1cbiIsImltcG9ydCB2b2NhYnVsYXJ5RGUgZnJvbSAnLi9sYW5ndWFnZXMvZGUuanNvbic7XG5pbXBvcnQgdm9jYWJ1bGFyeUVuIGZyb20gJy4vbGFuZ3VhZ2VzL2VuLmpzb24nO1xuaW1wb3J0IHZvY2FidWxhcnlFcyBmcm9tICcuL2xhbmd1YWdlcy9lcy5qc29uJztcbmltcG9ydCB2b2NhYnVsYXJ5TmwgZnJvbSAnLi9sYW5ndWFnZXMvbmwuanNvbic7XG5cbmltcG9ydCB7IExvY2FsaXphdGlvbkNvbmZpZyB9IGZyb20gJy4uL3VpbWFuYWdlci5qcyc7XG5cbmV4cG9ydCBjb25zdCBkZWZhdWx0Vm9jYWJ1bGFyaWVzOiBWb2NhYnVsYXJpZXMgPSB7XG4gICdlbic6IHZvY2FidWxhcnlFbixcbiAgJ2RlJzogdm9jYWJ1bGFyeURlLFxuICAnZXMnOiB2b2NhYnVsYXJ5RXMsXG4gICdubCc6IHZvY2FidWxhcnlObCxcbn07XG5cbmNvbnN0IGRlZmF1bHRMb2NhbGl6YXRpb25Db25maWc6IExvY2FsaXphdGlvbkNvbmZpZyA9IHtcbiAgbGFuZ3VhZ2U6ICdlbicsXG4gIHZvY2FidWxhcmllczogZGVmYXVsdFZvY2FidWxhcmllcyxcbn07XG5cbi8qKlxuICogQGNhdGVnb3J5IExvY2FsaXphdGlvblxuICovXG5leHBvcnQgdHlwZSBMb2NhbGl6ZXIgPSAoKSA9PiBzdHJpbmc7XG4vKipcbiAqIEBjYXRlZ29yeSBMb2NhbGl6YXRpb25cbiAqL1xuZXhwb3J0IHR5cGUgTG9jYWxpemFibGVUZXh0ID0gc3RyaW5nIHwgTG9jYWxpemVyO1xuXG4vKipcbiAqIEBjYXRlZ29yeSBMb2NhbGl6YXRpb25cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBWb2NhYnVsYXJ5IHtcbiAgJ3NldHRpbmdzLnZpZGVvLnF1YWxpdHknOiBzdHJpbmc7XG4gICdzZXR0aW5ncy5hdWRpby5xdWFsaXR5Jzogc3RyaW5nO1xuICAnc2V0dGluZ3MuYXVkaW8udHJhY2snOiBzdHJpbmc7XG4gICdzZXR0aW5ncy5hdWRpby5tdXRlJzogc3RyaW5nO1xuICAnc2V0dGluZ3MuYXVkaW8udm9sdW1lJzogc3RyaW5nO1xuICAnc2V0dGluZ3Muc3VidGl0bGVzJzogc3RyaW5nO1xuICAnc2V0dGluZ3Muc3VidGl0bGVzLmZvbnQuY29sb3InOiBzdHJpbmc7XG4gICdzZXR0aW5ncy5zdWJ0aXRsZXMuZm9udC5vcGFjaXR5Jzogc3RyaW5nO1xuICAnc2V0dGluZ3Muc3VidGl0bGVzLmJhY2tncm91bmQuY29sb3InOiBzdHJpbmc7XG4gICdzZXR0aW5ncy5zdWJ0aXRsZXMuYmFja2dyb3VuZC5vcGFjaXR5Jzogc3RyaW5nO1xuICAnc2V0dGluZ3Muc3VidGl0bGVzLmZvbnQuc2l6ZSc6IHN0cmluZztcbiAgJ3NldHRpbmdzLnN1YnRpdGxlcy5jaGFyYWN0ZXJFZGdlJzogc3RyaW5nO1xuICAnc2V0dGluZ3Muc3VidGl0bGVzLmNoYXJhY3RlckVkZ2UucmFpc2VkJzogc3RyaW5nO1xuICAnc2V0dGluZ3Muc3VidGl0bGVzLmNoYXJhY3RlckVkZ2UuZGVwcmVzc2VkJzogc3RyaW5nO1xuICAnc2V0dGluZ3Muc3VidGl0bGVzLmNoYXJhY3RlckVkZ2UudW5pZm9ybSc6IHN0cmluZztcbiAgJ3NldHRpbmdzLnN1YnRpdGxlcy5jaGFyYWN0ZXJFZGdlLmRyb3BzaGFkb3dlZCc6IHN0cmluZztcbiAgJ3NldHRpbmdzLnN1YnRpdGxlcy5mb250LmZhbWlseSc6IHN0cmluZztcbiAgJ3NldHRpbmdzLnN1YnRpdGxlcy5mb250LmZhbWlseS5tb25vc3BhY2Vkc2VyaWYnOiBzdHJpbmc7XG4gICdzZXR0aW5ncy5zdWJ0aXRsZXMuZm9udC5mYW1pbHkucHJvcG9ydGlvbmFsc2VyaWYnOiBzdHJpbmc7XG4gICdzZXR0aW5ncy5zdWJ0aXRsZXMuZm9udC5mYW1pbHkubW9ub3NwYWNlZHNhbnNzZXJpZic6IHN0cmluZztcbiAgJ3NldHRpbmdzLnN1YnRpdGxlcy5mb250LmZhbWlseS5wcm9wb3J0aW9uYWxzYW5zc2VyaWYnOiBzdHJpbmc7XG4gICdzZXR0aW5ncy5zdWJ0aXRsZXMuZm9udC5mYW1pbHkuY2FzdWFsJzogc3RyaW5nO1xuICAnc2V0dGluZ3Muc3VidGl0bGVzLmZvbnQuZmFtaWx5LmN1cnNpdmUnOiBzdHJpbmc7XG4gICdzZXR0aW5ncy5zdWJ0aXRsZXMuZm9udC5mYW1pbHkuc21hbGxjYXBpdGFsJzogc3RyaW5nO1xuICAnc2V0dGluZ3Muc3VidGl0bGVzLndpbmRvdy5jb2xvcic6IHN0cmluZztcbiAgJ3NldHRpbmdzLnN1YnRpdGxlcy53aW5kb3cub3BhY2l0eSc6IHN0cmluZztcbiAgJ3BsYXknOiBzdHJpbmc7XG4gICdzZXR0aW5ncy50aW1lLmhvdXJzJzogc3RyaW5nO1xuICAnc2V0dGluZ3MudGltZS5taW51dGVzJzogc3RyaW5nO1xuICAnc2V0dGluZ3MudGltZS5zZWNvbmRzJzogc3RyaW5nO1xuICAnY29sb3JzLndoaXRlJzogc3RyaW5nO1xuICAnY29sb3JzLmJsYWNrJzogc3RyaW5nO1xuICAnY29sb3JzLnJlZCc6IHN0cmluZztcbiAgJ2NvbG9ycy5ncmVlbic6IHN0cmluZztcbiAgJ2NvbG9ycy5ibHVlJzogc3RyaW5nO1xuICAnY29sb3JzLmN5YW4nOiBzdHJpbmc7XG4gICdjb2xvcnMueWVsbG93Jzogc3RyaW5nO1xuICAnY29sb3JzLm1hZ2VudGEnOiBzdHJpbmc7XG4gICdwZXJjZW50Jzogc3RyaW5nO1xuICAnc2V0dGluZ3MnOiBzdHJpbmc7XG4gICdhZHMucmVtYWluaW5nVGltZSc6IHN0cmluZztcbiAgJ3BpY3R1cmVJblBpY3R1cmUnOiBzdHJpbmc7XG4gICdhcHBsZUFpcnBsYXknOiBzdHJpbmc7XG4gICdnb29nbGVDYXN0Jzogc3RyaW5nO1xuICAndnInOiBzdHJpbmc7XG4gICdvZmYnOiBzdHJpbmc7XG4gICdhdXRvJzogc3RyaW5nO1xuICAnYmFjayc6IHN0cmluZztcbiAgJ3Jlc2V0Jzogc3RyaW5nO1xuICAncmVwbGF5Jzogc3RyaW5nO1xuICAnbm9ybWFsJzogc3RyaW5nO1xuICAnZGVmYXVsdCc6IHN0cmluZztcbiAgJ29wZW4nOiBzdHJpbmc7XG4gICdjbG9zZSc6IHN0cmluZztcbiAgJ2Z1bGxzY3JlZW4nOiBzdHJpbmc7XG4gICdzcGVlZCc6IHN0cmluZztcbiAgJ3BsYXlQYXVzZSc6IHN0cmluZztcbiAgJ2xpdmUnOiBzdHJpbmc7XG4gICdzdWJ0aXRsZS5leGFtcGxlJzogc3RyaW5nO1xuICAnc3VidGl0bGUuc2VsZWN0Jzogc3RyaW5nO1xuICAncGxheWluZ09uJzogc3RyaW5nO1xuICAnY29ubmVjdGluZ1RvJzogc3RyaW5nO1xuICAnd2F0ZXJtYXJrTGluayc6IHN0cmluZztcbiAgJ2NvbnRyb2xCYXInOiBzdHJpbmc7XG4gICdwbGF5ZXInOiBzdHJpbmc7XG4gICdzZWVrQmFyJzogc3RyaW5nO1xuICAnc2Vla0Jhci52YWx1ZSc6IHN0cmluZztcbiAgJ3NlZWtCYXIudGltZXNoaWZ0Jzogc3RyaW5nO1xuICAnc2Vla0Jhci5kdXJhdGlvblRleHQnOiBzdHJpbmc7XG4gICdlY29Nb2RlJzogc3RyaW5nO1xuICAnZWNvTW9kZS50aXRsZSc6IHN0cmluZztcbn1cblxuLyoqXG4gKiBAY2F0ZWdvcnkgTG9jYWxpemF0aW9uXG4gKi9cbmV4cG9ydCB0eXBlIEN1c3RvbVZvY2FidWxhcnk8Vj4gPSBWICYgUGFydGlhbDxWb2NhYnVsYXJ5PjtcblxuLyoqXG4gKiBAY2F0ZWdvcnkgTG9jYWxpemF0aW9uXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgVm9jYWJ1bGFyaWVzIHtcbiAgW2tleTogc3RyaW5nXTogQ3VzdG9tVm9jYWJ1bGFyeTxSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+Pjtcbn1cblxuLyoqXG4gKiBAY2F0ZWdvcnkgTG9jYWxpemF0aW9uXG4gKi9cbmV4cG9ydCBjbGFzcyBJMThuIHtcbiAgcHJpdmF0ZSBsYW5ndWFnZTogc3RyaW5nO1xuICBwcml2YXRlIHZvY2FidWxhcnk6IEN1c3RvbVZvY2FidWxhcnk8UmVjb3JkPHN0cmluZywgc3RyaW5nPj47XG5cbiAgY29uc3RydWN0b3IoY29uZmlnOiBMb2NhbGl6YXRpb25Db25maWcpIHtcbiAgICB0aGlzLnNldENvbmZpZyhjb25maWcpO1xuICB9XG5cbiAgcHVibGljIHNldENvbmZpZyhjb25maWc6IExvY2FsaXphdGlvbkNvbmZpZykge1xuICAgIGNvbnN0IG1lcmdlZENvbmZpZyA9IHsgLi4uZGVmYXVsdExvY2FsaXphdGlvbkNvbmZpZywgLi4uY29uZmlnIH07XG4gICAgY29uc3QgZGV0ZWN0QnJvd3Nlckxhbmd1YWdlID0gbWVyZ2VkQ29uZmlnLmxhbmd1YWdlID09PSAnYXV0byc7XG4gICAgY29uc3Qgdm9jYWJ1bGFyaWVzID0gdGhpcy5tZXJnZVZvY2FidWxhcmllc1dpdGhEZWZhdWx0Vm9jYWJ1bGFyaWVzKG1lcmdlZENvbmZpZy52b2NhYnVsYXJpZXMpO1xuICAgIHRoaXMuaW5pdGlhbGl6ZUxhbmd1YWdlKG1lcmdlZENvbmZpZy5sYW5ndWFnZSwgZGV0ZWN0QnJvd3Nlckxhbmd1YWdlLCB2b2NhYnVsYXJpZXMpO1xuICAgIHRoaXMuaW5pdGlhbGl6ZVZvY2FidWxhcnkodm9jYWJ1bGFyaWVzKTtcbiAgfVxuXG4gIHByaXZhdGUgc3RhdGljIGNvbnRhaW5zTGFuZ3VhZ2Uodm9jYWJ1bGFyaWVzOiBWb2NhYnVsYXJpZXMsIGxhbmd1YWdlOiBzdHJpbmcpIHtcbiAgICByZXR1cm4gdm9jYWJ1bGFyaWVzLmhhc093blByb3BlcnR5KGxhbmd1YWdlKTtcbiAgfVxuXG4gIHByaXZhdGUgbWVyZ2VWb2NhYnVsYXJpZXNXaXRoRGVmYXVsdFZvY2FidWxhcmllcyh2b2NhYnVsYXJpZXM6IFZvY2FidWxhcmllcyA9IHt9KSB7XG4gICAgY29uc3QgcmF3Vm9jYWJ1bGFyaWVzOiBWb2NhYnVsYXJpZXMgPSB7IC4uLmRlZmF1bHRWb2NhYnVsYXJpZXMsIC4uLnZvY2FidWxhcmllcyB9O1xuICAgIHJldHVybiBPYmplY3Qua2V5cyhyYXdWb2NhYnVsYXJpZXMpLnJlZHVjZSgobWVyZ2VkVm9jYWJ1bGFyaWVzLCBsYW5ndWFnZSkgPT4ge1xuICAgICAgbGV0IHZvY2FidWxhcnkgPSByYXdWb2NhYnVsYXJpZXNbbGFuZ3VhZ2VdO1xuICAgICAgaWYgKEkxOG4uY29udGFpbnNMYW5ndWFnZShkZWZhdWx0Vm9jYWJ1bGFyaWVzLCBsYW5ndWFnZSkgJiYgSTE4bi5jb250YWluc0xhbmd1YWdlKHZvY2FidWxhcmllcywgbGFuZ3VhZ2UpKSB7XG4gICAgICAgIHZvY2FidWxhcnkgPSB7IC4uLmRlZmF1bHRWb2NhYnVsYXJpZXNbbGFuZ3VhZ2VdLCAuLi52b2NhYnVsYXJpZXNbbGFuZ3VhZ2VdIH07XG4gICAgICB9XG4gICAgICByZXR1cm4geyAuLi5tZXJnZWRWb2NhYnVsYXJpZXMsIFtsYW5ndWFnZV06IHZvY2FidWxhcnkgfTtcbiAgICB9LCB7fSk7XG4gIH1cblxuICBwcml2YXRlIGluaXRpYWxpemVMYW5ndWFnZShcbiAgICBsYW5ndWFnZTogc3RyaW5nLFxuICAgIGJyb3dzZXJMYW5ndWFnZURldGVjdGlvbkVuYWJsZWQ6IGJvb2xlYW4sXG4gICAgdm9jYWJ1bGFyaWVzOiBWb2NhYnVsYXJpZXMsXG4gICkge1xuICAgIGlmIChicm93c2VyTGFuZ3VhZ2VEZXRlY3Rpb25FbmFibGVkKSB7XG4gICAgICBjb25zdCB1c2VyTGFuZ3VhZ2UgPSB3aW5kb3cubmF2aWdhdG9yLmxhbmd1YWdlO1xuXG4gICAgICBpZiAoSTE4bi5jb250YWluc0xhbmd1YWdlKHZvY2FidWxhcmllcywgdXNlckxhbmd1YWdlKSkge1xuICAgICAgICB0aGlzLmxhbmd1YWdlID0gdXNlckxhbmd1YWdlO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBjb25zdCBzaG9ydGVuZWRVc2VyTGFuZ3VhZ2UgPSB1c2VyTGFuZ3VhZ2Uuc2xpY2UoMCwgMik7XG4gICAgICBpZiAoSTE4bi5jb250YWluc0xhbmd1YWdlKHZvY2FidWxhcmllcywgc2hvcnRlbmVkVXNlckxhbmd1YWdlKSkge1xuICAgICAgICB0aGlzLmxhbmd1YWdlID0gc2hvcnRlbmVkVXNlckxhbmd1YWdlO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5sYW5ndWFnZSA9IGxhbmd1YWdlO1xuICB9XG5cbiAgcHJpdmF0ZSBpbml0aWFsaXplVm9jYWJ1bGFyeSh2b2NhYnVsYXJpZXM6IFZvY2FidWxhcmllcykge1xuICAgIHRoaXMudm9jYWJ1bGFyeSA9IFsnZW4nLCB0aGlzLmxhbmd1YWdlXVxuICAgICAgLnJlZHVjZSgodm9jYWIsIGxhbmcpID0+ICh7IC4uLnZvY2FiLCAuLi4odm9jYWJ1bGFyaWVzW2xhbmddIHx8IHt9KSB9KSwge30pO1xuICB9XG5cbiAgcHJpdmF0ZSByZXBsYWNlVmFyaWFibGVXaXRoUGxhY2Vob2xkZXJJZkV4aXN0cyh0ZXh0OiBzdHJpbmcsIGNvbmZpZzogYW55KSB7XG4gICAgY29uc3QgbWF0Y2hlcyA9IHRleHQubWF0Y2gobmV3IFJlZ0V4cCgne1thLXpBLVowLTldK30nLCAnZycpKTtcbiAgICBpZiAobWF0Y2hlcy5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiB0ZXh0O1xuICAgIH1cblxuICAgIHJldHVybiBtYXRjaGVzXG4gICAgICAubWFwKChtOiBzdHJpbmcpID0+ICh7IG1hdGNoOiBtLCBrZXk6IG0uc2xpY2UoMSwgLTEpIH0pKVxuICAgICAgLnJlZHVjZSgoc3RyLCB7IGtleSwgbWF0Y2ggfSkgPT4gY29uZmlnLmhhc093blByb3BlcnR5KGtleSkgPyBzdHIucmVwbGFjZShtYXRjaCwgY29uZmlnW2tleV0pIDogc3RyLCB0ZXh0KTtcbiAgfVxuXG4gIHB1YmxpYyBnZXRMb2NhbGl6ZXI8ViBleHRlbmRzIEN1c3RvbVZvY2FidWxhcnk8UmVjb3JkPHN0cmluZywgc3RyaW5nPj4gPSBDdXN0b21Wb2NhYnVsYXJ5PFJlY29yZDxzdHJpbmcsIHN0cmluZz4+PihcbiAgICBrZXk6IGtleW9mIFYsXG4gICAgY29uZmlnPzogUmVjb3JkPHN0cmluZywgc3RyaW5nIHwgbnVtYmVyPixcbiAgKTogTG9jYWxpemVyIHtcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgaWYgKGtleSA9PSBudWxsKSB7IC8vIGJlY2F1c2Ugc29tZXRpbWVzIHdlIGNhbGwgdG9Eb21FbGVtZW50KCkgd2l0aG91dCBjb25maWd1cmluZyB0aGUgY29tcG9uZW50IG9yIHNldHRpbmcgdGV4dC4uLlxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgfVxuICAgICAgbGV0IHZvY2FidWxhcnlTdHJpbmcgPSB0aGlzLnZvY2FidWxhcnlba2V5IGFzIHN0cmluZ107XG5cbiAgICAgIGlmICh2b2NhYnVsYXJ5U3RyaW5nID09IG51bGwpIHtcbiAgICAgICAgdm9jYWJ1bGFyeVN0cmluZyA9IGtleSBhcyBzdHJpbmc7XG4gICAgICB9XG5cbiAgICAgIGlmIChjb25maWcgIT0gbnVsbCkge1xuICAgICAgICB2b2NhYnVsYXJ5U3RyaW5nID0gdGhpcy5yZXBsYWNlVmFyaWFibGVXaXRoUGxhY2Vob2xkZXJJZkV4aXN0cyh2b2NhYnVsYXJ5U3RyaW5nLCBjb25maWcpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdm9jYWJ1bGFyeVN0cmluZztcbiAgICB9O1xuICB9XG5cbiAgcHVibGljIHBlcmZvcm1Mb2NhbGl6YXRpb24odGV4dDogTG9jYWxpemFibGVUZXh0KSB7XG4gICAgcmV0dXJuIHR5cGVvZiB0ZXh0ID09PSAnZnVuY3Rpb24nID8gdGV4dCgpIDogdGV4dDtcbiAgfVxufVxuXG4vKipcbiAqIEBjYXRlZ29yeSBMb2NhbGl6YXRpb25cbiAqL1xuZXhwb3J0IGNvbnN0IGkxOG4gPSBuZXcgSTE4bihkZWZhdWx0TG9jYWxpemF0aW9uQ29uZmlnKTtcbiIsIm1vZHVsZS5leHBvcnRzPXtcbiAgXCJzZXR0aW5ncy52aWRlby5xdWFsaXR5XCI6IFwiVmlkZW9xdWFsaXTDpHRcIixcbiAgXCJzZXR0aW5ncy5hdWRpby5xdWFsaXR5XCI6IFwiQXVkaW9xdWFsaXTDpHRcIixcbiAgXCJzZXR0aW5ncy5hdWRpby50cmFja1wiOiBcIkF1ZGlvc3B1clwiLFxuICBcInNwZWVkXCI6IFwiR2VzY2h3aW5kaWdrZWl0XCIsXG4gIFwicGxheVwiOiBcIkFic3BpZWxlblwiLFxuICBcInBhdXNlXCI6IFwiUGF1c2VcIixcbiAgXCJwbGF5UGF1c2VcIjogXCJBYnNwaWVsZW4vUGF1c2VcIixcbiAgXCJvcGVuXCI6IFwiw7ZmZm5lblwiLFxuICBcImNsb3NlXCI6IFwiU2NobGllw59lblwiLFxuICBcInNldHRpbmdzLmF1ZGlvLm11dGVcIjogXCJTdHVtbXNjaGFsdHVuZ1wiLFxuICBcInNldHRpbmdzLmF1ZGlvLnZvbHVtZVwiOiBcIkxhdXRzdMOkcmtlXCIsXG4gIFwicGljdHVyZUluUGljdHVyZVwiOiBcIkJpbGQgaW0gQmlsZFwiLFxuICBcImFwcGxlQWlycGxheVwiOiBcIkFwcGxlIEFpclBsYXlcIixcbiAgXCJnb29nbGVDYXN0XCI6IFwiR29vZ2xlIENhc3RcIixcbiAgXCJ2clwiOiBcIlZSXCIsXG4gIFwic2V0dGluZ3NcIjogXCJFaW5zdGVsbHVuZ2VuXCIsXG4gIFwiZnVsbHNjcmVlblwiOiBcIlZvbGxiaWxkXCIsXG4gIFwib2ZmXCI6IFwiYXVzXCIsXG4gIFwic2V0dGluZ3Muc3VidGl0bGVzXCI6IFwiVW50ZXJ0aXRlbFwiLFxuICBcInNldHRpbmdzLnN1YnRpdGxlcy5mb250LnNpemVcIjogXCJHcsO2w59lXCIsXG4gIFwic2V0dGluZ3Muc3VidGl0bGVzLmZvbnQuZmFtaWx5XCI6IFwiU2NocmlmdGFydFwiLFxuICBcInNldHRpbmdzLnN1YnRpdGxlcy5mb250LmNvbG9yXCI6IFwiRmFyYmVcIixcbiAgXCJzZXR0aW5ncy5zdWJ0aXRsZXMuZm9udC5vcGFjaXR5XCI6IFwiRGVja2tyYWZ0XCIsXG4gIFwic2V0dGluZ3Muc3VidGl0bGVzLmNoYXJhY3RlckVkZ2VcIjogXCJSw6RuZGVyXCIsXG4gIFwic2V0dGluZ3Muc3VidGl0bGVzLmJhY2tncm91bmQuY29sb3JcIjogXCJIaW50ZXJncnVuZGZhcmJlXCIsXG4gIFwic2V0dGluZ3Muc3VidGl0bGVzLmJhY2tncm91bmQub3BhY2l0eVwiOiBcIkhpbnRlcmdydW5kZGVja2tyYWZ0XCIsXG4gIFwic2V0dGluZ3Muc3VidGl0bGVzLndpbmRvdy5jb2xvclwiOiBcIkhpbnRlcmdydW5kZmFyYmVcIixcbiAgXCJzZXR0aW5ncy5zdWJ0aXRsZXMud2luZG93Lm9wYWNpdHlcIjogXCJIaW50ZXJncnVuZGRlY2trcmFmdFwiLFxuICBcInNldHRpbmdzLnRpbWUuaG91cnNcIjogXCJTdHVuZGVuXCIsXG4gIFwic2V0dGluZ3MudGltZS5taW51dGVzXCI6IFwiTWludXRlblwiLFxuICBcInNldHRpbmdzLnRpbWUuc2Vjb25kc1wiOiBcIlNla3VuZGVuXCIsXG4gIFwiYmFja1wiOiBcIlp1csO8Y2tcIixcbiAgXCJyZXNldFwiOiBcIlp1csO8Y2tzZXR6ZW5cIixcbiAgXCJyZXBsYXlcIjogXCJXaWVkZXJob2xlblwiLFxuICBcImFkcy5yZW1haW5pbmdUaW1lXCI6IFwiRGllc2UgQW56ZWlnZSBlbmRldCBpbiB7cmVtYWluaW5nVGltZX0gU2VrdW5kZW5cIixcbiAgXCJkZWZhdWx0XCI6IFwic3RhbmRhcmRcIixcbiAgXCJjb2xvcnMud2hpdGVcIjogXCJ3ZWnDn1wiLFxuICBcImNvbG9ycy5ibGFja1wiOiBcInNjaHdhcnpcIixcbiAgXCJjb2xvcnMucmVkXCI6IFwicm90XCIsXG4gIFwiY29sb3JzLmdyZWVuXCI6IFwiZ3LDvG5cIixcbiAgXCJjb2xvcnMuYmx1ZVwiOiBcImJsYXVcIixcbiAgXCJjb2xvcnMueWVsbG93XCI6IFwiZ2VsYlwiLFxuICBcInN1YnRpdGxlLmV4YW1wbGVcIjogXCJCZWlzcGllbCBVbnRlcnRpdGVsXCIsXG4gIFwic3VidGl0bGUuc2VsZWN0XCI6IFwiVW50ZXJ0aXRlbCBhdXN3w6RobGVuXCIsXG4gIFwicGxheWluZ09uXCI6IFwiU3BpZWx0IGF1ZiA8c3Ryb25nPntjYXN0RGV2aWNlTmFtZX08L3N0cm9uZz5cIixcbiAgXCJjb25uZWN0aW5nVG9cIjogXCJWZXJiaW5kdW5nIG1pdCA8c3Ryb25nPntjYXN0RGV2aWNlTmFtZX08L3N0cm9uZz4gd2lyZCBoZXJnZXN0ZWxsdC4uLlwiLFxuICBcIndhdGVybWFya0xpbmtcIjogXCJMaW5rIHp1bSBIb21lcGFnZVwiLFxuICBcImNvbnRyb2xCYXJcIjogXCJWaWRlb3BsYXllciBLb250cm9sbGVuXCIsXG4gIFwicGxheWVyXCI6IFwiVmlkZW8gcGxheWVyXCIsXG4gIFwic2Vla0JhclwiOiBcIlZpZGVvLVRpbWVsaW5lXCIsXG4gIFwic2Vla0Jhci52YWx1ZVwiOiBcIldlcnRcIixcbiAgXCJzZWVrQmFyLnRpbWVzaGlmdFwiOiBcIlRpbWVzaGlmdFwiLFxuICBcInNlZWtCYXIuZHVyYXRpb25UZXh0XCI6IFwiYXVzXCIsXG4gIFwicXVpY2tzZWVrLmZvcndhcmRcIjogXCJWb3JcIixcbiAgXCJxdWlja3NlZWsucmV3aW5kXCI6IFwiWnVyw7xja1wiLFxuICBcImVjb01vZGVcIjogXCJlY29Nb2RlXCIsXG4gIFwiZWNvTW9kZS50aXRsZVwiOlwiRWNvIE1vZGVcIlxufVxuIiwibW9kdWxlLmV4cG9ydHM9e1xuICBcInNldHRpbmdzLnZpZGVvLnF1YWxpdHlcIjogXCJWaWRlbyBRdWFsaXR5XCIsXG4gIFwic2V0dGluZ3MuYXVkaW8ucXVhbGl0eVwiOiBcIkF1ZGlvIFF1YWxpdHlcIixcbiAgXCJzZXR0aW5ncy5hdWRpby50cmFja1wiOiBcIkF1ZGlvIFRyYWNrXCIsXG4gIFwic2V0dGluZ3MuYXVkaW8ubXV0ZVwiIDogXCJNdXRlXCIsXG4gIFwic2V0dGluZ3MuYXVkaW8udm9sdW1lXCIgOiBcIlZvbHVtZVwiLFxuICBcInNldHRpbmdzLnN1YnRpdGxlcy53aW5kb3cuY29sb3JcIiA6IFwiV2luZG93IGNvbG9yXCIsXG4gIFwic2V0dGluZ3Muc3VidGl0bGVzLndpbmRvdy5vcGFjaXR5XCIgOiBcIldpbmRvdyBvcGFjaXR5XCIsXG4gIFwic2V0dGluZ3Muc3VidGl0bGVzXCIgOiBcIlN1YnRpdGxlc1wiLFxuICBcInNldHRpbmdzLnN1YnRpdGxlcy5mb250LmNvbG9yXCIgOiBcIkZvbnQgY29sb3JcIixcbiAgXCJzZXR0aW5ncy5zdWJ0aXRsZXMuZm9udC5vcGFjaXR5XCIgOiBcIkZvbnQgb3BhY2l0eVwiLFxuICBcInNldHRpbmdzLnN1YnRpdGxlcy5iYWNrZ3JvdW5kLmNvbG9yXCIgOiBcIkJhY2tncm91bmQgY29sb3JcIixcbiAgXCJzZXR0aW5ncy5zdWJ0aXRsZXMuYmFja2dyb3VuZC5vcGFjaXR5XCI6IFwiQmFja2dyb3VuZCBvcGFjaXR5XCIsXG4gIFwiY29sb3JzLndoaXRlXCI6IFwid2hpdGVcIixcbiAgXCJjb2xvcnMuYmxhY2tcIjogXCJibGFja1wiLFxuICBcImNvbG9ycy5yZWRcIjogXCJyZWRcIixcbiAgXCJjb2xvcnMuZ3JlZW5cIjogXCJncmVlblwiLFxuICBcImNvbG9ycy5ibHVlXCI6IFwiYmx1ZVwiLFxuICBcImNvbG9ycy5jeWFuXCI6IFwiY3lhblwiLFxuICBcImNvbG9ycy55ZWxsb3dcIjogXCJ5ZWxsb3dcIixcbiAgXCJjb2xvcnMubWFnZW50YVwiOiBcIm1hZ2VudGFcIixcbiAgXCJwZXJjZW50XCI6IFwie3ZhbHVlfSVcIixcbiAgXCJzZXR0aW5ncy5zdWJ0aXRsZXMuZm9udC5zaXplXCI6IFwiRm9udCBzaXplXCIsXG4gIFwic2V0dGluZ3Muc3VidGl0bGVzLmNoYXJhY3RlckVkZ2VcIjogXCJDaGFyYWN0ZXIgZWRnZVwiLFxuICBcInNldHRpbmdzLnN1YnRpdGxlcy5jaGFyYWN0ZXJFZGdlLnJhaXNlZFwiOiBcInJhaXNlZFwiLFxuICBcInNldHRpbmdzLnN1YnRpdGxlcy5jaGFyYWN0ZXJFZGdlLmRlcHJlc3NlZFwiOiBcImRlcHJlc3NlZFwiLFxuICBcInNldHRpbmdzLnN1YnRpdGxlcy5jaGFyYWN0ZXJFZGdlLnVuaWZvcm1cIjogXCJ1bmlmb3JtXCIsXG4gIFwic2V0dGluZ3Muc3VidGl0bGVzLmNoYXJhY3RlckVkZ2UuZHJvcHNoYWRvd2VkXCI6IFwiZHJvcCBzaGFkb3dlZFwiLFxuICBcInNldHRpbmdzLnN1YnRpdGxlcy5mb250LmZhbWlseVwiOiBcIkZvbnQgZmFtaWx5XCIsXG4gIFwic2V0dGluZ3Muc3VidGl0bGVzLmZvbnQuZmFtaWx5Lm1vbm9zcGFjZWRzZXJpZlwiOiBcIm1vbm9zcGFjZWQgc2VyaWZcIixcbiAgXCJzZXR0aW5ncy5zdWJ0aXRsZXMuZm9udC5mYW1pbHkucHJvcG9ydGlvbmFsc2VyaWZcIjogXCJwcm9wb3J0aW9uYWwgc2VyaWZcIixcbiAgXCJzZXR0aW5ncy5zdWJ0aXRsZXMuZm9udC5mYW1pbHkubW9ub3NwYWNlZHNhbnNzZXJpZlwiOiBcIm1vbm9zcGFjZWQgc2FucyBzZXJpZlwiLFxuICBcInNldHRpbmdzLnN1YnRpdGxlcy5mb250LmZhbWlseS5wcm9wb3J0aW9uYWxzYW5zc2VyaWZcIjogXCJwcm9wb3J0aW9uYWwgc2FucyBzZXJpZlwiLFxuICBcInNldHRpbmdzLnN1YnRpdGxlcy5mb250LmZhbWlseS5jYXN1YWxcIjogXCJjYXN1YWxcIixcbiAgXCJzZXR0aW5ncy5zdWJ0aXRsZXMuZm9udC5mYW1pbHkuY3Vyc2l2ZVwiOiBcImN1cnNpdmVcIixcbiAgXCJzZXR0aW5ncy5zdWJ0aXRsZXMuZm9udC5mYW1pbHkuc21hbGxjYXBpdGFsXCI6IFwic21hbGwgY2FwaXRhbFwiLFxuICBcInNldHRpbmdzLnRpbWUuaG91cnNcIjogXCJIb3Vyc1wiLFxuICBcInNldHRpbmdzLnRpbWUubWludXRlc1wiOiBcIk1pbnV0ZXNcIixcbiAgXCJzZXR0aW5ncy50aW1lLnNlY29uZHNcIjogXCJTZWNvbmRzXCIsXG4gIFwiYWRzLnJlbWFpbmluZ1RpbWVcIjogXCJUaGlzIGFkIHdpbGwgZW5kIGluIHtyZW1haW5pbmdUaW1lfSBzZWNvbmRzLlwiLFxuICBcInNldHRpbmdzXCI6IFwiU2V0dGluZ3NcIixcbiAgXCJmdWxsc2NyZWVuXCIgOiBcIkZ1bGxzY3JlZW5cIixcbiAgXCJzcGVlZFwiOiBcIlNwZWVkXCIsXG4gIFwicGxheVBhdXNlXCIgOiBcIlBsYXkvUGF1c2VcIixcbiAgXCJwbGF5XCI6IFwiUGxheVwiLFxuICBcInBhdXNlXCI6IFwiUGF1c2VcIixcbiAgXCJvcGVuXCI6IFwib3BlblwiLFxuICBcImNsb3NlXCI6IFwiQ2xvc2VcIixcbiAgXCJwaWN0dXJlSW5QaWN0dXJlXCI6IFwiUGljdHVyZS1pbi1QaWN0dXJlXCIsXG4gIFwiYXBwbGVBaXJwbGF5XCIgOiBcIkFwcGxlIEFpclBsYXlcIixcbiAgXCJnb29nbGVDYXN0XCI6IFwiR29vZ2xlIENhc3RcIixcbiAgXCJ2clwiIDogXCJWUlwiLFxuICBcIm9mZlwiOiBcIm9mZlwiLFxuICBcImF1dG9cIjogXCJhdXRvXCIsXG4gIFwiZWNvTW9kZVwiOiBcImVjb01vZGVcIixcbiAgXCJlY29Nb2RlLnRpdGxlXCI6XCJFY28gTW9kZVwiLFxuICBcImJhY2tcIiA6IFwiQmFja1wiLFxuICBcInJlc2V0XCI6IFwiUmVzZXRcIixcbiAgXCJyZXBsYXlcIjogXCJSZXBsYXlcIixcbiAgXCJub3JtYWxcIjogXCJub3JtYWxcIixcbiAgXCJkZWZhdWx0XCI6IFwiZGVmYXVsdFwiLFxuICBcImxpdmVcIjogXCJMaXZlXCIsXG4gIFwic3VidGl0bGUuZXhhbXBsZVwiOiBcImV4YW1wbGUgc3VidGl0bGVcIixcbiAgXCJzdWJ0aXRsZS5zZWxlY3RcIjogXCJTZWxlY3Qgc3VidGl0bGVcIixcbiAgXCJwbGF5aW5nT25cIjogXCJQbGF5aW5nIG9uIDxzdHJvbmc+e2Nhc3REZXZpY2VOYW1lfTwvc3Ryb25nPlwiLFxuICBcImNvbm5lY3RpbmdUb1wiOiBcIkNvbm5lY3RpbmcgdG8gPHN0cm9uZz57Y2FzdERldmljZU5hbWV9PC9zdHJvbmc+Li4uXCIsXG4gIFwid2F0ZXJtYXJrTGlua1wiOiBcIkxpbmsgdG8gSG9tZXBhZ2VcIixcbiAgXCJjb250cm9sQmFyXCI6IFwiVmlkZW8gcGxheWVyIGNvbnRyb2xzXCIsXG4gIFwicGxheWVyXCI6IFwiVmlkZW8gcGxheWVyXCIsXG4gIFwic2Vla0JhclwiOiBcIlZpZGVvIHRpbWVsaW5lXCIsXG4gIFwic2Vla0Jhci52YWx1ZVwiOiBcIlZhbHVlXCIsXG4gIFwic2Vla0Jhci50aW1lc2hpZnRcIjogXCJUaW1lc2hpZnRcIixcbiAgXCJzZWVrQmFyLmR1cmF0aW9uVGV4dFwiOiBcIm91dCBvZlwiLFxuICBcInF1aWNrc2Vlay5mb3J3YXJkXCI6IFwiRmFzdCBGb3J3YXJkXCIsXG4gIFwicXVpY2tzZWVrLnJld2luZFwiOiBcIlJld2luZFwiXG59XG4iLCJtb2R1bGUuZXhwb3J0cz17XG4gIFwic2V0dGluZ3MudmlkZW8ucXVhbGl0eVwiOiBcIkNhbGlkYWQgZGUgVmlkZW9cIixcbiAgXCJzZXR0aW5ncy5hdWRpby5xdWFsaXR5XCI6IFwiQ2FsaWRhZCBkZSBBdWRpb1wiLFxuICBcInNldHRpbmdzLmF1ZGlvLnRyYWNrXCI6IFwiUGlzdGEgZGUgQXVkaW9cIixcbiAgXCJzZXR0aW5ncy5hdWRpby5tdXRlXCIgOiBcIlNpbGVuY2lvXCIsXG4gIFwic2V0dGluZ3MuYXVkaW8udm9sdW1lXCIgOiBcIlZvbHVtZW5cIixcbiAgXCJzZXR0aW5ncy5zdWJ0aXRsZXMud2luZG93LmNvbG9yXCIgOiBcImNvbG9yIGRlIFZlbnRhbmFcIixcbiAgXCJzZXR0aW5ncy5zdWJ0aXRsZXMud2luZG93Lm9wYWNpdHlcIiA6IFwib3BhY2lkYWQgZGUgVmVudGFuYVwiLFxuICBcInNldHRpbmdzLnN1YnRpdGxlc1wiIDogXCJTdWJ0w610dWxvc1wiLFxuICBcInNldHRpbmdzLnN1YnRpdGxlcy5mb250LmNvbG9yXCIgOiBcImNvbG9yIGRlIEZ1ZW50ZVwiLFxuICBcInNldHRpbmdzLnN1YnRpdGxlcy5mb250Lm9wYWNpdHlcIiA6IFwib3BhY2lkYWQgZGUgRnVlbnRlXCIsXG4gIFwic2V0dGluZ3Muc3VidGl0bGVzLmJhY2tncm91bmQuY29sb3JcIiA6IFwiY29sb3IgZGUgRm9uZG9cIixcbiAgXCJzZXR0aW5ncy5zdWJ0aXRsZXMuYmFja2dyb3VuZC5vcGFjaXR5XCI6IFwib3BhY2lkYWQgZGUgRm9uZG9cIixcbiAgXCJjb2xvcnMud2hpdGVcIjogXCJibGFuY29cIixcbiAgXCJjb2xvcnMuYmxhY2tcIjogXCJuZWdyb1wiLFxuICBcImNvbG9ycy5yZWRcIjogXCJyb2pvXCIsXG4gIFwiY29sb3JzLmdyZWVuXCI6IFwidmVyZGVcIixcbiAgXCJjb2xvcnMuYmx1ZVwiOiBcImF6dWxcIixcbiAgXCJjb2xvcnMuY3lhblwiOiBcImNpYW5cIixcbiAgXCJjb2xvcnMueWVsbG93XCI6IFwiYW1hcmlsbG9cIixcbiAgXCJjb2xvcnMubWFnZW50YVwiOiBcIm1hZ2VudGFcIixcbiAgXCJwZXJjZW50XCI6IFwie3ZhbHVlfSVcIixcbiAgXCJzZXR0aW5ncy5zdWJ0aXRsZXMuZm9udC5zaXplXCI6IFwidGFtYcOxbyBkZSBGdWVudGVcIixcbiAgXCJzZXR0aW5ncy5zdWJ0aXRsZXMuY2hhcmFjdGVyRWRnZVwiOiBcImJvcmRlIGRlbCBDYXJhY3RlclwiLFxuICBcInNldHRpbmdzLnN1YnRpdGxlcy5jaGFyYWN0ZXJFZGdlLnJhaXNlZFwiOiBcImFsemFkb1wiLFxuICBcInNldHRpbmdzLnN1YnRpdGxlcy5jaGFyYWN0ZXJFZGdlLmRlcHJlc3NlZFwiOiBcImRpc2NyZXRvXCIsXG4gIFwic2V0dGluZ3Muc3VidGl0bGVzLmNoYXJhY3RlckVkZ2UudW5pZm9ybVwiOiBcInVuaWZvcm1lXCIsXG4gIFwic2V0dGluZ3Muc3VidGl0bGVzLmNoYXJhY3RlckVkZ2UuZHJvcHNoYWRvd2VkXCI6IFwic29tYnJlYWRvXCIsXG4gIFwic2V0dGluZ3Muc3VidGl0bGVzLmZvbnQuZmFtaWx5XCI6IFwidGlwbyBkZSBGdWVudGVcIixcbiAgXCJzZXR0aW5ncy5zdWJ0aXRsZXMuZm9udC5mYW1pbHkubW9ub3NwYWNlZHNlcmlmXCI6IFwibW9ub3NwYWNlZCBzZXJpZlwiLFxuICBcInNldHRpbmdzLnN1YnRpdGxlcy5mb250LmZhbWlseS5wcm9wb3J0aW9uYWxzZXJpZlwiOiBcInByb3BvcnRpb25hbCBzZXJpZlwiLFxuICBcInNldHRpbmdzLnN1YnRpdGxlcy5mb250LmZhbWlseS5tb25vc3BhY2Vkc2Fuc3NlcmlmXCI6IFwibW9ub3NwYWNlZCBzYW5zIHNlcmlmXCIsXG4gIFwic2V0dGluZ3Muc3VidGl0bGVzLmZvbnQuZmFtaWx5LnByb3BvcnRpb25hbHNhbnNzZXJpZlwiOiBcInByb3BvcnRpb25hbCBzYW5zIHNlcmlmXCIsXG4gIFwic2V0dGluZ3Muc3VidGl0bGVzLmZvbnQuZmFtaWx5LmNhc3VhbFwiOiBcImNhc3VhbFwiLFxuICBcInNldHRpbmdzLnN1YnRpdGxlcy5mb250LmZhbWlseS5jdXJzaXZlXCI6IFwiY3Vyc2l2YVwiLFxuICBcInNldHRpbmdzLnN1YnRpdGxlcy5mb250LmZhbWlseS5zbWFsbGNhcGl0YWxcIjogXCJzbWFsbCBjYXBpdGFsXCIsXG4gIFwic2V0dGluZ3MudGltZS5ob3Vyc1wiOiBcIkhvcmFzXCIsXG4gIFwic2V0dGluZ3MudGltZS5taW51dGVzXCI6IFwiTWludXRvc1wiLFxuICBcInNldHRpbmdzLnRpbWUuc2Vjb25kc1wiOiBcIlNlZ3VuZG9zXCIsXG4gIFwiYWRzLnJlbWFpbmluZ1RpbWVcIjogXCJFc3RlIGFudW5jaW8gYWNhYmFyw6EgZW4ge3JlbWFpbmluZ1RpbWV9IHNlZ3VuZG9zLlwiLFxuICBcInNldHRpbmdzXCI6IFwiQ29uZmlndXJhY2nDs25cIixcbiAgXCJmdWxsc2NyZWVuXCIgOiBcIlBhbnRhbGxhIENvbXBsZXRhXCIsXG4gIFwic3BlZWRcIjogXCJWZWxvY2lkYWRcIixcbiAgXCJwbGF5UGF1c2VcIiA6IFwiUmVwcm9kdWNpci9QYXVzYVwiLFxuICBcInBsYXlcIjogXCJSZXByb2R1Y2lyXCIsXG4gIFwicGF1c2VcIjogXCJQYXVzYVwiLFxuICBcIm9wZW5cIjogXCJBYnJpclwiLFxuICBcImNsb3NlXCI6IFwiQ2VycmFyXCIsXG4gIFwicGljdHVyZUluUGljdHVyZVwiOiBcIkltYWdlbiBlbiBJbWFnZW5cIixcbiAgXCJhcHBsZUFpcnBsYXlcIiA6IFwiQXBwbGUgQWlyUGxheVwiLFxuICBcImdvb2dsZUNhc3RcIjogXCJHb29nbGUgQ2FzdFwiLFxuICBcInZyXCIgOiBcIlZSXCIsXG4gIFwib2ZmXCI6IFwib2ZmXCIsXG4gIFwiYXV0b1wiOiBcImF1dG9cIixcbiAgXCJlY29Nb2RlXCI6IFwiZWNvTW9kZVwiLFxuICBcImVjb01vZGUudGl0bGVcIjogXCJFY28gTW9kZVwiLFxuICBcImJhY2tcIiA6IFwiQXRyw6FzXCIsXG4gIFwicmVzZXRcIjogXCJSZWluaWNpYXJcIixcbiAgXCJyZXBsYXlcIjogXCJSZWJvYmluYXJcIixcbiAgXCJub3JtYWxcIjogXCJub3JtYWxcIixcbiAgXCJkZWZhdWx0XCI6IFwicHJlZGV0ZXJtaW5hZG9cIixcbiAgXCJsaXZlXCI6IFwiRGlyZWN0b1wiLFxuICBcInN1YnRpdGxlLmV4YW1wbGVcIjogXCJFamVtcGxvIGRlIFN1YnTDrXR1bG9cIixcbiAgXCJzdWJ0aXRsZS5zZWxlY3RcIjogXCJTZWxlY2Npb25hciBzdWJ0w610dWxvXCIsXG4gIFwicGxheWluZ09uXCI6IFwiUmVwcm9kdWNpZW5kbyBlbiA8c3Ryb25nPntjYXN0RGV2aWNlTmFtZX08L3N0cm9uZz5cIixcbiAgXCJjb25uZWN0aW5nVG9cIjogXCJDb25lY3RhbmRvIGEgPHN0cm9uZz57Y2FzdERldmljZU5hbWV9PC9zdHJvbmc+Li4uXCIsXG4gIFwid2F0ZXJtYXJrTGlua1wiOiBcIkVubGFjZSBhbCBpbmljaW9cIixcbiAgXCJjb250cm9sQmFyXCI6IFwiQ29udHJvbGVzIGRlbCBSZXByb2R1Y3RvclwiLFxuICBcInBsYXllclwiOiBcIlJlcHJvZHVjdG9yIGRlIFZpZGVvXCIsXG4gIFwic2Vla0JhclwiOiBcIkzDrW5lYSBkZSBUaWVtcG9cIixcbiAgXCJzZWVrQmFyLnZhbHVlXCI6IFwicG9zaWNpw7NuXCIsXG4gIFwic2Vla0Jhci50aW1lc2hpZnRcIjogXCJjYW1iaW8gZGUgcG9zaWNpw7NuXCIsXG4gIFwic2Vla0Jhci5kdXJhdGlvblRleHRcIjogXCJkZVwiLFxuICBcInF1aWNrc2Vlay5mb3J3YXJkXCI6IFwiQWRlbGFudGFyXCIsXG4gIFwicXVpY2tzZWVrLnJld2luZFwiOiBcIlJlYm9iaW5hclwiXG59IiwibW9kdWxlLmV4cG9ydHM9e1xuICBcInNldHRpbmdzLnZpZGVvLnF1YWxpdHlcIjogXCJWaWRlb2t3YWxpdGVpdFwiLFxuICBcInNldHRpbmdzLmF1ZGlvLnF1YWxpdHlcIjogXCJBdWRpb2t3YWxpdGVpdFwiLFxuICBcInNldHRpbmdzLmF1ZGlvLnRyYWNrXCI6IFwiQXVkaW9zcG9vclwiLFxuICBcInNldHRpbmdzLmF1ZGlvLm11dGVcIjogXCJEZW1wZW5cIixcbiAgXCJzZXR0aW5ncy5hdWRpby52b2x1bWVcIjogXCJWb2x1bWVcIixcbiAgXCJzZXR0aW5ncy5zdWJ0aXRsZXMud2luZG93LmNvbG9yXCI6IFwiVmVuc3RlcmtsZXVyXCIsXG4gIFwic2V0dGluZ3Muc3VidGl0bGVzLndpbmRvdy5vcGFjaXR5XCI6IFwiVmVuc3RlciBkb29yemljaHRpZ2hlaWRcIixcbiAgXCJzZXR0aW5ncy5zdWJ0aXRsZXNcIjogXCJPbmRlcnRpdGVsaW5nXCIsXG4gIFwic2V0dGluZ3Muc3VidGl0bGVzLmZvbnQuY29sb3JcIjogXCJMZXR0ZXJ0eXBlIGtsZXVyXCIsXG4gIFwic2V0dGluZ3Muc3VidGl0bGVzLmZvbnQub3BhY2l0eVwiOiBcIkxldHRlcnR5cGUgZG9vcnppY2h0aWdoZWlkXCIsXG4gIFwic2V0dGluZ3Muc3VidGl0bGVzLmJhY2tncm91bmQuY29sb3JcIjogXCJBY2h0ZXJncm9uZGtsZXVyXCIsXG4gIFwic2V0dGluZ3Muc3VidGl0bGVzLmJhY2tncm91bmQub3BhY2l0eVwiOiBcIkFjaHRlcmdyb25kIGRvb3J6aWNodGlnaGVpZFwiLFxuICBcImNvbG9ycy53aGl0ZVwiOiBcIndpdFwiLFxuICBcImNvbG9ycy5ibGFja1wiOiBcInp3YXJ0XCIsXG4gIFwiY29sb3JzLnJlZFwiOiBcInJvb2RcIixcbiAgXCJjb2xvcnMuZ3JlZW5cIjogXCJncm9lblwiLFxuICBcImNvbG9ycy5ibHVlXCI6IFwiYmxhdXdcIixcbiAgXCJjb2xvcnMuY3lhblwiOiBcImN5YWFuXCIsXG4gIFwiY29sb3JzLnllbGxvd1wiOiBcImdlZWxcIixcbiAgXCJjb2xvcnMubWFnZW50YVwiOiBcIm1hZ2VudGFcIixcbiAgXCJwZXJjZW50XCI6IFwie3ZhbHVlfSVcIixcbiAgXCJzZXR0aW5ncy5zdWJ0aXRsZXMuZm9udC5zaXplXCI6IFwiTGV0dGVydHlwZSBncm9vdHRlXCIsXG4gIFwic2V0dGluZ3Muc3VidGl0bGVzLmNoYXJhY3RlckVkZ2VcIjogXCJMZXR0ZXJ0eXBlIHJhbmRcIixcbiAgXCJzZXR0aW5ncy5zdWJ0aXRsZXMuY2hhcmFjdGVyRWRnZS5yYWlzZWRcIjogXCJ2ZXJob29nZFwiLFxuICBcInNldHRpbmdzLnN1YnRpdGxlcy5jaGFyYWN0ZXJFZGdlLmRlcHJlc3NlZFwiOiBcInZlcmxhYWdkXCIsXG4gIFwic2V0dGluZ3Muc3VidGl0bGVzLmNoYXJhY3RlckVkZ2UudW5pZm9ybVwiOiBcInVuaWZvcm1cIixcbiAgXCJzZXR0aW5ncy5zdWJ0aXRsZXMuY2hhcmFjdGVyRWRnZS5kcm9wc2hhZG93ZWRcIjogXCJzY2hhZHV3XCIsXG4gIFwic2V0dGluZ3Muc3VidGl0bGVzLmZvbnQuZmFtaWx5XCI6IFwiU3RhbmRhYXJkIGxldHRlcnR5cGVcIixcbiAgXCJzZXR0aW5ncy5zdWJ0aXRsZXMuZm9udC5mYW1pbHkubW9ub3NwYWNlZHNlcmlmXCI6IFwibW9ub3NwYWNlIHNlcmlmXCIsXG4gIFwic2V0dGluZ3Muc3VidGl0bGVzLmZvbnQuZmFtaWx5LnByb3BvcnRpb25hbHNlcmlmXCI6IFwicHJvcG9ydGlvbmVlbCBzZXJpZlwiLFxuICBcInNldHRpbmdzLnN1YnRpdGxlcy5mb250LmZhbWlseS5tb25vc3BhY2Vkc2Fuc3NlcmlmXCI6IFwibW9ub3NwYWNlIHNhbnMtc2VyaWZcIixcbiAgXCJzZXR0aW5ncy5zdWJ0aXRsZXMuZm9udC5mYW1pbHkucHJvcG9ydGlvbmFsc2Fuc3NlcmlmXCI6IFwicHJvcG9ydGlvbmVlbCBzYW5zLXNlcmlmXCIsXG4gIFwic2V0dGluZ3Muc3VidGl0bGVzLmZvbnQuZmFtaWx5LmNhc3VhbFwiOiBcImNhc3VhbFwiLFxuICBcInNldHRpbmdzLnN1YnRpdGxlcy5mb250LmZhbWlseS5jdXJzaXZlXCI6IFwiY3Vyc2llZlwiLFxuICBcInNldHRpbmdzLnN1YnRpdGxlcy5mb250LmZhbWlseS5zbWFsbGNhcGl0YWxcIjogXCJrbGVpbmUgaG9vZmRsZXR0ZXJzXCIsXG4gIFwic2V0dGluZ3MudGltZS5ob3Vyc1wiOiBcIlVyZW5cIixcbiAgXCJzZXR0aW5ncy50aW1lLm1pbnV0ZXNcIjogXCJNaW51dGVuXCIsXG4gIFwic2V0dGluZ3MudGltZS5zZWNvbmRzXCI6IFwiU2Vjb25kZW5cIixcbiAgXCJhZHMucmVtYWluaW5nVGltZVwiOiBcIkRlemUgYWR2ZXJ0ZW50aWUgZWluZGlndCBpbiB7cmVtYWluaW5nVGltZX0gc2Vjb25kZW4uXCIsXG4gIFwic2V0dGluZ3NcIjogXCJJbnN0ZWxsaW5nZW5cIixcbiAgXCJmdWxsc2NyZWVuXCI6IFwiVm9sbGVkaWcgc2NoZXJtXCIsXG4gIFwic3BlZWRcIjogXCJTbmVsaGVpZFwiLFxuICBcInBsYXlQYXVzZVwiOiBcIkFmc3BlbGVuL1BhdXplcmVuXCIsXG4gIFwicGxheVwiOiBcIkFmc3BlbGVuXCIsXG4gIFwicGF1c2VcIjogXCJQYXV6ZXJlblwiLFxuICBcIm9wZW5cIjogXCJPcGVuZW5cIixcbiAgXCJjbG9zZVwiOiBcIlNsdWl0ZW5cIixcbiAgXCJwaWN0dXJlSW5QaWN0dXJlXCI6IFwiUGljdHVyZS1pbi1QaWN0dXJlXCIsXG4gIFwiYXBwbGVBaXJwbGF5XCI6IFwiQXBwbGUgQWlyUGxheVwiLFxuICBcImdvb2dsZUNhc3RcIjogXCJHb29nbGUgQ2FzdFwiLFxuICBcInZyXCI6IFwiVlJcIixcbiAgXCJvZmZcIjogXCJ1aXRcIixcbiAgXCJhdXRvXCI6IFwiYXV0b21hdGlzY2hcIixcbiAgXCJlY29Nb2RlXCI6IFwiRWNvLW1vZHVzXCIsXG4gIFwiZWNvTW9kZS50aXRsZVwiOiBcIkVjby1tb2R1c1wiLFxuICBcImJhY2tcIjogXCJUZXJ1Z1wiLFxuICBcInJlc2V0XCI6IFwiUmVzZXRcIixcbiAgXCJyZXBsYXlcIjogXCJPcG5pZXV3IGFmc3BlbGVuXCIsXG4gIFwibm9ybWFsXCI6IFwibm9ybWFhbFwiLFxuICBcImRlZmF1bHRcIjogXCJzdGFuZGFhcmRcIixcbiAgXCJsaXZlXCI6IFwiTGl2ZVwiLFxuICBcInN1YnRpdGxlLmV4YW1wbGVcIjogXCJ2b29yYmVlbGQgb25kZXJ0aXRlbGluZ1wiLFxuICBcInN1YnRpdGxlLnNlbGVjdFwiOiBcIlNlbGVjdGVlciBvbmRlcnRpdGVsaW5nXCIsXG4gIFwicGxheWluZ09uXCI6IFwiU3BlZWx0IGFmIG9wIDxzdHJvbmc+e2Nhc3REZXZpY2VOYW1lfTwvc3Ryb25nPlwiLFxuICBcImNvbm5lY3RpbmdUb1wiOiBcIlZlcmJpbmRlbiBtZXQgPHN0cm9uZz57Y2FzdERldmljZU5hbWV9PC9zdHJvbmc+Li4uXCIsXG4gIFwid2F0ZXJtYXJrTGlua1wiOiBcIkxpbmsgbmFhciBob21lcGFnZVwiLFxuICBcImNvbnRyb2xCYXJcIjogXCJWaWRlb3NwZWxlciBiZWRpZW5pbmdcIixcbiAgXCJwbGF5ZXJcIjogXCJWaWRlb3NwZWxlclwiLFxuICBcInNlZWtCYXJcIjogXCJWaWRlbyB0aWpkbGlqblwiLFxuICBcInNlZWtCYXIudmFsdWVcIjogXCJXYWFyZGVcIixcbiAgXCJzZWVrQmFyLnRpbWVzaGlmdFwiOiBcIlRpamR2ZXJzY2h1aXZpbmdcIixcbiAgXCJzZWVrQmFyLmR1cmF0aW9uVGV4dFwiOiBcInZhblwiLFxuICBcInF1aWNrc2Vlay5mb3J3YXJkXCI6IFwiVm9vcnVpdHNwb2VsZW5cIixcbiAgXCJxdWlja3NlZWsucmV3aW5kXCI6IFwiVGVydWdzcG9lbGVuXCJcbn0iLCJleHBvcnQgY29uc3QgdmVyc2lvbjogc3RyaW5nID0gJ3t7VkVSU0lPTn19Jztcbi8vIE1hbmFnZW1lbnRcbmV4cG9ydCAqIGZyb20gJy4vdWltYW5hZ2VyJztcbmV4cG9ydCAqIGZyb20gJy4vdWljb25maWcnO1xuLy8gRmFjdG9yaWVzXG5leHBvcnQgeyBVSUZhY3RvcnkgfSBmcm9tICcuL3VpZmFjdG9yeSc7XG5leHBvcnQgeyBEZW1vRmFjdG9yeSB9IGZyb20gJy4vZGVtb2ZhY3RvcnknO1xuLy8gVXRpbHNcbmV4cG9ydCB7IEFycmF5VXRpbHMgfSBmcm9tICcuL2FycmF5dXRpbHMnO1xuZXhwb3J0IHsgU3RyaW5nVXRpbHMgfSBmcm9tICcuL3N0cmluZ3V0aWxzJztcbmV4cG9ydCB7IFBsYXllclV0aWxzIH0gZnJvbSAnLi9wbGF5ZXJ1dGlscyc7XG5leHBvcnQgeyBVSVV0aWxzIH0gZnJvbSAnLi91aXV0aWxzJztcbmV4cG9ydCB7IEJyb3dzZXJVdGlscyB9IGZyb20gJy4vYnJvd3NlcnV0aWxzJztcbmV4cG9ydCB7IFN0b3JhZ2VVdGlscyB9IGZyb20gJy4vc3RvcmFnZXV0aWxzJztcbmV4cG9ydCB7IEVycm9yVXRpbHMgfSBmcm9tICcuL2Vycm9ydXRpbHMnO1xuLy8gTG9jYWxpemF0aW9uXG5leHBvcnQgeyBpMThuLCBJMThuLCBWb2NhYnVsYXJ5LCBWb2NhYnVsYXJpZXMsIEN1c3RvbVZvY2FidWxhcnksIExvY2FsaXphYmxlVGV4dCwgTG9jYWxpemVyIH0gZnJvbSAnLi9sb2NhbGl6YXRpb24vaTE4bic7XG4vLyBTcGF0aWFsIE5hdmlnYXRpb25cbmV4cG9ydCB7IFNwYXRpYWxOYXZpZ2F0aW9uIH0gZnJvbSAnLi9zcGF0aWFsbmF2aWdhdGlvbi9zcGF0aWFsbmF2aWdhdGlvbic7XG5leHBvcnQgeyBOYXZpZ2F0aW9uR3JvdXAgfSBmcm9tICcuL3NwYXRpYWxuYXZpZ2F0aW9uL25hdmlnYXRpb25ncm91cCc7XG5leHBvcnQgeyBSb290TmF2aWdhdGlvbkdyb3VwIH0gZnJvbSAnLi9zcGF0aWFsbmF2aWdhdGlvbi9yb290bmF2aWdhdGlvbmdyb3VwJztcbmV4cG9ydCB7IExpc3ROYXZpZ2F0aW9uR3JvdXAsIExpc3RPcmllbnRhdGlvbiB9IGZyb20gJy4vc3BhdGlhbG5hdmlnYXRpb24vTGlzdE5hdmlnYXRpb25Hcm91cCc7XG4vLyBDb21wb25lbnRzXG5leHBvcnQgeyBCdXR0b24sIEJ1dHRvbkNvbmZpZyB9IGZyb20gJy4vY29tcG9uZW50cy9idXR0b24nO1xuZXhwb3J0IHsgQ29udHJvbEJhciwgQ29udHJvbEJhckNvbmZpZyB9IGZyb20gJy4vY29tcG9uZW50cy9jb250cm9sYmFyJztcbmV4cG9ydCB7IEZ1bGxzY3JlZW5Ub2dnbGVCdXR0b24gfSBmcm9tICcuL2NvbXBvbmVudHMvZnVsbHNjcmVlbnRvZ2dsZWJ1dHRvbic7XG5leHBvcnQgeyBIdWdlUGxheWJhY2tUb2dnbGVCdXR0b24gfSBmcm9tICcuL2NvbXBvbmVudHMvaHVnZXBsYXliYWNrdG9nZ2xlYnV0dG9uJztcbmV4cG9ydCB7IFBsYXliYWNrVGltZUxhYmVsLCBQbGF5YmFja1RpbWVMYWJlbENvbmZpZywgUGxheWJhY2tUaW1lTGFiZWxNb2RlIH0gZnJvbSAnLi9jb21wb25lbnRzL3BsYXliYWNrdGltZWxhYmVsJztcbmV4cG9ydCB7IFBsYXliYWNrVG9nZ2xlQnV0dG9uLCBQbGF5YmFja1RvZ2dsZUJ1dHRvbkNvbmZpZyB9IGZyb20gJy4vY29tcG9uZW50cy9wbGF5YmFja3RvZ2dsZWJ1dHRvbic7XG5leHBvcnQgeyBTZWVrQmFyLCBTZWVrQmFyQ29uZmlnLCBTZWVrUHJldmlld0V2ZW50QXJncywgU2Vla0Jhck1hcmtlciB9IGZyb20gJy4vY29tcG9uZW50cy9zZWVrYmFyJztcbmV4cG9ydCB7IFNlbGVjdEJveCB9IGZyb20gJy4vY29tcG9uZW50cy9zZWxlY3Rib3gnO1xuZXhwb3J0IHsgSXRlbVNlbGVjdGlvbkxpc3QgfSBmcm9tICcuL2NvbXBvbmVudHMvaXRlbXNlbGVjdGlvbmxpc3QnO1xuZXhwb3J0IHsgU2V0dGluZ3NQYW5lbCwgU2V0dGluZ3NQYW5lbENvbmZpZyB9IGZyb20gJy4vY29tcG9uZW50cy9zZXR0aW5nc3BhbmVsJztcbmV4cG9ydCB7IFNldHRpbmdzVG9nZ2xlQnV0dG9uLCBTZXR0aW5nc1RvZ2dsZUJ1dHRvbkNvbmZpZyB9IGZyb20gJy4vY29tcG9uZW50cy9zZXR0aW5nc3RvZ2dsZWJ1dHRvbic7XG5leHBvcnQgeyBUb2dnbGVCdXR0b24sIFRvZ2dsZUJ1dHRvbkNvbmZpZyB9IGZyb20gJy4vY29tcG9uZW50cy90b2dnbGVidXR0b24nO1xuZXhwb3J0IHsgVmlkZW9RdWFsaXR5U2VsZWN0Qm94IH0gZnJvbSAnLi9jb21wb25lbnRzL3ZpZGVvcXVhbGl0eXNlbGVjdGJveCc7XG5leHBvcnQgeyBWb2x1bWVUb2dnbGVCdXR0b24gfSBmcm9tICcuL2NvbXBvbmVudHMvdm9sdW1ldG9nZ2xlYnV0dG9uJztcbmV4cG9ydCB7IFZSVG9nZ2xlQnV0dG9uIH0gZnJvbSAnLi9jb21wb25lbnRzL3ZydG9nZ2xlYnV0dG9uJztcbmV4cG9ydCB7IFdhdGVybWFyaywgV2F0ZXJtYXJrQ29uZmlnIH0gZnJvbSAnLi9jb21wb25lbnRzL3dhdGVybWFyayc7XG5leHBvcnQgeyBVSUNvbnRhaW5lciwgVUlDb250YWluZXJDb25maWcgfSBmcm9tICcuL2NvbXBvbmVudHMvdWljb250YWluZXInO1xuZXhwb3J0IHsgQ29udGFpbmVyLCBDb250YWluZXJDb25maWcgfSBmcm9tICcuL2NvbXBvbmVudHMvY29udGFpbmVyJztcbmV4cG9ydCB7IExhYmVsLCBMYWJlbENvbmZpZyB9IGZyb20gJy4vY29tcG9uZW50cy9sYWJlbCc7XG5leHBvcnQgeyBBdWRpb1F1YWxpdHlTZWxlY3RCb3ggfSBmcm9tICcuL2NvbXBvbmVudHMvYXVkaW9xdWFsaXR5c2VsZWN0Ym94JztcbmV4cG9ydCB7IEF1ZGlvVHJhY2tTZWxlY3RCb3ggfSBmcm9tICcuL2NvbXBvbmVudHMvYXVkaW90cmFja3NlbGVjdGJveCc7XG5leHBvcnQgeyBDYXN0U3RhdHVzT3ZlcmxheSB9IGZyb20gJy4vY29tcG9uZW50cy9jYXN0c3RhdHVzb3ZlcmxheSc7XG5leHBvcnQgeyBDYXN0VG9nZ2xlQnV0dG9uIH0gZnJvbSAnLi9jb21wb25lbnRzL2Nhc3R0b2dnbGVidXR0b24nO1xuZXhwb3J0IHsgQ29tcG9uZW50LCBDb21wb25lbnRDb25maWcsIENvbXBvbmVudEhvdmVyQ2hhbmdlZEV2ZW50QXJncyB9IGZyb20gJy4vY29tcG9uZW50cy9jb21wb25lbnQnO1xuZXhwb3J0IHsgRXJyb3JNZXNzYWdlT3ZlcmxheSwgRXJyb3JNZXNzYWdlT3ZlcmxheUNvbmZpZywgRXJyb3JNZXNzYWdlVHJhbnNsYXRvciwgRXJyb3JNZXNzYWdlTWFwIH0gZnJvbSAnLi9jb21wb25lbnRzL2Vycm9ybWVzc2FnZW92ZXJsYXknO1xuZXhwb3J0IHsgUmVjb21tZW5kYXRpb25PdmVybGF5IH0gZnJvbSAnLi9jb21wb25lbnRzL3JlY29tbWVuZGF0aW9ub3ZlcmxheSc7XG5leHBvcnQgeyBTZWVrQmFyTGFiZWwsIFNlZWtCYXJMYWJlbENvbmZpZyB9IGZyb20gJy4vY29tcG9uZW50cy9zZWVrYmFybGFiZWwnO1xuZXhwb3J0IHsgU3VidGl0bGVPdmVybGF5IH0gZnJvbSAnLi9jb21wb25lbnRzL3N1YnRpdGxlb3ZlcmxheSc7XG5leHBvcnQgeyBTdWJ0aXRsZVNlbGVjdEJveCB9IGZyb20gJy4vY29tcG9uZW50cy9zdWJ0aXRsZXNlbGVjdGJveCc7XG5leHBvcnQgeyBUaXRsZUJhciwgVGl0bGVCYXJDb25maWcgfSBmcm9tICcuL2NvbXBvbmVudHMvdGl0bGViYXInO1xuZXhwb3J0IHsgVm9sdW1lQ29udHJvbEJ1dHRvbiwgVm9sdW1lQ29udHJvbEJ1dHRvbkNvbmZpZyB9IGZyb20gJy4vY29tcG9uZW50cy92b2x1bWVjb250cm9sYnV0dG9uJztcbmV4cG9ydCB7IENsaWNrT3ZlcmxheSwgQ2xpY2tPdmVybGF5Q29uZmlnIH0gZnJvbSAnLi9jb21wb25lbnRzL2NsaWNrb3ZlcmxheSc7XG5leHBvcnQgeyBBZFNraXBCdXR0b24sIEFkU2tpcEJ1dHRvbkNvbmZpZyB9IGZyb20gJy4vY29tcG9uZW50cy9hZHNraXBidXR0b24nO1xuZXhwb3J0IHsgQWRNZXNzYWdlTGFiZWwgfSBmcm9tICcuL2NvbXBvbmVudHMvYWRtZXNzYWdlbGFiZWwnO1xuZXhwb3J0IHsgQWRDbGlja092ZXJsYXkgfSBmcm9tICcuL2NvbXBvbmVudHMvYWRjbGlja292ZXJsYXknO1xuZXhwb3J0IHsgUGxheWJhY2tTcGVlZFNlbGVjdEJveCB9IGZyb20gJy4vY29tcG9uZW50cy9wbGF5YmFja3NwZWVkc2VsZWN0Ym94JztcbmV4cG9ydCB7IEh1Z2VSZXBsYXlCdXR0b24gfSBmcm9tICcuL2NvbXBvbmVudHMvaHVnZXJlcGxheWJ1dHRvbic7XG5leHBvcnQgeyBCdWZmZXJpbmdPdmVybGF5LCBCdWZmZXJpbmdPdmVybGF5Q29uZmlnIH0gZnJvbSAnLi9jb21wb25lbnRzL2J1ZmZlcmluZ292ZXJsYXknO1xuZXhwb3J0IHsgQ2FzdFVJQ29udGFpbmVyIH0gZnJvbSAnLi9jb21wb25lbnRzL2Nhc3R1aWNvbnRhaW5lcic7XG5leHBvcnQgeyBQbGF5YmFja1RvZ2dsZU92ZXJsYXksIFBsYXliYWNrVG9nZ2xlT3ZlcmxheUNvbmZpZyB9IGZyb20gJy4vY29tcG9uZW50cy9wbGF5YmFja3RvZ2dsZW92ZXJsYXknO1xuZXhwb3J0IHsgQ2xvc2VCdXR0b24sIENsb3NlQnV0dG9uQ29uZmlnIH0gZnJvbSAnLi9jb21wb25lbnRzL2Nsb3NlYnV0dG9uJztcbmV4cG9ydCB7IE1ldGFkYXRhTGFiZWwsIE1ldGFkYXRhTGFiZWxDb250ZW50LCBNZXRhZGF0YUxhYmVsQ29uZmlnIH0gZnJvbSAnLi9jb21wb25lbnRzL21ldGFkYXRhbGFiZWwnO1xuZXhwb3J0IHsgQWlyUGxheVRvZ2dsZUJ1dHRvbiB9IGZyb20gJy4vY29tcG9uZW50cy9haXJwbGF5dG9nZ2xlYnV0dG9uJztcbmV4cG9ydCB7IFZvbHVtZVNsaWRlciwgVm9sdW1lU2xpZGVyQ29uZmlnIH0gZnJvbSAnLi9jb21wb25lbnRzL3ZvbHVtZXNsaWRlcic7XG5leHBvcnQgeyBQaWN0dXJlSW5QaWN0dXJlVG9nZ2xlQnV0dG9uIH0gZnJvbSAnLi9jb21wb25lbnRzL3BpY3R1cmVpbnBpY3R1cmV0b2dnbGVidXR0b24nO1xuZXhwb3J0IHsgU3BhY2VyIH0gZnJvbSAnLi9jb21wb25lbnRzL3NwYWNlcic7XG5leHBvcnQgeyBCYWNrZ3JvdW5kQ29sb3JTZWxlY3RCb3ggfSBmcm9tICcuL2NvbXBvbmVudHMvc3VidGl0bGVzZXR0aW5ncy9iYWNrZ3JvdW5kY29sb3JzZWxlY3Rib3gnO1xuZXhwb3J0IHsgQmFja2dyb3VuZE9wYWNpdHlTZWxlY3RCb3ggfSBmcm9tICcuL2NvbXBvbmVudHMvc3VidGl0bGVzZXR0aW5ncy9iYWNrZ3JvdW5kb3BhY2l0eXNlbGVjdGJveCc7XG5leHBvcnQgeyBDaGFyYWN0ZXJFZGdlU2VsZWN0Qm94IH0gZnJvbSAnLi9jb21wb25lbnRzL3N1YnRpdGxlc2V0dGluZ3MvY2hhcmFjdGVyZWRnZXNlbGVjdGJveCc7XG5leHBvcnQgeyBGb250Q29sb3JTZWxlY3RCb3ggfSBmcm9tICcuL2NvbXBvbmVudHMvc3VidGl0bGVzZXR0aW5ncy9mb250Y29sb3JzZWxlY3Rib3gnO1xuZXhwb3J0IHsgRm9udEZhbWlseVNlbGVjdEJveCB9IGZyb20gJy4vY29tcG9uZW50cy9zdWJ0aXRsZXNldHRpbmdzL2ZvbnRmYW1pbHlzZWxlY3Rib3gnO1xuZXhwb3J0IHsgRm9udE9wYWNpdHlTZWxlY3RCb3ggfSBmcm9tICcuL2NvbXBvbmVudHMvc3VidGl0bGVzZXR0aW5ncy9mb250b3BhY2l0eXNlbGVjdGJveCc7XG5leHBvcnQgeyBGb250U2l6ZVNlbGVjdEJveCB9IGZyb20gJy4vY29tcG9uZW50cy9zdWJ0aXRsZXNldHRpbmdzL2ZvbnRzaXplc2VsZWN0Ym94JztcbmV4cG9ydCB7IFN1YnRpdGxlU2V0dGluZ1NlbGVjdEJveCB9IGZyb20gJy4vY29tcG9uZW50cy9zdWJ0aXRsZXNldHRpbmdzL3N1YnRpdGxlc2V0dGluZ3NlbGVjdGJveCc7XG5leHBvcnQgeyBTdWJ0aXRsZVNldHRpbmdzTGFiZWwgfSBmcm9tICcuL2NvbXBvbmVudHMvc3VidGl0bGVzZXR0aW5ncy9zdWJ0aXRsZXNldHRpbmdzbGFiZWwnO1xuZXhwb3J0IHsgV2luZG93Q29sb3JTZWxlY3RCb3ggfSBmcm9tICcuL2NvbXBvbmVudHMvc3VidGl0bGVzZXR0aW5ncy93aW5kb3djb2xvcnNlbGVjdGJveCc7XG5leHBvcnQgeyBXaW5kb3dPcGFjaXR5U2VsZWN0Qm94IH0gZnJvbSAnLi9jb21wb25lbnRzL3N1YnRpdGxlc2V0dGluZ3Mvd2luZG93b3BhY2l0eXNlbGVjdGJveCc7XG5leHBvcnQgeyBTdWJ0aXRsZVNldHRpbmdzUmVzZXRCdXR0b24gfSBmcm9tICcuL2NvbXBvbmVudHMvc3VidGl0bGVzZXR0aW5ncy9zdWJ0aXRsZXNldHRpbmdzcmVzZXRidXR0b24nO1xuZXhwb3J0IHsgTGlzdEJveCB9IGZyb20gJy4vY29tcG9uZW50cy9saXN0Ym94JztcbmV4cG9ydCB7IFN1YnRpdGxlTGlzdEJveCB9IGZyb20gJy4vY29tcG9uZW50cy9zdWJ0aXRsZWxpc3Rib3gnO1xuZXhwb3J0IHsgQXVkaW9UcmFja0xpc3RCb3ggfSBmcm9tICcuL2NvbXBvbmVudHMvYXVkaW90cmFja2xpc3Rib3gnO1xuZXhwb3J0IHsgU2V0dGluZ3NQYW5lbFBhZ2UgfSBmcm9tICcuL2NvbXBvbmVudHMvc2V0dGluZ3NwYW5lbHBhZ2UnO1xuZXhwb3J0IHsgU2V0dGluZ3NQYW5lbFBhZ2VCYWNrQnV0dG9uIH0gZnJvbSAnLi9jb21wb25lbnRzL3NldHRpbmdzcGFuZWxwYWdlYmFja2J1dHRvbic7XG5leHBvcnQgeyBTZXR0aW5nc1BhbmVsUGFnZU9wZW5CdXR0b24gfSBmcm9tICcuL2NvbXBvbmVudHMvc2V0dGluZ3NwYW5lbHBhZ2VvcGVuYnV0dG9uJztcbmV4cG9ydCB7IFN1YnRpdGxlU2V0dGluZ3NQYW5lbFBhZ2UsIFN1YnRpdGxlU2V0dGluZ3NQYW5lbFBhZ2VDb25maWcgfSBmcm9tICcuL2NvbXBvbmVudHMvc3VidGl0bGVzZXR0aW5ncy9zdWJ0aXRsZXNldHRpbmdzcGFuZWxwYWdlJztcbmV4cG9ydCB7IFNldHRpbmdzUGFuZWxJdGVtIH0gZnJvbSAnLi9jb21wb25lbnRzL3NldHRpbmdzcGFuZWxpdGVtJztcbmV4cG9ydCB7IFJlcGxheUJ1dHRvbiB9IGZyb20gJy4vY29tcG9uZW50cy9yZXBsYXlidXR0b24nO1xuZXhwb3J0IHsgUXVpY2tTZWVrQnV0dG9uLCBRdWlja1NlZWtCdXR0b25Db25maWcgfSBmcm9tICcuL2NvbXBvbmVudHMvcXVpY2tzZWVrYnV0dG9uJztcbmV4cG9ydCB7IExpc3RTZWxlY3RvciwgTGlzdFNlbGVjdG9yQ29uZmlnLCBMaXN0SXRlbSwgTGlzdEl0ZW1GaWx0ZXIsIExpc3RJdGVtTGFiZWxUcmFuc2xhdG9yIH0gZnJvbSAnLi9jb21wb25lbnRzL2xpc3RzZWxlY3Rvcic7XG5cbi8vIE9iamVjdC5hc3NpZ24gcG9seWZpbGwgZm9yIEVTNS9JRTlcbi8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2RlL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL09iamVjdC9hc3NpZ25cbmlmICh0eXBlb2YgT2JqZWN0LmFzc2lnbiAhPT0gJ2Z1bmN0aW9uJykge1xuICBPYmplY3QuYXNzaWduID0gZnVuY3Rpb24odGFyZ2V0OiBhbnkpIHtcbiAgICAndXNlIHN0cmljdCc7XG4gICAgaWYgKHRhcmdldCA9PSBudWxsKSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdDYW5ub3QgY29udmVydCB1bmRlZmluZWQgb3IgbnVsbCB0byBvYmplY3QnKTtcbiAgICB9XG5cbiAgICB0YXJnZXQgPSBPYmplY3QodGFyZ2V0KTtcbiAgICBmb3IgKGxldCBpbmRleCA9IDE7IGluZGV4IDwgYXJndW1lbnRzLmxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgbGV0IHNvdXJjZSA9IGFyZ3VtZW50c1tpbmRleF07XG4gICAgICBpZiAoc291cmNlICE9IG51bGwpIHtcbiAgICAgICAgZm9yIChsZXQga2V5IGluIHNvdXJjZSkge1xuICAgICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7XG4gICAgICAgICAgICB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdGFyZ2V0O1xuICB9O1xufVxuIiwiaW1wb3J0IHsgUGxheWVyQVBJLCBQbGF5ZXJFdmVudCwgUGxheWVyRXZlbnRCYXNlLCBQbGF5ZXJFdmVudENhbGxiYWNrIH0gZnJvbSAnYml0bW92aW4tcGxheWVyJztcbmltcG9ydCB7IFdyYXBwZWRQbGF5ZXIgfSBmcm9tICcuL3VpbWFuYWdlcic7XG5cbmV4cG9ydCBlbnVtIE1vYmlsZVYzUGxheWVyRXZlbnQge1xuICBTb3VyY2VFcnJvciA9ICdzb3VyY2VlcnJvcicsXG4gIFBsYXllckVycm9yID0gJ3BsYXllcmVycm9yJyxcbiAgUGxheWxpc3RUcmFuc2l0aW9uID0gJ3BsYXlsaXN0dHJhbnNpdGlvbicsXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgTW9iaWxlVjNQbGF5ZXJFcnJvckV2ZW50IGV4dGVuZHMgUGxheWVyRXZlbnRCYXNlIHtcbiAgY29kZTogbnVtYmVyO1xuICBtZXNzYWdlOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgTW9iaWxlVjNTb3VyY2VFcnJvckV2ZW50IGV4dGVuZHMgUGxheWVyRXZlbnRCYXNlIHtcbiAgY29kZTogbnVtYmVyO1xuICBtZXNzYWdlOiBzdHJpbmc7XG59XG5cbmV4cG9ydCB0eXBlIE1vYmlsZVYzUGxheWVyRXZlbnRUeXBlID0gUGxheWVyRXZlbnQgfCBNb2JpbGVWM1BsYXllckV2ZW50O1xuXG5leHBvcnQgaW50ZXJmYWNlIE1vYmlsZVYzUGxheWVyQVBJIGV4dGVuZHMgUGxheWVyQVBJIHtcbiAgb24oZXZlbnRUeXBlOiBNb2JpbGVWM1BsYXllckV2ZW50VHlwZSwgY2FsbGJhY2s6IFBsYXllckV2ZW50Q2FsbGJhY2spOiB2b2lkO1xuICBleHBvcnRzOiBQbGF5ZXJBUElbJ2V4cG9ydHMnXSAmIHsgUGxheWVyRXZlbnQ6IE1vYmlsZVYzUGxheWVyRXZlbnRUeXBlIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc01vYmlsZVYzUGxheWVyQVBJKHBsYXllcjogV3JhcHBlZFBsYXllciB8IFBsYXllckFQSSB8IE1vYmlsZVYzUGxheWVyQVBJKTogcGxheWVyIGlzIE1vYmlsZVYzUGxheWVyQVBJIHtcbiAgZm9yIChjb25zdCBrZXkgaW4gTW9iaWxlVjNQbGF5ZXJFdmVudCkge1xuICAgIGlmIChNb2JpbGVWM1BsYXllckV2ZW50Lmhhc093blByb3BlcnR5KGtleSkgJiYgIXBsYXllci5leHBvcnRzLlBsYXllckV2ZW50Lmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gdHJ1ZTtcbn1cbiIsImltcG9ydCB7RXZlbnQsIEV2ZW50RGlzcGF0Y2hlciwgTm9BcmdzfSBmcm9tICcuL2V2ZW50ZGlzcGF0Y2hlcic7XG5pbXBvcnQge0Jyb3dzZXJVdGlsc30gZnJvbSAnLi9icm93c2VydXRpbHMnO1xuaW1wb3J0IHsgVUlJbnN0YW5jZU1hbmFnZXIgfSBmcm9tICcuL3VpbWFuYWdlcic7XG5pbXBvcnQgeyBQbGF5ZXJBUEksIFRpbWVSYW5nZSB9IGZyb20gJ2JpdG1vdmluLXBsYXllcic7XG5cbi8qKlxuICogQGNhdGVnb3J5IFV0aWxzXG4gKi9cbmV4cG9ydCBuYW1lc3BhY2UgUGxheWVyVXRpbHMge1xuXG4gIGV4cG9ydCBlbnVtIFBsYXllclN0YXRlIHtcbiAgICBJZGxlLFxuICAgIFByZXBhcmVkLFxuICAgIFBsYXlpbmcsXG4gICAgUGF1c2VkLFxuICAgIEZpbmlzaGVkLFxuICB9XG5cbiAgZXhwb3J0IGZ1bmN0aW9uIGlzVGltZVNoaWZ0QXZhaWxhYmxlKHBsYXllcjogUGxheWVyQVBJKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHBsYXllci5pc0xpdmUoKSAmJiBwbGF5ZXIuZ2V0TWF4VGltZVNoaWZ0KCkgIT09IDA7XG4gIH1cblxuICBleHBvcnQgZnVuY3Rpb24gZ2V0U3RhdGUocGxheWVyOiBQbGF5ZXJBUEkpOiBQbGF5ZXJTdGF0ZSB7XG4gICAgaWYgKHBsYXllci5oYXNFbmRlZCgpKSB7XG4gICAgICByZXR1cm4gUGxheWVyU3RhdGUuRmluaXNoZWQ7XG4gICAgfSBlbHNlIGlmIChwbGF5ZXIuaXNQbGF5aW5nKCkpIHtcbiAgICAgIHJldHVybiBQbGF5ZXJTdGF0ZS5QbGF5aW5nO1xuICAgIH0gZWxzZSBpZiAocGxheWVyLmlzUGF1c2VkKCkpIHtcbiAgICAgIHJldHVybiBQbGF5ZXJTdGF0ZS5QYXVzZWQ7XG4gICAgfSBlbHNlIGlmIChwbGF5ZXIuZ2V0U291cmNlKCkgIT0gbnVsbCkge1xuICAgICAgcmV0dXJuIFBsYXllclN0YXRlLlByZXBhcmVkO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gUGxheWVyU3RhdGUuSWRsZTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgY3VycmVudFRpbWUgLSBzZWVrYWJsZVJhbmdlLnN0YXJ0LiBUaGlzIGVuc3VyZXMgYSB1c2VyLWZyaWVuZGx5IGN1cnJlbnRUaW1lIGFmdGVyIGEgbGl2ZSBzdHJlYW1cbiAgICogdHJhbnNpdGlvbmVkIHRvIFZvRC5cbiAgICogQHBhcmFtIHBsYXllclxuICAgKi9cbiAgZXhwb3J0IGZ1bmN0aW9uIGdldEN1cnJlbnRUaW1lUmVsYXRpdmVUb1NlZWthYmxlUmFuZ2UocGxheWVyOiBQbGF5ZXJBUEkpOiBudW1iZXIge1xuICAgIGNvbnN0IGN1cnJlbnRUaW1lID0gcGxheWVyLmdldEN1cnJlbnRUaW1lKCk7XG4gICAgaWYgKHBsYXllci5pc0xpdmUoKSkge1xuICAgICAgcmV0dXJuIGN1cnJlbnRUaW1lO1xuICAgIH1cblxuICAgIGNvbnN0IHNlZWthYmxlUmFuZ2VTdGFydCA9IFBsYXllclV0aWxzLmdldFNlZWthYmxlUmFuZ2VTdGFydChwbGF5ZXIsIDApO1xuICAgIHJldHVybiBjdXJyZW50VGltZSAtIHNlZWthYmxlUmFuZ2VTdGFydDtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBzdGFydCB2YWx1ZSBvZiB0aGUgc2Vla2FibGUgcmFuZ2Ugb3IgdGhlIGRlZmF1bHRWYWx1ZSBpZiBubyBzZWVrYWJsZVJhbmdlIGlzIHByZXNlbnQuXG4gICAqIEZvciBub3cgdGhpcyBoYXBwZW5zIG9ubHkgaW4gY29tYmluYXRpb24gd2l0aCBNb2JpbGUgU0RLcy5cbiAgICpcbiAgICogVE9ETzogcmVtb3ZlIHRoaXMgZnVuY3Rpb24gaW4gbmV4dCBtYWpvciByZWxlYXNlXG4gICAqXG4gICAqIEBwYXJhbSBwbGF5ZXJcbiAgICogQHBhcmFtIGRlZmF1bHRWYWx1ZVxuICAgKi9cbiAgZXhwb3J0IGZ1bmN0aW9uIGdldFNlZWthYmxlUmFuZ2VTdGFydChwbGF5ZXI6IFBsYXllckFQSSwgZGVmYXVsdFZhbHVlOiBudW1iZXIgPSAwKSB7XG4gICAgcmV0dXJuIHBsYXllci5nZXRTZWVrYWJsZVJhbmdlKCkgJiYgcGxheWVyLmdldFNlZWthYmxlUmFuZ2UoKS5zdGFydCB8fCBkZWZhdWx0VmFsdWU7XG4gIH1cblxuICAvKipcbiAgICogQ2FsY3VsYXRlcyBwbGF5ZXIgc2Vla2FibGUgdGltZSByYW5nZSBmb3IgbGl2ZS5cbiAgICogQXMgdGhlIHBsYXllciByZXR1cm5zIGB7IHN0YXJ0OiAtMSwgZW5kOiAtMSB9YCBmb3IgbGl2ZSBzdHJlYW1zIHdlIG5lZWQgdG8gY2FsY3VsYXRlIHRoZSBgc2Vla2FibGVSYW5nZWAgYmFzZWQgb24gYG1heFRpbWVzaGlmdGAuXG4gICAqXG4gICAqIEBwYXJhbSBwbGF5ZXJcbiAgICovXG4gIGV4cG9ydCBmdW5jdGlvbiBnZXRTZWVrYWJsZVJhbmdlUmVzcGVjdGluZ0xpdmUocGxheWVyOiBQbGF5ZXJBUEkpOiBUaW1lUmFuZ2Uge1xuICAgIGlmICghcGxheWVyLmlzTGl2ZSgpKSB7XG4gICAgICByZXR1cm4gcGxheWVyLmdldFNlZWthYmxlUmFuZ2UoKTtcbiAgICB9XG5cbiAgICBjb25zdCBjdXJyZW50VGltZXNoaWZ0ID0gLXBsYXllci5nZXRUaW1lU2hpZnQoKTtcbiAgICBjb25zdCBtYXhUaW1lc2hpZnQgPSAtcGxheWVyLmdldE1heFRpbWVTaGlmdCgpO1xuICAgIGNvbnN0IGN1cnJlbnRUaW1lID0gcGxheWVyLmdldEN1cnJlbnRUaW1lKCk7XG5cbiAgICBjb25zdCBlbmQgPSBjdXJyZW50VGltZSArIChjdXJyZW50VGltZXNoaWZ0KTtcbiAgICBjb25zdCBzdGFydCA9IGN1cnJlbnRUaW1lIC0gKG1heFRpbWVzaGlmdCAtIGN1cnJlbnRUaW1lc2hpZnQpO1xuXG4gICAgcmV0dXJuIHsgc3RhcnQsIGVuZCB9O1xuICB9XG5cbiAgZXhwb3J0IGludGVyZmFjZSBUaW1lU2hpZnRBdmFpbGFiaWxpdHlDaGFuZ2VkQXJncyBleHRlbmRzIE5vQXJncyB7XG4gICAgdGltZVNoaWZ0QXZhaWxhYmxlOiBib29sZWFuO1xuICB9XG5cbiAgZXhwb3J0IGNsYXNzIFRpbWVTaGlmdEF2YWlsYWJpbGl0eURldGVjdG9yIHtcblxuICAgIHByaXZhdGUgcGxheWVyOiBQbGF5ZXJBUEk7XG4gICAgcHJpdmF0ZSB0aW1lU2hpZnRBdmFpbGFibGU6IGJvb2xlYW47XG4gICAgcHJpdmF0ZSB0aW1lU2hpZnRBdmFpbGFiaWxpdHlDaGFuZ2VkRXZlbnQgPSBuZXcgRXZlbnREaXNwYXRjaGVyPFBsYXllckFQSSwgVGltZVNoaWZ0QXZhaWxhYmlsaXR5Q2hhbmdlZEFyZ3M+KCk7XG5cbiAgICBjb25zdHJ1Y3RvcihwbGF5ZXI6IFBsYXllckFQSSkge1xuICAgICAgdGhpcy5wbGF5ZXIgPSBwbGF5ZXI7XG4gICAgICB0aGlzLnRpbWVTaGlmdEF2YWlsYWJsZSA9IHVuZGVmaW5lZDtcblxuICAgICAgbGV0IHRpbWVTaGlmdERldGVjdG9yID0gKCkgPT4ge1xuICAgICAgICB0aGlzLmRldGVjdCgpO1xuICAgICAgfTtcbiAgICAgIC8vIFRyeSB0byBkZXRlY3QgdGltZXNoaWZ0IGF2YWlsYWJpbGl0eSB3aGVuIHNvdXJjZSBpcyBsb2FkZWQsIHdoaWNoIHdvcmtzIGZvciBEQVNIIHN0cmVhbXNcbiAgICAgIHBsYXllci5vbihwbGF5ZXIuZXhwb3J0cy5QbGF5ZXJFdmVudC5Tb3VyY2VMb2FkZWQsIHRpbWVTaGlmdERldGVjdG9yKTtcbiAgICAgIC8vIFdpdGggSExTL05hdGl2ZVBsYXllciBzdHJlYW1zLCBnZXRNYXhUaW1lU2hpZnQgY2FuIGJlIDAgYmVmb3JlIHRoZSBidWZmZXIgZmlsbHMsIHNvIHdlIG5lZWQgdG8gYWRkaXRpb25hbGx5XG4gICAgICAvLyBjaGVjayB0aW1lc2hpZnQgYXZhaWxhYmlsaXR5IGluIFRpbWVDaGFuZ2VkXG4gICAgICBwbGF5ZXIub24ocGxheWVyLmV4cG9ydHMuUGxheWVyRXZlbnQuVGltZUNoYW5nZWQsIHRpbWVTaGlmdERldGVjdG9yKTtcbiAgICB9XG5cbiAgICBkZXRlY3QoKTogdm9pZCB7XG4gICAgICBpZiAodGhpcy5wbGF5ZXIuaXNMaXZlKCkpIHtcbiAgICAgICAgbGV0IHRpbWVTaGlmdEF2YWlsYWJsZU5vdyA9IFBsYXllclV0aWxzLmlzVGltZVNoaWZ0QXZhaWxhYmxlKHRoaXMucGxheWVyKTtcblxuICAgICAgICAvLyBXaGVuIHRoZSBhdmFpbGFiaWxpdHkgY2hhbmdlcywgd2UgZmlyZSB0aGUgZXZlbnRcbiAgICAgICAgaWYgKHRpbWVTaGlmdEF2YWlsYWJsZU5vdyAhPT0gdGhpcy50aW1lU2hpZnRBdmFpbGFibGUpIHtcbiAgICAgICAgICB0aGlzLnRpbWVTaGlmdEF2YWlsYWJpbGl0eUNoYW5nZWRFdmVudC5kaXNwYXRjaCh0aGlzLnBsYXllciwgeyB0aW1lU2hpZnRBdmFpbGFibGU6IHRpbWVTaGlmdEF2YWlsYWJsZU5vdyB9KTtcbiAgICAgICAgICB0aGlzLnRpbWVTaGlmdEF2YWlsYWJsZSA9IHRpbWVTaGlmdEF2YWlsYWJsZU5vdztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGdldCBvblRpbWVTaGlmdEF2YWlsYWJpbGl0eUNoYW5nZWQoKTogRXZlbnQ8UGxheWVyQVBJLCBUaW1lU2hpZnRBdmFpbGFiaWxpdHlDaGFuZ2VkQXJncz4ge1xuICAgICAgcmV0dXJuIHRoaXMudGltZVNoaWZ0QXZhaWxhYmlsaXR5Q2hhbmdlZEV2ZW50LmdldEV2ZW50KCk7XG4gICAgfVxuICB9XG5cbiAgZXhwb3J0IGludGVyZmFjZSBMaXZlU3RyZWFtRGV0ZWN0b3JFdmVudEFyZ3MgZXh0ZW5kcyBOb0FyZ3Mge1xuICAgIGxpdmU6IGJvb2xlYW47XG4gIH1cblxuICAvKipcbiAgICogRGV0ZWN0cyBjaGFuZ2VzIG9mIHRoZSBzdHJlYW0gdHlwZSwgaS5lLiBjaGFuZ2VzIG9mIHRoZSByZXR1cm4gdmFsdWUgb2YgdGhlIHBsYXllciNpc0xpdmUgbWV0aG9kLlxuICAgKiBOb3JtYWxseSwgYSBzdHJlYW0gY2Fubm90IGNoYW5nZSBpdHMgdHlwZSBkdXJpbmcgcGxheWJhY2ssIGl0J3MgZWl0aGVyIFZPRCBvciBsaXZlLiBEdWUgdG8gYnVncyBvbiBzb21lXG4gICAqIHBsYXRmb3JtcyBvciBicm93c2VycywgaXQgY2FuIHN0aWxsIGNoYW5nZS4gSXQgaXMgdGhlcmVmb3JlIHVucmVsaWFibGUgdG8ganVzdCBjaGVjayAjaXNMaXZlIGFuZCB0aGlzIGRldGVjdG9yXG4gICAqIHNob3VsZCBiZSB1c2VkIGFzIGEgd29ya2Fyb3VuZCBpbnN0ZWFkLlxuICAgKlxuICAgKiBBZGRpdGlvbmFsbHkgc3RhcnRpbmcgd2l0aCBwbGF5ZXIgdjguMTkuMCB3ZSBoYXZlIHRoZSB1c2UtY2FzZSB0aGF0IGEgbGl2ZSBzdHJlYW0gY2hhbmdlcyBpbnRvIGEgdm9kLlxuICAgKiBUaGUgRHVyYXRpb25DaGFuZ2VkIGV2ZW50IGluZGljYXRlcyB0aGlzIHN3aXRjaC5cbiAgICpcbiAgICogS25vd24gY2FzZXM6XG4gICAqXG4gICAqIC0gSExTIFZPRCBvbiBBbmRyb2lkIDQuM1xuICAgKiBWaWRlbyBkdXJhdGlvbiBpcyBpbml0aWFsbHkgJ0luZmluaXR5JyBhbmQgb25seSBnZXRzIGF2YWlsYWJsZSBhZnRlciBwbGF5YmFjayBzdGFydHMsIHNvIHN0cmVhbXMgYXJlIHdyb25nbHlcbiAgICogcmVwb3J0ZWQgYXMgJ2xpdmUnIGJlZm9yZSBwbGF5YmFjayAodGhlIGxpdmUtY2hlY2sgaW4gdGhlIHBsYXllciBjaGVja3MgZm9yIGluZmluaXRlIGR1cmF0aW9uKS5cbiAgICpcbiAgICogQGRlcHJlY2F0ZWQgc2luY2UgVUkgdjMuOS4wIGluIGNvbWJpbmF0aW9uIHdpdGggcGxheWVyIHY4LjE5LjAgdXNlIFBsYXllckV2ZW50LkR1cmF0aW9uQ2hhbmdlZCBpbnN0ZWFkXG4gICAqXG4gICAqIFRPRE86IHJlbW92ZSB0aGlzIGNsYXNzIGluIG5leHQgbWFqb3IgcmVsZWFzZVxuICAgKi9cbiAgZXhwb3J0IGNsYXNzIExpdmVTdHJlYW1EZXRlY3RvciB7XG5cbiAgICBwcml2YXRlIHBsYXllcjogUGxheWVyQVBJO1xuICAgIHByaXZhdGUgbGl2ZTogYm9vbGVhbjtcbiAgICBwcml2YXRlIGxpdmVDaGFuZ2VkRXZlbnQgPSBuZXcgRXZlbnREaXNwYXRjaGVyPFBsYXllckFQSSwgTGl2ZVN0cmVhbURldGVjdG9yRXZlbnRBcmdzPigpO1xuICAgIHByaXZhdGUgdWltYW5hZ2VyOiBVSUluc3RhbmNlTWFuYWdlcjtcblxuICAgIGNvbnN0cnVjdG9yKHBsYXllcjogUGxheWVyQVBJLCB1aW1hbmFnZXI6IFVJSW5zdGFuY2VNYW5hZ2VyKSB7XG4gICAgICB0aGlzLnBsYXllciA9IHBsYXllcjtcbiAgICAgIHRoaXMudWltYW5hZ2VyID0gdWltYW5hZ2VyO1xuICAgICAgdGhpcy5saXZlID0gdW5kZWZpbmVkO1xuXG4gICAgICBsZXQgbGl2ZURldGVjdG9yID0gKCkgPT4ge1xuICAgICAgICB0aGlzLmRldGVjdCgpO1xuICAgICAgfTtcbiAgICAgIHRoaXMudWltYW5hZ2VyLmdldENvbmZpZygpLmV2ZW50cy5vblVwZGF0ZWQuc3Vic2NyaWJlKGxpdmVEZXRlY3Rvcik7XG4gICAgICAvLyBSZS1ldmFsdWF0ZSB3aGVuIHBsYXliYWNrIHN0YXJ0c1xuICAgICAgcGxheWVyLm9uKHBsYXllci5leHBvcnRzLlBsYXllckV2ZW50LlBsYXksIGxpdmVEZXRlY3Rvcik7XG5cbiAgICAgIC8vIEhMUyBsaXZlIGRldGVjdGlvbiB3b3JrYXJvdW5kIGZvciBBbmRyb2lkOlxuICAgICAgLy8gQWxzbyByZS1ldmFsdWF0ZSBkdXJpbmcgcGxheWJhY2ssIGJlY2F1c2UgdGhhdCBpcyB3aGVuIHRoZSBsaXZlIGZsYWcgbWlnaHQgY2hhbmdlLlxuICAgICAgLy8gKERvaW5nIGl0IG9ubHkgaW4gQW5kcm9pZCBDaHJvbWUgc2F2ZXMgdW5uZWNlc3Nhcnkgb3ZlcmhlYWQgb24gb3RoZXIgcGxhdGZvcm1zKVxuICAgICAgaWYgKEJyb3dzZXJVdGlscy5pc0FuZHJvaWQgJiYgQnJvd3NlclV0aWxzLmlzQ2hyb21lKSB7XG4gICAgICAgIHBsYXllci5vbihwbGF5ZXIuZXhwb3J0cy5QbGF5ZXJFdmVudC5UaW1lQ2hhbmdlZCwgbGl2ZURldGVjdG9yKTtcbiAgICAgIH1cblxuICAgICAgLy8gRHVyYXRpb25DaGFuZ2VkIGV2ZW50IHdhcyBpbnRyb2R1Y2VkIHdpdGggcGxheWVyIHY4LjE5LjBcbiAgICAgIGlmIChwbGF5ZXIuZXhwb3J0cy5QbGF5ZXJFdmVudC5EdXJhdGlvbkNoYW5nZWQpIHtcbiAgICAgICAgcGxheWVyLm9uKHBsYXllci5leHBvcnRzLlBsYXllckV2ZW50LkR1cmF0aW9uQ2hhbmdlZCwgbGl2ZURldGVjdG9yKTtcbiAgICAgIH1cblxuICAgICAgLy8gQWQgdmlkZW8ncyBpc0xpdmUoKSBtaWdodCBiZSBkaWZmZXJlbnQgdGhhbiB0aGUgYWN0dWFsIHZpZGVvJ3MgaXNMaXZlKCkuXG4gICAgICBwbGF5ZXIub24ocGxheWVyLmV4cG9ydHMuUGxheWVyRXZlbnQuQWRCcmVha1N0YXJ0ZWQsIGxpdmVEZXRlY3Rvcik7XG4gICAgICBwbGF5ZXIub24ocGxheWVyLmV4cG9ydHMuUGxheWVyRXZlbnQuQWRCcmVha0ZpbmlzaGVkLCBsaXZlRGV0ZWN0b3IpO1xuICAgIH1cblxuICAgIGRldGVjdCgpOiB2b2lkIHtcbiAgICAgIGxldCBsaXZlTm93ID0gdGhpcy5wbGF5ZXIuaXNMaXZlKCk7XG5cbiAgICAgIC8vIENvbXBhcmUgY3VycmVudCB0byBwcmV2aW91cyBsaXZlIHN0YXRlIGZsYWcgYW5kIGZpcmUgZXZlbnQgd2hlbiBpdCBjaGFuZ2VzLiBTaW5jZSB3ZSBpbml0aWFsaXplIHRoZSBmbGFnXG4gICAgICAvLyB3aXRoIHVuZGVmaW5lZCwgdGhlcmUgaXMgYWx3YXlzIGF0IGxlYXN0IGFuIGluaXRpYWwgZXZlbnQgZmlyZWQgdGhhdCB0ZWxscyBsaXN0ZW5lcnMgdGhlIGxpdmUgc3RhdGUuXG4gICAgICBpZiAobGl2ZU5vdyAhPT0gdGhpcy5saXZlKSB7XG4gICAgICAgIHRoaXMubGl2ZUNoYW5nZWRFdmVudC5kaXNwYXRjaCh0aGlzLnBsYXllciwgeyBsaXZlOiBsaXZlTm93IH0pO1xuICAgICAgICB0aGlzLmxpdmUgPSBsaXZlTm93O1xuICAgICAgfVxuICAgIH1cblxuICAgIGdldCBvbkxpdmVDaGFuZ2VkKCk6IEV2ZW50PFBsYXllckFQSSwgTGl2ZVN0cmVhbURldGVjdG9yRXZlbnRBcmdzPiB7XG4gICAgICByZXR1cm4gdGhpcy5saXZlQ2hhbmdlZEV2ZW50LmdldEV2ZW50KCk7XG4gICAgfVxuICB9XG5cbiAgZXhwb3J0IGZ1bmN0aW9uIGNsYW1wVmFsdWVUb1JhbmdlKHZhbHVlOiBudW1iZXIsIGJvdW5kYXJ5MTogbnVtYmVyLCBib3VuZGFyeTI6IG51bWJlcik6IG51bWJlciB7XG4gICAgY29uc3QgbG93ZXJCb3VuZGFyeSA9IE1hdGgubWluKGJvdW5kYXJ5MSwgYm91bmRhcnkyKTtcbiAgICBjb25zdCB1cHBlckJvdW5kYXJ5ID0gTWF0aC5tYXgoYm91bmRhcnkxLCBib3VuZGFyeTIpO1xuICAgIHJldHVybiBNYXRoLm1pbihNYXRoLm1heCh2YWx1ZSwgbG93ZXJCb3VuZGFyeSksIHVwcGVyQm91bmRhcnkpO1xuICB9XG59XG4iLCJpbXBvcnQgeyBOYXZpZ2F0aW9uR3JvdXAgfSBmcm9tICcuL25hdmlnYXRpb25ncm91cCc7XG5pbXBvcnQgeyBBY3Rpb24sIERpcmVjdGlvbiB9IGZyb20gJy4vdHlwZXMnO1xuaW1wb3J0IHsgQ29udGFpbmVyIH0gZnJvbSAnLi4vY29tcG9uZW50cy9jb250YWluZXInO1xuaW1wb3J0IHsgQ29tcG9uZW50IH0gZnJvbSAnLi4vY29tcG9uZW50cy9jb21wb25lbnQnO1xuXG5leHBvcnQgZW51bSBMaXN0T3JpZW50YXRpb24ge1xuICBIb3Jpem9udGFsID0gJ2hvcml6b250YWwnLFxuICBWZXJ0aWNhbCA9ICd2ZXJ0aWNhbCcsXG59XG5cbi8qKlxuICogQGNhdGVnb3J5IENvbXBvbmVudHNcbiAqL1xuZXhwb3J0IGNsYXNzIExpc3ROYXZpZ2F0aW9uR3JvdXAgZXh0ZW5kcyBOYXZpZ2F0aW9uR3JvdXAge1xuICBwcml2YXRlIHJlYWRvbmx5IGxpc3ROYXZpZ2F0aW9uRGlyZWN0aW9uczogRGlyZWN0aW9uW107XG5cbiAgY29uc3RydWN0b3Iob3JpZW50YXRpb246IExpc3RPcmllbnRhdGlvbiwgY29udGFpbmVyOiBDb250YWluZXI8dW5rbm93bj4sIC4uLmNvbXBvbmVudHM6IENvbXBvbmVudDx1bmtub3duPltdKSB7XG4gICAgc3VwZXIoY29udGFpbmVyLCAuLi5jb21wb25lbnRzKTtcblxuICAgIHN3aXRjaCAob3JpZW50YXRpb24pIHtcbiAgICAgIGNhc2UgTGlzdE9yaWVudGF0aW9uLlZlcnRpY2FsOlxuICAgICAgICB0aGlzLmxpc3ROYXZpZ2F0aW9uRGlyZWN0aW9ucyA9IFtEaXJlY3Rpb24uVVAsIERpcmVjdGlvbi5ET1dOXTtcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgTGlzdE9yaWVudGF0aW9uLkhvcml6b250YWw6XG4gICAgICAgIHRoaXMubGlzdE5hdmlnYXRpb25EaXJlY3Rpb25zID0gW0RpcmVjdGlvbi5MRUZULCBEaXJlY3Rpb24uUklHSFRdO1xuICAgICAgICBicmVhaztcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgaGFuZGxlQWN0aW9uKGFjdGlvbjogQWN0aW9uKTogdm9pZCB7XG4gICAgc3VwZXIuaGFuZGxlQWN0aW9uKGFjdGlvbik7XG5cbiAgICBpZiAoYWN0aW9uID09PSBBY3Rpb24uU0VMRUNUKSB7XG4gICAgICAvLyBjbG9zZSB0aGUgY29udGFpbmVyIHdoZW4gYSBsaXN0IGVudHJ5IGlzIHNlbGVjdGVkXG4gICAgICB0aGlzLmhhbmRsZUFjdGlvbihBY3Rpb24uQkFDSyk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIGhhbmRsZU5hdmlnYXRpb24oZGlyZWN0aW9uOiBEaXJlY3Rpb24pOiB2b2lkIHtcbiAgICBzdXBlci5oYW5kbGVOYXZpZ2F0aW9uKGRpcmVjdGlvbik7XG5cbiAgICBpZiAoIXRoaXMubGlzdE5hdmlnYXRpb25EaXJlY3Rpb25zLmluY2x1ZGVzKGRpcmVjdGlvbikpIHtcbiAgICAgIC8vIGNsb3NlIHRoZSBjb250YWluZXIgb24gbmF2aWdhdGlvbiBpbnB1dHMgdGhhdCBkb24ndCBhbGlnblxuICAgICAgLy8gd2l0aCB0aGUgb3JpZW50YXRpb24gb2YgdGhlIGxpc3RcbiAgICAgIHRoaXMuaGFuZGxlQWN0aW9uKEFjdGlvbi5CQUNLKTtcbiAgICB9XG4gIH1cbn1cbiIsImltcG9ydCB7IENvbXBvbmVudCB9IGZyb20gJy4uL2NvbXBvbmVudHMvY29tcG9uZW50JztcbmltcG9ydCB7IENvbnRhaW5lciB9IGZyb20gJy4uL2NvbXBvbmVudHMvY29udGFpbmVyJztcbmltcG9ydCB7IGlzQ29tcG9uZW50LCBpc0NvbnRhaW5lciwgaXNMaXN0Qm94IH0gZnJvbSAnLi90eXBlZ3VhcmRzJztcblxuLyoqXG4gKiBSZWN1cnNpdmVseSByZXNvbHZlcyBhIGNvbnRhaW5lciBhbmQgdGhlIGNvbXBvbmVudHMgY29udGFpbmVkIHdpdGhpbiB0aGVtLCBidWlsZGluZyBhIGZsYXQgbGlzdCBvZiBjb21wb25lbnRzLlxuICpcbiAqIEBwYXJhbSBjb250YWluZXIgVGhlIGNvbnRhaW5lciB0byBnZXQgdGhlIGNvbnRhaW5lZCBjb21wb25lbnRzIGZyb21cbiAqL1xuZnVuY3Rpb24gcmVzb2x2ZUFsbENvbXBvbmVudHMoY29udGFpbmVyOiBDb250YWluZXI8dW5rbm93bj4pOiBDb21wb25lbnQ8dW5rbm93bj5bXSB7XG4gIGNvbnN0IGNoaWxkQ29tcG9uZW50czogQ29tcG9uZW50PHVua25vd24+W10gPSBbXTtcblxuICBjb250YWluZXIuZ2V0Q29tcG9uZW50cygpLmZvckVhY2goY29udGFpbmVyT3JDb21wb25lbnQgPT4ge1xuICAgIGlmIChpc0NvbnRhaW5lcihjb250YWluZXJPckNvbXBvbmVudCkpIHtcbiAgICAgIGNoaWxkQ29tcG9uZW50cy5wdXNoKC4uLnJlc29sdmVBbGxDb21wb25lbnRzKGNvbnRhaW5lck9yQ29tcG9uZW50KSk7XG4gICAgfSBlbHNlIGlmIChpc0NvbXBvbmVudChjb250YWluZXJPckNvbXBvbmVudCkpIHtcbiAgICAgIGNoaWxkQ29tcG9uZW50cy5wdXNoKGNvbnRhaW5lck9yQ29tcG9uZW50KTtcbiAgICB9XG4gIH0pO1xuXG4gIHJldHVybiBjaGlsZENvbXBvbmVudHM7XG59XG5cbi8qKlxuICogUmV0dXJucyB0aGUgSFRNTCBlbGVtZW50cyBhc3NvY2lhdGVkIHRvIHRoZSBwcm92aWRlZCBjb21wb25lbnQuXG4gKlxuICogQHBhcmFtIGNvbXBvbmVudCBUaGUgY29tcG9uZW50IHRvIGdldCB0aGUgSFRNTCBlbGVtZW50cyBmcm9tXG4gKi9cbmZ1bmN0aW9uIHRvSHRtbEVsZW1lbnQoY29tcG9uZW50OiBDb21wb25lbnQ8dW5rbm93bj4pOiBIVE1MRWxlbWVudFtdIHtcbiAgaWYgKGlzTGlzdEJveChjb21wb25lbnQpKSB7XG4gICAgcmV0dXJuIFtdLnNsaWNlLmNhbGwoY29tcG9uZW50LmdldERvbUVsZW1lbnQoKS5nZXQoKVswXS5jaGlsZHJlbik7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGNvbXBvbmVudC5nZXREb21FbGVtZW50KCkuZ2V0KCkuc2xpY2UoMCwgMSk7XG4gIH1cbn1cblxuLyoqXG4gKiBUYWtlcyB0aGUgcHJvdmlkZWQgbGlzdCBvZiBjb21wb25lbnRzIGFuZCBmbGF0LW1hcHMgdGhlbSB0byBhIGxpc3Qgb2YgdGhlaXIgcmVzcGVjdGl2ZSBIVE1MIGVsZW1lbnRzLiBJbiBjYXNlIGFcbiAqIHByb3ZpZGVkIGNvbXBvbmVudCBpcyBhIGNvbnRhaW5lciwgdGhlIGNoaWxkcmVuIG9mIHRoYXQgY29udGFpbmVyIHdpbGwgYmUgcmVzb2x2ZWQgcmVjdXJzaXZlbHkuIElnbm9yZXMgY29tcG9uZW50c1xuICogdGhhdCBhcmUgaGlkZGVuLlxuICpcbiAqIEBwYXJhbSBjb21wb25lbnRzIFRoZSBjb21wb25lbnRzIHRvIG1hcCB0byBIVE1MIGVsZW1lbnRzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRIdG1sRWxlbWVudHNGcm9tQ29tcG9uZW50cyhjb21wb25lbnRzOiBDb21wb25lbnQ8dW5rbm93bj5bXSk6IEhUTUxFbGVtZW50W10ge1xuICBjb25zdCBodG1sRWxlbWVudHM6IEhUTUxFbGVtZW50W10gPSBbXTtcblxuICBjb21wb25lbnRzXG4gICAgLmZpbHRlcihjb21wb25lbnQgPT4gIWNvbXBvbmVudC5pc0hpZGRlbigpKVxuICAgIC5mb3JFYWNoKGNvbXBvbmVudCA9PiB7XG4gICAgICBjb25zdCBlbGVtZW50c1RvQ29uc2lkZXIgPSBjb21wb25lbnQgaW5zdGFuY2VvZiBDb250YWluZXIgPyByZXNvbHZlQWxsQ29tcG9uZW50cyhjb21wb25lbnQpIDogW2NvbXBvbmVudF07XG5cbiAgICAgIGVsZW1lbnRzVG9Db25zaWRlci5mb3JFYWNoKGNvbXBvbmVudCA9PiB7XG4gICAgICAgIGh0bWxFbGVtZW50cy5wdXNoKC4uLnRvSHRtbEVsZW1lbnQoY29tcG9uZW50KSk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICByZXR1cm4gaHRtbEVsZW1lbnRzO1xufVxuIiwiaW1wb3J0IHsgQWN0aW9uLCBEaXJlY3Rpb24sIEtleU1hcCB9IGZyb20gJy4vdHlwZXMnO1xuaW1wb3J0IHsgQnJvd3NlclV0aWxzIH0gZnJvbSAnLi4vYnJvd3NlcnV0aWxzJztcblxuY29uc3QgVGl6ZW5LZXlNYXAgPSB7XG4gIGlzQXBwbGljYWJsZTogKCkgPT4gQnJvd3NlclV0aWxzLmlzVGl6ZW4sXG4gIGtleUNvZGVzOiB7XG4gICAgLy8gRC1wYWQgVXBcbiAgICAzODogRGlyZWN0aW9uLlVQLFxuICAgIC8vIEQtcGFkIERvd25cbiAgICA0MDogRGlyZWN0aW9uLkRPV04sXG4gICAgLy8gRC1wYWQgTGVmdFxuICAgIDM3OiBEaXJlY3Rpb24uTEVGVCxcbiAgICAvLyBELXBhZCBSaWdodFxuICAgIDM5OiBEaXJlY3Rpb24uUklHSFQsXG4gICAgLy8gRC1wYWQgT0tcbiAgICAxMzogQWN0aW9uLlNFTEVDVCxcbiAgICAvLyBCYWNrXG4gICAgMTAwMDk6IEFjdGlvbi5CQUNLLFxuICB9LFxufTtcblxuY29uc3QgV2ViT3NLZXlNYXAgPSB7XG4gIGlzQXBwbGljYWJsZTogKCkgPT4gQnJvd3NlclV0aWxzLmlzV2ViT3MsXG4gIGtleUNvZGVzOiB7XG4gICAgLy8gRC1wYWQgVXBcbiAgICAzODogRGlyZWN0aW9uLlVQLFxuICAgIC8vIEQtcGFkIERvd25cbiAgICA0MDogRGlyZWN0aW9uLkRPV04sXG4gICAgLy8gRC1wYWQgTGVmdFxuICAgIDM3OiBEaXJlY3Rpb24uTEVGVCxcbiAgICAvLyBELXBhZCBSaWdodFxuICAgIDM5OiBEaXJlY3Rpb24uUklHSFQsXG4gICAgLy8gRC1wYWQgT0tcbiAgICAxMzogQWN0aW9uLlNFTEVDVCxcbiAgICAvLyBCYWNrXG4gICAgNDYxOiBBY3Rpb24uQkFDSyxcbiAgfSxcbn07XG5cbmNvbnN0IFBsYXlTdGF0aW9uS2V5TWFwID0ge1xuICBpc0FwcGxpY2FibGU6ICgpID0+IEJyb3dzZXJVdGlscy5pc1BsYXlTdGF0aW9uLFxuICBrZXlDb2Rlczoge1xuICAgIC8vIEQtcGFkIFVwXG4gICAgMzg6IERpcmVjdGlvbi5VUCxcbiAgICAvLyBELXBhZCBEb3duXG4gICAgNDA6IERpcmVjdGlvbi5ET1dOLFxuICAgIC8vIEQtcGFkIExlZnRcbiAgICAzNzogRGlyZWN0aW9uLkxFRlQsXG4gICAgLy8gRC1wYWQgUmlnaHRcbiAgICAzOTogRGlyZWN0aW9uLlJJR0hULFxuICAgIC8vIENyb3NzXG4gICAgMTM6IEFjdGlvbi5TRUxFQ1QsXG4gICAgLy8gQ2lyY2xlXG4gICAgMjc6IEFjdGlvbi5CQUNLLFxuICB9LFxufTtcblxuY29uc3QgQW5kcm9pZEtleU1hcCA9IHtcbiAgaXNBcHBsaWNhYmxlOiAoKSA9PiBCcm93c2VyVXRpbHMuaXNBbmRyb2lkLFxuICBrZXlDb2Rlczoge1xuICAgIC8vIEQtcGFkIFVwXG4gICAgMzg6IERpcmVjdGlvbi5VUCxcbiAgICAvLyBELXBhZCBEb3duXG4gICAgNDA6IERpcmVjdGlvbi5ET1dOLFxuICAgIC8vIEQtcGFkIExlZnRcbiAgICAzNzogRGlyZWN0aW9uLkxFRlQsXG4gICAgLy8gRC1wYWQgUmlnaHRcbiAgICAzOTogRGlyZWN0aW9uLlJJR0hULFxuICAgIC8vIEQtcGFkIE9LXG4gICAgMTM6IEFjdGlvbi5TRUxFQ1QsXG4gICAgLy8gQmFja1xuICAgIDI3OiBBY3Rpb24uQkFDSyxcbiAgfSxcbn07XG5cbmNvbnN0IEhpc2Vuc2VLZXlNYXAgPSB7XG4gIGlzQXBwbGljYWJsZTogKCkgPT4gQnJvd3NlclV0aWxzLmlzSGlzZW5zZSxcbiAga2V5Q29kZXM6IHtcbiAgICAvLyBELXBhZCBVcFxuICAgIDM4OiBEaXJlY3Rpb24uVVAsXG4gICAgLy8gRC1wYWQgRG93blxuICAgIDQwOiBEaXJlY3Rpb24uRE9XTixcbiAgICAvLyBELXBhZCBMZWZ0XG4gICAgMzc6IERpcmVjdGlvbi5MRUZULFxuICAgIC8vIEQtcGFkIFJpZ2h0XG4gICAgMzk6IERpcmVjdGlvbi5SSUdIVCxcbiAgICAvLyBPS1xuICAgIDEzOiBBY3Rpb24uU0VMRUNULFxuICAgIC8vIEJhY2tcbiAgICA4OiBBY3Rpb24uQkFDSyxcbiAgfSxcbn07XG5cbi8vIERlZmF1bHQga2V5IG1hcCB1c2VkIG9uIGRlc2t0b3BzXG5jb25zdCBEZWZhdWx0S2V5TWFwID0ge1xuICAvLyBBcnJvdyBVcFxuICAzODogRGlyZWN0aW9uLlVQLFxuICAvLyBBcnJvdyBEb3duXG4gIDQwOiBEaXJlY3Rpb24uRE9XTixcbiAgLy8gQXJyb3cgTGVmdFxuICAzNzogRGlyZWN0aW9uLkxFRlQsXG4gIC8vIEFycm93IFJpZ2h0XG4gIDM5OiBEaXJlY3Rpb24uUklHSFQsXG4gIC8vIEVudGVyXG4gIDEzOiBBY3Rpb24uU0VMRUNULFxuICAvLyBFc2NhcGVcbiAgMjc6IEFjdGlvbi5CQUNLLFxufTtcblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBtYXRjaGluZyBrZXkgbWFwIGZvciB0aGUgY3VycmVudCBwbGF0Zm9ybS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEtleU1hcEZvclBsYXRmb3JtKCk6IEtleU1hcCB7XG4gIGNvbnN0IGFwcGxpY2FibGVLZXlNYXAgPSBbXG4gICAgV2ViT3NLZXlNYXAsXG4gICAgVGl6ZW5LZXlNYXAsXG4gICAgUGxheVN0YXRpb25LZXlNYXAsXG4gICAgSGlzZW5zZUtleU1hcCxcbiAgICBBbmRyb2lkS2V5TWFwLFxuICBdLmZpbmQoa2V5TWFwID0+IGtleU1hcC5pc0FwcGxpY2FibGUoKSk7XG5cbiAgaWYgKGFwcGxpY2FibGVLZXlNYXApIHtcbiAgICByZXR1cm4gYXBwbGljYWJsZUtleU1hcC5rZXlDb2RlcztcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gRGVmYXVsdEtleU1hcDtcbiAgfVxufVxuIiwiaW1wb3J0IHsgRGlyZWN0aW9uIH0gZnJvbSAnLi90eXBlcyc7XG5cbmludGVyZmFjZSBWZWN0b3Ige1xuICB4OiBudW1iZXI7XG4gIHk6IG51bWJlcjtcbn1cblxuLyoqXG4gKiBDYWxjdWxhdGVzIHRoZSBsZW5ndGggb2YgYSB2ZWN0b3IuXG4gKlxuICogQHBhcmFtIHZlY3RvciBUaGUgdmVjdG9yIHRvIGNhbGN1bGF0ZSB0aGUgbGVuZ3RoIG9mXG4gKi9cbmZ1bmN0aW9uIGxlbmd0aCh2ZWN0b3I6IFZlY3Rvcik6IG51bWJlciB7XG4gIHJldHVybiBNYXRoLnNxcnQoTWF0aC5wb3codmVjdG9yLngsIDIpICsgTWF0aC5wb3codmVjdG9yLnksIDIpKTtcbn1cblxuLyoqXG4gKiBOb3JtYWxpemVzIHRoZSBnaXZlbiB2ZWN0b3IuXG4gKlxuICogQHBhcmFtIHZlY3RvciBUaGUgdmVjdG9yIHRvIG5vcm1hbGl6ZVxuICovXG5mdW5jdGlvbiBub3JtYWxpemUodmVjdG9yOiBWZWN0b3IpOiBWZWN0b3Ige1xuICBjb25zdCBsZW4gPSBsZW5ndGgodmVjdG9yKTtcblxuICByZXR1cm4ge1xuICAgIHg6IHZlY3Rvci54IC8gbGVuLFxuICAgIHk6IHZlY3Rvci55IC8gbGVuLFxuICB9O1xufVxuXG4vKipcbiAqIENhbGN1bGF0ZXMgdGhlIGRvdCBwcm9kdWN0IGJldHdlZW4gMiB2ZWN0b3JzLlxuICpcbiAqIEBwYXJhbSBhIFRoZSBmaXJzdCB2ZWN0b3JcbiAqIEBwYXJhbSBiIFRoZSBzZWNvbmQgdmVjdG9yXG4gKi9cbmZ1bmN0aW9uIGRvdFByb2R1Y3QoYTogVmVjdG9yLCBiOiBWZWN0b3IpOiBudW1iZXIge1xuICByZXR1cm4gYS54ICogYi54ICsgYS55ICogYi55O1xufVxuXG4vKipcbiAqIENhbGN1bGF0ZXMgdGhlIGRpc3RhbmNlIGJldHdlZW4gdGhlIDIgcG9pbnRzIHBvaW50ZWQgdG8gYnkgdGhlIHByb3ZpZGVkIHZlY3RvcnMuXG4gKlxuICogQHBhcmFtIGEgVGhlIGZpcnN0IHZlY3RvclxuICogQHBhcmFtIGIgVGhlIHNlY29uZCB2ZWN0b3JcbiAqL1xuZnVuY3Rpb24gZGlzdGFuY2UoYTogVmVjdG9yLCBiOiBWZWN0b3IpOiBudW1iZXIge1xuICByZXR1cm4gbGVuZ3RoKHtcbiAgICB4OiBiLnggLSBhLngsXG4gICAgeTogYi55IC0gYS55LFxuICB9KTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgdmVjdG9yIHRoYXQgY29ycmVzcG9uZHMgdG8gdGhlIGNlbnRlciBvZiB0aGUgcHJvdmlkZWQgZWxlbWVudC5cbiAqXG4gKiBAcGFyYW0gZWxlbWVudCBUaGUgZWxlbWVudCB0byBnZXQgdGhlIGNlbnRlciBvZlxuICovXG5mdW5jdGlvbiBnZXRFbGVtZW50VmVjdG9yKGVsZW1lbnQ6IEhUTUxFbGVtZW50KTogVmVjdG9yIHtcbiAgY29uc3QgYm91bmRpbmdSZWN0ID0gZ2V0Qm91bmRpbmdSZWN0RnJvbUVsZW1lbnQoZWxlbWVudCk7XG5cbiAgcmV0dXJuIHtcbiAgICB4OiBib3VuZGluZ1JlY3QueCArIGJvdW5kaW5nUmVjdC53aWR0aCAvIDIsXG4gICAgeTogYm91bmRpbmdSZWN0LnkgKyBib3VuZGluZ1JlY3QuaGVpZ2h0IC8gMixcbiAgfTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBhbmdsZSBpbiBkZWdyZWVzIGJldHdlZW4gdGhlIHVuaXQgdmVjdG9yIHBvaW50aW5nIGluIHRoZSBnaXZlbiB7RGlyZWN0aW9ufSBhbmQgdGhlIHVuaXQgdmVjdG9yIHRoYXRcbiAqIHBvaW50cyBmcm9tIHRoZSBjdXJyZW50IGVsZW1lbnQgdG8gYW5vdGhlciBlbGVtZW50LlxuICpcbiAqIEBwYXJhbSBhIFRoZSB2ZWN0b3Igb2YgdGhlIGN1cnJlbnQgZWxlbWVudFxuICogQHBhcmFtIGIgVGhlIHZlY3RvciBvZiB0aGUgb3RoZXIgZWxlbWVudFxuICogQHBhcmFtIGRpcmVjdGlvbiBUaGUgZGlyZWN0aW9uIHRvIG1vdmUgYWxvbmdcbiAqL1xuZnVuY3Rpb24gY2FsY3VsYXRlQW5nbGUoYTogVmVjdG9yLCBiOiBWZWN0b3IsIGRpcmVjdGlvbjogRGlyZWN0aW9uKTogbnVtYmVyIHtcbiAgY29uc3QgZGlyZWN0aW9uVmVjdG9yID0ge1xuICAgIHg6IChkaXJlY3Rpb24gPT09IERpcmVjdGlvbi5MRUZUID8gLTEgOiBkaXJlY3Rpb24gPT09IERpcmVjdGlvbi5SSUdIVCA/IDEgOiAwKSxcbiAgICB5OiAoZGlyZWN0aW9uID09PSBEaXJlY3Rpb24uVVAgPyAtMSA6IGRpcmVjdGlvbiA9PT0gRGlyZWN0aW9uLkRPV04gPyAxIDogMCksXG4gIH07XG5cbiAgY29uc3QgZWxlbWVudFZlY3RvciA9IG5vcm1hbGl6ZSh7XG4gICAgeDogYi54IC0gYS54LFxuICAgIHk6IGIueSAtIGEueSxcbiAgfSk7XG5cbiAgY29uc3QgYW5nbGVDb3MgPSBkb3RQcm9kdWN0KGRpcmVjdGlvblZlY3RvciwgZWxlbWVudFZlY3RvcikgLyAobGVuZ3RoKGRpcmVjdGlvblZlY3RvcikgKiBsZW5ndGgoZWxlbWVudFZlY3RvcikpO1xuXG4gIHJldHVybiBNYXRoLmFjb3MoYW5nbGVDb3MpICogMTgwIC8gTWF0aC5QSTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBjbG9zZXN0IGVsZW1lbnQgdG8gdGhlIGN1cnJlbnQgZWxlbWVudCB3aGVuIHRyeWluZyB0byBuYXZpZ2F0ZSBpbiB0aGUgcHJvdmlkZWQgZGlyZWN0aW9uLiBSZXR1cm5zXG4gKiB1bmRlZmluZWQsIGlmIHRoZXJlIGlzIG5vdCBlbGVtZW50IGluIHRoZSBnaXZlbiBkaXJlY3Rpb24uXG4gKlxuICogQHBhcmFtIGFjdGl2ZUVsZW1lbnQgVGhlIGN1cnJlbnRseSBzZWxlY3RlZCBlbGVtZW50XG4gKiBAcGFyYW0gZWxlbWVudHMgVGhlIGxpc3Qgb2YgYWxsIGVsZW1lbnRzIHRoYXQgY2FuIGJlIG5hdmlnYXRlZCB0b1xuICogQHBhcmFtIGRpcmVjdGlvbiBUaGUgZGlyZWN0aW9uIGluIHdoaWNoIHRvIG5hdmlnYXRlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRFbGVtZW50SW5EaXJlY3Rpb24oXG4gIGFjdGl2ZUVsZW1lbnQ6IEhUTUxFbGVtZW50LFxuICBlbGVtZW50czogSFRNTEVsZW1lbnRbXSxcbiAgZGlyZWN0aW9uOiBEaXJlY3Rpb24sXG4pOiBIVE1MRWxlbWVudCB8IHVuZGVmaW5lZCB7XG4gIGlmICghYWN0aXZlRWxlbWVudCkgcmV0dXJuIHVuZGVmaW5lZDtcblxuICBjb25zdCBjdXRvZmZBbmdsZSA9IDQ1O1xuICBjb25zdCBhY3RpdmVFbGVtVmVjdG9yID0gZ2V0RWxlbWVudFZlY3RvcihhY3RpdmVFbGVtZW50KTtcblxuICByZXR1cm4gZWxlbWVudHNcbiAgICAvLyBkb24ndCB0YWtlIHRoZSBjdXJyZW50IGVsZW1lbnQgaW50byBhY2NvdW50XG4gICAgLmZpbHRlcihlbGVtID0+IGVsZW0gIT09IGFjdGl2ZUVsZW1lbnQpXG4gICAgLy8gZ2V0IHRoZSBhbmdsZSBiZXR3ZWVuLCBhbmQgZGlzdGFuY2UgdG8gYW55IG90aGVyIGVsZW1lbnQgZnJvbSB0aGUgY3VycmVudCBlbGVtZW50XG4gICAgLm1hcChlbGVtZW50ID0+IHtcbiAgICAgIGNvbnN0IGVsZW1lbnRWZWN0b3IgPSBnZXRFbGVtZW50VmVjdG9yKGVsZW1lbnQpO1xuICAgICAgY29uc3QgZGlzdCA9IGRpc3RhbmNlKGFjdGl2ZUVsZW1WZWN0b3IsIGVsZW1lbnRWZWN0b3IpO1xuICAgICAgY29uc3QgYW5nbGUgPSBjYWxjdWxhdGVBbmdsZShhY3RpdmVFbGVtVmVjdG9yLCBlbGVtZW50VmVjdG9yLCBkaXJlY3Rpb24pO1xuXG4gICAgICByZXR1cm4geyBhbmdsZSwgZGlzdCwgZWxlbWVudCB9O1xuICAgIH0pXG4gICAgLy8gZmlsdGVyIG91dCBhbnkgZWxlbWVudHMgdGhhdCBkb24ndCBhbGlnbiB3aXRoIHRoZSBkaXJlY3Rpb24gd2UncmUgdHJ5aW5nIHRvIG1vdmUgaW5cbiAgICAuZmlsdGVyKCh7IGFuZ2xlIH0pID0+IGFuZ2xlIDw9IGN1dG9mZkFuZ2xlKVxuICAgIC8vIHNvcnQgdGhlIHJlc3VsdGluZyBlbGVtZW50cyBiYXNlZCBvbiB0aGVpciBkaXN0YW5jZSB0byB0aGUgY3VycmVudCBlbGVtZW50IGluIGFzY2VuZGluZyBvcmRlclxuICAgIC5zb3J0KCh7IGFuZ2xlOiBhbmdsZUEsIGRpc3Q6IGRpc3RBIH0sIHsgYW5nbGU6IGFuZ2xlQiwgZGlzdDogZGlzdEIgfSkgPT4gKGFuZ2xlQSAtIGFuZ2xlQikgKyAoZGlzdEEgLSBkaXN0QikpXG4gICAgLy8gcmV0dXJuIHRoZSBlbGVtZW50IGNsb3Nlc3QgdG8gdGhlIGN1cnJlbnQgZWxlbWVudFxuICAgIC5zaGlmdCgpPy5lbGVtZW50O1xufVxuXG4vKipcbiAqIFJldHVybnMgRE9NUmVjdCBsaWtlIG9iamVjdCBjb250YWluaW5nIGhvcml6b250YWwgWCBhbmQgdmVydGljYWwgWSBjb29yZGluYXRlcyBmcm9tIGFuZCBIVE1MRWxlbWVudC5cbiAqIEhhbmRsZXMgdXNlLWNhc2VzIGZvciBnZXRCb3VuZGluZ0NsaWVudFJlY3Qgd2hlbiB0aGUgcmV0dXJuIHR5cGUgY2FuIGJlIGVpdGhlclxuICogYSBDbGllbnRSZWN0IG9yIERPTVJlY3Qgb2JqZWN0IHR5cGUuXG4gKlxuICogQHBhcmFtIGVsZW1lbnQgVGhlIGN1cnJlbnRseSBzZWxlY3RlZCBlbGVtZW50XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRCb3VuZGluZ1JlY3RGcm9tRWxlbWVudChlbGVtZW50OiBIVE1MRWxlbWVudCkge1xuICBjb25zdCBib3VuZGluZ1JlY3QgPSBlbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuXG4gIGlmICh0eXBlb2YgYm91bmRpbmdSZWN0LnggIT09ICdudW1iZXInICYmIHR5cGVvZiBib3VuZGluZ1JlY3QueSAhPT0gJ251bWJlcicpIHtcbiAgICBib3VuZGluZ1JlY3QueCA9IGJvdW5kaW5nUmVjdC5sZWZ0O1xuICAgIGJvdW5kaW5nUmVjdC55ID0gYm91bmRpbmdSZWN0LnRvcDtcbiAgfVxuXG4gIHJldHVybiBib3VuZGluZ1JlY3Q7XG59XG5cbiIsImltcG9ydCB7IENvbnRhaW5lciB9IGZyb20gJy4uL2NvbXBvbmVudHMvY29udGFpbmVyJztcbmltcG9ydCB7IENvbXBvbmVudCB9IGZyb20gJy4uL2NvbXBvbmVudHMvY29tcG9uZW50JztcbmltcG9ydCB7IGdldEVsZW1lbnRJbkRpcmVjdGlvbiB9IGZyb20gJy4vbmF2aWdhdGlvbmFsZ29yaXRobSc7XG5pbXBvcnQgeyBnZXRIdG1sRWxlbWVudHNGcm9tQ29tcG9uZW50cyB9IGZyb20gJy4vZ2V0aHRtbGVsZW1lbnRzZnJvbWNvbXBvbmVudHMnO1xuaW1wb3J0IHsgTm9kZUV2ZW50U3Vic2NyaWJlciB9IGZyb20gJy4vbm9kZWV2ZW50c3Vic2NyaWJlcic7XG5pbXBvcnQgeyBpc1NldHRpbmdzUGFuZWwgfSBmcm9tICcuL3R5cGVndWFyZHMnO1xuaW1wb3J0IHsgQWN0aW9uLCBBY3Rpb25DYWxsYmFjaywgQ2FsbGJhY2ssIERpcmVjdGlvbiwgTmF2aWdhdGlvbkNhbGxiYWNrIH0gZnJvbSAnLi90eXBlcyc7XG5cbi8qKlxuICogVXNlZCBhcyBwYXJ0IG9mIHNwYXRpYWwgbmF2aWdhdGlvbi4gR3JvdXBzIHRvZ2V0aGVyIGRpZmZlcmVudCBjb21wb25lbnRzIHRvIHdoaWNoIHlvdSBjYW4gbmF2aWdhdGUgdG8sIGluIGEgc2luZ2xlXG4gKiBuYXZpZ2F0aW9uIGdyb3VwLlxuICpcbiAqIFJlc3BvbnNpYmxlIGZvciBmaW5kaW5nIGVsZW1lbnRzIGluIGRpcmVjdGlvbiBvbiBuYXZpZ2F0aW9uIGFuZCBmb3IgdHJhY2tpbmcgYWN0aXZlIGVsZW1lbnQgaW5zaWRlIHRoZSBncm91cC5cbiAqIFRyaWdnZXJzIGJsdXIgYW5kIGZvY3VzIG9uIGVsZW1lbnQgd2hlbiBhY3RpdmUgZWxlbWVudCBpcyBjaGFuZ2VkLCBhcyB3ZWxsIGFzIGNsaWNrIG9uIGVsZW1lbnQgb24gYEFjdGlvbi5TRUxFQ1RgLlxuICogV2lsbCBjYWxsIGBoaWRlVWkoKWAgb24gcGFzc2VkIGluIGNvbnRhaW5lciBpZiBgQWN0aW9uLkJBQ0tgIGlzIGNhbGxlZC5cbiAqXG4gKiBAY2F0ZWdvcnkgQ29tcG9uZW50c1xuICovXG5leHBvcnQgY2xhc3MgTmF2aWdhdGlvbkdyb3VwIHtcbiAgcHJpdmF0ZSBhY3RpdmVFbGVtZW50PzogSFRNTEVsZW1lbnQ7XG4gIHByaXZhdGUgYWN0aXZlRWxlbWVudEJlZm9yZURpc2FibGU/OiBIVE1MRWxlbWVudDtcbiAgcHJpdmF0ZSByZWFkb25seSBjb21wb25lbnRzOiBDb21wb25lbnQ8dW5rbm93bj5bXTtcbiAgcHJpdmF0ZSByZW1vdmVFbGVtZW50SG92ZXJFdmVudExpc3RlbmVycyA9ICgpID0+IHt9O1xuICBwcml2YXRlIHJlYWRvbmx5IGV2ZW50U3Vic2NyaWJlcjogTm9kZUV2ZW50U3Vic2NyaWJlcjtcblxuICBjb25zdHJ1Y3RvcihwdWJsaWMgcmVhZG9ubHkgY29udGFpbmVyOiBDb250YWluZXI8dW5rbm93bj4sIC4uLmNvbXBvbmVudHM6IENvbXBvbmVudDx1bmtub3duPltdKSB7XG4gICAgdGhpcy5jb21wb25lbnRzID0gY29tcG9uZW50cztcbiAgICB0aGlzLmV2ZW50U3Vic2NyaWJlciA9IG5ldyBOb2RlRXZlbnRTdWJzY3JpYmVyKCk7XG4gIH1cblxuICAvKipcbiAgICogSWYgb3ZlcndyaXR0ZW4sIGFsbG93cyB0byBpbXBsZW1lbnQgY3VzdG9tIG5hdmlnYXRpb24gYmVoYXZpb3IuIFBlciBkZWZhdWx0LCB0aGUgaW50ZXJuYWwgaGFuZGxlciB3aWxsIHN0aWxsIGJlXG4gICAqIGV4ZWN1dGVkLiBUbyBwcmV2ZW50IGV4ZWN1dGlvbiBvZiB0aGUgZGVmYXVsdCBuYXZpZ2F0aW9uIGhhbmRsZXIsIGNhbGwgYHByZXZlbnREZWZhdWx0KClgO1xuICAgKlxuICAgKiBAcGFyYW0gZGlyZWN0aW9uIHtEaXJlY3Rpb259IFRoZSBkaXJlY3Rpb24gdG8gbW92ZSBhbG9uZ1xuICAgKiBAcGFyYW0gdGFyZ2V0IHtIVE1MRWxlbWVudH0gVGhlIHRhcmdldCBlbGVtZW50IGZvciB0aGUgZXZlbnRcbiAgICogQHBhcmFtIHByZXZlbnREZWZhdWx0IHsoKSA9PiB2b2lkfSBBIGZ1bmN0aW9uIHRoYXQsIHdoZW4gY2FsbGVkLCB3aWxsIHByZXZlbnQgdGhlIGV4ZWN1dGlvbiBvZiB0aGUgZGVmYXVsdCBoYW5kbGVyXG4gICAqL1xuICBwdWJsaWMgb25OYXZpZ2F0aW9uPzogTmF2aWdhdGlvbkNhbGxiYWNrO1xuXG4gIC8qKlxuICAgKiBJZiBvdmVyd3JpdHRlbiwgYWxsb3dzIHRvIGltcGxlbWVudCBjdXN0b20gYWN0aW9uIGJlaGF2aW9yLiBQZXIgZGVmYXVsdCwgdGhlIGludGVybmFsIGhhbmRsZXIgd2lsbCBzdGlsbCBiZVxuICAgKiBleGVjdXRlZC4gVG8gcHJldmVudCBleGVjdXRpb24gb2YgdGhlIGRlZmF1bHQgYWN0aW9uIGhhbmRsZXIsIGNhbGwgYHByZXZlbnREZWZhdWx0KClgO1xuICAgKlxuICAgKiBAcGFyYW0gYWN0aW9uIHtBY3Rpb259IFRoZSBhY3Rpb24gdGhhdCB3YXMgY2FsbGVkXG4gICAqIEBwYXJhbSB0YXJnZXQge0hUTUxFbGVtZW50fSBUaGUgdGFyZ2V0IGVsZW1lbnQgdGhhdCBhY3Rpb24gd2FzIGNhbGxlZCBvblxuICAgKiBAcGFyYW0gcHJldmVudERlZmF1bHQgeygpID0+IHZvaWR9IEEgZnVuY3Rpb24gdGhhdCwgd2hlbiBjYWxsZWQsIHdpbGwgcHJldmVudCB0aGUgZXhlY3V0aW9uIG9mIHRoZSBkZWZhdWx0IGhhbmRsZXJcbiAgICovXG4gIHB1YmxpYyBvbkFjdGlvbj86IEFjdGlvbkNhbGxiYWNrO1xuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBhY3RpdmUgSFRNTEVsZW1lbnQuXG4gICAqL1xuICBwdWJsaWMgZ2V0QWN0aXZlRWxlbWVudCgpOiBIVE1MRWxlbWVudCB8IHVuZGVmaW5lZCB7XG4gICAgcmV0dXJuIHRoaXMuYWN0aXZlRWxlbWVudDtcbiAgfVxuXG4gIHByaXZhdGUgZm9jdXNFbGVtZW50KGVsZW1lbnQ6IEhUTUxFbGVtZW50KTogdm9pZCB7XG4gICAgdGhpcy5ibHVyQWN0aXZlRWxlbWVudCgpO1xuICAgIHRoaXMuYWN0aXZlRWxlbWVudCA9IGVsZW1lbnQ7XG4gICAgdGhpcy5hY3RpdmVFbGVtZW50LmZvY3VzKCk7XG4gIH1cblxuICBwcml2YXRlIGJsdXJBY3RpdmVFbGVtZW50KCk6IHZvaWQge1xuICAgIHRoaXMuYWN0aXZlRWxlbWVudD8uYmx1cigpO1xuICB9XG5cbiAgcHJpdmF0ZSBmb2N1c0ZpcnN0RWxlbWVudCgpOiB2b2lkIHtcbiAgICBjb25zdCBlbGVtZW50ID0gZ2V0SHRtbEVsZW1lbnRzRnJvbUNvbXBvbmVudHModGhpcy5jb21wb25lbnRzKVswXTtcbiAgICBpZiAoZWxlbWVudCkge1xuICAgICAgdGhpcy5mb2N1c0VsZW1lbnQoZWxlbWVudCk7XG4gICAgfVxuICB9XG5cbiAgcHJvdGVjdGVkIGRlZmF1bHROYXZpZ2F0aW9uSGFuZGxlcihkaXJlY3Rpb246IERpcmVjdGlvbik6IHZvaWQge1xuICAgIGNvbnN0IHRhcmdldEVsZW1lbnQgPSBnZXRFbGVtZW50SW5EaXJlY3Rpb24oXG4gICAgICB0aGlzLmFjdGl2ZUVsZW1lbnQsXG4gICAgICBnZXRIdG1sRWxlbWVudHNGcm9tQ29tcG9uZW50cyh0aGlzLmNvbXBvbmVudHMpLFxuICAgICAgZGlyZWN0aW9uLFxuICAgICk7XG5cbiAgICBpZiAodGFyZ2V0RWxlbWVudCkge1xuICAgICAgdGhpcy5mb2N1c0VsZW1lbnQodGFyZ2V0RWxlbWVudCk7XG4gICAgfVxuICB9XG5cbiAgcHJvdGVjdGVkIGRlZmF1bHRBY3Rpb25IYW5kbGVyKGFjdGlvbjogQWN0aW9uKTogdm9pZCB7XG4gICAgc3dpdGNoIChhY3Rpb24pIHtcbiAgICAgIGNhc2UoQWN0aW9uLlNFTEVDVCk6XG4gICAgICAgIHRoaXMuYWN0aXZlRWxlbWVudC5jbGljaygpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UoQWN0aW9uLkJBQ0spOlxuICAgICAgICB0aGlzLmNvbnRhaW5lci5oaWRlKCk7XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgaGFuZGxlSW5wdXQ8VD4oZGF0YTogVCwgZGVmYXVsdEhhbmRsZXI6IChkYXRhOiBUKSA9PiB2b2lkLCB1c2VySGFuZGxlcj86IENhbGxiYWNrPFQ+KTogdm9pZCB7XG4gICAgbGV0IGhhbmRsZURlZmF1bHQgPSB0cnVlO1xuICAgIGNvbnN0IHByZXZlbnREZWZhdWx0ID0gKCkgPT4gKGhhbmRsZURlZmF1bHQgPSBmYWxzZSk7XG5cbiAgICB1c2VySGFuZGxlcj8uKGRhdGEsIHRoaXMuYWN0aXZlRWxlbWVudCwgcHJldmVudERlZmF1bHQpO1xuXG4gICAgaWYgKGhhbmRsZURlZmF1bHQpIHtcbiAgICAgIGRlZmF1bHRIYW5kbGVyLmNhbGwodGhpcywgZGF0YSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEhhbmRsZXMgYSBuYXZpZ2F0aW9uIGV2ZW50LlxuICAgKlxuICAgKiBAcGFyYW0gZGlyZWN0aW9uIFRoZSBkaXJlY3Rpb24gb2YgdGhlIG5hdmlnYXRpb24gZXZlbnRcbiAgICovXG4gIHB1YmxpYyBoYW5kbGVOYXZpZ2F0aW9uKGRpcmVjdGlvbjogRGlyZWN0aW9uKTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLmFjdGl2ZUVsZW1lbnQpIHtcbiAgICAgIC8vIElmIHdlIGRvIG5vdCBoYXZlIGFuIGFjdGl2ZSBlbGVtZW50LCB0aGUgYWN0aXZlIGVsZW1lbnQgaGFzIGJlZW4gZGlzYWJsZWQgYnkgYSBtb3VzZWxlYXZlXG4gICAgICAvLyBldmVudC4gV2Ugc2hvdWxkIGNvbnRpbnVlIHRoZSBuYXZpZ2F0aW9uIGF0IHRoZSBleGFjdCBwbGFjZSB3aGVyZSB3ZSBsZWZ0IG9mZi5cbiAgICAgIGlmICh0aGlzLmFjdGl2ZUVsZW1lbnRCZWZvcmVEaXNhYmxlKSB7XG4gICAgICAgIHRoaXMuZm9jdXNFbGVtZW50KHRoaXMuYWN0aXZlRWxlbWVudEJlZm9yZURpc2FibGUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5mb2N1c0ZpcnN0RWxlbWVudCgpO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLmhhbmRsZUlucHV0KGRpcmVjdGlvbiwgdGhpcy5kZWZhdWx0TmF2aWdhdGlvbkhhbmRsZXIsIHRoaXMub25OYXZpZ2F0aW9uKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBIYW5kbGVzIGFuIGFjdGlvbiBldmVudC5cbiAgICpcbiAgICogQHBhcmFtIGFjdGlvbiBUaGUgYWN0aW9uIG9mIHRoZSBldmVudFxuICAgKi9cbiAgcHVibGljIGhhbmRsZUFjdGlvbihhY3Rpb246IEFjdGlvbik6IHZvaWQge1xuICAgIHRoaXMuaGFuZGxlSW5wdXQoYWN0aW9uLCB0aGlzLmRlZmF1bHRBY3Rpb25IYW5kbGVyLCB0aGlzLm9uQWN0aW9uKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBEaXNhYmxlIG5hdmlnYXRpb24gZ3JvdXBcbiAgICpcbiAgICogQ2FsbCBibHVyIG9uIGFjdGl2ZSBlbGVtZW50LCBzZXQgYXMgdW5kZWZpbmVkLCBhbmQgdHJhY2sgaXQgYXMgZWxlbWVudCBiZWZvcmUgZGlzYWJsZS5cbiAgICovXG4gIHB1YmxpYyBkaXNhYmxlKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLmFjdGl2ZUVsZW1lbnQpIHtcbiAgICAgIHRoaXMuYWN0aXZlRWxlbWVudEJlZm9yZURpc2FibGUgPSB0aGlzLmFjdGl2ZUVsZW1lbnQ7XG4gICAgICB0aGlzLmJsdXJBY3RpdmVFbGVtZW50KCk7XG4gICAgICB0aGlzLmFjdGl2ZUVsZW1lbnQgPSB1bmRlZmluZWQ7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEVuYWJsZSBuYXZpZ2F0aW9uIGdyb3VwXG4gICAqXG4gICAqIFNldHMgYWN0aXZlIGVsZW1lbnQgdG8gZWl0aGVyIGVsZW1lbnQgdGhhdCB3YXMgYWN0aXZlIGJlZm9yZSBkaXNhYmxlLCBvciBmaXJzdCBlbGVtZW50IG9mIHRyYWNrZWQgZWxlbWVudHMuXG4gICAqIElmIGl0IGlzIHNldHRpbmdzIHBhbmVsLCBpdCB3aWxsIGFsd2F5cyBmb2N1cyBmaXJzdCBlbGVtZW50IGluIHRoZSBsaXN0LlxuICAgKi9cbiAgcHVibGljIGVuYWJsZSgpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5hY3RpdmVFbGVtZW50QmVmb3JlRGlzYWJsZSAmJiAhaXNTZXR0aW5nc1BhbmVsKHRoaXMuY29udGFpbmVyKSkge1xuICAgICAgdGhpcy5mb2N1c0VsZW1lbnQodGhpcy5hY3RpdmVFbGVtZW50QmVmb3JlRGlzYWJsZSk7XG4gICAgICB0aGlzLmFjdGl2ZUVsZW1lbnRCZWZvcmVEaXNhYmxlID0gdW5kZWZpbmVkO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmZvY3VzRmlyc3RFbGVtZW50KCk7XG4gICAgfVxuXG4gICAgdGhpcy50cmFja0VsZW1lbnRIb3ZlcigpO1xuICB9XG5cbiAgLyoqXG4gICAqIEFkZHMgZXZlbnQgbGlzdGVuZXIgZm9yIGBtb3VzZWVudGVyYCBvbiB0cmFja2VkIGVsZW1lbnRzIHRvIGVuc3VyZSB0cmFja2luZyBvZiBhY3RpdmUgZWxlbWVudCB3aWxsIHdvcmsgdG9nZXRoZXJcbiAgICogaW4gY29tYmluYXRpb24gb2YgdXNpbmcgbW91c2UgYW5kIGtleSBldmVudHMuXG4gICAqL1xuICBwcml2YXRlIHRyYWNrRWxlbWVudEhvdmVyKCk6IHZvaWQge1xuICAgIHRoaXMucmVtb3ZlRWxlbWVudEhvdmVyRXZlbnRMaXN0ZW5lcnMoKTtcblxuICAgIGNvbnN0IHJlbW92ZUV2ZW50TGlzdGVuZXJGdW5jdGlvbnMgPSBnZXRIdG1sRWxlbWVudHNGcm9tQ29tcG9uZW50cyh0aGlzLmNvbXBvbmVudHMpLm1hcChodG1sRWxlbSA9PiB7XG4gICAgICBjb25zdCBlbnRlckxpc3RlbmVyID0gdGhpcy5mb2N1c0VsZW1lbnQuYmluZCh0aGlzLCBodG1sRWxlbSk7XG4gICAgICBjb25zdCBleGl0TGlzdGVuZXIgPSAoKSA9PiB0aGlzLmRpc2FibGUoKTtcblxuICAgICAgdGhpcy5ldmVudFN1YnNjcmliZXIub24oaHRtbEVsZW0sICdtb3VzZWVudGVyJywgZW50ZXJMaXN0ZW5lcik7XG4gICAgICB0aGlzLmV2ZW50U3Vic2NyaWJlci5vbihodG1sRWxlbSwgJ21vdXNlbGVhdmUnLCBleGl0TGlzdGVuZXIpO1xuXG4gICAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICB0aGlzLmV2ZW50U3Vic2NyaWJlci5vZmYoaHRtbEVsZW0sICdtb3VzZWVudGVyJywgZW50ZXJMaXN0ZW5lcik7XG4gICAgICAgIHRoaXMuZXZlbnRTdWJzY3JpYmVyLm9mZihodG1sRWxlbSwgJ21vdXNlbGVhdmUnLCBleGl0TGlzdGVuZXIpO1xuICAgICAgfTtcbiAgICB9KTtcblxuICAgIHRoaXMucmVtb3ZlRWxlbWVudEhvdmVyRXZlbnRMaXN0ZW5lcnMgPSAoKSA9PiByZW1vdmVFdmVudExpc3RlbmVyRnVuY3Rpb25zLmZvckVhY2goZm4gPT4gZm4oKSk7XG4gIH1cblxuICAvKipcbiAgICogRGlzcG9zZSBvZiBuYXZpZ2F0aW9uIGdyb3VwXG4gICAqL1xuICBwdWJsaWMgcmVsZWFzZSgpOiB2b2lkIHtcbiAgICB0aGlzLmV2ZW50U3Vic2NyaWJlci5yZWxlYXNlKCk7XG4gICAgdGhpcy5hY3RpdmVFbGVtZW50ID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuY29tcG9uZW50cy5zcGxpY2UoMCwgdGhpcy5jb21wb25lbnRzLmxlbmd0aCk7XG4gICAgdGhpcy5yZW1vdmVFbGVtZW50SG92ZXJFdmVudExpc3RlbmVycygpO1xuICB9XG59XG4iLCJ0eXBlIExpc3RlbmVycyA9IChbTm9kZSwgRXZlbnRMaXN0ZW5lck9yRXZlbnRMaXN0ZW5lck9iamVjdCwgYm9vbGVhbiB8IEFkZEV2ZW50TGlzdGVuZXJPcHRpb25zXSlbXTtcblxuLyoqXG4gKiBBbGxvd3MgdG8gc3Vic2NyaWJlIHRvIE5vZGUgZXZlbnRzLlxuICovXG5leHBvcnQgY2xhc3MgTm9kZUV2ZW50U3Vic2NyaWJlciB7XG4gIHByaXZhdGUgcmVhZG9ubHkgYXR0YWNoZWRMaXN0ZW5lcnM6IE1hcDxrZXlvZiBIVE1MRWxlbWVudEV2ZW50TWFwLCBMaXN0ZW5lcnM+O1xuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMuYXR0YWNoZWRMaXN0ZW5lcnMgPSBuZXcgTWFwKCk7XG4gIH1cblxuICBwcml2YXRlIGdldEV2ZW50TGlzdGVuZXJzT2ZUeXBlKHR5cGU6IGtleW9mIEhUTUxFbGVtZW50RXZlbnRNYXApOiBMaXN0ZW5lcnMge1xuICAgIGlmICghdGhpcy5hdHRhY2hlZExpc3RlbmVycy5oYXModHlwZSkpIHtcbiAgICAgIHRoaXMuYXR0YWNoZWRMaXN0ZW5lcnMuc2V0KHR5cGUsIFtdKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5hdHRhY2hlZExpc3RlbmVycy5nZXQodHlwZSk7XG4gIH1cblxuICAvKipcbiAgICogQWRkcyB0aGUgZ2l2ZW4gZXZlbnQgbGlzdGVuZXIgdG8gdGhlIG5vZGUuXG4gICAqXG4gICAqIEBwYXJhbSBub2RlIFRoZSBub2RlIHRvIHJlbW92ZSB0aGUgZXZlbnQgbGlzdGVuZXIgZnJvbVxuICAgKiBAcGFyYW0gdHlwZSBUaGUgZXZlbnQgdG8gbGlzdGVuIHRvXG4gICAqIEBwYXJhbSBsaXN0ZW5lciBUaGUgbGlzdGVuZXIgdG8gcmVtb3ZlXG4gICAqIEBwYXJhbSBvcHRpb25zIFRoZSBldmVudCBsaXN0ZW5lciBvcHRpb25zXG4gICAqL1xuICBwdWJsaWMgb24oXG4gICAgbm9kZTogTm9kZSxcbiAgICB0eXBlOiBrZXlvZiBIVE1MRWxlbWVudEV2ZW50TWFwLFxuICAgIGxpc3RlbmVyOiBFdmVudExpc3RlbmVyT3JFdmVudExpc3RlbmVyT2JqZWN0LFxuICAgIG9wdGlvbnM/OiBib29sZWFuIHwgQWRkRXZlbnRMaXN0ZW5lck9wdGlvbnMsXG4gICk6IHZvaWQge1xuICAgIG5vZGUuYWRkRXZlbnRMaXN0ZW5lcih0eXBlLCBsaXN0ZW5lciwgb3B0aW9ucyk7XG4gICAgdGhpcy5nZXRFdmVudExpc3RlbmVyc09mVHlwZSh0eXBlKS5wdXNoKFtub2RlLCBsaXN0ZW5lciwgb3B0aW9uc10pO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlbW92ZXMgdGhlIGdpdmVuIGV2ZW50IGxpc3RlbmVyIGZyb20gdGhlIG5vZGUuXG4gICAqXG4gICAqIEBwYXJhbSBub2RlIFRoZSBub2RlIHRvIGF0dGFjaCB0aGUgZXZlbnQgbGlzdGVuZXIgdG9cbiAgICogQHBhcmFtIHR5cGUgVGhlIGV2ZW50IHRvIGxpc3RlbiB0b1xuICAgKiBAcGFyYW0gbGlzdGVuZXIgVGhlIGxpc3RlbmVyIHRvIGFkZFxuICAgKiBAcGFyYW0gb3B0aW9ucyBUaGUgZXZlbnQgbGlzdGVuZXIgb3B0aW9uc1xuICAgKi9cbiAgcHVibGljIG9mZihcbiAgICBub2RlOiBOb2RlLFxuICAgIHR5cGU6IGtleW9mIEhUTUxFbGVtZW50RXZlbnRNYXAsXG4gICAgbGlzdGVuZXI6IEV2ZW50TGlzdGVuZXJPckV2ZW50TGlzdGVuZXJPYmplY3QsXG4gICAgb3B0aW9ucz86IGJvb2xlYW4gfCBBZGRFdmVudExpc3RlbmVyT3B0aW9ucyxcbiAgKTogdm9pZCB7XG4gICAgY29uc3QgbGlzdGVuZXJzT2ZUeXBlID0gdGhpcy5nZXRFdmVudExpc3RlbmVyc09mVHlwZSh0eXBlKTtcbiAgICBjb25zdCBsaXN0ZW5lckluZGV4ID0gbGlzdGVuZXJzT2ZUeXBlLmZpbmRJbmRleCgoW290aGVyTm9kZSwgb3RoZXJMaXN0ZW5lciwgb3RoZXJPcHRpb25zXSkgPT4ge1xuICAgICAgcmV0dXJuIG90aGVyTm9kZSA9PT0gbm9kZSAmJiBvdGhlckxpc3RlbmVyID09PSBsaXN0ZW5lciAmJiBvdGhlck9wdGlvbnMgPT09IG9wdGlvbnM7XG4gICAgfSk7XG5cbiAgICBub2RlLnJlbW92ZUV2ZW50TGlzdGVuZXIodHlwZSwgbGlzdGVuZXIsIG9wdGlvbnMpO1xuXG4gICAgaWYgKGxpc3RlbmVySW5kZXggPiAtMSkge1xuICAgICAgbGlzdGVuZXJzT2ZUeXBlLnNwbGljZShsaXN0ZW5lckluZGV4LCAxKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUmVtb3ZlcyBhbGwgYXR0YWNoZWQgZXZlbnQgbGlzdGVuZXJzLlxuICAgKi9cbiAgcHVibGljIHJlbGVhc2UoKTogdm9pZCB7XG4gICAgdGhpcy5hdHRhY2hlZExpc3RlbmVycy5mb3JFYWNoKChsaXN0ZW5lcnNPZlR5cGUsIHR5cGUpID0+IHtcbiAgICAgIGxpc3RlbmVyc09mVHlwZS5mb3JFYWNoKChbZWxlbWVudCwgbGlzdGVuZXIsIG9wdGlvbnNdKSA9PiB7XG4gICAgICAgIHRoaXMub2ZmKGVsZW1lbnQsIHR5cGUsIGxpc3RlbmVyLCBvcHRpb25zKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICAgIHRoaXMuYXR0YWNoZWRMaXN0ZW5lcnMuY2xlYXIoKTtcbiAgfVxufVxuIiwiaW1wb3J0IHsgTmF2aWdhdGlvbkdyb3VwIH0gZnJvbSAnLi9uYXZpZ2F0aW9uZ3JvdXAnO1xuaW1wb3J0IHsgQ29tcG9uZW50IH0gZnJvbSAnLi4vY29tcG9uZW50cy9jb21wb25lbnQnO1xuaW1wb3J0IHsgVUlDb250YWluZXIgfSBmcm9tICcuLi9jb21wb25lbnRzL3VpY29udGFpbmVyJztcbmltcG9ydCB7IEFjdGlvbiwgRGlyZWN0aW9uIH0gZnJvbSAnLi90eXBlcyc7XG5cbi8qKlxuICogRXh0ZW5kcyBOYXZpZ2F0aW9uR3JvdXAgYW5kIHByb3ZpZGVzIGFkZGl0aW9uYWwgbG9naWMgZm9yIGhpZGluZyBhbmQgc2hvd2luZyB0aGUgVUkgb24gdGhlIHJvb3QgY29udGFpbmVyLlxuICpcbiAqIEBjYXRlZ29yeSBDb21wb25lbnRzXG4gKi9cbmV4cG9ydCBjbGFzcyBSb290TmF2aWdhdGlvbkdyb3VwIGV4dGVuZHMgTmF2aWdhdGlvbkdyb3VwIHtcbiAgY29uc3RydWN0b3IocHVibGljIHJlYWRvbmx5IGNvbnRhaW5lcjogVUlDb250YWluZXIsIC4uLmVsZW1lbnRzOiBDb21wb25lbnQ8dW5rbm93bj5bXSkge1xuICAgIHN1cGVyKGNvbnRhaW5lciwgLi4uZWxlbWVudHMpO1xuICB9XG5cbiAgcHVibGljIGhhbmRsZUFjdGlvbihhY3Rpb246IEFjdGlvbikge1xuICAgIHRoaXMuY29udGFpbmVyLnNob3dVaSgpO1xuXG4gICAgc3VwZXIuaGFuZGxlQWN0aW9uKGFjdGlvbik7XG4gIH1cblxuICBwdWJsaWMgaGFuZGxlTmF2aWdhdGlvbihkaXJlY3Rpb246IERpcmVjdGlvbikge1xuICAgIHRoaXMuY29udGFpbmVyLnNob3dVaSgpO1xuXG4gICAgc3VwZXIuaGFuZGxlTmF2aWdhdGlvbihkaXJlY3Rpb24pO1xuICB9XG5cbiAgcHJvdGVjdGVkIGRlZmF1bHRBY3Rpb25IYW5kbGVyKGFjdGlvbjogQWN0aW9uKTogdm9pZCB7XG4gICAgaWYgKGFjdGlvbiA9PT0gQWN0aW9uLkJBQ0spIHtcbiAgICAgIHRoaXMuY29udGFpbmVyLmhpZGVVaSgpO1xuICAgIH0gZWxzZSB7XG4gICAgICBzdXBlci5kZWZhdWx0QWN0aW9uSGFuZGxlcihhY3Rpb24pO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyByZWxlYXNlKCk6IHZvaWQge1xuICAgIHN1cGVyLnJlbGVhc2UoKTtcbiAgfVxufVxuIiwiaW1wb3J0IHsgUm9vdE5hdmlnYXRpb25Hcm91cCB9IGZyb20gJy4vcm9vdG5hdmlnYXRpb25ncm91cCc7XG5pbXBvcnQgeyBOb2RlRXZlbnRTdWJzY3JpYmVyIH0gZnJvbSAnLi9ub2RlZXZlbnRzdWJzY3JpYmVyJztcbmltcG9ydCB7IEFjdGlvbiwgRGlyZWN0aW9uIH0gZnJvbSAnLi90eXBlcyc7XG5pbXBvcnQge2dldEJvdW5kaW5nUmVjdEZyb21FbGVtZW50fSBmcm9tICcuL25hdmlnYXRpb25hbGdvcml0aG0nO1xuXG5jb25zdCBEZWZhdWx0U2NydWJTcGVlZFBlcmNlbnRhZ2UgPSAwLjAwNTtcbmNvbnN0IFNjcnViU3BlZWRDbGVhckludGVydmFsID0gMTAwO1xuY29uc3QgU2NydWJTcGVlZE11bHRpcGxpZXIgPSAxLjE7XG5cbi8qKlxuICogSGFuZGxlcyBTcGF0aWFsIE5hdmlnYXRpb24gaW50ZXJhY3Rpb24gd2l0aCB0aGUgc2VlayBiYXIuIEVuc3VyZXMsIHRoYXQgc2VlayBvcGVyYXRpb25zIGNhbiBiZSBleGVjdXRlZCBhbmQgdGhhdCB0aGVcbiAqIHNjcnViYmluZyB0b29sdGlwIGlzIHNob3duIGFzIGlmIHRoZSB1c2VyIHNjcnViYmVkIHVzaW5nIHRoZSBtb3VzZS90b3VjaHNjcmVlbi5cbiAqL1xuZXhwb3J0IGNsYXNzIFNlZWtCYXJIYW5kbGVyIHtcbiAgcHJpdmF0ZSByZWFkb25seSBjdXJzb3JQb3NpdGlvbiA9IHsgeDogMCwgeTogMH07XG4gIHByaXZhdGUgcmVhZG9ubHkgZXZlbnRTdWJzY3JpYmVyOiBOb2RlRXZlbnRTdWJzY3JpYmVyO1xuICBwcml2YXRlIGlzU2NydWJiaW5nID0gZmFsc2U7XG4gIHByaXZhdGUgc2NydWJTcGVlZFJlc2V0VGltZW91dDogbnVtYmVyO1xuICBwcml2YXRlIHNjcnViU3BlZWRQZXJjZW50YWdlID0gRGVmYXVsdFNjcnViU3BlZWRQZXJjZW50YWdlO1xuXG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgcmVhZG9ubHkgcm9vdE5hdmlnYXRpb25Hcm91cDogUm9vdE5hdmlnYXRpb25Hcm91cCkge1xuICAgIHRoaXMucm9vdE5hdmlnYXRpb25Hcm91cC5vbkFjdGlvbiA9IHRoaXMub25BY3Rpb247XG4gICAgdGhpcy5ldmVudFN1YnNjcmliZXIgPSBuZXcgTm9kZUV2ZW50U3Vic2NyaWJlcigpO1xuICAgIHRoaXMucm9vdE5hdmlnYXRpb25Hcm91cC5vbk5hdmlnYXRpb24gPSB0aGlzLm9uTmF2aWdhdGlvbjtcbiAgfVxuXG4gIHByaXZhdGUgdXBkYXRlU2NydWJTcGVlZFBlcmNlbnRhZ2UoKTogdm9pZCB7XG4gICAgY2xlYXJUaW1lb3V0KHRoaXMuc2NydWJTcGVlZFJlc2V0VGltZW91dCk7XG4gICAgdGhpcy5zY3J1YlNwZWVkUGVyY2VudGFnZSAqPSBTY3J1YlNwZWVkTXVsdGlwbGllcjtcbiAgICB0aGlzLnNjcnViU3BlZWRSZXNldFRpbWVvdXQgPSB3aW5kb3cuc2V0VGltZW91dChcbiAgICAgICgpID0+IHRoaXMuc2NydWJTcGVlZFBlcmNlbnRhZ2UgPSBEZWZhdWx0U2NydWJTcGVlZFBlcmNlbnRhZ2UsIFNjcnViU3BlZWRDbGVhckludGVydmFsLFxuICAgICk7XG4gIH1cblxuICBwcml2YXRlIGdldEluY3JlbWVudChkaXJlY3Rpb246IERpcmVjdGlvbiwgc2Vla0JhcldyYXBwZXI6IEhUTUxFbGVtZW50KTogbnVtYmVyIHtcbiAgICB0aGlzLnVwZGF0ZVNjcnViU3BlZWRQZXJjZW50YWdlKCk7XG5cbiAgICBjb25zdCBzZWVrQmFyV2lkdGggPSBzZWVrQmFyV3JhcHBlci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS53aWR0aDtcbiAgICBjb25zdCBpbmNyZW1lbnQgPSBzZWVrQmFyV2lkdGggKiB0aGlzLnNjcnViU3BlZWRQZXJjZW50YWdlO1xuXG4gICAgcmV0dXJuIGRpcmVjdGlvbiA9PT0gRGlyZWN0aW9uLlJJR0hUID8gaW5jcmVtZW50IDogLWluY3JlbWVudDtcbiAgfVxuXG4gIHByaXZhdGUgcmVzZXRDdXJzb3JQb3NpdGlvbigpOiB2b2lkIHtcbiAgICB0aGlzLmN1cnNvclBvc2l0aW9uLnggPSAwO1xuICAgIHRoaXMuY3Vyc29yUG9zaXRpb24ueSA9IDA7XG4gIH1cblxuICBwcml2YXRlIHVwZGF0ZUN1cnNvclBvc2l0aW9uKGRpcmVjdGlvbjogRGlyZWN0aW9uLCBzZWVrQmFyV3JhcHBlcjogSFRNTEVsZW1lbnQpOiB2b2lkIHtcbiAgICB0aGlzLmN1cnNvclBvc2l0aW9uLnggKz0gdGhpcy5nZXRJbmNyZW1lbnQoZGlyZWN0aW9uLCBzZWVrQmFyV3JhcHBlcik7XG4gIH1cblxuICBwcml2YXRlIGluaXRpYWxpemVDdXJzb3JQb3NpdGlvbihzZWVrQmFyV3JhcHBlcjogSFRNTEVsZW1lbnQpOiB2b2lkIHtcbiAgICBjb25zdCBwbGF5YmFja1Bvc2l0aW9uTWFya2VyID0gZ2V0UGxheWJhY2tQb3NpdGlvbk1hcmtlcihzZWVrQmFyV3JhcHBlcik7XG4gICAgY29uc3QgcmVjdCA9IGdldEJvdW5kaW5nUmVjdEZyb21FbGVtZW50KHBsYXliYWNrUG9zaXRpb25NYXJrZXIpO1xuXG5cbiAgICBjb25zdCBzdGFydFggPSByZWN0LnggKyAocmVjdC53aWR0aCAvIDIpO1xuICAgIGNvbnN0IHN0YXJ0WSA9IHJlY3QueTtcblxuICAgIHRoaXMuY3Vyc29yUG9zaXRpb24ueCA9IHN0YXJ0WDtcbiAgICB0aGlzLmN1cnNvclBvc2l0aW9uLnkgPSBzdGFydFk7XG4gIH1cblxuICBwcml2YXRlIGluaXRpYWxpemVPclVwZGF0ZUN1cnNvclBvc2l0aW9uKHNlZWtCYXJXcmFwcGVyOiBIVE1MRWxlbWVudCwgZGlyZWN0aW9uOiBEaXJlY3Rpb24pOiB2b2lkIHtcbiAgICBpZiAodGhpcy5pc1NjcnViYmluZykge1xuICAgICAgdGhpcy51cGRhdGVDdXJzb3JQb3NpdGlvbihkaXJlY3Rpb24sIHNlZWtCYXJXcmFwcGVyKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5pbml0aWFsaXplQ3Vyc29yUG9zaXRpb24oc2Vla0JhcldyYXBwZXIpO1xuICAgIH1cblxuICAgIHRoaXMuaXNTY3J1YmJpbmcgPSB0cnVlO1xuICB9XG5cbiAgcHJpdmF0ZSBnZXRDdXJzb3JQb3NpdGlvbk1vdXNlRXZlbnRJbml0KCk6IE1vdXNlRXZlbnRJbml0IHtcbiAgICByZXR1cm4ge1xuICAgICAgY2xpZW50WDogdGhpcy5jdXJzb3JQb3NpdGlvbi54LFxuICAgICAgY2xpZW50WTogdGhpcy5jdXJzb3JQb3NpdGlvbi55LFxuICAgIH07XG4gIH1cblxuICBwcml2YXRlIGRpc3BhdGNoTW91c2VNb3ZlRXZlbnQoc2Vla0JhcjogRWxlbWVudCk6IHZvaWQge1xuICAgIHNlZWtCYXIuZGlzcGF0Y2hFdmVudChuZXcgTW91c2VFdmVudCgnbW91c2Vtb3ZlJywgdGhpcy5nZXRDdXJzb3JQb3NpdGlvbk1vdXNlRXZlbnRJbml0KCkpKTtcbiAgfVxuXG4gIHByaXZhdGUgcmVhZG9ubHkgb25OYXZpZ2F0aW9uID0gKGRpcmVjdGlvbjogRGlyZWN0aW9uLCB0YXJnZXQ6IEhUTUxFbGVtZW50LCBwcmV2ZW50RGVmYXVsdDogKCkgPT4gdm9pZCk6IHZvaWQgPT4ge1xuICAgIGlmICghaXNTZWVrQmFyV3JhcHBlcih0YXJnZXQpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKGRpcmVjdGlvbiA9PT0gRGlyZWN0aW9uLlVQIHx8IGRpcmVjdGlvbiA9PT0gRGlyZWN0aW9uLkRPV04pIHtcbiAgICAgIHRoaXMuc3RvcFNlZWtpbmcoZ2V0U2Vla0Jhcih0YXJnZXQpKTtcblxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMuaW5pdGlhbGl6ZU9yVXBkYXRlQ3Vyc29yUG9zaXRpb24odGFyZ2V0LCBkaXJlY3Rpb24pO1xuICAgIHRoaXMuZGlzcGF0Y2hNb3VzZU1vdmVFdmVudChnZXRTZWVrQmFyKHRhcmdldCkpO1xuXG4gICAgcHJldmVudERlZmF1bHQoKTtcbiAgfTtcblxuICBwcml2YXRlIGRpc3BhdGNoTW91c2VDbGlja0V2ZW50KHNlZWtCYXI6IEVsZW1lbnQpOiB2b2lkIHtcbiAgICBjb25zdCBtb3VzZURvd25IYW5kbGVyID0gKCkgPT4ge1xuICAgICAgY29uc3QgbW91c2VFdmVudEluaXQgPSB0aGlzLmdldEN1cnNvclBvc2l0aW9uTW91c2VFdmVudEluaXQoKTtcblxuICAgICAgZG9jdW1lbnQuZGlzcGF0Y2hFdmVudChuZXcgTW91c2VFdmVudCgnbW91c2V1cCcsIG1vdXNlRXZlbnRJbml0KSk7XG4gICAgICB0aGlzLmV2ZW50U3Vic2NyaWJlci5vZmYoc2Vla0JhciwgJ21vdXNlZG93bicsIG1vdXNlRG93bkhhbmRsZXIpO1xuICAgICAgdGhpcy5zdG9wU2Vla2luZyhzZWVrQmFyKTtcbiAgICB9O1xuXG4gICAgdGhpcy5ldmVudFN1YnNjcmliZXIub24oc2Vla0JhciwgJ21vdXNlZG93bicsIG1vdXNlRG93bkhhbmRsZXIpO1xuICAgIHNlZWtCYXIuZGlzcGF0Y2hFdmVudChuZXcgTW91c2VFdmVudCgnbW91c2Vkb3duJykpO1xuICB9XG5cbiAgcHJpdmF0ZSBzdG9wU2Vla2luZyhzZWVrQmFyOiBFbGVtZW50KTogdm9pZCB7XG4gICAgdGhpcy5yZXNldEN1cnNvclBvc2l0aW9uKCk7XG4gICAgdGhpcy5pc1NjcnViYmluZyA9IGZhbHNlO1xuICAgIHRoaXMuZGlzcGF0Y2hNb3VzZUxlYXZlRXZlbnQoc2Vla0Jhcik7XG4gIH1cblxuICBwcml2YXRlIGRpc3BhdGNoTW91c2VMZWF2ZUV2ZW50KHNlZWtCYXI6IEVsZW1lbnQpOiB2b2lkIHtcbiAgICBzZWVrQmFyLmRpc3BhdGNoRXZlbnQobmV3IE1vdXNlRXZlbnQoJ21vdXNlbGVhdmUnKSk7XG4gIH1cblxuICBwcml2YXRlIHJlYWRvbmx5IG9uQWN0aW9uID0gKGFjdGlvbjogQWN0aW9uLCB0YXJnZXQ6IEhUTUxFbGVtZW50LCBwcmV2ZW50RGVmYXVsdDogKCkgPT4gdm9pZCk6IHZvaWQgPT4ge1xuICAgIGlmICghaXNTZWVrQmFyV3JhcHBlcih0YXJnZXQpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3Qgc2Vla0JhciA9IGdldFNlZWtCYXIodGFyZ2V0KTtcblxuICAgIGlmIChhY3Rpb24gPT09IEFjdGlvbi5TRUxFQ1QgJiYgdGhpcy5pc1NjcnViYmluZykge1xuICAgICAgdGhpcy5kaXNwYXRjaE1vdXNlQ2xpY2tFdmVudChzZWVrQmFyKTtcbiAgICAgIHByZXZlbnREZWZhdWx0KCk7XG4gICAgfSBlbHNlIGlmIChhY3Rpb24gPT09IEFjdGlvbi5CQUNLKSB7XG4gICAgICB0aGlzLnN0b3BTZWVraW5nKHNlZWtCYXIpO1xuICAgICAgcHJldmVudERlZmF1bHQoKTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIFJlbGVhc2VzIHRoZSBTZWVrQnJhSGFuZGxlciwgbWFraW5nIHN1cmUgYWxsIGV2ZW50IHN1YnNjcmliZXJzIGFyZSByZW1vdmVkLlxuICAgKi9cbiAgcHVibGljIHJlbGVhc2UoKTogdm9pZCB7XG4gICAgdGhpcy5ldmVudFN1YnNjcmliZXIucmVsZWFzZSgpO1xuICAgIHRoaXMucm9vdE5hdmlnYXRpb25Hcm91cC5vbkFjdGlvbiA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLnJvb3ROYXZpZ2F0aW9uR3JvdXAub25OYXZpZ2F0aW9uID0gdW5kZWZpbmVkO1xuICB9XG59XG5cbmZ1bmN0aW9uIGlzU2Vla0JhcldyYXBwZXIoZWxlbWVudDogSFRNTEVsZW1lbnQpOiBib29sZWFuIHtcbiAgcmV0dXJuIEFycmF5LmZyb20oZWxlbWVudC5jbGFzc0xpc3QpLmZpbmRJbmRleChjbGFzc05hbWUgPT4gLy11aS1zZWVrYmFyJC8udGVzdChjbGFzc05hbWUpKSA+IC0xO1xufVxuXG5mdW5jdGlvbiBnZXRTZWVrQmFyKHNlZWtCYXJXcmFwcGVyOiBIVE1MRWxlbWVudCk6IEVsZW1lbnQge1xuICByZXR1cm4gc2Vla0JhcldyYXBwZXIuY2hpbGRyZW4uaXRlbSgwKTtcbn1cblxuZnVuY3Rpb24gZ2V0UGxheWJhY2tQb3NpdGlvbk1hcmtlcihzZWVrQmFyV3JhcHBlcjogSFRNTEVsZW1lbnQpOiBIVE1MRWxlbWVudCB7XG4gIHJldHVybiBzZWVrQmFyV3JhcHBlci5xdWVyeVNlbGVjdG9yKCdbY2xhc3MqPVwic2Vla2Jhci1wbGF5YmFja3Bvc2l0aW9uLW1hcmtlclwiXScpO1xufVxuIiwiaW1wb3J0IHsgTmF2aWdhdGlvbkdyb3VwIH0gZnJvbSAnLi9uYXZpZ2F0aW9uZ3JvdXAnO1xuaW1wb3J0IHsgUm9vdE5hdmlnYXRpb25Hcm91cCB9IGZyb20gJy4vcm9vdG5hdmlnYXRpb25ncm91cCc7XG5pbXBvcnQgeyBOb2RlRXZlbnRTdWJzY3JpYmVyIH0gZnJvbSAnLi9ub2RlZXZlbnRzdWJzY3JpYmVyJztcbmltcG9ydCB7IFNlZWtCYXJIYW5kbGVyIH0gZnJvbSAnLi9zZWVrYmFyaGFuZGxlcic7XG5pbXBvcnQgeyBnZXRLZXlNYXBGb3JQbGF0Zm9ybSB9IGZyb20gJy4va2V5bWFwJztcbmltcG9ydCB7IEFjdGlvbiwgRGlyZWN0aW9uLCBLZXlNYXAgfSBmcm9tICcuL3R5cGVzJztcbmltcG9ydCB7IGlzQWN0aW9uLCBpc0RpcmVjdGlvbiB9IGZyb20gJy4vdHlwZWd1YXJkcyc7XG5cbi8qKlxuICogU3BhdGlhbE5hdmlnYXRpb24ga2VlcHMgdHJhY2sgb2YgYWxsIG5hdmlnYXRpb24gZ3JvdXBzLCBhbmQgdXBkYXRlcyB0aGUgYWN0aXZlIG5hdmlnYXRpb24gZ3JvdXAgd2hlbiB2aXNpYmlsaXR5XG4gKiBjaGFuZ2VzIG9uIGdyb3VwIGNvbnRhaW5lci5cbiAqXG4gKiBJdCBsaXN0ZW5zIHRvIGtleSBldmVudHMsIGFuZCB0cmlnZ2VycyBlaXRoZXIgaGFuZGxlTmF2aWdhdGlvbiBvciBoYW5kbGVBY3Rpb24gb24gdGhlIGFjdGl2ZSBncm91cC5cbiAqIFNlZWtCYXJIYW5kbGVyIHdpbGwgZ2V0IGluc3RhbnRpYXRlZCB3aXRoIHJvb3QgbmF2aWdhdGlvbiBncm91cCBhbmQgZGlzcG9zZWQgb24gcmVsZWFzZSBvZiB0aGUgc3BhdGlhbCBuYXZpZ2F0aW9uLlxuICovXG5leHBvcnQgY2xhc3MgU3BhdGlhbE5hdmlnYXRpb24ge1xuICBwcml2YXRlIHVuc3Vic2NyaWJlVmlzaWJpbGl0eUNoYW5nZXNGbnM6ICgoKSA9PiB2b2lkKVtdO1xuICBwcml2YXRlIHJlYWRvbmx5IG5hdmlnYXRpb25Hcm91cHM6IE5hdmlnYXRpb25Hcm91cFtdID0gW107XG4gIHByaXZhdGUgcmVhZG9ubHkgYWN0aXZlTmF2aWdhdGlvbkdyb3VwczogTmF2aWdhdGlvbkdyb3VwW107XG4gIHByaXZhdGUgcmVhZG9ubHkgZXZlbnRTdWJzY3JpYmVyOiBOb2RlRXZlbnRTdWJzY3JpYmVyO1xuICBwcml2YXRlIHJlYWRvbmx5IHNlZWtCYXJIYW5kbGVyOiBTZWVrQmFySGFuZGxlcjtcbiAgcHJpdmF0ZSByZWFkb25seSBrZXlNYXA6IEtleU1hcDtcblxuICBjb25zdHJ1Y3Rvcihyb290TmF2aWdhdGlvbkdyb3VwOiBSb290TmF2aWdhdGlvbkdyb3VwLCAuLi5uYXZpZ2F0aW9uR3JvdXBzOiBOYXZpZ2F0aW9uR3JvdXBbXSkge1xuICAgIHRoaXMuc2Vla0JhckhhbmRsZXIgPSBuZXcgU2Vla0JhckhhbmRsZXIocm9vdE5hdmlnYXRpb25Hcm91cCk7XG5cbiAgICB0aGlzLmFjdGl2ZU5hdmlnYXRpb25Hcm91cHMgPSBbXTtcbiAgICB0aGlzLnVuc3Vic2NyaWJlVmlzaWJpbGl0eUNoYW5nZXNGbnMgPSBbXTtcbiAgICB0aGlzLmV2ZW50U3Vic2NyaWJlciA9IG5ldyBOb2RlRXZlbnRTdWJzY3JpYmVyKCk7XG4gICAgdGhpcy5uYXZpZ2F0aW9uR3JvdXBzID0gW3Jvb3ROYXZpZ2F0aW9uR3JvdXAsIC4uLm5hdmlnYXRpb25Hcm91cHNdO1xuICAgIHRoaXMua2V5TWFwID0gZ2V0S2V5TWFwRm9yUGxhdGZvcm0oKTtcblxuICAgIHRoaXMuc3Vic2NyaWJlVG9OYXZpZ2F0aW9uR3JvdXBWaXNpYmlsaXR5Q2hhbmdlcygpO1xuICAgIHRoaXMuYXR0YWNoS2V5RXZlbnRIYW5kbGVyKCk7XG4gICAgdGhpcy5lbmFibGVEZWZhdWx0TmF2aWdhdGlvbkdyb3VwKCk7XG4gIH1cblxuICBwcml2YXRlIGF0dGFjaEtleUV2ZW50SGFuZGxlcigpOiB2b2lkIHtcbiAgICB0aGlzLmV2ZW50U3Vic2NyaWJlci5vbihkb2N1bWVudCwgJ2tleWRvd24nLCB0aGlzLmhhbmRsZUtleUV2ZW50LCB0cnVlKTtcbiAgfVxuXG4gIHByaXZhdGUgb25TaG93ID0gKGdyb3VwOiBOYXZpZ2F0aW9uR3JvdXApOiB2b2lkID0+IHtcbiAgICB0aGlzLmFjdGl2ZU5hdmlnYXRpb25Hcm91cHMucHVzaChncm91cCk7XG4gICAgdGhpcy51cGRhdGVFbmFibGVkTmF2aWdhdGlvbkdyb3VwKCk7XG4gIH07XG5cbiAgcHJpdmF0ZSBvbkhpZGUgPSAoZ3JvdXA6IE5hdmlnYXRpb25Hcm91cCk6IHZvaWQgPT4ge1xuICAgIGNvbnN0IGdyb3VwSW5kZXggPSB0aGlzLmFjdGl2ZU5hdmlnYXRpb25Hcm91cHMuZmluZEluZGV4KG90aGVyID0+IG90aGVyID09PSBncm91cCk7XG5cbiAgICBpZiAoZ3JvdXBJbmRleCA+IC0xKSB7XG4gICAgICBncm91cC5kaXNhYmxlKCk7XG4gICAgICB0aGlzLmFjdGl2ZU5hdmlnYXRpb25Hcm91cHMuc3BsaWNlKGdyb3VwSW5kZXgsIDEpO1xuICAgICAgdGhpcy51cGRhdGVFbmFibGVkTmF2aWdhdGlvbkdyb3VwKCk7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBTdWJzY3JpYmVzIHRvIG9uSGlkZSBhbmQgb25TaG93IG9uIGFsbCBuYXZpZ2F0aW9uIGdyb3VwcyBjb250YWluZXJzIGFzIFNwYXRpYWwgbmF2aWdhdGlvbiB0cmFja3MgYWN0aXZlIG5hdmlnYXRpb25cbiAgICogZ3JvdXAgYmFzZWQgb24gdGhlaXIgY29udGFpbmVyIHZpc2liaWxpdHkuXG4gICAqL1xuICBwcml2YXRlIHN1YnNjcmliZVRvTmF2aWdhdGlvbkdyb3VwVmlzaWJpbGl0eUNoYW5nZXMoKTogdm9pZCB7XG4gICAgdGhpcy5uYXZpZ2F0aW9uR3JvdXBzLmZvckVhY2goZ3JvdXAgPT4ge1xuICAgICAgY29uc3Qgb25TaG93SGFuZGxlciA9ICgpID0+IHRoaXMub25TaG93KGdyb3VwKTtcbiAgICAgIGNvbnN0IG9uSGlkZUhhbmRsZXIgPSAoKSA9PiB0aGlzLm9uSGlkZShncm91cCk7XG5cbiAgICAgIGdyb3VwLmNvbnRhaW5lci5vblNob3cuc3Vic2NyaWJlKG9uU2hvd0hhbmRsZXIpO1xuICAgICAgZ3JvdXAuY29udGFpbmVyLm9uSGlkZS5zdWJzY3JpYmUob25IaWRlSGFuZGxlcik7XG5cbiAgICAgIHRoaXMudW5zdWJzY3JpYmVWaXNpYmlsaXR5Q2hhbmdlc0Zucy5wdXNoKFxuICAgICAgICAoKSA9PiBncm91cC5jb250YWluZXIub25TaG93LnVuc3Vic2NyaWJlKG9uU2hvd0hhbmRsZXIpLFxuICAgICAgICAoKSA9PiBncm91cC5jb250YWluZXIub25IaWRlLnVuc3Vic2NyaWJlKG9uSGlkZUhhbmRsZXIpLFxuICAgICAgKTtcbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgdW5zdWJzY3JpYmVGcm9tTmF2aWdhdGlvbkdyb3VwVmlzaWJpbGl0eUNoYW5nZXMoKTogdm9pZCB7XG4gICAgdGhpcy51bnN1YnNjcmliZVZpc2liaWxpdHlDaGFuZ2VzRm5zLmZvckVhY2godW5zdWIgPT4gdW5zdWIoKSk7XG4gICAgdGhpcy51bnN1YnNjcmliZVZpc2liaWxpdHlDaGFuZ2VzRm5zID0gW107XG4gIH1cblxuICAvKipcbiAgICogSXQgd2lsbCBlbmFibGUgZ3JvdXAgb2Ygd2hpY2ggY29udGFpbmVyIGlzIGN1cnJlbnRseSBzaG93blxuICAgKiBJZiB0aGVyZSBhcmUgbm8gZ3JvdXBzIHdpdGggY29udGFpbmVycyB0aGF0IGFyZSBjdXJyZW50bHkgdmlzaWJsZSwgaXQgd2lsbCBlbmFibGUgcm9vdCBuYXZpZ2F0aW9uIGdyb3VwXG4gICAqL1xuICBwcml2YXRlIGVuYWJsZURlZmF1bHROYXZpZ2F0aW9uR3JvdXAoKTogdm9pZCB7XG4gICAgY29uc3QgaXNTaG93biA9IChncm91cDogTmF2aWdhdGlvbkdyb3VwKSA9PiBncm91cC5jb250YWluZXIuaXNTaG93bigpO1xuICAgIGNvbnN0IGdyb3VwVG9FbmFibGUgPSB0aGlzLm5hdmlnYXRpb25Hcm91cHMuZmluZChpc1Nob3duKSA/PyB0aGlzLm5hdmlnYXRpb25Hcm91cHNbMF07XG5cbiAgICBpZiAoZ3JvdXBUb0VuYWJsZSkge1xuICAgICAgdGhpcy5hY3RpdmVOYXZpZ2F0aW9uR3JvdXBzLnB1c2goZ3JvdXBUb0VuYWJsZSk7XG4gICAgICB0aGlzLnVwZGF0ZUVuYWJsZWROYXZpZ2F0aW9uR3JvdXAoKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogRGlzYWJsZXMgbmF2aWdhdGlvbiBncm91cHMgdGhhdCBhcmUgbm8gbG9uZ2VyIGFjdGl2ZSBhbmQgY2FsbHMgZW5hYmxlIG9uIGxhc3QgcHVzaGVkIG5hdmlnYXRpb24gZ3JvdXBcbiAgICovXG4gIHByaXZhdGUgdXBkYXRlRW5hYmxlZE5hdmlnYXRpb25Hcm91cCgpOiB2b2lkIHtcbiAgICB0aGlzLmFjdGl2ZU5hdmlnYXRpb25Hcm91cHMuZm9yRWFjaCgoZ3JvdXAsIGlkeCkgPT4ge1xuICAgICAgaWYgKGlkeCA8IHRoaXMuYWN0aXZlTmF2aWdhdGlvbkdyb3Vwcy5sZW5ndGggLSAxKSB7XG4gICAgICAgIGdyb3VwLmRpc2FibGUoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGdyb3VwLmVuYWJsZSgpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgY3VycmVudGx5IGFjdGl2ZSBuYXZpZ2F0aW9uIGdyb3VwXG4gICAqL1xuICBwdWJsaWMgZ2V0QWN0aXZlTmF2aWdhdGlvbkdyb3VwKCk6IE5hdmlnYXRpb25Hcm91cCB8IHVuZGVmaW5lZCB7XG4gICAgcmV0dXJuIHRoaXMuYWN0aXZlTmF2aWdhdGlvbkdyb3Vwc1t0aGlzLmFjdGl2ZU5hdmlnYXRpb25Hcm91cHMubGVuZ3RoIC0gMV07XG4gIH1cblxuICAvKipcbiAgICogQ2hlY2tzIGlmIGtleWJvYXJkIGV2ZW50IGtleWNvZGUgaXMgdHJhY2tlZCBlaXRoZXIgYXMgRGlyZWN0aW9uIG9yIEFjdGlvbiBhbmQgY2FsbHMgYXBwcm9wcmlhdGUgaGFuZGxlciBvbiBhY3RpdmVcbiAgICogbmF2aWdhdGlvbiBncm91cFxuICAgKlxuICAgKiBAcGFyYW0gZSB7S2V5Ym9hcmRFdmVudH1cbiAgICovXG4gIHByaXZhdGUgaGFuZGxlS2V5RXZlbnQgPSAoZTogS2V5Ym9hcmRFdmVudCk6IHZvaWQgPT4ge1xuICAgIGNvbnN0IGV2ZW50OiBEaXJlY3Rpb24gfCBBY3Rpb24gfCB1bmRlZmluZWQgPSB0aGlzLmtleU1hcFtnZXRLZXlDb2RlKGUpXTtcblxuICAgIGNvbnN0IGFjdGl2ZSA9IHRoaXMuZ2V0QWN0aXZlTmF2aWdhdGlvbkdyb3VwKCk7XG4gICAgaWYgKCFhY3RpdmUgfHwgIWFjdGl2ZS5jb250YWluZXIgfHwgYWN0aXZlLmNvbnRhaW5lci5pc0hpZGRlbigpIHx8IGFjdGl2ZS5jb250YWluZXIuaXNEaXNhYmxlZCgpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKGlzRGlyZWN0aW9uKGV2ZW50KSkge1xuICAgICAgYWN0aXZlLmhhbmRsZU5hdmlnYXRpb24oZXZlbnQpO1xuXG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgIH1cbiAgICBpZiAoaXNBY3Rpb24oZXZlbnQpKSB7XG4gICAgICBhY3RpdmUuaGFuZGxlQWN0aW9uKGV2ZW50KTtcblxuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIERpc3Bvc2Ugb2YgU3BhdGlhbE5hdmlnYXRpb25cbiAgICpcbiAgICogUmVtb3ZlIGFsbCBldmVudCBoYW5kbGVycywgcmVsZWFzZSBzZWVrYmFyIGhhbmRsZXIgYW5kIHJlbGVhc2UgYWxsIG5hdmlnYXRpb24gZ3JvdXBzLlxuICAgKi9cbiAgcHVibGljIHJlbGVhc2UoKTogdm9pZCB7XG4gICAgdGhpcy51bnN1YnNjcmliZUZyb21OYXZpZ2F0aW9uR3JvdXBWaXNpYmlsaXR5Q2hhbmdlcygpO1xuICAgIHRoaXMuZXZlbnRTdWJzY3JpYmVyLnJlbGVhc2UoKTtcbiAgICB0aGlzLm5hdmlnYXRpb25Hcm91cHMuZm9yRWFjaChncm91cCA9PiBncm91cC5yZWxlYXNlKCkpO1xuICAgIHRoaXMuc2Vla0JhckhhbmRsZXIucmVsZWFzZSgpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGdldEtleUNvZGUoZXZlbnQ6IEtleWJvYXJkRXZlbnQpOiBudW1iZXIge1xuICByZXR1cm4gZXZlbnQua2V5Q29kZTtcbn1cbiIsImltcG9ydCB7IENvbXBvbmVudCB9IGZyb20gJy4uL2NvbXBvbmVudHMvY29tcG9uZW50JztcbmltcG9ydCB7IFNldHRpbmdzUGFuZWwgfSBmcm9tICcuLi9jb21wb25lbnRzL3NldHRpbmdzcGFuZWwnO1xuaW1wb3J0IHsgQ29udGFpbmVyIH0gZnJvbSAnLi4vY29tcG9uZW50cy9jb250YWluZXInO1xuaW1wb3J0IHsgTGlzdEJveCB9IGZyb20gJy4uL2NvbXBvbmVudHMvbGlzdGJveCc7XG5pbXBvcnQgeyBBY3Rpb24sIERpcmVjdGlvbiB9IGZyb20gJy4vdHlwZXMnO1xuXG5leHBvcnQgZnVuY3Rpb24gaXNTZXR0aW5nc1BhbmVsKGNvbXBvbmVudDogQ29tcG9uZW50PHVua25vd24+KTogY29tcG9uZW50IGlzIFNldHRpbmdzUGFuZWwge1xuICByZXR1cm4gY29tcG9uZW50IGluc3RhbmNlb2YgU2V0dGluZ3NQYW5lbDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzQ29tcG9uZW50KG9iajogdW5rbm93bik6IG9iaiBpcyBDb21wb25lbnQ8dW5rbm93bj4ge1xuICByZXR1cm4gb2JqICE9PSBudWxsICYmIG9iaiAhPT0gdW5kZWZpbmVkICYmIG9iaiBpbnN0YW5jZW9mIENvbXBvbmVudDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzQ29udGFpbmVyKG9iajogdW5rbm93bik6IG9iaiBpcyBDb250YWluZXI8dW5rbm93bj4ge1xuICByZXR1cm4gb2JqICE9PSBudWxsICYmIG9iaiAhPT0gdW5kZWZpbmVkICYmIG9iaiBpbnN0YW5jZW9mIENvbnRhaW5lcjtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzTGlzdEJveChvYmo6IHVua25vd24pOiBvYmogaXMgTGlzdEJveCB7XG4gIHJldHVybiBvYmogaW5zdGFuY2VvZiBMaXN0Qm94O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNEaXJlY3Rpb24oZGlyZWN0aW9uOiB1bmtub3duKTogZGlyZWN0aW9uIGlzIERpcmVjdGlvbiB7XG4gIHJldHVybiB0eXBlb2YgZGlyZWN0aW9uID09PSAnc3RyaW5nJyAmJiBPYmplY3QudmFsdWVzPHN0cmluZz4oRGlyZWN0aW9uKS5pbmNsdWRlcyhkaXJlY3Rpb24pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNBY3Rpb24oYWN0aW9uOiB1bmtub3duKTogYWN0aW9uIGlzIEFjdGlvbiB7XG4gIHJldHVybiB0eXBlb2YgYWN0aW9uID09PSAnc3RyaW5nJyAmJiBPYmplY3QudmFsdWVzPHN0cmluZz4oQWN0aW9uKS5pbmNsdWRlcyhhY3Rpb24pO1xufVxuIiwiZXhwb3J0IHR5cGUgQ2FsbGJhY2s8VD4gPSAoZGF0YTogVCwgdGFyZ2V0OiBIVE1MRWxlbWVudCwgcHJldmVudERlZmF1bHQ6ICgpID0+IHZvaWQpID0+IHZvaWQ7XG5leHBvcnQgdHlwZSBOYXZpZ2F0aW9uQ2FsbGJhY2sgPSBDYWxsYmFjazxEaXJlY3Rpb24+O1xuZXhwb3J0IHR5cGUgQWN0aW9uQ2FsbGJhY2sgPSBDYWxsYmFjazxBY3Rpb24+O1xuZXhwb3J0IHR5cGUgS2V5TWFwID0ge1xuICBba2V5Q29kZTogbnVtYmVyXTogQWN0aW9uIHwgRGlyZWN0aW9uO1xufTtcblxuZXhwb3J0IGVudW0gRGlyZWN0aW9uIHtcbiAgVVAgPSAndXAnLFxuICBET1dOID0gJ2Rvd24nLFxuICBMRUZUID0gJ2xlZnQnLFxuICBSSUdIVCA9ICdyaWdodCcsXG59XG5cbmV4cG9ydCBlbnVtIEFjdGlvbiB7XG4gIFNFTEVDVCA9ICdzZWxlY3QnLFxuICBCQUNLID0gJ2JhY2snLFxufVxuIiwiaW1wb3J0IHsgVUlDb25maWcgfSBmcm9tICcuL3VpY29uZmlnJztcblxuLyoqXG4gKiBAY2F0ZWdvcnkgVXRpbHNcbiAqL1xuZXhwb3J0IG5hbWVzcGFjZSBTdG9yYWdlVXRpbHMge1xuIGxldCBkaXNhYmxlU3RvcmFnZUFwaTogYm9vbGVhbjtcblxuICBleHBvcnQgZnVuY3Rpb24gc2V0U3RvcmFnZUFwaURpc2FibGVkKHVpQ29uZmlnOiBVSUNvbmZpZykge1xuICAgIGRpc2FibGVTdG9yYWdlQXBpID0gdWlDb25maWcuZGlzYWJsZVN0b3JhZ2VBcGk7XG4gIH1cblxuICBmdW5jdGlvbiBzaG91bGRVc2VMb2NhbFN0b3JhZ2UoKTogYm9vbGVhbiB7XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiAoXG4gICAgICAgICFkaXNhYmxlU3RvcmFnZUFwaSAmJlxuICAgICAgICB3aW5kb3cubG9jYWxTdG9yYWdlICYmXG4gICAgICAgIHR5cGVvZiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSA9PT0gJ2Z1bmN0aW9uJyAmJlxuICAgICAgICB0eXBlb2YgbG9jYWxTdG9yYWdlLnNldEl0ZW0gPT09ICdmdW5jdGlvbidcbiAgICAgICk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTdG9yZXMgYSBzdHJpbmcgaXRlbSBpbnRvIGxvY2FsU3RvcmFnZS5cbiAgICogQHBhcmFtIGtleSB0aGUgaXRlbSdzIGtleVxuICAgKiBAcGFyYW0gZGF0YSB0aGUgaXRlbSdzIGRhdGFcbiAgICovXG4gIGV4cG9ydCBmdW5jdGlvbiBzZXRJdGVtKGtleTogc3RyaW5nLCBkYXRhOiBzdHJpbmcpOiB2b2lkIHtcbiAgICBpZiAoc2hvdWxkVXNlTG9jYWxTdG9yYWdlKCkpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbShrZXksIGRhdGEpO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjb25zb2xlLmRlYnVnKGBGYWlsZWQgdG8gc2V0IHN0b3JhZ2UgaXRlbSAke2tleX1gLCBlKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogR2V0cyBhbiBpdGVtJ3Mgc3RyaW5nIHZhbHVlIGZyb20gdGhlIGxvY2FsU3RvcmFnZS5cbiAgICogQHBhcmFtIGtleSB0aGUga2V5IHRvIGxvb2sgdXAgaXRzIGFzc29jaWF0ZWQgdmFsdWVcbiAgICogQHJldHVybiB7c3RyaW5nIHwgbnVsbH0gUmV0dXJucyB0aGUgc3RyaW5nIGlmIGZvdW5kLCBudWxsIGlmIHRoZXJlIGlzIG5vIGRhdGEgc3RvcmVkIGZvciB0aGUga2V5XG4gICAqL1xuICBleHBvcnQgZnVuY3Rpb24gZ2V0SXRlbShrZXk6IHN0cmluZyk6IHN0cmluZyB8IG51bGwge1xuICAgIGlmIChzaG91bGRVc2VMb2NhbFN0b3JhZ2UoKSkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbShrZXkpO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjb25zb2xlLmRlYnVnKGBGYWlsZWQgdG8gZ2V0IHN0b3JhZ2UgaXRlbSAke2tleX1gLCBlKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBTdG9yZXMgYW4gb2JqZWN0IGludG8gbG9jYWxTdG9yYWdlLiBUaGUgb2JqZWN0IHdpbGwgYmUgc2VyaWFsaXplZCB0byBKU09OLiBUaGUgZm9sbG93aW5nIHR5cGVzIGFyZSBzdXBwb3J0ZWRcbiAgICogaW4gYWRkaXRpb24gdG8gdGhlIGRlZmF1bHQgdHlwZXM6XG4gICAqICAtIENvbG9yVXRpbHMuQ29sb3JcbiAgICpcbiAgICogQHBhcmFtIGtleSB0aGUga2V5IHRvIHN0b3JlIHRoZSBkYXRhIHRvXG4gICAqIEBwYXJhbSBkYXRhIHRoZSBvYmplY3QgdG8gc3RvcmVcbiAgICovXG4gIGV4cG9ydCBmdW5jdGlvbiBzZXRPYmplY3Q8VD4oa2V5OiBzdHJpbmcsIGRhdGE6IFQpOiB2b2lkIHtcbiAgICBsZXQganNvbiA9IEpTT04uc3RyaW5naWZ5KGRhdGEpO1xuICAgIHNldEl0ZW0oa2V5LCBqc29uKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIGFuIG9iamVjdCBmb3IgdGhlIGdpdmVuIGtleSBmcm9tIGxvY2FsU3RvcmFnZS4gVGhlIG9iamVjdCB3aWxsIGJlIGRlc2VyaWFsaXplZCBmcm9tIEpTT04uIEJlc2lkZSB0aGVcbiAgICogZGVmYXVsdCB0eXBlcywgdGhlIGZvbGxvd2luZyB0eXBlcyBhcmUgc3VwcG9ydGVkOlxuICAgKiAgLSBDb2xvclV0aWxzLkNvbG9yXG4gICAqXG4gICAqIEBwYXJhbSBrZXkgdGhlIGtleSB0byBsb29rIHVwIGl0cyBhc3NvY2lhdGVkIG9iamVjdFxuICAgKiBAcmV0dXJuIHthbnl9IFJldHVybnMgdGhlIG9iamVjdCBpZiBmb3VuZCwgbnVsbCBvdGhlcndpc2VcbiAgICovXG4gIGV4cG9ydCBmdW5jdGlvbiBnZXRPYmplY3Q8VD4oa2V5OiBzdHJpbmcpOiBUIHwgbnVsbCB7XG4gICAgbGV0IGpzb24gPSBnZXRJdGVtKGtleSk7XG5cbiAgICBpZiAoanNvbikge1xuICAgICAgbGV0IG9iamVjdCA9IEpTT04ucGFyc2UoanNvbik7XG4gICAgICByZXR1cm4gPFQ+b2JqZWN0O1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxufVxuIiwiaW1wb3J0IHsgQWQsIExpbmVhckFkLCBQbGF5ZXJBUEkgfSBmcm9tICdiaXRtb3Zpbi1wbGF5ZXInO1xuaW1wb3J0IHsgaTE4biB9IGZyb20gJy4vbG9jYWxpemF0aW9uL2kxOG4nO1xuXG4vKipcbiAqIEBjYXRlZ29yeSBVdGlsc1xuICovXG5leHBvcnQgbmFtZXNwYWNlIFN0cmluZ1V0aWxzIHtcblxuICBleHBvcnQgbGV0IEZPUk1BVF9ISE1NU1M6IHN0cmluZyA9ICdoaDptbTpzcyc7XG4gIGV4cG9ydCBsZXQgRk9STUFUX01NU1M6IHN0cmluZyA9ICdtbTpzcyc7XG5cbiAgLyoqXG4gICAqIEZvcm1hdHMgYSBudW1iZXIgb2Ygc2Vjb25kcyBpbnRvIGEgdGltZSBzdHJpbmcgd2l0aCB0aGUgcGF0dGVybiBoaDptbTpzcy5cbiAgICpcbiAgICogQHBhcmFtIHRvdGFsU2Vjb25kcyB0aGUgdG90YWwgbnVtYmVyIG9mIHNlY29uZHMgdG8gZm9ybWF0IHRvIHN0cmluZ1xuICAgKiBAcGFyYW0gZm9ybWF0IHRoZSB0aW1lIGZvcm1hdCB0byBvdXRwdXQgKGRlZmF1bHQ6IGhoOm1tOnNzKVxuICAgKiBAcmV0dXJucyB7c3RyaW5nfSB0aGUgZm9ybWF0dGVkIHRpbWUgc3RyaW5nXG4gICAqL1xuICBleHBvcnQgZnVuY3Rpb24gc2Vjb25kc1RvVGltZSh0b3RhbFNlY29uZHM6IG51bWJlciwgZm9ybWF0OiBzdHJpbmcgPSBGT1JNQVRfSEhNTVNTKTogc3RyaW5nIHtcbiAgICBsZXQgaXNOZWdhdGl2ZSA9IHRvdGFsU2Vjb25kcyA8IDA7XG5cbiAgICBpZiAoaXNOZWdhdGl2ZSkge1xuICAgICAgLy8gSWYgdGhlIHRpbWUgaXMgbmVnYXRpdmUsIHdlIG1ha2UgaXQgcG9zaXRpdmUgZm9yIHRoZSBjYWxjdWxhdGlvbiBiZWxvd1xuICAgICAgLy8gKGVsc2Ugd2UnZCBnZXQgYWxsIG5lZ2F0aXZlIG51bWJlcnMpIGFuZCByZWF0dGFjaCB0aGUgbmVnYXRpdmUgc2lnbiBsYXRlci5cbiAgICAgIHRvdGFsU2Vjb25kcyA9IC10b3RhbFNlY29uZHM7XG4gICAgfVxuXG4gICAgLy8gU3BsaXQgaW50byBzZXBhcmF0ZSB0aW1lIHBhcnRzXG4gICAgbGV0IGhvdXJzID0gTWF0aC5mbG9vcih0b3RhbFNlY29uZHMgLyAzNjAwKTtcbiAgICBsZXQgbWludXRlcyA9IE1hdGguZmxvb3IodG90YWxTZWNvbmRzIC8gNjApIC0gaG91cnMgKiA2MDtcbiAgICBsZXQgc2Vjb25kcyA9IE1hdGguZmxvb3IodG90YWxTZWNvbmRzKSAlIDYwO1xuXG4gICAgcmV0dXJuIChpc05lZ2F0aXZlID8gJy0nIDogJycpICsgZm9ybWF0XG4gICAgICAgIC5yZXBsYWNlKCdoaCcsIGxlZnRQYWRXaXRoWmVyb3MoaG91cnMsIDIpKVxuICAgICAgICAucmVwbGFjZSgnbW0nLCBsZWZ0UGFkV2l0aFplcm9zKG1pbnV0ZXMsIDIpKVxuICAgICAgICAucmVwbGFjZSgnc3MnLCBsZWZ0UGFkV2l0aFplcm9zKHNlY29uZHMsIDIpKTtcbiAgfVxuXG4gIGV4cG9ydCBmdW5jdGlvbiBzZWNvbmRzVG9UZXh0KHRvdGFsU2Vjb25kczogbnVtYmVyKTogc3RyaW5nIHtcbiAgICBjb25zdCBpc05lZ2F0aXZlID0gdG90YWxTZWNvbmRzIDwgMDtcblxuICAgIGlmIChpc05lZ2F0aXZlKSB7XG4gICAgICAvLyBJZiB0aGUgdGltZSBpcyBuZWdhdGl2ZSwgd2UgbWFrZSBpdCBwb3NpdGl2ZSBmb3IgdGhlIGNhbGN1bGF0aW9uIGJlbG93XG4gICAgICAvLyAoZWxzZSB3ZSdkIGdldCBhbGwgbmVnYXRpdmUgbnVtYmVycykgYW5kIHJlYXR0YWNoIHRoZSBuZWdhdGl2ZSBzaWduIGxhdGVyLlxuICAgICAgdG90YWxTZWNvbmRzID0gLXRvdGFsU2Vjb25kcztcbiAgICB9XG5cbiAgICAvLyBTcGxpdCBpbnRvIHNlcGFyYXRlIHRpbWUgcGFydHNcbiAgICBjb25zdCBob3VycyA9IE1hdGguZmxvb3IodG90YWxTZWNvbmRzIC8gMzYwMCk7XG4gICAgY29uc3QgbWludXRlcyA9IE1hdGguZmxvb3IodG90YWxTZWNvbmRzIC8gNjApIC0gaG91cnMgKiA2MDtcbiAgICBjb25zdCBzZWNvbmRzID0gTWF0aC5mbG9vcih0b3RhbFNlY29uZHMpICUgNjA7XG5cbiAgICByZXR1cm4gKGlzTmVnYXRpdmUgPyAnLScgOiAnJykgK1xuICAgIChob3VycyAhPT0gMCA/IGAke2xlZnRQYWRXaXRoWmVyb3MoaG91cnMsIDIpfSAke2kxOG4ucGVyZm9ybUxvY2FsaXphdGlvbihpMThuLmdldExvY2FsaXplcignc2V0dGluZ3MudGltZS5ob3VycycpKX0gYCA6ICcnKSArXG4gICAgKG1pbnV0ZXMgIT09IDAgPyBgJHtsZWZ0UGFkV2l0aFplcm9zKG1pbnV0ZXMsIDIpfSAke2kxOG4ucGVyZm9ybUxvY2FsaXphdGlvbihpMThuLmdldExvY2FsaXplcignc2V0dGluZ3MudGltZS5taW51dGVzJykpfSBgIDogJycpICtcbiAgICBgJHtsZWZ0UGFkV2l0aFplcm9zKHNlY29uZHMsIDIpfSAke2kxOG4ucGVyZm9ybUxvY2FsaXphdGlvbihpMThuLmdldExvY2FsaXplcignc2V0dGluZ3MudGltZS5zZWNvbmRzJykpfWA7XG4gIH1cblxuICAvKipcbiAgICogQ29udmVydHMgYSBudW1iZXIgdG8gYSBzdHJpbmcgYW5kIGxlZnQtcGFkcyBpdCB3aXRoIHplcm9zIHRvIHRoZSBzcGVjaWZpZWQgbGVuZ3RoLlxuICAgKiBFeGFtcGxlOiBsZWZ0UGFkV2l0aFplcm9zKDEyMywgNSkgPT4gJzAwMTIzJ1xuICAgKlxuICAgKiBAcGFyYW0gbnVtIHRoZSBudW1iZXIgdG8gY29udmVydCB0byBzdHJpbmcgYW5kIHBhZCB3aXRoIHplcm9zXG4gICAqIEBwYXJhbSBsZW5ndGggdGhlIGRlc2lyZWQgbGVuZ3RoIG9mIHRoZSBwYWRkZWQgc3RyaW5nXG4gICAqIEByZXR1cm5zIHtzdHJpbmd9IHRoZSBwYWRkZWQgbnVtYmVyIGFzIHN0cmluZ1xuICAgKi9cbiAgZnVuY3Rpb24gbGVmdFBhZFdpdGhaZXJvcyhudW06IG51bWJlciB8IHN0cmluZywgbGVuZ3RoOiBudW1iZXIpOiBzdHJpbmcge1xuICAgIGxldCB0ZXh0ID0gbnVtICsgJyc7XG4gICAgbGV0IHBhZGRpbmcgPSAnMDAwMDAwMDAwMCcuc3Vic3RyKDAsIGxlbmd0aCAtIHRleHQubGVuZ3RoKTtcbiAgICByZXR1cm4gcGFkZGluZyArIHRleHQ7XG4gIH1cblxuICAvKipcbiAgICogRmlsbHMgb3V0IHBsYWNlaG9sZGVycyBpbiBhbiBhZCBtZXNzYWdlLlxuICAgKlxuICAgKiBIYXMgdGhlIHBsYWNlaG9sZGVycyAne3JlbWFpbmluZ1RpbWVbZm9ybWF0U3RyaW5nXX0nLCAne3BsYXllZFRpbWVbZm9ybWF0U3RyaW5nXX0nLFxuICAgKiAne2FkRHVyYXRpb25bZm9ybWF0U3RyaW5nXX0nIGFuZCB7YWRCcmVha1JlbWFpbmluZ1RpbWVbZm9ybWF0U3RyaW5nXX0sIHdoaWNoIGFyZSByZXBsYWNlZCBieSB0aGUgcmVtYWluaW5nIHRpbWUgdW50aWwgdGhlIGFkIGNhbiBiZSBza2lwcGVkLCB0aGUgY3VycmVudFxuICAgKiB0aW1lIG9yIHRoZSBhZCBkdXJhdGlvbi4gVGhlIGZvcm1hdCBzdHJpbmcgaXMgb3B0aW9uYWwuIElmIG5vdCBzcGVjaWZpZWQsIHRoZSBwbGFjZWhvbGRlciBpcyByZXBsYWNlZCBieSB0aGUgdGltZVxuICAgKiBpbiBzZWNvbmRzLiBJZiBzcGVjaWZpZWQsIGl0IG11c3QgYmUgb2YgdGhlIGZvbGxvd2luZyBmb3JtYXQ6XG4gICAqIC0gJWQgLSBJbnNlcnRzIHRoZSB0aW1lIGFzIGFuIGludGVnZXIuXG4gICAqIC0gJTBOZCAtIEluc2VydHMgdGhlIHRpbWUgYXMgYW4gaW50ZWdlciB3aXRoIGxlYWRpbmcgemVyb2VzLCBpZiB0aGUgbGVuZ3RoIG9mIHRoZSB0aW1lIHN0cmluZyBpcyBzbWFsbGVyIHRoYW4gTi5cbiAgICogLSAlZiAtIEluc2VydHMgdGhlIHRpbWUgYXMgYSBmbG9hdC5cbiAgICogLSAlME5mIC0gSW5zZXJ0cyB0aGUgdGltZSBhcyBhIGZsb2F0IHdpdGggbGVhZGluZyB6ZXJvZXMuXG4gICAqIC0gJS5NZiAtIEluc2VydHMgdGhlIHRpbWUgYXMgYSBmbG9hdCB3aXRoIE0gZGVjaW1hbCBwbGFjZXMuIENhbiBiZSBjb21iaW5lZCB3aXRoICUwTmYsIGUuZy4gJTA0LjJmICh0aGUgdGltZVxuICAgKiAxMC4xMjMgd291bGQgYmUgcHJpbnRlZCBhcyAwMDEwLjEyKS5cbiAgICogLSAlaGg6bW06c3NcbiAgICogLSAlbW06c3NcbiAgICpcbiAgICogRXhhbXBsZXM6XG4gICAqIC0geyB0ZXh0OiAnQWQ6IHtyZW1haW5pbmdUaW1lJW1tOnNzfSBzZWNzJyB9XG4gICAqIEFuIGlucHV0IHZhbHVlIG9mIDEwMCB3b3VsZCBiZSBkaXNwbGF5ZWQgYXM6ICdBZDogMDE6NDAgc2VjcydcbiAgICogLSB7IHRleHQ6ICdBZDoge3JlbWFpbmluZ1RpbWUlZn0gc2VjcycgfVxuICAgKiBBbiBpbnB1dCB2YWx1ZSBvZiAxMDAgd291bGQgYmUgZGlzcGxheWVkIGFzOiAnQWQ6IDEwMC4wIHNlY3MnXG4gICAqIC0geyB0ZXh0OiAnQWRicmVhazoge2FkQnJlYWtSZW1haW5pbmdUaW1lJWZ9IHNlY3MnIH1cbiAgICogQWRicmVhayB3aXRoIDIgYWRzIGVhY2ggNTAgc2Vjb25kcyB3b3VsZCBiZSBkaXNwbGF5ZWQgYXM6ICdBZDogMTAwLjAgc2VjcydcbiAgICpcbiAgICogQHBhcmFtIGFkTWVzc2FnZSBhbiBhZCBtZXNzYWdlIHdpdGggb3B0aW9uYWwgcGxhY2Vob2xkZXJzIHRvIGZpbGxcbiAgICogQHBhcmFtIHNraXBPZmZzZXQgaWYgc3BlY2lmaWVkLCB7cmVtYWluaW5nVGltZX0gd2lsbCBiZSBmaWxsZWQgd2l0aCB0aGUgcmVtYWluaW5nIHRpbWUgdW50aWwgdGhlIGFkIGNhbiBiZSBza2lwcGVkXG4gICAqIEBwYXJhbSBwbGF5ZXIgdGhlIHBsYXllciB0byBnZXQgdGhlIHRpbWUgZGF0YSBmcm9tXG4gICAqIEByZXR1cm5zIHtzdHJpbmd9IHRoZSBhZCBtZXNzYWdlIHdpdGggZmlsbGVkIHBsYWNlaG9sZGVyc1xuICAgKi9cbiAgZXhwb3J0IGZ1bmN0aW9uIHJlcGxhY2VBZE1lc3NhZ2VQbGFjZWhvbGRlcnMoYWRNZXNzYWdlOiBzdHJpbmcsIHNraXBPZmZzZXQ6IG51bWJlciwgcGxheWVyOiBQbGF5ZXJBUEkpIHtcbiAgICBsZXQgYWRNZXNzYWdlUGxhY2Vob2xkZXJSZWdleCA9IG5ldyBSZWdFeHAoXG4gICAgICAnXFxcXHsocmVtYWluaW5nVGltZXxwbGF5ZWRUaW1lfGFkRHVyYXRpb258YWRCcmVha1JlbWFpbmluZ1RpbWUpKH18JSgoMFsxLTldXFxcXGQqKFxcXFwuXFxcXGQrKGR8Zil8ZHxmKXxcXFxcLlxcXFxkK2Z8ZHxmKXxoaDptbTpzc3xtbTpzcyl9KScsXG4gICAgICAnZycsXG4gICAgKTtcblxuICAgIHJldHVybiBhZE1lc3NhZ2UucmVwbGFjZShhZE1lc3NhZ2VQbGFjZWhvbGRlclJlZ2V4LCAoZm9ybWF0U3RyaW5nKSA9PiB7XG4gICAgICBsZXQgdGltZSA9IDA7XG4gICAgICBpZiAoZm9ybWF0U3RyaW5nLmluZGV4T2YoJ3JlbWFpbmluZ1RpbWUnKSA+IC0xKSB7XG4gICAgICAgIGlmIChza2lwT2Zmc2V0KSB7XG4gICAgICAgICAgdGltZSA9IE1hdGguY2VpbChza2lwT2Zmc2V0IC0gcGxheWVyLmdldEN1cnJlbnRUaW1lKCkpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRpbWUgPSBwbGF5ZXIuZ2V0RHVyYXRpb24oKSAtIHBsYXllci5nZXRDdXJyZW50VGltZSgpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGZvcm1hdFN0cmluZy5pbmRleE9mKCdwbGF5ZWRUaW1lJykgPiAtMSkge1xuICAgICAgICB0aW1lID0gcGxheWVyLmdldEN1cnJlbnRUaW1lKCk7XG4gICAgICB9IGVsc2UgaWYgKGZvcm1hdFN0cmluZy5pbmRleE9mKCdhZER1cmF0aW9uJykgPiAtMSkge1xuICAgICAgICB0aW1lID0gcGxheWVyLmdldER1cmF0aW9uKCk7XG4gICAgICB9IGVsc2UgaWYgKGZvcm1hdFN0cmluZy5pbmRleE9mKCdhZEJyZWFrUmVtYWluaW5nVGltZScpID4gLTEpIHsgLy8gVG8gZGlzcGxheSB0aGUgcmVtYWluaW5nIHRpbWUgaW4gdGhlIGFkIGJyZWFrIGFzIG9wcG9zZWQgdG8gaW4gdGhlIGFkXG4gICAgICAgIHRpbWUgPSAwO1xuXG4gICAgICAgIC8vIGNvbXB1dGUgbGlzdCBvZiBhZHMgYW5kIGNhbGN1bGF0ZSBkdXJhdGlvbiBvZiByZW1haW5pbmcgYWRzIGJhc2VkIG9uIGluZGV4IG9mIGFjdGl2ZSBhZFxuICAgICAgICBpZiAocGxheWVyLmFkcy5pc0xpbmVhckFkQWN0aXZlKCkpIHtcbiAgICAgICAgICBjb25zdCBpc0FjdGl2ZUFkID0gKGFkOiBBZCkgPT4gcGxheWVyLmFkcy5nZXRBY3RpdmVBZCgpLmlkID09PSBhZC5pZDtcbiAgICAgICAgICBjb25zdCBpbmRleE9mQWN0aXZlQWQgPSBwbGF5ZXIuYWRzLmdldEFjdGl2ZUFkQnJlYWsoKS5hZHMuZmluZEluZGV4KGlzQWN0aXZlQWQpO1xuICAgICAgICAgIGNvbnN0IGR1cmF0aW9uID0gcGxheWVyLmFkcy5nZXRBY3RpdmVBZEJyZWFrKCkuYWRzXG4gICAgICAgICAgLnNsaWNlKGluZGV4T2ZBY3RpdmVBZClcbiAgICAgICAgICAucmVkdWNlKCh0b3RhbCwgYWQpID0+IHRvdGFsICsgKGFkLmlzTGluZWFyID8gKGFkIGFzIExpbmVhckFkKS5kdXJhdGlvbiA6IDApLCAwKTtcblxuICAgICAgICAgIC8vIEFuZCByZW1hbmluZyBhZHMgZHVyYXRpb24gbWludXMgdGltZSBwbGF5ZWRcbiAgICAgICAgICB0aW1lID0gZHVyYXRpb24gLSBwbGF5ZXIuZ2V0Q3VycmVudFRpbWUoKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gZm9ybWF0TnVtYmVyKE1hdGgucm91bmQodGltZSksIGZvcm1hdFN0cmluZyk7XG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiBmb3JtYXROdW1iZXIodGltZTogbnVtYmVyLCBmb3JtYXQ6IHN0cmluZykge1xuICAgIGxldCBmb3JtYXRTdHJpbmdWYWxpZGF0aW9uUmVnZXggPSAvJSgoMFsxLTldXFxkKihcXC5cXGQrKGR8Zil8ZHxmKXxcXC5cXGQrZnxkfGYpfGhoOm1tOnNzfG1tOnNzKS87XG4gICAgbGV0IGxlYWRpbmdaZXJvZXNSZWdleCA9IC8oJTBbMS05XVxcZCopKD89KFxcLlxcZCtmfGZ8ZCkpLztcbiAgICBsZXQgZGVjaW1hbFBsYWNlc1JlZ2V4ID0gL1xcLlxcZCooPz1mKS87XG5cbiAgICBpZiAoIWZvcm1hdFN0cmluZ1ZhbGlkYXRpb25SZWdleC50ZXN0KGZvcm1hdCkpIHtcbiAgICAgIC8vIElmIHRoZSBmb3JtYXQgaXMgaW52YWxpZCwgd2Ugc2V0IGEgZGVmYXVsdCBmYWxsYmFjayBmb3JtYXRcbiAgICAgIGZvcm1hdCA9ICclZCc7XG4gICAgfVxuXG4gICAgLy8gRGV0ZXJtaW5lIHRoZSBudW1iZXIgb2YgbGVhZGluZyB6ZXJvc1xuICAgIGxldCBsZWFkaW5nWmVyb2VzID0gMDtcbiAgICBsZXQgbGVhZGluZ1plcm9lc01hdGNoZXMgPSBmb3JtYXQubWF0Y2gobGVhZGluZ1plcm9lc1JlZ2V4KTtcbiAgICBpZiAobGVhZGluZ1plcm9lc01hdGNoZXMpIHtcbiAgICAgIGxlYWRpbmdaZXJvZXMgPSBwYXJzZUludChsZWFkaW5nWmVyb2VzTWF0Y2hlc1swXS5zdWJzdHJpbmcoMikpO1xuICAgIH1cblxuICAgIC8vIERldGVybWluZSB0aGUgbnVtYmVyIG9mIGRlY2ltYWwgcGxhY2VzXG4gICAgbGV0IG51bURlY2ltYWxQbGFjZXMgPSBudWxsO1xuICAgIGxldCBkZWNpbWFsUGxhY2VzTWF0Y2hlcyA9IGZvcm1hdC5tYXRjaChkZWNpbWFsUGxhY2VzUmVnZXgpO1xuICAgIGlmIChkZWNpbWFsUGxhY2VzTWF0Y2hlcyAmJiAhaXNOYU4ocGFyc2VJbnQoZGVjaW1hbFBsYWNlc01hdGNoZXNbMF0uc3Vic3RyaW5nKDEpKSkpIHtcbiAgICAgIG51bURlY2ltYWxQbGFjZXMgPSBwYXJzZUludChkZWNpbWFsUGxhY2VzTWF0Y2hlc1swXS5zdWJzdHJpbmcoMSkpO1xuICAgICAgaWYgKG51bURlY2ltYWxQbGFjZXMgPiAyMCkge1xuICAgICAgICBudW1EZWNpbWFsUGxhY2VzID0gMjA7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gRmxvYXQgZm9ybWF0XG4gICAgaWYgKGZvcm1hdC5pbmRleE9mKCdmJykgPiAtMSkge1xuICAgICAgbGV0IHRpbWVTdHJpbmcgPSAnJztcblxuICAgICAgaWYgKG51bURlY2ltYWxQbGFjZXMgIT09IG51bGwpIHtcbiAgICAgICAgLy8gQXBwbHkgZml4ZWQgbnVtYmVyIG9mIGRlY2ltYWwgcGxhY2VzXG4gICAgICAgIHRpbWVTdHJpbmcgPSB0aW1lLnRvRml4ZWQobnVtRGVjaW1hbFBsYWNlcyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aW1lU3RyaW5nID0gJycgKyB0aW1lO1xuICAgICAgfVxuXG4gICAgICAvLyBBcHBseSBsZWFkaW5nIHplcm9zXG4gICAgICBpZiAodGltZVN0cmluZy5pbmRleE9mKCcuJykgPiAtMSkge1xuICAgICAgICByZXR1cm4gbGVmdFBhZFdpdGhaZXJvcyh0aW1lU3RyaW5nLCB0aW1lU3RyaW5nLmxlbmd0aCArIChsZWFkaW5nWmVyb2VzIC0gdGltZVN0cmluZy5pbmRleE9mKCcuJykpKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBsZWZ0UGFkV2l0aFplcm9zKHRpbWVTdHJpbmcsIGxlYWRpbmdaZXJvZXMpO1xuICAgICAgfVxuXG4gICAgfVxuICAgIC8vIFRpbWUgZm9ybWF0XG4gICAgZWxzZSBpZiAoZm9ybWF0LmluZGV4T2YoJzonKSA+IC0xKSB7XG4gICAgICBsZXQgdG90YWxTZWNvbmRzID0gTWF0aC5jZWlsKHRpbWUpO1xuXG4gICAgICAvLyBoaDptbTpzcyBmb3JtYXRcbiAgICAgIGlmIChmb3JtYXQuaW5kZXhPZignaGgnKSA+IC0xKSB7XG4gICAgICAgIHJldHVybiBzZWNvbmRzVG9UaW1lKHRvdGFsU2Vjb25kcyk7XG4gICAgICB9XG4gICAgICAvLyBtbTpzcyBmb3JtYXRcbiAgICAgIGVsc2Uge1xuICAgICAgICBsZXQgbWludXRlcyA9IE1hdGguZmxvb3IodG90YWxTZWNvbmRzIC8gNjApO1xuICAgICAgICBsZXQgc2Vjb25kcyA9IHRvdGFsU2Vjb25kcyAlIDYwO1xuXG4gICAgICAgIHJldHVybiBsZWZ0UGFkV2l0aFplcm9zKG1pbnV0ZXMsIDIpICsgJzonICsgbGVmdFBhZFdpdGhaZXJvcyhzZWNvbmRzLCAyKTtcbiAgICAgIH1cbiAgICB9XG4gICAgLy8gSW50ZWdlciBmb3JtYXRcbiAgICBlbHNlIHtcbiAgICAgIHJldHVybiBsZWZ0UGFkV2l0aFplcm9zKE1hdGguY2VpbCh0aW1lKSwgbGVhZGluZ1plcm9lcyk7XG4gICAgfVxuICB9XG59XG4iLCJpbXBvcnQgeyBMaXN0SXRlbSwgTGlzdFNlbGVjdG9yLCBMaXN0U2VsZWN0b3JDb25maWcgfSBmcm9tICcuL2NvbXBvbmVudHMvbGlzdHNlbGVjdG9yJztcbmltcG9ydCB7IFVJSW5zdGFuY2VNYW5hZ2VyIH0gZnJvbSAnLi91aW1hbmFnZXInO1xuaW1wb3J0IHsgUGxheWVyQVBJLCBTdWJ0aXRsZUV2ZW50LCBTdWJ0aXRsZVRyYWNrIH0gZnJvbSAnYml0bW92aW4tcGxheWVyJztcbmltcG9ydCB7IGkxOG4gfSBmcm9tICcuL2xvY2FsaXphdGlvbi9pMThuJztcblxuLyoqXG4gKiBIZWxwZXIgY2xhc3MgdG8gaGFuZGxlIGFsbCBzdWJ0aXRsZSByZWxhdGVkIGV2ZW50c1xuICpcbiAqIFRoaXMgY2xhc3MgbGlzdGVucyB0byBwbGF5ZXIgZXZlbnRzIGFzIHdlbGwgYXMgdGhlIGBMaXN0U2VsZWN0b3JgIGV2ZW50IGlmIHNlbGVjdGlvbiBjaGFuZ2VkXG4gKlxuICogQGNhdGVnb3J5IFV0aWxzXG4gKi9cbmV4cG9ydCBjbGFzcyBTdWJ0aXRsZVN3aXRjaEhhbmRsZXIge1xuXG4gIHByaXZhdGUgc3RhdGljIFNVQlRJVExFU19PRkZfS0VZOiBzdHJpbmcgPSAnbnVsbCc7XG5cbiAgcHJpdmF0ZSBwbGF5ZXI6IFBsYXllckFQSTtcbiAgcHJpdmF0ZSBsaXN0RWxlbWVudDogTGlzdFNlbGVjdG9yPExpc3RTZWxlY3RvckNvbmZpZz47XG4gIHByaXZhdGUgdWltYW5hZ2VyOiBVSUluc3RhbmNlTWFuYWdlcjtcblxuICBjb25zdHJ1Y3RvcihwbGF5ZXI6IFBsYXllckFQSSwgZWxlbWVudDogTGlzdFNlbGVjdG9yPExpc3RTZWxlY3RvckNvbmZpZz4sIHVpbWFuYWdlcjogVUlJbnN0YW5jZU1hbmFnZXIpIHtcbiAgICB0aGlzLnBsYXllciA9IHBsYXllcjtcbiAgICB0aGlzLmxpc3RFbGVtZW50ID0gZWxlbWVudDtcbiAgICB0aGlzLnVpbWFuYWdlciA9IHVpbWFuYWdlcjtcblxuICAgIHRoaXMuYmluZFNlbGVjdGlvbkV2ZW50KCk7XG4gICAgdGhpcy5iaW5kUGxheWVyRXZlbnRzKCk7XG4gICAgdGhpcy5yZWZyZXNoU3VidGl0bGVzKCk7XG4gIH1cblxuICBwcml2YXRlIGJpbmRTZWxlY3Rpb25FdmVudCgpOiB2b2lkIHtcbiAgICB0aGlzLmxpc3RFbGVtZW50Lm9uSXRlbVNlbGVjdGVkLnN1YnNjcmliZSgoXywgdmFsdWU6IHN0cmluZykgPT4ge1xuICAgICAgLy8gVE9ETyBhZGQgc3VwcG9ydCBmb3IgbXVsdGlwbGUgY29uY3VycmVudCBzdWJ0aXRsZSBzZWxlY3Rpb25zXG4gICAgICBpZiAodmFsdWUgPT09IFN1YnRpdGxlU3dpdGNoSGFuZGxlci5TVUJUSVRMRVNfT0ZGX0tFWSkge1xuICAgICAgICBjb25zdCBjdXJyZW50U3VidGl0bGUgPSB0aGlzLnBsYXllci5zdWJ0aXRsZXMubGlzdCgpLmZpbHRlcigoc3VidGl0bGUpID0+IHN1YnRpdGxlLmVuYWJsZWQpLnBvcCgpO1xuICAgICAgICBpZiAoY3VycmVudFN1YnRpdGxlKSB7XG4gICAgICAgICAgdGhpcy5wbGF5ZXIuc3VidGl0bGVzLmRpc2FibGUoY3VycmVudFN1YnRpdGxlLmlkKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5wbGF5ZXIuc3VidGl0bGVzLmVuYWJsZSh2YWx1ZSwgdHJ1ZSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIGJpbmRQbGF5ZXJFdmVudHMoKTogdm9pZCB7XG4gICAgdGhpcy5wbGF5ZXIub24odGhpcy5wbGF5ZXIuZXhwb3J0cy5QbGF5ZXJFdmVudC5TdWJ0aXRsZUFkZGVkLCB0aGlzLmFkZFN1YnRpdGxlKTtcbiAgICB0aGlzLnBsYXllci5vbih0aGlzLnBsYXllci5leHBvcnRzLlBsYXllckV2ZW50LlN1YnRpdGxlRW5hYmxlZCwgdGhpcy5zZWxlY3RDdXJyZW50U3VidGl0bGUpO1xuICAgIHRoaXMucGxheWVyLm9uKHRoaXMucGxheWVyLmV4cG9ydHMuUGxheWVyRXZlbnQuU3VidGl0bGVEaXNhYmxlZCwgdGhpcy5zZWxlY3RDdXJyZW50U3VidGl0bGUpO1xuICAgIHRoaXMucGxheWVyLm9uKHRoaXMucGxheWVyLmV4cG9ydHMuUGxheWVyRXZlbnQuU3VidGl0bGVSZW1vdmVkLCB0aGlzLnJlbW92ZVN1YnRpdGxlKTtcbiAgICAvLyBVcGRhdGUgc3VidGl0bGVzIHdoZW4gc291cmNlIGdvZXMgYXdheVxuICAgIHRoaXMucGxheWVyLm9uKHRoaXMucGxheWVyLmV4cG9ydHMuUGxheWVyRXZlbnQuU291cmNlVW5sb2FkZWQsIHRoaXMuY2xlYXJTdWJ0aXRsZXMpO1xuICAgIC8vIFVwZGF0ZSBzdWJ0aXRsZXMgd2hlbiB0aGUgcGVyaW9kIHdpdGhpbiBhIHNvdXJjZSBjaGFuZ2VzXG4gICAgdGhpcy5wbGF5ZXIub24odGhpcy5wbGF5ZXIuZXhwb3J0cy5QbGF5ZXJFdmVudC5QZXJpb2RTd2l0Y2hlZCwgdGhpcy5yZWZyZXNoU3VidGl0bGVzKTtcbiAgICB0aGlzLnVpbWFuYWdlci5nZXRDb25maWcoKS5ldmVudHMub25VcGRhdGVkLnN1YnNjcmliZSh0aGlzLnJlZnJlc2hTdWJ0aXRsZXMpO1xuICB9XG5cbiAgcHJpdmF0ZSBhZGRTdWJ0aXRsZSA9IChldmVudDogU3VidGl0bGVFdmVudCkgPT4ge1xuICAgIGNvbnN0IHN1YnRpdGxlID0gZXZlbnQuc3VidGl0bGU7XG4gICAgaWYgKCF0aGlzLmxpc3RFbGVtZW50Lmhhc0l0ZW0oc3VidGl0bGUuaWQpKSB7XG4gICAgICB0aGlzLmxpc3RFbGVtZW50LmFkZEl0ZW0oc3VidGl0bGUuaWQsIHN1YnRpdGxlLmxhYmVsKTtcbiAgICB9XG4gIH07XG5cbiAgcHJpdmF0ZSByZW1vdmVTdWJ0aXRsZSA9IChldmVudDogU3VidGl0bGVFdmVudCkgPT4ge1xuICAgIGNvbnN0IHN1YnRpdGxlID0gZXZlbnQuc3VidGl0bGU7XG4gICAgaWYgKHRoaXMubGlzdEVsZW1lbnQuaGFzSXRlbShzdWJ0aXRsZS5pZCkpIHtcbiAgICAgIHRoaXMubGlzdEVsZW1lbnQucmVtb3ZlSXRlbShzdWJ0aXRsZS5pZCk7XG4gICAgfVxuICB9O1xuXG4gIHByaXZhdGUgc2VsZWN0Q3VycmVudFN1YnRpdGxlID0gKCkgPT4ge1xuICAgIGlmICghdGhpcy5wbGF5ZXIuc3VidGl0bGVzKSB7XG4gICAgICAvLyBTdWJ0aXRsZXMgQVBJIG5vdCBhdmFpbGFibGUgKHlldClcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBsZXQgY3VycmVudFN1YnRpdGxlID0gdGhpcy5wbGF5ZXIuc3VidGl0bGVzLmxpc3QoKS5maWx0ZXIoKHN1YnRpdGxlKSA9PiBzdWJ0aXRsZS5lbmFibGVkKS5wb3AoKTtcbiAgICB0aGlzLmxpc3RFbGVtZW50LnNlbGVjdEl0ZW0oY3VycmVudFN1YnRpdGxlID8gY3VycmVudFN1YnRpdGxlLmlkIDogU3VidGl0bGVTd2l0Y2hIYW5kbGVyLlNVQlRJVExFU19PRkZfS0VZKTtcbiAgfTtcblxuICBwcml2YXRlIGNsZWFyU3VidGl0bGVzID0gKCkgPT4ge1xuICAgIHRoaXMubGlzdEVsZW1lbnQuY2xlYXJJdGVtcygpO1xuICB9XG5cbiAgcHJpdmF0ZSByZWZyZXNoU3VidGl0bGVzID0gKCkgPT4ge1xuICAgIGlmICghdGhpcy5wbGF5ZXIuc3VidGl0bGVzKSB7XG4gICAgICAvLyBTdWJ0aXRsZXMgQVBJIG5vdCBhdmFpbGFibGUgKHlldClcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBvZmZMaXN0SXRlbTogTGlzdEl0ZW0gPSB7XG4gICAgICBrZXk6IFN1YnRpdGxlU3dpdGNoSGFuZGxlci5TVUJUSVRMRVNfT0ZGX0tFWSxcbiAgICAgIGxhYmVsOiBpMThuLmdldExvY2FsaXplcignb2ZmJyksXG4gICAgfTtcblxuICAgIGNvbnN0IHN1YnRpdGxlcyA9IHRoaXMucGxheWVyLnN1YnRpdGxlcy5saXN0KCk7XG4gICAgY29uc3Qgc3VidGl0bGVUb0xpc3RJdGVtID0gKHN1YnRpdGxlOiBTdWJ0aXRsZVRyYWNrKTogTGlzdEl0ZW0gPT4ge1xuICAgICAgcmV0dXJuIHsga2V5OiBzdWJ0aXRsZS5pZCwgbGFiZWw6IHN1YnRpdGxlLmxhYmVsIH07XG4gICAgfTtcblxuICAgIHRoaXMubGlzdEVsZW1lbnQuc3luY2hyb25pemVJdGVtcyhbXG4gICAgICBvZmZMaXN0SXRlbSwgLi4uc3VidGl0bGVzLm1hcChzdWJ0aXRsZVRvTGlzdEl0ZW0pLFxuICAgIF0pO1xuICAgIHRoaXMuc2VsZWN0Q3VycmVudFN1YnRpdGxlKCk7XG4gIH07XG59XG4iLCIvLyBUT0RPIGNoYW5nZSB0byBpbnRlcm5hbCAobm90IGV4cG9ydGVkKSBjbGFzcywgaG93IHRvIHVzZSBpbiBvdGhlciBmaWxlcz9cbi8qKlxuICogRXhlY3V0ZXMgYSBjYWxsYmFjayBhZnRlciBhIHNwZWNpZmllZCBhbW91bnQgb2YgdGltZSwgb3B0aW9uYWxseSByZXBlYXRlZGx5IHVudGlsIHN0b3BwZWQuXG4gKi9cbmV4cG9ydCBjbGFzcyBUaW1lb3V0IHtcblxuICBwcml2YXRlIHJlYWRvbmx5IGRlbGF5OiBudW1iZXI7XG4gIHByaXZhdGUgcmVhZG9ubHkgY2FsbGJhY2s6ICgpID0+IHZvaWQ7XG4gIHByaXZhdGUgcmVhZG9ubHkgcmVwZWF0OiBib29sZWFuO1xuICAvLyBUaGVyZSdzIHR3byBzZXRUaW1lb3V0IGRlY2xhcmF0aW9ucywgb25lIG9uIFdpbmRvdyB3aGljaCByZXR1cm5zIHR5cGUgXCJudW1iZXJcIiBhbmQgb25lIGluIE5vZGVKUyB3aGljaCByZXR1cm5zXG4gIC8vIHR5cGUgXCJUaW1lclwiLiBGb3IgdW5rbm93biByZWFzb25zIGJ1aWxkcyBvbiBKZW5raW5zIGZhaWwgZHVlIHRvIGEgdHlwZSBtaXNtYXRjaCB3aGVuIHdlIHVzZSB0eXBlIFwibnVtYmVyXCIgaGVyZSxcbiAgLy8gYWx0aG91Z2ggaXQgd29ya3Mgb24gb3RoZXIgcGxhdGZvcm1zIChlLmcuIFdpbmRvd3MsIENvZGVzaGlwKS5cbiAgLy8gVG8gd29yayBhcm91bmQgdGhlIGlzc3VlIHdlIHVzZSB0eXBlIFwiYW55XCIuIFRoZSB0eXBlIGRvZXMgbm90IG1hdHRlciBhbnl3YXkgYmVjYXVzZSB3ZSdyZSBub3Qgd29ya2luZyB3aXRoXG4gIC8vIHRoaXMgdmFsdWUgZXhjZXB0IHByb3ZpZGluZyBpdCB0byBjbGVhclRpbWVvdXQuXG4gIHByaXZhdGUgdGltZW91dE9ySW50ZXJ2YWxJZDogYW55O1xuICBwcml2YXRlIGFjdGl2ZTogYm9vbGVhbjtcbiAgcHJpdmF0ZSBzdXNwZW5kZWQ6IGJvb2xlYW47XG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgYSBuZXcgdGltZW91dCBjYWxsYmFjayBoYW5kbGVyLlxuICAgKiBAcGFyYW0gZGVsYXkgdGhlIGRlbGF5IGluIG1pbGxpc2Vjb25kcyBhZnRlciB3aGljaCB0aGUgY2FsbGJhY2sgc2hvdWxkIGJlIGV4ZWN1dGVkXG4gICAqIEBwYXJhbSBjYWxsYmFjayB0aGUgY2FsbGJhY2sgdG8gZXhlY3V0ZSBhZnRlciB0aGUgZGVsYXkgdGltZVxuICAgKiBAcGFyYW0gcmVwZWF0IGlmIHRydWUsIGNhbGwgdGhlIGNhbGxiYWNrIHJlcGVhdGVkbHkgaW4gZGVsYXkgaW50ZXJ2YWxzXG4gICAqL1xuICBjb25zdHJ1Y3RvcihkZWxheTogbnVtYmVyLCBjYWxsYmFjazogKCkgPT4gdm9pZCwgcmVwZWF0OiBib29sZWFuID0gZmFsc2UpIHtcbiAgICB0aGlzLmRlbGF5ID0gZGVsYXk7XG4gICAgdGhpcy5jYWxsYmFjayA9IGNhbGxiYWNrO1xuICAgIHRoaXMucmVwZWF0ID0gcmVwZWF0O1xuICAgIHRoaXMudGltZW91dE9ySW50ZXJ2YWxJZCA9IDA7XG4gICAgdGhpcy5hY3RpdmUgPSBmYWxzZTtcbiAgICB0aGlzLnN1c3BlbmRlZCA9IGZhbHNlO1xuICB9XG5cbiAgLyoqXG4gICAqIFN0YXJ0cyB0aGUgdGltZW91dCBhbmQgY2FsbHMgdGhlIGNhbGxiYWNrIHdoZW4gdGhlIHRpbWVvdXQgZGVsYXkgaGFzIHBhc3NlZC4gSGFzIG5vIGVmZmVjdCB3aGVuIHRoZSB0aW1lb3V0IGlzXG4gICAqIHN1c3BlbmRlZC5cbiAgICogQHJldHVybnMge1RpbWVvdXR9IHRoZSBjdXJyZW50IHRpbWVvdXQgKHNvIHRoZSBzdGFydCBjYWxsIGNhbiBiZSBjaGFpbmVkIHRvIHRoZSBjb25zdHJ1Y3RvcilcbiAgICovXG4gIHN0YXJ0KCk6IHRoaXMge1xuICAgIHRoaXMucmVzZXQoKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8qKlxuICAgKiBDbGVhcnMgdGhlIHRpbWVvdXQuIFRoZSBjYWxsYmFjayB3aWxsIG5vdCBiZSBjYWxsZWQgaWYgY2xlYXIgaXMgY2FsbGVkIGR1cmluZyB0aGUgdGltZW91dC5cbiAgICovXG4gIGNsZWFyKCk6IHZvaWQge1xuICAgIHRoaXMuY2xlYXJJbnRlcm5hbCgpO1xuICB9XG5cbiAgLyoqXG4gICAqIFN1c3BlbmRzIHRoZSB0aW1lb3V0LiBUaGUgY2FsbGJhY2sgd2lsbCBub3QgYmUgY2FsbGVkIGFuZCBjYWxscyB0byBgc3RhcnRgIGFuZCBgcmVzZXRgIHdpbGwgYmUgaWdub3JlZCB1bnRpbCB0aGVcbiAgICogdGltZW91dCBpcyByZXN1bWVkLlxuICAgKi9cbiAgc3VzcGVuZCgpIHtcbiAgICB0aGlzLnN1c3BlbmRlZCA9IHRydWU7XG4gICAgdGhpcy5jbGVhckludGVybmFsKCk7XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXN1bWVzIHRoZSB0aW1lb3V0LlxuICAgKiBAcGFyYW0gcmVzZXQgd2hldGhlciB0byByZXNldCB0aGUgdGltZW91dCBhZnRlciByZXN1bWluZ1xuICAgKi9cbiAgcmVzdW1lKHJlc2V0OiBib29sZWFuKSB7XG4gICAgdGhpcy5zdXNwZW5kZWQgPSBmYWxzZTtcblxuICAgIGlmIChyZXNldCkge1xuICAgICAgdGhpcy5yZXNldCgpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlc2V0cyB0aGUgcGFzc2VkIHRpbWVvdXQgZGVsYXkgdG8gemVyby4gQ2FuIGJlIHVzZWQgdG8gZGVmZXIgdGhlIGNhbGxpbmcgb2YgdGhlIGNhbGxiYWNrLiBIYXMgbm8gZWZmZWN0IGlmIHRoZVxuICAgKiB0aW1lb3V0IGlzIHN1c3BlbmRlZC5cbiAgICovXG4gIHJlc2V0KCk6IHZvaWQge1xuICAgIHRoaXMuY2xlYXJJbnRlcm5hbCgpO1xuXG4gICAgaWYgKHRoaXMuc3VzcGVuZGVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKHRoaXMucmVwZWF0KSB7XG4gICAgICB0aGlzLnRpbWVvdXRPckludGVydmFsSWQgPSBzZXRJbnRlcnZhbCh0aGlzLmNhbGxiYWNrLCB0aGlzLmRlbGF5KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy50aW1lb3V0T3JJbnRlcnZhbElkID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIHRoaXMuYWN0aXZlID0gZmFsc2U7XG4gICAgICAgIHRoaXMuY2FsbGJhY2soKTtcbiAgICAgIH0sIHRoaXMuZGVsYXkpO1xuICAgIH1cbiAgICB0aGlzLmFjdGl2ZSA9IHRydWU7XG4gIH1cblxuICBpc0FjdGl2ZSgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5hY3RpdmU7XG4gIH1cblxuICBwcml2YXRlIGNsZWFySW50ZXJuYWwoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMucmVwZWF0KSB7XG4gICAgICBjbGVhckludGVydmFsKHRoaXMudGltZW91dE9ySW50ZXJ2YWxJZCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNsZWFyVGltZW91dCh0aGlzLnRpbWVvdXRPckludGVydmFsSWQpO1xuICAgIH1cbiAgICB0aGlzLmFjdGl2ZSA9IGZhbHNlO1xuICB9XG59IiwiaW1wb3J0IHsgU3VidGl0bGVPdmVybGF5IH0gZnJvbSAnLi9jb21wb25lbnRzL3N1YnRpdGxlb3ZlcmxheSc7XG5pbXBvcnQgeyBTZXR0aW5nc1BhbmVsUGFnZSB9IGZyb20gJy4vY29tcG9uZW50cy9zZXR0aW5nc3BhbmVscGFnZSc7XG5pbXBvcnQgeyBTZXR0aW5nc1BhbmVsSXRlbSB9IGZyb20gJy4vY29tcG9uZW50cy9zZXR0aW5nc3BhbmVsaXRlbSc7XG5pbXBvcnQgeyBWaWRlb1F1YWxpdHlTZWxlY3RCb3ggfSBmcm9tICcuL2NvbXBvbmVudHMvdmlkZW9xdWFsaXR5c2VsZWN0Ym94JztcbmltcG9ydCB7IFBsYXliYWNrU3BlZWRTZWxlY3RCb3ggfSBmcm9tICcuL2NvbXBvbmVudHMvcGxheWJhY2tzcGVlZHNlbGVjdGJveCc7XG5pbXBvcnQgeyBBdWRpb1RyYWNrU2VsZWN0Qm94IH0gZnJvbSAnLi9jb21wb25lbnRzL2F1ZGlvdHJhY2tzZWxlY3Rib3gnO1xuaW1wb3J0IHsgQXVkaW9RdWFsaXR5U2VsZWN0Qm94IH0gZnJvbSAnLi9jb21wb25lbnRzL2F1ZGlvcXVhbGl0eXNlbGVjdGJveCc7XG5pbXBvcnQgeyBTZXR0aW5nc1BhbmVsIH0gZnJvbSAnLi9jb21wb25lbnRzL3NldHRpbmdzcGFuZWwnO1xuaW1wb3J0IHsgU3VidGl0bGVTZXR0aW5nc1BhbmVsUGFnZSB9IGZyb20gJy4vY29tcG9uZW50cy9zdWJ0aXRsZXNldHRpbmdzL3N1YnRpdGxlc2V0dGluZ3NwYW5lbHBhZ2UnO1xuaW1wb3J0IHsgU2V0dGluZ3NQYW5lbFBhZ2VPcGVuQnV0dG9uIH0gZnJvbSAnLi9jb21wb25lbnRzL3NldHRpbmdzcGFuZWxwYWdlb3BlbmJ1dHRvbic7XG5pbXBvcnQgeyBTdWJ0aXRsZVNldHRpbmdzTGFiZWwgfSBmcm9tICcuL2NvbXBvbmVudHMvc3VidGl0bGVzZXR0aW5ncy9zdWJ0aXRsZXNldHRpbmdzbGFiZWwnO1xuaW1wb3J0IHsgU3VidGl0bGVTZWxlY3RCb3ggfSBmcm9tICcuL2NvbXBvbmVudHMvc3VidGl0bGVzZWxlY3Rib3gnO1xuaW1wb3J0IHsgQ29udHJvbEJhciB9IGZyb20gJy4vY29tcG9uZW50cy9jb250cm9sYmFyJztcbmltcG9ydCB7IENvbnRhaW5lciwgQ29udGFpbmVyQ29uZmlnIH0gZnJvbSAnLi9jb21wb25lbnRzL2NvbnRhaW5lcic7XG5pbXBvcnQgeyBQbGF5YmFja1RpbWVMYWJlbCwgUGxheWJhY2tUaW1lTGFiZWxNb2RlIH0gZnJvbSAnLi9jb21wb25lbnRzL3BsYXliYWNrdGltZWxhYmVsJztcbmltcG9ydCB7IFNlZWtCYXIgfSBmcm9tICcuL2NvbXBvbmVudHMvc2Vla2Jhcic7XG5pbXBvcnQgeyBTZWVrQmFyTGFiZWwgfSBmcm9tICcuL2NvbXBvbmVudHMvc2Vla2JhcmxhYmVsJztcbmltcG9ydCB7IFBsYXliYWNrVG9nZ2xlQnV0dG9uIH0gZnJvbSAnLi9jb21wb25lbnRzL3BsYXliYWNrdG9nZ2xlYnV0dG9uJztcbmltcG9ydCB7IFZvbHVtZVRvZ2dsZUJ1dHRvbiB9IGZyb20gJy4vY29tcG9uZW50cy92b2x1bWV0b2dnbGVidXR0b24nO1xuaW1wb3J0IHsgVm9sdW1lU2xpZGVyIH0gZnJvbSAnLi9jb21wb25lbnRzL3ZvbHVtZXNsaWRlcic7XG5pbXBvcnQgeyBTcGFjZXIgfSBmcm9tICcuL2NvbXBvbmVudHMvc3BhY2VyJztcbmltcG9ydCB7IFBpY3R1cmVJblBpY3R1cmVUb2dnbGVCdXR0b24gfSBmcm9tICcuL2NvbXBvbmVudHMvcGljdHVyZWlucGljdHVyZXRvZ2dsZWJ1dHRvbic7XG5pbXBvcnQgeyBBaXJQbGF5VG9nZ2xlQnV0dG9uIH0gZnJvbSAnLi9jb21wb25lbnRzL2FpcnBsYXl0b2dnbGVidXR0b24nO1xuaW1wb3J0IHsgQ2FzdFRvZ2dsZUJ1dHRvbiB9IGZyb20gJy4vY29tcG9uZW50cy9jYXN0dG9nZ2xlYnV0dG9uJztcbmltcG9ydCB7IFZSVG9nZ2xlQnV0dG9uIH0gZnJvbSAnLi9jb21wb25lbnRzL3ZydG9nZ2xlYnV0dG9uJztcbmltcG9ydCB7IFNldHRpbmdzVG9nZ2xlQnV0dG9uIH0gZnJvbSAnLi9jb21wb25lbnRzL3NldHRpbmdzdG9nZ2xlYnV0dG9uJztcbmltcG9ydCB7IEZ1bGxzY3JlZW5Ub2dnbGVCdXR0b24gfSBmcm9tICcuL2NvbXBvbmVudHMvZnVsbHNjcmVlbnRvZ2dsZWJ1dHRvbic7XG5pbXBvcnQgeyBVSUNvbnRhaW5lciB9IGZyb20gJy4vY29tcG9uZW50cy91aWNvbnRhaW5lcic7XG5pbXBvcnQgeyBCdWZmZXJpbmdPdmVybGF5IH0gZnJvbSAnLi9jb21wb25lbnRzL2J1ZmZlcmluZ292ZXJsYXknO1xuaW1wb3J0IHsgUGxheWJhY2tUb2dnbGVPdmVybGF5IH0gZnJvbSAnLi9jb21wb25lbnRzL3BsYXliYWNrdG9nZ2xlb3ZlcmxheSc7XG5pbXBvcnQgeyBDYXN0U3RhdHVzT3ZlcmxheSB9IGZyb20gJy4vY29tcG9uZW50cy9jYXN0c3RhdHVzb3ZlcmxheSc7XG5pbXBvcnQgeyBUaXRsZUJhciB9IGZyb20gJy4vY29tcG9uZW50cy90aXRsZWJhcic7XG5pbXBvcnQgeyBSZWNvbW1lbmRhdGlvbk92ZXJsYXkgfSBmcm9tICcuL2NvbXBvbmVudHMvcmVjb21tZW5kYXRpb25vdmVybGF5JztcbmltcG9ydCB7IFdhdGVybWFyayB9IGZyb20gJy4vY29tcG9uZW50cy93YXRlcm1hcmsnO1xuaW1wb3J0IHsgRXJyb3JNZXNzYWdlT3ZlcmxheSB9IGZyb20gJy4vY29tcG9uZW50cy9lcnJvcm1lc3NhZ2VvdmVybGF5JztcbmltcG9ydCB7IEFkQ2xpY2tPdmVybGF5IH0gZnJvbSAnLi9jb21wb25lbnRzL2FkY2xpY2tvdmVybGF5JztcbmltcG9ydCB7IEFkTWVzc2FnZUxhYmVsIH0gZnJvbSAnLi9jb21wb25lbnRzL2FkbWVzc2FnZWxhYmVsJztcbmltcG9ydCB7IEFkU2tpcEJ1dHRvbiB9IGZyb20gJy4vY29tcG9uZW50cy9hZHNraXBidXR0b24nO1xuaW1wb3J0IHsgQ2xvc2VCdXR0b24gfSBmcm9tICcuL2NvbXBvbmVudHMvY2xvc2VidXR0b24nO1xuaW1wb3J0IHsgTWV0YWRhdGFMYWJlbCwgTWV0YWRhdGFMYWJlbENvbnRlbnQgfSBmcm9tICcuL2NvbXBvbmVudHMvbWV0YWRhdGFsYWJlbCc7XG5pbXBvcnQgeyBQbGF5ZXJVdGlscyB9IGZyb20gJy4vcGxheWVydXRpbHMnO1xuaW1wb3J0IHsgTGFiZWwgfSBmcm9tICcuL2NvbXBvbmVudHMvbGFiZWwnO1xuaW1wb3J0IHsgQ2FzdFVJQ29udGFpbmVyIH0gZnJvbSAnLi9jb21wb25lbnRzL2Nhc3R1aWNvbnRhaW5lcic7XG5pbXBvcnQgeyBVSUNvbmRpdGlvbkNvbnRleHQsIFVJTWFuYWdlciB9IGZyb20gJy4vdWltYW5hZ2VyJztcbmltcG9ydCB7IFVJQ29uZmlnIH0gZnJvbSAnLi91aWNvbmZpZyc7XG5pbXBvcnQgeyBQbGF5ZXJBUEkgfSBmcm9tICdiaXRtb3Zpbi1wbGF5ZXInO1xuaW1wb3J0IHsgaTE4biB9IGZyb20gJy4vbG9jYWxpemF0aW9uL2kxOG4nO1xuaW1wb3J0IHsgU3VidGl0bGVMaXN0Qm94IH0gZnJvbSAnLi9jb21wb25lbnRzL3N1YnRpdGxlbGlzdGJveCc7XG5pbXBvcnQgeyBBdWRpb1RyYWNrTGlzdEJveCB9IGZyb20gJy4vY29tcG9uZW50cy9hdWRpb3RyYWNrbGlzdGJveCc7XG5pbXBvcnQgeyBTcGF0aWFsTmF2aWdhdGlvbiB9IGZyb20gJy4vc3BhdGlhbG5hdmlnYXRpb24vc3BhdGlhbG5hdmlnYXRpb24nO1xuaW1wb3J0IHsgUm9vdE5hdmlnYXRpb25Hcm91cCB9IGZyb20gJy4vc3BhdGlhbG5hdmlnYXRpb24vcm9vdG5hdmlnYXRpb25ncm91cCc7XG5pbXBvcnQgeyBMaXN0TmF2aWdhdGlvbkdyb3VwLCBMaXN0T3JpZW50YXRpb24gfSBmcm9tICcuL3NwYXRpYWxuYXZpZ2F0aW9uL0xpc3ROYXZpZ2F0aW9uR3JvdXAnO1xuaW1wb3J0IHsgRWNvTW9kZUNvbnRhaW5lciB9IGZyb20gJy4vY29tcG9uZW50cy9lY29tb2RlY29udGFpbmVyJztcblxuZXhwb3J0IG5hbWVzcGFjZSBVSUZhY3Rvcnkge1xuICBleHBvcnQgZnVuY3Rpb24gYnVpbGREZWZhdWx0VUkocGxheWVyOiBQbGF5ZXJBUEksIGNvbmZpZzogVUlDb25maWcgPSB7fSk6IFVJTWFuYWdlciB7XG4gICAgcmV0dXJuIFVJRmFjdG9yeS5idWlsZE1vZGVyblR2VUkocGxheWVyLCBjb25maWcpO1xuICB9XG5cbiAgZXhwb3J0IGZ1bmN0aW9uIGJ1aWxkRGVmYXVsdFNtYWxsU2NyZWVuVUkocGxheWVyOiBQbGF5ZXJBUEksIGNvbmZpZzogVUlDb25maWcgPSB7fSk6IFVJTWFuYWdlciB7XG4gICAgcmV0dXJuIFVJRmFjdG9yeS5idWlsZE1vZGVyblNtYWxsU2NyZWVuVUkocGxheWVyLCBjb25maWcpO1xuICB9XG5cbiAgZXhwb3J0IGZ1bmN0aW9uIGJ1aWxkRGVmYXVsdENhc3RSZWNlaXZlclVJKHBsYXllcjogUGxheWVyQVBJLCBjb25maWc6IFVJQ29uZmlnID0ge30pOiBVSU1hbmFnZXIge1xuICAgIHJldHVybiBVSUZhY3RvcnkuYnVpbGRNb2Rlcm5DYXN0UmVjZWl2ZXJVSShwbGF5ZXIsIGNvbmZpZyk7XG4gIH1cblxuICBleHBvcnQgZnVuY3Rpb24gYnVpbGREZWZhdWx0VHZVSShwbGF5ZXI6IFBsYXllckFQSSwgY29uZmlnOiBVSUNvbmZpZyA9IHt9KTogVUlNYW5hZ2VyIHtcbiAgICByZXR1cm4gVUlGYWN0b3J5LmJ1aWxkTW9kZXJuVHZVSShwbGF5ZXIsIGNvbmZpZyk7XG4gIH1cblxuICBleHBvcnQgZnVuY3Rpb24gbW9kZXJuVUkoY29uZmlnOiBVSUNvbmZpZykge1xuICAgIGxldCBzdWJ0aXRsZU92ZXJsYXkgPSBuZXcgU3VidGl0bGVPdmVybGF5KCk7XG5cbiAgICBsZXQgbWFpblNldHRpbmdzUGFuZWxQYWdlOiBTZXR0aW5nc1BhbmVsUGFnZTtcblxuICAgIGNvbnN0IGNvbXBvbmVudHM6IENvbnRhaW5lcjxDb250YWluZXJDb25maWc+W10gPSBbXG4gICAgICBuZXcgU2V0dGluZ3NQYW5lbEl0ZW0oaTE4bi5nZXRMb2NhbGl6ZXIoJ3NldHRpbmdzLnZpZGVvLnF1YWxpdHknKSwgbmV3IFZpZGVvUXVhbGl0eVNlbGVjdEJveCgpKSxcbiAgICAgIG5ldyBTZXR0aW5nc1BhbmVsSXRlbShpMThuLmdldExvY2FsaXplcignc3BlZWQnKSwgbmV3IFBsYXliYWNrU3BlZWRTZWxlY3RCb3goKSksXG4gICAgICBuZXcgU2V0dGluZ3NQYW5lbEl0ZW0oaTE4bi5nZXRMb2NhbGl6ZXIoJ3NldHRpbmdzLmF1ZGlvLnRyYWNrJyksIG5ldyBBdWRpb1RyYWNrU2VsZWN0Qm94KCkpLFxuICAgICAgbmV3IFNldHRpbmdzUGFuZWxJdGVtKGkxOG4uZ2V0TG9jYWxpemVyKCdzZXR0aW5ncy5hdWRpby5xdWFsaXR5JyksIG5ldyBBdWRpb1F1YWxpdHlTZWxlY3RCb3goKSksXG4gICAgXTtcblxuICAgIGlmIChjb25maWcuZWNvTW9kZSkge1xuICAgICAgY29uc3QgZWNvTW9kZUNvbnRhaW5lciA9IG5ldyBFY29Nb2RlQ29udGFpbmVyKCk7XG5cbiAgICAgIGVjb01vZGVDb250YWluZXIuc2V0T25Ub2dnbGVDYWxsYmFjaygoKSA9PiB7XG4gICAgICAgIC8vIGZvcmNlcyB0aGUgYnJvd3NlciB0byByZS1jYWxjdWxhdGUgdGhlIGhlaWdodCBvZiB0aGUgc2V0dGluZ3MgcGFuZWwgd2hlbiBhZGRpbmcvcmVtb3ZpbmcgZWxlbWVudHNcbiAgICAgICAgc2V0dGluZ3NQYW5lbC5nZXREb21FbGVtZW50KCkuY3NzKHsgd2lkdGg6ICcnLCBoZWlnaHQ6ICcnIH0pO1xuICAgICAgfSk7XG5cbiAgICAgIGNvbXBvbmVudHMudW5zaGlmdChlY29Nb2RlQ29udGFpbmVyKTtcbiAgICB9XG5cbiAgICBtYWluU2V0dGluZ3NQYW5lbFBhZ2UgPSBuZXcgU2V0dGluZ3NQYW5lbFBhZ2Uoe1xuICAgICAgY29tcG9uZW50cyxcbiAgICB9KTtcblxuICAgIGxldCBzZXR0aW5nc1BhbmVsID0gbmV3IFNldHRpbmdzUGFuZWwoe1xuICAgICAgY29tcG9uZW50czogW21haW5TZXR0aW5nc1BhbmVsUGFnZV0sXG4gICAgICBoaWRkZW46IHRydWUsXG4gICAgfSk7XG5cbiAgICBsZXQgc3VidGl0bGVTZXR0aW5nc1BhbmVsUGFnZSA9IG5ldyBTdWJ0aXRsZVNldHRpbmdzUGFuZWxQYWdlKHtcbiAgICAgIHNldHRpbmdzUGFuZWw6IHNldHRpbmdzUGFuZWwsXG4gICAgICBvdmVybGF5OiBzdWJ0aXRsZU92ZXJsYXksXG4gICAgfSk7XG5cbiAgICBjb25zdCBzdWJ0aXRsZVNlbGVjdEJveCA9IG5ldyBTdWJ0aXRsZVNlbGVjdEJveCgpO1xuXG4gICAgbGV0IHN1YnRpdGxlU2V0dGluZ3NPcGVuQnV0dG9uID0gbmV3IFNldHRpbmdzUGFuZWxQYWdlT3BlbkJ1dHRvbih7XG4gICAgICB0YXJnZXRQYWdlOiBzdWJ0aXRsZVNldHRpbmdzUGFuZWxQYWdlLFxuICAgICAgY29udGFpbmVyOiBzZXR0aW5nc1BhbmVsLFxuICAgICAgYXJpYUxhYmVsOiBpMThuLmdldExvY2FsaXplcignc2V0dGluZ3Muc3VidGl0bGVzJyksXG4gICAgICB0ZXh0OiBpMThuLmdldExvY2FsaXplcignb3BlbicpLFxuICAgIH0pO1xuXG4gICAgbWFpblNldHRpbmdzUGFuZWxQYWdlLmFkZENvbXBvbmVudChcbiAgICAgIG5ldyBTZXR0aW5nc1BhbmVsSXRlbShcbiAgICAgICAgbmV3IFN1YnRpdGxlU2V0dGluZ3NMYWJlbCh7XG4gICAgICAgICAgdGV4dDogaTE4bi5nZXRMb2NhbGl6ZXIoJ3NldHRpbmdzLnN1YnRpdGxlcycpLFxuICAgICAgICAgIG9wZW5lcjogc3VidGl0bGVTZXR0aW5nc09wZW5CdXR0b24sXG4gICAgICAgIH0pLFxuICAgICAgICBzdWJ0aXRsZVNlbGVjdEJveCxcbiAgICAgICAge1xuICAgICAgICAgIHJvbGU6ICdtZW51YmFyJyxcbiAgICAgICAgfSxcbiAgICAgICksXG4gICAgKTtcblxuICAgIHNldHRpbmdzUGFuZWwuYWRkQ29tcG9uZW50KHN1YnRpdGxlU2V0dGluZ3NQYW5lbFBhZ2UpO1xuXG4gICAgbGV0IGNvbnRyb2xCYXIgPSBuZXcgQ29udHJvbEJhcih7XG4gICAgICBjb21wb25lbnRzOiBbXG4gICAgICAgIHNldHRpbmdzUGFuZWwsXG4gICAgICAgIG5ldyBDb250YWluZXIoe1xuICAgICAgICAgIGNvbXBvbmVudHM6IFtcbiAgICAgICAgICAgIG5ldyBQbGF5YmFja1RpbWVMYWJlbCh7XG4gICAgICAgICAgICAgIHRpbWVMYWJlbE1vZGU6IFBsYXliYWNrVGltZUxhYmVsTW9kZS5DdXJyZW50VGltZSxcbiAgICAgICAgICAgICAgaGlkZUluTGl2ZVBsYXliYWNrOiB0cnVlLFxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgICBuZXcgU2Vla0Jhcih7IGxhYmVsOiBuZXcgU2Vla0JhckxhYmVsKCkgfSksXG4gICAgICAgICAgICBuZXcgUGxheWJhY2tUaW1lTGFiZWwoe1xuICAgICAgICAgICAgICB0aW1lTGFiZWxNb2RlOiBQbGF5YmFja1RpbWVMYWJlbE1vZGUuVG90YWxUaW1lLFxuICAgICAgICAgICAgICBjc3NDbGFzc2VzOiBbJ3RleHQtcmlnaHQnXSxcbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgIF0sXG4gICAgICAgICAgY3NzQ2xhc3NlczogWydjb250cm9sYmFyLXRvcCddLFxuICAgICAgICB9KSxcbiAgICAgICAgbmV3IENvbnRhaW5lcih7XG4gICAgICAgICAgY29tcG9uZW50czogW1xuICAgICAgICAgICAgbmV3IFBsYXliYWNrVG9nZ2xlQnV0dG9uKCksXG4gICAgICAgICAgICBuZXcgVm9sdW1lVG9nZ2xlQnV0dG9uKCksXG4gICAgICAgICAgICBuZXcgVm9sdW1lU2xpZGVyKCksXG4gICAgICAgICAgICBuZXcgU3BhY2VyKCksXG4gICAgICAgICAgICBuZXcgUGljdHVyZUluUGljdHVyZVRvZ2dsZUJ1dHRvbigpLFxuICAgICAgICAgICAgbmV3IEFpclBsYXlUb2dnbGVCdXR0b24oKSxcbiAgICAgICAgICAgIG5ldyBDYXN0VG9nZ2xlQnV0dG9uKCksXG4gICAgICAgICAgICBuZXcgVlJUb2dnbGVCdXR0b24oKSxcbiAgICAgICAgICAgIG5ldyBTZXR0aW5nc1RvZ2dsZUJ1dHRvbih7IHNldHRpbmdzUGFuZWw6IHNldHRpbmdzUGFuZWwgfSksXG4gICAgICAgICAgICBuZXcgRnVsbHNjcmVlblRvZ2dsZUJ1dHRvbigpLFxuICAgICAgICAgIF0sXG4gICAgICAgICAgY3NzQ2xhc3NlczogWydjb250cm9sYmFyLWJvdHRvbSddLFxuICAgICAgICB9KSxcbiAgICAgIF0sXG4gICAgfSk7XG5cbiAgICByZXR1cm4gbmV3IFVJQ29udGFpbmVyKHtcbiAgICAgIGNvbXBvbmVudHM6IFtcbiAgICAgICAgc3VidGl0bGVPdmVybGF5LFxuICAgICAgICBuZXcgQnVmZmVyaW5nT3ZlcmxheSgpLFxuICAgICAgICBuZXcgUGxheWJhY2tUb2dnbGVPdmVybGF5KCksXG4gICAgICAgIG5ldyBDYXN0U3RhdHVzT3ZlcmxheSgpLFxuICAgICAgICBjb250cm9sQmFyLFxuICAgICAgICBuZXcgVGl0bGVCYXIoKSxcbiAgICAgICAgbmV3IFJlY29tbWVuZGF0aW9uT3ZlcmxheSgpLFxuICAgICAgICBuZXcgV2F0ZXJtYXJrKCksXG4gICAgICAgIG5ldyBFcnJvck1lc3NhZ2VPdmVybGF5KCksXG4gICAgICBdLFxuICAgICAgaGlkZURlbGF5OiAyMDAwLFxuICAgICAgaGlkZVBsYXllclN0YXRlRXhjZXB0aW9uczogW1xuICAgICAgICBQbGF5ZXJVdGlscy5QbGF5ZXJTdGF0ZS5QcmVwYXJlZCxcbiAgICAgICAgUGxheWVyVXRpbHMuUGxheWVyU3RhdGUuUGF1c2VkLFxuICAgICAgICBQbGF5ZXJVdGlscy5QbGF5ZXJTdGF0ZS5GaW5pc2hlZCxcbiAgICAgIF0sXG4gICAgfSk7XG4gIH1cblxuICBleHBvcnQgZnVuY3Rpb24gbW9kZXJuQWRzVUkoKSB7XG4gICAgcmV0dXJuIG5ldyBVSUNvbnRhaW5lcih7XG4gICAgICBjb21wb25lbnRzOiBbXG4gICAgICAgIG5ldyBCdWZmZXJpbmdPdmVybGF5KCksXG4gICAgICAgIG5ldyBBZENsaWNrT3ZlcmxheSgpLFxuICAgICAgICBuZXcgUGxheWJhY2tUb2dnbGVPdmVybGF5KCksXG4gICAgICAgIG5ldyBDb250YWluZXIoe1xuICAgICAgICAgIGNvbXBvbmVudHM6IFtuZXcgQWRNZXNzYWdlTGFiZWwoeyB0ZXh0OiBpMThuLmdldExvY2FsaXplcignYWRzLnJlbWFpbmluZ1RpbWUnKSB9KSwgbmV3IEFkU2tpcEJ1dHRvbigpXSxcbiAgICAgICAgICBjc3NDbGFzczogJ3VpLWFkcy1zdGF0dXMnLFxuICAgICAgICB9KSxcbiAgICAgICAgbmV3IENvbnRyb2xCYXIoe1xuICAgICAgICAgIGNvbXBvbmVudHM6IFtcbiAgICAgICAgICAgIG5ldyBDb250YWluZXIoe1xuICAgICAgICAgICAgICBjb21wb25lbnRzOiBbXG4gICAgICAgICAgICAgICAgbmV3IFBsYXliYWNrVG9nZ2xlQnV0dG9uKCksXG4gICAgICAgICAgICAgICAgbmV3IFZvbHVtZVRvZ2dsZUJ1dHRvbigpLFxuICAgICAgICAgICAgICAgIG5ldyBWb2x1bWVTbGlkZXIoKSxcbiAgICAgICAgICAgICAgICBuZXcgU3BhY2VyKCksXG4gICAgICAgICAgICAgICAgbmV3IEZ1bGxzY3JlZW5Ub2dnbGVCdXR0b24oKSxcbiAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgY3NzQ2xhc3NlczogWydjb250cm9sYmFyLWJvdHRvbSddLFxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgXSxcbiAgICAgICAgfSksXG4gICAgICBdLFxuICAgICAgY3NzQ2xhc3NlczogWyd1aS1za2luLWFkcyddLFxuICAgICAgaGlkZURlbGF5OiAyMDAwLFxuICAgICAgaGlkZVBsYXllclN0YXRlRXhjZXB0aW9uczogW1xuICAgICAgICBQbGF5ZXJVdGlscy5QbGF5ZXJTdGF0ZS5QcmVwYXJlZCxcbiAgICAgICAgUGxheWVyVXRpbHMuUGxheWVyU3RhdGUuUGF1c2VkLFxuICAgICAgICBQbGF5ZXJVdGlscy5QbGF5ZXJTdGF0ZS5GaW5pc2hlZCxcbiAgICAgIF0sXG4gICAgfSk7XG4gIH1cblxuICBleHBvcnQgZnVuY3Rpb24gbW9kZXJuU21hbGxTY3JlZW5VSSgpIHtcbiAgICBsZXQgc3VidGl0bGVPdmVybGF5ID0gbmV3IFN1YnRpdGxlT3ZlcmxheSgpO1xuXG4gICAgbGV0IG1haW5TZXR0aW5nc1BhbmVsUGFnZSA9IG5ldyBTZXR0aW5nc1BhbmVsUGFnZSh7XG4gICAgICBjb21wb25lbnRzOiBbXG4gICAgICAgIG5ldyBTZXR0aW5nc1BhbmVsSXRlbShpMThuLmdldExvY2FsaXplcignc2V0dGluZ3MudmlkZW8ucXVhbGl0eScpLCBuZXcgVmlkZW9RdWFsaXR5U2VsZWN0Qm94KCkpLFxuICAgICAgICBuZXcgU2V0dGluZ3NQYW5lbEl0ZW0oaTE4bi5nZXRMb2NhbGl6ZXIoJ3NwZWVkJyksIG5ldyBQbGF5YmFja1NwZWVkU2VsZWN0Qm94KCkpLFxuICAgICAgICBuZXcgU2V0dGluZ3NQYW5lbEl0ZW0oaTE4bi5nZXRMb2NhbGl6ZXIoJ3NldHRpbmdzLmF1ZGlvLnRyYWNrJyksIG5ldyBBdWRpb1RyYWNrU2VsZWN0Qm94KCkpLFxuICAgICAgICBuZXcgU2V0dGluZ3NQYW5lbEl0ZW0oaTE4bi5nZXRMb2NhbGl6ZXIoJ3NldHRpbmdzLmF1ZGlvLnF1YWxpdHknKSwgbmV3IEF1ZGlvUXVhbGl0eVNlbGVjdEJveCgpKSxcbiAgICAgIF0sXG4gICAgfSk7XG5cbiAgICBsZXQgc2V0dGluZ3NQYW5lbCA9IG5ldyBTZXR0aW5nc1BhbmVsKHtcbiAgICAgIGNvbXBvbmVudHM6IFttYWluU2V0dGluZ3NQYW5lbFBhZ2VdLFxuICAgICAgaGlkZGVuOiB0cnVlLFxuICAgICAgcGFnZVRyYW5zaXRpb25BbmltYXRpb246IGZhbHNlLFxuICAgICAgaGlkZURlbGF5OiAtMSxcbiAgICB9KTtcblxuICAgIGxldCBzdWJ0aXRsZVNldHRpbmdzUGFuZWxQYWdlID0gbmV3IFN1YnRpdGxlU2V0dGluZ3NQYW5lbFBhZ2Uoe1xuICAgICAgc2V0dGluZ3NQYW5lbDogc2V0dGluZ3NQYW5lbCxcbiAgICAgIG92ZXJsYXk6IHN1YnRpdGxlT3ZlcmxheSxcbiAgICB9KTtcblxuICAgIGxldCBzdWJ0aXRsZVNldHRpbmdzT3BlbkJ1dHRvbiA9IG5ldyBTZXR0aW5nc1BhbmVsUGFnZU9wZW5CdXR0b24oe1xuICAgICAgdGFyZ2V0UGFnZTogc3VidGl0bGVTZXR0aW5nc1BhbmVsUGFnZSxcbiAgICAgIGNvbnRhaW5lcjogc2V0dGluZ3NQYW5lbCxcbiAgICAgIGFyaWFMYWJlbDogaTE4bi5nZXRMb2NhbGl6ZXIoJ3NldHRpbmdzLnN1YnRpdGxlcycpLFxuICAgICAgdGV4dDogaTE4bi5nZXRMb2NhbGl6ZXIoJ29wZW4nKSxcbiAgICB9KTtcblxuICAgIGNvbnN0IHN1YnRpdGxlU2VsZWN0Qm94ID0gbmV3IFN1YnRpdGxlU2VsZWN0Qm94KCk7XG5cbiAgICBtYWluU2V0dGluZ3NQYW5lbFBhZ2UuYWRkQ29tcG9uZW50KFxuICAgICAgbmV3IFNldHRpbmdzUGFuZWxJdGVtKFxuICAgICAgICBuZXcgU3VidGl0bGVTZXR0aW5nc0xhYmVsKHtcbiAgICAgICAgICB0ZXh0OiBpMThuLmdldExvY2FsaXplcignc2V0dGluZ3Muc3VidGl0bGVzJyksXG4gICAgICAgICAgb3BlbmVyOiBzdWJ0aXRsZVNldHRpbmdzT3BlbkJ1dHRvbixcbiAgICAgICAgfSksXG4gICAgICAgIHN1YnRpdGxlU2VsZWN0Qm94LFxuICAgICAgICB7XG4gICAgICAgICAgcm9sZTogJ21lbnViYXInLFxuICAgICAgICB9LFxuICAgICAgKSxcbiAgICApO1xuXG4gICAgc2V0dGluZ3NQYW5lbC5hZGRDb21wb25lbnQoc3VidGl0bGVTZXR0aW5nc1BhbmVsUGFnZSk7XG5cbiAgICBzZXR0aW5nc1BhbmVsLmFkZENvbXBvbmVudChuZXcgQ2xvc2VCdXR0b24oeyB0YXJnZXQ6IHNldHRpbmdzUGFuZWwgfSkpO1xuICAgIHN1YnRpdGxlU2V0dGluZ3NQYW5lbFBhZ2UuYWRkQ29tcG9uZW50KG5ldyBDbG9zZUJ1dHRvbih7IHRhcmdldDogc2V0dGluZ3NQYW5lbCB9KSk7XG5cbiAgICBsZXQgY29udHJvbEJhciA9IG5ldyBDb250cm9sQmFyKHtcbiAgICAgIGNvbXBvbmVudHM6IFtcbiAgICAgICAgbmV3IENvbnRhaW5lcih7XG4gICAgICAgICAgY29tcG9uZW50czogW1xuICAgICAgICAgICAgbmV3IFBsYXliYWNrVGltZUxhYmVsKHtcbiAgICAgICAgICAgICAgdGltZUxhYmVsTW9kZTogUGxheWJhY2tUaW1lTGFiZWxNb2RlLkN1cnJlbnRUaW1lLFxuICAgICAgICAgICAgICBoaWRlSW5MaXZlUGxheWJhY2s6IHRydWUsXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIG5ldyBTZWVrQmFyKHsgbGFiZWw6IG5ldyBTZWVrQmFyTGFiZWwoKSB9KSxcbiAgICAgICAgICAgIG5ldyBQbGF5YmFja1RpbWVMYWJlbCh7XG4gICAgICAgICAgICAgIHRpbWVMYWJlbE1vZGU6IFBsYXliYWNrVGltZUxhYmVsTW9kZS5Ub3RhbFRpbWUsXG4gICAgICAgICAgICAgIGNzc0NsYXNzZXM6IFsndGV4dC1yaWdodCddLFxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgXSxcbiAgICAgICAgICBjc3NDbGFzc2VzOiBbJ2NvbnRyb2xiYXItdG9wJ10sXG4gICAgICAgIH0pLFxuICAgICAgXSxcbiAgICB9KTtcblxuICAgIHJldHVybiBuZXcgVUlDb250YWluZXIoe1xuICAgICAgY29tcG9uZW50czogW1xuICAgICAgICBzdWJ0aXRsZU92ZXJsYXksXG4gICAgICAgIG5ldyBCdWZmZXJpbmdPdmVybGF5KCksXG4gICAgICAgIG5ldyBDYXN0U3RhdHVzT3ZlcmxheSgpLFxuICAgICAgICBuZXcgUGxheWJhY2tUb2dnbGVPdmVybGF5KCksXG4gICAgICAgIG5ldyBSZWNvbW1lbmRhdGlvbk92ZXJsYXkoKSxcbiAgICAgICAgY29udHJvbEJhcixcbiAgICAgICAgbmV3IFRpdGxlQmFyKHtcbiAgICAgICAgICBjb21wb25lbnRzOiBbXG4gICAgICAgICAgICBuZXcgTWV0YWRhdGFMYWJlbCh7IGNvbnRlbnQ6IE1ldGFkYXRhTGFiZWxDb250ZW50LlRpdGxlIH0pLFxuICAgICAgICAgICAgbmV3IENhc3RUb2dnbGVCdXR0b24oKSxcbiAgICAgICAgICAgIG5ldyBWUlRvZ2dsZUJ1dHRvbigpLFxuICAgICAgICAgICAgbmV3IFBpY3R1cmVJblBpY3R1cmVUb2dnbGVCdXR0b24oKSxcbiAgICAgICAgICAgIG5ldyBBaXJQbGF5VG9nZ2xlQnV0dG9uKCksXG4gICAgICAgICAgICBuZXcgVm9sdW1lVG9nZ2xlQnV0dG9uKCksXG4gICAgICAgICAgICBuZXcgU2V0dGluZ3NUb2dnbGVCdXR0b24oeyBzZXR0aW5nc1BhbmVsOiBzZXR0aW5nc1BhbmVsIH0pLFxuICAgICAgICAgICAgbmV3IEZ1bGxzY3JlZW5Ub2dnbGVCdXR0b24oKSxcbiAgICAgICAgICBdLFxuICAgICAgICB9KSxcbiAgICAgICAgc2V0dGluZ3NQYW5lbCxcbiAgICAgICAgbmV3IFdhdGVybWFyaygpLFxuICAgICAgICBuZXcgRXJyb3JNZXNzYWdlT3ZlcmxheSgpLFxuICAgICAgXSxcbiAgICAgIGNzc0NsYXNzZXM6IFsndWktc2tpbi1zbWFsbHNjcmVlbiddLFxuICAgICAgaGlkZURlbGF5OiAyMDAwLFxuICAgICAgaGlkZVBsYXllclN0YXRlRXhjZXB0aW9uczogW1xuICAgICAgICBQbGF5ZXJVdGlscy5QbGF5ZXJTdGF0ZS5QcmVwYXJlZCxcbiAgICAgICAgUGxheWVyVXRpbHMuUGxheWVyU3RhdGUuUGF1c2VkLFxuICAgICAgICBQbGF5ZXJVdGlscy5QbGF5ZXJTdGF0ZS5GaW5pc2hlZCxcbiAgICAgIF0sXG4gICAgfSk7XG4gIH1cblxuICBleHBvcnQgZnVuY3Rpb24gbW9kZXJuU21hbGxTY3JlZW5BZHNVSSgpIHtcbiAgICByZXR1cm4gbmV3IFVJQ29udGFpbmVyKHtcbiAgICAgIGNvbXBvbmVudHM6IFtcbiAgICAgICAgbmV3IEJ1ZmZlcmluZ092ZXJsYXkoKSxcbiAgICAgICAgbmV3IEFkQ2xpY2tPdmVybGF5KCksXG4gICAgICAgIG5ldyBQbGF5YmFja1RvZ2dsZU92ZXJsYXkoKSxcbiAgICAgICAgbmV3IFRpdGxlQmFyKHtcbiAgICAgICAgICBjb21wb25lbnRzOiBbXG4gICAgICAgICAgICAvLyBkdW1teSBsYWJlbCB3aXRoIG5vIGNvbnRlbnQgdG8gbW92ZSBidXR0b25zIHRvIHRoZSByaWdodFxuICAgICAgICAgICAgbmV3IExhYmVsKHsgY3NzQ2xhc3M6ICdsYWJlbC1tZXRhZGF0YS10aXRsZScgfSksXG4gICAgICAgICAgICBuZXcgRnVsbHNjcmVlblRvZ2dsZUJ1dHRvbigpLFxuICAgICAgICAgIF0sXG4gICAgICAgIH0pLFxuICAgICAgICBuZXcgQ29udGFpbmVyKHtcbiAgICAgICAgICBjb21wb25lbnRzOiBbbmV3IEFkTWVzc2FnZUxhYmVsKHsgdGV4dDogJ0FkOiB7cmVtYWluaW5nVGltZX0gc2VjcycgfSksIG5ldyBBZFNraXBCdXR0b24oKV0sXG4gICAgICAgICAgY3NzQ2xhc3M6ICd1aS1hZHMtc3RhdHVzJyxcbiAgICAgICAgfSksXG4gICAgICBdLFxuICAgICAgY3NzQ2xhc3NlczogWyd1aS1za2luLWFkcycsICd1aS1za2luLXNtYWxsc2NyZWVuJ10sXG4gICAgICBoaWRlRGVsYXk6IDIwMDAsXG4gICAgICBoaWRlUGxheWVyU3RhdGVFeGNlcHRpb25zOiBbXG4gICAgICAgIFBsYXllclV0aWxzLlBsYXllclN0YXRlLlByZXBhcmVkLFxuICAgICAgICBQbGF5ZXJVdGlscy5QbGF5ZXJTdGF0ZS5QYXVzZWQsXG4gICAgICAgIFBsYXllclV0aWxzLlBsYXllclN0YXRlLkZpbmlzaGVkLFxuICAgICAgXSxcbiAgICB9KTtcbiAgfVxuXG4gIGV4cG9ydCBmdW5jdGlvbiBtb2Rlcm5DYXN0UmVjZWl2ZXJVSSgpIHtcbiAgICBsZXQgY29udHJvbEJhciA9IG5ldyBDb250cm9sQmFyKHtcbiAgICAgIGNvbXBvbmVudHM6IFtcbiAgICAgICAgbmV3IENvbnRhaW5lcih7XG4gICAgICAgICAgY29tcG9uZW50czogW1xuICAgICAgICAgICAgbmV3IFBsYXliYWNrVGltZUxhYmVsKHtcbiAgICAgICAgICAgICAgdGltZUxhYmVsTW9kZTogUGxheWJhY2tUaW1lTGFiZWxNb2RlLkN1cnJlbnRUaW1lLFxuICAgICAgICAgICAgICBoaWRlSW5MaXZlUGxheWJhY2s6IHRydWUsXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIG5ldyBTZWVrQmFyKHsgc21vb3RoUGxheWJhY2tQb3NpdGlvblVwZGF0ZUludGVydmFsTXM6IC0xIH0pLFxuICAgICAgICAgICAgbmV3IFBsYXliYWNrVGltZUxhYmVsKHtcbiAgICAgICAgICAgICAgdGltZUxhYmVsTW9kZTogUGxheWJhY2tUaW1lTGFiZWxNb2RlLlRvdGFsVGltZSxcbiAgICAgICAgICAgICAgY3NzQ2xhc3NlczogWyd0ZXh0LXJpZ2h0J10sXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICBdLFxuICAgICAgICAgIGNzc0NsYXNzZXM6IFsnY29udHJvbGJhci10b3AnXSxcbiAgICAgICAgfSksXG4gICAgICBdLFxuICAgIH0pO1xuXG4gICAgcmV0dXJuIG5ldyBDYXN0VUlDb250YWluZXIoe1xuICAgICAgY29tcG9uZW50czogW1xuICAgICAgICBuZXcgU3VidGl0bGVPdmVybGF5KCksXG4gICAgICAgIG5ldyBCdWZmZXJpbmdPdmVybGF5KCksXG4gICAgICAgIG5ldyBQbGF5YmFja1RvZ2dsZU92ZXJsYXkoKSxcbiAgICAgICAgbmV3IFdhdGVybWFyaygpLFxuICAgICAgICBjb250cm9sQmFyLFxuICAgICAgICBuZXcgVGl0bGVCYXIoeyBrZWVwSGlkZGVuV2l0aG91dE1ldGFkYXRhOiB0cnVlIH0pLFxuICAgICAgICBuZXcgRXJyb3JNZXNzYWdlT3ZlcmxheSgpLFxuICAgICAgXSxcbiAgICAgIGNzc0NsYXNzZXM6IFsndWktc2tpbi1jYXN0LXJlY2VpdmVyJ10sXG4gICAgICBoaWRlRGVsYXk6IDIwMDAsXG4gICAgICBoaWRlUGxheWVyU3RhdGVFeGNlcHRpb25zOiBbXG4gICAgICAgIFBsYXllclV0aWxzLlBsYXllclN0YXRlLlByZXBhcmVkLFxuICAgICAgICBQbGF5ZXJVdGlscy5QbGF5ZXJTdGF0ZS5QYXVzZWQsXG4gICAgICAgIFBsYXllclV0aWxzLlBsYXllclN0YXRlLkZpbmlzaGVkLFxuICAgICAgXSxcbiAgICB9KTtcbiAgfVxuXG4gIGV4cG9ydCBmdW5jdGlvbiBidWlsZE1vZGVyblVJKHBsYXllcjogUGxheWVyQVBJLCBjb25maWc6IFVJQ29uZmlnID0ge30pOiBVSU1hbmFnZXIge1xuICAgIC8vIHNob3cgc21hbGxTY3JlZW4gVUkgb25seSBvbiBtb2JpbGUvaGFuZGhlbGQgZGV2aWNlc1xuICAgIGxldCBzbWFsbFNjcmVlblN3aXRjaFdpZHRoID0gNjAwO1xuXG4gICAgcmV0dXJuIG5ldyBVSU1hbmFnZXIoXG4gICAgICBwbGF5ZXIsXG4gICAgICBbXG4gICAgICAgIHtcbiAgICAgICAgICB1aTogbW9kZXJuU21hbGxTY3JlZW5BZHNVSSgpLFxuICAgICAgICAgIGNvbmRpdGlvbjogKGNvbnRleHQ6IFVJQ29uZGl0aW9uQ29udGV4dCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgY29udGV4dC5pc01vYmlsZSAmJiBjb250ZXh0LmRvY3VtZW50V2lkdGggPCBzbWFsbFNjcmVlblN3aXRjaFdpZHRoICYmIGNvbnRleHQuaXNBZCAmJiBjb250ZXh0LmFkUmVxdWlyZXNVaVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgdWk6IG1vZGVybkFkc1VJKCksXG4gICAgICAgICAgY29uZGl0aW9uOiAoY29udGV4dDogVUlDb25kaXRpb25Db250ZXh0KSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gY29udGV4dC5pc0FkICYmIGNvbnRleHQuYWRSZXF1aXJlc1VpO1xuICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICB1aTogbW9kZXJuU21hbGxTY3JlZW5VSSgpLFxuICAgICAgICAgIGNvbmRpdGlvbjogKGNvbnRleHQ6IFVJQ29uZGl0aW9uQ29udGV4dCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgIWNvbnRleHQuaXNBZCAmJlxuICAgICAgICAgICAgICAhY29udGV4dC5hZFJlcXVpcmVzVWkgJiZcbiAgICAgICAgICAgICAgY29udGV4dC5pc01vYmlsZSAmJlxuICAgICAgICAgICAgICBjb250ZXh0LmRvY3VtZW50V2lkdGggPCBzbWFsbFNjcmVlblN3aXRjaFdpZHRoXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICB1aTogbW9kZXJuVUkoY29uZmlnKSxcbiAgICAgICAgICBjb25kaXRpb246IChjb250ZXh0OiBVSUNvbmRpdGlvbkNvbnRleHQpID0+IHtcbiAgICAgICAgICAgIHJldHVybiAhY29udGV4dC5pc0FkICYmICFjb250ZXh0LmFkUmVxdWlyZXNVaTtcbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgXSxcbiAgICAgIGNvbmZpZyxcbiAgICApO1xuICB9XG5cbiAgZXhwb3J0IGZ1bmN0aW9uIGJ1aWxkTW9kZXJuU21hbGxTY3JlZW5VSShwbGF5ZXI6IFBsYXllckFQSSwgY29uZmlnOiBVSUNvbmZpZyA9IHt9KTogVUlNYW5hZ2VyIHtcbiAgICByZXR1cm4gbmV3IFVJTWFuYWdlcihcbiAgICAgIHBsYXllcixcbiAgICAgIFtcbiAgICAgICAge1xuICAgICAgICAgIC4uLm1vZGVyblR2VUkoKSxcbiAgICAgICAgfSxcbiAgICAgIF0sXG4gICAgICBjb25maWcsXG4gICAgKTtcbiAgfVxuXG4gIGV4cG9ydCBmdW5jdGlvbiBidWlsZE1vZGVybkNhc3RSZWNlaXZlclVJKHBsYXllcjogUGxheWVyQVBJLCBjb25maWc6IFVJQ29uZmlnID0ge30pOiBVSU1hbmFnZXIge1xuICAgIHJldHVybiBuZXcgVUlNYW5hZ2VyKHBsYXllciwgbW9kZXJuQ2FzdFJlY2VpdmVyVUkoKSwgY29uZmlnKTtcbiAgfVxuXG4gIGV4cG9ydCBmdW5jdGlvbiBidWlsZE1vZGVyblR2VUkocGxheWVyOiBQbGF5ZXJBUEksIGNvbmZpZzogVUlDb25maWcgPSB7fSk6IFVJTWFuYWdlciB7XG4gICAgcmV0dXJuIG5ldyBVSU1hbmFnZXIoXG4gICAgICBwbGF5ZXIsXG4gICAgICBbXG4gICAgICAgIHtcbiAgICAgICAgICAuLi5tb2Rlcm5UdlVJKCksXG4gICAgICAgIH0sXG4gICAgICBdLFxuICAgICAgY29uZmlnLFxuICAgICk7XG4gIH1cblxuICBleHBvcnQgZnVuY3Rpb24gbW9kZXJuVHZVSSgpIHtcbiAgICBjb25zdCBzdWJ0aXRsZUxpc3RCb3ggPSBuZXcgU3VidGl0bGVMaXN0Qm94KCk7XG4gICAgY29uc3Qgc3VidGl0bGVMaXN0UGFuZWwgPSBuZXcgU2V0dGluZ3NQYW5lbCh7XG4gICAgICBjb21wb25lbnRzOiBbXG4gICAgICAgIG5ldyBTZXR0aW5nc1BhbmVsUGFnZSh7XG4gICAgICAgICAgY29tcG9uZW50czogW25ldyBTZXR0aW5nc1BhbmVsSXRlbShudWxsLCBzdWJ0aXRsZUxpc3RCb3gpXSxcbiAgICAgICAgfSksXG4gICAgICBdLFxuICAgICAgaGlkZGVuOiB0cnVlLFxuICAgIH0pO1xuXG4gICAgY29uc3QgYXVkaW9UcmFja0xpc3RCb3ggPSBuZXcgQXVkaW9UcmFja0xpc3RCb3goKTtcbiAgICBjb25zdCBhdWRpb1RyYWNrTGlzdFBhbmVsID0gbmV3IFNldHRpbmdzUGFuZWwoe1xuICAgICAgY29tcG9uZW50czogW1xuICAgICAgICBuZXcgU2V0dGluZ3NQYW5lbFBhZ2Uoe1xuICAgICAgICAgIGNvbXBvbmVudHM6IFtuZXcgU2V0dGluZ3NQYW5lbEl0ZW0obnVsbCwgYXVkaW9UcmFja0xpc3RCb3gpXSxcbiAgICAgICAgfSksXG4gICAgICBdLFxuICAgICAgaGlkZGVuOiB0cnVlLFxuICAgIH0pO1xuXG4gICAgY29uc3Qgc2Vla0JhciA9IG5ldyBTZWVrQmFyKHsgbGFiZWw6IG5ldyBTZWVrQmFyTGFiZWwoKSB9KTtcbiAgICBjb25zdCBwbGF5YmFja1RvZ2dsZU92ZXJsYXkgPSBuZXcgUGxheWJhY2tUb2dnbGVPdmVybGF5KCk7XG4gICAgY29uc3Qgc3VidGl0bGVUb2dnbGVCdXR0b24gPSBuZXcgU2V0dGluZ3NUb2dnbGVCdXR0b24oe1xuICAgICAgc2V0dGluZ3NQYW5lbDogc3VidGl0bGVMaXN0UGFuZWwsXG4gICAgICBhdXRvSGlkZVdoZW5Ob0FjdGl2ZVNldHRpbmdzOiB0cnVlLFxuICAgICAgY3NzQ2xhc3M6ICd1aS1zdWJ0aXRsZXNldHRpbmdzdG9nZ2xlYnV0dG9uJyxcbiAgICAgIHRleHQ6IGkxOG4uZ2V0TG9jYWxpemVyKCdzZXR0aW5ncy5zdWJ0aXRsZXMnKSxcbiAgICB9KTtcbiAgICBjb25zdCBhdWRpb1RvZ2dsZUJ1dHRvbiA9IG5ldyBTZXR0aW5nc1RvZ2dsZUJ1dHRvbih7XG4gICAgICBzZXR0aW5nc1BhbmVsOiBhdWRpb1RyYWNrTGlzdFBhbmVsLFxuICAgICAgYXV0b0hpZGVXaGVuTm9BY3RpdmVTZXR0aW5nczogdHJ1ZSxcbiAgICAgIGNzc0NsYXNzOiAndWktYXVkaW90cmFja3NldHRpbmdzdG9nZ2xlYnV0dG9uJyxcbiAgICAgIGFyaWFMYWJlbDogaTE4bi5nZXRMb2NhbGl6ZXIoJ3NldHRpbmdzLmF1ZGlvLnRyYWNrJyksXG4gICAgICB0ZXh0OiBpMThuLmdldExvY2FsaXplcignc2V0dGluZ3MuYXVkaW8udHJhY2snKSxcbiAgICB9KTtcbiAgICBjb25zdCB1aUNvbnRhaW5lciA9IG5ldyBVSUNvbnRhaW5lcih7XG4gICAgICBjb21wb25lbnRzOiBbXG4gICAgICAgIG5ldyBTdWJ0aXRsZU92ZXJsYXkoKSxcbiAgICAgICAgbmV3IEJ1ZmZlcmluZ092ZXJsYXkoKSxcbiAgICAgICAgcGxheWJhY2tUb2dnbGVPdmVybGF5LFxuICAgICAgICBuZXcgQ29udHJvbEJhcih7XG4gICAgICAgICAgY29tcG9uZW50czogW1xuICAgICAgICAgICAgbmV3IENvbnRhaW5lcih7XG4gICAgICAgICAgICAgIGNvbXBvbmVudHM6IFtcbiAgICAgICAgICAgICAgICBuZXcgUGxheWJhY2tUaW1lTGFiZWwoe1xuICAgICAgICAgICAgICAgICAgdGltZUxhYmVsTW9kZTogUGxheWJhY2tUaW1lTGFiZWxNb2RlLkN1cnJlbnRUaW1lLFxuICAgICAgICAgICAgICAgICAgaGlkZUluTGl2ZVBsYXliYWNrOiB0cnVlLFxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIHNlZWtCYXIsXG4gICAgICAgICAgICAgICAgbmV3IFBsYXliYWNrVGltZUxhYmVsKHtcbiAgICAgICAgICAgICAgICAgIHRpbWVMYWJlbE1vZGU6IFBsYXliYWNrVGltZUxhYmVsTW9kZS5SZW1haW5pbmdUaW1lLFxuICAgICAgICAgICAgICAgICAgY3NzQ2xhc3NlczogWyd0ZXh0LXJpZ2h0J10sXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgIGNzc0NsYXNzZXM6IFsnY29udHJvbGJhci10b3AnXSxcbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgIF0sXG4gICAgICAgIH0pLFxuICAgICAgICBuZXcgVGl0bGVCYXIoe1xuICAgICAgICAgIGNvbXBvbmVudHM6IFtcbiAgICAgICAgICAgIG5ldyBDb250YWluZXIoe1xuICAgICAgICAgICAgICBjb21wb25lbnRzOiBbXG4gICAgICAgICAgICAgICAgbmV3IE1ldGFkYXRhTGFiZWwoeyBjb250ZW50OiBNZXRhZGF0YUxhYmVsQ29udGVudC5UaXRsZSB9KSxcbiAgICAgICAgICAgICAgICBzdWJ0aXRsZVRvZ2dsZUJ1dHRvbixcbiAgICAgICAgICAgICAgICBhdWRpb1RvZ2dsZUJ1dHRvbixcbiAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgY3NzQ2xhc3NlczogWyd1aS10aXRsZWJhci10b3AnXSxcbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgbmV3IENvbnRhaW5lcih7XG4gICAgICAgICAgICAgIGNvbXBvbmVudHM6IFtcbiAgICAgICAgICAgICAgICBuZXcgTWV0YWRhdGFMYWJlbCh7IGNvbnRlbnQ6IE1ldGFkYXRhTGFiZWxDb250ZW50LkRlc2NyaXB0aW9uIH0pLFxuICAgICAgICAgICAgICAgIHN1YnRpdGxlTGlzdFBhbmVsLFxuICAgICAgICAgICAgICAgIGF1ZGlvVHJhY2tMaXN0UGFuZWwsXG4gICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgIGNzc0NsYXNzZXM6IFsndWktdGl0bGViYXItYm90dG9tJ10sXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICBdLFxuICAgICAgICB9KSxcbiAgICAgICAgbmV3IFJlY29tbWVuZGF0aW9uT3ZlcmxheSgpLFxuICAgICAgICBuZXcgRXJyb3JNZXNzYWdlT3ZlcmxheSgpLFxuICAgICAgXSxcbiAgICAgIGNzc0NsYXNzZXM6IFsndWktc2tpbi10diddLFxuICAgICAgaGlkZURlbGF5OiAyMDAwLFxuICAgICAgaGlkZVBsYXllclN0YXRlRXhjZXB0aW9uczogW1xuICAgICAgICBQbGF5ZXJVdGlscy5QbGF5ZXJTdGF0ZS5QcmVwYXJlZCxcbiAgICAgICAgUGxheWVyVXRpbHMuUGxheWVyU3RhdGUuUGF1c2VkLFxuICAgICAgICBQbGF5ZXJVdGlscy5QbGF5ZXJTdGF0ZS5GaW5pc2hlZCxcbiAgICAgIF0sXG4gICAgfSk7XG5cbiAgICBjb25zdCBzcGF0aWFsTmF2aWdhdGlvbiA9IG5ldyBTcGF0aWFsTmF2aWdhdGlvbihcbiAgICAgIG5ldyBSb290TmF2aWdhdGlvbkdyb3VwKHVpQ29udGFpbmVyLCBwbGF5YmFja1RvZ2dsZU92ZXJsYXksIHNlZWtCYXIsIGF1ZGlvVG9nZ2xlQnV0dG9uLCBzdWJ0aXRsZVRvZ2dsZUJ1dHRvbiksXG4gICAgICBuZXcgTGlzdE5hdmlnYXRpb25Hcm91cChMaXN0T3JpZW50YXRpb24uVmVydGljYWwsIHN1YnRpdGxlTGlzdFBhbmVsLCBzdWJ0aXRsZUxpc3RCb3gpLFxuICAgICAgbmV3IExpc3ROYXZpZ2F0aW9uR3JvdXAoTGlzdE9yaWVudGF0aW9uLlZlcnRpY2FsLCBhdWRpb1RyYWNrTGlzdFBhbmVsLCBhdWRpb1RyYWNrTGlzdEJveCksXG4gICAgKTtcblxuICAgIHJldHVybiB7XG4gICAgICB1aTogdWlDb250YWluZXIsXG4gICAgICBzcGF0aWFsTmF2aWdhdGlvbjogc3BhdGlhbE5hdmlnYXRpb24sXG4gICAgfTtcbiAgfVxufVxuIiwiaW1wb3J0IHtVSUNvbnRhaW5lcn0gZnJvbSAnLi9jb21wb25lbnRzL3VpY29udGFpbmVyJztcbmltcG9ydCB7RE9NfSBmcm9tICcuL2RvbSc7XG5pbXBvcnQgeyBDb21wb25lbnQsIENvbXBvbmVudENvbmZpZywgVmlld01vZGVDaGFuZ2VkRXZlbnRBcmdzIH0gZnJvbSAnLi9jb21wb25lbnRzL2NvbXBvbmVudCc7XG5pbXBvcnQge0NvbnRhaW5lcn0gZnJvbSAnLi9jb21wb25lbnRzL2NvbnRhaW5lcic7XG5pbXBvcnQgeyBTZWVrQmFyLCBTZWVrQmFyTWFya2VyIH0gZnJvbSAnLi9jb21wb25lbnRzL3NlZWtiYXInO1xuaW1wb3J0IHtOb0FyZ3MsIEV2ZW50RGlzcGF0Y2hlciwgQ2FuY2VsRXZlbnRBcmdzfSBmcm9tICcuL2V2ZW50ZGlzcGF0Y2hlcic7XG5pbXBvcnQge1VJVXRpbHN9IGZyb20gJy4vdWl1dGlscyc7XG5pbXBvcnQge0FycmF5VXRpbHN9IGZyb20gJy4vYXJyYXl1dGlscyc7XG5pbXBvcnQge0Jyb3dzZXJVdGlsc30gZnJvbSAnLi9icm93c2VydXRpbHMnO1xuaW1wb3J0IHsgVGltZWxpbmVNYXJrZXIsIFVJQ29uZmlnIH0gZnJvbSAnLi91aWNvbmZpZyc7XG5pbXBvcnQgeyBQbGF5ZXJBUEksIFBsYXllckV2ZW50Q2FsbGJhY2ssIFBsYXllckV2ZW50QmFzZSwgUGxheWVyRXZlbnQsIEFkRXZlbnQsIExpbmVhckFkIH0gZnJvbSAnYml0bW92aW4tcGxheWVyJztcbmltcG9ydCB7IFZvbHVtZUNvbnRyb2xsZXIgfSBmcm9tICcuL3ZvbHVtZWNvbnRyb2xsZXInO1xuaW1wb3J0IHsgaTE4biwgQ3VzdG9tVm9jYWJ1bGFyeSwgVm9jYWJ1bGFyaWVzIH0gZnJvbSAnLi9sb2NhbGl6YXRpb24vaTE4bic7XG5pbXBvcnQgeyBGb2N1c1Zpc2liaWxpdHlUcmFja2VyIH0gZnJvbSAnLi9mb2N1c3Zpc2liaWxpdHl0cmFja2VyJztcbmltcG9ydCB7IGlzTW9iaWxlVjNQbGF5ZXJBUEksIE1vYmlsZVYzUGxheWVyQVBJLCBNb2JpbGVWM1BsYXllckV2ZW50IH0gZnJvbSAnLi9tb2JpbGV2M3BsYXllcmFwaSc7XG5pbXBvcnQgeyBTcGF0aWFsTmF2aWdhdGlvbiB9IGZyb20gJy4vc3BhdGlhbG5hdmlnYXRpb24vc3BhdGlhbG5hdmlnYXRpb24nO1xuaW1wb3J0IHsgU3VidGl0bGVTZXR0aW5nc01hbmFnZXIgfSBmcm9tICcuL2NvbXBvbmVudHMvc3VidGl0bGVzZXR0aW5ncy9zdWJ0aXRsZXNldHRpbmdzbWFuYWdlcic7XG5pbXBvcnQgeyBTdG9yYWdlVXRpbHMgfSBmcm9tICcuL3N0b3JhZ2V1dGlscyc7XG5cbi8qKlxuICogQGNhdGVnb3J5IENvbmZpZ3NcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBMb2NhbGl6YXRpb25Db25maWcge1xuICAvKipcbiAgICogU2V0cyB0aGUgZGVzaXJlZCBsYW5ndWFnZSwgYW5kIGZhbGxzIGJhY2sgdG8gJ2VuJyBpZiB0aGVyZSBpcyBubyB2b2NhYnVsYXJ5IGZvciB0aGUgZGVzaXJlZCBsYW5ndWFnZS4gU2V0dGluZyBpdFxuICAgKiB0byBcImF1dG9cIiB3aWxsIGVuYWJsZSBsYW5ndWFnZSBkZXRlY3Rpb24gZnJvbSB0aGUgYnJvd3NlcidzIGxvY2FsZS5cbiAgICovXG4gIGxhbmd1YWdlPzogJ2F1dG8nIHwgJ2VuJyB8ICdkZScgfCBzdHJpbmc7XG4gIC8qKlxuICAgKiBBIG1hcCBvZiBgbGFuZ3VhZ2VgIHRvIHtAbGluayBDdXN0b21Wb2NhYnVsYXJ5fSBkZWZpbml0aW9ucy4gQ2FuIGJlIHVzZWQgdG8gb3ZlcndyaXRlIGRlZmF1bHQgdHJhbnNsYXRpb25zIGFuZCBhZGRcbiAgICogY3VzdG9tIHN0cmluZ3Mgb3IgYWRkaXRpb25hbCBsYW5ndWFnZXMuXG4gICAqL1xuICB2b2NhYnVsYXJpZXM/OiBWb2NhYnVsYXJpZXM7XG59XG5cbi8qKlxuICogQGNhdGVnb3J5IENvbmZpZ3NcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBJbnRlcm5hbFVJQ29uZmlnIGV4dGVuZHMgVUlDb25maWcge1xuICBldmVudHM6IHtcbiAgICAvKipcbiAgICAgKiBGaXJlcyB3aGVuIHRoZSBjb25maWd1cmF0aW9uIGhhcyBiZWVuIHVwZGF0ZWQvY2hhbmdlZC5cbiAgICAgKi9cbiAgICBvblVwZGF0ZWQ6IEV2ZW50RGlzcGF0Y2hlcjxVSU1hbmFnZXIsIHZvaWQ+O1xuICB9O1xuICB2b2x1bWVDb250cm9sbGVyOiBWb2x1bWVDb250cm9sbGVyO1xufVxuXG4vKipcbiAqIFRoZSBjb250ZXh0IHRoYXQgd2lsbCBiZSBwYXNzZWQgdG8gYSB7QGxpbmsgVUlDb25kaXRpb25SZXNvbHZlcn0gdG8gZGV0ZXJtaW5lIGlmIGl0J3MgY29uZGl0aW9ucyBmdWxmaWwgdGhlIGNvbnRleHQuXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgVUlDb25kaXRpb25Db250ZXh0IHtcbiAgLyoqXG4gICAqIFRlbGxzIGlmIHRoZSBwbGF5ZXIgaXMgbG9hZGluZyBvciBwbGF5aW5nIGFuIGFkLlxuICAgKi9cbiAgaXNBZDogYm9vbGVhbjtcbiAgLyoqXG4gICAqIFRlbGxzIGlmIHRoZSBjdXJyZW50IGFkIHJlcXVpcmVzIGFuIGV4dGVybmFsIFVJLCBpZiB7QGxpbmsgI2lzQWR9IGlzIHRydWUuXG4gICAqL1xuICBhZFJlcXVpcmVzVWk6IGJvb2xlYW47XG4gIC8qKlxuICAgKiBUZWxscyBpZiB0aGUgcGxheWVyIGlzIGN1cnJlbnRseSBpbiBmdWxsc2NyZWVuIG1vZGUuXG4gICAqL1xuICBpc0Z1bGxzY3JlZW46IGJvb2xlYW47XG4gIC8qKlxuICAgKiBUZWxscyBpZiB0aGUgVUkgaXMgcnVubmluZyBpbiBhIG1vYmlsZSBicm93c2VyLlxuICAgKi9cbiAgaXNNb2JpbGU6IGJvb2xlYW47XG4gIC8qKlxuICAgKiBUZWxscyBpZiB0aGUgcGxheWVyIGlzIGluIHBsYXlpbmcgb3IgcGF1c2VkIHN0YXRlLlxuICAgKi9cbiAgaXNQbGF5aW5nOiBib29sZWFuO1xuICAvKipcbiAgICogVGhlIHdpZHRoIG9mIHRoZSBwbGF5ZXIvVUkgZWxlbWVudC5cbiAgICovXG4gIHdpZHRoOiBudW1iZXI7XG4gIC8qKlxuICAgKiBUaGUgd2lkdGggb2YgdGhlIGRvY3VtZW50IHdoZXJlIHRoZSBwbGF5ZXIvVUkgaXMgZW1iZWRkZWQgaW4uXG4gICAqL1xuICBkb2N1bWVudFdpZHRoOiBudW1iZXI7XG59XG5cbi8qKlxuICogUmVzb2x2ZXMgdGhlIGNvbmRpdGlvbnMgb2YgaXRzIGFzc29jaWF0ZWQgVUkgaW4gYSB7QGxpbmsgVUlWYXJpYW50fSB1cG9uIGEge0BsaW5rIFVJQ29uZGl0aW9uQ29udGV4dH0gYW5kIGRlY2lkZXNcbiAqIGlmIHRoZSBVSSBzaG91bGQgYmUgZGlzcGxheWVkLiBJZiBpdCByZXR1cm5zIHRydWUsIHRoZSBVSSBpcyBhIGNhbmRpZGF0ZSBmb3IgZGlzcGxheTsgaWYgaXQgcmV0dXJucyBmYWxzZSwgaXQgd2lsbFxuICogbm90IGJlIGRpc3BsYXllZCBpbiB0aGUgZ2l2ZW4gY29udGV4dC5cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBVSUNvbmRpdGlvblJlc29sdmVyIHtcbiAgKGNvbnRleHQ6IFVJQ29uZGl0aW9uQ29udGV4dCk6IGJvb2xlYW47XG59XG5cbi8qKlxuICogQXNzb2NpYXRlcyBhIFVJIGluc3RhbmNlIHdpdGggYW4gb3B0aW9uYWwge0BsaW5rIFVJQ29uZGl0aW9uUmVzb2x2ZXJ9IHRoYXQgZGV0ZXJtaW5lcyBpZiB0aGUgVUkgc2hvdWxkIGJlIGRpc3BsYXllZC5cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBVSVZhcmlhbnQge1xuICB1aTogVUlDb250YWluZXI7XG4gIGNvbmRpdGlvbj86IFVJQ29uZGl0aW9uUmVzb2x2ZXI7XG4gIHNwYXRpYWxOYXZpZ2F0aW9uPzogU3BhdGlhbE5hdmlnYXRpb247XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQWN0aXZlVWlDaGFuZ2VkQXJncyBleHRlbmRzIE5vQXJncyB7XG4gIC8qKlxuICAgKiBUaGUgcHJldmlvdXNseSBhY3RpdmUge0BsaW5rIFVJSW5zdGFuY2VNYW5hZ2VyfSBwcmlvciB0byB0aGUge0BsaW5rIFVJTWFuYWdlcn0gc3dpdGNoaW5nIHRvIGEgZGlmZmVyZW50IFVJIHZhcmlhbnQuXG4gICAqL1xuICBwcmV2aW91c1VpOiBVSUluc3RhbmNlTWFuYWdlcjtcbiAgLyoqXG4gICAqIFRoZSBjdXJyZW50bHkgYWN0aXZlIHtAbGluayBVSUluc3RhbmNlTWFuYWdlcn0uXG4gICAqL1xuICBjdXJyZW50VWk6IFVJSW5zdGFuY2VNYW5hZ2VyO1xufVxuXG5leHBvcnQgY2xhc3MgVUlNYW5hZ2VyIHtcblxuICBwcml2YXRlIHBsYXllcjogUGxheWVyQVBJO1xuICBwcml2YXRlIHVpQ29udGFpbmVyRWxlbWVudDogRE9NO1xuICBwcml2YXRlIHVpVmFyaWFudHM6IFVJVmFyaWFudFtdO1xuICBwcml2YXRlIHVpSW5zdGFuY2VNYW5hZ2VyczogSW50ZXJuYWxVSUluc3RhbmNlTWFuYWdlcltdO1xuICBwcml2YXRlIGN1cnJlbnRVaTogSW50ZXJuYWxVSUluc3RhbmNlTWFuYWdlcjtcbiAgcHJpdmF0ZSBjb25maWc6IEludGVybmFsVUlDb25maWc7IC8vIENvbmp1bmN0aW9uIG9mIHByb3ZpZGVkIHVpQ29uZmlnIGFuZCBzb3VyY2VDb25maWcgZnJvbSB0aGUgcGxheWVyXG4gIHByaXZhdGUgbWFuYWdlclBsYXllcldyYXBwZXI6IFBsYXllcldyYXBwZXI7XG4gIHByaXZhdGUgZm9jdXNWaXNpYmlsaXR5VHJhY2tlcjogRm9jdXNWaXNpYmlsaXR5VHJhY2tlcjtcbiAgcHJpdmF0ZSBzdWJ0aXRsZVNldHRpbmdzTWFuYWdlcjogU3VidGl0bGVTZXR0aW5nc01hbmFnZXI7XG5cbiAgcHJpdmF0ZSBldmVudHMgPSB7XG4gICAgb25VaVZhcmlhbnRSZXNvbHZlOiBuZXcgRXZlbnREaXNwYXRjaGVyPFVJTWFuYWdlciwgVUlDb25kaXRpb25Db250ZXh0PigpLFxuICAgIG9uQWN0aXZlVWlDaGFuZ2VkOiBuZXcgRXZlbnREaXNwYXRjaGVyPFVJTWFuYWdlciwgQWN0aXZlVWlDaGFuZ2VkQXJncz4oKSxcbiAgfTtcblxuICAvKipcbiAgICogQ3JlYXRlcyBhIFVJIG1hbmFnZXIgd2l0aCBhIHNpbmdsZSBVSSB2YXJpYW50IHRoYXQgd2lsbCBiZSBwZXJtYW5lbnRseSBzaG93bi5cbiAgICogQHBhcmFtIHBsYXllciB0aGUgYXNzb2NpYXRlZCBwbGF5ZXIgb2YgdGhpcyBVSVxuICAgKiBAcGFyYW0gdWkgdGhlIFVJIHRvIGFkZCB0byB0aGUgcGxheWVyXG4gICAqIEBwYXJhbSB1aWNvbmZpZyBvcHRpb25hbCBVSSBjb25maWd1cmF0aW9uXG4gICAqL1xuICBjb25zdHJ1Y3RvcihwbGF5ZXI6IFBsYXllckFQSSwgdWk6IFVJQ29udGFpbmVyLCB1aWNvbmZpZz86IFVJQ29uZmlnKTtcbiAgLyoqXG4gICAqIENyZWF0ZXMgYSBVSSBtYW5hZ2VyIHdpdGggYSBsaXN0IG9mIFVJIHZhcmlhbnRzIHRoYXQgd2lsbCBiZSBkeW5hbWljYWxseSBzZWxlY3RlZCBhbmQgc3dpdGNoZWQgYWNjb3JkaW5nIHRvXG4gICAqIHRoZSBjb250ZXh0IG9mIHRoZSBVSS5cbiAgICpcbiAgICogRXZlcnkgdGltZSB0aGUgVUkgY29udGV4dCBjaGFuZ2VzLCB0aGUgY29uZGl0aW9ucyBvZiB0aGUgVUkgdmFyaWFudHMgd2lsbCBiZSBzZXF1ZW50aWFsbHkgcmVzb2x2ZWQgYW5kIHRoZSBmaXJzdFxuICAgKiBVSSwgd2hvc2UgY29uZGl0aW9uIGV2YWx1YXRlcyB0byB0cnVlLCB3aWxsIGJlIHNlbGVjdGVkIGFuZCBkaXNwbGF5ZWQuIFRoZSBsYXN0IHZhcmlhbnQgaW4gdGhlIGxpc3QgbWlnaHQgb21pdCB0aGVcbiAgICogY29uZGl0aW9uIHJlc29sdmVyIGFuZCB3aWxsIGJlIHNlbGVjdGVkIGFzIGRlZmF1bHQvZmFsbGJhY2sgVUkgd2hlbiBhbGwgb3RoZXIgY29uZGl0aW9ucyBmYWlsLiBJZiB0aGVyZSBpcyBub1xuICAgKiBmYWxsYmFjayBVSSBhbmQgYWxsIGNvbmRpdGlvbnMgZmFpbCwgbm8gVUkgd2lsbCBiZSBkaXNwbGF5ZWQuXG4gICAqXG4gICAqIEBwYXJhbSBwbGF5ZXIgdGhlIGFzc29jaWF0ZWQgcGxheWVyIG9mIHRoaXMgVUlcbiAgICogQHBhcmFtIHVpVmFyaWFudHMgYSBsaXN0IG9mIFVJIHZhcmlhbnRzIHRoYXQgd2lsbCBiZSBkeW5hbWljYWxseSBzd2l0Y2hlZFxuICAgKiBAcGFyYW0gdWljb25maWcgb3B0aW9uYWwgVUkgY29uZmlndXJhdGlvblxuICAgKi9cbiAgY29uc3RydWN0b3IocGxheWVyOiBQbGF5ZXJBUEksIHVpVmFyaWFudHM6IFVJVmFyaWFudFtdLCB1aWNvbmZpZz86IFVJQ29uZmlnKTtcbiAgY29uc3RydWN0b3IocGxheWVyOiBQbGF5ZXJBUEksIHBsYXllclVpT3JVaVZhcmlhbnRzOiBVSUNvbnRhaW5lciB8IFVJVmFyaWFudFtdLCB1aWNvbmZpZzogVUlDb25maWcgPSB7fSkge1xuICAgIGlmIChwbGF5ZXJVaU9yVWlWYXJpYW50cyBpbnN0YW5jZW9mIFVJQ29udGFpbmVyKSB7XG4gICAgICAvLyBTaW5nbGUtVUkgY29uc3RydWN0b3IgaGFzIGJlZW4gY2FsbGVkLCB0cmFuc2Zvcm0gYXJndW1lbnRzIHRvIFVJVmFyaWFudFtdIHNpZ25hdHVyZVxuICAgICAgbGV0IHBsYXllclVpID0gPFVJQ29udGFpbmVyPnBsYXllclVpT3JVaVZhcmlhbnRzO1xuICAgICAgbGV0IHVpVmFyaWFudHMgPSBbXTtcblxuICAgICAgLy8gQWRkIHRoZSBkZWZhdWx0IHBsYXllciBVSVxuICAgICAgdWlWYXJpYW50cy5wdXNoKHsgdWk6IHBsYXllclVpIH0pO1xuXG4gICAgICB0aGlzLnVpVmFyaWFudHMgPSB1aVZhcmlhbnRzO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIC8vIERlZmF1bHQgY29uc3RydWN0b3IgKFVJVmFyaWFudFtdKSBoYXMgYmVlbiBjYWxsZWRcbiAgICAgIHRoaXMudWlWYXJpYW50cyA9IDxVSVZhcmlhbnRbXT5wbGF5ZXJVaU9yVWlWYXJpYW50cztcbiAgICB9XG5cbiAgICB0aGlzLnN1YnRpdGxlU2V0dGluZ3NNYW5hZ2VyID0gbmV3IFN1YnRpdGxlU2V0dGluZ3NNYW5hZ2VyKCk7XG4gICAgdGhpcy5wbGF5ZXIgPSBwbGF5ZXI7XG4gICAgdGhpcy5tYW5hZ2VyUGxheWVyV3JhcHBlciA9IG5ldyBQbGF5ZXJXcmFwcGVyKHBsYXllcik7XG5cbiAgICAvLyBlbnN1cmUgdGhhdCBhdCBsZWFzdCB0aGUgbWV0YWRhdGEgb2JqZWN0IGRvZXMgZXhpc3QgaW4gdGhlIHVpY29uZmlnXG4gICAgdWljb25maWcubWV0YWRhdGEgPSB1aWNvbmZpZy5tZXRhZGF0YSA/IHVpY29uZmlnLm1ldGFkYXRhIDoge307XG5cbiAgICB0aGlzLmNvbmZpZyA9IHtcbiAgICAgIHBsYXliYWNrU3BlZWRTZWxlY3Rpb25FbmFibGVkOiB0cnVlLCAvLyBTd2l0Y2ggb24gc3BlZWQgc2VsZWN0b3IgYnkgZGVmYXVsdFxuICAgICAgYXV0b1VpVmFyaWFudFJlc29sdmU6IHRydWUsIC8vIFN3aXRjaCBvbiBhdXRvIFVJIHJlc29sdmluZyBieSBkZWZhdWx0XG4gICAgICBkaXNhYmxlQXV0b0hpZGVXaGVuSG92ZXJlZDogZmFsc2UsIC8vIERpc2FibGUgYXV0byBoaWRlIHdoZW4gVUkgaXMgaG92ZXJlZFxuICAgICAgZW5hYmxlU2Vla1ByZXZpZXc6IHRydWUsXG4gICAgICAuLi51aWNvbmZpZyxcbiAgICAgIGV2ZW50czoge1xuICAgICAgICBvblVwZGF0ZWQ6IG5ldyBFdmVudERpc3BhdGNoZXI8VUlNYW5hZ2VyLCB2b2lkPigpLFxuICAgICAgfSxcbiAgICAgIHZvbHVtZUNvbnRyb2xsZXI6IG5ldyBWb2x1bWVDb250cm9sbGVyKHRoaXMubWFuYWdlclBsYXllcldyYXBwZXIuZ2V0UGxheWVyKCkpLFxuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBHYXRoZXJzIGNvbmZpZ3VyYXRpb24gZGF0YSBmcm9tIHRoZSBVSSBjb25maWcgYW5kIHBsYXllciBzb3VyY2UgY29uZmlnIGFuZCBjcmVhdGVzIGEgbWVyZ2VkIFVJIGNvbmZpZ1xuICAgICAqIHRoYXQgaXMgdXNlZCB0aHJvdWdob3V0IHRoZSBVSSBpbnN0YW5jZS5cbiAgICAgKi9cbiAgICBjb25zdCB1cGRhdGVDb25maWcgPSAoKSA9PiB7XG4gICAgICBjb25zdCBwbGF5ZXJTb3VyY2VDb25maWcgPSBwbGF5ZXIuZ2V0U291cmNlKCkgfHwge307XG4gICAgICB0aGlzLmNvbmZpZy5tZXRhZGF0YSA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodWljb25maWcubWV0YWRhdGEgfHwge30pKTtcblxuICAgICAgLy8gRXh0cmFjdCB0aGUgVUktcmVsYXRlZCBjb25maWcgcHJvcGVydGllcyBmcm9tIHRoZSBzb3VyY2UgY29uZmlnXG4gICAgICBjb25zdCBwbGF5ZXJTb3VyY2VVaUNvbmZpZzogVUlDb25maWcgPSB7XG4gICAgICAgIG1ldGFkYXRhOiB7XG4gICAgICAgICAgLy8gVE9ETyBtb3ZlIG1ldGFkYXRhIGludG8gc291cmNlLm1ldGFkYXRhIG5hbWVzcGFjZSBpbiBwbGF5ZXIgdjhcbiAgICAgICAgICB0aXRsZTogcGxheWVyU291cmNlQ29uZmlnLnRpdGxlLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiBwbGF5ZXJTb3VyY2VDb25maWcuZGVzY3JpcHRpb24sXG4gICAgICAgICAgbWFya2VyczogKHBsYXllclNvdXJjZUNvbmZpZyBhcyBhbnkpLm1hcmtlcnMsXG4gICAgICAgIH0sXG4gICAgICAgIHJlY29tbWVuZGF0aW9uczogKHBsYXllclNvdXJjZUNvbmZpZyBhcyBhbnkpLnJlY29tbWVuZGF0aW9ucyxcbiAgICAgIH07XG5cbiAgICAgIC8vIFBsYXllciBzb3VyY2UgY29uZmlnIHRha2VzIHByZWNlZGVuY2Ugb3ZlciB0aGUgVUkgY29uZmlnLCBiZWNhdXNlIHRoZSBjb25maWcgaW4gdGhlIHNvdXJjZSBpcyBhdHRhY2hlZFxuICAgICAgLy8gdG8gYSBzb3VyY2Ugd2hpY2ggY2hhbmdlcyB3aXRoIGV2ZXJ5IHBsYXllci5sb2FkLCB3aGVyZWFzIHRoZSBVSSBjb25maWcgc3RheXMgdGhlIHNhbWUgZm9yIHRoZSB3aG9sZVxuICAgICAgLy8gbGlmZXRpbWUgb2YgdGhlIHBsYXllciBpbnN0YW5jZS5cbiAgICAgIHRoaXMuY29uZmlnLm1ldGFkYXRhLnRpdGxlID0gcGxheWVyU291cmNlVWlDb25maWcubWV0YWRhdGEudGl0bGUgfHwgdWljb25maWcubWV0YWRhdGEudGl0bGU7XG4gICAgICB0aGlzLmNvbmZpZy5tZXRhZGF0YS5kZXNjcmlwdGlvbiA9IHBsYXllclNvdXJjZVVpQ29uZmlnLm1ldGFkYXRhLmRlc2NyaXB0aW9uIHx8IHVpY29uZmlnLm1ldGFkYXRhLmRlc2NyaXB0aW9uO1xuICAgICAgdGhpcy5jb25maWcubWV0YWRhdGEubWFya2VycyA9IHBsYXllclNvdXJjZVVpQ29uZmlnLm1ldGFkYXRhLm1hcmtlcnMgfHwgdWljb25maWcubWV0YWRhdGEubWFya2VycyB8fCBbXTtcbiAgICAgIHRoaXMuY29uZmlnLnJlY29tbWVuZGF0aW9ucyA9IHBsYXllclNvdXJjZVVpQ29uZmlnLnJlY29tbWVuZGF0aW9ucyB8fCB1aWNvbmZpZy5yZWNvbW1lbmRhdGlvbnMgfHwgW107XG5cbiAgICAgIFN0b3JhZ2VVdGlscy5zZXRTdG9yYWdlQXBpRGlzYWJsZWQodWljb25maWcpO1xuICAgIH07XG5cbiAgICB1cGRhdGVDb25maWcoKTtcbiAgICB0aGlzLnN1YnRpdGxlU2V0dGluZ3NNYW5hZ2VyLmluaXRpYWxpemUoKTtcblxuICAgIC8vIFVwZGF0ZSB0aGUgc291cmNlIGNvbmZpZ3VyYXRpb24gd2hlbiBhIG5ldyBzb3VyY2UgaXMgbG9hZGVkIGFuZCBkaXNwYXRjaCBvblVwZGF0ZWRcbiAgICBjb25zdCB1cGRhdGVTb3VyY2UgPSAoKSA9PiB7XG4gICAgICB1cGRhdGVDb25maWcoKTtcbiAgICAgIHRoaXMuY29uZmlnLmV2ZW50cy5vblVwZGF0ZWQuZGlzcGF0Y2godGhpcyk7XG4gICAgfTtcblxuICAgIGNvbnN0IHdyYXBwZWRQbGF5ZXIgPSB0aGlzLm1hbmFnZXJQbGF5ZXJXcmFwcGVyLmdldFBsYXllcigpO1xuXG4gICAgd3JhcHBlZFBsYXllci5vbih0aGlzLnBsYXllci5leHBvcnRzLlBsYXllckV2ZW50LlNvdXJjZUxvYWRlZCwgdXBkYXRlU291cmNlKTtcblxuICAgIC8vIFRoZSBQbGF5bGlzdFRyYW5zaXRpb24gZXZlbnQgaXMgb25seSBhdmFpbGFibGUgb24gTW9iaWxlIHYzIGZvciBub3cuXG4gICAgLy8gVGhpcyBldmVudCBpcyBmaXJlZCB3aGVuIGEgbmV3IHNvdXJjZSBiZWNvbWVzIGFjdGl2ZSBpbiB0aGUgcGxheWVyLlxuICAgIGlmIChpc01vYmlsZVYzUGxheWVyQVBJKHdyYXBwZWRQbGF5ZXIpKSB7XG4gICAgICB3cmFwcGVkUGxheWVyLm9uKE1vYmlsZVYzUGxheWVyRXZlbnQuUGxheWxpc3RUcmFuc2l0aW9uLCB1cGRhdGVTb3VyY2UpO1xuICAgIH1cblxuICAgIGlmICh1aWNvbmZpZy5jb250YWluZXIpIHtcbiAgICAgIC8vIFVuZm9ydHVuYXRlbHkgXCJ1aUNvbnRhaW5lckVsZW1lbnQgPSBuZXcgRE9NKGNvbmZpZy5jb250YWluZXIpXCIgd2lsbCBub3QgYWNjZXB0IHRoZSBjb250YWluZXIgd2l0aFxuICAgICAgLy8gc3RyaW5nfEhUTUxFbGVtZW50IHR5cGUgZGlyZWN0bHksIGFsdGhvdWdoIGl0IGFjY2VwdHMgYm90aCB0eXBlcywgc28gd2UgbmVlZCB0byBzcGl0IHRoZXNlIHR3byBjYXNlcyB1cCBoZXJlLlxuICAgICAgLy8gVE9ETyBjaGVjayBpbiB1cGNvbWluZyBUUyB2ZXJzaW9ucyBpZiB0aGUgY29udGFpbmVyIGNhbiBiZSBwYXNzZWQgaW4gZGlyZWN0bHksIG9yIGZpeCB0aGUgY29uc3RydWN0b3JcbiAgICAgIHRoaXMudWlDb250YWluZXJFbGVtZW50ID0gdWljb25maWcuY29udGFpbmVyIGluc3RhbmNlb2YgSFRNTEVsZW1lbnQgP1xuICAgICAgICBuZXcgRE9NKHVpY29uZmlnLmNvbnRhaW5lcikgOiBuZXcgRE9NKHVpY29uZmlnLmNvbnRhaW5lcik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMudWlDb250YWluZXJFbGVtZW50ID0gbmV3IERPTShwbGF5ZXIuZ2V0Q29udGFpbmVyKCkpO1xuICAgIH1cblxuICAgIC8vIENyZWF0ZSBVSSBpbnN0YW5jZSBtYW5hZ2VycyBmb3IgdGhlIFVJIHZhcmlhbnRzXG4gICAgLy8gVGhlIGluc3RhbmNlIG1hbmFnZXJzIG1hcCB0byB0aGUgY29ycmVzcG9uZGluZyBVSSB2YXJpYW50cyBieSB0aGVpciBhcnJheSBpbmRleFxuICAgIHRoaXMudWlJbnN0YW5jZU1hbmFnZXJzID0gW107XG4gICAgbGV0IHVpVmFyaWFudHNXaXRob3V0Q29uZGl0aW9uID0gW107XG4gICAgZm9yIChsZXQgdWlWYXJpYW50IG9mIHRoaXMudWlWYXJpYW50cykge1xuICAgICAgaWYgKHVpVmFyaWFudC5jb25kaXRpb24gPT0gbnVsbCkge1xuICAgICAgICAvLyBDb2xsZWN0IHZhcmlhbnRzIHdpdGhvdXQgY29uZGl0aW9ucyBmb3IgZXJyb3IgY2hlY2tpbmdcbiAgICAgICAgdWlWYXJpYW50c1dpdGhvdXRDb25kaXRpb24ucHVzaCh1aVZhcmlhbnQpO1xuICAgICAgfVxuICAgICAgLy8gQ3JlYXRlIHRoZSBpbnN0YW5jZSBtYW5hZ2VyIGZvciBhIFVJIHZhcmlhbnRcbiAgICAgIHRoaXMudWlJbnN0YW5jZU1hbmFnZXJzLnB1c2gobmV3IEludGVybmFsVUlJbnN0YW5jZU1hbmFnZXIoXG4gICAgICAgIHBsYXllcixcbiAgICAgICAgdWlWYXJpYW50LnVpLFxuICAgICAgICB0aGlzLmNvbmZpZyxcbiAgICAgICAgdGhpcy5zdWJ0aXRsZVNldHRpbmdzTWFuYWdlcixcbiAgICAgICAgdWlWYXJpYW50LnNwYXRpYWxOYXZpZ2F0aW9uLFxuICAgICAgKSk7XG4gICAgfVxuICAgIC8vIE1ha2Ugc3VyZSB0aGF0IHRoZXJlIGlzIG9ubHkgb25lIFVJIHZhcmlhbnQgd2l0aG91dCBhIGNvbmRpdGlvblxuICAgIC8vIEl0IGRvZXMgbm90IG1ha2Ugc2Vuc2UgdG8gaGF2ZSBtdWx0aXBsZSB2YXJpYW50cyB3aXRob3V0IGNvbmRpdGlvbiwgYmVjYXVzZSBvbmx5IHRoZSBmaXJzdCBvbmUgaW4gdGhlIGxpc3RcbiAgICAvLyAodGhlIG9uZSB3aXRoIHRoZSBsb3dlc3QgaW5kZXgpIHdpbGwgZXZlciBiZSBzZWxlY3RlZC5cbiAgICBpZiAodWlWYXJpYW50c1dpdGhvdXRDb25kaXRpb24ubGVuZ3RoID4gMSkge1xuICAgICAgdGhyb3cgRXJyb3IoJ1RvbyBtYW55IFVJcyB3aXRob3V0IGEgY29uZGl0aW9uOiBZb3UgY2Fubm90IGhhdmUgbW9yZSB0aGFuIG9uZSBkZWZhdWx0IFVJJyk7XG4gICAgfVxuICAgIC8vIE1ha2Ugc3VyZSB0aGF0IHRoZSBkZWZhdWx0IFVJIHZhcmlhbnQsIGlmIGRlZmluZWQsIGlzIGF0IHRoZSBlbmQgb2YgdGhlIGxpc3QgKGxhc3QgaW5kZXgpXG4gICAgLy8gSWYgaXQgY29tZXMgZWFybGllciwgdGhlIHZhcmlhbnRzIHdpdGggY29uZGl0aW9ucyB0aGF0IGNvbWUgYWZ0ZXJ3YXJkcyB3aWxsIG5ldmVyIGJlIHNlbGVjdGVkIGJlY2F1c2UgdGhlXG4gICAgLy8gZGVmYXVsdCB2YXJpYW50IHdpdGhvdXQgYSBjb25kaXRpb24gYWx3YXlzIGV2YWx1YXRlcyB0byAndHJ1ZSdcbiAgICBpZiAodWlWYXJpYW50c1dpdGhvdXRDb25kaXRpb24ubGVuZ3RoID4gMFxuICAgICAgJiYgdWlWYXJpYW50c1dpdGhvdXRDb25kaXRpb25bMF0gIT09IHRoaXMudWlWYXJpYW50c1t0aGlzLnVpVmFyaWFudHMubGVuZ3RoIC0gMV0pIHtcbiAgICAgIHRocm93IEVycm9yKCdJbnZhbGlkIFVJIHZhcmlhbnQgb3JkZXI6IHRoZSBkZWZhdWx0IFVJICh3aXRob3V0IGNvbmRpdGlvbikgbXVzdCBiZSBhdCB0aGUgZW5kIG9mIHRoZSBsaXN0Jyk7XG4gICAgfVxuXG4gICAgbGV0IGFkU3RhcnRlZEV2ZW50OiBBZEV2ZW50ID0gbnVsbDsgLy8ga2VlcCB0aGUgZXZlbnQgc3RvcmVkIGhlcmUgZHVyaW5nIGFkIHBsYXliYWNrXG5cbiAgICAvLyBEeW5hbWljYWxseSBzZWxlY3QgYSBVSSB2YXJpYW50IHRoYXQgbWF0Y2hlcyB0aGUgY3VycmVudCBVSSBjb25kaXRpb24uXG4gICAgbGV0IHJlc29sdmVVaVZhcmlhbnQgPSAoZXZlbnQ6IFBsYXllckV2ZW50QmFzZSkgPT4ge1xuICAgICAgLy8gTWFrZSBzdXJlIHRoYXQgdGhlIEFkU3RhcnRlZCBldmVudCBkYXRhIGlzIHBlcnNpc3RlZCB0aHJvdWdoIGFkIHBsYXliYWNrIGluIGNhc2Ugb3RoZXIgZXZlbnRzIGhhcHBlblxuICAgICAgLy8gaW4gdGhlIG1lYW50aW1lLCBlLmcuIHBsYXllciByZXNpemUuIFdlIG5lZWQgdG8gc3RvcmUgdGhpcyBkYXRhIGJlY2F1c2UgdGhlcmUgaXMgbm8gb3RoZXIgd2F5IHRvIGZpbmQgb3V0XG4gICAgICAvLyBhZCBkZXRhaWxzIHdoaWxlIGFuIGFkIGlzIHBsYXlpbmcgKGluIHY4LjAgYXQgbGVhc3Q7IGZyb20gdjguMSB0aGVyZSB3aWxsIGJlIGFkcy5nZXRBY3RpdmVBZCgpKS5cbiAgICAgIC8vIEV4aXN0aW5nIGV2ZW50IGRhdGEgc2lnbmFscyB0aGF0IGFuIGFkIGlzIGN1cnJlbnRseSBhY3RpdmUgKGluc3RlYWQgb2YgYWRzLmlzTGluZWFyQWRBY3RpdmUoKSkuXG4gICAgICBpZiAoZXZlbnQgIT0gbnVsbCkge1xuICAgICAgICBzd2l0Y2ggKGV2ZW50LnR5cGUpIHtcbiAgICAgICAgICAvLyBUaGUgYWRzIFVJIGlzIHNob3duIHVwb24gdGhlIGZpcnN0IEFkU3RhcnRlZCBldmVudC4gU3Vic2VxdWVudCBBZFN0YXJ0ZWQgZXZlbnRzIHdpdGhpbiBhbiBhZCBicmVha1xuICAgICAgICAgIC8vIHdpbGwgbm90IGNoYW5nZSB0aGUgY29uZGl0aW9uIGNvbnRleHQgYW5kIHRodXMgbm90IGxlYWQgdG8gdW5kZXNpcmVkIFVJIHZhcmlhbnQgcmVzb2x2aW5nLlxuICAgICAgICAgIC8vIFRoZSBhZHMgVUkgaXMgc2hvd24gdXBvbiBBZFN0YXJ0ZWQgaW5zdGVhZCBvZiBBZEJyZWFrU3RhcnRlZCBiZWNhdXNlIHRoZXJlIGNhbiBiZSBhIGxvYWRpbmcgZGVsYXlcbiAgICAgICAgICAvLyBiZXR3ZWVuIHRoZXNlIHR3byBldmVudHMgaW4gdGhlIHBsYXllciwgYW5kIHRoZSBBZEJyZWFrU3RhcnRlZCBldmVudCBkb2VzIG5vdCBjYXJyeSBhbnkgbWV0YWRhdGEgdG9cbiAgICAgICAgICAvLyBpbml0aWFsaXplIHRoZSBhZHMgVUksIHNvIGl0IHdvdWxkIGJlIHJlbmRlcmVkIGluIGFuIHVuaW5pdGlhbGl6ZWQgc3RhdGUgZm9yIGEgY2VydGFpbiBhbW91bnQgb2YgdGltZS5cbiAgICAgICAgICAvLyBUT0RPIHNob3cgYWRzIFVJIHVwb24gQWRCcmVha1N0YXJ0ZWQgYW5kIGRpc3BsYXkgbG9hZGluZyBvdmVybGF5IGJldHdlZW4gQWRCcmVha1N0YXJ0ZWQgYW5kIGZpcnN0IEFkU3RhcnRlZFxuICAgICAgICAgIC8vIFRPRE8gZGlzcGxheSBsb2FkaW5nIG92ZXJsYXkgYmV0d2VlbiBBZEZpbmlzaGVkIGFuZCBuZXh0IEFkU3RhcnRlZFxuICAgICAgICAgIGNhc2UgcGxheWVyLmV4cG9ydHMuUGxheWVyRXZlbnQuQWRTdGFydGVkOlxuICAgICAgICAgICAgYWRTdGFydGVkRXZlbnQgPSBldmVudCBhcyBBZEV2ZW50O1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgLy8gVGhlIGFkcyBVSSBpcyBoaWRkZW4gb25seSB3aGVuIHRoZSBhZCBicmVhayBpcyBmaW5pc2hlZCwgaS5lLiBub3Qgb24gQWRGaW5pc2hlZCBldmVudHMuIFRoaXMgd2F5IHdlIGtlZXBcbiAgICAgICAgICAvLyB0aGUgYWRzIFVJIHZhcmlhbnQgYWN0aXZlIHRocm91Z2hvdXQgYW4gYWQgYnJlYWssIGFzIHJlYWN0aW5nIHRvIEFkRmluaXNoZWQgd291bGQgbGVhZCB0byB1bmRlc2lyZWQgVUlcbiAgICAgICAgICAvLyB2YXJpYW50IHN3aXRjaGluZyBiZXR3ZWVuIHR3byBhZHMgaW4gYW4gYWQgYnJlYWssIGUuZy4gYWRzIFVJIC0+IEFkRmluaXNoZWQgLT4gY29udGVudCBVSSAtPlxuICAgICAgICAgIC8vIEFkU3RhcnRlZCAtPiBhZHMgVUkuXG4gICAgICAgICAgY2FzZSBwbGF5ZXIuZXhwb3J0cy5QbGF5ZXJFdmVudC5BZEJyZWFrRmluaXNoZWQ6XG4gICAgICAgICAgICBhZFN0YXJ0ZWRFdmVudCA9IG51bGw7XG4gICAgICAgICAgICAvLyBXaGVuIHN3aXRjaGluZyB0byBhIHZhcmlhbnQgZm9yIHRoZSBmaXJzdCB0aW1lLCBhIGNvbmZpZy5ldmVudHMub25VcGRhdGVkIGV2ZW50IGlzIGZpcmVkIHRvIHRyaWdnZXIgYSBVSVxuICAgICAgICAgICAgLy8gdXBkYXRlIG9mIHRoZSBuZXcgdmFyaWFudCwgYmVjYXVzZSBtb3N0IGNvbXBvbmVudHMgc3Vic2NyaWJlIHRvIHRoaXMgZXZlbnQgdG8gdXBkYXRlIHRoZW1zZWx2ZXMuIFdoZW5cbiAgICAgICAgICAgIC8vIHN3aXRjaGluZyB0byB0aGUgYWRzIFVJIG9uIHRoZSBmaXJzdCBBZFN0YXJ0ZWQsIGFsbCBVSSB2YXJpYW50cyB1cGRhdGUgdGhlbXNlbHZlcyB3aXRoIHRoZSBhZCBkYXRhLCBzb1xuICAgICAgICAgICAgLy8gd2hlbiBzd2l0Y2hpbmcgYmFjayB0byB0aGUgXCJub3JtYWxcIiBVSSBpdCB3aWxsIGNhcnJ5IHByb3BlcnRpZXMgb2YgdGhlIGFkIGluc3RlYWQgb2YgdGhlIG1haW4gY29udGVudC5cbiAgICAgICAgICAgIC8vIFdlIHRodXMgZmlyZSB0aGlzIGV2ZW50IGhlcmUgdG8gZm9yY2UgYW4gVUkgdXBkYXRlIHdpdGggdGhlIHByb3BlcnRpZXMgb2YgdGhlIG1haW4gY29udGVudC4gVGhpcyBpc1xuICAgICAgICAgICAgLy8gYmFzaWNhbGx5IGEgaGFjayBiZWNhdXNlIHRoZSBjb25maWcuZXZlbnRzLm9uVXBkYXRlZCBldmVudCBpcyBhYnVzZWQgaW4gbWFueSBwbGFjZXMgYW5kIG5vdCBqdXN0IHVzZWRcbiAgICAgICAgICAgIC8vIGZvciBjb25maWcgdXBkYXRlcyAoZS5nLiBhZGRpbmcgYSBtYXJrZXIgdG8gdGhlIHNlZWtiYXIpLlxuICAgICAgICAgICAgLy8gVE9ETyBpbnRyb2R1Y2UgYW4gZXZlbnQgdGhhdCBpcyBmaXJlZCB3aGVuIHRoZSBwbGF5YmFjayBjb250ZW50IGlzIHVwZGF0ZWQsIGEgc3dpdGNoIHRvL2Zyb20gYWRzXG4gICAgICAgICAgICB0aGlzLmNvbmZpZy5ldmVudHMub25VcGRhdGVkLmRpc3BhdGNoKHRoaXMpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgLy8gV2hlbiBhIG5ldyBzb3VyY2UgaXMgbG9hZGVkIGR1cmluZyBhZCBwbGF5YmFjaywgdGhlcmUgd2lsbCBiZSBubyBBZChCcmVhaylGaW5pc2hlZCBldmVudFxuICAgICAgICAgIGNhc2UgcGxheWVyLmV4cG9ydHMuUGxheWVyRXZlbnQuU291cmNlTG9hZGVkOlxuICAgICAgICAgIGNhc2UgcGxheWVyLmV4cG9ydHMuUGxheWVyRXZlbnQuU291cmNlVW5sb2FkZWQ6XG4gICAgICAgICAgICBhZFN0YXJ0ZWRFdmVudCA9IG51bGw7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBEZXRlY3QgaWYgYW4gYWQgaGFzIHN0YXJ0ZWRcbiAgICAgIGxldCBpc0FkID0gYWRTdGFydGVkRXZlbnQgIT0gbnVsbDtcbiAgICAgIGxldCBhZFJlcXVpcmVzVWkgPSBmYWxzZTtcbiAgICAgIGlmIChpc0FkKSB7XG4gICAgICAgIGxldCBhZCA9IGFkU3RhcnRlZEV2ZW50LmFkO1xuICAgICAgICAvLyBmb3Igbm93IG9ubHkgbGluZWFyIGFkcyBjYW4gcmVxdWVzdCBhIFVJXG4gICAgICAgIGlmIChhZC5pc0xpbmVhcikge1xuICAgICAgICAgIGxldCBsaW5lYXJBZCA9IGFkIGFzIExpbmVhckFkO1xuICAgICAgICAgIGFkUmVxdWlyZXNVaSA9IGxpbmVhckFkLnVpQ29uZmlnICYmIGxpbmVhckFkLnVpQ29uZmlnLnJlcXVlc3RzVWkgfHwgZmFsc2U7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKGFkUmVxdWlyZXNVaSkge1xuICAgICAgICAvLyB3ZSBkaXNwYXRjaCBvblVwZGF0ZWQgZXZlbnQgYmVjYXVzZSBpZiB0aGVyZSBhcmUgbXVsdGlwbGUgYWRCcmVha3MgZm9yIHNhbWUgcG9zaXRpb25cbiAgICAgICAgLy8gYFBsYXlgIGFuZCBgUGxheWluZ2AgZXZlbnRzIHdpbGwgbm90IGJlIGRpc3BhdGNoZWQgd2hpY2ggd2lsbCBjYXVzZSBgUGxheWJhY2tCdXR0b25gIHN0YXRlXG4gICAgICAgIC8vIHRvIGJlIG91dCBvZiBzeW5jXG4gICAgICAgIHRoaXMuY29uZmlnLmV2ZW50cy5vblVwZGF0ZWQuZGlzcGF0Y2godGhpcyk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMucmVzb2x2ZVVpVmFyaWFudCh7XG4gICAgICAgIGlzQWQ6IGlzQWQsXG4gICAgICAgIGFkUmVxdWlyZXNVaTogYWRSZXF1aXJlc1VpLFxuICAgICAgfSwgKGNvbnRleHQpID0+IHtcbiAgICAgICAgLy8gSWYgdGhpcyBpcyBhbiBhZCBVSSwgd2UgbmVlZCB0byByZWxheSB0aGUgc2F2ZWQgT05fQURfU1RBUlRFRCBldmVudCBkYXRhIHNvIGFkIGNvbXBvbmVudHMgY2FuIGNvbmZpZ3VyZVxuICAgICAgICAvLyB0aGVtc2VsdmVzIGZvciB0aGUgY3VycmVudCBhZC5cbiAgICAgICAgaWYgKGNvbnRleHQuaXNBZCkge1xuICAgICAgICAgIC8qIFJlbGF5IHRoZSBPTl9BRF9TVEFSVEVEIGV2ZW50IHRvIHRoZSBhZHMgVUlcbiAgICAgICAgICAgKlxuICAgICAgICAgICAqIEJlY2F1c2UgdGhlIGFkcyBVSSBpcyBpbml0aWFsaXplZCBpbiB0aGUgT05fQURfU1RBUlRFRCBoYW5kbGVyLCBpLmUuIHdoZW4gdGhlIE9OX0FEX1NUQVJURUQgZXZlbnQgaGFzXG4gICAgICAgICAgICogYWxyZWFkeSBiZWVuIGZpcmVkLCBjb21wb25lbnRzIGluIHRoZSBhZHMgVUkgdGhhdCBsaXN0ZW4gZm9yIHRoZSBPTl9BRF9TVEFSVEVEIGV2ZW50IG5ldmVyIHJlY2VpdmUgaXQuXG4gICAgICAgICAgICogU2luY2UgdGhpcyBjYW4gYnJlYWsgZnVuY3Rpb25hbGl0eSBvZiBjb21wb25lbnRzIHRoYXQgcmVseSBvbiB0aGlzIGV2ZW50LCB3ZSByZWxheSB0aGUgZXZlbnQgdG8gdGhlXG4gICAgICAgICAgICogYWRzIFVJIGNvbXBvbmVudHMgd2l0aCB0aGUgZm9sbG93aW5nIGNhbGwuXG4gICAgICAgICAgICovXG4gICAgICAgICAgdGhpcy5jdXJyZW50VWkuZ2V0V3JhcHBlZFBsYXllcigpLmZpcmVFdmVudEluVUkodGhpcy5wbGF5ZXIuZXhwb3J0cy5QbGF5ZXJFdmVudC5BZFN0YXJ0ZWQsIGFkU3RhcnRlZEV2ZW50KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfTtcblxuICAgIC8vIExpc3RlbiB0byB0aGUgZm9sbG93aW5nIGV2ZW50cyB0byB0cmlnZ2VyIFVJIHZhcmlhbnQgcmVzb2x1dGlvblxuICAgIGlmICh0aGlzLmNvbmZpZy5hdXRvVWlWYXJpYW50UmVzb2x2ZSkge1xuICAgICAgdGhpcy5tYW5hZ2VyUGxheWVyV3JhcHBlci5nZXRQbGF5ZXIoKS5vbih0aGlzLnBsYXllci5leHBvcnRzLlBsYXllckV2ZW50LlNvdXJjZUxvYWRlZCwgcmVzb2x2ZVVpVmFyaWFudCk7XG4gICAgICB0aGlzLm1hbmFnZXJQbGF5ZXJXcmFwcGVyLmdldFBsYXllcigpLm9uKHRoaXMucGxheWVyLmV4cG9ydHMuUGxheWVyRXZlbnQuU291cmNlVW5sb2FkZWQsIHJlc29sdmVVaVZhcmlhbnQpO1xuICAgICAgdGhpcy5tYW5hZ2VyUGxheWVyV3JhcHBlci5nZXRQbGF5ZXIoKS5vbih0aGlzLnBsYXllci5leHBvcnRzLlBsYXllckV2ZW50LlBsYXksIHJlc29sdmVVaVZhcmlhbnQpO1xuICAgICAgdGhpcy5tYW5hZ2VyUGxheWVyV3JhcHBlci5nZXRQbGF5ZXIoKS5vbih0aGlzLnBsYXllci5leHBvcnRzLlBsYXllckV2ZW50LlBhdXNlZCwgcmVzb2x2ZVVpVmFyaWFudCk7XG4gICAgICB0aGlzLm1hbmFnZXJQbGF5ZXJXcmFwcGVyLmdldFBsYXllcigpLm9uKHRoaXMucGxheWVyLmV4cG9ydHMuUGxheWVyRXZlbnQuQWRTdGFydGVkLCByZXNvbHZlVWlWYXJpYW50KTtcbiAgICAgIHRoaXMubWFuYWdlclBsYXllcldyYXBwZXIuZ2V0UGxheWVyKCkub24odGhpcy5wbGF5ZXIuZXhwb3J0cy5QbGF5ZXJFdmVudC5BZEJyZWFrRmluaXNoZWQsIHJlc29sdmVVaVZhcmlhbnQpO1xuICAgICAgdGhpcy5tYW5hZ2VyUGxheWVyV3JhcHBlci5nZXRQbGF5ZXIoKS5vbih0aGlzLnBsYXllci5leHBvcnRzLlBsYXllckV2ZW50LlBsYXllclJlc2l6ZWQsIHJlc29sdmVVaVZhcmlhbnQpO1xuICAgICAgdGhpcy5tYW5hZ2VyUGxheWVyV3JhcHBlci5nZXRQbGF5ZXIoKS5vbih0aGlzLnBsYXllci5leHBvcnRzLlBsYXllckV2ZW50LlZpZXdNb2RlQ2hhbmdlZCwgcmVzb2x2ZVVpVmFyaWFudCk7XG4gICAgfVxuXG4gICAgdGhpcy5mb2N1c1Zpc2liaWxpdHlUcmFja2VyID0gbmV3IEZvY3VzVmlzaWJpbGl0eVRyYWNrZXIoJ3t7UFJFRklYfX0nKTtcblxuICAgIC8vIEluaXRpYWxpemUgdGhlIFVJXG4gICAgcmVzb2x2ZVVpVmFyaWFudChudWxsKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBFeHBvc2VzIGkxOG4uZ2V0TG9jYWxpemVyKCkgZnVuY3Rpb25cbiAgICogQHJldHVybnMge0kxOG5BcGkuZ2V0TG9jYWxpemVyKCl9XG4gICAqL1xuICBzdGF0aWMgbG9jYWxpemU8ViBleHRlbmRzIEN1c3RvbVZvY2FidWxhcnk8UmVjb3JkPHN0cmluZywgc3RyaW5nPj4+KGtleToga2V5b2YgVikge1xuICAgIHJldHVybiBpMThuLmdldExvY2FsaXplcihrZXkpO1xuICB9XG5cbiAgLyoqXG4gICAqIFByb3ZpZGUgY29uZmlndXJhdGlvbiB0byBzdXBwb3J0IEN1c3RvbSBVSSBsYW5ndWFnZXNcbiAgICogZGVmYXVsdCBsYW5ndWFnZTogJ2VuJ1xuICAgKi9cbiAgc3RhdGljIHNldExvY2FsaXphdGlvbkNvbmZpZyhsb2NhbGl6YXRpb25Db25maWc6IExvY2FsaXphdGlvbkNvbmZpZykge1xuICAgIGkxOG4uc2V0Q29uZmlnKGxvY2FsaXphdGlvbkNvbmZpZyk7XG4gIH1cblxuICBnZXRTdWJ0aXRsZVNldHRpbmdzTWFuYWdlcigpIHtcbiAgICByZXR1cm4gdGhpcy5zdWJ0aXRsZVNldHRpbmdzTWFuYWdlcjtcbiAgfVxuXG4gIGdldENvbmZpZygpOiBVSUNvbmZpZyB7XG4gICAgcmV0dXJuIHRoaXMuY29uZmlnO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIGxpc3Qgb2YgVUkgdmFyaWFudHMgYXMgcGFzc2VkIGludG8gdGhlIGNvbnN0cnVjdG9yIG9mIHtAbGluayBVSU1hbmFnZXJ9LlxuICAgKiBAcmV0dXJucyB7VUlWYXJpYW50W119IHRoZSBsaXN0IG9mIGF2YWlsYWJsZSBVSSB2YXJpYW50c1xuICAgKi9cbiAgZ2V0VWlWYXJpYW50cygpOiBVSVZhcmlhbnRbXSB7XG4gICAgcmV0dXJuIHRoaXMudWlWYXJpYW50cztcbiAgfVxuXG4gIC8qKlxuICAgKiBTd2l0Y2hlcyB0byBhIFVJIHZhcmlhbnQgZnJvbSB0aGUgbGlzdCByZXR1cm5lZCBieSB7QGxpbmsgZ2V0VWlWYXJpYW50c30uXG4gICAqIEBwYXJhbSB7VUlWYXJpYW50fSB1aVZhcmlhbnQgdGhlIFVJIHZhcmlhbnQgdG8gc3dpdGNoIHRvXG4gICAqIEBwYXJhbSB7KCkgPT4gdm9pZH0gb25TaG93IGEgY2FsbGJhY2sgdGhhdCBpcyBleGVjdXRlZCBqdXN0IGJlZm9yZSB0aGUgbmV3IFVJIHZhcmlhbnQgaXMgc2hvd25cbiAgICovXG4gIHN3aXRjaFRvVWlWYXJpYW50KHVpVmFyaWFudDogVUlWYXJpYW50LCBvblNob3c/OiAoKSA9PiB2b2lkKTogdm9pZCB7XG4gICAgbGV0IHVpVmFyaWFudEluZGV4ID0gdGhpcy51aVZhcmlhbnRzLmluZGV4T2YodWlWYXJpYW50KTtcblxuICAgIGNvbnN0IHByZXZpb3VzVWkgPSB0aGlzLmN1cnJlbnRVaTtcbiAgICBjb25zdCBuZXh0VWk6IEludGVybmFsVUlJbnN0YW5jZU1hbmFnZXIgPSB0aGlzLnVpSW5zdGFuY2VNYW5hZ2Vyc1t1aVZhcmlhbnRJbmRleF07XG4gICAgLy8gRGV0ZXJtaW5lIGlmIHRoZSBVSSB2YXJpYW50IGlzIGNoYW5naW5nXG4gICAgLy8gT25seSBpZiB0aGUgVUkgdmFyaWFudCBpcyBjaGFuZ2luZywgd2UgbmVlZCB0byBkbyBzb21lIHN0dWZmLiBFbHNlIHdlIGp1c3QgbGVhdmUgZXZlcnl0aGluZyBhcy1pcy5cbiAgICBpZiAobmV4dFVpID09PSB0aGlzLmN1cnJlbnRVaSkge1xuICAgICAgcmV0dXJuO1xuICAgICAgLy8gY29uc29sZS5sb2coJ3N3aXRjaGVkIGZyb20gJywgdGhpcy5jdXJyZW50VWkgPyB0aGlzLmN1cnJlbnRVaS5nZXRVSSgpIDogJ25vbmUnLFxuICAgICAgLy8gICAnIHRvICcsIG5leHRVaSA/IG5leHRVaS5nZXRVSSgpIDogJ25vbmUnKTtcbiAgICB9XG5cbiAgICAvLyBIaWRlIHRoZSBjdXJyZW50bHkgYWN0aXZlIFVJIHZhcmlhbnRcbiAgICBpZiAodGhpcy5jdXJyZW50VWkpIHtcbiAgICAgIHRoaXMuY3VycmVudFVpLmdldFVJKCkuaGlkZSgpO1xuICAgIH1cblxuICAgIC8vIEFzc2lnbiB0aGUgbmV3IFVJIHZhcmlhbnQgYXMgY3VycmVudCBVSVxuICAgIHRoaXMuY3VycmVudFVpID0gbmV4dFVpO1xuXG4gICAgLy8gV2hlbiB3ZSBzd2l0Y2ggdG8gYSBkaWZmZXJlbnQgVUkgaW5zdGFuY2UsIHRoZXJlJ3Mgc29tZSBhZGRpdGlvbmFsIHN0dWZmIHRvIG1hbmFnZS4gSWYgd2UgZG8gbm90IHN3aXRjaFxuICAgIC8vIHRvIGFuIGluc3RhbmNlLCB3ZSdyZSBkb25lIGhlcmUuXG4gICAgaWYgKHRoaXMuY3VycmVudFVpID09IG51bGwpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgLy8gQWRkIHRoZSBVSSB0byB0aGUgRE9NIChhbmQgY29uZmlndXJlIGl0KSB0aGUgZmlyc3QgdGltZSBpdCBpcyBzZWxlY3RlZFxuICAgIGlmICghdGhpcy5jdXJyZW50VWkuaXNDb25maWd1cmVkKCkpIHtcbiAgICAgIHRoaXMuYWRkVWkodGhpcy5jdXJyZW50VWkpO1xuICAgICAgLy8gZW5zdXJlIHRoYXQgdGhlIGludGVybmFsIHN0YXRlIGlzIHJlYWR5IGZvciB0aGUgdXBjb21pbmcgc2hvdyBjYWxsXG4gICAgICBpZiAoIXRoaXMuY3VycmVudFVpLmdldFVJKCkuaXNIaWRkZW4oKSkge1xuICAgICAgICB0aGlzLmN1cnJlbnRVaS5nZXRVSSgpLmhpZGUoKTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKG9uU2hvdykge1xuICAgICAgb25TaG93KCk7XG4gICAgfVxuICAgIHRoaXMuY3VycmVudFVpLmdldFVJKCkuc2hvdygpO1xuICAgIHRoaXMuZXZlbnRzLm9uQWN0aXZlVWlDaGFuZ2VkLmRpc3BhdGNoKHRoaXMsIHsgcHJldmlvdXNVaSwgY3VycmVudFVpOiBuZXh0VWkgfSk7XG4gIH1cblxuICAvKipcbiAgICogVHJpZ2dlcnMgYSBVSSB2YXJpYW50IHN3aXRjaCBhcyB0cmlnZ2VyZWQgYnkgZXZlbnRzIHdoZW4gYXV0b21hdGljIHN3aXRjaGluZyBpcyBlbmFibGVkLiBJdCBhbGxvd3MgdG8gb3ZlcndyaXRlXG4gICAqIHByb3BlcnRpZXMgb2YgdGhlIHtAbGluayBVSUNvbmRpdGlvbkNvbnRleHR9LlxuICAgKiBAcGFyYW0ge1BhcnRpYWw8VUlDb25kaXRpb25Db250ZXh0Pn0gY29udGV4dCBhbiBvcHRpb25hbCBzZXQgb2YgcHJvcGVydGllcyB0aGF0IG92ZXJ3cml0ZSBwcm9wZXJ0aWVzIG9mIHRoZVxuICAgKiAgIGF1dG9tYXRpY2FsbHkgZGV0ZXJtaW5lZCBjb250ZXh0XG4gICAqIEBwYXJhbSB7KGNvbnRleHQ6IFVJQ29uZGl0aW9uQ29udGV4dCkgPT4gdm9pZH0gb25TaG93IGEgY2FsbGJhY2sgdGhhdCBpcyBleGVjdXRlZCBqdXN0IGJlZm9yZSB0aGUgbmV3IFVJIHZhcmlhbnRcbiAgICogICBpcyBzaG93biAoaWYgYSBzd2l0Y2ggaXMgaGFwcGVuaW5nKVxuICAgKi9cbiAgcmVzb2x2ZVVpVmFyaWFudChjb250ZXh0OiBQYXJ0aWFsPFVJQ29uZGl0aW9uQ29udGV4dD4gPSB7fSwgb25TaG93PzogKGNvbnRleHQ6IFVJQ29uZGl0aW9uQ29udGV4dCkgPT4gdm9pZCk6IHZvaWQge1xuICAgIC8vIERldGVybWluZSB0aGUgY3VycmVudCBjb250ZXh0IGZvciB3aGljaCB0aGUgVUkgdmFyaWFudCB3aWxsIGJlIHJlc29sdmVkXG4gICAgY29uc3QgZGVmYXVsdENvbnRleHQ6IFVJQ29uZGl0aW9uQ29udGV4dCA9IHtcbiAgICAgIGlzQWQ6IGZhbHNlLFxuICAgICAgYWRSZXF1aXJlc1VpOiBmYWxzZSxcbiAgICAgIGlzRnVsbHNjcmVlbjogdGhpcy5wbGF5ZXIuZ2V0Vmlld01vZGUoKSA9PT0gdGhpcy5wbGF5ZXIuZXhwb3J0cy5WaWV3TW9kZS5GdWxsc2NyZWVuLFxuICAgICAgaXNNb2JpbGU6IEJyb3dzZXJVdGlscy5pc01vYmlsZSxcbiAgICAgIGlzUGxheWluZzogdGhpcy5wbGF5ZXIuaXNQbGF5aW5nKCksXG4gICAgICB3aWR0aDogdGhpcy51aUNvbnRhaW5lckVsZW1lbnQud2lkdGgoKSxcbiAgICAgIGRvY3VtZW50V2lkdGg6IGRvY3VtZW50LmJvZHkuY2xpZW50V2lkdGgsXG4gICAgfTtcblxuICAgIC8vIE92ZXJ3cml0ZSBwcm9wZXJ0aWVzIG9mIHRoZSBkZWZhdWx0IGNvbnRleHQgd2l0aCBwYXNzZWQgaW4gY29udGV4dCBwcm9wZXJ0aWVzXG4gICAgY29uc3Qgc3dpdGNoaW5nQ29udGV4dCA9IHsgLi4uZGVmYXVsdENvbnRleHQsIC4uLmNvbnRleHQgfTtcblxuICAgIC8vIEZpcmUgdGhlIGV2ZW50IGFuZCBhbGxvdyBtb2RpZmljYXRpb24gb2YgdGhlIGNvbnRleHQgYmVmb3JlIGl0IGlzIHVzZWQgdG8gcmVzb2x2ZSB0aGUgVUkgdmFyaWFudFxuICAgIHRoaXMuZXZlbnRzLm9uVWlWYXJpYW50UmVzb2x2ZS5kaXNwYXRjaCh0aGlzLCBzd2l0Y2hpbmdDb250ZXh0KTtcblxuICAgIGxldCBuZXh0VWlWYXJpYW50OiBVSVZhcmlhbnQgPSBudWxsO1xuXG4gICAgLy8gU2VsZWN0IG5ldyBVSSB2YXJpYW50XG4gICAgLy8gSWYgbm8gdmFyaWFudCBjb25kaXRpb24gaXMgZnVsZmlsbGVkLCB3ZSBzd2l0Y2ggdG8gKm5vKiBVSVxuICAgIGZvciAobGV0IHVpVmFyaWFudCBvZiB0aGlzLnVpVmFyaWFudHMpIHtcbiAgICAgIGNvbnN0IG1hdGNoZXNDb25kaXRpb24gPSB1aVZhcmlhbnQuY29uZGl0aW9uID09IG51bGwgfHwgdWlWYXJpYW50LmNvbmRpdGlvbihzd2l0Y2hpbmdDb250ZXh0KSA9PT0gdHJ1ZTtcbiAgICAgIGlmIChuZXh0VWlWYXJpYW50ID09IG51bGwgJiYgbWF0Y2hlc0NvbmRpdGlvbikge1xuICAgICAgICBuZXh0VWlWYXJpYW50ID0gdWlWYXJpYW50O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gaGlkZSBhbGwgVUlzIGJlc2lkZXMgdGhlIG9uZSB3aGljaCBzaG91bGQgYmUgYWN0aXZlXG4gICAgICAgIHVpVmFyaWFudC51aS5oaWRlKCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5zd2l0Y2hUb1VpVmFyaWFudChuZXh0VWlWYXJpYW50LCAoKSA9PiB7XG4gICAgICBpZiAob25TaG93KSB7XG4gICAgICAgIG9uU2hvdyhzd2l0Y2hpbmdDb250ZXh0KTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgYWRkVWkodWk6IEludGVybmFsVUlJbnN0YW5jZU1hbmFnZXIpOiB2b2lkIHtcbiAgICBsZXQgZG9tID0gdWkuZ2V0VUkoKS5nZXREb21FbGVtZW50KCk7XG4gICAgbGV0IHBsYXllciA9IHVpLmdldFdyYXBwZWRQbGF5ZXIoKTtcblxuICAgIHVpLmNvbmZpZ3VyZUNvbnRyb2xzKCk7XG4gICAgLyogQXBwZW5kIHRoZSBVSSBET00gYWZ0ZXIgY29uZmlndXJhdGlvbiB0byBhdm9pZCBDU1MgdHJhbnNpdGlvbnMgYXQgaW5pdGlhbGl6YXRpb25cbiAgICAgKiBFeGFtcGxlOiBDb21wb25lbnRzIGFyZSBoaWRkZW4gZHVyaW5nIGNvbmZpZ3VyYXRpb24gYW5kIHRoZXNlIGhpZGVzIG1heSB0cmlnZ2VyIENTUyB0cmFuc2l0aW9ucyB0aGF0IGFyZVxuICAgICAqIHVuZGVzaXJhYmxlIGF0IHRoaXMgdGltZS4gKi9cbiAgICB0aGlzLnVpQ29udGFpbmVyRWxlbWVudC5hcHBlbmQoZG9tKTtcblxuICAgIC8vIFdoZW4gdGhlIFVJIGlzIGxvYWRlZCBhZnRlciBhIHNvdXJjZSB3YXMgbG9hZGVkLCB3ZSBuZWVkIHRvIHRlbGwgdGhlIGNvbXBvbmVudHMgdG8gaW5pdGlhbGl6ZSB0aGVtc2VsdmVzXG4gICAgaWYgKHBsYXllci5nZXRTb3VyY2UoKSkge1xuICAgICAgdGhpcy5jb25maWcuZXZlbnRzLm9uVXBkYXRlZC5kaXNwYXRjaCh0aGlzKTtcblxuICAgIH1cblxuICAgIC8vIEZpcmUgb25Db25maWd1cmVkIGFmdGVyIFVJIERPTSBlbGVtZW50cyBhcmUgc3VjY2Vzc2Z1bGx5IGFkZGVkLiBXaGVuIGZpcmVkIGltbWVkaWF0ZWx5LCB0aGUgRE9NIGVsZW1lbnRzXG4gICAgLy8gbWlnaHQgbm90IGJlIGZ1bGx5IGNvbmZpZ3VyZWQgYW5kIGUuZy4gZG8gbm90IGhhdmUgYSBzaXplLlxuICAgIC8vIGh0dHBzOi8vc3dpemVjLmNvbS9ibG9nL2hvdy10by1wcm9wZXJseS13YWl0LWZvci1kb20tZWxlbWVudHMtdG8tc2hvdy11cC1pbi1tb2Rlcm4tYnJvd3NlcnMvc3dpemVjLzY2NjNcbiAgICBpZiAod2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSkge1xuICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHsgdWkub25Db25maWd1cmVkLmRpc3BhdGNoKHVpLmdldFVJKCkpOyB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gSUU5IGZhbGxiYWNrXG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHsgdWkub25Db25maWd1cmVkLmRpc3BhdGNoKHVpLmdldFVJKCkpOyB9LCAwKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHJlbGVhc2VVaSh1aTogSW50ZXJuYWxVSUluc3RhbmNlTWFuYWdlcik6IHZvaWQge1xuICAgIHVpLnJlbGVhc2VDb250cm9scygpO1xuXG4gICAgY29uc3QgdWlDb250YWluZXIgPSB1aS5nZXRVSSgpO1xuICAgIGlmICh1aUNvbnRhaW5lci5oYXNEb21FbGVtZW50KCkpIHtcbiAgICAgIHVpQ29udGFpbmVyLmdldERvbUVsZW1lbnQoKS5yZW1vdmUoKTtcbiAgICB9XG5cbiAgICB1aS5jbGVhckV2ZW50SGFuZGxlcnMoKTtcbiAgfVxuXG4gIHJlbGVhc2UoKTogdm9pZCB7XG4gICAgZm9yIChsZXQgdWlJbnN0YW5jZU1hbmFnZXIgb2YgdGhpcy51aUluc3RhbmNlTWFuYWdlcnMpIHtcbiAgICAgIHRoaXMucmVsZWFzZVVpKHVpSW5zdGFuY2VNYW5hZ2VyKTtcbiAgICB9XG4gICAgdGhpcy5tYW5hZ2VyUGxheWVyV3JhcHBlci5jbGVhckV2ZW50SGFuZGxlcnMoKTtcbiAgICB0aGlzLmZvY3VzVmlzaWJpbGl0eVRyYWNrZXIucmVsZWFzZSgpO1xuICB9XG5cbiAgLyoqXG4gICAqIEZpcmVzIGp1c3QgYmVmb3JlIFVJIHZhcmlhbnRzIGFyZSBhYm91dCB0byBiZSByZXNvbHZlZCBhbmQgdGhlIFVJIHZhcmlhbnQgaXMgcG9zc2libHkgc3dpdGNoZWQuIEl0IGlzIGZpcmVkIHdoZW5cbiAgICogdGhlIHN3aXRjaCBpcyB0cmlnZ2VyZWQgZnJvbSBhbiBhdXRvbWF0aWMgc3dpdGNoIGFuZCB3aGVuIGNhbGxpbmcge0BsaW5rIHJlc29sdmVVaVZhcmlhbnR9LlxuICAgKiBDYW4gYmUgdXNlZCB0byBtb2RpZnkgdGhlIHtAbGluayBVSUNvbmRpdGlvbkNvbnRleHR9IGJlZm9yZSByZXNvbHZpbmcgaXMgZG9uZS5cbiAgICogQHJldHVybnMge0V2ZW50RGlzcGF0Y2hlcjxVSU1hbmFnZXIsIFVJQ29uZGl0aW9uQ29udGV4dD59XG4gICAqL1xuICBnZXQgb25VaVZhcmlhbnRSZXNvbHZlKCk6IEV2ZW50RGlzcGF0Y2hlcjxVSU1hbmFnZXIsIFVJQ29uZGl0aW9uQ29udGV4dD4ge1xuICAgIHJldHVybiB0aGlzLmV2ZW50cy5vblVpVmFyaWFudFJlc29sdmU7XG4gIH1cblxuICAvKipcbiAgICogRmlyZXMgYWZ0ZXIgdGhlIFVJTWFuYWdlciBoYXMgc3dpdGNoZWQgdG8gYSBkaWZmZXJlbnQgVUkgdmFyaWFudC5cbiAgICogQHJldHVybnMge0V2ZW50RGlzcGF0Y2hlcjxVSU1hbmFnZXIsIEFjdGl2ZVVpQ2hhbmdlZEFyZ3M+fVxuICAgKi9cbiAgZ2V0IG9uQWN0aXZlVWlDaGFuZ2VkKCk6IEV2ZW50RGlzcGF0Y2hlcjxVSU1hbmFnZXIsIEFjdGl2ZVVpQ2hhbmdlZEFyZ3M+IHtcbiAgICByZXR1cm4gdGhpcy5ldmVudHMub25BY3RpdmVVaUNoYW5nZWQ7XG4gIH1cblxuICAvKipcbiAgICogVGhlIGN1cnJlbnQgYWN0aXZlIHtAbGluayBVSUluc3RhbmNlTWFuYWdlcn0uXG4gICAqL1xuICBnZXQgYWN0aXZlVWkoKTogVUlJbnN0YW5jZU1hbmFnZXIge1xuICAgIHJldHVybiB0aGlzLmN1cnJlbnRVaTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBsaXN0IG9mIGFsbCBhZGRlZCBtYXJrZXJzIGluIHVuZGVmaW5lZCBvcmRlci5cbiAgICovXG4gIGdldFRpbWVsaW5lTWFya2VycygpOiBUaW1lbGluZU1hcmtlcltdIHtcbiAgICByZXR1cm4gdGhpcy5jb25maWcubWV0YWRhdGEubWFya2VycztcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGRzIGEgbWFya2VyIHRvIHRoZSB0aW1lbGluZS4gRG9lcyBub3QgY2hlY2sgZm9yIGR1cGxpY2F0ZXMvb3ZlcmxhcHMgYXQgdGhlIGB0aW1lYC5cbiAgICovXG4gIGFkZFRpbWVsaW5lTWFya2VyKHRpbWVsaW5lTWFya2VyOiBUaW1lbGluZU1hcmtlcik6IHZvaWQge1xuICAgIHRoaXMuY29uZmlnLm1ldGFkYXRhLm1hcmtlcnMucHVzaCh0aW1lbGluZU1hcmtlcik7XG4gICAgdGhpcy5jb25maWcuZXZlbnRzLm9uVXBkYXRlZC5kaXNwYXRjaCh0aGlzKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZW1vdmVzIGEgbWFya2VyIGZyb20gdGhlIHRpbWVsaW5lIChieSByZWZlcmVuY2UpIGFuZCByZXR1cm5zIGB0cnVlYCBpZiB0aGUgbWFya2VyIGhhc1xuICAgKiBiZWVuIHBhcnQgb2YgdGhlIHRpbWVsaW5lIGFuZCBzdWNjZXNzZnVsbHkgcmVtb3ZlZCwgb3IgYGZhbHNlYCBpZiB0aGUgbWFya2VyIGNvdWxkIG5vdFxuICAgKiBiZSBmb3VuZCBhbmQgdGh1cyBub3QgcmVtb3ZlZC5cbiAgICovXG4gIHJlbW92ZVRpbWVsaW5lTWFya2VyKHRpbWVsaW5lTWFya2VyOiBUaW1lbGluZU1hcmtlcik6IGJvb2xlYW4ge1xuICAgIGlmIChBcnJheVV0aWxzLnJlbW92ZSh0aGlzLmNvbmZpZy5tZXRhZGF0YS5tYXJrZXJzLCB0aW1lbGluZU1hcmtlcikgPT09IHRpbWVsaW5lTWFya2VyKSB7XG4gICAgICB0aGlzLmNvbmZpZy5ldmVudHMub25VcGRhdGVkLmRpc3BhdGNoKHRoaXMpO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU2Vla1ByZXZpZXdBcmdzIGV4dGVuZHMgTm9BcmdzIHtcbiAgLyoqXG4gICAqIFRoZSB0aW1lbGluZSBwb3NpdGlvbiBpbiBwZXJjZW50IHdoZXJlIHRoZSBldmVudCBvcmlnaW5hdGVzIGZyb20uXG4gICAqL1xuICBwb3NpdGlvbjogbnVtYmVyO1xuICAvKipcbiAgICogVGhlIHRpbWVsaW5lIG1hcmtlciBhc3NvY2lhdGVkIHdpdGggdGhlIGN1cnJlbnQgcG9zaXRpb24sIGlmIGV4aXN0aW5nLlxuICAgKi9cbiAgbWFya2VyPzogU2Vla0Jhck1hcmtlcjtcbn1cblxuLyoqXG4gKiBFbmNhcHN1bGF0ZXMgZnVuY3Rpb25hbGl0eSB0byBtYW5hZ2UgYSBVSSBpbnN0YW5jZS4gVXNlZCBieSB0aGUge0BsaW5rIFVJTWFuYWdlcn0gdG8gbWFuYWdlIG11bHRpcGxlIFVJIGluc3RhbmNlcy5cbiAqL1xuZXhwb3J0IGNsYXNzIFVJSW5zdGFuY2VNYW5hZ2VyIHtcbiAgcHJpdmF0ZSBwbGF5ZXJXcmFwcGVyOiBQbGF5ZXJXcmFwcGVyO1xuICBwcml2YXRlIHVpOiBVSUNvbnRhaW5lcjtcbiAgcHJpdmF0ZSBjb25maWc6IEludGVybmFsVUlDb25maWc7XG4gIHByaXZhdGUgc3VidGl0bGVTZXR0aW5nc01hbmFnZXI6IFN1YnRpdGxlU2V0dGluZ3NNYW5hZ2VyO1xuICBwcm90ZWN0ZWQgc3BhdGlhbE5hdmlnYXRpb24/OiBTcGF0aWFsTmF2aWdhdGlvbjtcblxuICBwcml2YXRlIGV2ZW50cyA9IHtcbiAgICBvbkNvbmZpZ3VyZWQ6IG5ldyBFdmVudERpc3BhdGNoZXI8VUlDb250YWluZXIsIE5vQXJncz4oKSxcbiAgICBvblNlZWs6IG5ldyBFdmVudERpc3BhdGNoZXI8U2Vla0JhciwgTm9BcmdzPigpLFxuICAgIG9uU2Vla1ByZXZpZXc6IG5ldyBFdmVudERpc3BhdGNoZXI8U2Vla0JhciwgU2Vla1ByZXZpZXdBcmdzPigpLFxuICAgIG9uU2Vla2VkOiBuZXcgRXZlbnREaXNwYXRjaGVyPFNlZWtCYXIsIE5vQXJncz4oKSxcbiAgICBvbkNvbXBvbmVudFNob3c6IG5ldyBFdmVudERpc3BhdGNoZXI8Q29tcG9uZW50PENvbXBvbmVudENvbmZpZz4sIE5vQXJncz4oKSxcbiAgICBvbkNvbXBvbmVudEhpZGU6IG5ldyBFdmVudERpc3BhdGNoZXI8Q29tcG9uZW50PENvbXBvbmVudENvbmZpZz4sIE5vQXJncz4oKSxcbiAgICBvbkNvbXBvbmVudFZpZXdNb2RlQ2hhbmdlZDogbmV3IEV2ZW50RGlzcGF0Y2hlcjxDb21wb25lbnQ8Q29tcG9uZW50Q29uZmlnPiwgVmlld01vZGVDaGFuZ2VkRXZlbnRBcmdzPigpLFxuICAgIG9uQ29udHJvbHNTaG93OiBuZXcgRXZlbnREaXNwYXRjaGVyPFVJQ29udGFpbmVyLCBOb0FyZ3M+KCksXG4gICAgb25QcmV2aWV3Q29udHJvbHNIaWRlOiBuZXcgRXZlbnREaXNwYXRjaGVyPFVJQ29udGFpbmVyLCBDYW5jZWxFdmVudEFyZ3M+KCksXG4gICAgb25Db250cm9sc0hpZGU6IG5ldyBFdmVudERpc3BhdGNoZXI8VUlDb250YWluZXIsIE5vQXJncz4oKSxcbiAgICBvblJlbGVhc2U6IG5ldyBFdmVudERpc3BhdGNoZXI8VUlDb250YWluZXIsIE5vQXJncz4oKSxcbiAgfTtcblxuICBjb25zdHJ1Y3RvcihwbGF5ZXI6IFBsYXllckFQSSwgdWk6IFVJQ29udGFpbmVyLCBjb25maWc6IEludGVybmFsVUlDb25maWcsIHN1YnRpdGxlU2V0dGluZ3NNYW5hZ2VyOiBTdWJ0aXRsZVNldHRpbmdzTWFuYWdlciwgc3BhdGlhbE5hdmlnYXRpb24/OiBTcGF0aWFsTmF2aWdhdGlvbikge1xuICAgIHRoaXMucGxheWVyV3JhcHBlciA9IG5ldyBQbGF5ZXJXcmFwcGVyKHBsYXllcik7XG4gICAgdGhpcy51aSA9IHVpO1xuICAgIHRoaXMuY29uZmlnID0gY29uZmlnO1xuICAgIHRoaXMuc3VidGl0bGVTZXR0aW5nc01hbmFnZXIgPSBzdWJ0aXRsZVNldHRpbmdzTWFuYWdlcjtcbiAgICB0aGlzLnNwYXRpYWxOYXZpZ2F0aW9uID0gc3BhdGlhbE5hdmlnYXRpb247XG4gIH1cblxuICBnZXRTdWJ0aXRsZVNldHRpbmdzTWFuYWdlcigpIHtcbiAgICByZXR1cm4gdGhpcy5zdWJ0aXRsZVNldHRpbmdzTWFuYWdlcjtcbiAgfVxuXG4gIGdldENvbmZpZygpOiBJbnRlcm5hbFVJQ29uZmlnIHtcbiAgICByZXR1cm4gdGhpcy5jb25maWc7XG4gIH1cblxuICBnZXRVSSgpOiBVSUNvbnRhaW5lciB7XG4gICAgcmV0dXJuIHRoaXMudWk7XG4gIH1cblxuICBnZXRQbGF5ZXIoKTogUGxheWVyQVBJIHtcbiAgICByZXR1cm4gdGhpcy5wbGF5ZXJXcmFwcGVyLmdldFBsYXllcigpO1xuICB9XG5cbiAgLyoqXG4gICAqIEZpcmVzIHdoZW4gdGhlIFVJIGlzIGZ1bGx5IGNvbmZpZ3VyZWQgYW5kIGFkZGVkIHRvIHRoZSBET00uXG4gICAqIEByZXR1cm5zIHtFdmVudERpc3BhdGNoZXJ9XG4gICAqL1xuICBnZXQgb25Db25maWd1cmVkKCk6IEV2ZW50RGlzcGF0Y2hlcjxVSUNvbnRhaW5lciwgTm9BcmdzPiB7XG4gICAgcmV0dXJuIHRoaXMuZXZlbnRzLm9uQ29uZmlndXJlZDtcbiAgfVxuXG4gIC8qKlxuICAgKiBGaXJlcyB3aGVuIGEgc2VlayBzdGFydHMuXG4gICAqIEByZXR1cm5zIHtFdmVudERpc3BhdGNoZXJ9XG4gICAqL1xuICBnZXQgb25TZWVrKCk6IEV2ZW50RGlzcGF0Y2hlcjxTZWVrQmFyLCBOb0FyZ3M+IHtcbiAgICByZXR1cm4gdGhpcy5ldmVudHMub25TZWVrO1xuICB9XG5cbiAgLyoqXG4gICAqIEZpcmVzIHdoZW4gdGhlIHNlZWsgdGltZWxpbmUgaXMgc2NydWJiZWQuXG4gICAqIEByZXR1cm5zIHtFdmVudERpc3BhdGNoZXJ9XG4gICAqL1xuICBnZXQgb25TZWVrUHJldmlldygpOiBFdmVudERpc3BhdGNoZXI8U2Vla0JhciwgU2Vla1ByZXZpZXdBcmdzPiB7XG4gICAgcmV0dXJuIHRoaXMuZXZlbnRzLm9uU2Vla1ByZXZpZXc7XG4gIH1cblxuICAvKipcbiAgICogRmlyZXMgd2hlbiBhIHNlZWsgaXMgZmluaXNoZWQuXG4gICAqIEByZXR1cm5zIHtFdmVudERpc3BhdGNoZXJ9XG4gICAqL1xuICBnZXQgb25TZWVrZWQoKTogRXZlbnREaXNwYXRjaGVyPFNlZWtCYXIsIE5vQXJncz4ge1xuICAgIHJldHVybiB0aGlzLmV2ZW50cy5vblNlZWtlZDtcbiAgfVxuXG4gIC8qKlxuICAgKiBGaXJlcyB3aGVuIGEgY29tcG9uZW50IGlzIHNob3dpbmcuXG4gICAqIEByZXR1cm5zIHtFdmVudERpc3BhdGNoZXJ9XG4gICAqL1xuICBnZXQgb25Db21wb25lbnRTaG93KCk6IEV2ZW50RGlzcGF0Y2hlcjxDb21wb25lbnQ8Q29tcG9uZW50Q29uZmlnPiwgTm9BcmdzPiB7XG4gICAgcmV0dXJuIHRoaXMuZXZlbnRzLm9uQ29tcG9uZW50U2hvdztcbiAgfVxuXG4gIC8qKlxuICAgKiBGaXJlcyB3aGVuIGEgY29tcG9uZW50IGlzIGhpZGluZy5cbiAgICogQHJldHVybnMge0V2ZW50RGlzcGF0Y2hlcn1cbiAgICovXG4gIGdldCBvbkNvbXBvbmVudEhpZGUoKTogRXZlbnREaXNwYXRjaGVyPENvbXBvbmVudDxDb21wb25lbnRDb25maWc+LCBOb0FyZ3M+IHtcbiAgICByZXR1cm4gdGhpcy5ldmVudHMub25Db21wb25lbnRIaWRlO1xuICB9XG5cbiAgLyoqXG4gICAqIEZpcmVzIHdoZW4gdGhlIFVJIGNvbnRyb2xzIGFyZSBzaG93aW5nLlxuICAgKiBAcmV0dXJucyB7RXZlbnREaXNwYXRjaGVyfVxuICAgKi9cbiAgZ2V0IG9uQ29udHJvbHNTaG93KCk6IEV2ZW50RGlzcGF0Y2hlcjxVSUNvbnRhaW5lciwgTm9BcmdzPiB7XG4gICAgcmV0dXJuIHRoaXMuZXZlbnRzLm9uQ29udHJvbHNTaG93O1xuICB9XG5cbiAgLyoqXG4gICAqIEZpcmVzIGJlZm9yZSB0aGUgVUkgY29udHJvbHMgYXJlIGhpZGluZyB0byBjaGVjayBpZiB0aGV5IGFyZSBhbGxvd2VkIHRvIGhpZGUuXG4gICAqIEByZXR1cm5zIHtFdmVudERpc3BhdGNoZXJ9XG4gICAqL1xuICBnZXQgb25QcmV2aWV3Q29udHJvbHNIaWRlKCk6IEV2ZW50RGlzcGF0Y2hlcjxVSUNvbnRhaW5lciwgQ2FuY2VsRXZlbnRBcmdzPiB7XG4gICAgcmV0dXJuIHRoaXMuZXZlbnRzLm9uUHJldmlld0NvbnRyb2xzSGlkZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBGaXJlcyB3aGVuIHRoZSBVSSBjb250cm9scyBhcmUgaGlkaW5nLlxuICAgKiBAcmV0dXJucyB7RXZlbnREaXNwYXRjaGVyfVxuICAgKi9cbiAgZ2V0IG9uQ29udHJvbHNIaWRlKCk6IEV2ZW50RGlzcGF0Y2hlcjxVSUNvbnRhaW5lciwgTm9BcmdzPiB7XG4gICAgcmV0dXJuIHRoaXMuZXZlbnRzLm9uQ29udHJvbHNIaWRlO1xuICB9XG5cbiAgLyoqXG4gICAqIEZpcmVzIHdoZW4gdGhlIFVJIGNvbnRyb2xzIGFyZSByZWxlYXNlZC5cbiAgICogQHJldHVybnMge0V2ZW50RGlzcGF0Y2hlcn1cbiAgICovXG4gIGdldCBvblJlbGVhc2UoKTogRXZlbnREaXNwYXRjaGVyPFVJQ29udGFpbmVyLCBOb0FyZ3M+IHtcbiAgICByZXR1cm4gdGhpcy5ldmVudHMub25SZWxlYXNlO1xuICB9XG5cbiAgZ2V0IG9uQ29tcG9uZW50Vmlld01vZGVDaGFuZ2VkKCk6IEV2ZW50RGlzcGF0Y2hlcjxDb21wb25lbnQ8Q29tcG9uZW50Q29uZmlnPiwgVmlld01vZGVDaGFuZ2VkRXZlbnRBcmdzPiB7XG4gICAgcmV0dXJuIHRoaXMuZXZlbnRzLm9uQ29tcG9uZW50Vmlld01vZGVDaGFuZ2VkO1xuICB9XG5cbiAgcHJvdGVjdGVkIGNsZWFyRXZlbnRIYW5kbGVycygpOiB2b2lkIHtcbiAgICB0aGlzLnBsYXllcldyYXBwZXIuY2xlYXJFdmVudEhhbmRsZXJzKCk7XG5cbiAgICBsZXQgZXZlbnRzID0gPGFueT50aGlzLmV2ZW50czsgLy8gYXZvaWQgVFM3MDE3XG4gICAgZm9yIChsZXQgZXZlbnQgaW4gZXZlbnRzKSB7XG4gICAgICBsZXQgZGlzcGF0Y2hlciA9IDxFdmVudERpc3BhdGNoZXI8T2JqZWN0LCBPYmplY3Q+PmV2ZW50c1tldmVudF07XG4gICAgICBkaXNwYXRjaGVyLnVuc3Vic2NyaWJlQWxsKCk7XG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogRXh0ZW5kcyB0aGUge0BsaW5rIFVJSW5zdGFuY2VNYW5hZ2VyfSBmb3IgaW50ZXJuYWwgdXNlIGluIHRoZSB7QGxpbmsgVUlNYW5hZ2VyfSBhbmQgcHJvdmlkZXMgYWNjZXNzIHRvIGZ1bmN0aW9uYWxpdHlcbiAqIHRoYXQgY29tcG9uZW50cyByZWNlaXZpbmcgYSByZWZlcmVuY2UgdG8gdGhlIHtAbGluayBVSUluc3RhbmNlTWFuYWdlcn0gc2hvdWxkIG5vdCBoYXZlIGFjY2VzcyB0by5cbiAqL1xuY2xhc3MgSW50ZXJuYWxVSUluc3RhbmNlTWFuYWdlciBleHRlbmRzIFVJSW5zdGFuY2VNYW5hZ2VyIHtcblxuICBwcml2YXRlIGNvbmZpZ3VyZWQ6IGJvb2xlYW47XG4gIHByaXZhdGUgcmVsZWFzZWQ6IGJvb2xlYW47XG5cbiAgZ2V0V3JhcHBlZFBsYXllcigpOiBXcmFwcGVkUGxheWVyIHtcbiAgICAvLyBUT0RPIGZpbmQgYSBub24taGFja3kgd2F5IHRvIHByb3ZpZGUgdGhlIFdyYXBwZWRQbGF5ZXIgdG8gdGhlIFVJTWFuYWdlciB3aXRob3V0IGV4cG9ydGluZyBpdFxuICAgIC8vIGdldFBsYXllcigpIGFjdHVhbGx5IHJldHVybnMgdGhlIFdyYXBwZWRQbGF5ZXIgYnV0IGl0cyByZXR1cm4gdHlwZSBpcyBzZXQgdG8gUGxheWVyIHNvIHRoZSBXcmFwcGVkUGxheWVyIGRvZXNcbiAgICAvLyBub3QgbmVlZCB0byBiZSBleHBvcnRlZFxuICAgIHJldHVybiA8V3JhcHBlZFBsYXllcj50aGlzLmdldFBsYXllcigpO1xuICB9XG5cbiAgY29uZmlndXJlQ29udHJvbHMoKTogdm9pZCB7XG4gICAgdGhpcy5jb25maWd1cmVDb250cm9sc1RyZWUodGhpcy5nZXRVSSgpKTtcbiAgICB0aGlzLmNvbmZpZ3VyZWQgPSB0cnVlO1xuICB9XG5cbiAgaXNDb25maWd1cmVkKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLmNvbmZpZ3VyZWQ7XG4gIH1cblxuICBwcml2YXRlIGNvbmZpZ3VyZUNvbnRyb2xzVHJlZShjb21wb25lbnQ6IENvbXBvbmVudDxDb21wb25lbnRDb25maWc+KSB7XG4gICAgbGV0IGNvbmZpZ3VyZWRDb21wb25lbnRzOiBDb21wb25lbnQ8Q29tcG9uZW50Q29uZmlnPltdID0gW107XG5cbiAgICBVSVV0aWxzLnRyYXZlcnNlVHJlZShjb21wb25lbnQsIChjb21wb25lbnQpID0+IHtcbiAgICAgIC8vIEZpcnN0LCBjaGVjayBpZiB3ZSBoYXZlIGFscmVhZHkgY29uZmlndXJlZCBhIGNvbXBvbmVudCwgYW5kIHRocm93IGFuIGVycm9yIGlmIHdlIGRpZC4gTXVsdGlwbGUgY29uZmlndXJhdGlvblxuICAgICAgLy8gb2YgdGhlIHNhbWUgY29tcG9uZW50IGxlYWRzIHRvIHVuZXhwZWN0ZWQgVUkgYmVoYXZpb3IuIEFsc28sIGEgY29tcG9uZW50IHRoYXQgaXMgaW4gdGhlIFVJIHRyZWUgbXVsdGlwbGVcbiAgICAgIC8vIHRpbWVzIGhpbnRzIGF0IGEgd3JvbmcgVUkgc3RydWN0dXJlLlxuICAgICAgLy8gV2UgY291bGQganVzdCBza2lwIGNvbmZpZ3VyYXRpb24gaW4gc3VjaCBhIGNhc2UgYW5kIG5vdCB0aHJvdyBhbiBleGNlcHRpb24sIGJ1dCBlbmZvcmNpbmcgYSBjbGVhbiBVSSB0cmVlXG4gICAgICAvLyBzZWVtcyBsaWtlIHRoZSBiZXR0ZXIgY2hvaWNlLlxuICAgICAgZm9yIChsZXQgY29uZmlndXJlZENvbXBvbmVudCBvZiBjb25maWd1cmVkQ29tcG9uZW50cykge1xuICAgICAgICBpZiAoY29uZmlndXJlZENvbXBvbmVudCA9PT0gY29tcG9uZW50KSB7XG4gICAgICAgICAgLy8gV3JpdGUgdGhlIGNvbXBvbmVudCB0byB0aGUgY29uc29sZSB0byBzaW1wbGlmeSBpZGVudGlmaWNhdGlvbiBvZiB0aGUgY3VscHJpdFxuICAgICAgICAgIC8vIChlLmcuIGJ5IGluc3BlY3RpbmcgdGhlIGNvbmZpZylcbiAgICAgICAgICBpZiAoY29uc29sZSkge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignQ2lyY3VsYXIgcmVmZXJlbmNlIGluIFVJIHRyZWUnLCBjb21wb25lbnQpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIEFkZGl0aW9uYWxseSB0aHJvdyBhbiBlcnJvciwgYmVjYXVzZSB0aGlzIGNhc2UgbXVzdCBub3QgaGFwcGVuIGFuZCBsZWFkcyB0byB1bmV4cGVjdGVkIFVJIGJlaGF2aW9yLlxuICAgICAgICAgIHRocm93IEVycm9yKCdDaXJjdWxhciByZWZlcmVuY2UgaW4gVUkgdHJlZTogJyArIGNvbXBvbmVudC5jb25zdHJ1Y3Rvci5uYW1lKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBjb21wb25lbnQuaW5pdGlhbGl6ZSgpO1xuICAgICAgY29tcG9uZW50LmNvbmZpZ3VyZSh0aGlzLmdldFBsYXllcigpLCB0aGlzKTtcbiAgICAgIGNvbmZpZ3VyZWRDb21wb25lbnRzLnB1c2goY29tcG9uZW50KTtcbiAgICB9KTtcbiAgfVxuXG4gIHJlbGVhc2VDb250cm9scygpOiB2b2lkIHtcbiAgICAvLyBEbyBub3QgY2FsbCByZWxlYXNlIG1ldGhvZHMgaWYgdGhlIGNvbXBvbmVudHMgaGF2ZSBuZXZlciBiZWVuIGNvbmZpZ3VyZWQ7IHRoaXMgY2FuIHJlc3VsdCBpbiBleGNlcHRpb25zXG4gICAgaWYgKHRoaXMuY29uZmlndXJlZCkge1xuICAgICAgdGhpcy5vblJlbGVhc2UuZGlzcGF0Y2godGhpcy5nZXRVSSgpKTtcbiAgICAgIHRoaXMucmVsZWFzZUNvbnRyb2xzVHJlZSh0aGlzLmdldFVJKCkpO1xuICAgICAgdGhpcy5jb25maWd1cmVkID0gZmFsc2U7XG4gICAgfVxuICAgIHRoaXMuc3BhdGlhbE5hdmlnYXRpb24/LnJlbGVhc2UoKTtcbiAgICB0aGlzLnJlbGVhc2VkID0gdHJ1ZTtcbiAgfVxuXG4gIGlzUmVsZWFzZWQoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMucmVsZWFzZWQ7XG4gIH1cblxuICBwcml2YXRlIHJlbGVhc2VDb250cm9sc1RyZWUoY29tcG9uZW50OiBDb21wb25lbnQ8Q29tcG9uZW50Q29uZmlnPikge1xuICAgIGNvbXBvbmVudC5yZWxlYXNlKCk7XG5cbiAgICBpZiAoY29tcG9uZW50IGluc3RhbmNlb2YgQ29udGFpbmVyKSB7XG4gICAgICBmb3IgKGxldCBjaGlsZENvbXBvbmVudCBvZiBjb21wb25lbnQuZ2V0Q29tcG9uZW50cygpKSB7XG4gICAgICAgIHRoaXMucmVsZWFzZUNvbnRyb2xzVHJlZShjaGlsZENvbXBvbmVudCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgY2xlYXJFdmVudEhhbmRsZXJzKCk6IHZvaWQge1xuICAgIHN1cGVyLmNsZWFyRXZlbnRIYW5kbGVycygpO1xuICB9XG59XG5cbi8qKlxuICogRXh0ZW5kZWQgaW50ZXJmYWNlIG9mIHRoZSB7QGxpbmsgUGxheWVyfSBmb3IgdXNlIGluIHRoZSBVSS5cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBXcmFwcGVkUGxheWVyIGV4dGVuZHMgUGxheWVyQVBJIHtcbiAgLyoqXG4gICAqIEZpcmVzIGFuIGV2ZW50IG9uIHRoZSBwbGF5ZXIgdGhhdCB0YXJnZXRzIGFsbCBoYW5kbGVycyBpbiB0aGUgVUkgYnV0IG5ldmVyIGVudGVycyB0aGUgcmVhbCBwbGF5ZXIuXG4gICAqIEBwYXJhbSBldmVudCB0aGUgZXZlbnQgdG8gZmlyZVxuICAgKiBAcGFyYW0gZGF0YSBkYXRhIHRvIHNlbmQgd2l0aCB0aGUgZXZlbnRcbiAgICovXG4gIGZpcmVFdmVudEluVUkoZXZlbnQ6IFBsYXllckV2ZW50LCBkYXRhOiB7fSk6IHZvaWQ7XG59XG5cbi8qKlxuICogV3JhcHMgdGhlIHBsYXllciB0byB0cmFjayBldmVudCBoYW5kbGVycyBhbmQgcHJvdmlkZSBhIHNpbXBsZSBtZXRob2QgdG8gcmVtb3ZlIGFsbCByZWdpc3RlcmVkIGV2ZW50XG4gKiBoYW5kbGVycyBmcm9tIHRoZSBwbGF5ZXIuXG4gKlxuICogQGNhdGVnb3J5IFV0aWxzXG4gKi9cbmV4cG9ydCBjbGFzcyBQbGF5ZXJXcmFwcGVyIHtcblxuICBwcml2YXRlIHBsYXllcjogUGxheWVyQVBJO1xuICBwcml2YXRlIHdyYXBwZXI6IFdyYXBwZWRQbGF5ZXI7XG5cbiAgcHJpdmF0ZSBldmVudEhhbmRsZXJzOiB7IFtldmVudFR5cGU6IHN0cmluZ106IFBsYXllckV2ZW50Q2FsbGJhY2tbXTsgfSA9IHt9O1xuXG4gIGNvbnN0cnVjdG9yKHBsYXllcjogUGxheWVyQVBJKSB7XG4gICAgdGhpcy5wbGF5ZXIgPSBwbGF5ZXI7XG5cbiAgICAvLyBDb2xsZWN0IGFsbCBtZW1iZXJzIG9mIHRoZSBwbGF5ZXIgKHB1YmxpYyBBUEkgbWV0aG9kcyBhbmQgcHJvcGVydGllcyBvZiB0aGUgcGxheWVyKVxuICAgIGNvbnN0IG9iamVjdFByb3RvUHJvcGVydHlOYW1lcyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKE9iamVjdC5nZXRQcm90b3R5cGVPZih7fSkpO1xuICAgIGNvbnN0IG5hbWVzVG9JZ25vcmUgPSBbJ2NvbnN0cnVjdG9yJywgLi4ub2JqZWN0UHJvdG9Qcm9wZXJ0eU5hbWVzXTtcbiAgICBjb25zdCBtZW1iZXJzID0gZ2V0QWxsUHJvcGVydHlOYW1lcyhwbGF5ZXIpLmZpbHRlcihuYW1lID0+IG5hbWVzVG9JZ25vcmUuaW5kZXhPZihuYW1lKSA9PT0gLTEpO1xuICAgIC8vIFNwbGl0IHRoZSBtZW1iZXJzIGludG8gbWV0aG9kcyBhbmQgcHJvcGVydGllc1xuICAgIGxldCBtZXRob2RzID0gPGFueVtdPltdO1xuICAgIGxldCBwcm9wZXJ0aWVzID0gPGFueVtdPltdO1xuXG4gICAgZm9yIChsZXQgbWVtYmVyIG9mIG1lbWJlcnMpIHtcbiAgICAgIGlmICh0eXBlb2YgKDxhbnk+cGxheWVyKVttZW1iZXJdID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIG1ldGhvZHMucHVzaChtZW1iZXIpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcHJvcGVydGllcy5wdXNoKG1lbWJlcik7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gQ3JlYXRlIHdyYXBwZXIgb2JqZWN0XG4gICAgbGV0IHdyYXBwZXIgPSA8YW55Pnt9O1xuXG4gICAgLy8gQWRkIGZ1bmN0aW9uIHdyYXBwZXJzIGZvciBhbGwgQVBJIG1ldGhvZHMgdGhhdCBkbyBub3RoaW5nIGJ1dCBjYWxsaW5nIHRoZSBiYXNlIG1ldGhvZCBvbiB0aGUgcGxheWVyXG4gICAgZm9yIChsZXQgbWV0aG9kIG9mIG1ldGhvZHMpIHtcbiAgICAgIHdyYXBwZXJbbWV0aG9kXSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAvLyBjb25zb2xlLmxvZygnY2FsbGVkICcgKyBtZW1iZXIpOyAvLyB0cmFjayBtZXRob2QgY2FsbHMgb24gdGhlIHBsYXllclxuICAgICAgICByZXR1cm4gKDxhbnk+cGxheWVyKVttZXRob2RdLmFwcGx5KHBsYXllciwgYXJndW1lbnRzKTtcbiAgICAgIH07XG4gICAgfVxuXG4gICAgLy8gQWRkIGFsbCBwdWJsaWMgcHJvcGVydGllcyBvZiB0aGUgcGxheWVyIHRvIHRoZSB3cmFwcGVyXG4gICAgZm9yIChsZXQgcHJvcGVydHkgb2YgcHJvcGVydGllcykge1xuICAgICAgLy8gR2V0IGFuIGV2ZW50dWFsbHkgZXhpc3RpbmcgcHJvcGVydHkgZGVzY3JpcHRvciB0byBkaWZmZXJlbnRpYXRlIGJldHdlZW4gcGxhaW4gcHJvcGVydGllcyBhbmQgcHJvcGVydGllcyB3aXRoXG4gICAgICAvLyBnZXR0ZXJzL3NldHRlcnMuXG4gICAgICBjb25zdCBwcm9wZXJ0eURlc2NyaXB0b3IgPSAoKHRhcmdldDogUGxheWVyQVBJKSA9PiB7XG4gICAgICAgIHdoaWxlICh0YXJnZXQpIHtcbiAgICAgICAgICBjb25zdCBwcm9wZXJ0eURlc2NyaXB0b3IgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwgcHJvcGVydHkpO1xuICAgICAgICAgIGlmIChwcm9wZXJ0eURlc2NyaXB0b3IpIHtcbiAgICAgICAgICAgIHJldHVybiBwcm9wZXJ0eURlc2NyaXB0b3I7XG4gICAgICAgICAgfVxuICAgICAgICAgIC8vIENoZWNrIGlmIHRoZSBQcm9wZXJ0eURlc2NyaXB0b3IgZXhpc3RzIG9uIGEgY2hpbGQgcHJvdG90eXBlIGluIGNhc2Ugd2UgaGF2ZSBhbiBpbmhlcml0YW5jZSBvZiB0aGUgcGxheWVyXG4gICAgICAgICAgdGFyZ2V0ID0gT2JqZWN0LmdldFByb3RvdHlwZU9mKHRhcmdldCk7XG4gICAgICAgIH1cbiAgICAgIH0pKHBsYXllcik7XG5cbiAgICAgIC8vIElmIHRoZSBwcm9wZXJ0eSBoYXMgZ2V0dGVycy9zZXR0ZXJzLCB3cmFwIHRoZW0gYWNjb3JkaW5nbHkuLi5cbiAgICAgIGlmIChwcm9wZXJ0eURlc2NyaXB0b3IgJiYgKHByb3BlcnR5RGVzY3JpcHRvci5nZXQgfHwgcHJvcGVydHlEZXNjcmlwdG9yLnNldCkpIHtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHdyYXBwZXIsIHByb3BlcnR5LCB7XG4gICAgICAgICAgZ2V0OiAoKSA9PiBwcm9wZXJ0eURlc2NyaXB0b3IuZ2V0LmNhbGwocGxheWVyKSxcbiAgICAgICAgICBzZXQ6ICh2YWx1ZTogYW55KSA9PiBwcm9wZXJ0eURlc2NyaXB0b3Iuc2V0LmNhbGwocGxheWVyLCB2YWx1ZSksXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgLy8gLi4uIGVsc2UganVzdCB0cmFuc2ZlciB0aGUgcHJvcGVydHkgdG8gdGhlIHdyYXBwZXJcbiAgICAgIGVsc2Uge1xuICAgICAgICB3cmFwcGVyW3Byb3BlcnR5XSA9ICg8YW55PnBsYXllcilbcHJvcGVydHldO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIEV4cGxpY2l0bHkgYWRkIGEgd3JhcHBlciBtZXRob2QgZm9yICdvbicgdGhhdCBhZGRzIGFkZGVkIGV2ZW50IGhhbmRsZXJzIHRvIHRoZSBldmVudCBsaXN0XG4gICAgd3JhcHBlci5vbiA9IChldmVudFR5cGU6IFBsYXllckV2ZW50LCBjYWxsYmFjazogUGxheWVyRXZlbnRDYWxsYmFjaykgPT4ge1xuICAgICAgcGxheWVyLm9uKGV2ZW50VHlwZSwgY2FsbGJhY2spO1xuXG4gICAgICBpZiAoIXRoaXMuZXZlbnRIYW5kbGVyc1tldmVudFR5cGVdKSB7XG4gICAgICAgIHRoaXMuZXZlbnRIYW5kbGVyc1tldmVudFR5cGVdID0gW107XG4gICAgICB9XG5cbiAgICAgIHRoaXMuZXZlbnRIYW5kbGVyc1tldmVudFR5cGVdLnB1c2goY2FsbGJhY2spO1xuXG4gICAgICByZXR1cm4gd3JhcHBlcjtcbiAgICB9O1xuXG4gICAgLy8gRXhwbGljaXRseSBhZGQgYSB3cmFwcGVyIG1ldGhvZCBmb3IgJ29mZicgdGhhdCByZW1vdmVzIHJlbW92ZWQgZXZlbnQgaGFuZGxlcnMgZnJvbSB0aGUgZXZlbnQgbGlzdFxuICAgIHdyYXBwZXIub2ZmID0gKGV2ZW50VHlwZTogUGxheWVyRXZlbnQsIGNhbGxiYWNrOiBQbGF5ZXJFdmVudENhbGxiYWNrKSA9PiB7XG4gICAgICBwbGF5ZXIub2ZmKGV2ZW50VHlwZSwgY2FsbGJhY2spO1xuXG4gICAgICBpZiAodGhpcy5ldmVudEhhbmRsZXJzW2V2ZW50VHlwZV0pIHtcbiAgICAgICAgQXJyYXlVdGlscy5yZW1vdmUodGhpcy5ldmVudEhhbmRsZXJzW2V2ZW50VHlwZV0sIGNhbGxiYWNrKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHdyYXBwZXI7XG4gICAgfTtcblxuICAgIHdyYXBwZXIuZmlyZUV2ZW50SW5VSSA9IChldmVudDogUGxheWVyRXZlbnQsIGRhdGE6IHt9KSA9PiB7XG4gICAgICBpZiAodGhpcy5ldmVudEhhbmRsZXJzW2V2ZW50XSkgeyAvLyBjaGVjayBpZiB0aGVyZSBhcmUgaGFuZGxlcnMgZm9yIHRoaXMgZXZlbnQgcmVnaXN0ZXJlZFxuICAgICAgICAvLyBFeHRlbmQgdGhlIGRhdGEgb2JqZWN0IHdpdGggZGVmYXVsdCB2YWx1ZXMgdG8gY29udmVydCBpdCB0byBhIHtAbGluayBQbGF5ZXJFdmVudEJhc2V9IG9iamVjdC5cbiAgICAgICAgbGV0IHBsYXllckV2ZW50RGF0YSA9IDxQbGF5ZXJFdmVudEJhc2U+T2JqZWN0LmFzc2lnbih7fSwge1xuICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKSxcbiAgICAgICAgICB0eXBlOiBldmVudCxcbiAgICAgICAgICAvLyBBZGQgYSBtYXJrZXIgcHJvcGVydHkgc28gdGhlIFVJIGNhbiBkZXRlY3QgVUktaW50ZXJuYWwgcGxheWVyIGV2ZW50c1xuICAgICAgICAgIHVpU291cmNlZDogdHJ1ZSxcbiAgICAgICAgfSwgZGF0YSk7XG5cbiAgICAgICAgLy8gRXhlY3V0ZSB0aGUgcmVnaXN0ZXJlZCBjYWxsYmFja3NcbiAgICAgICAgZm9yIChsZXQgY2FsbGJhY2sgb2YgdGhpcy5ldmVudEhhbmRsZXJzW2V2ZW50XSkge1xuICAgICAgICAgIGNhbGxiYWNrKHBsYXllckV2ZW50RGF0YSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuXG4gICAgdGhpcy53cmFwcGVyID0gPFdyYXBwZWRQbGF5ZXI+d3JhcHBlcjtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgd3JhcHBlZCBwbGF5ZXIgb2JqZWN0IHRoYXQgY2FuIGJlIHVzZWQgb24gcGxhY2Ugb2YgdGhlIG5vcm1hbCBwbGF5ZXIgb2JqZWN0LlxuICAgKiBAcmV0dXJucyB7V3JhcHBlZFBsYXllcn0gYSB3cmFwcGVkIHBsYXllclxuICAgKi9cbiAgZ2V0UGxheWVyKCk6IFdyYXBwZWRQbGF5ZXIge1xuICAgIHJldHVybiB0aGlzLndyYXBwZXI7XG4gIH1cblxuICAvKipcbiAgICogQ2xlYXJzIGFsbCByZWdpc3RlcmVkIGV2ZW50IGhhbmRsZXJzIGZyb20gdGhlIHBsYXllciB0aGF0IHdlcmUgYWRkZWQgdGhyb3VnaCB0aGUgd3JhcHBlZCBwbGF5ZXIuXG4gICAqL1xuICBjbGVhckV2ZW50SGFuZGxlcnMoKTogdm9pZCB7XG4gICAgdHJ5IHtcbiAgICAgIC8vIENhbGwgdGhlIHBsYXllciBBUEkgdG8gY2hlY2sgaWYgdGhlIGluc3RhbmNlIGlzIHN0aWxsIHZhbGlkIG9yIGFscmVhZHkgZGVzdHJveWVkLlxuICAgICAgLy8gVGhpcyBjYW4gYmUgYW55IGNhbGwgdGhyb3dpbmcgdGhlIFBsYXllckFQSU5vdEF2YWlsYWJsZUVycm9yIHdoZW4gdGhlIHBsYXllciBpbnN0YW5jZSBpcyBkZXN0cm95ZWQuXG4gICAgICB0aGlzLnBsYXllci5nZXRTb3VyY2UoKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgdGhpcy5wbGF5ZXIuZXhwb3J0cy5QbGF5ZXJBUElOb3RBdmFpbGFibGVFcnJvcikge1xuICAgICAgICAvLyBXZSBoYXZlIGRldGVjdGVkIHRoYXQgdGhlIHBsYXllciBpbnN0YW5jZSBpcyBhbHJlYWR5IGRlc3Ryb3llZCwgc28gd2UgY2xlYXIgdGhlIGV2ZW50IGhhbmRsZXJzIHRvIGF2b2lkXG4gICAgICAgIC8vIGV2ZW50IGhhbmRsZXIgdW5zdWJzY3JpcHRpb24gYXR0ZW1wdHMgKHdoaWNoIHdvdWxkIHJlc3VsdCBpbiBQbGF5ZXJBUElOb3RBdmFpbGFibGVFcnJvciBlcnJvcnMpLlxuICAgICAgICB0aGlzLmV2ZW50SGFuZGxlcnMgPSB7fTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmb3IgKGxldCBldmVudFR5cGUgaW4gdGhpcy5ldmVudEhhbmRsZXJzKSB7XG4gICAgICBmb3IgKGxldCBjYWxsYmFjayBvZiB0aGlzLmV2ZW50SGFuZGxlcnNbZXZlbnRUeXBlXSkge1xuICAgICAgICB0aGlzLnBsYXllci5vZmYoZXZlbnRUeXBlIGFzIFBsYXllckV2ZW50LCBjYWxsYmFjayk7XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIGdldEFsbFByb3BlcnR5TmFtZXModGFyZ2V0OiBPYmplY3QpOiBzdHJpbmdbXSB7XG4gIGxldCBuYW1lczogc3RyaW5nW10gPSBbXTtcblxuICB3aGlsZSAodGFyZ2V0KSB7XG4gICAgY29uc3QgbmV3TmFtZXMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyh0YXJnZXQpLmZpbHRlcihuYW1lID0+IG5hbWVzLmluZGV4T2YobmFtZSkgPT09IC0xKTtcbiAgICBuYW1lcyA9IG5hbWVzLmNvbmNhdChuZXdOYW1lcyk7XG4gICAgLy8gZ28gdXAgcHJvdG90eXBlIGNoYWluXG4gICAgdGFyZ2V0ID0gT2JqZWN0LmdldFByb3RvdHlwZU9mKHRhcmdldCk7XG4gIH1cblxuICByZXR1cm4gbmFtZXM7XG59XG4iLCJpbXBvcnQge0NvbXBvbmVudCwgQ29tcG9uZW50Q29uZmlnfSBmcm9tICcuL2NvbXBvbmVudHMvY29tcG9uZW50JztcbmltcG9ydCB7Q29udGFpbmVyfSBmcm9tICcuL2NvbXBvbmVudHMvY29udGFpbmVyJztcblxuLyoqXG4gKiBAY2F0ZWdvcnkgVXRpbHNcbiAqL1xuZXhwb3J0IG5hbWVzcGFjZSBVSVV0aWxzIHtcbiAgZXhwb3J0IGludGVyZmFjZSBUcmVlVHJhdmVyc2FsQ2FsbGJhY2sge1xuICAgIChjb21wb25lbnQ6IENvbXBvbmVudDxDb21wb25lbnRDb25maWc+LCBwYXJlbnQ/OiBDb21wb25lbnQ8Q29tcG9uZW50Q29uZmlnPik6IHZvaWQ7XG4gIH1cblxuICBleHBvcnQgZnVuY3Rpb24gdHJhdmVyc2VUcmVlKGNvbXBvbmVudDogQ29tcG9uZW50PENvbXBvbmVudENvbmZpZz4sIHZpc2l0OiBUcmVlVHJhdmVyc2FsQ2FsbGJhY2spOiB2b2lkIHtcbiAgICBsZXQgcmVjdXJzaXZlVHJlZVdhbGtlciA9IChjb21wb25lbnQ6IENvbXBvbmVudDxDb21wb25lbnRDb25maWc+LCBwYXJlbnQ/OiBDb21wb25lbnQ8Q29tcG9uZW50Q29uZmlnPikgPT4ge1xuICAgICAgdmlzaXQoY29tcG9uZW50LCBwYXJlbnQpO1xuXG4gICAgICAvLyBJZiB0aGUgY3VycmVudCBjb21wb25lbnQgaXMgYSBjb250YWluZXIsIHZpc2l0IGl0J3MgY2hpbGRyZW5cbiAgICAgIGlmIChjb21wb25lbnQgaW5zdGFuY2VvZiBDb250YWluZXIpIHtcbiAgICAgICAgZm9yIChsZXQgY2hpbGRDb21wb25lbnQgb2YgY29tcG9uZW50LmdldENvbXBvbmVudHMoKSkge1xuICAgICAgICAgIHJlY3Vyc2l2ZVRyZWVXYWxrZXIoY2hpbGRDb21wb25lbnQsIGNvbXBvbmVudCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuXG4gICAgLy8gV2FsayBhbmQgY29uZmlndXJlIHRoZSBjb21wb25lbnQgdHJlZVxuICAgIHJlY3Vyc2l2ZVRyZWVXYWxrZXIoY29tcG9uZW50KTtcbiAgfVxuXG4gIC8vIEZyb206IGh0dHBzOi8vZ2l0aHViLmNvbS9uZnJpZW5kL3RzLWtleWNvZGUtZW51bS9ibG9iL21hc3Rlci9LZXkuZW51bS50c1xuICBleHBvcnQgZW51bSBLZXlDb2RlIHtcbiAgICBMZWZ0QXJyb3cgPSAzNyxcbiAgICBVcEFycm93ID0gMzgsXG4gICAgUmlnaHRBcnJvdyA9IDM5LFxuICAgIERvd25BcnJvdyA9IDQwLFxuICAgIFNwYWNlID0gMzIsXG4gICAgRW5kID0gMzUsXG4gICAgSG9tZSA9IDM2LFxuICB9XG59XG4iLCJpbXBvcnQgeyBFdmVudCwgRXZlbnREaXNwYXRjaGVyIH0gZnJvbSAnLi9ldmVudGRpc3BhdGNoZXInO1xuaW1wb3J0IHsgUGxheWVyQVBJIH0gZnJvbSAnYml0bW92aW4tcGxheWVyJztcblxuZXhwb3J0IGludGVyZmFjZSBWb2x1bWVTZXR0aW5nQ2hhbmdlZEFyZ3Mge1xuICB2b2x1bWU6IG51bWJlcjtcbiAgbXV0ZWQ6IGJvb2xlYW47XG59XG5cbi8qKlxuICogQ2FuIGJlIHVzZWQgdG8gY2VudHJhbGx5IG1hbmFnZSBhbmQgY29udHJvbCB0aGUgdm9sdW1lIGFuZCBtdXRlIHN0YXRlIG9mIHRoZSBwbGF5ZXIgZnJvbSBtdWx0aXBsZSBjb21wb25lbnRzLlxuICovXG5leHBvcnQgY2xhc3MgVm9sdW1lQ29udHJvbGxlciB7XG5cbiAgcHJpdmF0ZSBzdGF0aWMgcmVhZG9ubHkgaXNzdWVyTmFtZSA9ICd1aS12b2x1bWVjb250cm9sbGVyJztcblxuICBwcml2YXRlIHJlYWRvbmx5IGV2ZW50cyA9IHtcbiAgICBvbkNoYW5nZWQ6IG5ldyBFdmVudERpc3BhdGNoZXI8Vm9sdW1lQ29udHJvbGxlciwgVm9sdW1lU2V0dGluZ0NoYW5nZWRBcmdzPigpLFxuICB9O1xuXG4gIHByaXZhdGUgc3RvcmVkVm9sdW1lOiBudW1iZXI7XG5cbiAgY29uc3RydWN0b3IocHJpdmF0ZSByZWFkb25seSBwbGF5ZXI6IFBsYXllckFQSSkge1xuICAgIHRoaXMuc3RvcmVWb2x1bWUoKTtcblxuICAgIGNvbnN0IGhhbmRsZXIgPSAoKSA9PiB7XG4gICAgICB0aGlzLm9uQ2hhbmdlZEV2ZW50KCk7XG4gICAgfTtcblxuICAgIHBsYXllci5vbihwbGF5ZXIuZXhwb3J0cy5QbGF5ZXJFdmVudC5Tb3VyY2VMb2FkZWQsIGhhbmRsZXIpO1xuICAgIHBsYXllci5vbihwbGF5ZXIuZXhwb3J0cy5QbGF5ZXJFdmVudC5Wb2x1bWVDaGFuZ2VkLCBoYW5kbGVyKTtcbiAgICBwbGF5ZXIub24ocGxheWVyLmV4cG9ydHMuUGxheWVyRXZlbnQuTXV0ZWQsIGhhbmRsZXIpO1xuICAgIHBsYXllci5vbihwbGF5ZXIuZXhwb3J0cy5QbGF5ZXJFdmVudC5Vbm11dGVkLCBoYW5kbGVyKTtcbiAgfVxuXG4gIHNldFZvbHVtZSh2b2x1bWU6IG51bWJlcik6IHZvaWQge1xuICAgIHRoaXMucGxheWVyLnNldFZvbHVtZSh2b2x1bWUsIFZvbHVtZUNvbnRyb2xsZXIuaXNzdWVyTmFtZSk7XG4gIH1cblxuICBnZXRWb2x1bWUoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5wbGF5ZXIuZ2V0Vm9sdW1lKCk7XG4gIH1cblxuICBzZXRNdXRlZChtdXRlZDogYm9vbGVhbik6IHZvaWQge1xuICAgIGlmIChtdXRlZCkge1xuICAgICAgdGhpcy5wbGF5ZXIubXV0ZShWb2x1bWVDb250cm9sbGVyLmlzc3Vlck5hbWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnBsYXllci51bm11dGUoVm9sdW1lQ29udHJvbGxlci5pc3N1ZXJOYW1lKTtcbiAgICB9XG4gIH1cblxuICB0b2dnbGVNdXRlZCgpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5pc011dGVkKCkgfHwgdGhpcy5nZXRWb2x1bWUoKSA9PT0gMCkge1xuICAgICAgLy8gVW5tdXRpbmcgZnJvbSB0aGUgbXV0ZSBvciB6ZXJvLXZvbHVtZSBzdGF0ZSByZWNhbGxzIHRoZSBwcmV2aW91c2x5IHNhdmVkIHZvbHVtZSBzZXR0aW5nLiBTZXR0aW5nIHRoZVxuICAgICAgLy8gdm9sdW1lIGF1dG9tYXRpY2FsbHkgdW5tdXRlcyB0aGUgcGxheWVyIGluIHY3LlxuICAgICAgdGhpcy5yZWNhbGxWb2x1bWUoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5zZXRNdXRlZCh0cnVlKTtcbiAgICB9XG4gIH1cblxuICBpc011dGVkKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLnBsYXllci5pc011dGVkKCk7XG4gIH1cblxuICAvKipcbiAgICogU3RvcmVzIChzYXZlcykgdGhlIGN1cnJlbnQgdm9sdW1lIHNvIGl0IGNhbiBsYXRlciBiZSByZXN0b3JlZCB3aXRoIHtAbGluayByZWNhbGxWb2x1bWV9LlxuICAgKi9cbiAgc3RvcmVWb2x1bWUoKTogdm9pZCB7XG4gICAgdGhpcy5zdG9yZWRWb2x1bWUgPSB0aGlzLmdldFZvbHVtZSgpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlY2FsbHMgKHNldHMpIHRoZSB2b2x1bWUgcHJldmlvdXNseSBzdG9yZWQgd2l0aCB7QGxpbmsgc3RvcmVWb2x1bWV9LlxuICAgKi9cbiAgcmVjYWxsVm9sdW1lKCk6IHZvaWQge1xuICAgIHRoaXMuc2V0TXV0ZWQodGhpcy5zdG9yZWRWb2x1bWUgPT09IDApO1xuICAgIHRoaXMuc2V0Vm9sdW1lKHRoaXMuc3RvcmVkVm9sdW1lKTtcbiAgfVxuXG4gIHN0YXJ0VHJhbnNpdGlvbigpOiBWb2x1bWVUcmFuc2l0aW9uIHtcbiAgICByZXR1cm4gbmV3IFZvbHVtZVRyYW5zaXRpb24odGhpcyk7XG4gIH1cblxuICBvbkNoYW5nZWRFdmVudCgpIHtcbiAgICBjb25zdCBwbGF5ZXJNdXRlZCA9IHRoaXMuaXNNdXRlZCgpO1xuICAgIGNvbnN0IHBsYXllclZvbHVtZSA9IHRoaXMuZ2V0Vm9sdW1lKCk7XG5cbiAgICBjb25zdCB1aU11dGVkID0gcGxheWVyTXV0ZWQgfHwgcGxheWVyVm9sdW1lID09PSAwO1xuICAgIGNvbnN0IHVpVm9sdW1lID0gcGxheWVyTXV0ZWQgPyAwIDogcGxheWVyVm9sdW1lO1xuXG4gICAgdGhpcy5zdG9yZVZvbHVtZSgpO1xuXG4gICAgdGhpcy5ldmVudHMub25DaGFuZ2VkLmRpc3BhdGNoKHRoaXMsIHsgdm9sdW1lOiB1aVZvbHVtZSwgbXV0ZWQ6IHVpTXV0ZWQgfSk7XG4gIH1cblxuICAvKipcbiAgICogR2V0cyB0aGUgZXZlbnQgdGhhdCBpcyBmaXJlZCB3aGVuIHRoZSB2b2x1bWUgc2V0dGluZ3MgaGF2ZSBjaGFuZ2VkLlxuICAgKi9cbiAgZ2V0IG9uQ2hhbmdlZCgpOiBFdmVudDxWb2x1bWVDb250cm9sbGVyLCBWb2x1bWVTZXR0aW5nQ2hhbmdlZEFyZ3M+IHtcbiAgICByZXR1cm4gdGhpcy5ldmVudHMub25DaGFuZ2VkLmdldEV2ZW50KCk7XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIFZvbHVtZVRyYW5zaXRpb24ge1xuXG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgY29udHJvbGxlcjogVm9sdW1lQ29udHJvbGxlcikge1xuICAgIC8vIFN0b3JlIHRoZSB2b2x1bWUgYXQgdGhlIGJlZ2lubmluZyBvZiBhIHZvbHVtZSBjaGFuZ2Ugc28gd2UgY2FuIHJlY2FsbCBpdCBsYXRlciBpbiBjYXNlIHdlIHNldCB0aGUgdm9sdW1lIHRvXG4gICAgLy8gemVybyBhbmQgYWN0dWFsbHkgbXV0ZSB0aGUgcGxheWVyLlxuICAgIGNvbnRyb2xsZXIuc3RvcmVWb2x1bWUoKTtcbiAgfVxuXG4gIHVwZGF0ZSh2b2x1bWU6IG51bWJlcik6IHZvaWQge1xuICAgIC8vIFVwZGF0ZSB0aGUgdm9sdW1lIHdoaWxlIHRyYW5zaXRpb25pbmcgc28gdGhlIHVzZXIgaGFzIGEgXCJsaXZlIHByZXZpZXdcIiBvZiB0aGUgZGVzaXJlZCB0YXJnZXQgdm9sdW1lXG4gICAgdGhpcy5jb250cm9sbGVyLnNldE11dGVkKGZhbHNlKTtcbiAgICB0aGlzLmNvbnRyb2xsZXIuc2V0Vm9sdW1lKHZvbHVtZSk7XG4gIH1cblxuICBmaW5pc2godm9sdW1lOiBudW1iZXIpOiB2b2lkIHtcbiAgICBpZiAodm9sdW1lID09PSAwKSB7XG4gICAgICAvLyBXaGVuIHRoZSB2b2x1bWUgaXMgemVybyB3ZSBlc3NlbnRpYWxseSBtdXRlIHRoZSB2b2x1bWUgc28gd2UgcmVjYWxsIHRoZSB2b2x1bWUgZnJvbSB0aGUgYmVnaW5uaW5nIG9mIHRoZVxuICAgICAgLy8gdHJhbnNpdGlvbiBhbmQgbXV0ZSB0aGUgcGxheWVyIGluc3RlYWQuIFJlY2FsbGluZyBpcyBuZWNlc3NhcnkgdG8gcmV0dXJuIHRvIHRoZSBhY3R1YWwgYXVkaW8gdm9sdW1lXG4gICAgICAvLyB3aGVuIHVubXV0aW5nLlxuICAgICAgLy8gV2UgbXVzdCBmaXJzdCByZWNhbGwgdGhlIHZvbHVtZSBhbmQgdGhlbiBtdXRlLCBiZWNhdXNlIHJlY2FsbGluZyBzZXRzIHRoZSB2b2x1bWUgb24gdGhlIHBsYXllclxuICAgICAgLy8gYW5kIHNldHRpbmcgYSBwbGF5ZXIgdm9sdW1lID4gMCB1bm11dGVzIHRoZSBwbGF5ZXIgaW4gdjcuXG4gICAgICB0aGlzLmNvbnRyb2xsZXIucmVjYWxsVm9sdW1lKCk7XG4gICAgICB0aGlzLmNvbnRyb2xsZXIuc2V0TXV0ZWQodHJ1ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuY29udHJvbGxlci5zZXRNdXRlZChmYWxzZSk7XG4gICAgICB0aGlzLmNvbnRyb2xsZXIuc2V0Vm9sdW1lKHZvbHVtZSk7XG4gICAgICB0aGlzLmNvbnRyb2xsZXIuc3RvcmVWb2x1bWUoKTtcbiAgICB9XG4gIH1cbn0iLCJpbXBvcnQgeyBTdWJ0aXRsZVJlZ2lvbkNvbnRhaW5lciwgU3VidGl0bGVMYWJlbCB9IGZyb20gJy4vY29tcG9uZW50cy9zdWJ0aXRsZW92ZXJsYXknO1xuaW1wb3J0IHsgVlRUUHJvcGVydGllcywgVlRUUmVnaW9uUHJvcGVydGllcyB9IGZyb20gJ2JpdG1vdmluLXBsYXllci90eXBlcy9zdWJ0aXRsZXMvdnR0L0FQSSc7XG5pbXBvcnQgeyBET00sIFNpemUgfSBmcm9tICcuL2RvbSc7XG5cbi8vIE91ciBkZWZhdWx0IGhlaWdodCBvZiBhIGxpbmVcbmNvbnN0IGxpbmVIZWlnaHQgPSAyODtcblxuLy8gRGVmYXVsdCByZWxhdGl2ZSBsaW5lIGhlaWdodFxuY29uc3QgbGluZUhlaWdodFBlcmNlbnQgPSA1O1xubGV0IGxpbmVDb3VudDogbnVtYmVyID0gMTtcblxuY29uc3QgZGVmYXVsdExpbmVOdW1iZXIgPSAyMTsgLy8gT3VyIGRlZmF1bHQgYW1vdW50IG9mIGxpbmVzXG5cbmVudW0gRGlyZWN0aW9uIHtcbiAgVG9wID0gJ3RvcCcsXG4gIEJvdHRvbSA9ICdib3R0b20nLFxuICBMZWZ0ID0gJ2xlZnQnLFxuICBSaWdodCA9ICdyaWdodCcsXG59XG5cbmVudW0gVnR0VmVydGljYWxXcml0aW5nIHtcbiAgR3Jvd2luZ1JpZ2h0ID0gJ2xyJyxcbiAgR3Jvd2luZ0xlZnQgPSAncmwnLFxufVxuXG50eXBlIFZlcnRpY2FsV3JpdGluZ0RpcmVjdGlvbiA9IERpcmVjdGlvbi5MZWZ0IHwgRGlyZWN0aW9uLlJpZ2h0O1xuXG5jb25zdCBEaXJlY3Rpb25QYWlyID0gbmV3IE1hcDxEaXJlY3Rpb24sIERpcmVjdGlvbj4oW1xuICBbRGlyZWN0aW9uLlRvcCwgRGlyZWN0aW9uLkJvdHRvbV0sXG4gIFtEaXJlY3Rpb24uQm90dG9tLCBEaXJlY3Rpb24uVG9wXSxcbiAgW0RpcmVjdGlvbi5MZWZ0LCBEaXJlY3Rpb24uUmlnaHRdLFxuICBbRGlyZWN0aW9uLlJpZ2h0LCBEaXJlY3Rpb24uTGVmdF0sXG5dKTtcblxuLyoqXG4gKiBTZXRzIHRoZSBkZWZhdWx0IHN0YW5kYXJkaXplZCBzdHlsZXMgZm9yIHRoZSBDdWUgQm94XG4gKiBodHRwczovL3czLm9yZy9UUi93ZWJ2dHQxLyNhcHBseWluZy1jc3MtcHJvcGVydGllc1xuICovXG5jb25zdCBzZXREZWZhdWx0VnR0U3R5bGVzID0gKGN1ZUNvbnRhaW5lckRvbTogRE9NLCB2dHQ6IFZUVFByb3BlcnRpZXMpID0+IHtcbiAgaWYgKHZ0dC5yZWdpb24pIHtcbiAgICBjdWVDb250YWluZXJEb20uY3NzKCdwb3NpdGlvbicsICdyZWxhdGl2ZScpO1xuICAgIGN1ZUNvbnRhaW5lckRvbS5jc3MoJ3VuaWNvZGUtYmlkaScsICdwbGFpbnRleHQnKTtcbiAgfSBlbHNlIHtcbiAgICBjdWVDb250YWluZXJEb20uY3NzKCdwb3NpdGlvbicsICdhYnNvbHV0ZScpO1xuICAgIGN1ZUNvbnRhaW5lckRvbS5jc3MoJ292ZXJmbG93LXdyYXAnLCAnYnJlYWstd29yZCcpO1xuICAgIGN1ZUNvbnRhaW5lckRvbS5jc3MoJ292ZXJmbG93JywgJ2hpZGRlbicpO1xuICAgIGN1ZUNvbnRhaW5lckRvbS5jc3MoJ2ZsZXgtZmxvdycsICdjb2x1bW4nKTtcbiAgfVxuICBjdWVDb250YWluZXJEb20uY3NzKCdkaXNwbGF5JywgJ2lubGluZS1mbGV4Jyk7XG59O1xuXG4vKipcbiAqIEFsaWduIHRoZSBDdWUgQm94J3MgbGluZVxuICogaHR0cHM6Ly93My5vcmcvVFIvd2VidnR0MS8jd2VidnR0LWN1ZS1saW5lLWFsaWdubWVudFxuICovXG5jb25zdCBzZXRWdHRMaW5lQWxpZ24gPSAoXG4gIGN1ZUNvbnRhaW5lckRvbTogRE9NLFxuICB7IGxpbmVBbGlnbiB9OiBWVFRQcm9wZXJ0aWVzLFxuICBkaXJlY3Rpb246IERpcmVjdGlvbixcbiAgcmVsYXRpdmVDdWVCb3hQb3NpdGlvbjogbnVtYmVyKSA9PiB7XG4gIHN3aXRjaCAobGluZUFsaWduKSB7XG4gICAgY2FzZSAnY2VudGVyJzpcbiAgICAgIHNldENzc0ZvckNlbnRlckxpbmVBbGlnbihcbiAgICAgICAgY3VlQ29udGFpbmVyRG9tLCBkaXJlY3Rpb24sIHJlbGF0aXZlQ3VlQm94UG9zaXRpb24pO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSAnZW5kJzpcbiAgICAgIHNldENzc0ZvckVuZExpbmVBbGlnbihcbiAgICAgICAgY3VlQ29udGFpbmVyRG9tLCBkaXJlY3Rpb24sIHJlbGF0aXZlQ3VlQm94UG9zaXRpb24pO1xuICB9XG59O1xuXG4vKipcbiAqIERlZmluZXMgdGhlIGxpbmUgcG9zaXRpb25pbmcgb2YgdGhlIEN1ZSBCb3hcbiAqIGh0dHBzOi8vdzMub3JnL1RSL3dlYnZ0dDEvI3dlYnZ0dC1jdWUtbGluZVxuICovXG5jb25zdCBzZXRWdHRMaW5lID0gKFxuICBjdWVDb250YWluZXJEb206IERPTSxcbiAgdnR0OiBWVFRQcm9wZXJ0aWVzLFxuICBkaXJlY3Rpb246IERpcmVjdGlvbixcbiAgc3VidGl0bGVPdmVyTGF5U2l6ZTogU2l6ZSxcbikgPT4ge1xuICBjb25zdCBvdmVybGF5UmVmZXJlbmNlRWRnZSA9IERpcmVjdGlvblBhaXIuZ2V0KGRpcmVjdGlvbik7XG4gIGlmICh2dHQubGluZSA9PT0gJ2F1dG8nICYmIHZ0dC52ZXJ0aWNhbCkge1xuICAgIGN1ZUNvbnRhaW5lckRvbS5jc3Mob3ZlcmxheVJlZmVyZW5jZUVkZ2UsICcwJyk7XG4gICAgcmV0dXJuO1xuICB9XG4gIGlmICh2dHQubGluZSA9PT0gJ2F1dG8nICYmICF2dHQudmVydGljYWwpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBsZXQgcmVsYXRpdmVMaW5lUG9zaXRpb24gPSBwYXJzZUZsb2F0KHZ0dC5saW5lIGFzIHN0cmluZyk7XG5cbiAgaWYgKHZ0dC5zbmFwVG9MaW5lcykge1xuICAgIGxldCB0YXJnZXRMaW5lID0gTnVtYmVyKHZ0dC5saW5lKTtcbiAgICBpZiAodGFyZ2V0TGluZSA8IDApIHtcbiAgICAgIHRhcmdldExpbmUgPSBkZWZhdWx0TGluZU51bWJlciArIHRhcmdldExpbmU7XG4gICAgfVxuXG4gICAgY29uc3QgbGluZUhlaWdodCA9IHN1YnRpdGxlT3ZlckxheVNpemUuaGVpZ2h0IC8gZGVmYXVsdExpbmVOdW1iZXI7XG4gICAgY29uc3QgYWJzb2x1dGVMaW5lUG9zaXRpb24gPSBsaW5lSGVpZ2h0ICogdGFyZ2V0TGluZTtcbiAgICByZWxhdGl2ZUxpbmVQb3NpdGlvbiA9ICgxMDAgKiBhYnNvbHV0ZUxpbmVQb3NpdGlvbikgLyBzdWJ0aXRsZU92ZXJMYXlTaXplLmhlaWdodDtcbiAgfVxuXG4gIGlmICh2dHQubGluZUFsaWduICE9PSAnZW5kJylcbiAgICBjdWVDb250YWluZXJEb20uY3NzKFxuICAgICAgb3ZlcmxheVJlZmVyZW5jZUVkZ2UsIGAke3JlbGF0aXZlTGluZVBvc2l0aW9ufSVgKTtcbiAgc2V0VnR0TGluZUFsaWduKGN1ZUNvbnRhaW5lckRvbSwgdnR0LCBkaXJlY3Rpb24sIHJlbGF0aXZlTGluZVBvc2l0aW9uKTtcbn07XG5cbi8qKlxuICogRGVmaW5lcyB0aGUgd3JpdGluZyBkaXJlY3Rpb24gb2YgdGhlIEN1ZSBCb3hcbiAqIGh0dHBzOi8vdzMub3JnL1RSL3dlYnZ0dDEvI3dlYnZ0dC1jdWUtd3JpdGluZy1kaXJlY3Rpb25cbiAqL1xuY29uc3Qgc2V0VnR0V3JpdGluZ0RpcmVjdGlvbkFuZEN1ZUJveFBvc2l0aW9uaW5nID0gKFxuICBjdWVDb250YWluZXJEb206IERPTSwgdnR0OiBWVFRQcm9wZXJ0aWVzLFxuICBzdWJ0aXRsZU92ZXJsYXlTaXplOiBTaXplLFxuKSA9PiB7XG4gIHN3aXRjaCAodnR0LnZlcnRpY2FsKSB7XG4gIGNhc2UgJyc6XG4gICAgY3VlQ29udGFpbmVyRG9tLmNzcygnd3JpdGluZy1tb2RlJywgJ2hvcml6b250YWwtdGInKTtcbiAgICBjdWVDb250YWluZXJEb20uY3NzKERpcmVjdGlvbi5Cb3R0b20sICcwJyk7XG4gICAgc2V0VnR0TGluZShjdWVDb250YWluZXJEb20sIHZ0dCwgRGlyZWN0aW9uLkJvdHRvbSwgc3VidGl0bGVPdmVybGF5U2l6ZSk7XG4gICAgYnJlYWs7XG4gIGNhc2UgVnR0VmVydGljYWxXcml0aW5nLkdyb3dpbmdSaWdodDpcbiAgICBzZXRDdWVCb3hQb3NpdGlvbkZvclZlcnRpY2FsV3JpdGluZyhcbiAgICAgIGN1ZUNvbnRhaW5lckRvbSwgRGlyZWN0aW9uLlJpZ2h0LCB2dHQsIHN1YnRpdGxlT3ZlcmxheVNpemUpO1xuICAgIGJyZWFrO1xuICBjYXNlIFZ0dFZlcnRpY2FsV3JpdGluZy5Hcm93aW5nTGVmdDpcbiAgICBzZXRDdWVCb3hQb3NpdGlvbkZvclZlcnRpY2FsV3JpdGluZyhcbiAgICAgIGN1ZUNvbnRhaW5lckRvbSwgRGlyZWN0aW9uLkxlZnQsIHZ0dCwgc3VidGl0bGVPdmVybGF5U2l6ZSk7XG4gICAgYnJlYWs7XG4gIH1cbn07XG5cbmNvbnN0IHNldEN1ZUJveFBvc2l0aW9uRm9yVmVydGljYWxXcml0aW5nID0gKFxuICBjdWVDb250YWluZXJEb206IERPTSxcbiAgZGlyZWN0aW9uOiBWZXJ0aWNhbFdyaXRpbmdEaXJlY3Rpb24sXG4gIHZ0dDogVlRUUHJvcGVydGllcyxcbiAgc3VidGl0bGVPdmVybGF5U2l6ZTogU2l6ZSxcbikgPT4ge1xuICAgIGNvbnN0IHdyaXRpbmdNb2RlID0gZGlyZWN0aW9uID09PSBEaXJlY3Rpb24uUmlnaHQgP1xuICAgICAgJ3ZlcnRpY2FsLWxyJyA6ICd2ZXJ0aWNhbC1ybCc7XG5cbiAgICBjdWVDb250YWluZXJEb20uY3NzKCd3cml0aW5nLW1vZGUnLCB3cml0aW5nTW9kZSk7XG4gICAgY3VlQ29udGFpbmVyRG9tLmNzcyhEaXJlY3Rpb24uVG9wLCAnMCcpO1xuICAgIHNldFZ0dExpbmUoY3VlQ29udGFpbmVyRG9tLCB2dHQsIGRpcmVjdGlvbiwgc3VidGl0bGVPdmVybGF5U2l6ZSk7XG59O1xuXG4vKipcbiAqIERlZmluZXMgdGhlIEN1ZSBwb3NpdGlvbiBhbGlnbm1lbnRcbiAqIGh0dHBzOi8vdzMub3JnL1RSL3dlYnZ0dDEvI3dlYnZ0dC1jdWUtcG9zaXRpb24tYWxpZ25tZW50XG4gKi9cbmNvbnN0IHNldFZ0dFBvc2l0aW9uQWxpZ24gPSAoY3VlQ29udGFpbmVyRG9tOiBET00sIHZ0dDogVlRUUHJvcGVydGllcywgZGlyZWN0aW9uOiBEaXJlY3Rpb24pID0+IHtcbiAgLy8gaHR0cHM6Ly93d3cudzMub3JnL1RSL3dlYnZ0dDEvI3dlYnZ0dC1jdWUtcG9zaXRpb25cbiAgaWYgKHZ0dC5wb3NpdGlvbiA9PT0gJ2F1dG8nKSB7XG4gICAgY3VlQ29udGFpbmVyRG9tLmNzcyhkaXJlY3Rpb24sICcwJyk7XG4gIH0gZWxzZSB7XG4gICAgc3dpdGNoICh2dHQucG9zaXRpb25BbGlnbikge1xuICAgICAgY2FzZSAnbGluZS1sZWZ0JzpcbiAgICAgICAgY3VlQ29udGFpbmVyRG9tLmNzcyhkaXJlY3Rpb24sIGAke3Z0dC5wb3NpdGlvbn0lYCk7XG4gICAgICAgIGN1ZUNvbnRhaW5lckRvbS5jc3MoRGlyZWN0aW9uUGFpci5nZXQoZGlyZWN0aW9uKSwgJ2F1dG8nKTtcbiAgICAgICAgY3VlQ29udGFpbmVyRG9tLmNzcygnanVzdGlmeS1jb250ZW50JywgJ2ZsZXgtc3RhcnQnKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdjZW50ZXInOlxuICAgICAgICBjdWVDb250YWluZXJEb20uY3NzKGRpcmVjdGlvbiwgYCR7dnR0LnBvc2l0aW9uIC0gdnR0LnNpemUgLyAyfSVgKTtcbiAgICAgICAgY3VlQ29udGFpbmVyRG9tLmNzcyhEaXJlY3Rpb25QYWlyLmdldChkaXJlY3Rpb24pLCAnYXV0bycpO1xuICAgICAgICBjdWVDb250YWluZXJEb20uY3NzKCdqdXN0aWZ5LWNvbnRlbnQnLCAnY2VudGVyJyk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnbGluZS1yaWdodCc6XG4gICAgICAgIGN1ZUNvbnRhaW5lckRvbS5jc3MoZGlyZWN0aW9uLCAnYXV0bycpO1xuICAgICAgICBjdWVDb250YWluZXJEb20uY3NzKERpcmVjdGlvblBhaXIuZ2V0KGRpcmVjdGlvbiksIGAkezEwMCAtIHZ0dC5wb3NpdGlvbn0lYCk7XG4gICAgICAgIGN1ZUNvbnRhaW5lckRvbS5jc3MoJ2p1c3RpZnktY29udGVudCcsICdmbGV4LWVuZCcpO1xuICAgICAgICBicmVhaztcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGN1ZUNvbnRhaW5lckRvbS5jc3MoZGlyZWN0aW9uLCBgJHt2dHQucG9zaXRpb259JWApO1xuICAgICAgICBjdWVDb250YWluZXJEb20uY3NzKCdqdXN0aWZ5LWNvbnRlbnQnLCAnZmxleC1zdGFydCcpO1xuICAgIH1cbiAgfVxufTtcblxuY29uc3QgY291bnRMaW5lcyA9IChpbm5lckh0bWw6IHN0cmluZykgPT5cbiAgaW5uZXJIdG1sLnNwbGl0KCc8YnIgLz4nKS5sZW5ndGg7XG5cbmNvbnN0IHNldENzc0ZvckNlbnRlckxpbmVBbGlnbiA9IChcbiAgY3VlQ29udGFpbmVyRG9tOiBET00sXG4gIGRpcmVjdGlvbjogRGlyZWN0aW9uLFxuICByZWxhdGl2ZUN1ZUJveFBvc2l0aW9uOiBudW1iZXIpID0+IHtcbiAgc3dpdGNoIChkaXJlY3Rpb24pIHtcbiAgICBjYXNlIERpcmVjdGlvbi5Cb3R0b206XG4gICAgICBjdWVDb250YWluZXJEb20uY3NzKCd0cmFuc2Zvcm0nLCAndHJhbnNsYXRlWSgtNTAlKScpO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSBEaXJlY3Rpb24uTGVmdDpcbiAgICAgIGN1ZUNvbnRhaW5lckRvbS5jc3MoJ3RyYW5zZm9ybScsICd0cmFuc2xhdGVYKDUwJSknKTtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgRGlyZWN0aW9uLlJpZ2h0OlxuICAgICAgY3VlQ29udGFpbmVyRG9tLmNzcygndHJhbnNmb3JtJywgJ3RyYW5zbGF0ZVgoLTUwJSknKTtcbiAgICAgIGJyZWFrO1xuICB9XG59O1xuXG5jb25zdCBzZXRDc3NGb3JFbmRMaW5lQWxpZ24gPSAoXG4gIGN1ZUNvbnRhaW5lckRvbTogRE9NLFxuICBkaXJlY3Rpb246IERpcmVjdGlvbixcbiAgb2Zmc2V0OiBudW1iZXIpID0+IHtcbiAgICAgIGNvbnN0IG9wb3NpdGVUb092ZXJsYXlSZWZlcmVuY2VFZGdlID0gZGlyZWN0aW9uO1xuICAgICAgY3VlQ29udGFpbmVyRG9tLmNzcyhvcG9zaXRlVG9PdmVybGF5UmVmZXJlbmNlRWRnZSwgYCR7MTAwIC0gb2Zmc2V0fSVgKTtcbn07XG5cbi8qKlxuICogQGNhdGVnb3J5IFV0aWxzXG4gKi9cbmV4cG9ydCBuYW1lc3BhY2UgVnR0VXRpbHMge1xuICBleHBvcnQgY29uc3Qgc2V0VnR0Q3VlQm94U3R5bGVzID0gKFxuICAgIGN1ZUNvbnRhaW5lcjogU3VidGl0bGVMYWJlbCxcbiAgICBzdWJ0aXRsZU92ZXJsYXlTaXplOiBTaXplLFxuICApID0+IHtcbiAgICBjb25zdCB2dHQgPSBjdWVDb250YWluZXIudnR0O1xuICAgIGNvbnN0IGN1ZUNvbnRhaW5lckRvbSA9IGN1ZUNvbnRhaW5lci5nZXREb21FbGVtZW50KCk7XG5cblxuICAgIHNldERlZmF1bHRWdHRTdHlsZXMoY3VlQ29udGFpbmVyRG9tLCB2dHQpO1xuXG4gICAgbGluZUNvdW50ID0gY291bnRMaW5lcyhjdWVDb250YWluZXIuZ2V0VGV4dCgpKTtcbiAgICBzZXRWdHRXcml0aW5nRGlyZWN0aW9uQW5kQ3VlQm94UG9zaXRpb25pbmcoY3VlQ29udGFpbmVyRG9tLCB2dHQsIHN1YnRpdGxlT3ZlcmxheVNpemUpO1xuXG4gICAgLy8gaHR0cHM6Ly93My5vcmcvVFIvd2VidnR0MS8jd2VidnR0LWN1ZS10ZXh0LWFsaWdubWVudFxuICAgIGNvbnN0IHRleHRBbGlnbiA9IHZ0dC5hbGlnbiA9PT0gJ21pZGRsZScgPyAnY2VudGVyJyA6IHZ0dC5hbGlnbjtcbiAgICBjdWVDb250YWluZXJEb20uY3NzKCd0ZXh0LWFsaWduJywgdGV4dEFsaWduKTtcblxuICAgIC8vIGh0dHBzOi8vdzMub3JnL1RSL3dlYnZ0dDEvI3dlYnZ0dC1jdWUtc2l6ZVxuICAgIGNvbnN0IGNvbnRhaW5lclNpemUgPSB2dHQuc2l6ZTtcbiAgICBpZiAodnR0LnZlcnRpY2FsID09PSAnJykge1xuICAgICAgY3VlQ29udGFpbmVyRG9tLmNzcygnd2lkdGgnLCBgJHtjb250YWluZXJTaXplfSVgKTtcbiAgICAgIHNldFZ0dFBvc2l0aW9uQWxpZ24oY3VlQ29udGFpbmVyRG9tLCB2dHQsIERpcmVjdGlvbi5MZWZ0KTtcbiAgICB9IGVsc2Uge1xuICAgICAgY3VlQ29udGFpbmVyRG9tLmNzcygnaGVpZ2h0JywgYCR7Y29udGFpbmVyU2l6ZX0lYCk7XG4gICAgICBzZXRWdHRQb3NpdGlvbkFsaWduKGN1ZUNvbnRhaW5lckRvbSwgdnR0LCBEaXJlY3Rpb24uVG9wKTtcbiAgICB9XG4gIH07XG5cbiAgLyoqIGh0dHBzOi8vd3d3LnczLm9yZy9UUi93ZWJ2dHQxLyNyZWdpb25zXG4gICAqICBodHRwczovL3d3dy5zcGVlY2hwYWQuY29tL2NhcHRpb25zL3dlYnZ0dCN0b2NfMTZcbiAgICovXG4gIGV4cG9ydCBjb25zdCBzZXRWdHRSZWdpb25TdHlsZXMgPSAoXG4gICAgcmVnaW9uQ29udGFpbmVyOiBTdWJ0aXRsZVJlZ2lvbkNvbnRhaW5lcixcbiAgICByZWdpb246IFZUVFJlZ2lvblByb3BlcnRpZXMsXG4gICAgb3ZlcmxheVNpemU6IFNpemUsXG4gICkgPT4ge1xuICAgIGNvbnN0IHJlZ2lvbkNvbnRhaW5lckRvbSA9IHJlZ2lvbkNvbnRhaW5lci5nZXREb21FbGVtZW50KCk7XG4gICAgY29uc3QgcmVnaW9uUG9zaXRpb25YID0gb3ZlcmxheVNpemUud2lkdGggKiByZWdpb24udmlld3BvcnRBbmNob3JYIC8gMTAwIC0gKChvdmVybGF5U2l6ZS53aWR0aCAqIHJlZ2lvbi53aWR0aCAvIDEwMCkgKiByZWdpb24ucmVnaW9uQW5jaG9yWCAvIDEwMCk7XG4gICAgY29uc3QgcmVnaW9uUG9zaXRpb25ZID0gb3ZlcmxheVNpemUuaGVpZ2h0ICogcmVnaW9uLnZpZXdwb3J0QW5jaG9yWSAvIDEwMCAtICgocmVnaW9uLmxpbmVzICogbGluZUhlaWdodCkgKiByZWdpb24ucmVnaW9uQW5jaG9yWSAvIDEwMCk7XG4gICAgcmVnaW9uQ29udGFpbmVyRG9tLmNzcygncG9zaXRpb24nLCAnYWJzb2x1dGUnKTtcbiAgICByZWdpb25Db250YWluZXJEb20uY3NzKCdvdmVyZmxvdycsICdoaWRkZW4nKTtcbiAgICByZWdpb25Db250YWluZXJEb20uY3NzKCd3aWR0aCcsIGAke3JlZ2lvbi53aWR0aH0lYCk7XG4gICAgcmVnaW9uQ29udGFpbmVyRG9tLmNzcyhEaXJlY3Rpb24uTGVmdCwgYCR7cmVnaW9uUG9zaXRpb25YfXB4YCk7XG4gICAgcmVnaW9uQ29udGFpbmVyRG9tLmNzcyhEaXJlY3Rpb24uUmlnaHQsICd1bnNldCcpO1xuICAgIHJlZ2lvbkNvbnRhaW5lckRvbS5jc3MoRGlyZWN0aW9uLlRvcCwgYCR7cmVnaW9uUG9zaXRpb25ZfXB4YCk7XG4gICAgcmVnaW9uQ29udGFpbmVyRG9tLmNzcyhEaXJlY3Rpb24uQm90dG9tLCAndW5zZXQnKTtcbiAgICByZWdpb25Db250YWluZXJEb20uY3NzKCdoZWlnaHQnLCBgJHtyZWdpb24ubGluZXMgKiBsaW5lSGVpZ2h0fXB4YCk7XG4gIH07XG59XG4iXX0=
